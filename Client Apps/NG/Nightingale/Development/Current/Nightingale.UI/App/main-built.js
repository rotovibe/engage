(function () {/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*jslint sloppy: true */
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        hasOwn = Object.prototype.hasOwnProperty,
        aps = [].slice;

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap,
            foundI, foundStarMap, starI, i, j, part,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name && name.charAt(0) === ".") {
            //If have a base name, try to normalize against it,
            //otherwise, assume it is a top-level require that will
            //be relative to baseUrl in the end.
            if (baseName) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that "directory" and not name of the baseName's
                //module. For instance, baseName of "one/two/three", maps to
                //"one/two/three.js", but we want the directory, "one/two" for
                //this normalization.
                baseParts = baseParts.slice(0, baseParts.length - 1);

                name = baseParts.concat(name.split("/"));

                //start trimDots
                for (i = 0; i < name.length; i += 1) {
                    part = name[i];
                    if (part === ".") {
                        name.splice(i, 1);
                        i -= 1;
                    } else if (part === "..") {
                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                            //End of the line. Keep at least one non-dot
                            //path segment at the front so it can be mapped
                            //correctly to disk. Otherwise, there is likely
                            //no path mapping for a path starting with '..'.
                            //This can still fail, but catches the most reasonable
                            //uses of ..
                            break;
                        } else if (i > 0) {
                            name.splice(i - 1, 2);
                            i -= 2;
                        }
                    }
                }
                //end trimDots

                name = name.join("/");
            } else if (name.indexOf('./') === 0) {
                // No baseName, so this is ID is resolved relative
                // to baseUrl, pull off the leading dot.
                name = name.substring(2);
            }
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (hasProp(waiting, name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!hasProp(defined, name) && !hasProp(defining, name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    function onResourceLoad(name, defined, deps){
        if(requirejs.onResourceLoad && name){
            requirejs.onResourceLoad({defined:defined}, {id:name}, deps);
        }
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relName) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relName));
            } else {
                name = normalize(name, relName);
            }
        } else {
            name = normalize(name, relName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i,
            args = [],
            usingExports;

        //Use name if no relName
        relName = relName || name;

        //Call the callback to define the module, if necessary.
        if (typeof callback === 'function') {

            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relName);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (hasProp(defined, depName) ||
                           hasProp(waiting, depName) ||
                           hasProp(defining, depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback.apply(defined[name], args);

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }

        onResourceLoad(name, defined, args);
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, callback).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            //Using a non-zero value because of concern for what old browsers
            //do, and latest browsers "upgrade" to 4 if lower value is used:
            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
            //If want a value immediately, use require('id') instead -- something
            //that works in almond on the global level, but not guaranteed and
            //unlikely to work in other AMD implementations.
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 4);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        config = cfg;
        if (config.deps) {
            req(config.deps, config.callback);
        }
        return req;
    };

    /**
     * Expose module registry for debugging and tooling
     */
    requirejs._defined = defined;

    define = function (name, deps, callback) {

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
            waiting[name] = [name, deps, callback];
        }
    };

    define.amd = {
        jQuery: true
    };
}());

define("../Scripts/almond-custom", function(){});

define('config.app',[],function(){var e="Nightingale",i="api",t={title:e,remoteServiceName:i};return t});
define('config.routes',[],function(){var e=[{route:"",moduleId:"viewmodels/home/index",title:"home",settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"},{title:"todos",subroute:"viewmodels/home/todos/index",content:"To Do"}]}},{route:"home",moduleId:"viewmodels/home/index",title:"home",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"},{title:"todos",subroute:"viewmodels/home/todos/index",content:"To Do"}]}},{route:"ut/(:tokenId)",moduleId:"viewmodels/authenticate",title:"authenticate",settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Authenticating",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"}]}},{route:"populations",moduleId:"viewmodels/populations/index",title:"populations",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Populations",pages:[{title:"careplan",subroute:"populations/careplan/index.html",content:"Plan"},{title:"overview",subroute:"populations/overview/index.html",content:"Overview"}]}},{route:"patients(/:id)",moduleId:"viewmodels/patients/index",title:"Individual",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_patients.png",content:"Individual",pages:[{title:"overview",subroute:"viewmodels/patients/overview/index",content:"Overview"},{title:"goals",subroute:"viewmodels/patients/goals/index",content:"Goals"},{title:"careplan",subroute:"viewmodels/patients/careplan/index",content:"Programs"},{title:"history",subroute:"viewmodels/patients/history/index",content:"History"},{title:"data",subroute:"viewmodels/patients/data/index",content:"Data"},{title:"medications",subroute:"viewmodels/patients/medications/index",content:"Medications"}]}},{route:"designer(/:id)(/:idalso)",moduleId:"exclmodules/designer/index",title:"designer",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_programs.png",content:"Program Designer",pages:[{title:"thinker",subroute:"exclmodules/designer/home/index",content:"Thinker"}]}},{route:"sandbox",moduleId:"../../Sandbox/index",title:"sandbox",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_programs.png",content:"Sandbox",pages:[{title:"sandboxtwo",subroute:"exclmodules/designer/home/index",content:"sandboxtwo"}]}},{route:"insight",moduleId:"viewmodels/insight/index",title:"insight",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_insights.png",content:"Insight",pages:[{title:"Reports",subroute:"viewmodels/insight/reports/index",content:"Reports"}]}},{route:"admin",moduleId:"viewmodels/admin/index",title:"admin",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_admin.png",content:"Admin",pages:[{title:"Concierge",subroute:"viewmodels/admin/concierge/index",content:"Concierge"},{title:"   ",subroute:"viewmodels/admin/reports/index",content:"   "},{title:"    ",subroute:"viewmodels/admin/reports/query.builder",content:"    "}]}}],t={routes:e};return t});
define('config.services',[],function(){function e(e,t,n,o,i){var a=this;a.ResourcePath=e+"/"+t+"/"+n+"/",a.EntityType=o,a.Parameters=i}var t,n,o;-1===window.location.href.indexOf("localhost")&&-1===window.location.href.indexOf("dev")&&-1===window.location.href.indexOf("login.phytel")&&-1===window.location.href.indexOf("ngmodel.phytel")&&-1===window.location.href.indexOf("staging")&&-1===window.location.href.indexOf("nightingalelogin")?(t="//azurephytel.cloudapp.net:59900",n="12345",o="",-1!==window.location.href.indexOf("azurephytel.cloudapp.net")&&(o="UA-44886803-5",console.log("config.services - ENV = QA "))):-1!==window.location.href.indexOf("ngmodel.phytel")?(t="//mdlapi.phytel.com",n="12345",o="UA-44886803-6",console.log("config.services - ENV = MODEL ")):-1!==window.location.href.indexOf("login.phytel")?(t="//api.phytel.com",n="5273f88f69879b2f2c2fbeb3",o="UA-44886803-4",console.log("config.services - ENV = PROD ")):-1!==window.location.href.indexOf("staging")?(t="//azurephytelstaging.cloudapp.net:59900",n="12345",o=""):-1!==window.location.href.indexOf("nightingalelogin")?(t="//nightingalelogin.cloudapp.net:59900",n="12345",o=""):(t="//azurephyteldev.cloudapp.net:59900",n="12345",o="UA-44886803-3",console.log("config.services - ENV = DEV "));var i=t+"/Nightingale",a=t+"/Security",s={remoteServiceName:i,securityServiceName:a,createEndPoint:e,apiAppKey:n,gaId:o};return s});
define('durandal/system',["require","jquery"],function(e,t){function n(e){var t="[object "+e+"]";a["is"+e]=function(e){return s.call(e)==t}}var a,r=!1,i=Object.keys,o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,c=!1,u=Array.isArray,l=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(d){c=!0}e.on&&e.on("moduleLoaded",function(e,t){a.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t){a.setModuleId(e.defined[t.id],t.id)});var p=function(){},m=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==l.call(arguments).length&&"string"==typeof l.call(arguments)[0]?console.log(l.call(arguments).toString()):console.log.apply(console,l.call(arguments));else Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,l.call(arguments))}catch(t){}},g=function(e,t){var n;n=e instanceof Error?e:new Error(e),n.innerError=t;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(a){}throw n};a={version:"2.1.0",noop:p,getModuleId:function(e){return e?"function"==typeof e&&e.prototype?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e&&e.prototype?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},resolveObject:function(e){return a.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(r=e,r?(this.log=m,this.error=g,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=p,this.error=p)),r},log:p,error:p,assert:function(e,t){e||a.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=0|(e+16*Math.random())%16;return e=Math.floor(e/16),("x"==t?n:8|7&n).toString(16)})},acquire:function(){var t,n=arguments[0],r=!1;return a.isArray(n)?(t=n,r=!0):t=l.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||r?n.resolve(l.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=l.call(arguments,1),n=0;n<t.length;n++){var a=t[n];if(a)for(var r in a)e[r]=a[r]}return e},wait:function(e){return a.defer(function(t){setTimeout(t.resolve,e)}).promise()}},a.keys=i||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)o.call(e,n)&&(t[t.length]=n);return t},a.isElement=function(e){return!(!e||1!==e.nodeType)},a.isArray=u||function(e){return"[object Array]"==s.call(e)},a.isObject=function(e){return e===Object(e)},a.isBoolean=function(e){return"boolean"==typeof e},a.isPromise=function(e){return e&&a.isFunction(e.then)};for(var v=["Arguments","Function","String","Number","Date","RegExp"],y=0;y<v.length;y++)n(v[y]);return a});
define('durandal/viewEngine',["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){var t=this.viewPlugin?this.viewPlugin+"!":"";return t+e+this.viewExtension+this.viewPluginParameters},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],a=0;a<e.length;a++){var r=e[a];if(8!=r.nodeType){if(3==r.nodeType){var i=/\S/.test(r.nodeValue);if(!i)continue}n.push(r)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(e){return this.cache[e]},putViewInCache:function(e,t){this.cache[e]=t},createView:function(t){var n=this,a=this.convertViewIdToRequirePath(t),r=this.tryGetViewFromCache(a);return r?e.defer(function(e){e.resolve(r.cloneNode(!0))}).promise():e.defer(function(r){e.acquire(a).then(function(e){var i=n.processMarkup(e);i.setAttribute("data-view",t),n.putViewInCache(a,i),r.resolve(i.cloneNode(!0))}).fail(function(e){n.createFallbackView(t,a,e).then(function(e){e.setAttribute("data-view",t),n.cache[a]=e,r.resolve(e.cloneNode(!0))})})}).promise()},createFallbackView:function(t,n){var a=this,r='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(a.processMarkup('<div class="durandal-view-404">'+r+"</div>"))}).promise()}}});
define('durandal/viewLocator',["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.getAttribute("data-view");if(r==t)return a}}function a(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var r=new RegExp(a(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(r,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,a){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,n,a);if(t.viewUrl)return this.locateView(t.viewUrl,n,a);var i=e.getModuleId(t);return i?this.locateView(this.convertModuleIdToViewId(i),n,a):this.locateView(this.determineFallbackViewId(t),n,a)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),a=n&&n.length>1?n[1]:"";return a=a.trim(),"views/"+a},translateViewIdToArea:function(e){return e},locateView:function(a,r,i){if("string"==typeof a){var o;if(o=t.isViewUrl(a)?t.convertViewUrlToViewId(a):a,r&&(o=this.translateViewIdToArea(o,r)),i){var s=n(i,o);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(a)}).promise()}}});
define('durandal/binder',["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function a(a,u,l,d){if(!u||!l)return r.throwOnErrors?e.error(i):e.log(i,u,d),void 0;if(!u.getAttribute)return r.throwOnErrors?e.error(o):e.log(o,u,d),void 0;var p=u.getAttribute("data-view");try{var m;return a&&a.binding&&(m=a.binding(u)),m=n(m),r.binding(d,u,m),m.applyBindings?(e.log("Binding",p,d),t.applyBindings(l,u)):a&&t.utils.domData.set(u,c,{$data:a}),r.bindingComplete(d,u,m),a&&a.bindingComplete&&a.bindingComplete(u),t.utils.domData.set(u,s,m),m}catch(g){g.message=g.message+";\nView: "+p+";\nModuleId: "+e.getModuleId(d),r.throwOnErrors?e.error(g):e.log(g.message)}}var r,i="Insufficient Information to Bind",o="Unexpected View Type",s="durandal-binding-instruction",c="__ko_bindingContext__";return r={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,s)},bindContext:function(e,t,n,r){return n&&e&&(e=e.createChildContext(n,"string"==typeof r?r:null)),a(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return a(e,t,e,e)}}});
define('durandal/activator',["durandal/system","knockout"],function(e,t){function n(t){return void 0==t&&(t={}),e.isBoolean(t.closeOnDeactivate)||(t.closeOnDeactivate=u.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=u.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=u.defaults.afterDeactivate),t.affirmations||(t.affirmations=u.defaults.affirmations),t.interpretResponse||(t.interpretResponse=u.defaults.interpretResponse),t.areSameItem||(t.areSameItem=u.defaults.areSameItem),t.findChildActivator||(t.findChildActivator=u.defaults.findChildActivator),t}function a(t,n,a){return e.isArray(a)?t[n].apply(t,a):t[n](a)}function r(t,n,a,r,i){if(t&&t.deactivate){e.log("Deactivating",t);var o;try{o=t.deactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),r.resolve(!1),void 0}o&&o.then?o.then(function(){a.afterDeactivate(t,n,i),r.resolve(!0)},function(t){e.log(t),r.resolve(!1)}):(a.afterDeactivate(t,n,i),r.resolve(!0))}else t&&a.afterDeactivate(t,n,i),r.resolve(!0)}function i(t,n,r,i){var o;if(t&&t.activate){e.log("Activating",t);try{o=a(t,"activate",i)}catch(s){return e.log("ERROR: "+s.message,s),r(!1),void 0}}o&&o.then?o.then(function(){n(t),r(!0)},function(t){e.log("ERROR: "+t.message,t),r(!1)}):(n(t),r(!0))}function o(t,n,a,r){return r=e.extend({},l,r),a.lifecycleData=null,e.defer(function(i){function o(){if(t&&t.canDeactivate&&r.canDeactivate){var o;try{o=t.canDeactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),i.resolve(!1),void 0}o.then?o.then(function(e){a.lifecycleData=e,i.resolve(a.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),i.resolve(!1)}):(a.lifecycleData=o,i.resolve(a.interpretResponse(o)))}else i.resolve(!0)}var s=a.findChildActivator(t);s?s.canDeactivate().then(function(e){e?o():i.resolve(!1)}):o()}).promise()}function s(t,n,r,i,o){return r.lifecycleData=null,e.defer(function(s){if(r.areSameItem(n(),t,i,o))return s.resolve(!0),void 0;if(t&&t.canActivate){var c;try{c=a(t,"canActivate",o)}catch(u){return e.log("ERROR: "+u.message,u),s.resolve(!1),void 0}c.then?c.then(function(e){r.lifecycleData=e,s.resolve(r.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),s.resolve(!1)}):(r.lifecycleData=c,s.resolve(r.interpretResponse(c)))}else s.resolve(!0)}).promise()}function c(a,c){var u,l=t.observable(null);c=n(c);var d=t.computed({read:function(){return l()},write:function(e){d.viaSetter=!0,d.activateItem(e)}});return d.__activator__=!0,d.settings=c,c.activator=d,d.isActivating=t.observable(!1),d.forceActiveItem=function(e){l(e)},d.canDeactivateItem=function(e,t,n){return o(e,t,c,n)},d.deactivateItem=function(t,n){return e.defer(function(e){d.canDeactivateItem(t,n).then(function(a){a?r(t,n,c,e,l):(d.notifySubscribers(),e.resolve(!1))})}).promise()},d.canActivateItem=function(e,t){return s(e,l,c,u,t)},d.activateItem=function(t,n,a){var o=d.viaSetter;return d.viaSetter=!1,e.defer(function(s){if(d.isActivating())return s.resolve(!1),void 0;d.isActivating(!0);var p=l();return c.areSameItem(p,t,u,n)?(d.isActivating(!1),s.resolve(!0),void 0):(d.canDeactivateItem(p,c.closeOnDeactivate,a).then(function(a){a?d.canActivateItem(t,n).then(function(a){a?e.defer(function(e){r(p,c.closeOnDeactivate,c,e)}).promise().then(function(){t=c.beforeActivate(t,n),i(t,l,function(e){u=n,d.isActivating(!1),s.resolve(e)},n)}):(o&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}):(o&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}),void 0)}).promise()},d.canActivate=function(){var e;return a?(e=a,a=!1):e=d(),d.canActivateItem(e)},d.activate=function(){var e;return a?(e=a,a=!1):e=d(),d.activateItem(e)},d.canDeactivate=function(e){return d.canDeactivateItem(d(),e)},d.deactivate=function(e){return d.deactivateItem(d(),e)},d.includeIn=function(e){e.canActivate=function(){return d.canActivate()},e.activate=function(){return d.activate()},e.canDeactivate=function(e){return d.canDeactivate(e)},e.deactivate=function(e){return d.deactivate(e)}},c.includeIn?d.includeIn(c.includeIn):a&&d.activate(),d.forItems=function(t){c.closeOnDeactivate=!1,c.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},c.beforeActivate=function(e){var n=d();if(e){var a=t.indexOf(e);-1==a?t.push(e):e=t()[a]}else e=c.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},c.afterDeactivate=function(e,n){n&&t.remove(e)};var n=d.canDeactivate;d.canDeactivate=function(a){return a?e.defer(function(e){function n(){for(var t=0;t<i.length;t++)if(!i[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var r=t(),i=[],o=0;o<r.length;o++)d.canDeactivateItem(r[o],a).then(function(e){i.push(e),i.length==r.length&&n()})}).promise():n()};var a=d.deactivate;return d.deactivate=function(n){return n?e.defer(function(e){function a(a){setTimeout(function(){d.deactivateItem(a,n).then(function(){i++,t.remove(a),i==o&&e.resolve()})},1)}for(var r=t(),i=0,o=r.length,s=0;o>s;s++)a(r[s])}).promise():a()},d},d}var u,l={canDeactivate:!0},d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)},findChildActivator:function(){return null}};return u={defaults:d,create:c,isActivator:function(e){return e&&e.__activator__}}});
define('durandal/composition',["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,a,r,i,o){function s(t,n,a){try{if(t.onError)try{t.onError(n,a)}catch(r){e.error(r)}else e.error(n)}finally{u(t,a,!0)}}function c(e){for(var t=[],n={childElements:t,activeView:null},a=o.virtualElements.firstChild(e);a;)1==a.nodeType&&(t.push(a),a.getAttribute(S)&&(n.activeView=a)),a=o.virtualElements.nextSibling(a);return n.activeView||(n.activeView=t[0]),n}function u(e,t,n){if(P--,0===P){var a=w;w=[],n||setTimeout(function(){for(var n=a.length;n--;)try{a[n]()}catch(r){s(e,r,t)}},1)}l(e)}function l(e){delete e.activeView,delete e.viewElements}function d(t,n,a,r){if(a)n();else if(t.activate&&t.model&&t.model.activate){var i;try{i=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),i&&i.then?i.then(n,function(e){s(t,e,r),n()}):i||void 0===i?n():u(t,r)}catch(o){s(t,o,r)}}else n()}function p(t,n){var t=this;if(t.activeView&&t.activeView.removeAttribute(S),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(S,!0),t.composingNewView&&t.model&&t.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(e){s(t,e,n)}})}catch(a){s(t,a,n)}t.triggerAttach=e.noop}function m(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),a=t.child.getAttribute("data-view");return n!=a}}return!0}return!1}function g(e){for(var t=0,n=e.length,a=[];n>t;t++){var r=e[t].cloneNode(!0);a.push(r)}return a}function v(t){var n=g(t.parts),a=k.getParts(n),r=k.getParts(t.child);for(var o in a){var s=r[o];s||(s=i('[data-part="'+o+'"]',t.child).get(0))?s.parentNode.replaceChild(a[o],s):e.log("Could not find part to override: "+o)}}function y(t){var n,a,r=o.virtualElements.childNodes(t.parent);if(!e.isArray(r)){var i=[];for(n=0,a=r.length;a>n;n++)i[n]=r[n];r=i}for(n=1,a=r.length;a>n;n++)o.removeNode(r[n])}function f(e){o.utils.domData.set(e,D,e.style.display),e.style.display="none"}function h(e){var t=o.utils.domData.get(e,D);e.style.display="none"===t?"block":t}function b(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,a=O.length;a>n;n++)if(t.indexOf(O[n])>-1)return!0;return!1}var k,T={},S="data-active-view",w=[],P=0,N="durandal-composition-data",I="data-part",E=["model","view","transition","area","strategy","activationData","onError"],D="durandal-visibility-data",O=["compose:"],A={complete:function(e){w.push(e)}};return k={composeBindings:O,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:A,addBindingHandler:function(e,t,n){var a,r,i="composition-handler-"+e;t=t||o.bindingHandlers[e],n=n||function(){return void 0},r=o.bindingHandlers[e]={init:function(e,a,r,s,c){if(P>0){var u={trigger:o.observable(null)};k.current.complete(function(){t.init&&t.init(e,a,r,s,c),t.update&&(o.utils.domData.set(e,i,t),u.trigger("trigger"))}),o.utils.domData.set(e,i,u)}else o.utils.domData.set(e,i,t),t.init&&t.init(e,a,r,s,c);return n(e,a,r,s,c)},update:function(e,t,n,a,r){var s=o.utils.domData.get(e,i);return s.update?s.update(e,t,n,a,r):(s.trigger&&s.trigger(),void 0)}};for(a in t)"init"!==a&&"update"!==a&&(r[a]=t[a])},getParts:function(e,t){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var n=0,a=e.length;a>n;n++){var r,i=e[n];i.getAttribute&&(r=i.getAttribute(I),r&&(t[r]=i),i.hasChildNodes()&&!b(i)&&k.getParts(i.childNodes,t))}return t},cloneNodes:g,finalize:function(t,a){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(m(t)){var r=this.convertTransitionToModuleId(t.transition);e.acquire(r).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=n.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews?o.removeNode(t.activeView):f(t.activeView)}}else t.child?y(t):o.virtualElements.emptyNode(t.parent);t.child&&h(t.child),t.triggerAttach(t,a),u(t,a)})}).fail(function(e){s(t,"Failed to load transition ("+r+"). Details: "+e.message,a)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var i=n.getBindingInstruction(t.activeView);!i||void 0!=i.cacheViews&&!i.cacheViews?o.removeNode(t.activeView):f(t.activeView)}t.child?(t.cacheViews||y(t),h(t.child)):t.cacheViews||o.virtualElements.emptyNode(t.parent)}t.triggerAttach(t,a),u(t,a)}else t.cacheViews||o.virtualElements.emptyNode(t.parent),t.triggerAttach(t,a),u(t,a)},bindAndShow:function(e,t,r,i){r.child=e,r.parent.__composition_context=r,r.composingNewView=r.cacheViews?-1==o.utils.arrayIndexOf(r.viewElements,e):!0,d(r,function(){if(r.parent.__composition_context==r){if(delete r.parent.__composition_context,r.binding&&r.binding(r.child,r.parent,r),r.preserveContext&&r.bindingContext)r.composingNewView&&(r.parts&&v(r),f(e),o.virtualElements.prepend(r.parent,e),n.bindContext(r.bindingContext,e,r.model,r.as));else if(e){var i=r.model||T,s=o.dataFor(e);if(s!=i){if(!r.composingNewView)return o.removeNode(e),a.createView(e.getAttribute("data-view")).then(function(e){k.bindAndShow(e,t,r,!0)}),void 0;r.parts&&v(r),f(e),o.virtualElements.prepend(r.parent,e),n.bind(i,e)}}k.finalize(r,t)}else u(r,t)},i,t)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t){var n,i=t(),s=o.utils.unwrapObservable(i)||{},c=r.isActivator(i);if(e.isString(s))return s=a.isViewUrl(s)?{view:s}:{model:s,activate:!c};if(n=e.getModuleId(s))return s={model:s,activate:!c};!c&&s.model&&(c=r.isActivator(s.model));for(var u in s)s[u]=-1!=o.utils.arrayIndexOf(E,u)?o.utils.unwrapObservable(s[u]):s[u];return c?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(e,t){e.strategy(e).then(function(n){k.bindAndShow(n,t,e)})},inject:function(n,a){return n.model?n.view?(t.locateView(n.view,n.area,n.viewElements).then(function(e){k.bindAndShow(e,a,n)}),void 0):(n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,k.executeStrategy(n,a)}).fail(function(e){s(n,"Failed to load view strategy ("+n.strategy+"). Details: "+e.message,a)}):this.executeStrategy(n,a),void 0):(this.bindAndShow(null,a,n),void 0)},compose:function(n,a,r,i){P++,i||(a=k.getSettings(function(){return a},n)),a.compositionComplete&&w.push(function(){a.compositionComplete(a.child,a.parent,a)}),w.push(function(){a.composingNewView&&a.model&&a.model.compositionComplete&&a.model.compositionComplete(a.child,a.parent,a)});var o=c(n);a.activeView=o.activeView,a.parent=n,a.triggerAttach=p,a.bindingContext=r,a.cacheViews&&!a.viewElements&&(a.viewElements=o.childElements),a.model?e.isString(a.model)?e.acquire(a.model).then(function(t){a.model=e.resolveObject(t),k.inject(a,n)}).fail(function(e){s(a,"Failed to load composed module ("+a.model+"). Details: "+e.message,n)}):k.inject(a,n):a.view?(a.area=a.area||"partial",a.preserveContext=!0,t.locateView(a.view,a.area,a.viewElements).then(function(e){k.bindAndShow(e,n,a)})):this.bindAndShow(null,n,a)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s=k.getSettings(t,e);if(s.mode){var c=o.utils.domData.get(e,N);if(!c){var u=o.virtualElements.childNodes(e);c={},"inline"===s.mode?c.view=a.ensureSingleElement(u):"templated"===s.mode&&(c.parts=g(u)),o.virtualElements.emptyNode(e),o.utils.domData.set(e,N,c)}"inline"===s.mode?s.view=c.view.cloneNode(!0):"templated"===s.mode&&(s.parts=c.parts),s.preserveContext=!0}k.compose(e,s,i,!0)}},o.virtualElements.allowedBindings.compose=!0,k});
define('durandal/events',["durandal/system"],function(e){var t=/\s+/,n=function(){},a=function(e,t){this.owner=e,this.events=t};return a.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},a.prototype.on=a.prototype.then,a.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,r){var i,o,s;if(n){for(i=this.callbacks||(this.callbacks={}),e=e.split(t);o=e.shift();)s=i[o]||(i[o]=[]),s.push(n,r);return this}return new a(this,e)},n.prototype.off=function(n,a,r){var i,o,s,c;if(!(o=this.callbacks))return this;if(!(n||a||r))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(o);i=n.shift();)if((s=o[i])&&(a||r))for(c=s.length-2;c>=0;c-=2)a&&s[c]!==a||r&&s[c+1]!==r||s.splice(c,2);else delete o[i];return this},n.prototype.trigger=function(e){var n,a,r,i,o,s,c,u;if(!(a=this.callbacks))return this;for(u=[],e=e.split(t),i=1,o=arguments.length;o>i;i++)u[i-1]=arguments[i];for(;n=e.shift();){if((c=a.all)&&(c=c.slice()),(r=a[n])&&(r=r.slice()),r)for(i=0,o=r.length;o>i;i+=2)r[i].apply(r[i+1]||this,u);if(c)for(s=[n].concat(u),i=0,o=c.length;o>i;i+=2)c[i].apply(c[i+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n});
define('durandal/app',["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,a,r){function i(){return e.defer(function(t){return 0==s.length?(t.resolve(),void 0):(e.acquire(s).then(function(n){for(var a=0;a<n.length;a++){var r=n[a];if(r.install){var i=c[a];e.isObject(i)||(i={}),r.install(i),e.log("Plugin:Installed "+s[a])}else e.log("Plugin:Loaded "+s[a])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var o,s=[],c=[];return o={title:"Application",configurePlugins:function(t,n){var a=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<a.length;r++){var i=a[r];s.push(n+i),c.push(t[i])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){i().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(a,r,i){function o(){if(c.model)if(c.model.canActivate)try{var t=c.model.canActivate();t&&t.then?t.then(function(e){e&&n.compose(s,c)}).fail(function(t){e.error(t)}):t&&n.compose(s,c)}catch(a){e.error(a)}else n.compose(s,c);else n.compose(s,c)}var s,c={activate:!0,transition:r};s=!i||e.isString(i)?document.getElementById(i||"applicationHost"):i,e.isString(a)?t.isViewUrl(a)?c.view=a:c.model=a:c.model=a,e.isString(c.model)?e.acquire(c.model).then(function(t){c.model=e.resolveObject(t),o()}).fail(function(t){e.error("Failed to load root module ("+c.model+"). Details: "+t.message)}):o()}},a.includeIn(o),o});
requirejs.config({
    paths: {
        'text': '../Scripts/text',
        'durandal': '../Scripts/durandal',
        'plugins': '../Scripts/durandal/plugins',
        'transitions': '../Scripts/durandal/transitions'
    },
    waitSeconds: 15,
    // Bump this version to have users loading from server instead of cache
    urlArgs: 'v=0.1.7.7'
});

// TODO: Remove this
jQuery.support.cors = true;

define('jquery', [],function () { return jQuery; });
define('knockout', ko);



define('main',['durandal/system', 'durandal/app', 'durandal/viewLocator', 'durandal/composition'],  function (system, app, viewLocator, composition) {
    
    app.title = 'Nightingale';

    app.configurePlugins({
        router: true,
        dialog: true,
        widget: {
            kinds: ['singleselect', 'multiselect', 'chsnsingle', 'chsnsingledark']
        }
    });

    app.start().then(function () {
        //Replace 'viewmodels' in the moduleId with 'views' to locate the view.
        //Look for partial views in a 'views' folder in the root.
        viewLocator.useConvention();
		composition.addBindingHandler('hasFocus');	//fix for durandal bug missing KO binding.
        //Show the app by setting the root view model for our application with a transition.
        app.setRoot('viewmodels/shell/shell');
    });
});
define('services/validatorfactory',[],function(){function e(e,t,a){var n=e.getEntityType(t);ko.utils.arrayForEach(a,function(e){var t=n.getProperty(e.name);t.displayName=e.displayName,ko.utils.arrayForEach(e.validatorsList,function(e){t.validators.push(e)})})}var t={fixNamesAndRegisterValidators:e};return t});
define('services/formatter',[],function(){var e=function(){};return e.padZeroLeft=function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a},e.formatSeparators=function(e,t,a){var n=t.split(a);e=e.replace(new RegExp(a,"g"),"");for(var r=t.replace(new RegExp(a,"g"),"").length,i=0,o=0,s="";i<n.length&&o<e.length;){var d=e.slice(o,o+n[i].length);o+=d.length,s+=d,d.length===n[i].length&&r-1>o&&(s+=a),i+=1}return s},e.date=function(){},e.date.optimizeYear=function(e){var t=e.split("/");if(t.length>2&&t[2].length>0&&t[2].length<=2){var a=t[2];1==a.length&&(a="0"+a);var n=Number(String(moment().year()).slice(2,4));a=Number(a)>n?"19"+a:"20"+a;var r=t[0]+"/"+t[1]+"/"+a;e=r,moment(e).isValid()&&(e=moment(e).format("MM/DD/YYYY"))}return e},e.date.optimizeDate=function(e){function t(e,t){var n=e;if(e.length>0)if(e.length>=2){if(n=e.slice(0,2),Number(n)>12&&(n="12"),Number(n)<1&&(n="01"),n+="/",e.length>2){var r=e.slice(2,4);n+=a(r,e.length<4),e.length>4&&(n+=e.slice(4,8))}}else 1===e.length&&(Number(e)>1||t)&&(n=0===Number(e)?"01/":"0"+e+"/");return n}function a(e,t){var a=e;return e.length>0&&(1==e.length?((t||Number(e)>3)&&(a="0"+e+"/"),t&&Number(e)<1&&(a="01/")):e.length>=2&&(a=e.slice(0,2),Number(a)>31&&(a="31"),Number(a)<1&&(a="01"),a+="/",e.length>2&&(a+=e.slice(2)))),a}var n=e;if(e){var r=e.split("/");r.length>=1&&(n=t(r[0],r.length>1)),r.length>=2&&(n+=a(r[1],r.length>2),r.length>2&&(n+=r[2]))}return n},e});
define('services/customvalidators',["services/formatter"],function(e){function t(t,a){if(null==t||""==t)return!0;if(isNaN(new Date(t).valueOf()))return a.msg="'"+t+"' is not a valid "+a.property.displayName,!1;if(!moment(t,["MM-DD-YYYY","MM/DD/YYYY"],!0).isValid()){var i=e.date.optimizeDate(t);if(i=e.date.optimizeYear(i),!moment(i,["MM-DD-YYYY","MM/DD/YYYY"],!0).isValid())return a.msg="'"+t+"' is not a valid "+a.property.displayName,!1}if(a.minDate){var n=a.minDate,r=a.property.displayName+" must be on or after "+moment(n).format("MM/DD/YYYY");if(("now"===n||"today"===n)&&(r=a.property.displayName+" must be today or in the past",n=moment()),!moment(n).isValid())return!0;if(moment(t).isBefore(moment(n).format("MM/DD/YYYY"),"days"))return a.msg=r,!1}if(a.maxDate){var o=a.maxDate,r=a.property.displayName+" must be on or before "+moment(o).format("MM/DD/YYYY");if(("now"===o||"today"===o)&&(r=a.property.displayName+" must be today or in the past",o=moment()),!moment(o).isValid())return!0;if(moment(t).isAfter(moment(o).format("MM/DD/YYYY"),"days"))return a.msg=r,!1}return!0}function a(e){if(null==e)return!0;var t=e.replace("-","");return 0===parseInt(t)}var i={};return i.zipValidator=breeze.Validator.makeRegExpValidator("zipVal",/^\d{5}([\-]\d{4})?$/,"The %displayName% '%value%' is not a valid U.S. zip code."),i.ssnValidator=breeze.Validator.makeRegExpValidator("SSN",/^\d{3}-?\d{2}-?\d{4}$/,"'%value%' is not a valid %displayName%"),i.dateValidator=function(e){return new breeze.Validator("dateValidator",t,{minDate:e.minDate,maxDate:e.maxDate,messageTemplate:"%msg%"})},i.isNotAllZeroes=new breeze.Validator("notAllZeroes",a,{messageTemplate:"'%displayName%' must not be all zeroes."}),i={validators:i}});
define('models/base',["services/validatorfactory","services/customvalidators"],function(e,t){function a(e,t){var a=this;a.propertyName=ko.observable(e),a.propertyValue=ko.observable(t)}function i(e,t,a){var i=this;i.Property=e,i.Operator=a,i.Value=t}function n(e,t,a,i,n,r,o){var s=this;s.Title=ko.observable(e),s.Entity=t,s.TemplatePath=ko.observable(a),s.Showing=i?i:!1,s.saveChanges=function(){if(n)n(),s.Showing(!1);else{p();var e=ko.unwrap(s.Entity);e.saveChanges(),s.Showing(!1)}},s.cancelChanges=function(){if(r)r(),s.Showing(!1);else{var e=ko.unwrap(s.Entity);e.cancelChanges(),s.Showing(!1)}},s.delete=function(){o?(o(),s.Showing(!1)):s.Showing(!1)},s.deleteText=ko.observable("Delete"),s.canDelete=ko.observable(!1)}function r(e,t,a,i){var n=this;n.Type=ko.observable(e),n.Title=ko.observable(t),n.IconPath=ko.observable(a),n.Path=ko.observable(i)}function o(e,t,a){var i=this;i.Id=e,i.Gender=t,i.Description=a,i.SmallImgSrc="/NightingaleUI/Content/images/patient_"+a.toLowerCase()+"_small.png",i.LargeImgSrc="/NightingaleUI/Content/images/patient_"+a.toLowerCase()+"_large.png"}function s(e,t,a){var i=this;i.Id=e,i.Code=t,i.Name=a}function d(e,t){var a=this;a.id=ko.observable(e),a.name=ko.observable(t)}function l(e,t){var a=this;a.PropName=e,a.Message=t}function m(a){function i(e){p(),e.isNew=ko.observable(!1),e.isDuplicate=ko.observable(!1),e.forcedSave=!1,e.age=ko.computed(function(){if(!e.dOB())return"";var t=moment(e.dOB()).add("hours",23),a=moment(new Date).add("days",1);return!t||t>a||!t.isValid()?"":a.diff(t,"years")}),e.fullFirstName=ko.computed(function(){var t=e.firstName(),a=e.preferredName(),i=e.middleName()?e.middleName().substr(0,1)+".":"",n=a?a:2===i.length?t+" "+i:t;return n}),e.fullLastName=ko.computed(function(){var t=e.lastName(),a=e.suffix(),i=a?t+" "+a:t;return i}),e.fullName=ko.computed(function(){var t=e.fullFirstName(),a=e.fullLastName();return t?t+" "+a:a}),e.formattedSSN=ko.computed(function(){var t="";return e.lastFourSSN()&&(t="XXX-XX-"+e.lastFourSSN()),t}),e.genderModel=ko.computed({read:function(){p();var t,a=e.gender()?e.gender().toLowerCase():"";return"m"===a||"male"===a?(e.gender("M"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"m"===e.Id})):"f"===a||"female"===a?(e.gender("F"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}}),e.forceSave=function(){e.forcedSave=!0,e.saveChanges()},e.saveChanges=function(){p();var t=e;g.saveIndividual(t)},e.cancelChanges=function(){p(),g.cancelEntityChanges(e)},e.isNew.subscribe(function(){}),e.isValid=ko.observable(!0),e.canSave=ko.computed(function(){return e.isValid()&&!e.isDuplicate()}),e.validationErrors=ko.observableArray([]),e.entityAspect.validationErrorsChanged.subscribe(function(){var t=e.entityAspect.hasValidationErrors,a=[];if(t){e.isValid(!1);var i=e.entityAspect.getValidationErrors();ko.utils.arrayForEach(i,function(e){a.push(new l(e.propertyName,e.errorMessage))}),e.validationErrors(a)}else e.validationErrors([]),e.isValid(!0)}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),null===e.firstName()&&(e.firstName("."),setTimeout(function(){e.firstName("")},1)),null===e.lastName()&&(e.lastName("."),setTimeout(function(){e.lastName("")},1))}function n(e){e.genderModel=ko.computed({read:function(){p();var t,a=e.gender()?e.gender().toLowerCase():"";return"m"===a||"male"===a?(e.gender("M"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"m"===e.Id})):"f"===a||"female"===a?(e.gender("F"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(g.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}})}function r(e){e.level&&e.level()||e.level("1")}function o(e){e.type=ko.computed(function(){return e.result()||0===e.result()?0===e.result()?"error":"warning":""}),e.alertPath=ko.computed(function(){return e.type()?"shell/alerttypes/"+e.type()+".html":""}),e.showing=ko.observable(!0);var t=e.showing.subscribe(function(){p(),g.alerts.remove(e),t.dispose()})}a.addEntityType({shortName:"Patient",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"},displaySystemId:{dataType:"String"},displaySystemName:{dataType:"String"},displayLabel:{dataType:"String"},providerId:{dataType:"Int64"},dOB:{dataType:"String"},gender:{dataType:"String"},marital:{dataType:"String"},background:{dataType:"String"},protectedFlag:{dataType:"Boolean"},lastFourSSN:{dataType:"String"},fullSSN:{dataType:"String"},priority:{dataType:"String"},flagged:{dataType:"Boolean"},twitterHandle:{dataType:"String"}},navigationProperties:{provider:{entityTypeName:"Provider",isScalar:!0,associationName:"Provider_Patients",foreignKeyNames:["providerId"]},priorityModel:{entityTypeName:"Priority",isScalar:!0,associationName:"Priority_Patients",foreignKeyNames:["priority"]},problems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Patient"},programs:{entityTypeName:"Program",isScalar:!1,associationName:"Patient_Programs"},goals:{entityTypeName:"Goal",isScalar:!1,associationName:"Patient_Goals"},notes:{entityTypeName:"Note",isScalar:!1,associationName:"Patient_Notes"},todos:{entityTypeName:"ToDo",isScalar:!1,associationName:"Patient_Todos"},allergies:{entityTypeName:"PatientAllergy",isScalar:!1,associationName:"Patient_Allergies"},medications:{entityTypeName:"PatientMedication",isScalar:!1,associationName:"Patient_Medications"},careMembers:{entityTypeName:"CareMember",isScalar:!1,associationName:"Patient_CareMembers"},contactCard:{entityTypeName:"ContactCard",isScalar:!0,associationName:"Patient_ContactCard"},observations:{entityTypeName:"PatientObservation",isScalar:!1,associationName:"Patient_Observations"},patientSystems:{entityTypeName:"PatientSystem",isScalar:!1,associationName:"Patient_PatientSystems"}}});var s=[{name:"firstName",displayName:"First Name",validatorsList:[c.required(),c.maxLength({maxLength:20})]},{name:"lastName",displayName:"Last Name",validatorsList:[c.required(),c.maxLength({maxLength:20})]},{name:"fullSSN",displayName:"SSN",validatorsList:[t.validators.ssnValidator]},{name:"dOB",displayName:"DOB",validatorsList:[t.validators.dateValidator({minDate:moment().subtract(200,"year").format("MM/DD/YYYY"),maxDate:"today"})]}];e.fixNamesAndRegisterValidators(a,"Patient",s),a.addEntityType({shortName:"PatientProblem",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},patientID:{dataType:"String"},problemID:{dataType:"String"},level:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"PatientProblem_Patient",foreignKeyNames:["patientID"]},problem:{entityTypeName:"Problem",isScalar:!0,associationName:"PatientProblem_Problem",foreignKeyNames:["problemID"]}}}),a.addEntityType({shortName:"Problem",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patientProblems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Problem"}}}),a.addEntityType({shortName:"Provider",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Provider_Patients"}}}),a.addEntityType({shortName:"Cohort",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sName:{dataType:"String"},description:{dataType:"String"}}}),a.addEntityType({shortName:"Identifier",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"}}}),a.addEntityType({shortName:"AllergySearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},displayName:{dataType:"String"}}}),a.addEntityType({shortName:"MedicationSearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},displayName:{dataType:"String"}}}),a.addEntityType({shortName:"CareMember",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},gender:{dataType:"String"},preferredName:{dataType:"String"},patientId:{dataType:"String"},contactId:{dataType:"String"},typeId:{dataType:"String"},primary:{dataType:"Boolean"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_CareMembers",foreignKeyNames:["patientId"]},careManager:{entityTypeName:"CareManager",isScalar:!0,associationName:"CareManager_CareMembers",foreignKeyNames:["contactId"]},type:{entityTypeName:"CareMemberType",isScalar:!0,associationName:"CareMember_Type",foreignKeyNames:["typeId"]}}}),a.addEntityType({shortName:"Alert",namespace:"Nightingale",autoGeneratedKeyType:breeze.AutoGeneratedKeyType.Identity,dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},result:{dataType:"Int64"},reason:{dataType:"String"}}}),a.addEntityType({shortName:"PatientSystem",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},systemId:{dataType:"String"},systemName:{dataType:"String"},displayLabel:{dataType:"String"},deleteFlag:{dataType:"Boolean"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_PatientSystems",foreignKeyNames:["patientId"]}}}),a.registerEntityTypeCtor("Patient",null,i),a.registerEntityTypeCtor("PatientProblem",null,r),a.registerEntityTypeCtor("Alert",null,o),a.registerEntityTypeCtor("CareMember",null,n)}function p(){g||(g=require("services/datacontext"))}var g;breeze.DataType;var c=breeze.Validator,y={property:a,Parameter:i,modal:n,quickAddSection:r,Gender:o,Day:s,SomeType:d,validationError:l,initialize:m};return y});
define('services/session',["models/base"],function(){function e(){var e="/1.0/"+m().contracts()[0].number()+"/logout";t(),l.logOutUserByToken(e).then(a)}function t(){l||(l=require("services/datacontext"))}function a(){n(),window.location.href="/Logout.aspx"}function n(){return i(),d("ngSession"),!0}function r(){if(p){var e=ko.toJS(m);e=JSON.stringify(e,["userId","aPIToken","firstName","lastName","userName","aPIToken","contracts","id","name","number"]),localStorage.setItem("ngSession",e)}return y&&o("ngSession",e),!0}function i(){localStorage.clear()}function o(e,t){var a=escape(t);document.cookie=e+"="+a}function s(e){var t=document.cookie,a=t.indexOf(" "+e+"=");if(-1==a&&(a=t.indexOf(e+"=")),-1==a)t=null;else{a=t.indexOf("=",a)+1;var n=t.indexOf(";",a);-1==n&&(n=t.length),t=unescape(t.substring(a,n))}return t}function d(e){var t=e?e:"ngSession";document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function c(){function e(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function t(){var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}return p=e(),y=t(),{ls:p,cookies:y}}function u(){if(t(),c(),p){var e=localStorage.getItem("ngSession"),a=JSON.parse(e);if(a&&a.aPIToken)return m(l.createUserFromSessionUser(a)),m()}else if(y){var a=s("ngSession");if(a&&a.aPIToken)return m(l.createUserFromSessionUser(a)),m()}}var l,p=!1,y=!1,m=ko.observable(),g={setLocalStorageAndCookie:r,deleteCookie:d,currentUser:m,logOff:e,runTests:c,getUserFromSession:u};return g});
define('services/dateHelper',["services/formatter"],function(e){var t=function(){};return t.isValidDate=function(t,a){if(null===t||""===t||void 0===t)return!1;if("[object Date]"===Object.prototype.toString.call(t))return isNaN(t.valueOf())?!1:!0;if(a&&0!==t.search(/^\d{2}\/\d{2}\/\d{4}/))return!1;if(!moment(t,["MM-DD-YYYY","MM/DD/YYYY"],!0).isValid()){if(moment(t).isValid()&&"YYYY-MM-DDTHH:mm:ss.SSSSZ"===moment(t)._f)return!0;if(a||(t=e.date.optimizeDate(t),t=e.date.optimizeYear(t)),!moment(t,["MM/DD/YYYY"],!0).isValid())return!1}return!0},t.isInvalidDate=function(t,a){if(null==t||""==t)return null;if(isNaN(new Date(t).valueOf()))return{Message:"is not valid"};if(!moment(t,["MM/DD/YYYY","MM-DD-YYYY","M/D/YY","M/D/YYYY"],!0).isValid()){var n=moment(t,["YYYY-MM-DDTHH:mm:ss.SSSSZ"],!0);if(!n.isValid()){var r=e.date.optimizeDate(t);if(r=e.date.optimizeYear(t),!moment(r,["MM/DD/YYYY"],!0).isValid())return{Message:"is not valid"}}}if(a&&a.minDate){var i,o=a.minDate;if("now"===o||"today"===o?(i=o,o=moment()):i=moment(o).format("MM/DD/YYYY"),!moment(o).isValid())return!0;if(moment(t).isBefore(moment(o),"days"))return{Message:"can not be before "+i}}if(a&&a.maxDate){var s,c=a.maxDate;if("now"===c||"today"===c?(s=c,c=moment()):s=moment(c).format("MM/DD/YYYY"),!moment(c).isValid())return!0;if(moment(t).isAfter(moment(c),"days"))return{Message:"can not be after "+s}}return null},t.isSameDate=function(e,t){return moment(e.format("MM/DD/YYYY")).isSame(t.format("MM/DD/YYYY"))},t.setDateValue=function(e,t){return t.date(e.date()),t.month(e.month()),t.year(e.year()),t},t});
define('models/allergies',["services/session","services/dateHelper"],function(e,t){function n(e){function n(e){e.isNew=ko.observable(!1),e.isUserCreated=ko.observable(!1),e.typeString=ko.computed(function(){i();var t="";return ko.utils.arrayForEach(e.allergyTypeIds(),function(e){var n=ko.utils.arrayFirst(a.enums.allergyTypes(),function(t){return t.id()===e.id()});n&&(t+=n.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var n=!1,i=[],a={maxDate:"today"},o=e.startDate(),r=e.endDate();if(o){var s=t.isInvalidDate(o,a);null!=s&&(i.push({PropName:"startDate",Message:e.allergyName()+" Start Date "+s.Message}),n=!0)}if(r){var l=t.isInvalidDate(r,a);null!=l&&(i.push({PropName:"endDate",Message:e.allergyName()+" End Date "+l.Message}),n=!0),o&&!n&&moment(o).isAfter(moment(r))&&(i.push({PropName:"endDate",Message:e.allergyName()+" End Date must be on or after: "+moment(o).format("MM/DD/YYYY")}),i.push({PropName:"startDate",Message:e.allergyName()+" Start Date must be on or before: "+moment(r).format("MM/DD/YYYY")}),n=!0)}return e.validationErrors(i),!n}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.needToSave=function(){var t=(e.entityAspect.entityState.isModified()||e.isNew())&&e.sourceId();return t},e.reactionString=ko.computed(function(){i();var t="";return ko.utils.arrayForEach(e.reactionIds(),function(e){var n=ko.utils.arrayFirst(a.enums.reactions(),function(t){return t.id()===e.id()});n&&(t+=n.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.setStatus=function(t,n){function o(){e.isNew(!1),e.isUserCreated(!1),e.entityAspect.acceptChanges(),a.createAlert("warning",n)}i(),e.statusId(t),a.saveAllergies([e],"Update").then(o)},e.inactivate=function(){e.setStatus(2,"Allergy has been deactivated!")},e.activatePatientAllergy=function(){e.setStatus(1,"Allergy has been activated!")},e.deletePatientAllergy=function(){function t(){return!0}var n="You are about to delete: "+e.allergyName()+" from this individual.  Press OK to continue, or cancel to return without deleting.",o=confirm(n);return o!==!0?!1:(i(),a.deletePatientAllergy(e).then(t),void 0)}}e.addEntityType({shortName:"PatientAllergy",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},allergyName:{dataType:"String"},allergyId:{dataType:"String"},patientId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},startDate:{dataType:"String"},endDate:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},statusId:{dataType:"String"},sourceId:{dataType:"String"},systemName:{dataType:"String"},allergyTypeIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},reactionIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},severityId:{dataType:"String"},notes:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Allergies",foreignKeyNames:["patientId"]},severity:{entityTypeName:"Severity",isScalar:!0,associationName:"Allergy_Severity",foreignKeyNames:["severityId"]},status:{entityTypeName:"AllergyStatus",isScalar:!0,associationName:"Allergy_Status",foreignKeyNames:["statusId"]},source:{entityTypeName:"AllergySource",isScalar:!0,associationName:"Allergy_Source",foreignKeyNames:["sourceId"]}}}),e.addEntityType({shortName:"AllergyStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.registerEntityTypeCtor("PatientAllergy",null,n)}function i(){a||(a=require("services/datacontext"))}var a;breeze.DataType;var o={initialize:n};return o});
define('models/contacts',["services/session","services/validatorfactory","services/customvalidators"],function(){function e(e){function n(e){e.activeTab=ko.observable("general"),e.prefCommMethods=ko.computed(function(){t();var n="";return ko.utils.arrayForEach(e.modes(),function(e){if(e.optOut()&&e.preferred(!1),e.preferred()){var t=ko.utils.arrayFirst(a.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});n+=t.name()+", "}}),n.length>0&&(n=n.substr(0,n.length-2)),n}),e.secondaryLanguagesText=ko.computed(function(){t();var n="";return ko.utils.arrayForEach(e.languages(),function(e){if(!e.preferred()){var t=ko.utils.arrayFirst(a.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});n+=t.name()+", "}}),n.length>0&&(n=n.substr(0,n.length-2)),n}),e.preferredTimesOfDay=ko.computed(function(){t();var n="";return ko.utils.arrayForEach(e.preferredTimesOfDayIds(),function(e){var t=ko.utils.arrayFirst(a.enums.timesOfDay(),function(t){return t.id()===e.id()});n+=t.name()+", "}),n.length>0&&(n=n.substr(0,n.length-2)),n}),e.preferredDaysOfWeek=ko.computed(function(){t();var n="";return 7===e.preferredDaysOfWeekIds().length?n="Any":(ko.utils.arrayForEach(e.preferredDaysOfWeekIds(),function(e){var t=ko.utils.arrayFirst(a.enums.daysOfWeek(),function(t){return t.Id===e.id()});n+=t.Code+", "}),n.length>0&&(n=n.substr(0,n.length-2))),n}),e.addPhone=function(){t();var n=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Phone"===e.name()});if(n&&!n.optOut()){var r=-1*(e.phones().length+1),i=a.enums.phoneTypes()[0].id(),o=a.createComplexType("Phone",{id:r,typeId:i});o.isFocused(!0),e.phones.push(o)}},e.removePhone=function(t){e.phones.remove(t)},e.addEmail=function(){t();var n=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Email"===e.name()});if(n&&!n.optOut()){var r=e.emails().length+1,i=a.enums.emailTypes()[0].id(),o=a.createComplexType("Email",{id:r,typeId:i});e.emails.push(o)}},e.removeEmail=function(t){e.emails.remove(t)},e.addAddress=function(){t();var n=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Mail"===e.name()});if(n&&!n.optOut()){var r=e.addresses().length+1,i=a.enums.addressTypes()[0].id(),o=a.createComplexType("Address",{id:r,typeId:i});e.addresses.push(o)}},e.removeAddress=function(t){e.addresses.remove(t)},e.newLanguage=ko.observable(null),e.addLanguage=function(){t();var n=e.newLanguage(),r=a.createComplexType("ContactLanguage",{lookUpLanguageId:n.id(),name:n.name()});e.languages.push(r),e.newLanguage(null)},e.removeLanguage=function(t){e.languages.remove(t)},e.preferredPhone=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.phonePreferred(!1)}),t?t:null},write:function(t){t&&t.phonePreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.phonePreferred(!1)})}}).extend({throttle:50}),e.preferredText=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.textPreferred(!1)}),t?t:null},write:function(t){t&&t.textPreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.textPreferred(!1)})}}).extend({throttle:50}),e.preferredEmail=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.emails(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.emails(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.preferredAddress=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.addresses(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.addresses(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.preferredLanguage=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.languages(),function(e){e.preferred()&&(t=e)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.languages(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.phoneOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(a){if(a&&"Phone"===a.name()){var n=a.optOut();n&&l(e),t=n}}),t}),e.textOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(a){if(a&&"Text"===a.name()){var n=a.optOut();n&&u(e),t=n}}),t}),e.addressOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(a){if(a&&"Mail"===a.name()){var n=a.optOut();n&&p(e),t=n}}),t}),e.emailOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(a){if(a&&"Email"===a.name()){var n=a.optOut();n&&m(e),t=n}}),t}),e.phoneValidationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){function t(){var t=[],a=!1;return ko.utils.arrayForEach(e.phones(),function(e){e.validate();var n=e.isValid();n||(t.push({Message:e.validationMessage()}),a=!0)}),e.phoneValidationErrors(t),a}return!t()}),e.phoneValidationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.phoneValidationErrors(),function(e){t.push(e.PropName+e.Value)}),t}),e.canSave=ko.computed(function(){return e.isValid()}),e.saveChanges=function(){t(),a.saveContactCard(e)},e.cancelChanges=function(){t(),a.cancelAllChangesToContactCard(e)}}function r(e){t(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(a.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});return t?t.name():void 0})}function i(e){t(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(a.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});return t?t.name():void 0})}function o(e){e.type=ko.computed(function(){t();var n=e.typeId(),r=null;return n&&(r=ko.utils.arrayFirst(a.enums.phoneTypes(),function(e){return n===e.id()})),r}),e.formattedNumber=ko.computed(function(){var t=e.number();return t?(t=t.toString(),t.replace(/(\d{3})-?(\d{3})-?(\d{4})/,"($1) $2-$3")):null}),e.isValid=ko.observable(!0),e.validationMessage=ko.observable(),e.validate=function(){if(e.number()&&e.number().match(/^\d{3}-?\d{3}-?\d{4}$/))return e.isValid(!0),e.validationMessage(null),!0;e.isValid(!1);var t;return e.number()&&e.number().length>0?(t=e.number()+" is not a valid Phone Number",e.number().length<12&&(t+=" (must have 10 digits)")):t="Phone Number is required",e.validationMessage(t),!1},e.isFocused=ko.observable(!1)}function s(e){e.type=ko.computed(function(){t();var n=e.typeId(),r=null;return n&&(r=ko.utils.arrayFirst(a.enums.emailTypes(),function(e){return n===e.id()})),r})}function d(e){e.type=ko.computed(function(){t();var n=e.typeId(),r=null;return n&&(r=ko.utils.arrayFirst(a.enums.addressTypes(),function(e){return n===e.id()})),r}),e.state=ko.computed(function(){t();var n=e.stateId();if(n){var r=ko.utils.arrayFirst(a.enums.states.peek(),function(e){return e.id()===n});return r}return null}),e.cityStateZip=ko.computed(function(){var t=e.city()||"",a=e.state()?e.state().code():"",n=e.postalCode()||"";return t+", "+a+"  "+n}),e.fullFormatted=ko.computed(function(){var t=e.line1()?e.line1()+" \n":"",a=e.line2()?e.line2()+" \n":"",n=e.line3()?e.line3()+" \n":"",r=e.cityStateZip();return t+a+n+r})}function l(e){ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred(!1)})}function u(e){ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred(!1)})}function p(e){ko.utils.arrayForEach(e.addresses(),function(e){e.preferred(!1)})}function m(e){ko.utils.arrayForEach(e.emails(),function(e){e.preferred(!1)})}e.addEntityType({shortName:"ContactCard",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},timeZoneId:{dataType:"String"},preferredTimesOfDayIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},preferredDaysOfWeekIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},languages:{complexTypeName:"ContactLanguage:#Nightingale",isScalar:!1},modes:{complexTypeName:"ContactMode:#Nightingale",isScalar:!1},emails:{complexTypeName:"Email:#Nightingale",isScalar:!1},phones:{complexTypeName:"Phone:#Nightingale",isScalar:!1},addresses:{complexTypeName:"Address:#Nightingale",isScalar:!1}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_ContactCard",foreignKeyNames:["patientId"]},timeZone:{entityTypeName:"TimeZone",isScalar:!0,associationName:"TimeZone_ContactCards",foreignKeyNames:["timeZoneId"]}}}),e.addEntityType({shortName:"Phone",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},number:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},isText:{dataType:"Boolean"},phonePreferred:{dataType:"Boolean"},textPreferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Email",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactLanguage",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpLanguageId:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactMode",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpModeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Address",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},line1:{dataType:"String"},line2:{dataType:"String"},line3:{dataType:"String"},city:{dataType:"String"},stateId:{dataType:"String"},postalCode:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.registerEntityTypeCtor("ContactCard",null,n),e.registerEntityTypeCtor("ContactLanguage",null,r),e.registerEntityTypeCtor("ContactMode",null,i),e.registerEntityTypeCtor("Address",null,d),e.registerEntityTypeCtor("Phone",null,o),e.registerEntityTypeCtor("Email",null,s)}function t(){a||(a=require("services/datacontext"))}var a;breeze.DataType,breeze.Validator;var n={initialize:e};return n});
define('models/controls',[],function(){function e(){return this}var t={modal:e};return t});
define('models/goals',["services/session"],function(){function e(e){function t(e){e.isNew=ko.observable(!1),e.relatedInterventions=ko.computed(function(){a();var t=[];return e.goal()&&ko.utils.arrayForEach(e.goal().interventions(),function(a){var i=ko.utils.arrayFirst(a.barrierIds(),function(t){return t.id()===e.id()});i&&t.push(a)}),t}),e.relatedTasks=ko.computed(function(){a();var t=[];return e.goal()&&ko.utils.arrayForEach(e.goal().tasks(),function(a){var i=ko.utils.arrayFirst(a.barrierIds(),function(t){return t.id()===e.id()});i&&t.push(a)}),t})}function r(e){e.isNew=ko.observable(!1),e.focusAreaString=ko.computed(function(){a();var t="";return ko.utils.arrayForEach(e.focusAreaIds(),function(e){var a=ko.utils.arrayFirst(i.enums.focusAreas(),function(t){return t.id()===e.id()});t+=a.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.programString=ko.computed(function(){a();var t="",i=e.programIds();if(e.patient()&&e.patient().programs()){var r=e.patient().programs();ko.utils.arrayForEach(i,function(e){var a=ko.utils.arrayFirst(r,function(t){return t.id()===e.id()});t+=a?a.name()+", ":""}),t.length>0&&(t=t.substr(0,t.length-2))}return 0===t.length&&(t="None"),t}),e.isLoaded=!1}function n(e){e.barrierString=ko.computed(function(){a();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(a){var i=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===a.id()});i&&(t+=i.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t}),e.computedGoalName=ko.computed(function(){var t="";return e.goal()?t=e.goal().name():e.goalName()&&(t=e.goalName()),t}),e.computedPatient=ko.computed(function(){var t="";return e.goal()&&e.goal().patient()?t=e.goal().patient():e.goalName()&&(t=e.patientDetails()),t})}function o(e){e.barrierString=ko.computed(function(){a();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(a){var i=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===a.id()});i&&(t+=i.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t}),e.computedGoalName=ko.computed(function(){var t="";return e.goal()?t=e.goal().name():e.goalName()&&(t=e.goalName()),t})}function s(e){if(a(),e.path=ko.computed(function(){var t=e.controlType(),a="";return t&&(1===t?a="programdesigner/customattributes/singleselect.edit.html":2===t?a="programdesigner/customattributes/multiselect.edit.html":3===t?a="programdesigner/customattributes/datepicker.edit.html":4===t?a="programdesigner/customattributes/datetimepicker.edit.html":5===t&&(a="programdesigner/customattributes/input.edit.html")),a}),e.displayPath=ko.computed(function(){var t=e.controlType(),a="";return t&&(1===t?a="programdesigner/customattributes/singleselect.html":2===t?a="programdesigner/customattributes/multiselect.html":3===t?a="programdesigner/customattributes/datepicker.html":4===t?a="programdesigner/customattributes/datetimepicker.html":5===t&&(a="programdesigner/customattributes/input.html")),a}),0===e.values().length){var t=i.createComplexType("Value",{});e.values.push(t)}e.computedValue=ko.computed({read:function(){var t=null;return 1===e.values().length?t=e.values()[0]:e.values().length>1&&(t=e.values()),t},write:function(t){2===e.controlType||e.values()[0].value(t)}}),e.displayValue=ko.computed(function(){var t=null;return 1===e.values().length?t=ko.utils.arrayFirst(e.options(),function(t){return e.values()[0].value()===t.value()}):e.values().length>1&&(t=e.values()),t?t.display():""})}function d(e){e.fullName=ko.computed(function(){var t=e.firstName(),a=e.lastName();return t+" "+a})}e.addEntityType({shortName:"Goal",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sourceId:{dataType:"String"},statusId:{dataType:"String"},typeId:{dataType:"String"},patientId:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},focusAreaIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1}},navigationProperties:{source:{entityTypeName:"Source",isScalar:!0,associationName:"Goal_Source",foreignKeyNames:["sourceId"]},type:{entityTypeName:"GoalType",isScalar:!0,associationName:"Goal_Type",foreignKeyNames:["typeId"]},status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Goal_Status",foreignKeyNames:["statusId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Goals",foreignKeyNames:["patientId"]},tasks:{entityTypeName:"Task",isScalar:!1,associationName:"Goal_Tasks"},barriers:{entityTypeName:"Barrier",isScalar:!1,associationName:"Goal_Barriers"},interventions:{entityTypeName:"Intervention",isScalar:!1,associationName:"Goal_Interventions"}}}),e.addEntityType({shortName:"Attribute",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"},values:{complexTypeName:"Value:#Nightingale",isScalar:!1},controlType:{dataType:"Int64"},order:{dataType:"Int64"},options:{complexTypeName:"ValueDisplay:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Value",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"}}}),e.addEntityType({shortName:"Barrier",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},categoryId:{dataType:"String"},statusId:{dataType:"String"},patientGoalId:{dataType:"String"},deleteFlag:{dataType:"Boolean"}},navigationProperties:{category:{entityTypeName:"BarrierCategory",isScalar:!0,associationName:"Barrier_Category",foreignKeyNames:["categoryId"]},status:{entityTypeName:"BarrierStatus",isScalar:!0,associationName:"Barrier_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Barriers",foreignKeyNames:["patientGoalId"]}}}),e.addEntityType({shortName:"Task",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},createdById:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},statusDate:{dataType:"DateTime"},goalName:{dataType:"String"},patientGoalId:{dataType:"String"},patientId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1},deleteFlag:{dataType:"Boolean"}},navigationProperties:{status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Task_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Tasks",foreignKeyNames:["patientGoalId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"Task_PatientDetails",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"Intervention",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},createdById:{dataType:"String"},categoryId:{dataType:"String"},startDate:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},goalName:{dataType:"String"},patientGoalId:{dataType:"String"},patientId:{dataType:"String"},assignedToId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},deleteFlag:{dataType:"Boolean"}},navigationProperties:{status:{entityTypeName:"InterventionStatus",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["statusId"]},category:{entityTypeName:"InterventionCategory",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["categoryId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Interventions",foreignKeyNames:["patientGoalId"]},assignedTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Intervention_CareManager",foreignKeyNames:["assignedToId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"Intervention_PatientDetails",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"PatientDetails",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"}}}),e.addEntityType({shortName:"IdName",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"ValueDisplay",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},display:{dataType:"String"}}}),e.addEntityType({shortName:"FocusArea",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Source",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"GoalTaskStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},order:{dataType:"Int64"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"GoalType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareManager",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String"},preferredName:{dataType:"String"},firstName:{dataType:"String"},lastName:{dataType:"String"}}}),e.registerEntityTypeCtor("Goal",null,r),e.registerEntityTypeCtor("Barrier",null,t),e.registerEntityTypeCtor("Intervention",null,n),e.registerEntityTypeCtor("Task",null,o),e.registerEntityTypeCtor("Attribute",null,s),e.registerEntityTypeCtor("CareManager",null,d)}function t(){}function a(){i||(i=require("services/datacontext"))}var i;breeze.DataType;var r={initialize:e,createMocks:t};return r});
define('models/lookups',["services/session"],function(){function e(e){e.addEntityType({shortName:"TimeOfDay",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"TimeZone",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Language",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"State",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationMode",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},commModeIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Priority",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},levelName:{dataType:"String"},imageSource:{dataType:"String"},iconClass:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Priority_Patients"}}}),e.addEntityType({shortName:"ObservationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareMemberType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ElementState",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},order:{dataType:"Int64"},name:{dataType:"String"}}}),e.addEntityType({shortName:"EligibilityStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"EnrollmentStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"YesOrNo",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ToDoCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"NoteMethod",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteOutcome",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteWho",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteSource",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteDuration",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"String"}}}),e.addEntityType({shortName:"NoteType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"String"}}}),e.addEntityType({shortName:"AllergyType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Severity",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Reaction",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"AllergySource",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"MedSuppType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"FreqHowOften",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"FreqWhen",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Frequency",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"MedicationStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"MedicationCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}})}function t(e){e.createEntity("ElementState",{id:1,order:6,name:"Removed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:2,order:3,name:"Not Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:3,order:1,name:"Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:5,order:4,name:"Completed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:4,order:2,name:"In Progress"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:6,order:5,name:"Closed"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:0,levelName:"Not Set",imageSource:"/NightingaleUI/Content/images/priority_empty.png",iconClass:"icon-priority-empty"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:1,levelName:"Low",imageSource:"/NightingaleUI/Content/images/priority_low.png",iconClass:"icon-priority grey"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:2,levelName:"Medium",imageSource:"/NightingaleUI/Content/images/priority_medium.png",iconClass:"icon-priority yellow"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:3,levelName:"High",imageSource:"/NightingaleUI/Content/images/priority_high.png",iconClass:"icon-priority red"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:1,name:"Radio",path:"programdesigner/questiontypes/radio.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:2,name:"Text",path:"programdesigner/questiontypes/label.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:3,name:"Textbox",path:"programdesigner/questiontypes/textbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:10,name:"TextArea",path:"programdesigner/questiontypes/textarea.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:4,name:"SingleSelect",path:"programdesigner/questiontypes/singleselect.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:7,name:"Complete",path:"programdesigner/questiontypes/button.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:6,name:"DatePicker",path:"programdesigner/questiontypes/datepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:8,name:"TimePicker",path:"programdesigner/questiontypes/timepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:9,name:"DateTimePicker",path:"programdesigner/questiontypes/datetimepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:5,name:"Checkbox",path:"programdesigner/questiontypes/checkbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:11,name:"Modal",path:"programdesigner/questiontypes/modal.html"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:1,name:"Open",order:1,iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:2,name:"Met",order:4,iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:3,name:"Not Met",order:2,iconClass:"icon-warning-o red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:4,name:"Abandoned",order:3,iconClass:"icon-warning red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:1,name:"Open",iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:2,name:"Resolved",iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:1,name:"Open",iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:2,name:"Completed",iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:3,name:"Removed",iconClass:"icon-warning-o red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:1,name:"Long-Term"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:2,name:"Short-Term"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:-1,name:"None"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:1,name:"Primary"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:2,name:"Secondary"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:1,name:"Not Eligible"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:2,name:"Eligible"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:3,name:"Pending"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:1,name:"Enrolled"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:2,name:"Pending"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:3,name:"Did Not Enroll"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:4,name:"Disenrolled"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:5,name:"Completed Program"}).entityAspect.acceptChanges(),e.createEntity("YesOrNo",{id:1,name:"No"}).entityAspect.acceptChanges(),e.createEntity("YesOrNo",{id:2,name:"Yes"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("MedicationCategory",{id:1,name:"Medication"}).entityAspect.acceptChanges()}breeze.DataType;var a={initialize:e,initializeEnums:t};return a});
define('models/medications',["services/session","services/dateHelper"],function(e,t){function a(e){function a(e){e.isNew=ko.observable(!1),e.isCreateNewMedication=ko.observable(!1),e.customFrequency=ko.observable(),e.isDuplicate=ko.observable(!1),e.familyId=ko.observable(),e.canSave=ko.observable(!1),e.isEditing=ko.observable(!1),e.recalculateNDC=ko.observable(!1),e.deleteFlag(!1),e.computedSigCode=ko.computed(function(){var t="";if(e.startDate()&&e.endDate()){var a=moment(e.startDate()),a=a&&a.isValid()?a:null,i=moment(e.endDate()),i=i&&i.isValid()?i:null;if(a&&i){var n=i.diff(a,"days");n&&(t="for "+n+(1==n?" day":" days"))}}if(!(e.freqQuantity()||e.strength()||e.form()||e.route()||e.frequency()||t))return"-";var r=e.strength()?e.strength().trim():"",o=e.form()?e.form().trim():"",s=e.route()?e.route().trim():"",d=e.freqQuantity()?e.freqQuantity().trim():"";d=d?d:"";var p=e.frequency()?e.frequency().name().trim():"";return d||r||o||s||p||t?d+" "+r+" "+o+" "+s+" "+p+" "+t:"-"}),e.setStatus=function(t,a){function r(){e.isNew(!1),e.entityAspect.acceptChanges(),n.createAlert("warning",a)}i(),e.statusId(t),n.saveMedication(e).then(r)},e.inactivate=function(){e.setStatus(2,"Medication has been deactivated!")},e.activatePatientMedication=function(){e.setStatus(1,"Medication has been activated!")},e.deletePatientMedication=function(){function t(){return!0}var a="You are about to delete: "+e.name()+" from this individual.  Press OK to continue, or cancel to return without deleting.",r=confirm(a);return r!==!0?!1:(i(),n.deletePatientMedication(e).then(t),void 0)},e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var a=!1,i=[],n=e.startDate(),r=e.endDate();if(n){var o=t.isInvalidDate(n);null!=o&&(i.push({PropName:"startDate",Message:e.name()+" Start Date "+o.Message}),a=!0)}if(r){var s=t.isInvalidDate(r);null!=s&&(i.push({PropName:"endDate",Message:e.name()+" End Date "+s.Message}),a=!0),n&&!a&&moment(n).isAfter(moment(r))&&(i.push({PropName:"endDate",Message:e.name()+" End Date must be on or after: "+moment(n).format("MM/DD/YYYY")}),i.push({PropName:"startDate",Message:e.name()+" Start Date must be on or before: "+moment(r).format("MM/DD/YYYY")}),a=!0)}return e.validationErrors(i),e.canSave()&&!a}),e.needToSave=function(){var t=e.isNew()&&e.name()&&e.type()&&e.category()&&e.canSave();return t=t||e.isEditing()&&e.entityAspect.entityState.isModified()},e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function r(e){void 0===e.patientId&&(e.patientId=ko.observable(null)),void 0===e.sortOrder&&(e.sortOrder=ko.observable(0))}e.addEntityType({shortName:"PatientMedication",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String"},dosage:{dataType:"String"},strength:{dataType:"String"},route:{dataType:"String"},form:{dataType:"String"},deleteFlag:{dataType:"Boolean"},startDate:{dataType:"String"},endDate:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},statusId:{dataType:"String"},freqQuantity:{dataType:"String"},freqHowOftenId:{dataType:"String"},frequencyId:{dataType:"String"},freqWhenId:{dataType:"String"},categoryId:{dataType:"String"},sourceId:{dataType:"String"},systemName:{dataType:"String"},typeId:{dataType:"String"},prescribedBy:{dataType:"String"},sigCode:{dataType:"String"},reason:{dataType:"String"},isCreateNewMedication:{dataType:"Boolean"},customFrequency:{dataType:"String"},isDuplicate:{dataType:"Boolean"},familyId:{dataType:"String"},notes:{dataType:"String"},nDCs:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},pharmClasses:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Medications",foreignKeyNames:["patientId"]},status:{entityTypeName:"MedicationStatus",isScalar:!0,associationName:"Medication_Status",foreignKeyNames:["statusId"]},category:{entityTypeName:"MedicationCategory",isScalar:!0,associationName:"Medication_Category",foreignKeyNames:["categoryId"]},type:{entityTypeName:"MedSuppType",isScalar:!0,associationName:"Medication_Type",foreignKeyNames:["typeId"]},source:{entityTypeName:"AllergySource",isScalar:!0,associationName:"Medication_Source",foreignKeyNames:["sourceId"]},freqHowOften:{entityTypeName:"FreqHowOften",isScalar:!0,associationName:"Medication_FreqHowOften",foreignKeyNames:["freqHowOftenId"]},freqWhen:{entityTypeName:"FreqWhen",isScalar:!0,associationName:"Medication_FreqWhen",foreignKeyNames:["freqWhenId"]},frequency:{entityTypeName:"PatientMedicationFrequency",isScalar:!0,associationName:"Medication_Frequency",foreignKeyNames:["frequencyId"]}}}),e.registerEntityTypeCtor("PatientMedication",null,a),e.addEntityType({shortName:"PatientMedicationFrequency",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String",isNullable:!0},sortOrder:{dataType:"Int64"}}}),e.registerEntityTypeCtor("PatientMedicationFrequency",null,r)}function i(){n||(n=require("services/datacontext"))}var n;breeze.DataType;var r={initialize:a};return r});
define('models/notes',["services/session"],function(){function e(e){function i(e){e.fullFirstName=ko.computed(function(){var t=e.firstName(),a=e.preferredName(),i=e.middleName()?e.middleName().substr(0,1)+".":"",n=a?a:2===i.length?t+" "+i:t;return n}),e.fullLastName=ko.computed(function(){var t=e.lastName(),a=e.suffix(),i=a?t+" "+a:t;return i}),e.fullName=ko.computed(function(){var t=e.fullFirstName(),a=e.fullLastName();return t?t+" "+a:a})}function n(e){e.isNew=ko.observable(!1),e.programString=ko.computed(function(){t();var a="",i=e.programIds();if(e.patient()&&e.patient().programs()){var n=e.patient().programs();ko.utils.arrayForEach(i,function(e){var t=ko.utils.arrayFirst(n,function(t){return t.id()===e.id()});t&&(a+=t.name()+", ")}),a.length>0&&(a=a.substr(0,a.length-2))}return 0===a.length&&(a="None"),a}),e.createdBy=ko.computed(function(){t();var i=ko.utils.arrayFirst(a.enums.careManagers(),function(t){return t.id()===e.createdById()});return i}),e.localDate=ko.computed(function(){var t=moment(e.createdOn()).format("MM/DD/YYYY");return t}),e.displayText=ko.computed(function(){var t="";return t=e.text()&&/\S/.test(e.text())?e.text():"-"})}function r(e){e.isNew=ko.observable(!1),e.programString=ko.computed(function(){t();var a="",i=e.programIds();if(e.patientId()&&e.patient()&&e.patient().programs()){var n=e.patient().programs();ko.utils.arrayForEach(i,function(e){var t=ko.utils.arrayFirst(n,function(t){return t.id()===e.id()});t&&(a+=t.name()+", ")}),a.length>0&&(a=a.substr(0,a.length-2))}return 0===a.length&&(a="None"),a})}e.addEntityType({shortName:"Note",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},text:{dataType:"String"},createdOn:{dataType:"DateTime"},createdById:{dataType:"String"},typeId:{dataType:"String"},methodId:{dataType:"String"},outcomeId:{dataType:"String"},whoId:{dataType:"String"},sourceId:{dataType:"String"},durationId:{dataType:"String"},contactedOn:{dataType:"DateTime"},validatedIdentity:{dataType:"Boolean"},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Notes",foreignKeyNames:["patientId"]},type:{entityTypeName:"NoteType",isScalar:!0,associationName:"Note_Type",foreignKeyNames:["typeId"]},method:{entityTypeName:"NoteMethod",isScalar:!0,associationName:"Note_Method",foreignKeyNames:["methodId"]},outcome:{entityTypeName:"NoteOutcome",isScalar:!0,associationName:"Note_Outcome",foreignKeyNames:["outcomeId"]},who:{entityTypeName:"NoteWho",isScalar:!0,associationName:"Note_Who",foreignKeyNames:["whoId"]},source:{entityTypeName:"NoteSource",isScalar:!0,associationName:"Note_Source",foreignKeyNames:["sourceId"]},duration:{entityTypeName:"NoteDuration",isScalar:!0,associationName:"Note_Duration",foreignKeyNames:["durationId"]}}}),e.addEntityType({shortName:"ToDo",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},createdById:{dataType:"String"},assignedToId:{dataType:"String"},statusId:{dataType:"Int64"},categoryId:{dataType:"String"},priorityId:{dataType:"Int64"},dueDate:{dataType:"DateTime"},title:{dataType:"String"},description:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},patientId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Todo_CreatedBy",foreignKeyNames:["createdById"]},assignedTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Todo_AssignedTo",foreignKeyNames:["assignedToId"]},category:{entityTypeName:"ToDoCategory",isScalar:!0,associationName:"Todo_TodoCategory",foreignKeyNames:["categoryId"]},priority:{entityTypeName:"Priority",isScalar:!0,associationName:"Todo_Priority",foreignKeyNames:["priorityId"]},status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Todo_Status",foreignKeyNames:["statusId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Todos",foreignKeyNames:["patientId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"ToDoPatient_Todos",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"ToDoPatient",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"}}}),e.registerEntityTypeCtor("Note",null,n),e.registerEntityTypeCtor("ToDo",null,r),e.registerEntityTypeCtor("ToDoPatient",null,i)}function t(){a||(a=require("services/datacontext"))}var a;breeze.DataType;var i={initialize:e};return i});
define('models/observations',["services/session","services/validatorfactory","services/customvalidators","services/dateHelper"],function(e,t,a,i){function n(e){function t(e){e.isNew=ko.observable(!1),e.computedValue=ko.computed({read:function(){var t=e.values(),a=null;return 1===t.length?a=t[0]:t.length>1&&(a=t),a},write:function(t){2===e.controlType||e.values()[0].value(t)}}),e.computedValueString=ko.computed(function(){var t=e.computedValue();if(t)if(Array.isArray(t)){var a=ko.utils.arrayFirst(t,function(e){return-1!==e.text().indexOf("Diast")}),i=ko.utils.arrayFirst(t,function(e){return-1!==e.text().indexOf("Sys")});t=a&&i?i.value()+"/"+a.value()+" "+e.units():""}else t=t.value()+" "+e.units();else t="-";return t}),e.validationErrors=ko.observableArray([]),e.needToSave=function(){var t=!1;return(e.isNew()||e.entityAspect.entityState.isModified())&&(t="Problems"===e.type().name()?e.isValid():e.isValid()&&e.hasActualValues()),t},e.hasActualValues=ko.observable(),e.isValid=ko.computed(function(){function t(){e.hasActualValues(!1);var t=[];ko.utils.arrayForEach(n,function(a){var i="value";if(a.text&&a.text()&&-1!==a.text().indexOf("Systolic")?i="systolic":a.text&&a.text()&&-1!==a.text().indexOf("Diastolic")&&(i="diastolic"),isNaN(a.value())){var n=a.name?a.name():a.text?a.text():"observation ",s=n+" has invalid value";t.push({PropName:i,Message:s}),o=!0}if(r&&!a.value()){var n=a.name?a.name():a.text?a.text():"observation ",s=n+" must have a value";t.push({PropName:i,Message:s}),o=!0}else a.value()&&e.hasActualValues(!0)}),!r&&e.hasActualValues()&&(t.push({PropName:"startDate",Message:e.name()+" must have a Date"}),o=!0);var a={maxDate:"today"},s=i.isInvalidDate(r,a);return null!=s&&(t.push({PropName:"startDate",Message:e.name()+" Date "+s.Message}),o=!0),e.validationErrors(t),o}function a(){var t=[],a={maxDate:"today"},n=i.isInvalidDate(r,a);return null!=n&&(t.push({PropName:"startDate",Message:e.name()+" Date "+n.Message}),o=!0),e.validationErrors(t),o}var n=e.values(),r=e.startDate(),o=e.entityAspect.hasValidationErrors,s=e.type()?e.type().name():null;switch(s){case"Assessments":o=t();break;case"Labs":o=t();break;case"Problems":o=a();break;case"Risks":o=t();break;case"Vitals":o=t()}return!o}),e.canSave=ko.computed(e.isValid),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function a(e){e.value=ko.computed(e.name)}function n(e){e.previousValueString=ko.computed(function(){var t="";if(e.previousValue()){var a=e.previousValue().value(),i=moment(e.previousValue().startDate()).format("MM/DD/YYYY"),n=e.previousValue().unit(),r=e.previousValue().source();t=a?a+" "+n:"",t=moment(i).isValid()?t?t+" on "+i:i:t,t=r?t+" ("+r+")":t}return t})}e.addEntityType({shortName:"PatientObservation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},observationId:{dataType:"String"},name:{dataType:"String"},standard:{dataType:"Boolean"},typeId:{dataType:"String"},stateId:{dataType:"String"},displayId:{dataType:"String"},patientId:{dataType:"String"},units:{dataType:"String"},startDate:{dataType:"String"},endDate:{dataType:"String"},groupId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},source:{dataType:"String"},values:{complexTypeName:"ObservationValue:#Nightingale",isScalar:!1}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]},observation:{entityTypeName:"Observation",isScalar:!0,associationName:"PatientObservation_Observation",foreignKeyNames:["observationId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Observations",foreignKeyNames:["patientId"]},state:{entityTypeName:"ObservationState",isScalar:!0,associationName:"Observation_State",foreignKeyNames:["stateId"]},display:{entityTypeName:"ObservationDisplay",isScalar:!0,associationName:"Observation_Display",foreignKeyNames:["displayId"]}}}),e.addEntityType({shortName:"ObservationValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},value:{dataType:"String"},previousValue:{complexTypeName:"ObservationPreviousValue:#Nightingale",isScalar:!0}}}),e.addEntityType({shortName:"ObservationPreviousValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},startDate:{dataType:"DateTime"},unit:{dataType:"String"},source:{dataType:"String"}}}),e.addEntityType({shortName:"Observation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},typeId:{dataType:"String"},standard:{dataType:"Boolean"}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]}}}),e.addEntityType({shortName:"ObservationDisplay",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ObservationState",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},allowedTypeIds:{complexTypeName:"IdName:#Nightingale",isScalar:!1}}}),e.registerEntityTypeCtor("Observation",null,a),e.registerEntityTypeCtor("PatientObservation",null,t),e.registerEntityTypeCtor("ObservationValue",null,n)}breeze.DataType;var r={initialize:n};return r});
define('services/entityserializer',[],function(){function e(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Steps=[],n.SpawnElement=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Action").select("id, archived, archiveOriginId, name, moduleId, sourceId, order, completed, enabled, status, deleteFlag, elementState, dateCompleted, next, previous, assignDate, assignById, assignToId, attrStartDate, attrEndDate, completedBy, stateUpdatedOn, description"),i=t.executeQueryLocally(r),o=i[0];o.steps=[],o.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};o.spawnElement.push(t)}),ko.utils.arrayForEach(e.steps.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Step").select("id, header, description, title, text, question, notes, actionId, sourceId, stepTypeId, selectedResponseId, order, completed, enabled, status"),n=t.executeQueryLocally(a),r=n[0];r.responses=[],r.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};r.spawnElement.push(t)}),ko.utils.arrayForEach(e.responses.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Response").select("id, text, required, value, stepId, nominal, nextStepId, order"),n=t.executeQueryLocally(a),i=n[0];i.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};i.spawnElement.push(t)}),r.responses.push(i)}),o.steps.push(r)}),n.Id=o.id,n.Name=o.name,n.ModuleId=o.moduleId,n.SourceId=o.sourceId,n.Order=o.order,n.Completed=o.completed,n.CompletedBy=o.completedBy,n.Enabled=o.enabled,n.Status=o.status,n.DeleteFlag=o.deleteFlag,n.ElementState=o.elementState,n.StateUpdatedOn=o.stateUpdatedOn,n.DateCompleted=o.dateCompleted,n.Next=o.next,n.Previous=o.previous,n.AssignDate=o.assignDate,n.AssignById=o.assignById,n.AssignToId=o.assignToId,n.Archived=o.archived,n.ArchiveOriginId=o.archiveOriginId,n.Description=o.description,n.AttrStartDate=o.attrStartDate,n.AttrEndDate=o.attrEndDate,n.DateCompleted=o.dateCompleted,ko.utils.arrayForEach(o.spawnElement,function(e){n.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),ko.utils.arrayForEach(o.steps,function(e){var t={};t.Responses=[],t.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){t.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),t.Id=e.id,t.Header=e.header,t.Description=e.description,t.Title=e.title,t.Text=e.text,t.Question=e.question,t.Notes=e.notes,t.ActionId=e.actionId,t.SourceId=e.sourceId,t.StepTypeId=e.stepTypeId,t.SelectedResponseId=e.selectedResponseId,t.Order=e.order,t.Completed=e.completed,t.Enabled=e.enabled,t.Status=e.status,ko.utils.arrayForEach(e.responses,function(e){var a={};a.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){a.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),a.Id=e.id,a.Text=e.text,a.Required=e.required,a.Value=e.value,a.StepId=e.stepId,a.Nominal=e.nominal,a.NextStepId=e.nextStepId,a.Order=e.order,t.Responses.push(a)}),(new Date).getTime()-a,n.Steps.push(t)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function t(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Modes=[],n.Addresses=[],n.Phones=[],n.Emails=[],n.Languages=[],n.TimesOfDaysId=[],n.WeekDays=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("ContactCard").select("id, patientId, timeZoneId"),i=t.executeQueryLocally(r),o=i[0];o.steps=[],ko.utils.arrayForEach(e.preferredTimesOfDayIds.peek(),function(e){n.TimesOfDaysId.push(e.id.peek())}),ko.utils.arrayForEach(e.preferredDaysOfWeekIds.peek(),function(e){thisDowId=parseInt(e.id.peek()),n.WeekDays.push(thisDowId)}),n.PatientId=o.patientId,n.Id=o.id,n.TimeZoneId=o.timeZoneId,ko.utils.arrayForEach(e.modes.peek(),function(e){var t={};t.LookUpModeId=e.lookUpModeId.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),n.Modes.push(t)}),ko.utils.arrayForEach(e.addresses.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.City=e.city.peek(),t.StateId=e.stateId.peek(),t.PostalCode=e.postalCode.peek(),t.Line1=e.line1.peek(),t.Line2=e.line2.peek(),t.Line3=e.line3.peek(),n.Addresses.push(t)}),ko.utils.arrayForEach(e.emails.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.Text=e.text.peek(),n.Emails.push(t)}),ko.utils.arrayForEach(e.phones.peek(),function(e){var t={};t.Id=e.id.peek(),t.IsText=e.isText.peek(),t.Number=e.number.peek().replace(/-/g,""),t.OptOut=e.optOut.peek(),t.PhonePreferred=e.phonePreferred.peek(),t.TextPreferred=e.textPreferred.peek(),t.TypeId=e.typeId.peek(),n.Phones.push(t)}),ko.utils.arrayForEach(e.languages.peek(),function(e){var t={};t.LookUpLanguageId=e.lookUpLanguageId.peek(),t.Preferred=e.preferred.peek(),n.Languages.push(t)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function a(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.FocusAreaIds=[],n.ProgramIds=[],n.CustomAttributes=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Goal").select("id, name, patientId, sourceId, typeId, statusId, startDate, endDate, targetValue, targetDate"),i=t.executeQueryLocally(r),o=i[0];ko.utils.arrayForEach(e.focusAreaIds.peek(),function(e){n.FocusAreaIds.push(e.id.peek())}),ko.utils.arrayForEach(e.programIds.peek(),function(e){n.ProgramIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),n.CustomAttributes.push(t)}),n.Id=o.id,n.Name=o.name,n.PatientId=o.patientId,n.SourceId=o.sourceId,n.TypeId=o.typeId,n.StatusId=o.statusId,n.StartDate=o.startDate,n.EndDate=o.endDate,n.TargetValue=o.targetValue,n.TargetDate=o.targetDate;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function n(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Intervention").select("id, categoryId, assignedToId, description, statusId, startDate, patientGoalId, patientId, closedDate, deleteFlag"),r=t.executeQueryLocally(n),i=r[0],o={};o.BarrierIds=[],o.CustomAttributes=[],o.Id=i.id,o.CategoryId=i.categoryId,o.AssignedToId=i.assignedToId,o.Description=i.description,o.StatusId=i.statusId,o.StartDate=i.startDate,o.ClosedDate=i.closedDate,o.PatientGoalId=i.patientGoalId,o.DeleteFlag=i.deleteFlag,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){o.BarrierIds.push(e.id.peek())});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),o}function r(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Task").select("id, description, statusId, targetValue, startDate, targetDate, patientGoalId, patientId, closedDate, statusDate, deleteFlag"),r=t.executeQueryLocally(n),i=r[0],o={};o.BarrierIds=[],o.CustomAttributes=[],o.Id=i.id,o.Description=i.description,o.StatusId=i.statusId,o.TargetValue=i.targetValue,o.StartDate=i.startDate,o.TargetDate=i.targetDate,o.ClosedDate=i.closedDate,o.StatusDate=i.statusDate,o.PatientGoalId=i.patientGoalId,o.DeleteFlag=i.deleteFlag,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){o.BarrierIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),o.CustomAttributes.push(t)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),o}function i(e,t){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Barrier").select("id, name, patientGoalId, statusId, categoryId, deleteFlag"),n=t.executeQueryLocally(a),r=n[0],i={};return i.Id=r.id,i.Name=r.name,i.PatientGoalId=r.patientGoalId,i.StatusId=r.statusId,i.CategoryId=r.categoryId,i.DeleteFlag=r.deleteFlag,i}function o(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Values=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientObservation").select("id, name, startDate, endDate, units, patientId, typeId, displayId, stateId, deleteFlag, standard, observationId, groupId, source"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.Name=o.name;var s=moment(o.startDate);n.StartDate=s.isValid()?s.toISOString():null;var d=moment(o.endDate);return n.EndDate=d.isValid()?d.toISOString():null,n.GroupId=o.groupId,n.Standard=o.standard,n.ObservationId=o.observationId,n.Source=o.source,n.Units=o.units,n.PatientId=o.patientId,n.TypeId=o.typeId,n.DisplayId=o.displayId,n.StateId=o.stateId,n.DeleteFlag=o.deleteFlag,ko.utils.arrayForEach(e.values.peek(),function(e){n.Values.push({Id:e.id.peek(),Text:e.text.peek(),Value:e.value.peek()})}),(new Date).getTime()-a,n}function s(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.ProgramIds=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Note").select("id, text, patientId, createdOn, createdById, typeId, methodId, outcomeId, whoId, sourceId, durationId, contactedOn, validatedIdentity"),i=t.executeQueryLocally(r),o=i[0];ko.utils.arrayForEach(e.programIds.peek(),function(e){n.ProgramIds.push(e.id.peek())}),n.Id=o.id,n.Text=o.text,n.PatientId=o.patientId,n.CreatedOn=o.createdOn,n.CreatedById=o.createdById,n.TypeId=o.typeId,n.MethodId=o.methodId,n.OutcomeId=o.outcomeId,n.WhoId=o.whoId,n.SourceId=o.sourceId,n.DurationId=o.durationId,n.ContactedOn=o.contactedOn,n.ValidatedIdentity=o.validatedIdentity;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function d(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.ProgramIds=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("ToDo").select("id, title, description, patientId, createdById, assignedToId, statusId, categoryId, priorityId, dueDate, createdOn, updatedOn, deleteFlag, closedDate"),i=t.executeQueryLocally(r),o=i[0];ko.utils.arrayForEach(e.programIds.peek(),function(e){n.ProgramIds.push(e.id.peek())}),n.Id=o.id,n.Title=o.title,n.Description=o.description,n.PatientId=o.patientId,n.CreatedById=o.createdById,n.AssignedToId=o.assignedToId,n.StatusId=o.statusId,n.CategoryId=o.categoryId,n.PriorityId=o.priorityId,n.DueDate=o.dueDate,n.UpdatedOn=o.updatedOn,n.CreatedOn=o.createdOn,n.ClosedDate=o.closedDate,n.DeleteFlag=o.deleteFlag;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function c(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("CareMember").select("id, patientId, contactId, typeId, primary, preferredName"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.PatientId=o.patientId,n.ContactId=o.contactId,n.TypeId=o.typeId,n.Primary=o.primary,n.PreferredName=o.preferredName;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function u(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Patient").select("id, priority, gender, firstName, lastName, preferredName, suffix, dOB, middleName, background, fullSSN"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.Priority=o.priority,n.Gender=o.gender,n.FirstName=o.firstName,n.LastName=o.lastName,n.PreferredName=o.preferredName,n.Suffix=o.suffix,n.DOB=o.dOB,n.MiddleName=o.middleName,n.Background=o.background,o.fullSSN&&(n.FullSSN=o.fullSSN),e.isDuplicate()&&e.forcedSave&&(n.InsertDuplicate=!0);var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function l(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientSystem").select("id, patientId, systemId, systemName, displayLabel, deleteFlag"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.PatientId=o.patientId,n.SystemId=o.systemId,n.SystemName=o.systemName,n.DisplayLabel=o.displayLabel,n.DeleteFlag=o.deleteFlag;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function p(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientAllergy").select("id, allergyName, startDate, endDate, patientId, statusId, deleteFlag, severityId, allergyId, sourceId, notes, systemName"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.AllergyName=o.allergyName;var s=moment(o.startDate);n.StartDate=s.isValid()?s.toISOString():null;var d=moment(o.endDate);return n.EndDate=d.isValid()?d.toISOString():null,n.PatientId=o.patientId,n.AllergyId=o.allergyId,n.StatusId=o.statusId,n.SourceId=o.sourceId,n.DeleteFlag=o.deleteFlag,n.SeverityId=o.severityId,n.Notes=o.notes,n.SystemName=o.systemName,e.isUserCreated()&&(n.IsNewAllergy=!0),n.AllergyTypeIds=[],ko.utils.arrayForEach(e.allergyTypeIds.peek(),function(e){n.AllergyTypeIds.push(e.id.peek())}),n.ReactionIds=[],ko.utils.arrayForEach(e.reactionIds.peek(),function(e){n.ReactionIds.push(e.id.peek())}),(new Date).getTime()-a,n}function y(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientMedication").select("id, name, startDate, endDate, patientId, statusId, deleteFlag, sourceId, notes, systemName, dosage, strength, route, form, freqQuantity, freqHowOftenId, frequencyId, freqWhenId, customFrequency, categoryId, prescribedBy, typeId, sigCode, reason, familyId, isCreateNewMedication"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.Name=o.name;var s=moment(o.startDate);n.StartDate=s.isValid()?s.toISOString():null;var d=moment(o.endDate);return n.EndDate=d.isValid()?d.toISOString():null,n.PatientId=o.patientId,n.StatusId=o.statusId,n.SourceId=o.sourceId,n.DeleteFlag=o.deleteFlag,n.Notes=o.notes,n.SystemName=o.systemName,n.Dosage=o.dosage,n.Strength=o.strength,n.Route=o.route,n.Form=o.form,n.FreqQuantity=o.freqQuantity,n.FreqHowOftenId=o.freqHowOftenId,n.FrequencyId=o.frequencyId,n.FreqWhenId=o.freqWhenId,n.CategoryId=o.categoryId,n.PrescribedBy=o.prescribedBy,n.TypeId=o.typeId,n.SigCode=o.sigCode,n.Reason=o.reason,n.FamilyId=o.familyId,n.RecalculateNDC=e.recalculateNDC(),n.NDCs=[],ko.utils.arrayForEach(e.nDCs.peek(),function(e){n.NDCs.push(e.id.peek())}),n.PharmClasses=[],ko.utils.arrayForEach(e.pharmClasses.peek(),function(e){n.PharmClasses.push(e.id.peek())}),(new Date).getTime()-a,n}var m={serializeAction:e,serializeContactCard:t,serializeGoal:a,serializeIntervention:n,serializeTask:r,serializeBarrier:i,serializeObservation:o,serializeNote:s,serializeToDo:d,serializeCareMember:c,serializeIndividual:u,serializePatientSystem:l,serializePatientAllergy:p,serializePatientMedication:y};return m});
define('services/local.collections',["models/base"],function(e){function t(){n(),r.getEntityList(o,"ToDo","fakeTodoEndPoint",null,null,!1)}function a(){n(),r.getEntityList(s,"Intervention","fakeInterventionEndPoint",null,null,!1)}function n(){r||(r=require("services/datacontext"))}var r,i={};i.priorities=ko.observableArray(),i.genders=ko.observableArray([new e.Gender("m","M","Male"),new e.Gender("f","F","Female"),new e.Gender("n","N","Neutral")]),i.daysOfWeek=ko.observableArray([new e.Day("0","M","Monday"),new e.Day("1","Tu","Tuesday"),new e.Day("2","W","Wednesday"),new e.Day("3","Th","Thursday"),new e.Day("4","F","Friday"),new e.Day("5","Sat","Saturday"),new e.Day("6","Sun","Sunday")]),i.userAssociatedTypes=ko.observableArray([new e.SomeType("0","Assigned to me"),new e.SomeType("1","Unassigned")]),i.phoneTypes=ko.observableArray(),i.emailTypes=ko.observableArray(),i.addressTypes=ko.observableArray(),i.textTypes=ko.observableArray(),i.languages=ko.observableArray(),i.states=ko.observableArray(),i.timeZones=ko.observableArray(),i.timesOfDay=ko.observableArray(),i.communicationModes=ko.observableArray(),i.communicationTypes=ko.observableArray(),i.focusAreas=ko.observableArray(),i.sources=ko.observableArray(),i.barrierCategories=ko.observableArray(),i.toDoCategories=ko.observableArray(),i.interventionCategories=ko.observableArray(),i.goalTypes=ko.observableArray(),i.goalTaskStatuses=ko.observableArray(),i.barrierStatuses=ko.observableArray(),i.interventionStatuses=ko.observableArray(),i.careManagers=ko.observableArray(),i.careMemberTypes=ko.observableArray(),i.observationTypes=ko.observableArray(),i.observationStates=ko.observableArray(),i.observationDisplays=ko.observableArray(),i.objectives=ko.observableArray(),i.noteTypes=ko.observableArray(),i.noteMethods=ko.observableArray(),i.noteWhos=ko.observableArray(),i.noteSources=ko.observableArray(),i.noteOutcomes=ko.observableArray(),i.noteDurations=ko.observableArray(),i.allergyTypes=ko.observableArray(),i.severities=ko.observableArray(),i.reactions=ko.observableArray(),i.allergySources=ko.observableArray(),i.allergyStatuses=ko.observableArray(),i.medicationStatuses=ko.observableArray(),i.medicationCategories=ko.observableArray(),i.freqHowOftens=ko.observableArray(),i.frequency=ko.observableArray(),i.medSuppTypes=ko.observableArray(),i.freqWhens=ko.observableArray();var o=ko.observableArray(),s=ko.observableArray(),d=ko.observableArray(),c=ko.observableArray(),u=ko.observableArray(),l={enums:i,todos:o,tasks:d,interventions:s,events:c,alerts:u,refreshToDos:t,refreshInterventions:a};return l});
define('services/entityfinder',["services/session","config.services","services/local.collections"],function(e,t,a){function n(){c||(c=require("services/datacontext"),d=require("viewmodels/patients/index"))}function r(e){if(n(),e.Result){var t=c.createEntity("Alert",{result:e.Result.Result,reason:e.Result.Reason});t.entityAspect.acceptChanges(),c.alerts.push(t)}return(e.Program||e.Programs)&&(e.Program&&s(e.Program),e.Programs&&ko.utils.arrayForEach(e.Programs,function(e){s(e)})),!0}function i(e){var t=e.PatientId;return n(),e.RelatedChanges&&t&&ko.utils.arrayForEach(e.RelatedChanges,function(e){"100"===e&&c.getEntityList(null,u().EntityType,u().ResourcePath+t+"/Observation/Problems",null,null,!0),"200"===e&&d.getPatientsToDos()}),!0}function o(e){var t=e[0];t&&t.interventions&&ko.utils.arrayForEach(t.interventions,function(e){-1===a.interventions.indexOf(e)&&a.interventions.push(e)}),t&&t.tasks&&ko.utils.arrayForEach(t.tasks,function(e){-1===a.tasks.indexOf(e)&&a.tasks.push(e)})}function s(e){var t=c.createEntity("Program",{id:e.Id,name:e.Name,patientId:e.PatientId,shortName:e.shortName,status:e.Status,enabled:e.Enabled,completed:e.Completed,elementState:e.ElementState});t.entityAspect.acceptChanges()}var c,d,u=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","PatientObservation"):""}),l={searchForEntities:r,searchForProblems:i,searchForLocalCollectionEntities:o};return l});
define('services/dataservices/programsservice',["services/session","config.services","services/entityfinder"],function(e,t,a){function n(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1===t.indexOf(e)&&(e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.rejectChanges()}))})}function r(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1!==t.indexOf(e)&&e.completed(!0)})}function i(a,n,r,i){if(!a)throw new Error("[manager] cannot be a null parameter");d();var o=n.Completed?"Process":"Save",s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/Module/Action/"+o,"Program");if(n){var u={};u.Action=n,u.ProgramId=r,u=JSON.stringify(u);var l=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:u});return a.executeQuery(l).fail(c)}}function o(a,n,r,i,o){function s(){return!0}if(!a)throw new Error("[manager] cannot be a null parameter");d();var u=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/"+n+"/Remove","Program"),l={};l.Reason=o,l.ProgramName=r,l=JSON.stringify(l);var p=breeze.EntityQuery.from(u.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:l});return a.executeQuery(p).then(s).fail(c)}function s(a,n,r,i){function o(){return!0}if(!a)throw new Error("[manager] cannot be a null parameter");d();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/"+r+"/Attributes/Update","Program");if(n){var u={};u.PlanElement=n,u=JSON.stringify(u);var l=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:u});return a.executeQuery(l).then(o).fail(c)}}function c(){d();var e=p.createEntity("Alert",{result:0,reason:"Save failed!"});throw e.entityAspect.acceptChanges(),p.alerts.push(e),p.programsSaving(!1),new Error("Unable to save")}function d(){p||(p=require("services/datacontext"))}function u(a,n,r,i){if(!a)throw new Error("[manager] cannot be a null parameter");d();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/Module/Action/Repeat","Action");if(n){var s={};s.Action=n,s.ProgramId=r,s=JSON.stringify(s);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return a.executeQuery(u).fail(c)}}function l(e,t){var a=breeze.EntityQuery.from("Action").where("archiveOriginId","==",t.id()).toType("Action"),n=e.executeQueryLocally(a);return n.length>0?n[0]:null}var p,y={saveActionPost:i,removeProgram:o,cancelChangesForNonComputedPath:n,setCompletedSteps:r,savePlanElemAttrs:s,repeatAction:u,getRepeatedAction:l};return y});
define('models/programs',["config.services","services/session","services/entityserializer","services/dataservices/programsservice"],function(e,t,a,i){function n(e){function t(e){e.elementState()||e.elementState(1),e.eligibilityDatesStatement=ko.computed(function(){var t=e.eligibilityStartDate(),a=e.eligibilityEndDate();if(!t&&!a)return"";var i="Eligibility ";return t&&(t=moment(t).format("MM/DD/YYYY"),i+=" begins on "+t),a&&(a=moment(a).format("MM/DD/YYYY"),i+=t?" and ends on "+a:" ends on "+a),i}),e.duration=ko.computed(function(){var t=moment(e.attrStartDate()),a=moment(),i=a.diff(t,"days");return i}),e.allModulesOpen=ko.computed(function(){var t=ko.utils.arrayFirst(e.modules(),function(e){return!e.isOpen()});return!t})}function n(e){e.isOpen=ko.observable(),4!==e.elementState()||e.completed()?e.isOpen(!1):e.isOpen(!1),e.completeActionsCount=ko.computed(function(){var t=e.actions(),a=ko.utils.arrayFilter(t,function(e){return 5===e.elementState()&&e.enabled()});return a.length>0?a.length:"-"}),e.openActionsCount=ko.computed(function(){var t=e.actions(),a=ko.utils.arrayFilter(t,function(e){return 4===e.elementState()&&e.enabled()});return a.length>0?a.length:"-"}),e.notStartedActionsCount=ko.computed(function(){var t=e.actions(),a=ko.utils.arrayFilter(t,function(e){return 2===e.elementState()&&e.enabled()});return a.length>0?a.length:"-"})}function r(e){o(),e.objective=ko.computed(function(){var t;return e.id()&&(t=ko.utils.arrayFirst(s.enums.objectives(),function(t){return t.id()===e.id()})),t}),e.categoriesString=ko.computed(function(){var t,a="";return e.id()&&(t=ko.utils.arrayFirst(s.enums.objectives(),function(t){return t.id()===e.id()}),t&&t.categories()&&(ko.utils.arrayForEach(t.categories(),function(e){a+=e.name()+", "}),a=a.substring(0,a.length-2))),a})}function p(e){function t(e,a){e.archiveOriginId(),e.historicalAction()&&(a.push(e.historicalAction()),t(e.historicalAction(),a))}e.computedPath=ko.computed({read:function(){o();var t=!1,a=e.steps().sort(d),i=[];if(0===a.length)return a;for(var n=!0,r=a[0];r;){n&&r.activeStep(!0),i.push(r);var s=l(r,t);if(s&&!s.activeStep()&&(t=!0),!s)break;r=s,n=!1}return i},deferEvaluation:!0}).extend({throttle:50}),e.hasChanges=ko.computed(function(){return 4===e.elementState()}),e.isSaving=ko.observable(!1),e.saveAction=function(){setTimeout(function(){e.isSaving(!0),c(e)},0)},e.formattedCompletedDate=ko.computed(function(){var t=moment(e.dateCompleted()),a=t.format("MM/DD/YYYY");return a}),e.history=ko.computed(function(){e.historicalAction();var a=[];return t(e,a),a})}function y(e){o(),e.activeStep=ko.observable(!1),e.selectedResponse=ko.observable(),e.computedResponse=ko.computed({read:function(){return 0!==e.selectedResponseId()&&e.selectedResponseId()?(s.getEntityById(e.selectedResponse,e.selectedResponseId(),"Response","fakePath1",!1),e.selectedResponse()):null},write:function(t){void 0!==t&&(4!==e.action().elementState()&&(e.action().stateUpdatedOn((new moment).toISOString()),e.action().elementState(4)),e.selectedResponse(t),t&&e.selectedResponseId(t.id()))},deferEvaluation:!0}),e.hasNoTrueAnswers=ko.computed(function(){if(e.stepType()&&"Checkbox"===e.stepType().name()){var t=ko.utils.arrayFirst(e.responses(),function(e){return"true"===e.value()});return t?!1:!0}return!1}).extend({throttle:25})}function l(e,t){function a(e,t){var a=ko.observable();return s.getEntityById(a,e,"Step","fakePath2",!1),a()&&a().activeStep(t),a()}var i=null,n="Complete"===e.stepType().name(),r=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||!e.computedResponse().value())),o=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||"SingleSelect"!==e.stepType().name()&&"Radio"!==e.stepType().name()));return e.computedResponse()&&e.computedResponse().nextStepId()&&r&&!n?i=a(e.computedResponse().nextStepId(),!t):e.computedResponse()&&e.computedResponse().nextStepId()&&o&&!n?i=a(e.computedResponse().nextStepId(),!t):0===e.responses().length||n?i=null:ko.utils.arrayForEach(e.responses(),function(e){e.nominal()===!0&&(e.required()!==!0||e.value()||(t=!0),i=a(e.nextStepId(),!t))}),n&&(e.completeAction||(e.completeAction=function(){var t=e.action();setTimeout(function(){t.dateCompleted((new moment).toISOString()),t.completed(!0),t.isSaving(!0),c(t)},0)})),i}function c(e){o(),setTimeout(function(){i.cancelChangesForNonComputedPath(e),e.completed()&&i.setCompletedSteps(e);var t=a.serializeAction(e,s.manager),n=e.module().program().patientId(),r=e.module().program().id();return s.saveAction(e,t,r,n)},50)}e.addEntityType({shortName:"ContractProgram",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},shortName:{dataType:"String"}}}),e.addEntityType({shortName:"Program",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String"},shortName:{dataType:"String"},status:{dataType:"String"},description:{dataType:"String"},eligibilityRequirements:{dataType:"String"},eligibilityStartDate:{dataType:"DateTime"},eligibilityEndDate:{dataType:"DateTime"},enabled:{dataType:"Boolean"},sourceId:{dataType:"String"},programState:{dataType:"Int64"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},version:{dataType:"String"},templateName:{dataType:"String"},authoredBy:{dataType:"String"},programVersion:{dataType:"String"},templateVersion:{dataType:"String"},programVersionUpdatedOn:{dataType:"DateTime"},elementState:{dataType:"Int64"},stateUpdatedOn:{dataType:"DateTime"},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1}},navigationProperties:{modules:{entityTypeName:"Module",isScalar:!1,associationName:"Program_Modules"},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Programs",foreignKeyNames:["patientId"]},attributes:{entityTypeName:"Attributes",isScalar:!0,associationName:"Program_Attributes"},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Program_ElementState",foreignKeyNames:["elementState"]},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Program_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Program_AssignedTo",foreignKeyNames:["assignToId"]}}}),e.addEntityType({shortName:"Module",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},description:{dataType:"String"},programId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},elementState:{dataType:"Int64"},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},stateUpdatedOn:{dataType:"DateTime"},authoredBy:{dataType:"String"},moduleVersion:{dataType:"String"},moduleVersionUpdatedOn:{dataType:"DateTime"}},navigationProperties:{program:{entityTypeName:"Program",isScalar:!0,associationName:"Program_Modules",foreignKeyNames:["programId"]},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Module_ElementState",foreignKeyNames:["elementState"]},actions:{entityTypeName:"Action",isScalar:!1,associationName:"Module_Actions"},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Module_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Module_AssignedTo",foreignKeyNames:["assignToId"]}}}),e.addEntityType({shortName:"Action",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},description:{dataType:"String"},moduleId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},archived:{dataType:"Boolean"},archivedDate:{dataType:"DateTime"},archiveOriginId:{dataType:"String"},completedBy:{dataType:"String"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},deleteFlag:{dataType:"Boolean"},elementState:{dataType:"Int64"},stateUpdatedOn:{dataType:"DateTime"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},actionVersion:{dataType:"String"},actionVersionUpdatedOn:{dataType:"DateTime"},authoredBy:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1}},navigationProperties:{module:{entityTypeName:"Module",isScalar:!0,associationName:"Module_Actions",foreignKeyNames:["moduleId"]},steps:{entityTypeName:"Step",isScalar:!1,associationName:"Action_Steps"},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Action_ElementState",foreignKeyNames:["elementState"]},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Action_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Action_AssignedTo",foreignKeyNames:["assignToId"]},historicalAction:{entityTypeName:"Action",isScalar:!0,associationName:"Action_HistoricalAction",foreignKeyNames:["archiveOriginId"]}}}),e.addEntityType({shortName:"Step",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},header:{dataType:"String"},description:{dataType:"String"},title:{dataType:"String"},text:{dataType:"String"},question:{dataType:"String"},notes:{dataType:"String"},actionId:{dataType:"String"},sourceId:{dataType:"String"},stepTypeId:{dataType:"String"},selectedResponseId:{dataType:"String"},order:{dataType:"Int64"},controlType:{dataType:"Int64"},selectType:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},status:{dataType:"Int64"}},navigationProperties:{action:{entityTypeName:"Action",isScalar:!0,associationName:"Action_Steps",foreignKeyNames:["actionId"]},stepType:{entityTypeName:"StepType",isScalar:!0,associationName:"Step_StepType",foreignKeyNames:["stepTypeId"]},responses:{entityTypeName:"Response",isScalar:!1,associationName:"Step_Responses"}}}),e.addEntityType({shortName:"Response",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},text:{dataType:"String"},required:{dataType:"Boolean"},value:{dataType:"String"},stepId:{dataType:"String"},nominal:{dataType:"Boolean"},order:{dataType:"Int64"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},nextStepId:{dataType:"String"}},navigationProperties:{step:{entityTypeName:"Step",isScalar:!0,associationName:"Step_Responses",foreignKeyNames:["stepId"]}}}),e.addEntityType({shortName:"StepType",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"},path:{dataType:"String"}},navigationProperties:{steps:{entityTypeName:"Step",isScalar:!1,associationName:"Step_StepType"}}}),e.addEntityType({shortName:"SpawnElement",namespace:"Nightingale",isComplexType:!0,dataProperties:{elementId:{dataType:"String"},elementType:{dataType:"String"},tag:{dataType:"String"}}}),e.addEntityType({shortName:"Attributes",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},planElementId:{dataType:"String"},authoredBy:{dataType:"String"},ineligibleReason:{dataType:"String"},eligibility:{dataType:"String"},enrollment:{dataType:"String"},graduatedFlag:{dataType:"String"},population:{dataType:"String"},removedReason:{dataType:"String"},didNotEnrollReason:{dataType:"String"},overrideReason:{dataType:"String"},removedReason:{dataType:"String"},completedBy:{dataType:"String"},completed:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},market:{dataType:"String"}},navigationProperties:{program:{entityTypeName:"Program",isScalar:!0,associationName:"Program_Attributes",foreignKeyNames:["planElementId"]},eligibilityModel:{entityTypeName:"EligibilityStatus",isScalar:!0,associationName:"Attributes_Eligibility",foreignKeyNames:["eligibility"]},enrollmentModel:{entityTypeName:"EnrollmentStatus",isScalar:!0,associationName:"Attributes_Enrollment",foreignKeyNames:["enrollment"]},graduatedFlagModel:{entityTypeName:"YesOrNo",isScalar:!0,associationName:"Attributes_GraduatedFlag",foreignKeyNames:["graduatedFlag"]},completedModel:{entityTypeName:"YesOrNo",isScalar:!0,associationName:"Attributes_Completed",foreignKeyNames:["completed"]}}}),e.addEntityType({shortName:"Objective",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},value:{dataType:"String"},unit:{dataType:"String"},status:{dataType:"Int64"}}}),e.addEntityType({shortName:"ObjectiveLookup",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},categories:{complexTypeName:"IdName:#Nightingale",isScalar:!1}}}),e.registerEntityTypeCtor("Program",null,t),e.registerEntityTypeCtor("Module",null,n),e.registerEntityTypeCtor("Objective",null,r),e.registerEntityTypeCtor("Action",null,p),e.registerEntityTypeCtor("Step",null,y)}function r(e){function t(){if(e.completed())e.elementState(5);else if(4===e.elementState()){var t=s.createEntity("Alert",{result:"warning",reason:"Progress saved"});t.entityAspect.acceptChanges(),s.alerts.push(t)}e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.steps(),function(e){e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.acceptChanges()})}),e.module().entityAspect.acceptChanges(),e.isSaving(!1)}o(),setTimeout(function(){i.cancelChangesForNonComputedPath(e),e.completed()&&i.setCompletedSteps(e);var n=a.serializeAction(e,s.manager),r=e.module().program().patientId(),o=e.module().program().id();return e.entityAspect.acceptChanges(),s.saveAction(e,n,o,r).then(t)},50)}function o(){s||(s=require("services/datacontext"))}var s;ko.computed({read:function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"response","Response"):""},deferEvaluation:!0});var d=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1};breeze.DataType;var p={initialize:n,extSaveAction:r};return p});
define('models/users',["config.services","services/session"],function(){function e(e){function t(e){e.settings=ko.observableArray(),e.recentIndividuals=ko.observableArray(),e.computedRecentIndividuals=ko.computed(function(){var t=e.recentIndividuals().slice(0,5);return t}).extend({throttle:25})}e.addEntityType({shortName:"User",namespace:"NightingaleUser",dataProperties:{userId:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},userName:{dataType:"String"},aPIToken:{dataType:"String"},contracts:{complexTypeName:"Contract:#NightingaleUser",isScalar:!1}}}),e.addEntityType({shortName:"Contract",namespace:"NightingaleUser",isComplexType:!0,dataProperties:{id:{dataType:"Int64"},name:{dataType:"String"},number:{dataType:"String"}}}),e.addEntityType({shortName:"Event",namespace:"NightingaleUser",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String"},title:{dataType:"String"},start:{dataType:"DateTime"},end:{dataType:"DateTime"},allDay:{dataType:"Boolean"},url:{dataType:"String"},patientId:{dataType:"String"},typeId:{dataType:"String"},patientName:{dataType:"String"},assignedToName:{dataType:"String"}},navigationProperties:{type:{entityTypeName:"EventType",isScalar:!0,associationName:"Event_Type",foreignKeyNames:["typeId"]}}}),e.addEntityType({shortName:"EventType",namespace:"NightingaleUser",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.registerEntityTypeCtor("User",null,t)}function t(e){e.createEntity("EventType",{id:1,name:"Intervention"}).entityAspect.acceptChanges(),e.createEntity("EventType",{id:2,name:"To Do"}).entityAspect.acceptChanges()}function a(e,t){var a=new Date,i=a.getDate(),n=a.getMonth(),r=a.getFullYear();e.createEntity("Event",{id:"eventone",title:"Diabetes Appointment",userId:t,start:new Date(r,n,i+4),end:new Date(r,n,i+4),allDay:!0}),e.createEntity("Event",{id:"eventtwo",title:"Phone call",userId:t,start:new Date(r,n,i-5),end:new Date(r,n,i-2)}),e.createEntity("Event",{id:"eventthree",title:"Something else",userId:t,start:new Date(r,n,i-5),end:new Date(r,n,i-2)}),e.createEntity("Event",{id:"eventfour",title:"Goto google.com",userId:t,start:new Date(r,n,1),allDay:!0,url:"http://www.google.com"})}breeze.DataType;var i={initialize:e,createCalendarMocks:a,initializeEnums:t};return i});
define('services/analytics',[],function(){var e=function(e,t,a){window.ga&&(window.ga("set",{dimension1:t,dimension2:a}),console.log("analytics initialized : gaId="+e+", contractId= "+t+", "+"userName= "+a))},t=function(e){console.log("analytics sendPageView : path="+e),window.ga&&window.ga("send","pageview",{page:e})};return{initialize:e,sendPageView:t}});
define('services/bindings',["services/formatter","services/dateHelper"],function(e,t){function a(a,i){$(a).attr("maxlength",10),$(a).attr("placeholder","MM/DD/YYYY"),$(a).attr("title","MM/DD/YYYY"),$(a).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||47===t||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),$(a).on("blur",function(){var n=$(a).val();n&&(n=e.date.optimizeDate(n),n=e.date.optimizeYear(n),n!==$(a).val()&&$(a).val(n),t.isSameDate(moment(i()),moment(n))||i(n))}),$(a).on("keydown paste",function(t){setTimeout(function(){var n=t.which||t.keyCode,r=$(a).val();if($(a).datepicker&&$(a).datepicker("hide"),!t.shiftKey&&!t.ctrlKey&&37!=n&&39!=n&&9!=n&&35!=n&&36!=n&&46!==n&&8!=n){var o=a.selectionStart;if(r){"paste"===t.type&&(r=r.replace(/\D/g,""));var s=r;(o==r.length||"paste"===t.type||r.replace(/\D/g,"").length>=8)&&(s=e.date.optimizeDate(r)),(s&&s!==r||"paste"===t.type)&&($(a).val(s),i(s))}}},5)})}function i(e,t){var a,i;i=e.parent().find(".widget");var n=!1;e.parent()&&(n=!!e.parent().find(".widget.fullscreen").length),$bodys=i.find(".content > .table-row > .table-cell > .body");var r;if(n){if(!e.hasClass("fullscreen"))return;i.find(".content").css("height",""),$bodys.css("height",""),r=e.closest(".column").height()+"px",i=e.parent().find(".widget.fullscreen"),$bodys=i.find(".content > .table-row > .table-cell > .body")}else i.find(".content").css("height",""),$bodys.css("height","");var o;i.each(function(){var e;e=$(this),o=n?r:this.offsetHeight+"px",a=e.children(".content"),a.css("height",o),a.find(".wrapper > .content").css("height",o)}),t||$bodys.each(function(e,t){var a=this.parentElement.offsetHeight?this.parentElement.offsetHeight:0;o=n?a-10:a,o+="px",$(t).css("height",o)})}function n(){var e=window.chrome,t=window.navigator.vendor;return null!==e&&void 0!==e&&"Google Inc."===t?!0:!1}function r(){return!window.ActiveXObject&&"ActiveXObject"in window}function o(e){var t=$(e),a=t.offset().top;a-=t.parents(".widget").offset().top,a+=t.outerHeight()/2,$(".arrow").css("top",a)}function s(){d||(d=require("services/datacontext"))}var d;ko.bindingHandlers.Date={update:function(e,t){var a=t(),i=moment(a()),n=i.format("MM/DD/YYYY");$(e).text(n)}},ko.bindingHandlers.DateTime={update:function(e,t){var a=t(),i=moment(a()),n=i.format("MM/DD/YYYY h:mm A");$(e).text(n)}},ko.bindingHandlers.DateOrNothing={update:function(e,t){var a=t(),i=moment(a()),n=i.format("MM/DD/YYYY");n="Invalid date"==n?"":n,$(e).text(n)}},ko.bindingHandlers.DateOrDash={update:function(e,t){var a=t(),i="-";if(a&&a()){var n=moment(a());i=n.format("MM/DD/YYYY"),i="Invalid date"==i?"-":i}$(e).text(i)}},ko.bindingHandlers.StringOrDash={update:function(e,t){var a=t(),i="-";a&&a()&&(i=a().trim()?a():"-"),$(e).text(i)}},ko.bindingHandlers.Time={update:function(e,t){var a=t(),i=moment(a()),n=i.format("HH:mm");$(e).text(n)}},ko.bindingHandlers.LongTime={update:function(e,t){var a=t(),i=moment(a()),n=i.format("hh:mm A");$(e).text(n)}},ko.bindingHandlers.clickRadio={init:function(e,t,a,i){var n=t(),r=a().setValue||null;$(e).on("click",function(){"null"===r?n(null):r?n(r):n(i)})}},ko.bindingHandlers.clickToggleInArray={init:function(e,t,a){s();var i=t(),n=a().setValue||null,r=ko.utils.arrayFirst(i(),function(e){return e.id()===n});if(!r){var o={id:n};r=d.createComplexType("Identifier",o)}$(e).on("click",function(){var e=i().indexOf(r);-1===e?i.push(r):i.remove(r)})}},ko.bindingHandlers.clickToggleInLanguageArray={init:function(e,t,a){s();var i=t(),n=a().setValue||null;a().nameValue||null;var r=a().lookupPropertyName||null,o=ko.utils.arrayFirst(i(),function(e){return e[r]()===n});if(!o){var p={};p[r]=n,o=d.createComplexType("ContactMode",p)}$(e).on("click",function(){var e=i().indexOf(o);-1===e?i.push(o):i.remove(o)})}},ko.bindingHandlers.clickTrue={update:function(e,t){var a=t();$(e).on("click",function(){a("true")})}},ko.bindingHandlers.clickFalse={update:function(e,t){var a=t();$(e).on("click",function(){a("false")})}},ko.bindingHandlers.hoverToggle={update:function(e,t){var a=t();ko.utils.registerEventHandler(e,"mouseover",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(a),!0)}),ko.utils.registerEventHandler(e,"mouseout",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(a),!1)})}},ko.bindingHandlers.clickToggle={init:function(e,t,a){var i=t(),n=a().canToggle||null;ko.utils.registerEventHandler(e,"click",function(e){if(n){var t=ko.unwrap(n);t&&(e.preventDefault(),i(!i()))}else e.preventDefault(),i(!i())})}},ko.bindingHandlers.setActiveTab={init:function(e,t,a,i){var n=t();ko.utils.registerEventHandler(e,"click",function(e){e.preventDefault(),i.activeTab(n)})}},ko.bindingHandlers.updateActionElementState={init:function(e,t,a,i){var n=t(),r=n.subscribe(function(){4!==i.step().action().elementState()&&(i.step().action().stateUpdatedOn((new moment).toISOString()),i.step().action().elementState(4))});ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.dispose()})}},ko.bindingHandlers.ssn={init:function(t,a){$(t).attr("maxlength",11),$(t).attr("placeholder","XXX-XX-XXXX"),$(t).attr("title","XXX-XX-XXXX");var i=a(),n=i();n&&n.length>0&&(n=e.formatSeparators(n,"XXX-XX-XXXX","-"),i(n)),$(t).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),$(t).on("keydown paste",function(a){setTimeout(function(){var n=a.which||a.keyCode,r=$(t).val(),o=t.selectionStart;if(r&&37!==n&&39!==n&&9!==n){if(o===r.length&&8===n)return;var s=e.formatSeparators(r.replace(/\D/g,""),"XXX-XX-XXXX","-");i(s),46===n||8===n&&o<s.length?t.setSelectionRange(o,o):n>=48&&57>=n&&o<r.length&&t.setSelectionRange(o,o)}},5)})}},ko.bindingHandlers.phone={init:function(t,a){var i=a();$(t).on("blur",function(){i.validate()?$(t).removeClass("invalid"):$(t).addClass("invalid")}),$(t).attr("maxlength",12),$(t).attr("placeholder","XXX-XXX-XXXX"),$(t).attr("title","XXX-XXX-XXXX");var n=i.number();n&&n.length>0&&(n=e.formatSeparators(n,"XXX-XXX-XXXX","-"),i.number(n)),$(t).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),$(t).on("keydown paste",function(a){setTimeout(function(){var n=a.which||a.keyCode,r=$(t).val(),o=t.selectionStart;if(r&&37!==n&&39!==n&&9!==n){if(o===r.length&&8===n)return;var s=e.formatSeparators(r.replace(/\D/g,""),"XXX-XXX-XXXX","-");i.number(s),46===n||8===n&&o<s.length?t.setSelectionRange(o,o):n>=48&&57>=n&&o<r.length&&t.setSelectionRange(o,o)}},5)})}},ko.bindingHandlers.date={init:function(e,t){var i=t();a(e,i)}},ko.bindingHandlers.datepicker={init:function(e,a,i,n){var r=a(),o=$(e);$(e).attr("maxlength",10);var s=i().datepickerOptions||{},d=i().datepickerDynamicOptions||{};o.datepicker(s);var p=moment.utc(r());if(p.isValid()){p.local();var l=p.format("MM/DD/YYYY");o.datepicker("setDate",l)}if(ko.utils.registerEventHandler(e,"change",function(){var e=o.datepicker("getDate"),a=moment.utc(e);if(!a.isValid())return r(""),null;n.step&&4!==n.step().action().elementState()&&(n.step().action().stateUpdatedOn((new moment).toISOString()),n.step().action().elementState(4));var i=moment(r());i.isValid()?t.isSameDate(a,i)||(i=t.setDateValue(a,i)):i=a,r(i.toISOString())}),d&&d.minDate&&ko.isObservable(d.minDate)){if(d.minDate()){var c=new Date(d.minDate().getTime());o.datepicker("option","minDate",c)}d.minDate.subscribe(function(e){var t=new Date(e.getTime());t.setDate(t.getDate()),o.datepicker("option","minDate",t),r()&&r()<t&&r(t)})}if(d&&d.maxDate&&ko.isObservable(d.maxDate)){if(maxDate.maxDate()){var y=new Date(d.maxDate().getTime());o.datepicker("option","maxDate",y)}d.maxDate.subscribe(function(e){var t=new Date(e.getTime());t.setDate(t.getDate()-1),o.datepicker("option","maxDate",t),r()&&r()>t&&r(t)})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o.datepicker("destroy")})},update:function(e,a){var i=a();$el=$(e),datepickerMoment=moment.utc($el.datepicker("getDate"));var n=moment.utc(i());if(n.isValid()&&datepickerMoment.isValid()&&!t.isSameDate(n,datepickerMoment)){n.local();var r=n.format("MM/DD/YYYY");$el.datepicker("setDate",r),$el.blur().change()}if("clear"===i||!n.isValid()){var i=a();i(null),$.datepicker._clearDate($el)}}},ko.bindingHandlers.datepickerEditable={init:function(e,i,n){var r=i(),o=$(e);a(e,r);var s=n().datepickerOptions||{},d=n().datepickerDynamicOptions||{};if(o.datepicker(s),r()&&moment(r()).isValid()&&("string"==typeof r()&&r().length>9||"string"!=typeof r())){var p=moment.utc(r());p.local();var l=p.format("MM/DD/YYYY");o.datepicker("setDate",l)}if(d&&d.minDate&&ko.isObservable(d.minDate)){if(d.minDate()){var c=moment(d.minDate());c.isValid()&&o.datepicker("option","minDate",c.toDate())}d.minDate.subscribe(function(e){if(e&&t.isValidDate(e,!0)){var a=moment(e),i=o.val();(!i||t.isValidDate(i)&&!moment(i).isBefore(e))&&o.datepicker("option","minDate",a.toDate())}})}if(d&&d.maxDate&&ko.isObservable(d.maxDate)){if(d.maxDate()){var y=moment(d.maxDate());y.isValid()&&o.datepicker("option","maxDate",y.toDate())}d.maxDate.subscribe(function(e){if(e&&t.isValidDate(e,!0)){var a=moment(e),i=o.val();(!i||t.isValidDate(i)&&!moment(i).isAfter(e))&&o.datepicker("option","maxDate",a.toDate())}})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o.datepicker("destroy")})},update:function(e,a,i,n){var r=a(),o=$(e),s=o.datepicker("getDate")?o.datepicker("getDate").toString():null,d=moment.utc(s);if(t.isValidDate(r(),!0)){var p=moment.utc(r());if(p.isValid()&&d.isValid()&&!t.isSameDate(p,d)){p.local();var l=p.format("MM/DD/YYYY");o.datepicker("setDate",l),o.blur().change()}n.step&&4!==n.step().action().elementState()&&(n.step().action().stateUpdatedOn((new moment).toISOString()),n.step().action().elementState(4))}"clear"===r&&(r(null),$.datepicker._clearDate(o))}},ko.bindingHandlers.jqtimepicker={init:function(t,a){function i(e){$(this);var t=a();if(!o)return o=!0,void 0;var i=0,r=0;if(e){var s=moment.utc(e);s.isValid()&&(timeMoment=moment().hours(e.getHours()).minutes(e.getMinutes()),i=timeMoment.hours(),r=timeMoment.minutes())}n(t,i,r)}function n(e,t,a){var i=moment(e());i.local(),i.isValid()&&(i.hours()!==t||i.minutes()!==a)&&(i.hours(t).minutes(a).seconds(0),i.utc(),e(i.toISOString()))}var r=a(),o=!1,s=$(t);if(s.timepicker({zindex:"999",interval:15,scrollbar:!0,startTime:new Date(0,0,0,8,0,0),dynamic:!1,change:i}),r&&r()&&moment(r()).isValid()){var d=moment(r());d.local();var p=e.padZeroLeft(d.hours(),2),l=e.padZeroLeft(d.minutes(),2);s.timepicker("setTime",p+":"+l)}else o=!0;r&&r.extend({notify:"always"})}},ko.bindingHandlers.timepicker={init:function(e,t,a,i){t(),$(e),ko.utils.registerEventHandler(e,"change",function(){var a=t(),n=new Date(moment(a()).toString()),r=moment(n).isDST()?60:0;if(moment($(e)[0].valueAsDate).isValid()){var o=new Date($(e)[0].valueAsDate.getTime()+1e3*60*(n.getTimezoneOffset()+r)),s=n;s.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),i.step&&i.step()&&4!==i.step().action().elementState()&&(i.step().action().stateUpdatedOn((new moment).toISOString()),i.step().action().elementState(4)),a(s.toISOString())}})},update:function(e,t){var a=ko.utils.unwrapObservable(t()),i=$(e),n=new moment(a).format("HH:mm");i[0].value=n}},ko.bindingHandlers.timeOut={init:function(e,t,a){var i=a().timeOutOptions||{},n=t();i&&i.delay&&setTimeout(function(){n(!n)},i.delay),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){})}},ko.bindingHandlers.fullCalendar={update:function(e,t){var a=t();e.innerHTML="",$(e).fullCalendar({defaultView:a.defaultView,events:ko.utils.unwrapObservable(a.events),header:a.header,editable:a.editable,eventClick:a.eventClick}),$(e).fullCalendar("gotoDate",ko.utils.unwrapObservable(a.viewDate))}},ko.bindingHandlers.typeahead={init:function(e,t,a){var i=ko.unwrap(a().initOptions)||{},n=ko.unwrap(t())||{},r=$(e),o=function(){r.change()},s=function(){var e=a().value();e?o():r.typeahead("val","")},d=n.displayKey;n.displayKey=function(e){return ko.unwrap(e[d])},n.dupDetector=function(){return!1};var p=i.overrideSelected?i.overrideSelected:o;n.source=n.taOptions.ttAdapter(),r.typeahead(i,n).on("typeahead:selected",p).on("typeahead:autocompleted",p).on("typeahead:closed",s),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.typeahead("destroy"),r=null})},update:function(e,t){t()}},ko.bindingHandlers.autoHeight={update:function(e,t){t(),$(e).height($(e)[0].scrollHeight)}},ko.bindingHandlers.chosen={init:function(e,t,a){ko.bindingHandlers.options.init(e);var i=ko.unwrap(a()),n=i.chosenOptions?i.chosenOptions.caption:"NO CAPTION SET YET NOT GOOD!!!!",r=i.chosenOptions?i.chosenOptions.isSearch:!1,o=i.chosenOptions?i.chosenOptions.isCancel:!1,s=null;i.chosenOptions&&i.chosenOptions.title&&(s=i.chosenOptions.title);var d={disable_search:!r,allow_single_deselect:o,search_contains:!0,display_selected_options:!0,inherit_select_classes:!0,placeholder_text_multiple:" ",placeholder_text_single:n,width:"auto"};$(e).prepend("<option></option>"),$(e).chosen(d)},update:function(e,t,a,i){ko.bindingHandlers.options.update(e,t,a),$(e).trigger("chosen:updated"),i.title&&(e.parentElement.children[1].children[0].title=i.title)}},ko.bindingHandlers.chosenUpdater={update:function(e,t,a){ko.unwrap(t());var i=ko.unwrap(a().disable);i?$(e).attr("disabled","disabled"):$(e).removeAttr("disabled"),$(e).trigger("chosen:updated")}},ko.bindingHandlers.arrowMover={init:function(e,t){ko.unwrap(t()),$(e).on("click",function(){o(e)})}},ko.bindingHandlers.setHeightFromPrev={update:function(e,t){ko.unwrap(t());var a=$(e),i=a.parent().height()-a.prev(".fixed").outerHeight();a.css("height",i+"px")}},ko.bindingHandlers.pieChart={update:function(e,t,a){var i=ko.utils.unwrapObservable(t()),n=a().chartOptions;$(e).highcharts({chart:{plotBackgroundColor:null,plotShadow:!1},title:{text:null},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{animation:!1,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},colors:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4","#ffffbf"],credits:{enabled:!1},series:[{type:"pie",name:n.title,data:i}]})}},ko.bindingHandlers.showResultsCount={update:function(e,t,a){var i=ko.unwrap(t());setTimeout(function(){var e=$(".tt-dataset-"+ko.unwrap(a().typeahead).name+" .tt-suggestions")[0],t=$(".tt-dataset-"+ko.unwrap(a().typeahead).name+" .tt-suggestions > .tt-suggestion")[0];if(e&&i){var n=document.createElement("div");n.innerHTML="("+i+")",e.insertBefore(n,t)}},150)}},ko.bindingHandlers.columnSizer={init:function(e,t){if(!n()&&!r()){var a=$(e);$(document).ready(function(){setTimeout(function(){var e="nobody"===t()?!0:!1;i(a,e)},1)}),$(window).on("resize",function(){i(a)})}},update:function(e,t,a){if(ko.unwrap(a().columnSizer.triggers),!n()&&!r()){var o=$(e);setTimeout(function(){var e="nobody"===t()?!0:!1;i(o,e)},1)}}}});
define('services/branding',[],function(){function e(e,t){var a=this;a.brandName=ko.observable(e),a.imageSource=ko.observable(t)}var t=ko.observable(new e("Phytel","/NightingaleUI/Content/images/phytel_logo.png")),a={currentBrand:t};return a});
define('services/jsonResultsAdapter',[],new breeze.JsonResultsAdapter({name:"Nightingale",extractResults:function(e){var t=e.results;if(!t)throw new Error("Unable to resolve 'results' property");return t&&(t.Problems||t.PatientProblem||t.PatientProblems||t.Patient||t.Cohorts||t.Patients||t.Program||t.Programs||t.PlanElems||t.Languages||t.States||t.CommModes||t.TimesOfDays||t.TimeZones||t.CommTypes||t.Contact||t.Contacts||t.LookUps||t.LookUpDetails||t.Goals||t.Goal||t.Note||t.Notes||t.Library||t.CareMembers||t.Observations||t.Observation||t.PatientObservations||t.PatientObservation||t.Action||t.Actions||t.Attributes||t.Objectives||t.ToDo||t.ToDos||t.PatientDetails||t.Intervention||t.Interventions||t.Task||t.Tasks||t.PatientSystems||t.Allergy||t.Allergies||t.PatientAllergy||t.PatientAllergies||t.PatientMedSupp||t.PatientMedSupps||t.PatientMedFrequencies)},visitNode:function(e,t,a){if(!e)return!1;if(e.PatientProblemID)return{entityType:"PatientProblem"};if(e.ConditionID&&e.DisplayName)return{entityType:"Condition"};if(e.Id&&e.DOB||e.Id&&e.Flagged&&e.Priority)return{entityType:"Patient"};if(e.ProgramId&&e.Actions){var n=e.DateCompleted;if(!n)return{entityType:"Module"};var r=n.substr(0,6);if(-1!==r.indexOf("Date")){var i=n.substr(6,13),o=new Date;o.setTime(i),e.DateCompleted=o.toISOString()}return{entityType:"Module"}}if(e.PatientId&&e.ContractProgramId)return{entityType:"Program"};if(e.Enrollment&&e.PlanElementId)return{entityType:"Attributes"};if(e.ModuleId&&e.Steps)return{entityType:"Action"};if(e.StepTypeId)return{entityType:"Step"};if(e.StepId)return{entityType:"Response"};if(e.ElementId)return{entityType:"SpawnElement"};if(e.CommModes&&e.Id)return e.CommModeIds=[],$.each(e.CommModes,function(t,a){e.CommModeIds.push({Id:a})}),{entityType:"CommunicationType"};if(t.query.fromEntityType&&"Note"===t.query.fromEntityType.shortName&&e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){t&&s.push({Id:t})}),e.ProgramIds=s}if(e.TimeZoneId)return e.PreferredTimesOfDayIds=[],e.PreferredDaysOfWeekIds=[],e.TimesOfDaysId&&$.each(e.TimesOfDaysId,function(t,a){e.PreferredTimesOfDayIds.push({Id:a})}),e.WeekDays&&$.each(e.WeekDays,function(t,a){e.PreferredDaysOfWeekIds.push({Id:a})}),{entityType:"ContactCard"};if(t.query.fromEntityType&&"ToDo"===t.query.fromEntityType.shortName){if(e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){t&&s.push({Id:t})}),e.ProgramIds=s}return a.navigationProperty&&"patientDetails"===a.navigationProperty.name?{entityType:"ToDoPatient"}:{entityType:"ToDo"}}if(t.query.fromEntityType&&"Intervention"===t.query.fromEntityType.shortName||a.propertyName&&"interventions"===a.propertyName){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return a.navigationProperty&&"patientDetails"===a.navigationProperty.name?{entityType:"ToDoPatient"}:{entityType:"Intervention"}}if(t.query.fromEntityType&&"Task"===t.query.fromEntityType.shortName||a.propertyName&&"tasks"===a.propertyName){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}if(a.navigationProperty&&"patientDetails"===a.navigationProperty.name)return{entityType:"ToDoPatient"};if(e.CustomAttributes)return $.each(e.CustomAttributes,function(e,t){var a=[];t&&t.Values&&($.each(t.Values,function(e,t){t&&a.push({Value:t})}),t.Values=a)}),{entityType:"Task"}}if(t.query.fromEntityType&&"Goal"===t.query.fromEntityType.shortName||a.propertyName&&"goals"===a.propertyName){if("root"===a.nodeType||a.propertyName&&"goals"===a.propertyName){if(e.FocusAreaIds){var d=[];$.each(e.FocusAreaIds,function(e,t){t&&d.push({Id:t})}),e.FocusAreaIds=d}if(e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){t&&s.push({Id:t})}),e.ProgramIds=s}return e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var a=[];t.Values&&($.each(t.Values,function(e,t){t&&a.push({Value:t})}),t.Values=a)}),{entityType:"Goal"}}if(a.navigationProperty){if("tasks"===a.navigationProperty.name){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var a=[];$.each(t.Values,function(e,t){t&&a.push({Value:t})}),t.Values=a}),{entityType:"Task"}}if("barriers"===a.navigationProperty.name)return{entityType:"Barrier"};if("interventions"===a.navigationProperty.name){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return{entityType:"Intervention"}}}}if(e.Id&&e.Name&&e.Categories)return{entityType:"ObjectiveLookup"};if(e.SystemId&&e.SystemName)return{entityType:"PatientSystem"};if(e.ObservationId&&e.TypeId)return{entityType:"PatientObservation"};if(e.Title&&e.StatusId&&e.AssignedToId){if(e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){t&&s.push({Id:t})}),e.ProgramIds=s}return{entityType:"ToDo"}}if(t.query.fromEntityType&&"ObservationState"===t.query.fromEntityType.shortName&&(e.AllowedTypeIds=[],$.each(e.TypeIds,function(t,a){e.AllowedTypeIds.push({Id:a})})),e.AllergyId&&e.AllergyTypeIds){var c=[],u=[];return $.each(e.AllergyTypeIds,function(e,t){c.push({Id:t})}),e.AllergyTypeIds=c,$.each(e.ReactionIds,function(e,t){u.push({Id:t})}),e.ReactionIds=u,{entityType:"PatientAllergy"}}if(t.query.fromEntityType&&"PatientMedication"===t.query.fromEntityType.shortName){var l=[],p=[];if($.each(e.NDCs,function(e,t){l.push({Id:t})}),$.each(e.PharmClasses,function(e,t){p.push({Id:t})}),e.NDCs=l,e.PharmClasses=p,"root"===a.nodeType||a.propertyName&&"patientMedSupps"===a.propertyName)return{entityType:"PatientMedication"}}}}));
define('services/dataservices/getentityservice',["services/session"],function(e){function t(e,t,a,n,i,r){var o=breeze.EntityQuery.from(t).toType(a);return r&&(o=o.orderBy(r)),n&&i&&(o=o.where(n,"==",i)),e.executeQueryLocally(o)}function a(e,t,a,n,i){var r=breeze.EntityQuery.from(t).where(n,"==",i).toType(a);return e.executeQueryLocally(r)}function n(e,t){e.sort(function(e,a){return e[t]()>a[t]()?1:-1})}function i(t){t.status&&401===t.status&&e.logOff()}function r(){o||(o=require("services/datacontext"))}var o,s=function(e,a,s,d,c,l,u,p,y,m,g){function f(e){var t=e.results;return s&&s(t),m&&n(s,m),a}function v(e){r(),i(e),console.log(e);var t="Failed to load "+d+" from server.",n=o.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),o.alerts.push(n),a}if(r(),!e)throw new Error("[manager] cannot be a null parameter");if(!p){var h=t(e,c,d,l,u,m);if(h.length>0)return s(h),Q.resolve(a)}u&&!l&&(c+=u);var T={};if(y)T=y;else var T={};u&&l&&(T[l]=u);var S,N=breeze.EntityQuery.from(c).withParameters(T).toType(d);if(g){var b=e.queryOptions.using(breeze.MergeStrategy.SkipMerge);S=N.using(b)}else S=N;return e.executeQuery(S).then(f).fail(v)},d=function(e,t,n,s,d,c,l){function u(e){var a=e.results[0];return n&&n(a),t}function p(e){r(),i(e),console.log(e);var a="Failed to load "+d+" from server.",n=o.createEntity("Alert",{result:0,reason:a});return n.entityAspect.acceptChanges(),o.alerts.push(n),t}r();var y=c+s,m={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!l){var g=a(e,y,d,"id",s);if(g.length>0)return n&&n(g[0]),Q.resolve(t)}var f=breeze.EntityQuery.from(y).withParameters(m).toType(d);return e.executeQuery(f).then(u).fail(p)},c=function(e,t,n,s,d,c,l,u){function p(e){var a=e.results[0];return n&&n(a),t}function y(e){r(),i(e),console.log(e);var a="Failed to load "+d+" from server.",n=o.createEntity("Alert",{result:0,reason:a});return n.entityAspect.acceptChanges(),o.alerts.push(n),t}r();var m=c;s&&(m+=s);var g={};if(u)g=u;else var g={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!l){var f=a(e,m,d,"id",s);if(f.length>0)return n(f[0]),Q.resolve(t)}var v=breeze.EntityQuery.from(m).withParameters(g).toType(d);return e.executeQuery(v).then(p).fail(y)},l={getEntityList:s,getEntityById:d,getLocalById:a,getMelsEntityById:c};return l});
define('services/dataservices/usersservice',["models/base","config.services","services/session"],function(e,t,a){function n(e){r(),console.log("Error - ",e),e.status&&401===e.status&&a.logOff();var t=i.createEntity("Alert",{result:"error",reason:"Log-in failed!"});t.entityAspect.acceptChanges(),i.alerts.push(t)}function r(){i||(i=require("services/datacontext"))}var i,o=function(e,a,r,i){function o(e){var t=e.results[0];return r(t)}var s={Token:i,APIKey:t.apiAppKey,Context:"NG"};if(i){var c=breeze.EntityQuery.from(a).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("User");return e.executeQuery(c).then(o).fail(n)}},s=function(e,a){var n;return n=t.securityServiceName+a,e?$.ajax({url:n,cache:!1,headers:{token:e},dataType:"json",type:"POST",data:{Context:"NG"},success:function(){return!0}}):void 0},c=function(e,a,r){var i;e||(e="usersettings"),i=t.remoteServiceName+e,$.ajax({url:i,cache:!1,headers:{Token:r},dataType:"json",type:"GET",success:function(e){return $.each(e.Settings,function(e,t){a().settings.push(t)}),!0}}).fail(n)},d=function(e,t){var a={};a.firstName=t.firstName||"",a.lastName=t.lastName||"",a.aPIToken=t.aPIToken||"",a.userId=t.userId||"",a.userName=t.userName||"",a.contracts=t.contracts||[];var n=e.createEntity("User",a);return n.entityAspect.acceptChanges(),n},u={getSessionUser:o,deleteSessionToken:s,getUserSettings:c,createUserFromSessionUser:d};return u});
define('services/dataservices/calendarservice',["models/users","config.services","services/local.collections"],function(e,t,a){function n(e){a.events.remove(e),e.entityAspect.setDeleted(),e.entityAspect.acceptChanges()}function i(e){var t=ko.utils.arrayFirst(a.events(),function(t){return t.id()===e});t&&n(t)}function r(e,t,a,n,i){var r=breeze.EntityQuery.from(t).select("id, title, start, end, allDay, url").toType(a);return n&&i&&(r=r.where(n,"==",i)),e.executeQueryLocally(r)}function o(e,t,a,n,i){var r=breeze.EntityQuery.from(t).where(n,"==",i).toType(a);return e.executeQueryLocally(r)}var s=function(e,t,a,n,i){if(!e)throw new Error("[manager] cannot be a null parameter");if(!i){var o=r(e,t,"Event","userId",n);if(o.length>0)return a(o),Q.resolve()}},d=function(e,t){var n=e.createEntity("Event",t);return n.entityAspect.acceptChanges(),a.events.push(n),n},c=function(e,t){if(!e)throw new Error("[manager] cannot be a null parameter");var a=o(e,"Event","Event","id",t);return a.length>0?a[0]:void 0},l={getEventsByUserId:s,createCalendarEvent:d,removeCalendarEventById:i,getEventById:c};return l});
define('services/usercontext',["services/session","models/base","config.services","models/users","services/dataservices/usersservice","services/dataservices/calendarservice"],function(e,t,a,n,r,i){function o(){breeze.NamingConvention.camelCase.setAsDefault();var e=new breeze.EntityManager({dataService:c});return n.initialize(e.metadataStore),e}var s=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"null"}),d=ko.computed(function(){return e.currentUser()?e.currentUser().userId():"nothing"}),c=new breeze.DataService({serviceName:a.securityServiceName,hasServerMetadata:!1}),u=o();u.metadataStore;var l=function(e,t,a){return Q(r.getSessionUser(u,"1.0/login",e,t,a))},p=function(e){return Q(r.deleteSessionToken(s(),e))},y=function(e,t,a){return Q(r.getUserSettings(t,e,a))},m=function(e){return r.createUserFromSessionUser(u,e)},g=function(){return n.createCalendarMocks(u,d())},f=function(){return n.initializeEnums(u)},v=function(e,t,a){var n="events";return i.getEventsByUserId(u,n,e,t,a)},h=function(e){return i.getEventById(u,e)},T=function(e){return i.createCalendarEvent(u,e)},S=function(e){i.removeCalendarEventById(e)},N=function(e,t){return u.createEntity(e,t)},b={createEntity:N,getUserByUserToken:l,logOutUserByToken:p,getUserSettings:y,createUserFromSessionUser:m,getEventsByUserId:v,createCalendarMocks:g,createCalendarEvent:T,removeCalendarEventById:S,getEventById:h,initializeEnums:f};return b});
define('services/dataservices/contactservice',["services/session","config.services","services/entityfinder"],function(e,t){function a(a,n){function o(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");r();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Contact","ContactCard");if(n){var d={};d.Contact=n,d=JSON.stringify(d);var c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(c).then(o).fail(i)}}function n(e){r();var t=e.patient().id();e.entityAspect.rejectChanges(),e.entityAspect.setDetached(),o.getEntityList(null,s().EntityType,s().ResourcePath+t+"/Contact",null,null,!0)}function i(e){r(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.alerts.push(t)}function r(){o||(o=require("services/datacontext"))}var o,s=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),d={saveContactCard:a,cancelAllChangesToContactCard:n};return d});
define('services/dataservices/lookupsservice',["models/base","config.services","services/session"],function(e,t,a){function n(e,n,r){function o(e){var t=e.results;return r(t)}var s;a&&a.currentUser&&(s=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Lookup/"+n,n));var d=breeze.EntityQuery.from(s.ResourcePath).toType(s.EntityType);return e.executeQuery(d).then(o).fail(i)}function r(e,n,r){function o(e){var t=e.results;return r(t)}var s;a&&a.currentUser&&(s=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Lookup/Details/"+n,n));var d=breeze.EntityQuery.from(s.ResourcePath).toType(s.EntityType);return e.executeQuery(d).then(o).fail(i)}function i(e){o(),console.log("Error - ",e);var t=s.createEntity("Alert",{result:0,reason:"Load lookups failed!"});t.entityAspect.acceptChanges(),s.alerts.push(t)}function o(){s||(s=require("services/datacontext"))}var s,d={getLookup:n,getNoteLookup:r};return d});
define('services/dataservices/goalsservice',["services/session","config.services","services/entityfinder"],function(e,t){function a(a,n,r,i,o){c();var s="Patient/"+i+"/Goal";o&&(s+="/"+o+"/"+r),s+="/Initialize";var l=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),s,r),u={},p=breeze.EntityQuery.from(l.ResourcePath).toType(r).withParameters(u);return a.executeQuery(p).fail(d)}function n(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");c();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Goal/"+n.Id+"/Update","Goal");if(n){var o={};o.Goal=n,o=JSON.stringify(o);var s=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Goal");return a.executeQuery(s).then(r).fail(d)}}function r(a,n,r){function i(e){return e.results[0],e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");c();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+n.PatientGoalId+"/Intervention/"+n.Id+"/Update","Goal");if(n){var s={};s.Intervention=n,s=JSON.stringify(s);var l=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Intervention");return a.executeQuery(l).then(i).fail(d)}}function i(a,n,r){function i(e){return e.results[0],e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");c();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+n.PatientGoalId+"/Task/"+n.Id+"/Update","Goal");if(n){var s={};s.Task=n,s=JSON.stringify(s);var l=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Task");return a.executeQuery(l).then(i).fail(d)}}function o(a,n,r){function i(e){return e.results[0],e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");c();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+n.PatientGoalId+"/Barrier/"+n.Id+"/Update","Goal");if(n){var s={};s.Barrier=n,s=JSON.stringify(s);var l=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Barrier");return a.executeQuery(l).then(i).fail(d)}}function s(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");c();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Goal/"+n.id()+"/Delete","Goal"),o={};o=JSON.stringify(o);var s=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return a.executeQuery(s).then(r).fail(d)}function d(){c(),console.log("Error - ",error);var e=m.createEntity("Alert",{result:0,reason:"Save failed!"});e.entityAspect.acceptChanges(),m.alerts.push(e)}function c(){m||(m=require("services/datacontext"))}function l(e,t,a){function n(e){var a=e.results;return t?t(a):a}function r(e){console.log(e),c(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=m.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),m.alerts.push(a),!1}if(c(),!e)throw new Error("[manager] cannot be a null parameter");var i={};if(a)i=a;else var i={};var o={};o.PatientId=a.PatientId,o.AssignedToId=a.AssignedToId,o.CreatedById=a.CreatedById,o.FromDate=a.FromDate,o.StatusIds=a.StatusIds,o=JSON.stringify(o);var s=breeze.EntityQuery.from(g().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Intervention");return e.executeQuery(s).then(n).fail(r)}function u(e,t,a){if(c(),!e)throw new Error("[manager] cannot be a null parameter");var n=breeze.EntityQuery.from("Interventions").toType("Intervention");a&&(n=n.orderBy(a));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);n=n.where(i)}return e.executeQueryLocally(n)}function p(e,t,a){function n(e){var a=e.results;return t?t(a):a}function r(e){console.log(e),c(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=m.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),m.alerts.push(a),!1}if(c(),!e)throw new Error("[manager] cannot be a null parameter");var i={};if(a)i=a;else var i={};var o={};o.PatientId=a.PatientId,o.AssignedToId=a.AssignedToId,o.CreatedById=a.CreatedById,o.FromDate=a.FromDate,o.StatusIds=a.StatusIds,o=JSON.stringify(o);var s=breeze.EntityQuery.from(f().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Task");return e.executeQuery(s).then(n).fail(r)}function y(e,t,a){if(c(),!e)throw new Error("[manager] cannot be a null parameter");var n=breeze.EntityQuery.from("Tasks").toType("Task");a&&(n=n.orderBy(a));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);n=n.where(i)}return e.executeQueryLocally(n)}var m,g=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Goal/Interventions","Intervention",null):""}),f=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Goal/Tasks","Task",null):""}),v={initializeEntity:a,saveGoal:n,saveIntervention:r,saveTask:i,saveBarrier:o,deleteGoal:s,getInterventions:l,getInterventionsQuery:u,getTasks:p,getTasksQuery:y};return v});
define('services/dataservices/notesservice',["services/session","config.services"],function(e,t){function a(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Note/Insert","Note");if(n){var c={};c.Note=n,c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(i)}}function n(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Note/"+n.id()+"/Delete","Note"),c={};c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(i)}function r(a,n,r){function s(e){return e.results&&e.results.length>0?e.results[0]:e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var c=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Scheduling/ToDo/"+r,"ToDo");if(n){var d={};d.ToDo=n,d=JSON.stringify(d);var u=breeze.EntityQuery.from(c.ResourcePath).toType("ToDo").withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(u).then(s).fail(i)}}function i(e){o(),console.log("Error - ",e);var t=d.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),d.alerts.push(t)}function o(){d||(d=require("services/datacontext"))}function s(e,t,a){function n(e){var a=e.results;return t?t(a):a}function r(e){console.log(e),o(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=d.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),d.alerts.push(a),!1}if(o(),!e)throw new Error("[manager] cannot be a null parameter");var i={};if(a)i=a;else var i={};var s={};s.PatientId=a.PatientId,s.AssignedToId=a.AssignedToId,s.CreatedById=a.CreatedById,s.FromDate=a.FromDate,s.StatusIds=a.StatusIds,s=JSON.stringify(s);var c=breeze.EntityQuery.from(u().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("ToDo");return e.executeQuery(c).then(n).fail(r)}function c(e,t,a){if(o(),!e)throw new Error("[manager] cannot be a null parameter");var n=breeze.EntityQuery.from("ToDo").toType("ToDo");a&&(n=n.orderBy(a));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);n=n.where(i)}return e.executeQueryLocally(n)}var d,u=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Scheduling/ToDos","ToDo",null):""}),l={saveNote:a,deleteNote:n,saveToDo:r,getToDos:s,getToDosQuery:c};return l});
define('services/dataservices/observationsservice',["services/session","config.services"],function(e,t){function a(){s();var a=ko.observableArray(),n=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"/Observations","Observation");return c.getEntityList(a,n.EntityType,n.ResourcePath,null,null,!0)}function n(a,n){function r(){return ko.utils.arrayForEach(i(),function(e){e.typeId(n)}),!0}s();var i=ko.observableArray(),o="533d8278d433231deccaa62d"!==n?"/MatchLibrary/false":"/MatchLibrary/",d=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"/Observation/Type/"+n+o,"Observation");return c.getEntityList(i,d.EntityType,d.ResourcePath,null,null,!0).then(r)}function r(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");s();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Observation/Update","PatientObservation");if(n){var c={};c.PatientObservations=n,c=JSON.stringify(c);var d=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(o)}}function i(a,n,r,i,d,u){function l(e){return c.observationsSaving(!1),n(e.results[0]),e}s(),c.observationsSaving(!0);var p="Patient/"+d+"/Observation/"+u;p+="533d8278d433231deccaa62d"!==i?"":"/Problem/Initialize";var y=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),p,r),m=breeze.EntityQuery.from(y.ResourcePath).toType(r);return a.executeQuery(m).then(l).fail(o)}function o(e){c.observationsSaving(!1),console.log(e)}function s(){c||(c=require("services/datacontext"))}var c,d={getObservations:a,getObservationsByTypeId:n,saveObservations:r,initializeObservation:i};return d});
define('services/dataservices/caremembersservice',["services/session","config.services"],function(e,t){function a(a,n,o){function s(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");r();var d=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/CareMember/"+o,"CareMember");if(n){var c={};c.CareMember=n,c=JSON.stringify(c);var l=breeze.EntityQuery.from(d.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(l).then(s).fail(i)}}function n(a,n){function o(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");r();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Note/"+n.id()+"/Delete","Note"),d={};d=JSON.stringify(d);var c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(c).then(o).fail(i)}function i(e){r(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.alerts.push(t)}function r(){o||(o=require("services/datacontext"))}var o,s={saveCareMember:a,deleteNote:n};return s});
define('services/dataservices/patientsservice',["services/session","config.services"],function(e,t){function a(a,n,r){function i(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n+"/Background","Background");if(n){var s={};s.PatientId=n,s.Background=r,s=JSON.stringify(s);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return a.executeQuery(u).then(i).fail(c)}}function n(a,n,r){if(!a)throw new Error("[manager] cannot be a null parameter");d();var i=n.Id,o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Update","Patient");if(i){var s={};s.Patient=n,s.Insert=r,n.InsertDuplicate&&(s.InsertDuplicate=!0),s=JSON.stringify(s);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return a.executeQuery(u).fail(c)}}function r(a,n){function r(e){var t=l.createEntity("Alert",{result:1,reason:"Individual deleted!"});return t.entityAspect.acceptChanges(),l.alerts.push(t),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var i=n.id(),o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+i+"/Delete","Patient");if(i){var s={};s=JSON.stringify(s);var c=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return a.executeQuery(c).then(r)}}function i(a,n){function r(e){return n(e.results[0]),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Initialize"),o=breeze.EntityQuery.from(i.ResourcePath).toType("Patient");return a.executeQuery(o).then(r).fail(c)}function o(a,n,r){function i(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientSystem/Save","PatientSystem");if(n){var s={};s.PatientSystem=n,r&&(s.Insert=!0),s=JSON.stringify(s);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return a.executeQuery(u).then(i).fail(c)}}function s(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n+"/SSN");if(n){var o={};o=JSON.stringify(o);var s=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"GET",$encoding:"JSON",$data:o});return a.executeQuery(s).then(r).fail(c)}}function c(e){d(),console.log("[PatientService] Error - ",e);var t=l.createEntity("Alert",{result:0,reason:"Save failed!"});return t.entityAspect.acceptChanges(),l.alerts.push(t),e}function d(){l||(l=require("services/datacontext"))}function u(t){var a=e.currentUser(),n=a.recentIndividuals();-1!==n.indexOf(t)?(a.recentIndividuals.remove(t),a.recentIndividuals.unshift(t)):a.recentIndividuals.unshift(t)}var l,p={saveBackground:a,saveIndividual:n,getFullSSN:s,deleteIndividual:r,addPatientToRecentList:u,initializeIndividual:i,savePatientSystem:o};return p});
define('services/dataservices/allergiesservice',["services/session","config.services","services/entityfinder"],function(e,t){function a(a,n){function i(e){return e.results}if(!a)throw new Error("[manager] cannot be a null parameter");d();var r=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/allergy","IdName"),o={};o.SearchTerm=n,o.Take=15,o=JSON.stringify(o);var c=breeze.EntityQuery.from(r.ResourcePath).withParameters(o).toType("AllergySearch");return a.executeQuery(c).then(i).fail(s)}function n(a,n,i,r,o){function c(e){return p.allergySaving(!1),n(e.results[0]),n}d(),p.allergySaving(!0);var l="PatientAllergy/Initialize",u={};u.PatientId=r,u.AllergyId=o;var y=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),l,i),m=breeze.EntityQuery.from(y.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:u}).toType("PatientAllergy");return a.executeQuery(m).then(c).fail(s)}function i(a,n){d();var i="Allergy/Initialize",r={};r.AllergyName=n;var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),i,"AllergySearch"),c=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:r}).toType("AllergySearch");return a.executeQuery(c).fail(s)}function r(a,n){if(!a)throw new Error("[manager] cannot be a null parameter");d();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientAllergy/Update");if(n){var r={};r.PatientAllergies=n,r=JSON.stringify(r);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:r}).toType("PatientAllergy");return a.executeQuery(o).fail(s)}}function o(a,n){function i(e){var t=p.createEntity("Alert",{result:1,reason:"Allergy deleted!"});return t.entityAspect.acceptChanges(),p.alerts.push(t),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");d();var r=n.id();if(r){var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient");o.ResourcePath+=n.patientId()+"/PatientAllergy/"+r;var s=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return a.executeQuery(s).then(i)}}function s(e){d(),console.log("Error - ",e);var t=p.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),p.alerts.push(t)}function d(){p||(p=require("services/datacontext"))}function c(e,t,a,n){function i(e){var a=e.results;return t?t(a):a}function r(e){console.log(e),d(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=p.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),p.alerts.push(a),!1}if(d(),!e)throw new Error("[manager] cannot be a null parameter");var o={};if(a)o=a;else var o={};var s={};s.StatusIds=a.StatusIds,s=JSON.stringify(s);var c=breeze.EntityQuery.from(u().ResourcePath+n).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("PatientAllergy");return e.executeQuery(c).then(i).fail(r)}function l(e,t,a){if(d(),!e)throw new Error("[manager] cannot be a null parameter");var n=breeze.EntityQuery.from("PatientAllergy").toType("PatientAllergy");a&&(n=n.orderBy(a));var i=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);i.push(t)}),i){var r=breeze.Predicate.and(i);n=n.where(r)}return e.executeQueryLocally(n)}ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""});var p,u=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientAllergy","PatientAllergy",null):""}),y={getRemoteAllergies:a,saveAllergies:r,initializeAllergy:n,initializeNewAllergy:i,getPatientAllergies:c,getPatientAllergiesQuery:l,deletePatientAllergy:o};return y});
define('services/dataservices/medicationsservice',["services/session","config.services","services/entityfinder","services/dataservices/getentityservice"],function(e,t,a,n){function r(a,n){function r(e){return e.results}if(!a)throw new Error("[manager] cannot be a null parameter");l();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/meds","IdName"),o={};o.SearchTerm=n,o.Take=15,o=JSON.stringify(o);var s=breeze.EntityQuery.from(i.ResourcePath).withParameters(o).toType("MedicationSearch");return a.executeQuery(s).then(r).fail(u)}function i(a,n,r,i,o){function s(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");l();var c=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/meds/fields","MedicationSearch"),d={};d.Name=n,r&&(d.Route=r),i&&(d.Form=i),o&&(d.Strength=o.split(" ")[0]);var p=breeze.EntityQuery.from(c.ResourcePath).withParameters(d).toType("MedicationSearch");return a.executeQuery(p).then(s).fail(u)}function o(a,n,r,i,o){function s(e){return v.medicationSaving(!1),n(e.results[0]),n}l(),v.medicationSaving(!0);var c="PatientMedication/Initialize",d={};d.PatientId=i,d.MedicationId=o;var p=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),c,r),y=breeze.EntityQuery.from(p.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d}).toType("PatientMedication");return a.executeQuery(y).then(s).fail(u)}function s(a,n){function r(e){return e.httpResponse.data}l();var i="MedicationMap/Initialize",o={MedicationMap:{FullName:n}},s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),i),c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return a.executeQuery(c).then(r).fail(u)}function c(a,n,r){if(!a)throw new Error("[manager] cannot be a null parameter");l();var i=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp/Save");if(n){var o={};o.PatientMedSupp=n,r&&(o.Insert=!0),n.RecalculateNDC&&!r&&(o.RecalculateNDC=!0),o=JSON.stringify(o);var s=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("PatientMedication");return a.executeQuery(s).fail(u)}}function d(a,n){function r(e){var t=v.createEntity("Alert",{result:1,reason:"Medication deleted!"});return t.entityAspect.acceptChanges(),v.alerts.push(t),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");l();var i=n.id();if(i){var o=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient");o.ResourcePath+=n.patientId()+"/PatientMedSupp/"+i;var s=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return a.executeQuery(s).then(r)}}function u(e){l(),console.log("Error - ",e);var t=v.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),v.alerts.push(t)}function l(){v||(v=require("services/datacontext"))}function p(e,t){return n.getLocalById(e,T().ResourcePath+t,"PatientMedicationFrequency","id",t)}function y(e,t,a){function n(n){if(n&&n.httpResponse&&n.httpResponse.data){var r=n.httpResponse.data;if(r.Id){var i=p(e,r.Id);0===i.length&&e.createEntity("PatientMedicationFrequency",{id:r.Id,name:t,patientId:a,sortOrder:0},breeze.EntityState.Unchanged)}return r}return n}if(t&&a){if(l(),!e)throw new Error("[manager] cannot be a null parameter");var r={PatientMedFrequency:{PatientId:a,Name:t}};r=JSON.stringify(r);var i=breeze.EntityQuery.from(T().ResourcePath+"Insert").withParameters({$method:"POST",$encoding:"JSON",$data:r}).toType("PatientMedicationFrequency");return e.executeQuery(i).then(n).fail(u)}}function m(e,t,a,n){function r(t,a){function n(e){var a=e.results;return t?t(a):a}var r=breeze.Predicate.create("patientId",breeze.FilterQueryOp.Equals,null).or("patientId",breeze.FilterQueryOp.Equals,"").or("patientId",breeze.FilterQueryOp.Equals,a).or("patientId",breeze.FilterQueryOp.Equals,"-1"),i=breeze.EntityQuery.from(T().ResourcePath+a).toType("PatientMedicationFrequency").where(r).orderBy("sortOrder, name");return i=i.using(breeze.FetchStrategy.FromLocalCache),e.executeQuery(i).then(n).fail(o)}function i(e){return a&&ko.utils.arrayForEach(e.results,function(e){e.patientId(a),e.sortOrder(0),e.entityAspect.acceptChanges()}),r(t,a)}function o(e){console.log(e),l(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=v.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),v.alerts.push(a),!1}if(l(),!e)throw new Error("[manager] cannot be a null parameter");if(n){var s=breeze.EntityQuery.from(T().ResourcePath+a).toType("PatientMedicationFrequency");return e.executeQuery(s).then(i).fail(o)}return r(t,a)}function g(e,t,a,n){function r(e){var a=e.results;return t?t(a):a}function i(e){console.log(e),l(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",a=v.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),v.alerts.push(a),!1}if(l(),!e)throw new Error("[manager] cannot be a null parameter");var o={};if(a)o=a;else var o={};var s={};s.StatusIds=a.StatusIds,s.CategoryIds=a.CategoryIds,s=JSON.stringify(s);var c=breeze.EntityQuery.from(h().ResourcePath+n).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("PatientMedication");return e.executeQuery(c).then(r).fail(i)}function f(e,t,a){if(l(),!e)throw new Error("[manager] cannot be a null parameter");var n=breeze.EntityQuery.from("PatientMedication").toType("PatientMedication");a&&(n=n.orderBy(a));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);n=n.where(i)}return e.executeQueryLocally(n)}ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""});var v,h=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp","PatientMedication",null):""}),T=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp/Frequency","PatientMedicationFrequency"):""}),S={getRemoteMedications:r,saveMedication:c,initializeMedication:o,initializeNewMedication:s,getPatientMedications:g,getPatientFrequencies:m,saveCustomFrequency:y,getRemoteMedicationFields:i,getPatientMedicationsQuery:f,deletePatientMedication:d};return S});
define('services/datacontext',["services/session","services/jsonResultsAdapter","models/base","config.services","services/dataservices/getentityservice","models/programs","models/lookups","models/contacts","models/goals","models/notes","models/observations","models/allergies","models/medications","services/dataservices/programsservice","services/entityfinder","services/usercontext","services/dataservices/contactservice","services/entityserializer","services/dataservices/lookupsservice","services/dataservices/goalsservice","services/dataservices/notesservice","services/dataservices/observationsservice","services/dataservices/caremembersservice","services/dataservices/patientsservice","services/dataservices/allergiesservice","services/dataservices/medicationsservice","services/local.collections"],function(e,t,a,n,i,r,o,s,d,c,l,p,u,m,y,g,f,T,v,h,S,N,b,k,P,E,I){function D(e,t){var a=this;a.Message=ko.observable(e),a.Showing=ko.observable(t)}function C(){var e=breeze.config.getAdapterInstance("ajax","jQuery");e.defaultSettings={headers:{Token:Ca()}};var t=breeze.config.initializeAdapterInstance("dataService","webApi",!0);t.defaultSettings={headers:{Token:Ca()}},breeze.ajaxpost()}function A(e,t){return xa.createEntity(e,t)}function O(e,t,a,n){return h.initializeEntity(xa,e,t,a,n)}function w(e,t){var a=xa.metadataStore.getEntityType(e),n=a.createInstance(t);return n}function M(){C();var t=Q.all([rt(),Ba(e.currentUser,"/1.0/"+e.currentUser().contracts()[0].number()+"/settings",Ca()),x(),F(),K(),_(),B(),U(),V(),z(),L(),q(),X(),H(),Y(),Z(),tt(),at(),R(),W(),it()]).then(G);return t}function x(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/problems","Problem");return Ha(null,t.EntityType,t.ResourcePath,null,null,!0)}}function F(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort");return Ha(null,t.EntityType,t.ResourcePath,null,null,!0)}}function K(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"programs/active","ContractProgram");return Ha(null,t.EntityType,t.ResourcePath,null,null,!0)}}function _(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timesofdays","TimeOfDay");return Ha(ja.enums.timesOfDay,t.EntityType,t.ResourcePath,null,null,!0)}}function B(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timezones","TimeZone");return Ha(ja.enums.timeZones,t.EntityType,t.ResourcePath,null,null,!0,null,"name")}}function Y(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/objectives","ObjectiveLookup");return Ha(ja.enums.objectives,t.EntityType,t.ResourcePath,null,null,!0)}}function U(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/states","State");return Ha(ja.enums.states,t.EntityType,t.ResourcePath,null,null,!0)}}function V(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/languages","Language");return Ha(ja.enums.languages,t.EntityType,t.ResourcePath,null,null,!0)}}function z(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commmodes","CommunicationMode");return Ha(ja.enums.communicationModes,t.EntityType,t.ResourcePath,null,null,!0).then(nt)}}function L(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commtypes","CommunicationType");return Ha(ja.enums.communicationTypes,t.EntityType,t.ResourcePath,null,null,!0).then(nt)}}function R(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contact/CareManagers","CareManager");return Ha(ja.enums.careManagers,t.EntityType,t.ResourcePath,null,null,!0)}}function q(){return e.currentUser()?(v.getNoteLookup(xa,"NoteMethod",ja.enums.noteMethods,!0),v.getNoteLookup(xa,"NoteOutcome",ja.enums.noteOutcomes,!0),v.getNoteLookup(xa,"NoteWho",ja.enums.noteWhos,!0),v.getNoteLookup(xa,"NoteSource",ja.enums.noteSources,!0),v.getLookup(xa,"NoteType",ja.enums.noteTypes,!0),v.getNoteLookup(xa,"NoteDuration",ja.enums.noteDurations,!0)):void 0}function X(){return e.currentUser()?(v.getLookup(xa,"FocusArea",ja.enums.focusAreas,!0),v.getLookup(xa,"Source",ja.enums.sources,!0),v.getLookup(xa,"BarrierCategory",ja.enums.barrierCategories,!0),v.getLookup(xa,"ToDoCategory",ja.enums.toDoCategories,!0),v.getLookup(xa,"InterventionCategory",ja.enums.interventionCategories,!0)):void 0}function H(){e.currentUser()&&(v.getLookup(xa,"MedSuppType",ja.enums.medSuppTypes,!0),v.getLookup(xa,"FreqHowOften",ja.enums.freqHowOftens,!0),v.getLookup(xa,"Frequency",ja.enums.frequency,!0),v.getLookup(xa,"FreqWhen",ja.enums.freqWhens,!0))}function G(){var e=Q.all([j()]);return e}function j(){ko.utils.arrayForEach(ja.enums.frequency(),function(e){xa.createEntity("PatientMedicationFrequency",{id:e.id(),name:e.name(),sortOrder:0},breeze.EntityState.Unchanged)}),xa.createEntity("PatientMedicationFrequency",{id:-1,name:"-Add New-",sortOrder:1},breeze.EntityState.Unchanged)}function W(){function t(){e.currentUser().recentIndividuals([]),ko.utils.arrayForEach(a(),function(t){e.currentUser().recentIndividuals.push(t)})}var a=ko.observableArray(),i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contact/"+e.currentUser().userId()+"/RecentPatients","Patient");ja.getEntityList(a,i.EntityType,i.ResourcePath,null,null,!1).then(t)}function Z(){return e.currentUser()?v.getLookup(xa,"ObservationType",I.enums.observationTypes,!0).then(function(){J();var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Observation/States","ObservationState");return Ha(I.enums.observationStates,t.EntityType,t.ResourcePath,null,null,!0)}):void 0}function J(){Sa||et()}function et(){N.getObservations(xa),Sa=!0}function tt(){return e.currentUser()?v.getLookup(xa,"CareMemberType",I.enums.careMemberTypes,!0):void 0}function at(){return e.currentUser()?(v.getLookup(xa,"AllergyType",I.enums.allergyTypes,!0),v.getLookup(xa,"Severity",I.enums.severities,!0),v.getNoteLookup(xa,"AllergySource",I.enums.allergySources,!0),v.getLookup(xa,"Reaction",I.enums.reactions,!0)):void 0}function nt(){if(0===I.enums.communicationModes().length||0===I.enums.communicationTypes().length||wa)return!1;var e="",t="",a="",n="";return ko.utils.arrayForEach(I.enums.communicationModes(),function(i){"Phone"===i.name()?e=i.id():"Email"===i.name()?t=i.id():"Text"===i.name()?n=i.id():"Mail"===i.name()&&(a=i.id())}),ko.utils.arrayForEach(I.enums.communicationTypes(),function(i){var r=ko.utils.arrayFirst(i.commModeIds(),function(t){return t.id()===e});r&&I.enums.phoneTypes.push(i);var r=ko.utils.arrayFirst(i.commModeIds(),function(e){return e.id()===t});r&&I.enums.emailTypes.push(i);var r=ko.utils.arrayFirst(i.commModeIds(),function(e){return e.id()===n});r&&I.enums.textTypes.push(i);var r=ko.utils.arrayFirst(i.commModeIds(),function(e){return e.id()===a});r&&I.enums.addressTypes.push(i)}),wa=!0,!0}function it(){d.createMocks(xa);var e=Bt();Yt(e)}function rt(){o.initializeEnums(xa),g.initializeEnums(xa),ja.getEntityList(ja.enums.priorities,"Priority","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.goalTypes,"GoalType","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.goalTaskStatuses,"GoalTaskStatus","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.barrierStatuses,"BarrierStatus","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.interventionStatuses,"InterventionStatus","fakeEndPoint",null,null,!1),ja.getEntityList(I.enums.observationDisplays,"ObservationDisplay","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.allergyStatuses,"AllergyStatus","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.medicationStatuses,"MedicationStatus","fakeEndPoint",null,null,!1),ja.getEntityList(ja.enums.medicationCategories,"MedicationCategory","fakeEndPoint",null,null,!1)}function ot(){breeze.NamingConvention.camelCase.setAsDefault(),breeze.config.initializeAdapterInstance("ajax","jQuery",!0);var e=new breeze.EntityManager({dataService:Ma});return a.initialize(e.metadataStore),o.initialize(e.metadataStore),r.initialize(e.metadataStore),s.initialize(e.metadataStore),d.initialize(e.metadataStore),c.initialize(e.metadataStore),l.initialize(e.metadataStore),p.initialize(e.metadataStore),u.initialize(e.metadataStore),e}function st(e,t,a){var n,i=a?a:"Loading";return t&&(n=ko.observable(new D(i+" "+e+"...",t)),lt(n)),n}function dt(e,t){t&&Na(!1),pt(e)}function ct(e){throw Ut(e),new Error("Could not complete query")}function lt(e){Aa.push(e)}function pt(e){-1!==Aa.indexOf(e)&&setTimeout(function(){Aa.remove(e)},500)}function ut(t,a,i,r){function o(e){Ut(e);var t=ja.createEntity("Alert",{result:"0",reason:"Save failed!"});t.entityAspect.acceptChanges(),I.alerts.push(t),pt(s)}var s=st("Individual",!0,"Saving"),d=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient"),c=ko.unwrap(t),l=c.id(),p=n.remoteServiceName+"/"+d.ResourcePath+l+"/"+a;(i||0===i)&&(p=p+"/"+i);var u={};return $.each(r,function(e,t){u[t.Property]=t.Value}),$.ajax({url:p,cache:!1,dataType:"json",type:"POST",headers:{Token:Ca()},data:u,success:function(e){return c.entityAspect.acceptChanges(),dt(s),y.searchForEntities(e)}}).fail(o)}function mt(e){function t(){return xa.detachEntity(e),dt(n),setTimeout(function(){location.reload()},2e3),!0}function a(e){var t=ja.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),I.alerts.push(t),Ut(e),pt(n),new Error("Delete failed")}var n=st("Individual",!0,"Deleting");k.deleteIndividual(xa,e).then(t).fail(a)}function yt(e){function t(t){return t.httpResponse.data.Outcome&&0==t.httpResponse.data.Outcome.Result?(e.isDuplicate(!0),dt(i),void 0):(e.isDuplicate(!1),e.isNew(!1),e.fullSSN()&&(e.lastFourSSN(e.fullSSN().substr(e.fullSSN().length-4)),e.fullSSN(null)),e.entityAspect.acceptChanges(),ta(e),dt(i),!0)}function a(t){e.entityAspect.rejectChanges(),Ut(t);var a=ja.createEntity("Alert",{result:"0",reason:"Save failed!"});a.entityAspect.acceptChanges(),I.alerts.push(a),console.log(t),pt(i)}var n,i=st("Individual",!0,"Saving"),r=e.isNew();return n=T.serializeIndividual(e,xa),k.saveIndividual(xa,n,r).then(t).fail(a)}function gt(e){function t(e){return e}return k.initializeIndividual(xa,e).then(t)}function ft(e,t){var a=st("Program",!0,"Removing");return m.removeProgram(xa,e.id(),e.name(),e.patientId(),t).then(dt(a)).fail(ct)}function Tt(e,t,a,n){function i(t){if(t.httpResponse.data&&t.httpResponse.data.PlanElems&&t.httpResponse.data.PlanElems.Actions){var a=ko.utils.arrayFirst(t.httpResponse.data.PlanElems.Actions,function(t){return t.Id===e.id()});e.completedBy(a.CompletedBy)}if(dt(r),y.searchForProblems(t.httpResponse.data),t.results&&y.searchForLocalCollectionEntities(t.results),Na(!1),e.entityAspect.acceptChanges(),e.completed()&&5!==e.elementState())e.elementState(5);else if(4===e.elementState()){var n=ja.createEntity("Alert",{result:"warning",reason:"Progress saved"});n.entityAspect.acceptChanges(),I.alerts.push(n)}ko.utils.arrayForEach(e.steps(),function(e){e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.acceptChanges()})}),e.module().entityAspect.acceptChanges(),e.isSaving(!1)}var r=st("Action",!0,"Saving");return Na(!0),e.entityAspect.acceptChanges(),m.saveActionPost(xa,t,a,n).then(i)}function vt(e){function t(){dt(a),Na(!1),zt("warning","Action has been repeated!"),e.isSaving(!1)}var a=st("Action",!0,"Saving");Na(!0);var n=T.serializeAction(e,ja.manager),i=e.module().program().patientId(),r=e.module().program().id();return m.repeatAction(xa,n,r,i).then(t)}function ht(e){var t=m.getRepeatedAction(xa,e);return t}function St(e,t,a){var n=st("Assignment",!0,"Saving"),i={Id:e.id(),AssignToId:e.assignToId()};return m.savePlanElemAttrs(xa,i,t,a).then(dt(n))}function Nt(e){function t(t){if(t){var a=t.UpdatedPhone,i=t.UpdatedEmail,r=t.UpdatedAddress;a&&ko.utils.arrayForEach(a,function(t){var a=ko.utils.arrayFirst(e.phones(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),i&&ko.utils.arrayForEach(i,function(t){var a=ko.utils.arrayFirst(e.emails(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),r&&ko.utils.arrayForEach(r,function(t){var a=ko.utils.arrayFirst(e.addresses(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),e.entityAspect.acceptChanges(),dt(n)}}var a,n=st("Contact card",!0,"Saving");setTimeout(function(){a=T.serializeContactCard(e,xa)},50),setTimeout(function(){return f.saveContactCard(xa,a).then(t)},50)}function bt(e){function t(){e.isNew(!1),e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.tasks(),function(e){e.entityAspect.acceptChanges()}),ko.utils.arrayForEach(e.interventions(),function(e){e.entityAspect.acceptChanges()}),ko.utils.arrayForEach(e.barriers(),function(e){e.isNew(!1),e.entityAspect.acceptChanges()}),dt(a)}var a=st("Goal",!0,"Saving");e.entityAspect.acceptChanges();var n;setTimeout(function(){n=T.serializeGoal(e,xa)},50),setTimeout(function(){return h.saveGoal(xa,n).then(t)},50)}function kt(e){function t(){-1===I.interventions.indexOf(e)&&I.interventions.push(e),e.entityAspect.acceptChanges(),dt(a)}var a=st("Intervention",!0,"Saving");e.entityAspect.acceptChanges();var n;return n=T.serializeIntervention(e,xa),h.saveIntervention(xa,n,e.goal().patientId()).then(t)}function Pt(e){function t(){-1===I.tasks.indexOf(e)&&I.tasks.push(e),dt(a)}var a=st("Task",!0,"Saving"),n=e.goal().patientId();e.entityAspect.acceptChanges();var i;return i=T.serializeTask(e,xa),h.saveTask(xa,i,n).then(t)}function Et(e){function t(){e.entityAspect.acceptChanges(),dt(a)}var a=st("Barrier",!0,"Saving"),n=e.goal().patientId();e.entityAspect.acceptChanges();var i;return i=T.serializeBarrier(e,xa),h.saveBarrier(xa,i,n).then(t)}function It(e){function t(){e.entityAspect.rejectChanges(),e.patientId(null),dt(a),xa.detachEntity(e)}var a=st("Goal",!0,"Deleting");return h.deleteGoal(xa,e).then(t)}function Dt(e){function t(t){return e.id(t.Id),e.entityAspect.acceptChanges(),dt(a),!0}var a=st("Note",!0,"Saving"),n=T.serializeNote(e,xa);return S.saveNote(xa,n).then(t)}function Ct(e){function t(){e.entityAspect.rejectChanges(),e.patientId(null),xa.detachEntity(e),dt(a)}var a=st("Note",!0,"Deleting");return S.deleteNote(xa,e).then(t)}function At(e,t){function a(t){return t.Id&&e.id(t.Id),e.entityAspect.acceptChanges(),dt(n),!0}var n=st("CareMember",!0,"Saving"),i=T.serializeCareMember(e,xa);return b.saveCareMember(xa,i,t).then(a)}function Ot(e,t,a,n,i){function r(e){return e}return N.initializeObservation(xa,e,t,n,i,a).then(r)}function wt(e){function t(){return ba(!1),dt(n),!0}var a=ko.observableArray(),n=st("Observations",!0,"Saving");Ha(a,"PatientObservation","local","patientId",e,!1);var i=[];return i.PatientId=e,ko.utils.arrayForEach(a(),function(e){if(e.needToSave()){e.entityAspect.acceptChanges();var t=T.serializeObservation(e,xa);i.push(t)}else e.entityAspect.rejectChanges()}),i.length>0?(ba(!0),N.saveObservations(xa,i).then(t)):(dt(n),ba(!1),Q())}function Mt(e){function t(t){dt(n);var i=e[0].patient();return i.patientSystems.valueHasMutated(),i.displaySystemId(e[0].systemId()),a&&ko.utils.arrayForEach(e,function(e){e.id()<0&&(e.id(t.PatientSystemId),e.entityAspect.acceptChanges())}),i.entityAspect.acceptChanges(),!0}ko.observableArray();var a=!1,n=st("System Ids",!0,"Saving"),i=[];ko.utils.arrayForEach(e,function(e){if(e.systemId()&&(e.entityAspect.entityState.isAdded()||e.entityAspect.entityState.isModified())){var t=!0;if(t){e.entityAspect.acceptChanges();var n=T.serializePatientSystem(e,xa);a=n.Id<0,i.push(n)}}}),i.length>0&&ko.utils.arrayForEach(i,function(e){return k.savePatientSystem(xa,e,a).then(t)})}function xt(e){function t(){return e.entityAspect.acceptChanges(),dt(a),!0}var a=st("Background",!0,"Saving"),n=e.background(),i=e.id();return k.saveBackground(xa,i,n).then(t)}function Ft(e){function t(e){return e}return k.getFullSSN(xa,e).then(t)}function Kt(e){return f.cancelAllChangesToContactCard(e)}function _t(e){e.entityAspect.rejectChanges()}function Bt(){return xa.getChanges()}function Yt(e){ko.utils.arrayForEach(e,function(e){e.entityAspect.acceptChanges()})}function Ut(t){t.status&&401===t.status&&e.logOff()}function Vt(e){k.addPatientToRecentList(e)}function zt(e,t){var a=ja.createEntity("Alert",{result:e,reason:t});a.entityAspect.acceptChanges(),I.alerts.push(a)}function Lt(e,t){function a(e){dt(n),ko.utils.arrayForEach(e,function(e){-1===I.todos.indexOf(e)&&I.todos.push(e)}),ka(!1)}var n=st("ToDos",!0,"Loading");return ka(!0),S.getToDos(xa,e,t).then(a)}function $t(e,t){return S.getToDosQuery(xa,e,t)}function Rt(e,t){function a(e){dt(n),ko.utils.arrayForEach(e,function(e){-1===I.interventions.indexOf(e)&&I.interventions.push(e)}),Pa(!1)}var n=st("Interventions",!0,"Loading");return Pa(!0),h.getInterventions(xa,e,t).then(a)}function qt(e,t){return h.getInterventionsQuery(xa,e,t)}function Xt(e,t){function a(e){dt(n),ko.utils.arrayForEach(e,function(e){-1===I.tasks.indexOf(e)&&I.tasks.push(e)}),Ea(!1)}var n=st("Tasks",!0,"Loading");return Ea(!0),h.getTasks(xa,e,t).then(a)}function Ht(e,t){return h.getTasksQuery(xa,e,t)}function Gt(e,t){function a(t){return e&&e.id()<0&&xa.detachEntity(e),I.todos.indexOf(t)<0&&I.todos.push(t),dt(n),ka(!1),t}var n=st("ToDo",!0,"Saving");ka(!0),e.entityAspect.acceptChanges();var i=T.serializeToDo(e,xa);return S.saveToDo(xa,i,t).then(a)}function jt(){var t=ko.utils.arrayFirst(ja.enums.careManagers(),function(t){return t.id()===e.currentUser().userId()});return t.preferredName()}function Qt(e){var t=[],a=jt();return ko.utils.arrayForEach(e,function(e){var n=ea(e);if(n){var i={id:e.id(),title:Zt(e),start:e.dueDate(),allDay:!0,patientId:e.patientId(),patientName:Jt(e),assignedToName:a,userId:e.assignedToId(),typeId:2};t.push(i)}}),t}function Wt(t){function a(e){var t=ea(e);t?i(e)||n(e):$a(e.id())}function n(e){var t={id:e.id(),title:Zt(e),start:e.dueDate(),allDay:!0,patientId:e.patientId(),patientName:Jt(e),assignedToName:r.preferredName(),userId:e.assignedToId(),typeId:2};La(t)}function i(e){var t=Va(e.id());return t?(t.title(Zt(e)),t.start(e.dueDate()),t.patientId(e.patientId()),t.patientName(Jt(e)),t.assignedToName(r.preferredName()),t.userId(e.assignedToId()),t.entityAspect.acceptChanges(),!0):!1}var r=ko.utils.arrayFirst(ja.enums.careManagers(),function(t){return t.id()===e.currentUser().userId()});ko.utils.arrayForEach(t,function(e){a(e)})}function Zt(e){return(e.patientDetails()?e.patientDetails().fullLastName()+", "+e.patientDetails().fullFirstName()+" - ":"")+e.title()}function Jt(e){return e.patientDetails()?e.patientDetails().fullLastName()+", "+e.patientDetails().fullFirstName():"-"}function ea(t){return t&&t.assignedToId()&&t.assignedToId()===e.currentUser().userId()&&!t.deleteFlag()&&moment(t.dueDate()).isValid()&&(1===t.statusId()||3===t.statusId())}function ta(e){var t=ko.observable();qa(t,e.id(),"ToDoPatient"),t()&&(t().firstName(e.firstName()),t().lastName(e.lastName()),t().middleName(e.middleName()),t().suffix(e.suffix()),t().preferredName(e.preferredName()))}function aa(e){xa.detachEntity(e)}function na(e,t){var a=-1*(e.medications().length+1),n=ko.utils.arrayFirst(ja.enums.allergySources(),function(e){return e.isDefault()}),i=ko.utils.arrayFirst(ja.enums.medSuppTypes(),function(e){return"Prescribed"===e.name()}),r=A("PatientMedication",{id:a,patientId:e.id(),categoryId:1,statusId:1,sourceId:n.id(),type:i});return r.isNew(!0),r.isEditing(!0),r.name(t),r.isCreateNewMedication(!0),r}function ia(e,t,a){return E.getPatientFrequencies(xa,e,t,a)}function ra(e,t,a){function n(){dt(i),Da(!1)}var i=st("Medications",!0,"Loading");return Da(!0),E.getPatientMedications(xa,e,t,a).then(n)}function oa(e){function t(e){return e}return E.getRemoteMedicationFields(xa,e).then(t)}function sa(e,t){return E.getPatientMedicationsQuery(xa,e,t)}function da(e){return E.initializeNewMedication(xa,e)}function ca(e){function t(e){return e.isCreateNewMedication()===!0?(console.log("datacontext-saveMedication: isCreateNewMedication = true"),E.initializeNewMedication(xa,name).then(function(t){return t&&t.MedicationMap&&t.MedicationMap.Id?(console.log("datacontext-saveMedication: isCreateNewMedication = true => got a familyId "+t.MedicationMap.Id),e.familyId(t.MedicationMap.Id),i(e)):void 0})):(console.log("datacontext-saveMedication: isCreateNewMedication = false"),i(e))}function a(e){return E.saveCustomFrequency(xa,e.customFrequency(),e.patientId()).then(function(t){return t&&t.Id&&e.frequencyId(t.Id),e})}function n(e){e.name()&&e.name(e.name().trim()),e.route()&&e.route(e.route().trim()),e.form()&&e.form(e.form().trim()),e.strength()&&e.strength(e.strength().trim()),e.reason()&&e.reason(e.reason().trim()),e.notes()&&e.notes(e.notes().trim()),e.prescribedBy()&&e.prescribedBy(e.prescribedBy().trim()),e.freqQuantity()&&e.freqQuantity(e.freqQuantity().trim()),e.dosage()&&e.dosage(e.dosage().trim()),e.customFrequency()&&e.customFrequency(e.customFrequency().trim())}function i(e){function t(t){return e.isNew()&&setTimeout(function(){e.entityAspect.rejectChanges(),e.patientId(null),xa.detachEntity(e)},500),e.isEditing(!1),Da(!1),dt(r),t.results[0]}console.log("datacontext-saveMedication: saveIt recalculateNDC="+e.recalculateNDC()),e.entityAspect.acceptChanges();var a=T.serializePatientMedication(e,xa);return a?(Da(!0),E.saveMedication(xa,a,e.isNew()).then(t)):Q.promise(function(){return dt(r),!0}).then(t)}var r=st("Medication",!0,"Saving");return n(e),e.customFrequency()?a(e).then(t):t(e)}function la(e){function t(){return xa.detachEntity(e),dt(n),!0}function a(e){var t=ja.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),I.alerts.push(t),Ut(e),pt(n),new Error("Delete failed")}var n=st("Medication",!0,"Deleting");return E.deletePatientMedication(xa,e).then(t).fail(a)}function pa(e,t,a,n,i){function r(e){var t=ko.utils.arrayFirst(ja.enums.allergySources(),function(e){return e.isDefault()});return ko.unwrap(e).source(t),ko.unwrap(e).statusId(1),ko.unwrap(e).isUserCreated(i),e}return P.initializeAllergy(xa,e,t,n,a).then(r)}function ua(e){return Ia(!0),P.initializeNewAllergy(xa,e)}function ma(e){function t(t){return ko.utils.arrayForEach(e,function(e){e.isNew(!1)}),Ia(!1),dt(n),t.results}var a=[],n=st("Allergy",!0,"Saving");return ko.utils.arrayForEach(e,function(e){e.entityAspect.acceptChanges();var t=T.serializePatientAllergy(e,xa);a.push(t)}),a.length>0?(Ia(!0),P.saveAllergies(xa,a).then(t)):Q.promise(function(){return dt(n),!0}).then(t)}function ya(e){function t(){return xa.detachEntity(e),dt(n),!0}function a(e){var t=ja.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),I.alerts.push(t),Ut(e),pt(n),new Error("Delete failed")}var n=st("Allergy",!0,"Deleting");return P.deletePatientAllergy(xa,e).then(t).fail(a)}function ga(e,t,a){function n(){dt(i),Ia(!1)}var i=st("Allergies",!0,"Loading");return Ia(!0),P.getPatientAllergies(xa,e,t,a).then(n)}function fa(e,t){return P.getPatientAllergiesQuery(xa,e,t)}function Ta(e){return P.getRemoteAllergies(xa,e)}function va(e,t,a,n){var i=breeze.EntityQuery.from(a).toType(a).where("patientId","==",e).orderBy(n);return xa.executeQueryLocally(i)}var ha=ko.observable(!1),Sa=!1,Na=ko.observable(!1),ba=ko.observable(!1),ka=ko.observable(!1),Pa=ko.observable(!1),Ea=ko.observable(!1),Ia=ko.observable(!1),Da=ko.observable(!1),Ca=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"527bbc43231e250c4cb93eb6"}),Aa=ko.observableArray(),Oa=ko.computed(function(){var e=!1;return ko.utils.arrayForEach(Aa(),function(t){t().Showing()&&(e=!0)}),e}),wa=!1;breeze.EntityQuery;var Ma=new breeze.DataService({adapterName:"webApi",serviceName:n.remoteServiceName,hasServerMetadata:!1,jsonResultsAdapter:t}),xa=ot(),Fa=xa.metadataStore;Fa.setEntityTypeForResourceName("ProgramsTest","Program");var Ka=g.getUserByUserToken,_a=g.logOutUserByToken,Ba=g.getUserSettings,Ya=g.createUserFromSessionUser,Ua=g.getEventsByUserId,Va=g.getEventById,za=g.createCalendarMocks,La=g.createCalendarEvent,$a=g.removeCalendarEventById,Ra=function(e,t,a,n,r){entityTypeName=a&&"Patient"===a?"Individual":a;var o=st(entityTypeName,r);return i.getEntityById(xa,o,e,t,a,n,r).then(dt)},qa=function(e,t,a){var n=breeze.EntityQuery.from(a+"s").where("id","==",t).toType(a),i=xa.executeQueryLocally(n);i.length>0&&e(i[0])},Xa=function(e,t,a,n,r,o){entityTypeName=a&&"Patient"===a?"Individual":a;var s=st(entityTypeName,r);return i.getMelsEntityById(xa,s,e,t,a,n,r,o).then(dt)},Ha=function(e,t,a,n,r,o,s,d,c){entityTypeName=t&&"Patient"===t?"Individual":t;var l=st(entityTypeName,o);return i.getEntityList(xa,l,e,t,a,n,r,o,s,d,c).then(dt)},Ga=y.searchForEntities;xa.hasChangesChanged.subscribe(function(e){ha(e.hasChanges)});var ja={manager:xa,loadingMessages:Aa,loadingMessagesShowing:Oa,checkForEntityLocally:qa,getEntityById:Ra,getMelsEntityById:Xa,getEntityList:Ha,createEntity:A,initializeEntity:O,createComplexType:w,getUserByUserToken:Ka,logOutUserByToken:_a,createUserFromSessionUser:Ya,getEventsByUserId:Ua,createCalendarMocks:za,createCalendarEvent:La,syncCalendarEvents:Wt,getEventById:Va,getCalendarEvents:Qt,primeData:M,saveChangesToPatientProperty:ut,deleteIndividual:mt,saveIndividual:yt,initializePatient:gt,saveAction:Tt,repeatAction:vt,getRepeatedAction:ht,removeProgram:ft,savePlanElemAttr:St,saveGoal:bt,saveIntervention:kt,saveTask:Pt,saveBarrier:Et,deleteGoal:It,saveNote:Dt,deleteNote:Ct,saveCareMember:At,enums:I.enums,alerts:I.alerts,saveContactCard:Nt,cancelAllChangesToContactCard:Kt,cancelEntityChanges:_t,getAllChanges:Bt,searchForEntities:Ga,checkIfAllObservationsAreLoadedYet:J,initializeObservation:Ot,saveObservations:wt,savePatientSystems:Mt,saveBackground:xt,getFullSSN:Ft,addPatientToRecentList:Vt,hasChanges:ha,programsSaving:Na,observationsSaving:ba,todosSaving:ka,interventionsSaving:Pa,tasksSaving:Ea,allergySaving:Ia,medicationSaving:Da,createAlert:zt,getToDos:Lt,getToDosQuery:$t,getInterventions:Rt,getInterventionsQuery:qt,getTasks:Xt,getTasksQuery:Ht,saveToDo:Gt,detachEntity:aa,initializeNewMedication:da,initializeNewPatientMedication:na,getPatientMedications:ra,getPatientFrequencies:ia,getRemoteMedicationFields:oa,getPatientMedicationsQuery:sa,saveMedication:ca,deletePatientMedication:la,initializeAllergy:pa,initializeNewAllergy:ua,getRemoteAllergies:Ta,saveAllergies:ma,getPatientAllergies:ga,deletePatientAllergy:ya,getPatientAllergiesQuery:fa,singleSort:va};return ja});
define('services/dataservices/stepservice',[],function(){function e(e,t,a,n,r,i){var o=breeze.EntityQuery.from(t).toType(a);return i&&(o=o.orderBy(i)),n&&r&&(o=o.where(n,"==",r)),e.executeQueryLocally(o)}var t=function(e){var t=e.createEntity("Step",{name:"Eligibility"}),t=e.createEntity("QuestionTypeId",{name:"True/False"});e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1})},a=function(t,a){var n=e(t,"Step",entityType);return n.length>0?(a(n),Q.resolve()):void 0},n={createMockStepAndQuestions:t,getStepById:a,getMockStepMap:getMockStepMap};return n});
define('services/logger',["services/analytics"],function(e){var t=!1;return{initialize:function(a,n,r){a&&a.length>0?(t=!0,console.log("google analytics logger initialized: gaId="+a),e.initialize(a,n,r)):console.log("google analytics logger is turned off. (gaId is empty)")},logNavigation:function(a){t&&e.sendPageView(a)}}});
define('plugins/history',["durandal/system","jquery"],function(e,t){function n(e,t,n){if(n){var a=e.href.replace(/(javascript:|#).*$/,"");s.history.replaceState?s.history.replaceState({},document.title,a+"#"+t):e.replace(a+"#"+t)}else e.hash="#"+t}var a=/^[#\/]|\s+$/g,r=/^\/+|\/+$/g,i=/msie [\w.]+/,o=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var n=s.root.replace(o,"");e.indexOf(n)||(e=e.substr(n.length))}else e=s.getHash();return e.replace(a,"")},s.activate=function(n){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var o=s.getFragment(),c=document.documentMode,u=i.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);s.root=("/"+s.root+"/").replace(r,"/"),u&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(o,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!u?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=o;var l=s.location,d=l.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&l.hash&&(this.fragment=s.getHash().replace(a,""),this.history.replaceState({},document.title,s.root+s.fragment+l.search))}return s.options.silent?void 0:s.loadUrl(n.startRoute)},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();return e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment?!1:(s.iframe&&s.navigate(e,!1),s.loadUrl(),void 0)},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return s.options.routeHandler?s.options.routeHandler(t):!1},s.navigate=function(t,a){if(!s.active)return!1;if(void 0===a?a={trigger:!0}:e.isBoolean(a)&&(a={trigger:a}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var r=s.root+t;if(""===t&&"/"!==r&&(r=r.slice(0,-1)),s._hasPushState)s.history[a.replace?"replaceState":"pushState"]({},document.title,r);else{if(!s._wantsHashChange)return s.location.assign(r);n(s.location,t,a.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(a.replace||s.iframe.document.open().close(),n(s.iframe.location,t,a.replace))}return a.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s});
define('plugins/router',["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,a,r,i,o,s){function c(e){return e=e.replace(h,"\\$&").replace(v,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/]+)"}).replace(f,"(.*?)"),new RegExp("^"+e+"$",k?void 0:"i")}function u(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function l(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,a=e.length;a>n;n++)if(e[n]!=t[n])return!1;return!0}function p(e){return e.queryString?e.fragment+"?"+e.queryString:e.fragment}var m,g,v=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,f=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,b=/\/$/,k=!1,T="/",S="/",w=function(){function r(e,t){return e.router&&e.router.parent==t}function s(e){F&&F.config.isActive&&F.config.isActive(e)}function v(t,n,a){e.log("Navigation Complete",t,n);var i=e.getModuleId(M);i&&L.trigger("router:navigation:from:"+i),M=t,s(!1),F=n,s(!0);var o=e.getModuleId(M);switch(o&&L.trigger("router:navigation:to:"+o),r(t,L)||L.updateDocumentTitle(t,n),a){case"rootRouter":T=p(F);break;case"rootRouterWithChild":S=p(F);break;case"lastChildRouter":T=S}g.explicitNavigation=!1,g.navigatingBack=!1,L.trigger("router:navigation:complete",t,n,L)}function f(t,n){e.log("Navigation Cancelled"),L.activeInstruction(F),L.navigate(T,!1),U(!1),g.explicitNavigation=!1,g.navigatingBack=!1,L.trigger("router:navigation:cancelled",t,n,L)}function h(t){e.log("Navigation Redirecting"),U(!1),g.explicitNavigation=!1,g.navigatingBack=!1,L.navigate(t,{trigger:!0,replace:!0})}function k(t,n,a){g.navigatingBack=!g.explicitNavigation&&M!=a.fragment,L.trigger("router:route:activating",n,a,L);var i={canDeactivate:!L.parent};t.activateItem(n,a.params,i).then(function(e){if(e){var i=M,o=r(n,L),s="";if(L.parent?o||(s="lastChildRouter"):s=o?"rootRouterWithChild":"rootRouter",v(n,a,s),o){n.router.trigger("router:route:before-child-routes",n,a,L);var c=a.fragment;a.queryString&&(c+="?"+a.queryString),n.router.loadUrl(c)}i==n&&(L.attached(),L.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?h(t.settings.lifecycleData.redirect):f(n,a);m&&(m.resolve(),m=null)}).fail(function(t){e.error(t)})}function P(t,n,a){var r=L.guardRoute(n,a);r||""===r?r.then?r.then(function(r){r?e.isString(r)?h(r):k(t,n,a):f(n,a)}):e.isString(r)?h(r):k(t,n,a):f(n,a)}function N(e,t,n){L.guardRoute?P(e,t,n):k(e,t,n)}function I(e){return F&&F.config.moduleId==e.config.moduleId&&M&&(M.canReuseForRoute&&M.canReuseForRoute.apply(M,e.params)||!M.canReuseForRoute&&M.router&&M.router.loadUrl)}function E(){if(!U()){var t=R.shift();if(R=[],t)if(U(!0),L.activeInstruction(t),L.trigger("router:navigation:processing",t,L),I(t)){var a=n.create();a.forceActiveItem(M),a.settings.areSameItem=B.settings.areSameItem,a.settings.findChildActivator=B.settings.findChildActivator,N(a,M,t)}else t.config.moduleId?e.acquire(t.config.moduleId).then(function(n){var a=e.resolveObject(n);t.config.viewUrl&&(a.viewUrl=t.config.viewUrl),N(B,a,t)}).fail(function(n){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message,n)}):N(B,{viewUrl:t.config.viewUrl,canReuseForRoute:function(){return!0}},t)}}function D(e){R.unshift(e),E()}function O(e,t,n){for(var a=e.exec(t).slice(1),r=0;r<a.length;r++){var i=a[r];a[r]=i?decodeURIComponent(i):null}var o=L.parseQueryString(n);return o&&a.push(o),{params:a,queryParams:o}}function C(t){L.trigger("router:route:before-config",t,L),e.isRegExp(t.route)?t.routePattern=t.route:(t.title=t.title||L.convertRouteToTitle(t.route),t.viewUrl||(t.moduleId=t.moduleId||L.convertRouteToModuleId(t.route)),t.hash=t.hash||L.convertRouteToHash(t.route),t.hasChildRoutes&&(t.route=t.route+"*childRoutes"),t.routePattern=c(t.route)),t.isActive=t.isActive||o.observable(!1),L.trigger("router:route:after-config",t,L),L.routes.push(t),L.route(t.routePattern,function(e,n){var a=O(t.routePattern,e,n);D({fragment:e,queryString:n,config:t,params:a.params,queryParams:a.queryParams})})}function A(t){if(e.isArray(t.route))for(var n=t.isActive||o.observable(!1),a=0,r=t.route.length;r>a;a++){var i=e.extend({},t);i.route=t.route[a],i.isActive=n,a>0&&delete i.nav,C(i)}else C(t);return L}function x(e){var n=o.unwrap(t.title);document.title=n?e+" | "+n:e}var M,F,R=[],U=o.observable(!1),B=n.create(),L={handlers:[],routes:[],navigationModel:o.observableArray([]),activeItem:B,isNavigating:o.computed(function(){var e=B(),t=U(),n=e&&e.router&&e.router!=L&&e.router.isNavigating()?!0:!1;return t||n}),activeInstruction:o.observable(null),__router__:!0};a.includeIn(L),B.settings.areSameItem=function(e,t,n,a){return e==t?d(n,a):!1},B.settings.findChildActivator=function(e){return e&&e.router&&e.router.parent==L?e.router.activeItem:null},L.parseQueryString=function(t){var n,a;if(!t)return null;if(a=t.split("&"),0==a.length)return null;n={};for(var r=0;r<a.length;r++){var i=a[r];if(""!==i){var o=i.split(/=(.+)?/),s=o[0],c=o[1]&&decodeURIComponent(o[1].replace(/\+/g," ")),u=n[s];u?e.isArray(u)?u.push(c):n[s]=[u,c]:n[s]=c}}return n},L.route=function(e,t){L.handlers.push({routePattern:e,callback:t})},L.loadUrl=function(t){var n=L.handlers,a=null,r=t,o=t.indexOf("?");if(-1!=o&&(r=t.substring(0,o),a=t.substr(o+1)),L.relativeToParentRouter){var s=this.parent.activeInstruction();r=-1==o?s.params.join("/"):s.params.slice(0,-1).join("/"),r&&"/"==r.charAt(0)&&(r=r.substr(1)),r||(r=""),r=r.replace("//","/").replace("//","/")}r=r.replace(b,"");for(var c=0;c<n.length;c++){var u=n[c];if(u.routePattern.test(r))return u.callback(r,a),!0}return e.log("Route Not Found",t,F),L.trigger("router:route:not-found",t,L),L.parent&&(T=S),i.navigate(T,{trigger:!1,replace:!0}),g.explicitNavigation=!1,g.navigatingBack=!1,!1};var V;return o.isObservable(t.title)&&t.title.subscribe(function(){var e=L.activeInstruction(),t=null!=e?o.unwrap(e.config.title):"";x(t)}),L.updateDocumentTitle=function(e,n){var a=o.unwrap(t.title),r=n.config.title;V&&V.dispose(),r?o.isObservable(r)?(V=r.subscribe(x),x(r())):x(r):a&&(document.title=a)},L.navigate=function(t,n){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):((void 0===n||e.isBoolean(n)&&n||e.isObject(n)&&n.trigger)&&(g.explicitNavigation=!0),(e.isBoolean(n)&&!n||n&&void 0!=n.trigger&&!n.trigger)&&(T=t),i.navigate(t,n))},L.navigateBack=function(){i.navigateBack()},L.attached=function(){L.trigger("router:navigation:attached",M,F,L)},L.compositionComplete=function(){U(!1),L.trigger("router:navigation:composition-complete",M,F,L),E()},L.convertRouteToHash=function(e){if(e=e.replace(/\*.*$/,""),L.relativeToParentRouter){var t=L.parent.activeInstruction(),n=e?t.config.hash+"/"+e:t.config.hash;return i._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return i._hasPushState?e:"#"+e},L.convertRouteToModuleId=function(e){return u(e)},L.convertRouteToTitle=function(e){var t=u(e);return t.substring(0,1).toUpperCase()+t.substring(1)},L.map=function(t,n){if(e.isArray(t)){for(var a=0;a<t.length;a++)L.map(t[a]);return L}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,A(n)},L.buildNavigationModel=function(t){for(var n=[],a=L.routes,r=t||100,i=0;i<a.length;i++){var o=a[i];o.nav&&(e.isNumber(o.nav)||(o.nav=++r),n.push(o))}return n.sort(function(e,t){return e.nav-t.nav}),L.navigationModel(n),L},L.mapUnknownRoutes=function(t,n){var a="*catchall",r=c(a);return L.route(r,function(o,s){var c=O(r,o,s),u={fragment:o,queryString:s,config:{route:a,routePattern:r},params:c.params,queryParams:c.queryParams};if(t)if(e.isString(t))u.config.moduleId=t,n&&i.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var l=t(u);if(l&&l.then)return l.then(function(){L.trigger("router:route:before-config",u.config,L),L.trigger("router:route:after-config",u.config,L),D(u)}),void 0}else u.config=t,u.config.route=a,u.config.routePattern=r;else u.config.moduleId=o;L.trigger("router:route:before-config",u.config,L),L.trigger("router:route:after-config",u.config,L),D(u)}),L},L.reset=function(){return F=M=void 0,L.handlers=[],L.routes=[],L.off(),delete L.options,L},L.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!l(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!l(t.route,"/")&&(t.route+="/"),t.fromParent&&(L.relativeToParentRouter=!0),L.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(e.route=""===e.route?t.route.substring(0,t.route.length-1):t.route+e.route)}),t.dynamicHash&&(L.on("router:route:after-config").then(function(e){e.routePattern=c(e.route?t.dynamicHash+"/"+e.route:t.dynamicHash),e.dynamicHash=e.dynamicHash||o.observable(e.hash)}),L.on("router:route:before-child-routes").then(function(e,t){for(var n=e.router,a=0;a<n.routes.length;a++){var r=n.routes[a],i=t.params.slice(0);r.hash=n.convertRouteToHash(r.route).replace(y,function(e){return i.length>0?i.shift():e}),r.dynamicHash(r.hash)}})),L},L.createChildRouter=function(){var e=w();return e.parent=L,e},L};return g=w(),g.explicitNavigation=!1,g.navigatingBack=!1,g.makeRoutesCaseSensitive=function(){k=!0},g.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},g.activate=function(t){return e.defer(function(n){if(m=n,g.options=e.extend({routeHandler:g.loadUrl},g.options,t),i.activate(g.options),i._hasPushState)for(var a=g.routes,r=a.length;r--;){var o=a[r];o.hash=o.hash.replace("#","/")}var c=g.options.root&&new RegExp("^"+g.options.root+"/");s(document).delegate("a","click",function(e){if(i._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&g.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(g.explicitNavigation=!0,e.preventDefault(),c&&(t=t.replace(c,"")),i.navigate(t))}}else g.explicitNavigation=!0}),i.options.silent&&m&&(m.resolve(),m=null)}).promise()},g.deactivate=function(){i.deactivate()},g.install=function(){o.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var s=o.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var c=o.utils.unwrapObservable(s.router||a.router)||g;s.model=c.activeItem(),s.attached=c.attached,s.compositionComplete=c.compositionComplete,s.activate=!1}r.compose(e,s,i)}},o.virtualElements.allowedBindings.router=!0},g});
define('services/navigation',["plugins/router","services/branding","services/logger"],function(e,t,a){function n(t){var a=t.hash;return-1!==a.indexOf("(/:id)")&&(a=a.replace("(/:id)","")),-1!==a.indexOf("#")?e.navigate(a):e.navigate("#"+a)}function r(e){o()!==e&&(o(e),a.logNavigation(i().config.title+"/"+e.title))}var i=ko.computed(function(){return e.activeInstruction()&&!e.isNavigating()?e.activeInstruction():!1}).extend({throttle:1}),o=ko.observable(),s=ko.observable(0);ko.computed(function(){var e=i();e&&e.config&&e.config.settings?0!==e.config.settings.pages.length&&-1===e.config.settings.pages.indexOf(o())&&(r(i().config.settings.pages[s()]),s(0)):!o.peek()&&i()&&(r(i().config.settings.pages[s()]),s(0))}).extend({throttle:1});var d=ko.computed(function(){return t.currentBrand()}),c=ko.computed(function(){return e.navigationModel()}),u={currentBrand:d,currentRoute:i,currentSubRoute:o,setSubRoute:r,navRoutes:c,setRoute:n,indexOverride:s};return u});
define('services/report.context',["services/datacontext"],function(e){function t(e,t,a){var n=this;n.Property=e,n.Comparator=t,n.Value=a}function a(e,t){var a=breeze.EntityQuery.from(e).toType(e);return $.each(t,function(e,t){a=a.where(t.Property,t.Comparator,t.Value)}),p.executeQueryLocally(a)}function n(e,t,a){var n=this;n.entities=ko.observableArray([]),n.name=e,n.description=t,n.columns=a}function r(e){var t=e,a=d(t.entityType,t.columns);return s(a,t),a}function i(e,t){ko.utils.arrayForEach(t.childEntities,function(a){if(a.onlyFirst){var n=a.entityType;e[n]=d(a.entityType,a.columns,u(t.entityType),e.id)[0],s(e[n],a)}else{var n=a.entityType+"s";e[n]=d(a.entityType,a.columns,u(t.entityType),e.id),s(e[n],a)}})}function o(e,t){t&&t.navProperties&&ko.utils.arrayForEach(t.navProperties,function(t){var a=t.entityType,n=t.propName?t.propName:u(t.entityType);e[a]=c(t.entityType,t.columns,"id",e[n]),s(e[a],t)})}function s(e,t){Array.isArray(e)?ko.utils.arrayForEach(e,function(e){i(e,t),o(e,t)}):(i(e,t),o(e,t))}function d(e,t,a,n){var r="";ko.utils.arrayForEach(t,function(e){r=r+l(e)+","}),r=r.length>0?r.substr(0,r.length-1):"";var i=breeze.EntityQuery.from(e).toType(e).select(r);return n&&(i=i.where(a,"==",n)),p.executeQueryLocally(i)}function c(e,t,a,n){var r="";ko.utils.arrayForEach(t,function(e){r=r+l(e)+","}),r=r.length>0?r.substr(0,r.length-1):"";var i=breeze.EntityQuery.from(e).toType(e).select(r);return n&&(i=i.where(a,"==",n)),p.executeQueryLocally(i)[0]}function u(e){return e.toLowerCase()+"Id"}function l(e){return e.charAt(0).toLowerCase()+e.slice(1)}var p=e.manager,y={clause:t,createDynamicQuery:a,runNewReport:r,report:n};return y});
define('viewmodels/shell/shell',["plugins/router","services/navigation","services/session","services/bindings","services/local.collections","services/datacontext","models/base","config.routes","config.services","services/logger"],function(e,t,a,n,r,i,o,s,c,u){function l(){}function d(e){P(!1);var a=t.setRoute(e);a?console.log("The route has changed"):console.log("The route has NOT changed")}function p(){e.map(s.routes).buildNavigationModel();var n=window.location.href.indexOf("#ut")>-1;if(S=t.currentRoute.subscribe(function(){P(!1)}),!n){var r=a.getUserFromSession();if(r)return y().then(function(){return m(),e.activate(),!0})}e.activate()}function m(){var e=c.gaId,t=a.currentUser().contracts()[0].number(),n=a.currentUser().userName();u.initialize(e,t,n)}function y(){return i.primeData()}function g(){P(!P())}function v(){$(!$())}function f(){e.navigateBack()}var h=ko.observable(!1),b=ko.observableArray(),k=ko.observable(!1);if(window.engsettings){var T=window.engsettings;T.featureMessages?b(T.featureMessages):b(T.featureMessages),T.showNewFeatures&&b()&&b().length>0?k(!0):k(!1)}var S,P=ko.observable(!1),w=ko.computed(i.loadingMessages),N=ko.computed(function(){var e=w(),t=[];return ko.utils.arrayForEach(e,function(e){t.length<3&&t.push(e)}),t}),I=ko.observable(!1),E=ko.computed(i.loadingMessagesShowing),O=ko.observable(),D=ko.computed(i.alerts),A=ko.computed(i.enums.priorities),C=ko.computed(i.enums.genders),M=ko.computed(i.enums.states),F=ko.computed(i.enums.phoneTypes),x=ko.computed(i.enums.emailTypes),U=ko.computed(i.enums.daysOfWeek),L=ko.computed(i.enums.timesOfDay),R=ko.computed(i.enums.languages),z=ko.computed(i.enums.timeZones),B=ko.computed(i.enums.addressTypes),V=ko.computed(i.enums.communicationModes),$=ko.computed(function(){return t.currentRoute()!==!1?"Individual"===t.currentRoute().config.title:!1}),Q={newFeaturesOpen:h,featureMessages:b,showingNewFeatures:k,showSideBar:P,showQuickAdd:$,compLoadingMessages:N,loadingMessagesShowing:E,currentModal:O,toggleNavVisibility:g,toggleQuickAddShowing:v,activate:p,goBack:f,attached:l,navigation:t,session:a,title:"Shell",alerts:D,priorities:A,genders:C,stateList:M,daysOfWeek:U,timesOfDay:L,languages:R,timeZones:z,phoneTypes:F,emailTypes:x,addressTypes:B,communicationModes:V,setRoute:d,userMenuOpen:I,initializeLogger:m};return Q});
define('viewmodels/patients/tabs/module.details',["services/datacontext","viewmodels/shell/shell","models/base"],function(e,t,a){function n(t){var a=this;a.module=ko.observable(),a.canSaveObservable=ko.observable(!e.programsSaving),a.canSave=ko.computed({read:function(){return!e.programsSaving()&&a.canSaveObservable()},write:function(e){a.canSaveObservable(e)}}),a.activationData={module:a.module,canSave:a.canSave,showing:t}}function r(e){var t=ko.utils.arrayFilter(e.actions(),function(e){return 4===e.elementState()});return t}function i(e){ko.utils.arrayForEach(e,function(e){4!==e.elementState()&&(e.stateUpdatedOn((new moment).toISOString()),e.elementState(4))})}ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var a=t.length>0;e().showing(a)})};var o=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1},s=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new n(e.modalShowing))};return s.prototype.activate=function(n){var s=this;s.settings=n,s.tab=s.settings.tab,s.activeModule=s.settings.activeModule,s.modalEntity().module(s.activeModule),s.saveOverride=function(){function t(){i(a)}var a=r(s.activeModule);s.activeModule.entityAspect.acceptChanges(),ko.utils.arrayForEach(s.activeModule.actions(),function(e){e.entityAspect.acceptChanges()});var n=s.activeModule.programId(),o=s.activeModule.program().patientId();e.savePlanElemAttr(s.activeModule,n,o).then(t)},s.cancelOverride=function(){e.cancelEntityChanges(s.modalEntity().module())},s.modal=new a.modal("Individual Attributes",s.modalEntity,"viewmodels/templates/module.edit",s.modalShowing,s.saveOverride,s.cancelOverride),s.descriptionSectionOpen=ko.observable(!1),s.individualAttributesSectionOpen=ko.observable(!0),s.attributesSectionOpen=ko.observable(!1),s.objectivesSectionOpen=ko.observable(!1),s.shouldBeShowing=s.activeModule&&s.activeModule.objectives()?s.activeModule.objectives().length>0:!1,s.computedObjectives=ko.computed(function(){var e=[];if(s.settings.activeModule&&s.settings.activeModule.objectives())var e=s.settings.activeModule.objectives().sort(o);return e}).extend({isShowing:s.shouldBeShowing}),s.toggleModalShowing=function(){t.currentModal(s.modal),s.modalShowing(!s.modalShowing())},s.canEdit=ko.computed(function(){var e=s.activeModule&&"Completed"!==s.activeModule.elementStateModel().name();return e})},s});
define('test/specs/module.details.spec',["viewmodels/patients/tabs/module.details","services/datacontext"],function(e,t){describe("List of details for a given module.",function(){function a(){return t.createEntity("Module",{name:"MockModule",description:"MockModule",spawnElement:2,enabled:!0})}it("has no errors loading",function(){expect(!0).toBe(!0)}),it("defaults to description closed, individual attributes open, module attributes closed, objectives closed",function(){expect(e.descriptionSectionOpen().toBe(!1)),expect(e.individualAttributesSectionOpen().toBe(!0)),expect(e.attributesSectionOpen().toBe(!1)),expect(e.objectivesSectionOpen().toBe(!1))}),it("shows no objectives set until objectives have been set",function(){var t=a();e.activeModule=t,expect(e.computedObjectives().length.toBe(0)),expect(e.computedObjectives().objectivesShowing().toBe(!1))})})});
define('test/specs/session.spec',["services/session"],function(e){describe("Session is where our user information is stored.",function(){it("should create an empty user object",function(){expect(e.currentUser()).toBe(void 0)}),it("should check for localStorage and cookies",function(){expect(e.runTests()).toMatch({ls:!0,cookies:!0})}),it("clear session",function(){expect(!0).toBe(!0)})})});
define('viewmodels/admin/concierge/index',["viewmodels/shell/shell","models/base","services/datacontext"],function(e,t,a){function n(){o("viewmodels/admin/widgets/delete.individuals.list")}function r(){function n(){s().isNew(!0);var a=new t.modal("Create Individual",s,"templates/patient.html",d);e.currentModal(a),d(!0);var n=d.subscribe(function(){c(!1),n.dispose();var e=s().isDuplicate.subscribe(function(t){if(t){d(!0);var a=s().isDuplicate.subscribe(function(){c(!1),a.dispose(),d(!1),s().entityAspect.acceptChanges()})}e.dispose()})})}a.initializePatient(s).then(n),o(null)}function i(){}var o=ko.observable(),s=ko.observable(),d=ko.observable(!1),c=ko.observable(!1),u={activate:i,activeSecondColumn:o,deleteIndividual:n,createIndividual:r};return u});
define('viewmodels/admin/index',["services/navigation","services/session","config.services","services/datacontext"],function(e){function t(){console.log("Loaded admin index")}var a={activate:t,navigation:e,title:"Admin"};return a});
define('viewmodels/admin/reports/index',["config.services","services/session","services/datacontext","services/report.context"],function(e,t,a,n){function r(e){var t=this;t.name=e}function i(){k()}function o(){I()}function s(){E()}function c(){P()}function d(){nt().length>0&&l(at())}function u(){it().length>0&&l(tt())}function l(e){kt.data(e),kt("viewmodels/admin/reports/matching.patients")}function p(){it().length>0&&b(dt())}function y(){it().length>0&&b(ot())}function m(){it().length>0&&b(st())}function g(){it().length>0&&b(ct())}function f(){ut().length>0&&S(mt())}function v(){ut().length>0&&S(lt())}function h(){ut().length>0&&S(pt())}function T(){ut().length>0&&S(yt())}function S(e){kt.data(e),kt("viewmodels/admin/reports/matching.actions")}function b(e){kt.data(e),kt("viewmodels/admin/reports/matching.programs")}function N(){var e=It(),t=ko.observableArray();a.getEntityList(t,_().EntityType,"gettingLocally",null,null,!1);var n=ko.utils.arrayFilter(t(),function(t){return t.duration()>e?!0:void 0});kt.data(n),kt("viewmodels/admin/reports/matching.programs")}function k(){if(ft())alert("Program data already loaded");else{var n=[];ko.utils.arrayForEach(X(),function(e){n.push(parseInt(e.id()))}),ko.utils.arrayForEach(Z(),function(i){function o(){ko.utils.arrayForEach(c(),function(i){function o(){L.remove(s)}if(-1!==n.indexOf(i.elementState())){var s=new r(i.id());L.push(s);var c=new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient/"+i.patientId()+"/Program/"+i.id(),"Program");a.getMelsEntityById(null,null,c.EntityType,c.ResourcePath,!0,null).then(o),it.push(i)}}),L.remove(s)}var s=new r(i.id());L.push(s);var c=ko.observableArray();a.getEntityList(c,_().EntityType,_().ResourcePath+i.id()+"/Programs",null,null,!0).then(o)}),ft(!0)}}function I(){if(vt())alert("Action data already loaded");else{var e=[];ko.utils.arrayForEach(j(),function(t){e.push(parseInt(t.id()))}),ko.utils.arrayForEach(it(),function(t){var n=new r(t.id());B.push(n);var i=ko.observableArray();ko.utils.arrayForEach(t.modules(),function(o){ko.utils.arrayForEach(o.actions(),function(n){function s(){B.remove(c)}if(-1!==e.indexOf(n.elementState())){var c=new r(n.id());B.push(c),a.getEntityList(i,G().EntityType,G().ResourcePath+"/"+t.patientId()+"/Program/"+t.id()+"/Module/"+o.id()+"/Action/"+n.id(),null,null,!0).then(s),ut.push(n)}}),B.remove(n)})}),vt(!0)}}function P(){Tt()?alert("Goal data already loaded"):(ko.utils.arrayForEach(Z(),function(e){function t(){ko.utils.arrayForEach(i(),function(e){nt.push(e)}),Y.remove(n)}var n=new r(e.id());Y.push(n);var i=ko.observableArray();a.getEntityList(i,K().EntityType,K().ResourcePath+e.id()+"/Goals",null,null,!0).then(t)}),Tt(!0))}function E(){ht()?alert("Care Member data already loaded"):(ko.utils.arrayForEach(Z(),function(e){function t(){ko.utils.arrayForEach(i(),function(e){rt.push(e)}),Q.remove(n)}var n=new r(e.id());Q.push(n);var i=ko.observableArray();a.getEntityList(i,q().EntityType,q().ResourcePath+e.id()+"/CareMembers",null,null,!0).then(t)}),ht(!0))}function D(){return gt||w(),!0}function w(){function e(){var e=ko.utils.arrayFirst(H(),function(e){return"All individuals"===e.sName()});W(e)}return a.getEntityList(J,"ElementState","fakeEndpoint",null,null,!1,null,"id"),a.getEntityList(H,U().EntityType,U().ResourcePath,null,null,!1,null,"sName").then(e),R=W.subscribe(function(){Z([]),C(),ft(!1)}),gt=!0,!0}function C(){function e(){}var t={},t=V().Parameters;t.SearchFilter=null,a.getEntityList(Z,V().EntityType,V().ResourcePath,null,W().iD(),!0,t).then(e)}function A(){var e=new n.report;e.name="Individuals by Care Manager",e.description="List of Individuals with Care Manager and Programs",e.columns=[new z("id","Id"),new z("firstName","First Name"),new z("lastName","Last Name"),new z("CareMember.preferredName","Care Manager"),new z("Programs.length","# Programs")],e.queryJson=$.parseJSON('{ "entityType": "Patient", "columns": ["Id", "FirstName", "LastName"], "childEntities": [ { "entityType": "Program", "columns": [ "Id", "Name"], "childEntities": [{ "entityType": "Module", "columns": [ "Id", "Name" ], "childEntities": [{ "entityType": "Action", "columns": [ "Id", "Name" ], "childEntities": []}]}]}, { "entityType": "CareMember", "columns": [ "Id", "PreferredName" ], "childEntities": [], "onlyFirst": true}] }');var t=n.runNewReport(e.queryJson);e.entities(t),F(e)}function O(){var e=new n.report;e.name="Action Count by Individual",e.description="Action Counts by Individual with Care Manager and Programs",e.columns=[new z("id","Id"),new z("preferredName","Name"),new z("CareMemberType.name","Care Manager"),new z("Patient.firstName","Patients First Name")],e.queryJson=$.parseJSON('{ "entityType": "CareMember", "columns": ["Id", "PreferredName", "TypeId"], "navProperties": [ { "entityType": "CareMemberType", "propName": "typeId", "columns": [ "Name" ], "childEntities": [] }, { "entityType": "Patient", "propName": "patientId", "columns": [ "FirstName", "LastName" ], "childEntities": [] } ], "childEntities": [ ] }');var t=n.runNewReport(e.queryJson);e.entities(t),F(e)}function M(){var e=new n.report;e.name=Ft(),e.description=zt(),e.columns=$.parseJSON(Ut()),e.queryJson=$.parseJSON(Rt());var t=x(e);e.entities(t),F(e)}function x(e){var t=e;t.queryJson||(t=new n.report,t.name=Ft(),t.description=zt(),t.columns=$.parseJSON(Ut()),t.queryJson=$.parseJSON(Rt()));var a=n.runNewReport(t.queryJson);return a}function F(e){kt.data(e),kt("viewmodels/admin/reports/dynamic.report")}function z(e,t){var a=this;a.name=e,a.displayName=t}var R,U=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort")}),L=ko.observableArray(),B=ko.observableArray(),Q=ko.observableArray(),Y=ko.observableArray(),V=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:0,Take:5e3})}),K=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Goal")}),q=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","CareMember")}),_=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Program")}),G=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Action")}),H=ko.observableArray(),J=ko.observableArray(),X=ko.observableArray(),j=ko.observableArray(),W=ko.observable(),Z=ko.observableArray(),et=ko.computed(function(){var e=[];if(0===Q().length){var t=Z();e=ko.utils.arrayFilter(t,function(e){var t=ko.utils.arrayFirst(e.careMembers(),function(e){return"Care Manager"===e.type().name()});return!!t})}return e}),tt=ko.computed(function(){var e=Z(),t=ko.utils.arrayFilter(e,function(e){return e.programs().length>0});return t}),at=ko.computed(function(){var e=Z(),t=ko.utils.arrayFilter(e,function(e){return e.goals().length>0});return t}),nt=ko.observableArray(),rt=ko.observableArray(),it=ko.observableArray(),ot=ko.computed(function(){var e=it(),t=ko.utils.arrayFilter(e,function(e){return"In Progress"===e.elementStateModel().name()});return t}),st=ko.computed(function(){var e=it(),t=ko.utils.arrayFilter(e,function(e){return"Completed"===e.elementStateModel().name()});return t}),ct=ko.computed(function(){var e=it(),t=ko.utils.arrayFilter(e,function(e){return"Closed"===e.elementStateModel().name()});return t}),dt=ko.computed(function(){var e=it(),t=ko.utils.arrayFilter(e,function(e){return"Not Started"===e.elementStateModel().name()});return t}),ut=ko.observableArray(),lt=ko.computed(function(){var e=ut(),t=ko.utils.arrayFilter(e,function(e){return"In Progress"===e.elementStateModel().name()});return t}),pt=ko.computed(function(){var e=ut(),t=ko.utils.arrayFilter(e,function(e){return"Completed"===e.elementStateModel().name()});return t}),yt=ko.computed(function(){var e=ut(),t=ko.utils.arrayFilter(e,function(e){return"Closed"===e.elementStateModel().name()});return t}),mt=ko.computed(function(){var e=ut(),t=ko.utils.arrayFilter(e,function(e){return"Not Started"===e.elementStateModel().name()});return t}),gt=!1,ft=ko.observable(!1),vt=ko.observable(!1),ht=ko.observable(!1),Tt=ko.observable(!1),St=ko.computed(function(){ft();var e=L();return ft()&&0===e.length}),bt=ko.computed(function(){vt();var e=B();return vt()&&0===e.length}),Nt=ko.computed(function(){var e=Q();return ht()&&0===e.length}),kt=ko.observable();kt.data=ko.observableArray();var It=ko.observable(),Pt=ko.computed(function(){var e=!ft(),t=W();return e&&!!t}),Et=ko.computed(function(){var e=!vt(),t=W(),a=St();return e&&a&&!!t}),Dt=ko.computed(function(){var e=!Tt(),t=W();return e&&!!t}),wt=ko.computed(function(){var e=!ht(),t=W();return e&&!!t}),Ct=ko.observable(!0),At=ko.observable(!0),Ot=ko.observable(!0),Mt=ko.observable(!0),xt=ko.observable(!0),Ft=ko.observable(),zt=ko.observable(),Rt=ko.observable(),Ut=ko.observable(),$t={patientsList:Z,haveCareManagerPatientsList:et,cohortsList:H,goalsList:nt,elementStateList:J,selectedActionStateIds:j,selectedProgramStateIds:X,careMembersList:rt,programsList:it,actionsList:ut,inProgressActionsList:lt,completedActionsList:pt,closedActionsList:yt,notStartedActionsList:mt,programInfoVisible:Ct,goalInfoVisible:At,overviewInfoVisible:Ot,careMemberInfoVisible:Mt,dynamicReportVisible:xt,notStartedProgramsList:dt,inProgressProgramsList:ot,completedProgramsList:st,closedProgramsList:ct,haveProgramPatientsList:tt,haveGoalPatientsList:at,selectedCohort:W,programsByCohortLoaded:ft,careMembersByCohortLoaded:ht,goalsByCohortLoaded:Tt,programsLoading:L,actionsLoading:B,goalsLoading:Y,careMembersLoading:Q,activate:D,activeSecondColumn:kt,canLoadProgramData:Pt,canLoadActionData:Et,canLoadGoalData:Dt,canLoadCareMemberData:wt,canShowProgramReport:St,canShowActionReport:bt,programLength:It,runProgramReport:i,runActionReport:o,runCareMemberReport:s,runGoalReport:c,showProgramResults:N,canShowCareManagerReport:Nt,getPatientsByCareManagerReport:A,notStartedProgReport:p,inProgressProgReport:y,completedProgReport:m,closedProgReport:g,notStartedActionReport:f,inProgressActionReport:v,completedActionReport:h,closedActionReport:T,haveGoalPatReport:d,withProgPatReport:u,showPatientList:l,dynamicReportName:Ft,dynamicReportDescription:zt,dynamicReportColumns:Ut,dynamicReportQueryJSON:Rt,actionCountReport:O,dynamicReport:M,getJSONResults:x};return $t});
define('viewmodels/admin/reports/dynamic.report',["viewmodels/admin/reports/index"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.data=t.settings.data,t.report=t.data.data(),t.computedEntities=ko.computed(function(){var e=t.report.entities();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),t.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(t.computedEntities(),function(t){var a=t.selected();a||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(t.computedEntities(),function(e){e.selected(!0)}):ko.utils.arrayForEach(t.computedEntities(),function(e){e.selected(!1)})}}).extend({throttle:50}),t.allSelected(!0)},e.prototype.closeReport=function(){var e=this;e.settings.data(null)},e.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),a='","',n='"\r\n"',r="";r=r+e.report.name+n,r=r+e.report.description+n,r=r+moment().format("LLLL")+n,ko.utils.arrayForEach(e.report.columns,function(e){r=r+e.displayName+a}),r+=n,ko.utils.arrayForEach(e.computedEntities(),function(t){t.selected()&&(ko.utils.arrayForEach(e.report.columns,function(e){if(-1===e.name.indexOf(".")&&-1===e.name.indexOf("|"))r=r+t[e.name]+a;else if(-1===e.name.indexOf("|"))r=r+(t[e.name.substr(0,e.name.indexOf("."))]?t[e.name.substr(0,e.name.indexOf("."))][e.name.substr(e.name.indexOf(".")+1,e.name.length)]:"-")+a;else{for(var n=e.name.split("|"),i=t,o=n.length-1;o>=0;o--)i=i[n[0]],void 0===i&&(i="-",o=0),n.shift();r=r+i+a}}),r+=n)}),blob=new Blob([r],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_report.csv",href:i}),t.click()},e});
define('viewmodels/admin/reports/entity.template',["services/datacontext","services/report.context"],function(e){function t(e,t,a,n,r){var i=this;i.entityType=e,i.propName=t,i.columns=ko.observableArray(a),i.navProperties=ko.observableArray(n),i.childEntities=ko.observableArray(r),i.availableColumns=ko.observableArray([]),i.availableNavProps=ko.observableArray([]),i.availableChildEntities=ko.observableArray([])}function a(e,t){return-1!==e.indexOf(t,e.length-t.length)}var n=e.manager.metadataStore,r=function(){};return r.prototype.activate=function(e){var r=this;r.entityType=e.entityType,a(r.entityType,"s")&&(r.entityType=r.entityType.substr(0,r.entityType.length-1)),a(r.entityType,"Model")&&(r.entityType=r.entityType.substr(0,r.entityType.length-5));var i=n.getEntityType(r.entityType),o=i.dataProperties,s=ko.utils.arrayFilter(i.navigationProperties,function(e){return e.isScalar}),d=ko.utils.arrayFilter(i.navigationProperties,function(e){return!e.isScalar});r.entity=new t(i.shortName),r.entity.availableColumns(o),r.entity.availableNavProps(s),r.entity.availableChildEntities(d)},r});
define('viewmodels/admin/reports/matching.actions',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.data=t.settings.data.data,t.actions=t.data,t.computedActions=ko.computed(function(){var e=t.actions();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),t.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(t.computedActions(),function(t){var a=t.selected();a||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(t.computedActions(),function(e){e.selected(!0)}):ko.utils.arrayForEach(t.computedActions(),function(e){e.selected(!1)})}}).extend({throttle:50}),t.allSelected(!0)},e.prototype.closeReport=function(){var e=this;e.settings.data(null)},e.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),a="",n='","',r='"\r\n"',a="Individual Name"+n+"Action Name"+n+"Status"+n+"Start Date"+n+"Module Name"+n+"Program Name"+r;ko.utils.arrayForEach(e.computedActions(),function(e){e.selected()&&(a=a+e.module().program().patient().fullName()+n+e.name()+n+e.elementStateModel().name()+n+e.attrStartDate()+n+e.module().name()+n+e.module().program().name()+r)}),blob=new Blob([a],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},e});
define('viewmodels/admin/reports/matching.patients',["viewmodels/admin/reports/index"],function(e){var t=function(){};return t.prototype.activate=function(t){var a=this;a.settings=t,a.data=a.settings.data.data,a.patients=a.data,a.computedPatients=ko.computed(function(){var e=a.patients();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),a.goalsLoaded=ko.computed(function(){return e.goalsList().length>0}),a.programsLoaded=ko.computed(function(){return e.programsList().length>0}),a.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(a.computedPatients(),function(t){var a=t.selected();a||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(a.computedPatients(),function(e){e.selected(!0)}):ko.utils.arrayForEach(a.computedPatients(),function(e){e.selected(!1)})}}).extend({throttle:50}),a.allSelected(!0)},t.prototype.closeReport=function(){var e=this;e.settings.data(null)},t.prototype.sendToExcel=function(){var e=document.createElement("a"),t="data:application/vnd.ms-excel",a=document.getElementById("matching-patients"),n=a.outerHTML.replace(/ /g,"%20");e.href=t+", "+n,e.download="exported_table.xls",e.click()},t.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),a='","',n='"\r\n"',r="Individual Name"+a+"Gender"+a+"DOB"+a+"# of Goal"+a+"# of Programs"+n;ko.utils.arrayForEach(e.computedPatients(),function(e){e.selected()&&(r=r+e.fullName()+a+e.gender()+a+e.dOB()+a+e.goals().length+a+e.programs().length+n)}),blob=new Blob([r],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},t});
define('viewmodels/admin/reports/matching.programs',[],function(){var e=function(){},t=function(e,t){return e.duration()==t.duration()?e.duration()>t.duration()?1:-1:e.duration()>t.duration()?1:-1};return e.prototype.activate=function(e){var a=this;a.settings=e,a.data=a.settings.data.data,a.programs=a.data.sort(t),a.computedPrograms=ko.computed(function(){var e=a.programs;return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),a.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(a.computedPrograms(),function(t){var a=t.selected();a||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(a.computedPrograms(),function(e){e.selected(!0)}):ko.utils.arrayForEach(a.computedPrograms(),function(e){e.selected(!1)})}}).extend({throttle:50}),a.allSelected(!0)},e.prototype.closeReport=function(){var e=this;e.settings.data(null)},e.prototype.sendToExcel=function(){var e=document.createElement("a"),t="data:application/vnd.ms-excel",a=document.getElementById("matching-programs"),n=a.outerHTML.replace(/ /g,"%20");e.href=t+", "+n,e.download="exported_table.xls",e.click()},e.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),a="",n='","',r='"\r\n"',a="Individual Name"+n+"Program Name"+n+"Start Date"+n+"Duration"+r;ko.utils.arrayForEach(e.computedPrograms(),function(e){e.selected()&&(a=a+patient.fullName()+n+patient.gender()+n+patient.dOB()+n+patient.goals().length+n+patient.programs().length+r)}),blob=new Blob([a],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},e});
define('viewmodels/admin/reports/query.builder',["services/datacontext","services/report.context"],function(e){function t(e,t,a,n,r){var i=this;i.entityType=e,i.propName=t,i.columns=ko.observableArray(a),i.navProperties=ko.observableArray(n),i.childEntities=ko.observableArray(r),i.availableColumns=ko.observableArray([]),i.availableNavProps=ko.observableArray([]),i.availableChildEntities=ko.observableArray([])}function a(){r()}function n(e){console.log(e);var a=c.getEntityType(e);console.log(a);var n=a.dataProperties,r=ko.utils.arrayFilter(a.navigationProperties,function(e){return e.isScalar}),i=ko.utils.arrayFilter(a.navigationProperties,function(e){return!e.isScalar}),o=new t(a.shortName);return o.availableColumns(n),o.availableNavProps(r),o.availableChildEntities(i),o}function r(){var e=$.parseJSON(c.exportMetadata());console.log(e);var t=c.getEntityType("Patient");console.log(t),i(e.structuralTypes),console.log(i())}var i=ko.observableArray([]),o=ko.observable(),s=ko.observable(),c=e.manager.metadataStore;o.subscribe(function(e){console.log("Doign this ",e),s(n(e.shortName)),console.log(s())});var d={structuraltypes:i,selectedMainType:o,newQueryReport:s,activate:a};return d});
define('viewmodels/admin/widgets/delete.individuals.list',["config.services","services/session","services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,a,n,r){function i(e){function t(){S(!0),r.currentModal(N)}h(e),a.getEntityById(h,h().id(),u().EntityType,u().ResourcePath,!0).then(t)}function o(){return T||s(),!0}function s(){function e(){}return a.getEntityList(y,l().EntityType,l().ResourcePath,null,null,!1,null,"sName").then(e),d=m.subscribe(function(){g()&&g(null),v([]),c()}),throttledFilterToken=f.subscribe(function(e){m()&&(v([]),c(e))}),T=!0,!0}function c(e){var t={},t=p().Parameters;t.SearchFilter=e?e:null,a.getEntityList(v,p().EntityType,p().ResourcePath,null,m().iD(),!0,t)}var d,u=ko.computed(function(){return t.currentUser()?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"patient","Patient"):!1}),l=ko.computed(function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),p=ko.computed(function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:0,Take:5e3}):""}),y=ko.observableArray(),m=ko.observable(),g=ko.observable(),f=ko.computed(g).extend({throttle:500}).extend({notify:"always"}),v=ko.observableArray(),h=ko.observable(),T=!1,S=ko.observable(!1),b=function(){var e=confirm("You are about to delete an individual.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(v.remove(h()),a.deleteIndividual(h()),void 0)},N=new n.modal("Delete Individual",h,"templates/patient.delete.html",S,null,null,b);N.canDelete(!0);var k={cohortsList:y,selectedCohort:m,cohortFilter:g,patientsList:v,activate:o,choosePatient:i};return k});
define('viewmodels/authenticate',["services/session","config.routes","plugins/router","services/datacontext","viewmodels/shell/shell"],function(e,t,a,n,r){function i(t){e.runTests();var n=window.location.href.indexOf("#ut")>-1;return n?(a.navigate("#",{replace:!0,trigger:!1}),s(t)):!1}function o(){return n.primeData().then(function(){return r.initializeLogger(),a.navigate("home")})}function s(t){return n.getUserByUserToken(e.currentUser,t,!0),c=e.currentUser.subscribe(function(){return e.currentUser()?(e.setLocalStorageAndCookie(),c.dispose(),o()):void 0}),!1}var c,d={activate:i};return d});
define('viewmodels/home/index',["plugins/router","services/navigation","services/session","config.services","services/datacontext"],function(e,t,a,n,r){function i(){o()}function o(){r.getEntityList(c,u().EntityType,u().ResourcePath,null,null,!1)}var s=ko.observable(!1),c=ko.observableArray();ko.extenders.calculateShowingPatients=function(e){return e.subscribe(function(){}),e};var d=ko.computed(function(){var e=[];return ko.utils.arrayForEach(c(),function(t){t.isChecked=ko.observable().extend({calculateShowingPatients:!0}),e.push(t)}),e}),u=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("10",a.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),l={cohortPatientSelectPanelShowing:s,cohorts:c,activate:i,navigation:t,computedCohorts:d,title:"Home"};return l});
define('viewmodels/home/myhome/myhome',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","services/local.collections","services/navigation","plugins/router"],function(e,t,a,n,r,i,o){function s(e,a,r,i,s){var c=this;c.events=e,c.header=a,c.editable=r,c.viewDate=i||ko.observable(new Date),c.defaultView=s,c.eventClick=function(e){if(o.currentRoute()&&"Individual"===o.currentRoute().config.title){var a=ko.utils.arrayFirst(o.currentRoute().config.settings.pages,function(e){return"goals"===e.title});o.setSubRoute(a)}else{var r=t.getEventById(e.id);q().event(r),n.currentModal(_),K(!0)}}}function c(){console.log("something was done")}function d(){function e(){st().length}t.saveToDo(x(),"Insert").then(e)}function u(){t.cancelEntityChanges(V().todo())}function l(){var e=this;e.id=ko.observable(),e.title=ko.observable(),e.start=ko.observable(),e.allDay=ko.observable(!1),e.url=ko.observable(""),e.patientId=ko.observable(""),e.patientName=ko.observable(""),e.assignedToName=ko.observable(""),e.typeId=ko.observable("")}function p(e){G()&&-1!==G().indexOf(e.sortProperty)?G()&&"desc"===G().substr(G().length-4,4)?G(null):G(e.sortProperty+" desc"):G(e.sortProperty)}function y(e){H()&&-1!==H().indexOf(e.sortProperty)?H()&&"desc"===H().substr(H().length-4,4)?H(null):H(e.sortProperty+" desc"):H(e.sortProperty)}function m(e){e===L&&(Q()||B())?L(!L()):e===B&&(Q()||L())?B(!B()):e===Q&&(B()||L())&&Q(!Q())}function g(e){var a=ko.utils.arrayFirst(i.events(),function(t){return t.id()===e.id()});if(!a){var n={id:e.id(),title:e.title(),start:e.start(),allDay:e.allDay(),patientId:e.patientId(),patientName:e.patientName(),assignedToName:e.assignedToName(),typeId:e.typeId()};t.createCalendarEvent(n)}}function f(){return M||(b(),M=!0),!0}function v(){$(".calendar").fullCalendar("render")}function h(){z(!z()),S()}function T(e){e===R()?R(null):R(e),S()}function S(){setTimeout(function(){$(".calendar").fullCalendar("render")},500)}function b(){function e(){}return t.getEntityList(at,X().EntityType,X().ResourcePath,null,null,!1,null,"sName").then(e),E().then(D),w(),O=nt.subscribe(function(){rt([]),k()}),M=!0,!0}function k(e){var a={},a=j().Parameters;a.SearchFilter=e?e:null,t.getEntityList(rt,j().EntityType,j().ResourcePath,null,nt().iD(),!0,a).then(N)}function N(){}function P(){}function I(){x(t.createEntity("ToDo",{id:-1,statusId:1,priorityId:0,createdById:e.currentUser().userId(),assignedToId:e.currentUser().userId()})),x().isNew(!0),V().todo(x()),n.currentModal(J),Y(!0)}function E(a,n){if(a){var i=[];i.push(new r.Parameter("assignedToId",e.currentUser().userId(),"==")),i.push(new r.Parameter("statusId","2","!=")),i.push(new r.Parameter("statusId","4","!="));var o=t.getToDosQuery(i,n);return o=ko.utils.arrayFilter(o,function(e){return!e.isNew()})}return t.getToDos(null,{StatusIds:[1,3],AssignedToId:e.currentUser().userId()})}function D(){var e=E(!0);t.syncCalendarEvents(e)}function w(){t.getInterventions(null,{StatusIds:[1],AssignedToId:e.currentUser().userId()})}function C(e){var t=this;t.todo=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.todo()){var a=!!t.todo().title(),n=!!t.todo().status();e=a&&n}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={todo:t.todo,canSave:t.canSave,showing:e}}function A(e){var t=this;t.event=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){return t.event(),!1},write:function(e){t.canSaveObservable(e)}}),t.activationData={event:t.event,canSave:t.canSave,showing:e}}var O,x=ko.observable(),M=!1,F=ko.observable(20),U=ko.observable(0),R=ko.observable(),z=ko.observable(),L=ko.observable(!0),B=ko.observable(!0),Q=ko.observable(!1),Y=ko.observable(!1),V=ko.observable(new C(Y)),K=ko.observable(!1),q=ko.observable(new A(K)),_=new r.modal("Event Details",q,"viewmodels/templates/event.details",K,c,c),G=ko.observable(),H=ko.observable(),J=new r.modal("Create To Do",V,"viewmodels/templates/todo.edit",Y,d,u),X=ko.computed(function(){var t=e.currentUser();return t?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),j=ko.computed(function(){var t=e.currentUser();return t?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:U(),Take:F()}):""}),W=ko.observable(new l),Z=ko.observableArray(),et={left:"title",right:"today agendaWeek,month prev,next"},tt=ko.observable(new Date),at=ko.observableArray(),nt=ko.observable(),rt=ko.observableArray(),it=function(e){Z.removeAll();var a=t.getCalendarEvents(e);ko.utils.arrayPushAll(Z,a),Z.valueHasMutated(),t.syncCalendarEvents(e)},ot=function(){var e=G(),t=e?e:"dueDate desc";t+=", category.name, title";var a=E(!0,t);return it(a),a},st=ko.computed(function(){var e=[];return i.todos(),G(),e=ot()}).extend({throttle:50}),ct=ko.computed(function(){var a=[];i.interventions();var n=[],o="";n.push(new r.Parameter("assignedToId",e.currentUser().userId(),"==")),n.push(new r.Parameter("statusId","2","!=")),n.push(new r.Parameter("statusId","3","!=")),o=H()?H():"startDate";var s=o+", category.name, description";return a=t.getInterventionsQuery(n,s)}).extend({throttle:50}),dt=ko.observableArray(["priority","duedate","title","category","patient"]),ut=ko.observableArray(["startdate","description","category","patient","goal"]),lt=new s(Z,et,!1,tt,"basicWeek"),pt={activate:f,attached:v,newEvent:W,addEvent:g,fullScreenWidget:R,toggleFullScreen:T,cohortsList:at,selectedCohort:nt,patientsList:rt,calendarOptions:lt,title:"Home",myToDos:st,myInterventions:ct,activeTodoColumns:dt,activeInterventionColumns:ut,editToDo:P,addToDo:I,toggleOpenColumn:h,leftColumnOpen:z,toggleTodoSort:p,toggleInterventionSort:y,selectedTodoSortColumn:G,selectedInterventionSortColumn:H,myToDoListOpen:L,myWorkListOpen:Q,myInterventionListOpen:B,toggleWidgetOpen:m};return pt});
define('viewmodels/home/population/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext"],function(e,t,a,n){function r(){}function i(){c||(c=!0),o()}function o(){new Visualization("#visualizer",u.patients,"care_gaps")}var s=ko.observableArray(),c=!1;ko.observableArray(),ko.observableArray();var d=n.currentUser(),u={patients:[{id:1,name:"Billy Condo",overdue:!1,conditions:[6],care_gaps:3},{id:2,name:"Johnny Hairband",overdue:!1,conditions:[5],care_gaps:2}]},l={patients:s,activate:r,attached:i,currentUser:d,title:"index"};return l});
define('viewmodels/home/todos/index',["services/session","services/datacontext","config.services","models/base","services/local.collections","viewmodels/home/myhome/myhome"],function(e,t,a,n,r,i){function o(e){var t=this;t.name=e,t.percentage=0,t.count=0}function s(){return f||(c(),f=!0),!0}function c(){return y(),A(S()[7]),f=!0,!0}function u(){I(!I())}function d(e){e===k()?k(null):k(e)}function l(){x([]),M([]),U(!1)}function p(e){F()&&-1!==F().indexOf(e.sortProperty)?F()&&"desc"===F().substr(F().length-4,4)?F(null):F(e.sortProperty+" desc"):F(e.sortProperty)}function y(){t.getToDos(null,{StatusIds:[1,3],AssignedToId:e.currentUser().userId()}),t.getToDos(null,{StatusIds:[1,3],CreatedById:e.currentUser().userId()}),t.getToDos(null,{StatusIds:[2,4],AssignedToId:e.currentUser().userId(),FromDate:b}),t.getToDos(null,{StatusIds:[2,4],CreatedById:e.currentUser().userId(),FromDate:b}),t.getToDos(null,{StatusIds:[1,3],AssignedToId:"-1"}),t.getToDos(null,{StatusIds:[2,4],AssignedToId:"-1",FromDate:b}),t.getInterventions(null,{StatusIds:[1],AssignedToId:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[1],CreatedById:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[2,3],AssignedToId:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[2,3],CreatedById:e.currentUser().userId()})}function m(e,t,a,n,r){var i=this;i.type=ko.observable(e),i.name=ko.observable(t),i.parameters=a,i.columns=ko.observableArray(n),i.primarySort=r?r:"dueDate desc"}function g(e,t,a){var n=this;n.name=e,n.mainProperty=t,n.secondaryProperty=a}var f=!1,v={id:ko.observable(""),name:ko.observable("Not Set")},h=ko.observable(!0),T=i.addToDo,b=new Date((new Date).setDate((new Date).getDate()-30));b=moment(b).format();var S=ko.observableArray([new m("interventions","Intervention: Assigned to Others",[new n.Parameter("createdById",e.currentUser().userId(),"=="),new n.Parameter("assignedToId",e.currentUser().userId(),"!="),new n.Parameter("statusId","1","==")],["startdate","description","category","patient","goal"],"startDate"),new m("interventions","Intervention: Closed by Others",[new n.Parameter("createdById",e.currentUser().userId(),"=="),new n.Parameter("assignedToId",e.currentUser().userId(),"!="),new n.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","patient","goal"],"closedDate desc"),new m("interventions","Intervention: My Closed List",[new n.Parameter("assignedToId",e.currentUser().userId(),"=="),new n.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","patient","goal"],"closedDate desc"),new m("interventions","Intervention: My Open List",[new n.Parameter("assignedToId",e.currentUser().userId(),"=="),new n.Parameter("statusId","1","==")],["startdate","description","category","patient","goal"],"startDate"),new m("todos","To Do: Assigned to Others",[new n.Parameter("createdById",e.currentUser().userId(),"=="),new n.Parameter("assignedToId",e.currentUser().userId(),"!="),new n.Parameter("assignedToId","","!="),new n.Parameter("statusId","2","!="),new n.Parameter("statusId","4","!=")],["priority-small","duedate","title-small","category","patient","assignedto"]),new m("todos","To Do: Closed by Others",[new n.Parameter("createdById",e.currentUser().userId(),"=="),new n.Parameter("assignedToId",e.currentUser().userId(),"!="),new n.Parameter("assignedToId","","!="),new n.Parameter("statusId","1","!="),new n.Parameter("statusId","3","!="),new n.Parameter("closedDate",new Date(b),">=")],["status-small","closedon","title-small","category","patient","assignedto"],"closedDate desc"),new m("todos","To Do: My Closed List",[new n.Parameter("assignedToId",e.currentUser().userId(),"=="),new n.Parameter("statusId","1","!="),new n.Parameter("statusId","3","!="),new n.Parameter("closedDate",new Date(b),">=")],["status-small","closedon","title-small","category","patient","assignedto"],"closedDate desc"),new m("todos","To Do: My Open List",[new n.Parameter("assignedToId",e.currentUser().userId(),"=="),new n.Parameter("statusId","2","!="),new n.Parameter("statusId","4","!=")],["priority","duedate","title","category","patient"]),new m("todos","To Do: Open Unassigned",[new n.Parameter("assignedToId","","=="),new n.Parameter("statusId","2","!="),new n.Parameter("statusId","4","!=")],["priority","duedate","title","category","patient"]),new m("todos","To Do: Closed Unassigned",[new n.Parameter("assignedToId","","=="),new n.Parameter("statusId","1","!="),new n.Parameter("statusId","3","!=")],["priority","duedate","title","category","patient"])]),k=ko.observable(),I=ko.observable("todopanel"),N=[new g("By Priority","priority","levelName"),new g("By Category","category","name"),new g("By Status","status","name")],P=ko.observable(N[1]),E=[new g("By Category","category","name"),new g("By Status","status","name")],w=ko.observable(E[0]),D=ko.computed(t.todosSaving),C=t.enums.priorities,A=ko.observable(),O=ko.observable(),x=ko.observableArray(),M=ko.observableArray(),F=ko.observable(),U=ko.observable(),R=ko.computed(function(){var e;e=A()&&"todos"===A().type()?t.enums.toDoCategories():t.enums.interventionCategories();var a=e.slice(0,e.length);return-1===a.indexOf(v)&&a.push(v),a});A.subscribe(function(e){F(null),O()&&O().type()!==A().type()&&(x([]),M([])),O(e)});var z=ko.computed(function(){var e=x(),t=M(),a=[];if(e.length>0){var r=ko.utils.arrayFilter(R(),function(t){var a=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return a?!1:!0});ko.utils.arrayForEach(r,function(e){a.push(new n.Parameter("categoryId",e.id(),"!="))});var i=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(i=!0)}),i||(a.push(new n.Parameter("categoryId","","!=")),a.push(new n.Parameter("categoryId",null,"!=")))}if(t.length>0){var r=ko.utils.arrayFilter(C(),function(e){var a=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return a?!1:!0});ko.utils.arrayForEach(r,function(e){a.push(new n.Parameter("priorityId",e.id(),"!="))});var i=!1;ko.utils.arrayForEach(t,function(e){"0"===e.id()&&(i=!0)}),i||(a.push(new n.Parameter("priorityId","","!=")),a.push(new n.Parameter("priorityId",null,"!=")))}return a}),L=ko.computed(function(){var e=[];return A()&&(e=A().columns()),e}),B=ko.computed(function(){var e=[];r.todos();var a=A(),n=[],i="";return a&&"todos"===a.type()&&(ko.utils.arrayForEach(a.parameters,function(e){n.push(e)}),z().length>0&&ko.utils.arrayForEach(z(),function(e){n.push(e)}),i=F()?F():a.primarySort,i+=", category.name, title",e=t.getToDosQuery(n,i),e=ko.utils.arrayFilter(e,function(e){return!e.isNew()})),e}).extend({throttle:500}),$=ko.computed(function(){var e=[];r.interventions();var a=A(),n=[],i="";return a&&"interventions"===a.type()&&(ko.utils.arrayForEach(a.parameters,function(e){n.push(e)}),z().length>0&&ko.utils.arrayForEach(z(),function(e){n.push(e)}),i=F()?F():a.primarySort,e=t.getInterventionsQuery(n,i)),e}),Q=ko.computed(function(){B();var e=[],t=[],a=0;return e.push(new o("Not set")),ko.utils.arrayForEach(B(),function(t){var a=ko.utils.arrayFirst(e,function(e){return t[P().mainProperty]()?e.name===t[P().mainProperty]()[P().secondaryProperty]():"Not set"===e.name});if(a)a.count+=1;else{var n=new o(t[P().mainProperty]()[P().secondaryProperty]());n.count=1,e.push(n)}}),ko.utils.arrayForEach(e,function(e){a+=e.count}),ko.utils.arrayForEach(e,function(e){e.count&&(e.percentage=e.count/a,t.push([e.name,e.percentage]))}),t}),V=ko.computed(function(){$();var e=[],t=[],a=0;return e.push(new o("Not set")),ko.utils.arrayForEach($(),function(t){var a=ko.utils.arrayFirst(e,function(e){return t[w().mainProperty]()?e.name===t[w().mainProperty]()[w().secondaryProperty]():"Not set"===e.name});if(a)a.count+=1;else{var n=new o(t[w().mainProperty]()[w().secondaryProperty]());n.count=1,e.push(n)}}),ko.utils.arrayForEach(e,function(e){a+=e.count}),ko.utils.arrayForEach(e,function(e){e.count&&(e.percentage=e.count/a,t.push([e.name,e.percentage]))}),t});ko.computed(function(){var t=e.currentUser();return t?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ToDo"):""});var Y={activate:s,title:"Home",todosSaving:D,myToDos:B,myInterventions:$,myToDosChart:Q,myInterventionsChart:V,availableTodoSummaries:N,availableInterventionSummaries:E,selectedTodoSummary:P,selectedInterventionSummary:w,filtersOpen:U,addToDo:T,refreshView:y,views:S,activeColumns:L,priorities:C,categories:R,selectedPriorities:M,selectedCategories:x,selectedView:A,selectedSortColumn:F,resetFilters:l,toggleSort:p,fullScreenWidget:k,leftColumnOpen:I,toggleFullScreen:d,toggleOpenColumn:u,filtersHeaderOpen:h};return Y});
define('viewmodels/insight/index',["services/navigation","services/session","config.services","services/datacontext"],function(e){function t(){console.log("Loaded Insight index")}var a={activate:t,navigation:e,title:"Insight"};return a});
define('viewmodels/insight/reports/index',["services/session"],function(e){function t(){return n(),o("viewmodels/insight/widgets/active.report"),!0}function a(e){var t=this;t.Name=ko.observable(e.label),t.Path=ko.observable(e.uri)}function n(){visualize({auth:{name:l(),password:p(),organization:y()}},function(e){e.resourcesSearch({folderUri:f(),recursive:!1,success:function(e){v([]),$.each(e,function(e,t){"reportUnit"===t.resourceType&&v.push(new a(t))})}})})}function r(){T(!0),visualize({auth:{name:l(),password:p(),organization:y()}},function(e){e.report({resource:m(),container:g(),success:function(){T(!1)},error:function(e){console.log(e.message)}})})}var i=e.currentUser().settings();console.log(i);var o=ko.observable(),s=ko.utils.arrayFirst(i,function(e){return console.log(e.Key),"ReportingUser"===e.Key}).Value,c=ko.utils.arrayFirst(i,function(e){return"ReportingOrg"===e.Key}).Value,u=ko.utils.arrayFirst(i,function(e){return"ReportingPW"===e.Key}).Value,d=ko.utils.arrayFirst(i,function(e){return"ReportingRepository"===e.Key}).Value,l=ko.observable(s),p=ko.observable(u),y=ko.observable(c),m=ko.observable(),g=ko.observable(),f=ko.observable(d),v=ko.observableArray(),h=ko.computed(function(){return l()&&p()&&f()}),T=ko.observable(),b={activate:t,activeSecondColumn:o,getReportsList:n,userName:l,pwOrToken:p,organization:y,canGetReports:h,reportPath:m,containerToLoad:g,showDynamicReport:r,repoName:f,availableReports:v,fetchingReport:T};return b});
define('viewmodels/insight/widgets/active.report',["viewmodels/insight/reports/index"],function(e){function t(e){var t=this;t.Number=e}function a(e){var t=this;t.Name=ko.observable(e)}function n(t){e.containerToLoad("#"+t.Name())}var r=ko.observableArray([new t(1),new t(2),new t(3),new t(4),new t(5)]),i=ko.observable(r()[0]),o=ko.computed(function(){for(var e=i().Number,t=[],n=e-1;n>=0;n--)t.push(new a("Container"+n+1));return t});n(o()[0]);var s={numberOfContainers:r,selectedCount:i,reportContainers:o,setActiveReportContainer:n};return s});
define('viewmodels/insight/widgets/reports.list',["config.services","services/session","services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,a,n,r){function i(e){v(e),T(!0),r.currentModal(S)}function o(){return h||s(),!0}function s(){function e(){}return a.getEntityList(p,d().EntityType,d().ResourcePath,null,null,!1,null,"sName").then(e),u=y.subscribe(function(){m()&&m(null),f([]),c()}),throttledFilterToken=g.subscribe(function(e){y()&&(f([]),c(e))}),h=!0,!0}function c(e){var t={},t=l().Parameters;t.SearchFilter=e?e:null,a.getEntityList(f,l().EntityType,l().ResourcePath,null,y().iD(),!0,t)}var u,d=ko.computed(function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),l=ko.computed(function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:0,Take:5e3}):""}),p=ko.observableArray(),y=ko.observable(),m=ko.observable(),g=ko.computed(m).extend({throttle:500}).extend({notify:"always"}),f=ko.observableArray(),v=ko.observable(),h=!1,T=ko.observable(!1),b=function(){var e=confirm("You are about to delete an individual.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(f.remove(v()),a.deleteIndividual(v()),void 0)},S=new n.modal("Delete Individual",v,"templates/patient.delete.html",T,null,null,b);S.canDelete(!0);var k={cohortsList:p,selectedCohort:y,cohortFilter:m,patientsList:f,activate:o,choosePatient:i};return k});
define('viewmodels/patients/index',["services/navigation","services/datacontext","services/session","config.services","plugins/router"],function(e,t,a,n,r){function i(){}function o(){function e(){}return t.getEntityList(R,x().EntityType,x().ResourcePath,null,null,!1,null,"sName").then(e),et(!0),tt(!0),Y=L.subscribe(function(){M(!1),F(0),z()&&z(null),$([]),s()}),C=B.subscribe(function(e){L()&&(M(!1),F(0),$([]),s(e))}),0!==a.currentUser().settings().length&&ko.utils.arrayForEach(a.currentUser().settings(),function(e){"TotalPatientCount"===e.Key&&D(parseInt(e.Value))}),j=!0,!0}function s(e){var a={},a=U().Parameters;a.SearchFilter=e?e:null,t.getEntityList($,U().EntityType,U().ResourcePath,null,L().iD(),!0,a).then(c)}function c(){var e=$().length,t=0===F()?D():F()+D();t>e?M(!1):M(!0),F(t)}function u(){var e=!1,t=!1,a=!1,n=!1;if(W()&&(ko.utils.arrayForEach(W().programs.peek(),function(t){ko.utils.arrayForEach(t.modules.peek(),function(t){ko.utils.arrayForEach(t.actions.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0),ko.utils.arrayForEach(t.steps.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0),ko.utils.arrayForEach(t.responses.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0)})})})})}),W().goals.peek()&&ko.utils.arrayForEach(W().goals.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0),ko.utils.arrayForEach(e.tasks.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)}),ko.utils.arrayForEach(e.barriers.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)}),ko.utils.arrayForEach(e.interventions.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)})}),W().notes.peek()&&ko.utils.arrayForEach(W().notes.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.text()&&(t=!0)}),W().todos.peek()&&ko.utils.arrayForEach(W().todos.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.title()&&(n=!0)}),e||t||a||n)){var r="You have unsaved - ";e&&(r+="\n-Action(s)"),t&&(r+="\n-Note(s)"),a&&(r+="\n-Goal(s)"),n&&(r+="\n-To Do(s)"),r+="\nPress OK to continue, or cancel to return to the patient.";var i=confirm(r);return i===!0?!0:(et(!1),!1)}return!0}function d(e){function a(){W()&&W().programs()&&0===W().programs().length&&t.getEntityList(null,K().EntityType,K().ResourcePath+i+"/Programs",null,null,!0),l(),p(),m(),t.addPatientToRecentList(W()),t.getEntityList(null,q().EntityType,q().ResourcePath+i+"/Contact",null,null,!0),t.getEntityList(null,Q().EntityType,Q().ResourcePath+i+"/Observation/Problems",null,null,!0),y(),t.getEntityList(null,V().EntityType,V().ResourcePath+i,null,null,!0),g(),f(),et(!1),r.navigate("#patients/"+i,!1)}if(at()){var n=u();if(!n)return!1}var i;W()&&W()===e?et(!1):t&&(i=e.id?ko.unwrap(e.id):e,t.getEntityById(W,i,X().EntityType,X().ResourcePath,!0).then(a),t.getEntityList(null,_().EntityType,_().ResourcePath+i+"/Goals",null,null,!0,null,null,!0),t.getEntityList(null,J().EntityType,J().ResourcePath+i+"/Observations/Current",null,null,!0),t.getEntityList(null,G().EntityType,G().ResourcePath+i+"/Notes/100",null,null,!0),t.getEntityList(null,H().EntityType,H().ResourcePath+i+"/CareMembers",null,null,!0))}function l(){var e=new Date((new Date).setDate((new Date).getDate()-30));e=moment(e).format(),t.getToDos(null,{StatusIds:[1,3],PatientId:W().id()}),t.getToDos(null,{StatusIds:[2,4],PatientId:W().id()})}function p(){t.getInterventions(null,{StatusIds:[1,2,3],PatientId:W().id()})}function m(){t.getTasks(null,{StatusIds:[1,2,3,4],PatientId:W().id()})}function y(){var e=W().id();t.getPatientAllergies(null,{StatusIds:[1,2]},e)}function g(){var e=W().id();t.getPatientMedications(null,{StatusIds:[1,2],CategoryIds:[1,2]},e)}function f(){var e=W().id();W().gotMedicationFrequencies||(t.getPatientFrequencies(null,e,!0),W().gotMedicationFrequencies=ko.observable(!0))}function v(){tt(!tt())}function h(){tt(!1)}function b(){tt(!0)}function T(){et(!1)}function S(){et(!0)}function k(e){return e?d(e):W()||(et(!0),tt(!0)),j||o(),!0}function P(){return O()}function I(){tt(!1),et(!1),A(!1)}function N(){Z(!Z()),Z()&&(tt(!0),et(!1))}function E(){Z(!1)}function w(){var e={},a=z(),e=U().Parameters;e.SearchFilter=a?a:null;var n=ko.observableArray();t.getEntityList(n,U().EntityType,U().ResourcePath,null,L().iD(),!0,e).then(function(){$.push.apply($,n()),c()})}var D=ko.observable(50),C={},A=ko.observable(!1),O=ko.observable(!0),x=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"cohorts","Cohort"):!1}),F=ko.observable(0),M=ko.observable(!1),U=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:F(),Take:D()}):!1}),R=ko.observableArray(),L=ko.observable(),z=ko.observable(),B=ko.computed(z).extend({throttle:500}).extend({notify:"always"}),$=ko.observableArray(),Q=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","PatientObservation"):!1}),V=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"PatientSystem","PatientSystem"):!1});ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"PatientAllergy","PatientAllergy"):!1});var Y,K=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Program"):!1}),q=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","ContactCard"):!1}),_=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Goal"):!1}),G=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Note"):!1}),H=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","CareMember"):!1}),J=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","PatientObservation"):!1}),X=ko.computed(function(){return a.currentUser()?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"patient","Patient"):!1}),j=!1,W=ko.observable(),Z=ko.observable(!1),et=ko.observable(!0),tt=ko.observable(!0),at=ko.computed(t.hasChanges),nt=ko.utils.arrayFirst(e.navRoutes(),function(e){return"Individual"===e.title}),rt=ko.computed(function(){return nt&&nt.isActive()});r.activeInstruction.subscribe(function(e){var t=e&&e.fragment?e.fragment.substr(0,8):"";if(at()&&"patients"===t){if(O()&&!A()){var a=u();return a?(A(!0),O(!0),!0):(A(!1),O(!1),!1)}O()||A()?O()&&A()&&(O(!0),A(!1)):(A(!1),O(!0))}else O(!0),A(!1)},null,"beforeChange");var it={patientsListFlyoutOpen:et,patientDataColumnOpen:tt,canLoadMoreCohortPatients:M,cohortFilter:z,togglePatientsColumn:v,minimizePatientsDataColumn:h,maximizePatientsDataColumn:b,minimizePatientsListFlyoutColumn:T,maximizePatientsListFlyoutColumn:S,choosePatient:d,patientsList:$,selectedPatient:W,isEditing:Z,save:E,loadMoreCohortPatients:w,toggleEditing:N,cohortsList:R,selectedCohort:L,activate:k,deactivate:I,navigation:e,title:"Individual",canDeactivate:P,hasChanges:at,attached:i,isComposed:rt,leaving:A,getPatientsToDos:l,getPatientsInterventions:p,getPatientsTasks:m,getPatientsAllergies:y,getPatientMedications:g,getPatientFrequencies:f};return it});
define('viewmodels/patients/data/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base"],function(e,t,a,n,r,i,o,s){function c(){C().activeDataType(null),f(),v(),T()}function u(){C().activeDataType(null),b(),i.getPatientsAllergies()}function d(){var e=new s.modal("Data Entry",C,"viewmodels/templates/clinical.dataentry",D,c,u);o.currentModal(e),D(!D())}function l(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function p(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),n.isOpen.subscribe(function(){Q(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new l(t,n))})}function m(){w.subscribe(function(){r.checkIfAllObservationsAreLoadedYet(w().id()),F(null)}),R(B()[0])}function y(){L||(w()&&r.checkIfAllObservationsAreLoadedYet(w().id()),L=!0)}function g(){d()}function f(){if(0===w().allergies().length)return!1;var e=ko.utils.arrayFilter(w().allergies(),function(e){return e.needToSave()&&e.isValid()});if(e.length>0){r.saveAllergies(e).then(t);var t=function(e){ko.utils.arrayForEach(e,function(e){e.isNew(!1),e.isUserCreated(!1)})}}var a=ko.utils.arrayFilter(w().allergies(),function(e){return e.needToSave()&&!e.isValid()});S(a)}function v(){if(0===w().medications().length)return!1;var e=ko.utils.arrayFirst(w().medications(),function(e){return e.needToSave()&&e.isValid()});if(e){r.saveMedication(e).then(t);var t=function(){}}else h()}function h(){var e=w().medications().slice(0);ko.utils.arrayForEach(e,function(e){e.isNew()&&!e.isValid()&&e.entityAspect.rejectChanges()})}function T(){function e(){var e=w().observations().slice(0),t=[];ko.utils.arrayForEach(e,function(e){e.deleteFlag()?t.push(e):"problems"!==e.type().name().toLowerCase()?e.isNew()?t.push(e):e.deleteFlag()&&t.push(e):e.entityAspect.entityState.isModified()||e.isNew()?(e.isValid()?e.entityAspect.acceptChanges():(e.entityAspect.rejectChanges(),t.push(e)),e.isNew(!1),e.deleteFlag()&&t.push(e)):e.deleteFlag()&&t.push(e)});for(var a=t.length>0;t.length>0;){var n=t[0];n.entityAspect.setDeleted(),n.entityAspect.acceptChanges(),t.splice(0,1)}a&&V(!0),w().observations.valueHasMutated(),F.valueHasMutated()}return 0===w().observations().length?!1:(r.saveObservations(w().id()).then(e),void 0)}function b(){var e=w().observations().slice(0),t=w().allergies().slice(0),a=w().medications().slice(0),n=[];ko.utils.arrayForEach(e,function(e){e.isNew()?n.push(e):e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(t,function(e){e.isNew()&&n.push(e)}),ko.utils.arrayForEach(a,function(e){e.isNew()&&e.entityAspect.rejectChanges()}),S(n);var r=F();F(null),F(r)}function S(e){for(;e.length>0;){var t=e[0];t.entityAspect.setDeleted(),t.entityAspect.acceptChanges(),e.splice(0,1)}}function k(e){F(e)}function P(e){e.column.isOpen(!1)}function I(e){e.column.isOpen(!0)}function N(e){e.isFullScreen(!e.isFullScreen())}function E(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=w,e.showDropdown=!0,e.showActions=!1,e.activationData={selectedPatient:e.selectedPatient,activeDataType:e.activeDataType,showDropdown:e.showDropdown,showActions:e.showActions},e.canSave=ko.observable(!0)}var w=ko.computed(function(){return i.selectedPatient()}),D=ko.observable(!1),C=ko.observable(new E),A={id:ko.observable(-1),name:ko.observable("Allergies")},O={id:ko.observable(-2),name:ko.observable("Medications")},x=ko.observableArray(),F=ko.observable(),M=ko.computed(function(){var e=r.enums.observationTypes(),t=[];return ko.utils.arrayFilter(e,function(e){"problems"!==e.name().toLowerCase()&&t.push(e)}),t}).extend({throttle:1}),U=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},R=ko.observable(),z=ko.observableArray(),L=!1,B=ko.observableArray([new p("dataType",!1,[{name:"Data Summary",path:"patients/widgets/data.summary.html",open:!0}])]),Q=ko.computed({read:function(){return R()},write:function(e){e.isOpen()?R(e):e===R()&&e===B()[0]?R(B()[1]):e===R()&&R(B()[0])}}),V=ko.observable(!1),Y={activate:m,attached:y,openColumn:R,columns:B,widgets:z,computedOpenColumn:Q,selectedPatient:w,alphabeticalOrderSort:U,minimizeThisColumn:P,maximizeThisColumn:I,toggleFullScreen:N,activeDataType:F,setActiveDataType:k,dataTypes:M,saveAllergies:f,saveDataEntry:T,saveAllData:c,cancelDataEntry:b,title:"index",addData:g,dataObservations:x,needToRefreshObservations:V,modalEntity:C,allergiesType:A,medicationsType:O};return Y});
define('viewmodels/patients/careplan/index',["plugins/router","services/navigation","config.services","models/base","services/session","services/datacontext","viewmodels/patients/index","viewmodels/patients/data/index","viewmodels/shell/shell"],function(e,t,a,n,r,i,o,s,c){function u(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=N,e.showDropdown=!0,e.showActions=!1,e.canSave=ko.observable(!0)}function d(){A().activeDataType(null),s.saveAllData()}function l(){A().activeDataType(null),s.cancelDataEntry()}function p(){c.currentModal(O),C(!C())}function m(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1),a.elementStateIds=e.elementStateIds,a.sortOverride=e.sortOverride}function y(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"});var r=n.isOpen.subscribe(function(){Y(n)});P.push(r),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new m(t,n))})}function g(){k||(k=N.subscribe(function(){F(null),U(null),R(null)}),P.push(k)),x(Q())}function f(){z||(z=!0)}function v(e){i.getEntityList(null,L().EntityType,B().ResourcePath+"/"+N().id()+"/Program/"+e.module().program().id()+"/Module/"+e.module().id()+"/Action/"+e.id(),null,null,!0)}function h(e){e.column.isOpen(!1)}function T(e){e.column.isOpen(!0)}function b(e){e.isFullScreen(!e.isFullScreen())}function S(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}var k,P=[],I=function(e,t){var a=e.elementStateModel().order(),n=t.elementStateModel().order(),r=e.name().toLowerCase(),i=t.name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},N=ko.computed(function(){return o.selectedPatient()}),E=ko.computed(function(){var e=[];return N()&&(e=N().programs(),ko.utils.arrayForEach(e,function(e){e.isOpen||(e.isOpen=ko.observable(!1),0!==e.modules().length&&e.isOpen(!0))})),e}),w=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},D=function(e,t){var a=Date.parse(e.attrEndDate()),n=Date.parse(t.attrEndDate());return a==n?0:isNaN(a)||a>n?-1:isNaN(n)||n>a?1:void 0},C=ko.observable(!1),A=ko.observable(new u),O=new n.modal("Data Entry",A,"viewmodels/templates/clinical.dataentry",C,d,l),x=ko.observable(),M=ko.observableArray(),F=ko.observable(),U=ko.observable(),R=ko.observable();ko.computed(function(){var e=F();if(R(),U(),e){var t=F();t&&0===t.steps().length&&v(t)}}).extend({throttle:25});var z=!1;ko.computed(function(){return new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"program","Program")});var L=ko.computed(function(){if(F()&&N()){var e=F();return new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient/"+N().id()+"/Program/"+e.module().program().id()+"/Module/"+e.module().id()+"/Action/"+e.id(),"Action")}}),B=ko.computed(function(){return N()?new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient"):void 0}),Q=ko.observable(new y("carePlan",!1,[{name:"Active Programs",path:"patients/widgets/careplan.html",open:!0,elementStateIds:[2,3,4],sortOverride:I},{name:"Program History",path:"patients/widgets/careplan.html",open:!1,elementStateIds:[1,5,6],sortOverride:D}])),V=ko.observable(new y("actionDetails",!1,[{name:"ActionDetails",path:"viewmodels/patients/widgets/action.details",open:!0},{name:"ModuleDetails",path:"viewmodels/patients/widgets/module.details",open:!0},{name:"ProgramDetails",path:"viewmodels/patients/widgets/program.details",open:!0}])),Y=ko.computed({read:function(){return x()},write:function(e){e.isOpen()?x(e):e===x()&&"carePlan"===e.name()?x(V()):e===x()&&x(Q())}}),K={activate:g,attached:f,activeAction:F,activeModule:U,activeProgram:R,openColumn:x,planColumn:Q,detailsColumn:V,widgets:M,computedOpenColumn:Y,selectedPatient:N,selectedPatientsPrograms:E,programsSortTwo:I,alphabeticalOrderSort:w,minimizeThisColumn:h,maximizeThisColumn:T,toggleFullScreen:b,modalShowing:C,toggleModalShowing:p,getStepsForAction:v,title:"index",toggleWidgetOpen:S};return K});
define('viewmodels/patients/goals/index',["plugins/router","services/navigation","config.services","models/base","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell"],function(e,t,a,n,r,i,o,s){function c(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.column=t,a.isFullScreen=ko.observable(!1),a.statusIds=e.statusIds,a.canAdd=ko.observable(e.canadd),a.emptyMesssage=e.emptymessage,a.sortOverride=e.sortoverride,a.isOpen=ko.observable(e.open)}function u(e,t,a){var n=this;n.name=ko.observable(e),n.widgets=ko.observableArray(),n.isOpen=ko.observable(t).extend({notify:"always"}),$.each(a,function(e,t){n.widgets.push(new c(t,n))})}function d(e,t){var a=ko.observable(new m(e)),r=function(){i.saveGoal(a().goal)},o=function(){var e=a().goal;e.entityAspect.rejectChanges(),T(e,!0)};t=t?t:"Edit Goal";var c=new n.modal(t,a,"viewmodels/templates/goal.edit",O,r,o);O(!0),s.currentModal(c)}function l(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}function p(){function e(e){var t=e.results[0];t.statusId(1),t.startDate(new Date(moment().format("MM/DD/YYYY"))),t.isNew(!0),t.patientId(S().id()),d(t,"Add Goal")}i.initializeEntity(A,"Goal",S().id()).then(e)}function m(e){var t=this;t.goal=e,t.activationData={goal:t.goal},t.canSave=ko.computed(function(){return t.goal.name()&&t.goal.sourceId()})}function y(){var e=N();e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.tasks(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.barriers(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.interventions(),function(e){e.entityAspect.rejectChanges()})}function g(){D(!1);var e=S.subscribe(function(){N(null),E(!1),C(!1)});b.push(e)}function f(){w||(w=!0),D(!0)}function v(){D(!1)}function h(){}function T(e,t){function a(){e.isLoaded=!0}var n=e.id(),r=e.patientId(),o=t?!0:!e.isLoaded;i.getEntityById(null,n,x().EntityType,x().ResourcePath+r+"/Goal/",o).then(a)}var b=[],S=ko.computed(function(){return o.selectedPatient()}),k=function(e,t){var a=e.endDate(),n=t.endDate();return a==n?0:isNaN(a)||a>n?-1:isNaN(n)||n>a?1:void 0},P=t.currentRoute.subscribe(function(){S()&&ko.utils.arrayForEach(S().goals(),function(e){e.isExpanded&&(e.isExpanded(!1),e.isOpen(!1))})});b.push(P);var I=ko.observableArray(),N=ko.observable(),E=ko.observable(!0),w=!1,D=ko.observable(!0),C=ko.observable(!1),A=ko.observable(),O=ko.observable(!0);ko.computed(function(){return new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"goal","Goal")});var x=ko.computed(function(){return new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient","Goal")}),F=ko.observableArray([new u("goals",!0,[{name:"Active Goals",path:"patients/widgets/goals.html",statusIds:["1","3"],canadd:!0,open:!0},{name:"Goal History",path:"patients/widgets/goals.html",statusIds:["2","4"],canadd:!1,open:!1,emptymessage:"No history available.",sortoverride:k}])]),M={activate:g,attached:f,deactivate:v,detached:h,activeGoal:N,isEditing:C,isComposed:D,sliderOpen:E,columns:F,widgets:I,selectedPatient:S,cancelChanges:y,addGoal:p,editGoal:d,title:"Goals",getGoalDetails:T,toggleWidgetOpen:l};return M});
define('viewmodels/patients/history/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base"],function(e,t,a,n,r,i){function o(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function s(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),P=n.isOpen.subscribe(function(){A(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new o(t,n))})}function c(){if(b()){var e=k().slice(0).sort(S);e=e.slice(0,100),d(e)}}function u(e){var t=this;t.Name=ko.observable(e),t.Notes=ko.observableArray()}function d(e){N([]),ko.utils.arrayForEach(e,function(e){var t=e.localDate();if(moment(t).isValid()){var a=ko.utils.arrayFirst(N(),function(e){return e.Name()===t});a||(a=new u(t),N.push(a)),a.Notes.push(e)}})}function l(){w(C()[0]),c()}function p(){D||(D=!0)}function m(){P.dispose(),I.dispose()}function y(){E&&E.valueHasMutated()}function g(e){E(e)}function f(e){w(e)}function v(e){e.column.isOpen(!1)}function h(e){e.column.isOpen(!0)}function T(e){e.isFullScreen(!e.isFullScreen())}var b=ko.computed(function(){return i.selectedPatient()}),S=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},k=ko.computed(function(){var e=[];return b()&&(e=b().notes()),e}).extend({throttle:1}),P={},I={},I=k.subscribe(function(){c()}),N=ko.observableArray(),E=ko.observable(),w=ko.observable(),D=!1,C=ko.observableArray([new s("historyList",!1,[{name:"History",path:"patients/widgets/history.list.html",open:!0}]),new s("details",!1,[{name:"Details",path:"patients/widgets/history.detail.html",open:!0}])]),A=ko.computed({read:function(){return w()},write:function(e){e.isOpen()?w(e):e===w()&&e===C()[0]?w(C()[1]):e===w()&&w(C()[0])}}),O={activate:l,selectedPatient:b,columns:C,computedOpenColumn:A,activeNote:E,setActiveNote:g,setOpenColumn:f,minimizeThisColumn:v,maximizeThisColumn:h,toggleFullScreen:T,groups:N,notes:k,attached:p,deactivate:m,compositionComplete:y,title:"index"};return O});
define('viewmodels/patients/medications/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base","viewmodels/patients/data/index"],function(e,t,a,n,r,i,o,s,c){function u(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1),a.filtersOpen=ko.observable(!0),a.activationData={widget:a,selectedPatient:b,defaultSort:e.defaultSort},a.allowAdd=e.allowAdd,a.statusIds=e.statusIds}function l(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),n.isOpen.subscribe(function(){D(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new u(t,n))})}function d(){c.addData()}function p(){T(w()[0])}function m(){S||(S=!0)}function y(e){T(e)}function g(e){e.column.isOpen(!1)}function f(e){e.column.isOpen(!0)}function v(e){e.isFullScreen(!e.isFullScreen())}function h(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}var b=ko.computed(function(){return i.selectedPatient()}),T=ko.observable(),S=!1,k=ko.computed(function(){return b()?b().medications():[]}),P=ko.computed(r.medicationSaving),I=ko.observable(),N=ko.computed(function(){return["expand","type-small","name-small","strength-small","reason","status"]}),E=function(e){self.selectedSortColumn()&&-1!==self.selectedSortColumn().indexOf(e.sortProperty)?self.selectedSortColumn()&&"desc"===self.selectedSortColumn().substr(self.selectedSortColumn().length-4,4)?self.selectedSortColumn(null):self.selectedSortColumn(e.sortProperty+" desc"):self.selectedSortColumn(e.sortProperty)},w=ko.observableArray([new l("medications",!1,[{name:"Active Medications",path:"viewmodels/patients/widgets/medications",open:!0,statusIds:[1],allowAdd:!0},{name:"Medication History",path:"viewmodels/patients/widgets/medications",open:!0,statusIds:[2],defaultSort:"endDate desc, name"}]),new l("allergies",!1,[{name:"Allergies",path:"viewmodels/patients/widgets/allergies",open:!0,statusIds:[1]},{name:"Review",path:"viewmodels/patients/widgets/allergies",open:!1,statusIds:[2,3,4]}])]),D=ko.computed({read:function(){return T()},write:function(e){e.isOpen()?T(e):e===T()&&e===w()[0]?T(w()[1]):e===T()&&T(w()[0])}}),C={myMedications:k,medicationSaving:P,selectedSortColumn:I,activeMedicationColumns:N,toggleMedicationSort:E,activate:p,selectedPatient:b,columns:w,computedOpenColumn:D,setOpenColumn:y,minimizeThisColumn:g,maximizeThisColumn:f,toggleFullScreen:v,attached:m,title:"index",toggleWidgetOpen:h,addMedication:d};return C});
define('viewmodels/patients/overview/index',["services/session","services/datacontext","config.services","models/base","services/local.collections","viewmodels/patients/index"],function(e,t,a,n,r,i){function o(){Q([]),V([]),K(!1)}function s(e){Y()&&-1!==Y().indexOf(e.sortProperty)?Y()&&"desc"===Y().substr(Y().length-4,4)?Y(null):Y(e.sortProperty+" desc"):Y(e.sortProperty)}function c(){i.getPatientsToDos()}function u(){at([]),rt(!1)}function l(e){nt()&&-1!==nt().indexOf(e.sortProperty)?nt()&&"desc"===nt().substr(nt().length-4,4)?nt(null):nt(e.sortProperty+" desc"):nt(e.sortProperty)}function d(){i.getPatientsInterventions()}function p(){ft(!1)}function m(e){gt()&&-1!==gt().indexOf(e.sortProperty)?gt()&&"desc"===gt().substr(gt().length-4,4)?gt(null):gt(e.sortProperty+" desc"):gt(e.sortProperty)}function y(){i.getPatientsTasks()}function g(){return k()||(T(),k(!0)),!0}function f(){}function v(e,t){t()&&e(!e())}function h(e){e===E&&(w()||D())?(E(!E()),E()||A(!1)):e===D&&(w()||E())?(D(!D()),D()||O(!1)):e===w&&(D()||E())&&(w(!w()),w()||F(!1))}function b(e){e===C()?C(null):C(e)}function T(){return!0}function S(e,t,a,n){var r=this;r.name=ko.observable(e),r.parameters=t,r.columns=ko.observableArray(a),r.primarySort=n?n:"dueDate desc"}var k=ko.observable(!1),P=[],I=ko.computed(function(){return i.selectedPatient()}),N=new Date((new Date).setDate((new Date).getDate()-30));N=moment(N).format();var E=ko.observable(!0),w=ko.observable(!0),D=ko.observable(!0),C=ko.observable(),A=ko.observable(!1),O=ko.observable(!1),F=ko.observable(!1),x={id:ko.observable(""),name:ko.observable("Not Set")},M=ko.observable(),U=ko.observable(),R=ko.computed(function(){var e=I(),t=[];return e&&k()&&(t=[new S("Closed To-Do List",[new n.Parameter("patientId",e.id(),"=="),new n.Parameter("statusId","1","!="),new n.Parameter("statusId","3","!=")],["status-small","closedon","title","category","assignedto","priority-small"],"closedDate desc"),new S("Open To-Do List",[new n.Parameter("patientId",e.id(),"=="),new n.Parameter("statusId","2","!="),new n.Parameter("statusId","4","!=")],["priority","duedate","title","category","assignedto"])]),t}).extend({throttle:100}),L=R.subscribe(function(){setTimeout(function(){null!==U()&&"undefined"!=typeof U()?M(R()[U()]):M(R()[1])},200)});P.push(L);var z=ko.computed(t.todosSaving),B=ko.computed(function(){var e=t.enums.toDoCategories(),a=e.slice(0,e.length);return-1===a.indexOf(x)&&a.push(x),a}),$=t.enums.priorities,Q=ko.observableArray(),V=ko.observableArray(),Y=ko.observable(),K=ko.observable(),q=M.subscribe(function(e){Y(null),e&&U(R().indexOf(M()))});P.push(q);var _=ko.computed(function(){var e=Q(),t=V(),a=[];if(e.length>0){var r=ko.utils.arrayFilter(B(),function(t){var a=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return a?!1:!0});ko.utils.arrayForEach(r,function(e){a.push(new n.Parameter("categoryId",e.id(),"!=")),a.push(new n.Parameter("categoryId",null,"!="))});var i=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(i=!0)}),i||(a.push(new n.Parameter("categoryId","","!=")),a.push(new n.Parameter("categoryId",null,"!=")))}if(t.length>0){var r=ko.utils.arrayFilter($(),function(e){var a=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return a?!1:!0});ko.utils.arrayForEach(r,function(e){a.push(new n.Parameter("priorityId",e.id(),"!="))});var i=!1;ko.utils.arrayForEach(t,function(e){"0"===e.id()&&(i=!0)}),i||a.push(new n.Parameter("priorityId","","!="))}return a}),G=ko.computed(function(){var e=[];return M()&&(e=M().columns()),e}),H=ko.computed(function(){var e="";return M()&&(e=M().name()),e}),J=ko.computed(function(){var e=[];r.todos();var a=M(),n=[],i="",o=I();if(a){var o=o.todos();ko.utils.arrayForEach(a.parameters,function(e){n.push(e)}),_().length>0&&ko.utils.arrayForEach(_(),function(e){n.push(e)}),i=Y()?Y():a.primarySort,i+=", category.name, title",e=t.getToDosQuery(n,i),e=ko.utils.arrayFilter(e,function(e){return!e.isNew()&&!e.deleteFlag()})}return e}).extend({throttle:50}),X=ko.observable(),j=ko.observable(),W=ko.computed(function(){var e=I(),t=[];return e&&k()&&(t=[new S("Closed Intervention List",[new n.Parameter("goal.patientId",e.id(),"=="),new n.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","goal","assignedto"],"closedDate desc"),new S("Open Intervention List",[new n.Parameter("goal.patientId",e.id(),"=="),new n.Parameter("statusId","1","==")],["startdate","description","category","goal","assignedto"],"startDate")]),t}).extend({throttle:10}),Z=W.subscribe(function(){setTimeout(function(){j()?X(W()[j()]):X(W()[1])},200)});P.push(Z);var et=ko.computed(t.interventionsSaving),tt=ko.computed(function(){var e=t.enums.interventionCategories(),a=e.slice(0,e.length);return-1===a.indexOf(x)&&a.push(x),a}),at=ko.observableArray(),nt=ko.observable(),rt=ko.observable(),it=X.subscribe(function(e){nt(null),e&&j(W().indexOf(X()))});P.push(it);var ot=ko.computed(function(){var e=at(),t=[];if(e.length>0){var a=ko.utils.arrayFilter(tt(),function(t){var a=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return a?!1:!0});ko.utils.arrayForEach(a,function(e){t.push(new n.Parameter("categoryId",e.id(),"!="))});var r=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(r=!0)}),r||(t.push(new n.Parameter("categoryId","","!=")),t.push(new n.Parameter("categoryId",null,"!=")))}return t}),st=ko.computed(function(){var e=[];return X()&&(e=X().columns()),e}),ct=ko.computed(function(){var e="";return X()&&(e=X().name()),e}),ut=ko.computed(function(){var e=[];r.interventions();var a=X(),n=[],i="",o=I();if(a){var o=o.goals();ko.utils.arrayForEach(a.parameters,function(e){n.push(e)}),ot().length>0&&ko.utils.arrayForEach(ot(),function(e){n.push(e)}),i=nt()?nt():a.primarySort,i+=", category.name, description",e=t.getInterventionsQuery(n,i)}return e}).extend({throttle:50}),lt=ko.observable(),dt=ko.observable(),pt=ko.computed(function(){var e=I(),t=[];return e&&k()&&(t=[new S("Closed Task List",[new n.Parameter("goal.patientId",e.id(),"=="),new n.Parameter("statusId","1","!="),new n.Parameter("statusId","3","!=")],["status-small","closeddate","targetdate","description-small","targetvalue-small","goal"],"closedDate desc"),new S("Open Task List",[new n.Parameter("goal.patientId",e.id(),"=="),new n.Parameter("statusId","2","!="),new n.Parameter("statusId","4","!=")],["startdate","targetdate","description-small","targetvalue","goal"],"targetDate")]),t}).extend({throttle:10}),mt=pt.subscribe(function(){setTimeout(function(){dt()?lt(pt()[dt()]):lt(pt()[1])},200)});P.push(mt);var yt=ko.computed(t.tasksSaving),gt=ko.observable(),ft=ko.observable(),q=lt.subscribe(function(e){gt(null),e&&dt(pt().indexOf(lt()))});P.push(q);var vt=ko.computed(function(){var e=[];return e}),ht=ko.computed(function(){var e=[];return lt()&&(e=lt().columns()),e}),bt=ko.computed(function(){var e="";return lt()&&(e=lt().name()),e}),Tt=ko.computed(function(){var e=[];r.tasks();var a=lt(),n=[],i="",o=I();if(a){var o=o.goals();ko.utils.arrayForEach(a.parameters,function(e){n.push(e)}),vt().length>0&&ko.utils.arrayForEach(vt(),function(e){n.push(e)}),i=gt()?gt():a.primarySort,i+=", status.name, description",e=t.getTasksQuery(n,i)}return e}).extend({throttle:50}),St={activate:g,title:"Overview",selectedPatient:I,toggleWidgetOpen:h,todoFiltersHeaderOpen:A,interventionFiltersHeaderOpen:O,taskFiltersHeaderOpen:F,fullScreenWidget:C,toggleFullScreen:b,toggleHeaderOpen:v,todosPanelOpen:E,taskPanelOpen:w,interventionsPanelOpen:D,myToDos:J,activeTodoColumns:G,todosSaving:z,todoFiltersOpen:K,resetTodoFilters:o,refreshTodoView:c,todoViews:R,computedTodoTitle:H,todoPriorities:$,todoCategories:B,selectedTodoPriorities:V,selectedTodoCategories:Q,selectedTodoView:M,selectedTodoSortColumn:Y,toggleTodoSort:s,myInterventions:ut,activeInterventionColumns:st,interventionsSaving:et,interventionFiltersOpen:rt,resetInterventionFilters:u,refreshInterventionView:d,interventionViews:W,computedInterventionTitle:ct,interventionCategories:tt,selectedInterventionCategories:at,selectedInterventionView:X,selectedInterventionSortColumn:nt,toggleInterventionSort:l,myTasks:Tt,activeTaskColumns:ht,tasksSaving:yt,taskFiltersOpen:ft,resetTaskFilters:p,refreshTaskView:y,taskViews:pt,computedTaskTitle:bt,selectedTaskView:lt,selectedTaskSortColumn:gt,toggleTaskSort:m,detached:f};return St});
define('viewmodels/patients/sections/additional.observations',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=function(){};return r.prototype.addNewObservation=function(){function e(){n().isNew(!0),t.additionalObservationsToEnter.push(n()),t.selectedAdditionalObservation(null)}var t=this,n=ko.observable(),r=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});r&&a.initializeObservation(n,"PatientObservation",r.id(),r.typeId(),t.selectedPatient().id()).then(e)},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.additionalObservations=ko.observableArray(),t.additionalObservationsToEnter=ko.observableArray(),t.selectedAdditionalObservation=ko.observable(),t.canAdd=ko.computed(function(){var e=!1;if(t.selectedAdditionalObservation()){var a=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});a&&(e=!0)}return e}),t.addtlObsBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,a,n){var r=$.Deferred();r.done(function(){n(this)});var i=e.toLowerCase(),o=t.additionalObservations().filter(function(e){return!!~e.name().toLowerCase().indexOf(i)});return r.resolveWith(o),r.promise()}}}),t.addtlObsBloodhound.initialize(),t.getAdditionalObservationsById=function(){if(t.activeDataType()){var e=t.selectedPatient().observations(),a=[];ko.utils.arrayForEach(e,function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!1&&e.isNew()&&a.push(e)}),t.additionalObservationsToEnter(a)}},t.activeDataType.subscribe(function(){t.selectedAdditionalObservation(null),t.additionalObservations([]),t.getAdditionalObservations(),t.getAdditionalObservationsById()}),t.addNew=function(e){function n(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().isNew(!0),r().entityAspect.acceptChanges();var a=t.additionalObservationsToEnter.indexOf(e);t.additionalObservationsToEnter.splice(a+1,0,r()),r(null)}var r=ko.observable();return moment(e.startDate()).isValid()&&e.computedValue().value()?a.initializeObservation(r,"PatientObservation",e.observationId(),e.typeId(),e.patientId()).then(n):void 0}},r.prototype.attached=function(){var e=this;0===e.additionalObservations().length&&(e.getAdditionalObservations(),e.getAdditionalObservationsById())},r.prototype.getAdditionalObservations=function(){function e(){var e=ko.utils.arrayFilter(r.additionalObservations(),function(e){return!e.standard()});r.additionalObservations(e),r.addtlObsBloodhound.transport.constructor.resetCache()}var r=this;if(r.selectedPatient()&&r.activeDataType()&&-1!==r.activeDataType().id()&&-2!==r.activeDataType().id()){var i=new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"patient/"+r.selectedPatient().id()+"/Observation/Type/"+r.activeDataType().id()+"/MatchLibrary/","Observation");return a.getEntityList(r.additionalObservations,"Observation",i.ResourcePath,"typeId",r.activeDataType().id(),!1).then(e)}},r});
define('viewmodels/patients/sections/additional.problem.observations',["models/base","config.services","services/datacontext","services/session"],function(e,t,a){var n=function(){var e=this;e.problemObservations=ko.observableArray()};return n.prototype.filterProblemObservations=function(){var e=this,t=e.problemObservations().slice(0),a=ko.utils.arrayFilter(t,function(t){var a=!0;return ko.utils.arrayForEach(e.selectedPatient().observations(),function(e){e.state()&&"active"===e.state().name().toLowerCase()&&e.name()===t.name()&&!e.deleteFlag()&&(a=!1)}),a});e.problemObservations(a),e.probObsBloodhound.transport.constructor.resetCache()},n.prototype.addNewObservation=function(){function e(){n().isNew(!0),t.getProblemObservations(),t.selectedObservation(null)}var t=this;a.observationsSaving(!0);var n=ko.observable(),r=ko.utils.arrayFirst(t.problemObservations(),function(e){return e.name().toLowerCase()===t.selectedObservation().toLowerCase()});r&&a.initializeObservation(n,"PatientObservation",r.id(),r.typeId(),t.selectedPatient().id()).then(e)},n.prototype.activate=function(e){var t=this;t.settings=e,t.problemObservationTypeId="533d8278d433231deccaa62d",t.selectedPatient=t.settings.selectedPatient,t.selectedObservation=ko.observable(),t.canAdd=ko.computed(function(){var e=!1;if(t.selectedObservation()){var n=ko.utils.arrayFirst(t.problemObservations(),function(e){return e.name().toLowerCase()===t.selectedObservation().toLowerCase()});n&&(e=!0)}return a.observationsSaving()&&(e=!1),e}),t.probObsBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,remote:{url:"%QUERY",transport:function(e,a,n){var r=$.Deferred();r.done(function(){n(this)});var i=e.toLowerCase(),o=t.problemObservations().filter(function(e){return!!~e.name().toLowerCase().indexOf(i)});return r.resolveWith(o),r.promise()}}}),t.probObsBloodhound.initialize()},n.prototype.attached=function(){var e=this;0===e.problemObservations().length&&e.getProblemObservations()},n.prototype.getProblemObservations=function(){function e(){t.filterProblemObservations()}var t=this;return t.selectedPatient()?a.getEntityList(t.problemObservations,"Observation","fakeEndPoint","typeId",t.problemObservationTypeId,!1).then(e):void 0},n});
define('viewmodels/patients/sections/allergies.edit',["services/datacontext"],function(e){var t=function(){};return t.prototype.allergyTypes=ko.computed(e.enums.allergyTypes),t.prototype.severities=ko.computed(e.enums.severities),t.prototype.reactions=ko.computed(e.enums.reactions),t.prototype.allergySources=ko.computed(e.enums.allergySources),t.prototype.allergyStatuses=ko.computed(e.enums.allergyStatuses),t.prototype.removeAllergy=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.newPatientAllergies=ko.computed(function(){var e=[],a=t.selectedPatient().allergies();return e=ko.utils.arrayFilter(a,function(e){return!e.deleteFlag()&&e.isNew()})}).extend({throttle:50})},t.prototype.attached=function(){},t});
define('viewmodels/patients/sections/allergies.search',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Search/allergy","AllergySearch"),i=function(){var e=this;e.allergies=ko.observableArray()};return i.prototype.filterAllergies=function(){var e=this,t=e.allergies().slice(0),a=ko.utils.arrayFilter(t,function(t){var a=!0;return ko.utils.arrayForEach(e.selectedPatient().allergies(),function(e){e.state()&&"active"===e.state().name().toLowerCase()&&e.name()===t.name()&&!e.deleteFlag()&&(a=!1)}),a});e.allergies(a),e.allergyBloodhound.transport.constructor.resetCache()},i.prototype.addNewAllergy=function(){function e(e){var o=e.results[0];i={Id:o.id(),Name:o.name(),DisplayName:o.name()},a.initializeAllergy(r,"PatientAllergy",o.id(),n.selectedPatient().id(),!0).then(t)}function t(){r().isNew(!0),r().allergyName(i.Name),a.allergySaving(!1),n.selectedAllergy("")}var n=this;a.allergySaving(!0);var r=ko.observable(),i=ko.utils.arrayFirst(n.allergies(),function(e){return e.Name.toLowerCase()===n.trimmedAllergy().toLowerCase()});if(i)a.initializeAllergy(r,"PatientAllergy",i.Id,n.selectedPatient().id()).then(t);else{var o=n.trimmedAllergy().replace(" (New)","");a.allergySaving(!0),a.initializeNewAllergy(o).then(e)}},i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.selectedAllergy=ko.observable(""),i.trimmedAllergy=ko.computed(function(){return i.selectedAllergy().trim()}),i.resultsMessage=ko.observable(""),i.canAdd=ko.computed(function(){var e=!1,t=a.allergySaving(),n=i.trimmedAllergy();if(n){var r=ko.utils.arrayFirst(i.allergies(),function(e){return e.Name.toLowerCase().trim()===n.toLowerCase()});r||(e="(New)"===n.substr(n.length-5)),r&&r.isDuplicate!==!0&&(e=!0)}return t&&(e=!1),e}),i.allergyBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+r.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&SearchTerm="+searchQuery},ajax:{beforeSend:function(e){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",n.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(i.resultsMessage(""),i.resultsMessage(e.Message)):i.resultsMessage(""),i.allergyBloodhound.clear();var t=i.trimmedAllergy(),a=ko.utils.arrayFirst(i.selectedPatient().allergies(),function(e){return e.allergyName().toLowerCase().trim()===t.toLowerCase()&&"Active"===e.status().name()});ko.utils.arrayForEach(e.Allergies,function(e){e.DisplayName=e.Name;var t=ko.utils.arrayFirst(i.selectedPatient().allergies(),function(t){return t.allergyName().toLowerCase().trim()===e.Name.toLowerCase().trim()&&"Active"===t.status().name()});(t||a&&a.allergyName().toLowerCase().trim()===e.Name.toLowerCase().trim())&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)}),i.allergies(e.Allergies);var n={Id:-1,Name:t,DisplayName:t+" (New)"},r=ko.utils.arrayFirst(e.Allergies,function(e){return e.Name.toLowerCase().trim()===t.toLowerCase()});return r||a||e.Allergies.push(n),e.Allergies},rateLimitWait:500,cache:!1}}),i.allergyBloodhound.initialize()},i.prototype.attached=function(){var e=this;0===e.allergies().length},i.prototype.getAllergies=function(){var e=this;e.selectedPatient()},i});
define('viewmodels/patients/sections/background',["models/base","services/datacontext","viewmodels/shell/shell"],function(e,t,a){var n=function(){};return n.prototype.activate=function(n){var r=this;r.settings=n,r.selectedPatient=r.settings.selectedPatient,r.background=r.selectedPatient.background,r.backgroundModalShowing=ko.observable(!1),r.saveBackground=function(){t.saveBackground(r.selectedPatient)},r.cancelBackground=function(){r.selectedPatient.entityAspect.rejectChanges()},r.modal=new e.modal("Edit Background",r.selectedPatient,"templates/background.html",r.backgroundModalShowing,r.saveBackground,r.cancelBackground),r.isOpen=ko.observable(!0),r.isEditing=ko.observable(!1),r.isExpanded=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.backgroundModalShowing(!1);else{a.currentModal(r.modal),r.backgroundModalShowing(!0);var e=r.backgroundModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)}},n.prototype.attached=function(){},n});
define('viewmodels/patients/sections/barrier.details',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,a,n,r,i){function o(t,a,n,r,o){var s=new e.modal(t,a,n,p,r,o);p(!0),i.currentModal(s)}function s(e){a.saveBarrier(e)}function c(e){e.entityAspect.rejectChanges()}function u(e){r.getGoalDetails(e,!0)}function l(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var d=function(){},p=ko.observable(!0);return d.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.barrier=t.settings.barrier,t.computedBarrier=ko.computed(function(){return t.barrier}).extend({throttle:75}),t.isExpanded=t.barrier.goal().isExpanded,t.editBarrier=function(e){var t=ko.observable(new l(e,"name")),a=function(){s(e)},n=function(){c(e),u(e.goal())};o("Edit Barrier",t,"viewmodels/templates/barrier.edit",a,n)},t.deleteBarrier=function(e){function t(){e&&e.goal()&&e.goal().barriers.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var n=confirm("You are about to delete a barrier.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(e.goal(),ko.utils.arrayForEach(e.goal().tasks(),function(t){console.log("Check this tasks barriers - ",t.barrierIds());var n=ko.utils.arrayFirst(t.barrierIds(),function(t){return console.log("Check this barrier id - ",t.id()),t.id()===e.id()});console.log("Found a related id - ",n),n&&(t.barrierIds.remove(n),a.saveTask(t))}),ko.utils.arrayForEach(e.goal().interventions(),function(t){var n=ko.utils.arrayFirst(t.barrierIds(),function(t){return t.id()===e.id()});n&&(t.barrierIds.remove(n),a.saveIntervention(t))}),e.entityAspect.rejectChanges(),e.deleteFlag(!0),a.saveBarrier(e).then(t),void 0)}},d});
define('viewmodels/patients/sections/basic.observations',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=function(){var e=this;e.basicObservations=ko.observableArray(),e.observationsEndPoint=ko.computed(function(){var e=n.currentUser();return e?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","PatientObservation"):""})};return r.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.getBasicObservationsById=function(){function e(){ko.utils.arrayForEach(t.basicObservations(),function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!0&&e.isNew(!0)})}if(t.activeDataType()){var n=t.selectedPatient().observations(),r=[];ko.utils.arrayForEach(n,function(e){e.isNew()&&e.typeId()===t.activeDataType().id()&&e.standard()===!0&&-1===r.indexOf(e)&&r.push(e)}),0===r.length&&"Problems"!==t.activeDataType().name()?a.getEntityList(t.basicObservations,t.observationsEndPoint().EntityType,t.observationsEndPoint().ResourcePath+t.selectedPatient().id()+"/Observation","typeId",t.activeDataType().id(),!0).then(e):t.basicObservations(r)}},0===t.basicObservations().length&&t.getBasicObservationsById(),t.computedBasicObservations=ko.computed(function(){var e=t.basicObservations();return e=ko.utils.arrayFilter(e,function(e){return e.isNew()}),e.sort(t.alphabeticalNameSort)}).extend({throttle:50}),t.addNew=function(e){function n(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().isNew(!0),r().entityAspect.acceptChanges();var a=t.basicObservations.indexOf(e);t.basicObservations.splice(a+1,0,r()),r(null)}var r=ko.observable();moment(e.startDate()).isValid()&&a.initializeObservation(r,"PatientObservation",e.observationId(),e.typeId(),e.patientId()).then(n)}},r.prototype.attached=function(){},r.prototype.detached=function(){},r});
define('viewmodels/patients/sections/care.team',["models/base","services/datacontext","services/session","viewmodels/shell/shell"],function(e,t,a,n){function r(e,t){var a=this;a.selectedPatient=ko.observable(e),a.saveType=t,a.canSaveObservable=ko.observable(!1),a.canSave=ko.computed({read:function(){return a.canSaveObservable()},write:function(e){a.canSaveObservable(e)}}),a.activationData={selectedPatient:a.selectedPatient,canSave:a.canSave,saveType:a.saveType}}var i=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},o=function(){};return o.prototype.activate=function(n){var o=this;o.selectedPatient=n.selectedPatient,o.careMembers=o.selectedPatient.careMembers,o.isOpen=ko.observable(!0),o.primaryCareTeam=ko.computed(function(){var e=[],t=o.careMembers().sort(i);return ko.utils.arrayForEach(t,function(t){t.primary()&&e.push(t)}),e}),o.secondaryCareTeam=ko.computed(function(){var e=[],t=o.careMembers().sort(i);return ko.utils.arrayForEach(t,function(t){t.primary()||e.push(t)}),e}),o.saveType=ko.observable(),o.saveOverride=function(){var e=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(e){ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a.currentUser().userId()});var n=ko.utils.arrayFirst(o.selectedPatient.careMembers(),function(e){return e.primary()});t.saveCareMember(n,o.saveType())}},o.cancelOverride=function(){t.cancelEntityChanges(o.selectedPatient),ko.utils.arrayForEach(o.selectedPatient.careMembers(),function(e){t.cancelEntityChanges(e)})},o.editModalShowing=ko.observable(!1),o.modalEntity=ko.observable(new r(o.selectedPatient,o.saveType)),o.modal=new e.modal("Edit Care Team",o.modalEntity,"viewmodels/templates/care.team.edit",o.editModalShowing,o.saveOverride,o.cancelOverride)},o.prototype.canReassignToMe=function(){var e=this;return e.primaryCareTeam().length>0?e.primaryCareTeam().length>0&&e.primaryCareTeam()[0].contactId()!==a.currentUser().userId():!1},o.prototype.assignToMe=function(){var e=this,n=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(n){var r=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a.currentUser().userId()}),i=t.createEntity("CareMember",{id:-1,patientId:e.selectedPatient.id(),preferredName:r.preferredName(),typeId:n.id(),gender:"n",primary:!0,contactId:a.currentUser().userId()});t.saveCareMember(i,"Insert")}},o.prototype.reassignToMe=function(){var e=this,n=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(n){var r=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a.currentUser().userId()}),i=ko.utils.arrayFirst(e.selectedPatient.careMembers(),function(e){return e.primary()});i.preferredName(r.preferredName()),i.gender("n"),i.contactId(r.id()),t.saveCareMember(i,"Update")}},o.prototype.saveCareTeam=function(e){var n=e?e:a.currentUser().userId(),r=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(r){var i=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===n}),o=t.createEntity("CareMember",{id:-1,patientId:self.selectedPatient.id(),preferredName:i.preferredName(),typeId:r.id(),gender:"n",primary:!0,contactId:n});t.saveCareMember(o,"Insert")}},o.prototype.editCareTeam=function(){var e=this;e.editModalShowing(!0),n.currentModal(e.modal)},o.prototype.attached=function(){},o});
define('viewmodels/patients/sections/communications',["models/base","services/datacontext","viewmodels/shell/shell"],function(e,t,a){var n=function(){};return n.prototype.activate=function(t){var n=this;n.contactCard=t.contactCard,n.communicationModalShowing=ko.observable(!1),n.primaryCommunications=ko.computed(function(){var e=[],t=n.contactCard();if(t){var a=ko.utils.arrayFirst(t.phones(),function(e){return e.phonePreferred()});a&&(a.template="templates/phone.html",e.push(a));var r=ko.utils.arrayFirst(t.phones(),function(e){return e.textPreferred()});r&&r!==a&&(r.template="templates/phone.html",e.push(r));var i=ko.utils.arrayFirst(t.emails(),function(e){return e.preferred()});i&&(i.template="templates/email.html",e.push(i));var o=ko.utils.arrayFirst(t.addresses(),function(e){return e.preferred()});o&&(o.template="templates/address.html",e.push(o))}return e}).extend({throttle:25}),n.secondaryCommunications=ko.computed(function(){var e=[],t=n.contactCard();return t&&(t.phoneOptedOut()||ko.utils.arrayForEach(t.phones(),function(t){t.phonePreferred()||t.textPreferred()||t.optOut()||(t.template="templates/phone.html",e.push(t))}),t.phoneOptedOut()&&!t.textOptedOut()&&ko.utils.arrayForEach(t.phones(),function(t){t.textPreferred()||!t.isText()||t.optOut||(t.template="templates/phone.html",e.push(t))}),t.emailOptedOut()||ko.utils.arrayForEach(t.emails(),function(t){t.preferred()||t.optOut()||(t.template="templates/email.html",e.push(t))}),t.addressOptedOut()||ko.utils.arrayForEach(t.addresses(),function(t){t.preferred()||t.optOut()||(t.template="templates/address.html",e.push(t))})),e}).extend({throttle:25}),n.modal=new e.modal("Edit Communication Preferences",n.contactCard,"templates/contactcard.html",n.communicationModalShowing),n.isOpen=ko.observable(!0),n.isEditing=ko.observable(!1),n.toggleEditing=function(){if(n.isEditing())n.communicationModalShowing(!1);else{a.currentModal(n.modal),n.communicationModalShowing(!0);var e=n.communicationModalShowing.subscribe(function(){n.isEditing(!1),e.dispose()})}n.isEditing(!n.isEditing()),n.isOpen(!0)},n.isValid=ko.observable(!0)},n.prototype.attached=function(){},n});
define('viewmodels/patients/sections/data.list',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/data/index","viewmodels/shell/shell"],function(e,t,a,n,r){function i(e){function t(e){var t=this;t.observations=e}var a=[],n=[];return ko.utils.arrayForEach(e,function(e){-1===a.indexOf(e.name())&&a.push(e.name())}),ko.utils.arrayForEach(a,function(a){var r=ko.utils.arrayFilter(e,function(e){return a===e.name()});n.push(new t(r))}),n}function o(e){var t=this;t.isOpen=ko.observable(!1),t.isLoadingObs=ko.observable(!1),t.hasBeenExpanded=ko.observable(!1),t.observations=ko.observableArray(e),t.computedObservations=ko.computed(function(){ko.utils.arrayForEach(t.observations(),function(e){e.endDate()});var e=ko.utils.arrayFilter(t.observations(),function(e){return!e.deleteFlag()});return 0===e.length?[]:(e=e.sort(u),e.slice(1,e.length))}).extend({throttle:50}),t.parentObservation=ko.computed(function(){var e=t.observations();if(0===e.length)return[];e=e.sort(u);var a=e[0];return a}).extend({throttle:50})}var s=ko.computed(function(){return new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","PatientObservation")}),c=function(e,t){var a=e.parentObservation().type().name(),n=t.parentObservation().type().name(),r=e.parentObservation().name().toLowerCase(),i=t.parentObservation().name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},u=function(e,t){var a=Date.parse(e.endDate()),n=Date.parse(t.endDate());return a==n?0:isNaN(a)||a>n?-1:isNaN(n)||n>a?1:void 0},l=function(){};return l.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=ko.observable(t.settings.selectedPatient),t.groupArray=ko.observableArray(),t.blowUpObservations=ko.computed(function(){return r.needToRefreshObservations(),r.needToRefreshObservations()&&(r.needToRefreshObservations(!1),t.groupArray([])),!1}),t.dataObservations=ko.computed(function(){var e=t.selectedPatient().observations(),a=ko.utils.arrayFilter(e,function(e){return!e.isNew()&&!e.deleteFlag()});return a}).extend({throttle:50}),t.dataObservationGroups=ko.computed({read:function(){var e=t.dataObservations();return theseObservationGroups=i(e),ko.utils.arrayForEach(theseObservationGroups,function(e){var a=ko.utils.arrayFirst(t.groupArray(),function(t){return t.parentObservation()?t.parentObservation().name()===e.observations[0].name():!1});if(a)ko.utils.arrayForEach(e.observations,function(e){-1===a.observations.indexOf(e)&&a.observations.push(e)});else{var n=new o(e.observations);t.groupArray.push(n)}}),t.groupArray()},write:function(){t.groupArray([])}}).extend({throttle:50}),t.selectedPatient.subscribe(function(){t.dataObservationGroups(!1)}),t.computedObservationGroups=ko.computed(function(){var e=t.dataObservationGroups();return ko.utils.arrayForEach(e,function(e){e&&0===e.length&&t.dataObservationGroups.remove(e)}),e&&e.length>0?e.sort(c):[]}).extend({throttle:500}),t.removeObservation=function(e){e.deleteFlag(!0),r.saveDataEntry()},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1}},l.prototype.toggleExpand=function(e){function t(){e.isLoadingObs(!1),e.hasBeenExpanded(!0)}if(e.isOpen(!e.isOpen()),e.isOpen())if(e.hasBeenExpanded());else{e.isLoadingObs(!0);var n=e.parentObservation().observationId(),r=e.parentObservation().patientId();a.getEntityList(null,s().EntityType,s().ResourcePath+r+"/Observations/"+n+"/Historical",null,null,!0).then(t)}},l.prototype.attached=function(){},l});
define('viewmodels/patients/sections/demographics',["durandal/app","viewmodels/shell/shell","models/base","services/datacontext","services/formatter"],function(e,t,a,n,r){var i=function(){};return i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.editModalShowing=ko.observable(!1),i.modal=new a.modal("Edit Individual",i.selectedPatient,"templates/patient.html",i.editModalShowing),i.isOpen=ko.observable(!0),i.isEditing=ko.observable(!1),i.toggleEditing=function(){if(i.isEditing())i.editModalShowing(!1);else{t.currentModal(i.modal),i.editModalShowing(!0);var e=i.editModalShowing.subscribe(function(){i.isEditing(!1),e.dispose()})}i.isEditing(!i.isEditing()),i.isOpen(!0)},i.toggleFlagged=function(){var e=i.selectedPatient.flagged();e=!e,i.selectedPatient.flagged(e);var t=e?1:0;n.saveChangesToPatientProperty(i.selectedPatient,"flagged",t,[])},i.showFullSSN=function(){function e(e){if(e.SSN){var t=r.formatSeparators(e.SSN.replace(/\D/g,""),"XXX-XX-XXXX","-");alert("Full SSN: "+t)}}n.getFullSSN(i.selectedPatient.id()).then(e)},i.canViewFullSSN=ko.computed(function(){return!0})},i.prototype.attached=function(){},i});
define('viewmodels/patients/sections/dropdown.w.addnew',[],function(){var e=[],t=function(){};return t.prototype.cancelChanges=function(){var e=this;e.newCustomValue&&e.newCustomValue(""),e.selectedValue(null),e.searchQueryText&&e.searchQueryText(null),e.isEditModeOnly()||(e.isCreateNew(!1),e.isDropDownFocused(!0))},t.prototype.checkEscape=function(e,t){var a=this,n=t.which||t.keyCode;27===n&&a.cancelChanges()},t.prototype.getCustomValue=function(){var e=this;return e.newCustomValue?e.newCustomValue:e.selectedValue},t.prototype.activate=function(t){var a=this;a.selectionLabel=t.selectionLabel,a.optionsLabel=t.optionsLabel,a.placeholderText=t.placeholderText,a.selectedValue=t.selectedValue,a.optionTextProp=t.optionTextProp?t.optionTextProp:"Text",a.optionIdValueProp=t.optionIdValueProp?t.optionIdValueProp:null,a.AddNewOptionText=t.AddNewOptionText,a.isAddNewOption=t.isAddNewOption,a.isCreateNew=t.isCreateNew,a.isCreateNewEnabled=t.isCreateNewEnabled,a.isEnabled=t.isEnabled,a.selectOptions=t.selectOptions,a.newCustomValue=t.newCustomValue?t.newCustomValue:null,a.isSearch=!0,a.isEditModeOnly=t.isEditModeOnly?t.isEditModeOnly:ko.observable(!1),a.searchQueryText=ko.observable(),a.isFocused=ko.observable(),a.isDropDownFocused=ko.observable(),a.getSelectedValueText=function(){var e="";return e=a.selectedValue()&&a.selectedValue().hasOwnProperty(a.optionTextProp)?a.selectedValue()[a.optionTextProp]():a.selectedValue()};var n={};n[a.optionTextProp]=a.AddNewOptionText,n.Value=a.AddNewOptionText,n.id=-1,a.addNewOptionToSelection=function(){a.isAddNewOption&&a.selectOptions&&-1===ko.utils.arrayIndexOf(a.selectOptions(),n)&&a.isCreateNewEnabled()&&a.selectOptions.push(n)};var r=t.selectOptions.subscribe(function(){a.selectOptions()&&a.addNewOptionToSelection()});a.selectOptions().length>0&&a.addNewOptionToSelection(),e.push(r);var i=a.selectedValue.subscribe(function(e){if(a.isCreateNewEnabled()){var t="";if(t=e&&e.hasOwnProperty(a.optionTextProp)?e[a.optionTextProp]():e,console.log(a.selectionLabel+" changed to: "+t),t===a.AddNewOptionText&&a.isCreateNew){a.isCreateNew(!0);var n=a.searchQueryText?a.searchQueryText():"";setTimeout(function(){a.selectedValue&&!a.selectedValue.hasOwnProperty(a.optionTextProp)?a.selectedValue(n):a.selectedValue(null)},5),a.newCustomValue&&a.newCustomValue(n),a.isFocused(!0)}}});e.push(i)},t.prototype.detached=function(){ko.utils.arrayForEach(e,function(e){e.dispose()})},t});
define('viewmodels/patients/sections/focus.areas',["models/base","services/datacontext","services/session","viewmodels/shell/shell","viewmodels/patients/data/index"],function(e,t,a,n,r){function i(e){var a=this;a.activeDataType=ko.observable(),a.selectedPatient=ko.observable(e),a.showDropdown=!0,a.showActions=!1,a.activationData={selectedPatient:a.selectedPatient,activeDataType:a.activeDataType,showDropdown:a.showDropdown,showActions:a.showActions},a.canSave=ko.computed(function(){var e=!0;t.observationsSaving();var n=a.selectedPatient().observations();return 0===n.length&&(e=!1),ko.utils.arrayForEach(n,function(t){t.type()&&"problems"===t.type().name().toLowerCase()&&!t.isValid()&&(e=!1)}),t.observationsSaving()&&(e=!1),e})}var o=function(){};return o.prototype.alphabeticalSort=function(e,t){return e.name().toLowerCase()==t.name().toLowerCase()?e.name().toLowerCase()>t.name().toLowerCase()?1:-1:e.name().toLowerCase()>t.name().toLowerCase()?1:-1},o.prototype.activate=function(t){var a=this;a.selectedPatient=t.selectedPatient,a.patientsObservations=a.selectedPatient.observations,a.problems=ko.computed(function(){var e=a.patientsObservations(),t=ko.utils.arrayFilter(e,function(e){var t=!1;return e.type()&&"problems"===e.type().name().toLowerCase()&&(t=e.displayId()&&e.state()&&e.displayId()>0&&"active"===e.state().name().toLowerCase()&&!e.deleteFlag()?!0:!1),t});return t}).extend({throttle:15}),a.isExpanded=ko.observable(!1),a.primaryProblems=ko.computed(function(){var e=[],t=a.problems().sort(a.alphabeticalSort),n=!a.isExpanded();return ko.utils.arrayForEach(t,function(t){"1"===t.display().id()&&(e.length<5||!n)&&e.push(t)}),e}).extend({throttle:15}),a.secondaryProblems=ko.computed(function(){var e=[],t=a.problems().sort(a.alphabeticalSort),n=!a.isExpanded();return ko.utils.arrayForEach(t,function(t){"2"===t.display().id()&&(e.length<5||!n)&&e.push(t)}),e}).extend({throttle:15}),a.focusProblemModalShowing=ko.observable(!1),a.saveProblemObservations=r.saveDataEntry,a.cancelProblemObservations=function(){var e=ko.utils.arrayFilter(a.selectedPatient.observations(),function(e){return e.type()&&"problems"===e.type().name().toLowerCase()}),t=[];for(ko.utils.arrayForEach(e,function(e){e.isNew()?(e.deleteFlag(!0),e.entityAspect.acceptChanges(),t.push(e)):e.entityAspect.rejectChanges()});t.length>0;){var n=t[0];n.entityAspect.setDeleted(),n.entityAspect.acceptChanges(),t.splice(0,1)}},a.modalEntity=ko.observable(new i(a.selectedPatient)),a.modal=new e.modal("Focus Problems",a.modalEntity,"viewmodels/templates/focusproblems",a.focusProblemModalShowing,a.saveProblemObservations,a.cancelProblemObservations),a.isOpen=ko.observable(!0),a.isFullScreen=ko.observable(!1),a.toggleEditing=function(){n.currentModal(a.modal),a.focusProblemModalShowing(!0),a.isOpen(!0)}},o.prototype.attached=function(){},o});
define('viewmodels/patients/sections/goal.details',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,a,n,r,i){function o(e){a.saveBarrier(e)}function s(e){e.entityAspect.rejectChanges()}function c(e){r.getGoalDetails(e,!0)}function u(t,a,n,r,o){var s=new e.modal(t,a,n,d,r,o);d(!0),i.currentModal(s)}function l(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var d=ko.observable(!0),p=function(){};return p.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.goal=t.settings.goal,t.selectedPatient=r.selectedPatient,t.computedGoal=ko.computed(function(){return t.goal}).extend({throttle:60}),t.edit=function(){r.editGoal(t.goal,"Edit Goal")},t.delete=function(){var e=confirm("You are about to delete a goal.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(a.deleteGoal(t.goal),void 0)},t.addBarrier=function(e){function a(e){t.editBarrier(e,"Add Barrier")}t.addEntity("Barrier",e).then(a)},t.editBarrier=function(e,t){var a=e.goal(),n=ko.observable(new l(e,"name")),r=function(){o(e)},i=function(){s(e),c(a)};t=t?t:"Edit Barrier",u(t,n,"viewmodels/templates/barrier.edit",r,i)}},p.prototype.addEntity=function(e,t,n,r){function i(t){var i=t.httpResponse.data.Id;if(i){var o={};o.id=i,o.patientGoalId=c,o.statusId=1,n&&(o.startDate=n),r&&(o.assignedToId=r);var s=a.createEntity(e,o);return s}var u=t.results[0];return u.startDate(new Date),u.statusId(1),u.patientGoalId(c),u}var o=this,s=o.selectedPatient().id(),c=t.id();return a.initializeEntity(null,e,s,c).then(i)},p});
define('viewmodels/patients/sections/goals',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell","durandal/activator"],function(e,t,a,n,r,i){function o(t,a,n,r,o){var s=new e.modal(t,a,n,p,r,o);p(!0),i.currentModal(s)}function s(e){a.saveIntervention(e)}function c(e){a.saveTask(e)}function u(e){e.entityAspect.rejectChanges()}function l(e){r.getGoalDetails(e)}function d(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var p=ko.observable(!0),m=function(){var e=this;e.token={},e.selectedPatientChanged=!1};return m.prototype.deactivate=function(){var e=this;e.token.dispose(),e.computedGoals.dispose()},m.prototype.activate=function(e){var t=this;t.goalsSortTwo=function(e,t){var a=e.status().order(),n=t.status().order(),r=e.name().toLowerCase(),i=t.name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},t.settings=e,t.selectedPatient=r.selectedPatient,t.token=t.selectedPatient.subscribe(function(){t.selectedPatientChanged=!0,t.deactivate()}),t.statusIds=t.settings.statusIds,t.emptyMessage=t.settings.emptyMessage?t.settings.emptyMessage:"No goals defined for the individual.",t.sortOverride=t.settings.sortOverride?t.settings.sortOverride:t.goalsSortTwo,t.computedGoals=ko.computed({read:function(){var e=ko.utils.arrayFilter(t.selectedPatient().goals(),function(e){return!e.isNew()&&-1!==t.statusIds.indexOf(e.statusId())});return ko.utils.arrayForEach(e,function(e){e.isExpanded||(e.isExpanded=ko.observable(!1),e.isOpen=ko.observable(!1)),e.isNew()||l(e)}),e.length>0&&(e=e.sort(t.sortOverride)),e},disposeWhen:function(){return t.selectedPatientChanged}}).extend({throttle:50}),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.addTask=function(e){function a(e){t.editTask(e,"Add Task")}var n=new Date(moment().format("MM/DD/YYYY"));t.addEntity("Task",e,n).then(a)},t.addIntervention=function(e){function a(e){t.editIntervention(e,"Add Intervention")}var r=new Date(moment().format("MM/DD/YYYY"));t.addEntity("Intervention",e,r,n.currentUser().userId()).then(a)},t.editIntervention=function(e,t){var a=e.goal(),n=ko.observable(new d(e,"description")),r=function(){s(e)},i=function(){u(e),l(a)};t=t?t:"Edit Intervention",o(t,n,"viewmodels/templates/intervention.edit",r,i)},t.editTask=function(e,t){var n=e.goal(),r=ko.observable(new d(e,"description")),i=function(){c(e)},s=function(){a.cancelEntityChanges(e),l(n)};t=t?t:"Edit Task",o(t,r,"viewmodels/templates/task.edit",i,s)}},m.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},m.prototype.addEntity=function(e,t,n,r){function i(t){var i=t.httpResponse.data.Id;if(i){var o={};o.id=i,o.patientGoalId=c,o.statusId=1,n&&(o.startDate=n),r&&(o.assignedToId=r);var s=a.createEntity(e,o);return s}var u=t.results[0];return u.startDate(new Date(moment().format("MM/DD/YYYY"))),u.statusId(1),u.patientGoalId(c),u}var o=this,s=o.selectedPatient().id(),c=t.id();return a.initializeEntity(null,e,s,c).then(i)},m});
define('viewmodels/patients/sections/intervention.details',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,a,n,r,i){function o(t,a,n,r,o){var s=new e.modal(t,a,n,p,r,o);p(!0),i.currentModal(s)}function s(e){a.saveIntervention(e)}function c(e){e.entityAspect.rejectChanges()}function u(e){r.getGoalDetails(e,!0)}function l(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var d=function(){},p=ko.observable(!0);return d.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.intervention=t.settings.intervention,t.isExpanded=t.intervention.goal().isExpanded,t.editIntervention=function(e){u(e.goal());var t=ko.observable(new l(e,"description")),a=function(){s(e)},n=function(){c(e),u(e.goal())};o("Edit Intervention",t,"viewmodels/templates/intervention.edit",a,n)},t.deleteIntervention=function(e){function t(){e&&e.goal()&&e.goal().interventions.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var n=confirm("You are about to delete an intervention.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(e.goal(),e.entityAspect.rejectChanges(),e.deleteFlag(!0),a.saveIntervention(e).then(t),void 0)}},d});
define('viewmodels/patients/sections/medication.edit',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){function r(e,t){var a=this;a.Text=e,a.Value=t?t:e}var i=[],o=" (New)",s={NoMedSelected:"NoMedSelected",MedSelected:"MedSelected",AddNewMed:"AddNewMed",AddNewMedValues:"AddNewMedValues"},c=new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Search/Meds/ProprietaryNames","PatientMedication"),u=function(){var e=this;e.dosageForms=ko.observableArray(),e.strengths=ko.observableArray(),e.units=ko.observableArray(),e.routes=ko.observableArray(),e.frequency=ko.observableArray(),e.checkForDropdownValues=function(t){0===e.dosageForms.peek().length&&t&&t.form.peek()&&e.dosageForms([new r(t.form.peek())]),0===e.strengths.peek().length&&t&&t.strength.peek()&&e.strengths([new r(t.strength.peek())]),0===e.routes.peek().length&&t&&t.route.peek()&&e.routes([new r(t.route.peek())])}};return u.prototype.freqWhens=ko.computed(a.enums.freqWhens),u.prototype.sources=ko.computed(a.enums.allergySources),u.prototype.types=ko.computed(a.enums.medSuppTypes),u.prototype.categories=ko.computed(a.enums.medicationCategories),u.prototype.statuses=ko.computed(a.enums.medicationStatuses),u.prototype.removeMedication=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},u.prototype.getFrequencyOptions=function(e,t){return a.getPatientFrequencies(e,t().id())},u.prototype.activate=function(e){var r=this;r.settings=e,r.initialized=!1,r.lastMedName="",r.selectedPatient=r.settings.selectedPatient,r.medication=r.settings.medication,r.showing=ko.computed({read:function(){return!0}}),r.getFrequencyOptions(r.frequency,r.selectedPatient),r.isCreateNewFrequencyEnabled=ko.observable(!0),r.newPatientMedication=ko.computed({read:function(){if(r.medication&&r.medication())return r.checkForDropdownValues(r.medication()),r.medication();var e=r.selectedPatient().medications(),t=ko.utils.arrayFirst(e,function(e){return!e.deleteFlag.peek()&&e.isNew.peek()});return r.checkForDropdownValues(t),t}}).extend({throttle:50}),r.trimmedMedication=ko.computed({read:function(){var e=r.newPatientMedication;return e()?e().name():""}}).extend({throttle:75}),r.trimmedForm=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().form()?e().form():""}}).extend({throttle:75}),r.trimmedStrength=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().strength()?e().strength():""}}).extend({throttle:75}),r.trimmedRoute=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().route()?e().route():""}}).extend({throttle:75}),r.resultsMessage=ko.observable(""),r.medication&&!r.medication()&&r.initializeMedSearch(),r.isDuplicate=ko.observable(!1),r.isAddingNewRouteValue=ko.observable(!1),r.isAddingNewFormValue=ko.observable(!1),r.isAddingNewStrengthValue=ko.observable(!1),r.isAddingNewFrequencyValue=ko.observable(!1),r.isCreateNewEnabled=ko.observable(!1),r.isDropdownEnabled=ko.observable(!1),r.isNewMedicationName=ko.observable(!1),r.newPatientMedication()&&r.newPatientMedication().name()&&r.newPatientMedication().canSave()?(r.lastMedName=r.newPatientMedication().name(),r.screenMode=ko.observable(s.MedSelected)):(r.lastMedName="",r.screenMode=ko.observable(s.NoMedSelected)),r.canAdd=ko.computed({read:function(){var e=!1,t=a.medicationSaving(),n=r.trimmedMedication();r.selectedPatient().medications();var i=r.screenMode,o=r.isDuplicate();return n&&(e=!0),e=i&&i()==s.NoMedSelected?!1:!0,t&&(e=!1),r.newPatientMedication.peek()&&(o&&(e=!1),r.newPatientMedication().canSave(e)),e}}).extend({throttle:200}),r.medicationBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+c.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&Term="+searchQuery},ajax:{beforeSend:function(e){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",n.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(r.resultsMessage(""),r.resultsMessage(e.Message)):r.resultsMessage(""),r.medicationBloodhound.clear();var t=r.trimmedMedication().trim();r.newPatientMedication().name(r.ltrim(r.newPatientMedication().name())),ko.utils.arrayForEach(e.ProprietaryNames,function(e){e.DisplayName=e.Text;var t=ko.utils.arrayFirst(r.selectedPatient().medications(),function(t){return t.name().toLowerCase().trim()===e.Text.toLowerCase().trim()&&1==t.statusId()});t&&t!==r.newPatientMedication()&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)});var a={Id:-1,Text:t,DisplayName:t+o,Value:t},n=ko.utils.arrayFirst(e.ProprietaryNames,function(e){return e.Text.toLowerCase().trim()===t.toLowerCase()});return n||e.ProprietaryNames.push(a),e.ProprietaryNames},rateLimitWait:500,cache:!1}}),r.ltrim=function(e){return e?e.replace(/^\s+/,""):e},r.addNewOptionText="-Add New-",r.resetDropdowns=function(){r.newPatientMedication&&r.newPatientMedication()&&(r.newPatientMedication().strength(""),r.newPatientMedication().form(""),r.newPatientMedication().route(""),r.newPatientMedication().familyId(""),r.newPatientMedication().customFrequency(""),r.newPatientMedication().frequency(null),r.isAddingNewFrequencyValue(!1)),r.screenMode()!==s.AddNewMed&&(r.isAddingNewRouteValue(!1),r.isAddingNewStrengthValue(!1),r.isAddingNewFormValue(!1),r.screenMode()===s.AddNewMedValues&&(r.screenMode(s.MedSelected),r.newPatientMedication().isCreateNewMedication(!1)))},r.clearDropdowns=function(){r.resetDropdowns(),r.dosageForms([]),r.strengths([]),r.routes([])},r.ignoreMedicationNameChange=function(e,t){var a=!1;return null===e||""===e||null===t?!0:(e&&(t===e+o&&(a=!0),t===e.toUpperCase()&&(a=!0)),a)},r.medicationNameWatcher=ko.computed({read:function(){var e=r.trimmedMedication(),t=r.screenMode;return t&&t()!==s.NoMedSelected&&r.initialized?r.ignoreMedicationNameChange(r.lastMedName,e)?!1:(console.log("medication name changed: from:"+r.lastMedName+" to:"+(null===e?"null":e)),r.lastMedName=e,r.screenMode(s.NoMedSelected),r.clearDropdowns(),r.isCreateNewEnabled(!1),r.isDropdownEnabled(!1),!1):void 0}}).extend({throttle:200}),r.isValidCustomOptionValue=function(e){var t=!1;return e&&e.trim().length>0&&e!==r.addNewOptionText&&(t=!0),t},r.evaluateIsCreateNewMedication=function(e,t,a,n,i,o,c,u){var d=null;return e===s.AddNewMedValues&&(console.log(" evaluating isCreateNewMedication in AddNewMedValues mode."),d=!1,a===!0&&r.isValidCustomOptionValue(u)&&(d=!0),n===!0&&r.isValidCustomOptionValue(c)&&(d=!0),i===!0&&r.isValidCustomOptionValue(o)&&(d=!0),d===!0?(t.isCreateNewMedication(!0),console.log(" isCreateNewMedication = true")):(t.isCreateNewMedication(!1),console.log(" isCreateNewMedication = false"))),d},r.medicationParameters=ko.computed(function(){var e=r.newPatientMedication,t=r.trimmedForm(),a=r.trimmedStrength(),n=r.trimmedRoute(),i=r.screenMode,o=r.isAddingNewRouteValue(),s=r.isAddingNewStrengthValue(),c=r.isAddingNewFormValue();e&&i&&r.initialized&&r.evaluateIsCreateNewMedication(i(),e(),o,s,c,t,a,n)}).extend({throttle:75}),r.addingNewValue=ko.computed({read:function(){var e=r.screenMode(),t=r.isDuplicate(),a=r.isAddingNewRouteValue(),n=r.isAddingNewStrengthValue(),i=r.isAddingNewFormValue();e===s.MedSelected&&t!==!0&&r.initialized&&(a===!0&&r.screenMode(s.AddNewMedValues),n===!0&&r.screenMode(s.AddNewMedValues),i===!0&&r.screenMode(s.AddNewMedValues))}}).extend({throttle:75}),r.initialMedicationValues=ko.observable({form:r.trimmedForm(),strength:r.trimmedStrength(),route:r.trimmedRoute()}),r.recalculateNDCWatcher=ko.computed(function(){var e=r.trimmedStrength(),t=r.trimmedForm(),a=r.trimmedRoute(),n=r.canAdd();return n&&r.initialized&&!r.newPatientMedication().isNew()?e!==r.initialMedicationValues().strength||t!==r.initialMedicationValues().form||a!==r.initialMedicationValues().route?(r.newPatientMedication().recalculateNDC(!0),console.log("recalculateNDC set to true"),!0):(r.newPatientMedication().recalculateNDC(!1),console.log("recalculateNDC set to false"),!1):!1}).extend({throttle:200}),r.medicationBloodhound.initialize(),r.populateDropDowns=function(){function e(e){r.isCreateNewEnabled(!0),r.isDropdownEnabled(!0),r.dosageForms(e.DosageForms),r.strengths(e.Strengths),r.routes(e.Routes),r.units(e.Units),r.initialized=!0}var t=r.newPatientMedication(),n=t.name(),i="",o="",s="";t&&n&&a.getRemoteMedicationFields(t.name(),i,o,s).then(e)},r.initialized=!0,r.newPatientMedication.peek()&&!r.newPatientMedication().isNew()&&(r.isDropdownEnabled(!0),r.isCreateNewEnabled(!0),r.populateDropDowns(),r.screenMode(s.MedSelected),r.newPatientMedication().isCreateNewMedication(!1),r.newPatientMedication().recalculateNDC(!1),r.lastMedName=r.newPatientMedication().name(),r.initialized=!1),r.overrideSelected=function(e,t){var a=$(e.target);a.change(),r.newPatientMedication().isDuplicate(!1),r.isDuplicate(!1),r.isNewMedicationName(!1),r.newPatientMedication().isCreateNewMedication(!1),r.newPatientMedication().recalculateNDC(!0),r.lastMedName=t.Text.toUpperCase(),t.Id&&-1==t.Id?(r.isNewMedicationName(!0),a.typeahead("val",t.Text.toUpperCase()),r.newPatientMedication().isCreateNewMedication(!0),console.log("new medication selected: isCreateNewMedication = true"),r.screenMode(s.AddNewMed),r.isCreateNewEnabled(!0),r.isDropdownEnabled(!0),r.isAddingNewRouteValue(!0),r.isAddingNewStrengthValue(!0),r.isAddingNewFormValue(!0)):(r.screenMode(s.MedSelected),t.isDuplicate?(r.newPatientMedication().isDuplicate(!0),r.isDuplicate(!0)):r.populateDropDowns())}},u.prototype.initializeMedSearch=function(e){var t=this,n=ko.utils.arrayFirst(t.selectedPatient().medications(),function(e){return e.isNew()});n||a.initializeNewPatientMedication(t.selectedPatient(),e)},u.prototype.detached=function(){var e=this;u.prototype.freqWhens.dispose(),u.prototype.sources.dispose(),u.prototype.types.dispose(),u.prototype.categories.dispose(),u.prototype.statuses.dispose(),e.showing.dispose(),e.newPatientMedication.dispose(),e.trimmedMedication.dispose(),e.trimmedForm.dispose(),e.trimmedRoute.dispose(),e.trimmedStrength.dispose(),e.canAdd.dispose(),e.medicationNameWatcher.dispose(),e.medicationParameters.dispose(),e.addingNewValue.dispose(),e.recalculateNDCWatcher.dispose(),ko.utils.arrayForEach(i,function(e){e.dispose()})},u});
define('viewmodels/patients/sections/medications',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/careplan/index"],function(e,t,a,n,r){var i=function(){};return i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=n.currentUser();return e&&r.selectedPatient()?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient/"+r.selectedPatient().id(),"Program"):""}),i.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.programs=t.selectedPatient.programs,t.passedInSort=t.settings.sortOverride,t.elementStateIds=t.settings.elementStateIds,t.selectedSort=t.passedInSort?t.passedInSort:t.alphabeticalOrderSort,t.computedPrograms=ko.computed(function(){var e=[];return r.selectedPatient()&&(e=ko.utils.arrayFilter(r.selectedPatient().programs(),function(e){return-1!==t.elementStateIds.indexOf(e.elementState())})),e}),t.activeAction=t.settings.activeAction,t.activeProgram=t.settings.activeProgram,t.activeModule=t.settings.activeModule,t.setActiveAction=function(e){e.enabled()===!0&&(t.activeProgram(null),t.activeModule(null),t.activeAction(e),e.historicalAction&&e.historicalAction()&&r.getStepsForAction(e.historicalAction()))},t.setActiveProgram=function(e){t.activeProgram()!==e&&(t.activeAction(null),t.activeModule(null),t.activeProgram(e),0===t.activeProgram().modules().length&&a.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+t.activeProgram().id(),!0,null).then(function(){patientsListFlyoutOpen(!1)}))},t.setActiveModule=function(e){t.activeModule()!==e&&(t.activeAction(null),t.activeProgram(null),t.activeModule(e))},t.toggleOpen=function(e){var n=e;n.isOpen()?n.isOpen(!1):(n.isOpen(!0),n.isOpen()&&0===n.modules().length&&a.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+n.id(),!0,null))},t.isFullScreen=ko.observable(!1),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.toggleAllExpanded=function(e){e.allModulesOpen()?ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!1)}):ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!0)})}},i.prototype.attached=function(){},i});
define('viewmodels/patients/sections/medications.search',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Search/Meds/ProprietaryNames","PatientMedication"),i=function(){var e=this;e.medications=ko.observableArray(),e.newMedication=ko.observable()};return i.prototype.types=ko.computed(a.enums.medSuppTypes),i.prototype.categories=ko.computed(a.enums.medicationCategories),i.prototype.statuses=ko.computed(a.enums.medicationStatuses),i.prototype.addNewMedication=function(){var e=this;a.medicationSaving(!0);var t=ko.observable(),n=ko.utils.arrayFirst(e.medications(),function(t){return t.Text.toLowerCase()===e.trimmedMedication().toLowerCase()});n&&(t(a.initializeNewPatientMedication(e.selectedPatient())),t.name(n.Name))},i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.trimmedMedication=ko.computed(function(){var e=i.newMedication();return e?e.name():""}),i.resultsMessage=ko.observable(""),i.initializeMedSearch(i.newMedication),i.canAdd=ko.computed(function(){var e=!1,t=a.medicationSaving(),n=i.trimmedMedication(),r=i.selectedPatient().medications(),o=ko.utils.arrayFirst(r,function(e){return e.isNew()});if(n){var s=ko.utils.arrayFirst(i.medications(),function(e){return e.Text.toLowerCase().trim()===n.toLowerCase()});s||(e="(New)"===n.substr(n.length-5)),s&&s.isDuplicate!==!0&&(e=!0)}return(t||o)&&(e=!1),e}),i.medicationBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+r.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&Term="+searchQuery},ajax:{beforeSend:function(e){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",n.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(i.resultsMessage(""),i.resultsMessage(e.Message)):i.resultsMessage(""),i.medicationBloodhound.clear();var t=i.trimmedMedication(),a=ko.utils.arrayFirst(i.selectedPatient().medications(),function(e){return e.name().toLowerCase().trim()===t.toLowerCase()});ko.utils.arrayForEach(e.ProprietaryNames,function(e){e.DisplayName=e.Text;var t=ko.utils.arrayFirst(i.selectedPatient().medications(),function(t){return t.name().toLowerCase().trim()===e.Text.toLowerCase().trim()});(t||a&&a.name().toLowerCase().trim()===e.Text.toLowerCase().trim())&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)}),i.medications(e.ProprietaryNames);var n={Id:-1,Text:t,DisplayName:t+" (New)"},r=ko.utils.arrayFirst(e.ProprietaryNames,function(e){return e.Text.toLowerCase().trim()===t.toLowerCase()});return r||a||e.ProprietaryNames.push(n),e.ProprietaryNames},rateLimitWait:500,cache:!1}}),i.medicationBloodhound.initialize()},i.prototype.initializeMedSearch=function(){var e=this,t=ko.utils.arrayFirst(e.selectedPatient().medications(),function(e){return e.isNew()});t?e.newMedication(t):e.newMedication(a.initializeNewPatientMedication(e.selectedPatient()))},i});
define('viewmodels/patients/sections/notes',["models/base","config.services","services/datacontext","services/session"],function(e,t,a){var n=function(){};return n.prototype.activate=function(e){var t=this;t.settings=e,t.group=ko.observable(t.settings.group),t.activeNote=t.settings.activeNote,t.setActiveNote=function(e){t.activeNote(e)},t.deleteNote=function(e){var n="2"===e.typeId()?"touchpoint":"note",r=confirm("You are about to delete a "+n+".  Press OK to continue, or cancel to return without deleting.");return r!==!0?!1:(t.activeNote()===e&&t.activeNote(null),a.deleteNote(e),void 0)},t.isOpen=ko.observable(!0)},n.prototype.attached=function(){},n});
define('viewmodels/patients/sections/problems.list',["services/datacontext"],function(e){var t=function(){};return t.prototype.newThenAlphabeticalSort=function(e,t){var a=e.isNew()?0:1,n=t.isNew()?0:1,r=e.name().toLowerCase(),i=t.name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},t.prototype.observationDisplays=ko.computed(e.enums.observationDisplays),t.prototype.deleteFocusProblem=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.observationStates=ko.computed(function(){var t=ko.utils.arrayFirst(e.enums.observationTypes(),function(e){return"Problems"===e.name()}),a=ko.utils.arrayFilter(e.enums.observationStates(),function(e){var a=!1;return ko.utils.arrayForEach(e.allowedTypeIds(),function(e){e.id()===t.id()&&(a=!0)}),a});return a}),t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.computedProblemObservations=ko.computed(function(){var e=[],a=t.selectedPatient().observations();return e=ko.utils.arrayFilter(a,function(e){return e.type()?"Problems"===e.type().name()&&!e.deleteFlag()&&(e.entityAspect.entityState.isModified()||"active"===e.state().name().toLowerCase()):!1}).sort(t.newThenAlphabeticalSort)}).extend({throttle:50})},t.prototype.attached=function(){},t});
define('viewmodels/patients/sections/programs',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/careplan/index"],function(e,t,a,n,r){var i=function(){var e=this;e.token={},e.selectedPatientChanged=!1,e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return i.prototype.deactivate=function(){var e=this;e.token.dispose(),e.computedPrograms.dispose()},i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=n.currentUser();return e&&r.selectedPatient()?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient/"+r.selectedPatient().id(),"Program"):""}),i.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.token=r.selectedPatient.subscribe(function(){t.selectedPatientChanged=!0,t.deactivate()}),t.programs=t.selectedPatient.programs,t.passedInSort=t.settings.sortOverride,t.elementStateIds=t.settings.elementStateIds,t.selectedSort=t.passedInSort?t.passedInSort:t.alphabeticalOrderSort,t.computedPrograms=ko.computed({read:function(){var e=[];r.selectedPatient()&&(e=ko.utils.arrayFilter(r.selectedPatient().programs(),function(e){return-1!==t.elementStateIds.indexOf(e.elementState())}));var a=e.sort(t.selectedSort);return a},disposeWhen:function(){return t.selectedPatientChanged}}).extend({throttle:25}),t.activeAction=t.settings.activeAction,t.activeProgram=t.settings.activeProgram,t.activeModule=t.settings.activeModule,t.setActiveAction=function(e){e.enabled()===!0&&(t.activeProgram(null),t.activeModule(null),t.activeAction(e),e.historicalAction&&e.historicalAction()&&r.getStepsForAction(e.historicalAction()))},t.setActiveProgram=function(e){t.activeProgram()!==e&&(t.activeAction(null),t.activeModule(null),t.activeProgram(e),0===t.activeProgram().modules().length&&a.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+t.activeProgram().id(),!0,null).then(function(){patientsListFlyoutOpen(!1)}))},t.setActiveModule=function(e){t.activeModule()!==e&&(t.activeAction(null),t.activeProgram(null),t.activeModule(e))},t.toggleOpen=function(e){var n=e;n.isOpen()?n.isOpen(!1):(n.isOpen(!0),n.isOpen()&&0===n.modules().length&&a.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+n.id(),!0,null).then(function(){}))},t.isFullScreen=ko.observable(!1),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.toggleAllExpanded=function(e){e.allModulesOpen()?ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!1)}):ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!0)})}},i.prototype.attached=function(){},i});
define('viewmodels/patients/sections/recent.individuals',["services/session","config.services","services/datacontext","viewmodels/patients/index"],function(e,t,a,n){function r(){}var i=n.choosePatient,o=ko.computed(n.selectedPatient),s=ko.observableArray(),c={activate:r,choosePatient:i,recentIndividualsList:s,selectedPatient:o,currentUser:e.currentUser};return c});
define('viewmodels/patients/sections/system.ids',["services/datacontext","services/session","models/base","viewmodels/shell/shell"],function(e,t,a,n){function r(e){var t=this;t.selectedPatient=ko.observable(e),t.activationData={selectedPatient:t.selectedPatient,activeDataType:t.activeDataType,showDropdown:t.showDropdown,showActions:t.showActions},t.canSave=ko.computed(function(){var e=ko.utils.arrayFirst(t.selectedPatient().patientSystems(),function(e){return e.systemId()&&("Modified"===e.entityAspect.entityState.name||"Added"===e.entityAspect.entityState.name)});return!!e}).extend({throttle:1}),t.isOpen=ko.observable(!1)}var i=function(){};return i.prototype.alphabeticalSort=function(e,t){return e.name().toLowerCase()==t.name().toLowerCase()?e.name().toLowerCase()>t.name().toLowerCase()?1:-1:e.name().toLowerCase()>t.name().toLowerCase()?1:-1},i.prototype.activate=function(t){var i=this;i.selectedPatient=t.selectedPatient,i.patientSystems=i.selectedPatient.patientSystems,i.computedPatientSystems=ko.computed(function(){return i.patientSystems()}).extend({throttle:15}),i.isOpen=ko.observable(!1),i.patientSystemsModalShowing=ko.observable(!1),i.savePatientSystems=function(){e.savePatientSystems(i.computedPatientSystems())},i.cancelPatientSystems=function(){ko.utils.arrayForEach(i.computedPatientSystems(),function(e){e.entityAspect.rejectChanges()})},i.modalEntity=ko.observable(new r(i.selectedPatient)),i.modal=new a.modal("Individual ID",i.modalEntity,"viewmodels/templates/patient.systems",i.patientSystemsModalShowing,i.savePatientSystems,i.cancelPatientSystems),i.toggleEditing=function(){n.currentModal(i.modal),i.patientSystemsModalShowing(!0),i.isOpen(!0)}},i.prototype.attached=function(){},i});
define('viewmodels/patients/sections/task.details',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,a,n,r,i){function o(t,a,n,r,o){var s=new e.modal(t,a,n,p,r,o);p(!0),i.currentModal(s)}function s(e){a.saveTask(e)}function c(e){e.entityAspect.rejectChanges()}function u(e){r.getGoalDetails(e,!0)}function d(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var l=function(){},p=ko.observable(!0);return l.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.task=t.settings.task,t.isExpanded=t.task.goal().isExpanded,t.editTask=function(e){u(e.goal());var t=ko.observable(new d(e,"description")),a=function(){s(e)},n=function(){c(e),u(e.goal())};o("Edit Task",t,"viewmodels/templates/task.edit",a,n)},t.deleteTask=function(e){function t(){e&&e.goal()&&e.goal().tasks.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var n=confirm("You are about to delete a task.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(e.goal(),e.entityAspect.rejectChanges(),e.deleteFlag(!0),a.saveTask(e).then(t),void 0)}},l});
define('viewmodels/patients/tabs/action.details',["services/datacontext","viewmodels/shell/shell","models/base","services/dataservices/programsservice"],function(e,t,a){function n(t){var a=this;a.action=ko.observable(),a.canSaveObservable=ko.observable(!e.programsSaving),a.canSave=ko.computed({read:function(){return!e.programsSaving()&&a.canSaveObservable()},write:function(e){a.canSaveObservable(e)}}),a.activationData={action:a.action,canSave:a.canSave,showing:t}}ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var a=t.length>0;e().showing(a)})};var r=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1},i=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new n(e.modalShowing))};return i.prototype.activate=function(n){var i=this;i.settings=n,i.tab=i.settings.tab,i.activeAction=i.settings.activeAction,i.modalEntity().action(i.activeAction),i.saveOverride=function(){function t(){i.activeAction.elementState(r)}var a=i.activeAction.module().programId(),n=i.activeAction.module().program().patientId(),r=i.activeAction.elementState();i.activeAction.entityAspect.acceptChanges(),e.savePlanElemAttr(i.activeAction,a,n).then(t)},i.cancelOverride=function(){var t=i.activeAction.elementState();e.cancelEntityChanges(i.modalEntity().action()),i.activeAction.elementState(t)},i.availableHistoricalActions=n.availableHistoricalActions,i.selectedHistoricalAction=n.selectedHistoricalAction,i.modal=new a.modal("Individual Attributes",i.modalEntity,"viewmodels/templates/action.edit",i.modalShowing,i.saveOverride,i.cancelOverride),i.descriptionSectionOpen=ko.observable(!1),i.individualAttributesSectionOpen=ko.observable(!0),i.attributesSectionOpen=ko.observable(!1),i.objectivesSectionOpen=ko.observable(!1),i.shouldBeShowing=i.activeAction&&i.activeAction.objectives()?i.activeAction.objectives().length>0:!1,i.computedObjectives=ko.computed(function(){var e=[];if(i.settings.activeAction&&i.settings.activeAction.objectives())var e=i.settings.activeAction.objectives().sort(r);return e}).extend({isShowing:i.shouldBeShowing}),i.historicalComputedObjectives=ko.computed(function(){var e=[];if(i.settings.activeAction&&i.settings.activeAction.objectives())var e=i.settings.activeAction.objectives().sort(r);return e}).extend({isShowing:i.shouldBeShowing}),i.toggleModalShowing=function(){t.currentModal(i.modal),i.modalShowing(!i.modalShowing())},i.canEdit=ko.computed(function(){var e=i.activeAction&&"Completed"!==i.activeAction.elementStateModel().name();return e})},i});
define('viewmodels/patients/tabs/action.steps',["viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/careplan/index","models/base","services/datacontext"],function(e,t,a,n,r){function i(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=t.selectedPatient,e.showDropdown=!0,e.showActions=!1,e.activationData={selectedPatient:e.selectedPatient,activeDataType:e.activeDataType,showDropdown:e.showDropdown,showActions:e.showActions},e.canSave=ko.observable(!0)}var o=function(){};return o.prototype.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},o.prototype.activate=function(a){var o=this;o.settings=a,o.tab=o.settings.tab,o.activeAction=o.settings.activeAction,o.availableHistoricalActions=a.availableHistoricalActions,o.selectedHistoricalAction=a.selectedHistoricalAction,o.modalShowing=ko.observable(!1),o.programsSaving=ko.computed(r.programsSaving),o.modalEntity=ko.observable(new i),o.saveOverride=function(){o.modalEntity().activeDataType(null),t.saveAllData()},o.cancelOverride=function(){o.modalEntity().activeDataType(null),t.cancelDataEntry()},o.modal=new n.modal("Data Entry",o.modalEntity,"viewmodels/templates/clinical.dataentry",o.modalShowing,o.saveOverride,o.cancelOverride),o.toggleModalShowing=function(){e.currentModal(o.modal),o.modalShowing(!o.modalShowing())}},o});
define('viewmodels/patients/tabs/module.objectives',[],function(){var e=function(){};ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var a=t.length>0;e().showing(a)})};var t=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1};return e.prototype.activate=function(e){var a=this;a.settings=e,a.tab=a.settings.tab,a.activeProgram=a.settings.activeProgram,a.shouldBeShowing=a.activeProgram.objectives()?a.activeProgram.objectives().length>0:!1,a.computedObjectives=ko.computed(function(){var e=[];if(a.settings.activeProgram&&a.settings.activeProgram.objectives())var e=a.settings.activeProgram.objectives().sort(t);return e}).extend({isShowing:a.shouldBeShowing})},e});
define('viewmodels/patients/tabs/program.details',["services/datacontext","viewmodels/shell/shell","models/base"],function(e,t,a){function n(t){var a=this;a.program=ko.observable(),a.canSaveObservable=ko.observable(!e.programsSaving),a.canSave=ko.computed({read:function(){return!e.programsSaving()&&a.canSaveObservable()},write:function(e){a.canSaveObservable(e)}}),a.activationData={program:a.program,canSave:a.canSave,showing:t}}function r(e){var t=[];return ko.utils.arrayForEach(e.modules(),function(e){ko.utils.arrayForEach(e.actions(),function(e){4===e.elementState()&&t.push(e)})}),t}function i(e){ko.utils.arrayForEach(e,function(e){4!==e.elementState()&&(e.stateUpdatedOn((new moment).toISOString()),e.elementState(4))})}var o=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new n(e.modalShowing))};return o.prototype.activate=function(n){var o=this;o.settings=n,o.tab=o.settings.tab,o.activeProgram=o.settings.activeProgram,o.modalEntity().program(o.activeProgram),o.saveOverride=function(){function t(){i(a)}var a=r(o.activeProgram);o.activeProgram.entityAspect.acceptChanges(),ko.utils.arrayForEach(o.activeProgram.modules(),function(e){ko.utils.arrayForEach(e.actions(),function(e){e.entityAspect.acceptChanges()})});var n=o.activeProgram.id(),s=o.activeProgram.patientId();e.savePlanElemAttr(o.activeProgram,n,s).then(t)},o.cancelOverride=function(){e.cancelEntityChanges(o.modalEntity().program())},o.modal=new a.modal("Individual Attributes",o.modalEntity,"viewmodels/templates/program.edit",o.modalShowing,o.saveOverride,o.cancelOverride),o.descriptionSectionOpen=ko.observable(!1),o.individualAttributesSectionOpen=ko.observable(!0),o.attributesSectionOpen=ko.observable(!1),o.toggleModalShowing=function(){t.currentModal(o.modal),o.modalShowing(!o.modalShowing())},o.canEdit=ko.computed(function(){var e=o.activeProgram&&"Completed"!==o.activeProgram.elementStateModel().name()&&"Closed"!==o.activeProgram.elementStateModel().name();return e})},o});
define('viewmodels/patients/tabs/program.goals',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.tab=t.settings.tab,t.activeProgram=t.settings.activeProgram},e});
define('viewmodels/patients/tabs/program.objectives',[],function(){var e=function(){};ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var a=t.length>0;e().showing(a)})};var t=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1};return e.prototype.activate=function(e){var a=this;a.settings=e,a.tab=a.settings.tab,a.activeProgram=a.settings.activeProgram,a.shouldBeShowing=a.activeProgram.objectives()?a.activeProgram.objectives().length>0:!1,a.computedObjectives=ko.computed(function(){var e=[];if(a.settings.activeProgram&&a.settings.activeProgram.objectives())var e=a.settings.activeProgram.objectives().sort(t);return e}).extend({isShowing:a.shouldBeShowing})},e});
define('viewmodels/patients/widgets/action.details',["services/datacontext","viewmodels/patients/careplan/index"],function(e,t){function a(e,t,a){var n=this;n.name=ko.observable(e),n.path=ko.observable(t),n.isActive=ko.computed(function(){var e=a();return e&&e.name()===n.name()})}var n=function(){var t=this;t.activeTab=ko.observable(),t.tabs=ko.observableArray([new a("Steps","viewmodels/patients/tabs/action.steps",t.activeTab),new a("Details","viewmodels/patients/tabs/action.details",t.activeTab)]),t.actionActions=ko.observableArray([{text:ko.observable("Repeat")}]),t.selectedAction=ko.observable(),t.selectedHistoricalAction=ko.observable(),t.programsSaving=ko.computed(e.programsSaving)};return n.prototype.activate=function(a){var n=this;n.settings=a,n.activeAction=n.settings.activeAction,n.activeActionToken=n.activeAction.subscribe(function(){n.activeTab(n.tabs()[0])}),n.selectedAction.subscribe(function(t){function a(){var t=e.getRepeatedAction(n.activeAction());n.activeAction(t)}t&&"Repeat"===t.text()&&(n.activeAction().completed()&&"In Progress"===n.activeAction().module().program().elementStateModel().name()&&!e.programsSaving()?(e.repeatAction(n.activeAction()).then(a),n.selectedAction(null)):(e.createAlert(0,"The action cannot be repeated"),n.selectedAction(null)))}),n.availableHistoricalActions=ko.computed(function(){var e=[];return n.activeAction()&&(e=n.activeAction().history()),e}),n.selectedHistoricalAction(n.availableHistoricalActions()[0]),n.availableHistoricalActionsComputed=ko.computed(function(){var e=n.availableHistoricalActions();return e.length>0&&n.selectedHistoricalAction(e[0]),!1}).extend({throttle:50}),n.selectedActionToken=n.selectedHistoricalAction.subscribe(function(e){setTimeout(function(){e&&0===e.steps().length&&t.getStepsForAction(e)},50)}),n.isFullScreen=ko.observable(!1),n.toggleFullScreen=function(){n.isFullScreen(!n.isFullScreen())},n.setActiveTab=function(e){n.activeTab(e)},n.activeTab(n.tabs()[0])},n.prototype.attached=function(){},n.prototype.deactivate=function(){var e=this;e.selectedActionToken&&e.selectedActionToken.dispose(),e.activeActionToken&&e.activeActionToken.dispose()},n});
define('viewmodels/patients/widgets/allergies',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/index"],function(e,t,a,n,r,i,o,s){function c(e){a.saveTask(e)}function l(e){e.entityAspect.rejectChanges()}function u(e){r.getGoalDetails(e)}function d(e,t){var a=this;a.entity=e,a.activationData={entity:a.entity},a.canSave=ko.computed(function(){var e=a.entity[t]();return e})}var p=function(){};return p.prototype.activate=function(t){var n=this;n.settings=t,n.selectedPatient=n.settings.selectedPatient,n.widget=n.settings.widget,n.allergyTypes=ko.computed(a.enums.allergyTypes),n.selectedAllergyTypes=ko.observableArray(),n.allergyStatuses=ko.computed(a.enums.allergyStatuses);var r=ko.utils.arrayFirst(n.allergyStatuses(),function(e){return"Active"===e.name()});n.selectedAllergyStatuses=ko.observableArray([r]),n.canReset=ko.computed(function(){var e=n.selectedAllergyStatuses(),t=n.selectedAllergyTypes(),a=e.length>0&&"1"===e[0].id();return 1===e.length&&a&&0===t.length?!1:!0}),n.resetFilters=function(){n.selectedAllergyTypes([]),n.selectedAllergyStatuses([r])},n.refreshData=function(){s.getPatientsAllergies()},n.allergySaving=ko.computed(a.allergySaving),n.selectedSortColumn=ko.observable(),n.myComputedAllergies=ko.observableArray(),n.myAllergies=ko.computed(function(){var t=n.selectedAllergyTypes(),r=n.selectedAllergyStatuses(),i=n.selectedPatient(),o=[];n.selectedPatient().allergies();var s=n.selectedSortColumn()?n.selectedSortColumn():"allergyName",c=[],l=[];return l.push(new e.Parameter("patientId",i.id(),"==")),1===r.length&&l.push(new e.Parameter("statusId",r[0].id(),"==")),n.selectedPatient().id(),c=a.getPatientAllergiesQuery(l,s),t.length>0&&(ko.utils.arrayForEach(t,function(e){var t=ko.utils.arrayFilter(c,function(t){var a=ko.utils.arrayFirst(t.allergyTypeIds(),function(t){return t.id()===e.id()});return!!a});ko.utils.arrayForEach(t,function(e){-1===o.indexOf(e)&&o.push(e)})}),c=o),c}),n.activeAllergyColumns=ko.computed(function(){return["expand","name-small","type","severity-small","status"]}),n.toggleAllergySort=function(e){n.selectedSortColumn()&&-1!==n.selectedSortColumn().indexOf(e.sortProperty)?n.selectedSortColumn()&&"desc"===n.selectedSortColumn().substr(n.selectedSortColumn().length-4,4)?n.selectedSortColumn(null):n.selectedSortColumn(e.sortProperty+" desc"):n.selectedSortColumn(e.sortProperty)},n.isOpen=n.widget.isOpen,n.isFullScreen=n.widget.isFullScreen,n.filtersHeaderOpen=ko.observable(!0),n.filtersOpen=ko.observable(!1),n.toggleHeaderOpen=function(e,t){t()&&e(!e())},n.toggleFullScreen=function(){n.isFullScreen(!n.isFullScreen())},n.toggleWidgetOpen=function(e){var t=ko.utils.arrayFilter(n.widget.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===n.widget||e.isOpen(!e.isOpen())},n.addAllergy=function(){o.addData()},n.editAllergy=function(e,t){var a=e.goal(),n=ko.observable(new d(e,"description")),r=function(){c(e)},i=function(){l(e),u(a)};t=t?t:"Edit Task",editEntity(t,n,"viewmodels/templates/task.edit",r,i)}},p.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},p.prototype.addEntity=function(e,t,n,r){function i(t){var i=t.httpResponse.data.Id;if(i){var o={};o.id=i,o.patientGoalId=c,o.statusId=1,n&&(o.startDate=n),r&&(o.assignedToId=r);var s=a.createEntity(e,o);return s}var l=t.results[0];return l.startDate(new Date),l.statusId(1),l.patientGoalId(c),l}var o=this,s=o.selectedPatient().id(),c=t.id();return a.initializeEntity(null,e,s,c).then(i)},p});
define('viewmodels/patients/widgets/medications',["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/index"],function(e,t,a,n,r,i,o,s){var c=function(){},l={id:ko.observable(""),name:ko.observable("Not Set")};return c.prototype.activate=function(t){var n=this;n.settings=t,n.selectedPatient=n.settings.selectedPatient,n.widget=n.settings.widget,n.defaultSort=n.settings.defaultSort,n.selectedMedicationTypes=ko.observableArray(),n.statusIds=n.widget.statusIds,n.allowAdd=n.widget.allowAdd,n.resetFilters=function(){n.selectedMedicationTypes([])},n.refreshView=function(){s.getPatientMedications()},n.addMedication=function(){o.addData()},n.refreshData=function(){console.log("refresh the data")},n.medicationSaving=ko.computed(a.medicationSaving),n.selectedSortColumn=ko.observable(),n.myComputedMedications=ko.observableArray(),n.medSuppTypes=ko.computed(function(){var e=a.enums.medSuppTypes(),t=e.slice(0,e.length);return-1===t.indexOf(l)&&t.push(l),t}),n.activeFilters=ko.computed(function(){var t=n.selectedMedicationTypes(),a=[];if(ko.utils.arrayForEach(n.statusIds,function(t){a.push(new e.Parameter("statusId",t,"=="))}),t.length>0){var r=ko.utils.arrayFilter(n.medSuppTypes(),function(e){var a=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return a?!1:!0});ko.utils.arrayForEach(r,function(t){a.push(new e.Parameter("typeId",t.id(),"!="))});var i=!1;ko.utils.arrayForEach(t,function(e){""===e.id()&&(i=!0)}),i||(a.push(new e.Parameter("typeId","","!=")),a.push(new e.Parameter("typeId",null,"!=")))}return a}),n.myMedications=ko.computed(function(){var t=n.selectedMedicationTypes(),r=n.selectedPatient(),i=n.defaultSort?n.defaultSort:"name";n.selectedPatient().medications();var o=n.selectedSortColumn()?n.selectedSortColumn():i,s=[],c=[],l=[];return l.push(new e.Parameter("patientId",r.id(),"==")),n.activeFilters().length>0&&ko.utils.arrayForEach(n.activeFilters(),function(e){l.push(e)}),1===t.length&&l.push(new e.Parameter("typeId",t[0].id(),"==")),n.selectedPatient().id(),c=a.getPatientMedicationsQuery(l,o),s=ko.utils.arrayFilter(c,function(e){return!e.isNew()})}).extend({throttle:1}),n.activeColumns=ko.computed(function(){return["expand","name","strength","status"]}),n.toggleSort=function(e){n.selectedSortColumn()&&-1!==n.selectedSortColumn().indexOf(e.sortProperty)?n.selectedSortColumn()&&"desc"===n.selectedSortColumn().substr(n.selectedSortColumn().length-4,4)?n.selectedSortColumn(null):n.selectedSortColumn(e.sortProperty+" desc"):n.selectedSortColumn(e.sortProperty)},n.isOpen=n.widget.isOpen,n.isFullScreen=n.widget.isFullScreen,n.filtersHeaderOpen=ko.observable(!0),n.filtersOpen=ko.observable(!1),n.toggleHeaderOpen=function(e,t){t()&&e(!e())},n.toggleOpenColumn=function(){n.widget.column.isOpen(!n.widget.column.isOpen())},n.toggleFullScreen=function(){n.isFullScreen(!n.isFullScreen())},n.toggleWidgetOpen=function(e){var t=ko.utils.arrayFilter(n.widget.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===n.widget||e.isOpen(!e.isOpen())},n.addMedication=function(){o.addData()},n.minimizeThisColumn=function(){n.widget.column.isOpen(!1)},n.maximizeThisColumn=function(){n.widget.column.isOpen(!0)}},c.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},c.prototype.detached=function(){var e=this;e.medicationSaving.dispose(),e.medSuppTypes.dispose(),e.activeFilters.dispose(),e.myMedications.dispose(),e.activeColumns.dispose()},c});
define('viewmodels/patients/widgets/module.details',["services/datacontext"],function(){function e(e,t,a){var n=this;n.name=ko.observable(e),n.path=ko.observable(t),n.isActive=ko.computed(function(){var e=a();return e&&e.name()===n.name()})}var t=function(){var t=this;t.activeTab=ko.observable(),t.tabs=ko.observableArray([new e("Details","viewmodels/patients/tabs/module.details",t.activeTab)])};return t.prototype.activate=function(e){var t=this;t.settings=e,t.activeModule=t.settings.activeModule,t.isFullScreen=ko.observable(!1),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.setActiveTab=function(e){t.activeTab(e)},t.activeTab(t.tabs()[0])},t.prototype.attached=function(){},t});
define('viewmodels/patients/widgets/program.details',["services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,a){function n(e,t,a){var n=this;n.name=ko.observable(e),n.path=ko.observable(t),n.isActive=ko.computed(function(){var e=a();return e&&e.name()===n.name()})}function r(t,a){var n=this;n.program=ko.observable(),n.canSave=ko.computed(function(){return!e.programsSaving()}),n.activationData={program:n.program,showing:t,reason:a}}var i=function(){var e=this;e.activeTab=ko.observable(),e.tabs=ko.observableArray([new n("Details","viewmodels/patients/tabs/program.details",e.activeTab),new n("Objectives","viewmodels/patients/tabs/program.objectives",e.activeTab)]),e.programActions=ko.observableArray([{text:ko.observable("Remove")}]),e.selectedAction=ko.observable(),e.reason=ko.observable(),e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new r(e.modalShowing,e.reason))};return i.prototype.activate=function(n){var r=this;r.settings=n,r.activeProgram=r.settings.activeProgram,r.isFullScreen=ko.observable(!1),r.toggleFullScreen=function(){r.isFullScreen(!r.isFullScreen())},r.setActiveTab=function(e){r.activeTab(e)},r.activeTab(r.tabs()[0]),r.modalEntity().program(r.activeProgram()),r.cancelOverride=function(){r.reason(null)},r.deleteOverride=function(){function t(){setTimeout(function(){location.reload()},2e3)}function a(e){console.log(e)}e.removeProgram(r.activeProgram(),r.reason()).then(t).fail(a)},r.modal=new t.modal("Remove "+r.activeProgram().name(),r.modalEntity,"viewmodels/templates/program.remove",r.modalShowing,null,r.cancelOverride,r.deleteOverride),r.modal.canDelete(!0),r.modal.deleteText("Remove"),r.selectedAction.subscribe(function(e){e&&"Remove"===e.text()&&(a.currentModal(r.modal),r.modalShowing(!0),r.selectedAction(null))}),r.activeProgram.subscribe(function(){r.activeTab(r.tabs()[0]),r.activeProgram()&&(r.modalEntity().program(r.activeProgram()),r.modal=new t.modal("Remove "+r.activeProgram().name(),r.modalEntity,"viewmodels/templates/program.remove",r.modalShowing,null,r.cancelOverride,r.deleteOverride),r.modal.canDelete(!0),r.modal.deleteText("Remove"))})},i.prototype.attached=function(){},i});
define('viewmodels/populations/index',["plugins/router"],function(e){function t(){}function a(){e.navigateBack()}var n={activate:t,goBack:a,title:"populations"};return n});
define('viewmodels/programdesigner/designer/index',["services/navigation"],function(e){function t(){}function a(){r||(r=!0)}var n=ko.observableArray(),r=!1,i=ko.computed(function(){var t=this;return t.columns=e.currentSubRoute().columns,ko.utils.arrayForEach(t.columns,function(e){var t=[];ko.utils.arrayForEach(e.widgets,function(a){a.column=e,t.push(a)}),e.activeWidgets=ko.observableArray(t)}),t.columns}),o=ko.observable(),s={activate:t,attached:a,computedOpenColumn:o,columns:i,widgets:n,title:"index"};return s});
define('viewmodels/programdesigner/index',["services/session","services/navigation"],function(e,t){function a(){return o||n(),!0}function n(){return!0}ko.computed(function(){var t=e.currentUser();return t?"NG/1.0/Contract/"+e.currentUser().contracts()[0].number()+"/program/":""});var r=ko.observableArray(),i=ko.observable(),o=!1,s=ko.observable(!1),c={modulesListFlyoutOpen:s,modulesList:r,currentModule:i,navigation:t,activate:a,title:"Program Designer"};return c});
define('viewmodels/programdesigner/widgets/modulewidget',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e});
define('viewmodels/programdesigner/widgets/programwidget',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e});
define('viewmodels/shell/quickadd/assign',["models/base","config.services","services/datacontext","services/session"],function(e,t,a,n){function r(e,t){var a=this;a.Id=ko.observable(e),a.Name=ko.observable(t)}var i=function(){var e=this;e.categories=ko.observableArray(),e.selectedCategory=ko.observable(),e.contractPrograms=ko.observableArray(),e.selectedProgram=ko.observable(),e.isSaving=ko.observable()};return i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=n.currentUser();return e?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),i.prototype.createCategories=function(){var e=this;e.categories.push(new r(1,"Programs")),e.selectedCategory(e.categories()[0])},i.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&a.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:n.currentUser().contracts()[0].number()},"name")},i.prototype.activate=function(t){var n=this;n.settings=t,n.selectedPatient=t.data.selectedPatient,n.isShowing=n.settings.data.isShowing,n.cancelAssign=function(){n.selectedProgram(null),n.isShowing(!1)},n.startDate=ko.observable(new moment),n.saveAssign=function(){function t(){n.isShowing(!1),n.isSaving(!1),n.selectedProgram(null)}n.selectedProgram()&&(n.isSaving(!0),a.saveChangesToPatientProperty(n.selectedPatient,"Programs",null,[new e.Parameter("ContractProgramId",n.selectedProgram().id())]).then(t))},n.canSave=ko.computed(function(){return n.selectedProgram()&&!n.isSaving()}),n.selectedCategory.subscribe(function(){n.getContractProgramsByCategory()}),n.createCategories()},i.prototype.attached=function(){},i});
define('viewmodels/shell/quickadd/notes',["models/base","config.services","services/datacontext","services/session","services/navigation","viewmodels/patients/index","viewmodels/patients/history/index"],function(e,t,a,n,r,i,o){var s=function(){var e=this;e.newNote=ko.observable(),e.newTouchPoint=ko.observable(),e.newTouchPointToken={},e.isSaving=ko.observable(),e.noteTypes=a.enums.noteTypes;var t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"touchpoint"===e.name().toLowerCase()});e.selectedNoteType=ko.observable(),t?e.selectedNoteType(t):e.selectedNoteType(e.noteTypes()[1]),e.activeNoteType=ko.computed(function(){var t="",a=e.selectedNoteType().name().toLowerCase();return t="touchpoint"===a?"shell/quickadd/touchpoint.note.html":"shell/quickadd/general.note.html"}),e.methods=a.enums.noteMethods,e.whos=a.enums.noteWhos,e.sources=a.enums.noteSources,e.outcomes=a.enums.noteOutcomes,e.durations=a.enums.noteDurations,e.defaultOutcome=ko.utils.arrayFirst(e.outcomes(),function(e){return e.isDefault()}),e.defaultMethod=ko.utils.arrayFirst(e.methods(),function(e){return e.isDefault()}),e.defaultWho=ko.utils.arrayFirst(e.whos(),function(e){return e.isDefault()}),e.defaultSource=ko.utils.arrayFirst(e.sources(),function(e){return e.isDefault()}),e.defaultDuration=ko.utils.arrayFirst(e.durations(),function(e){return e.isDefault()}),e.tpContentOpen=ko.observable(!0),e.tpDetailsOpen=ko.observable(!1),e.tpLastNotesOpen=ko.observable(!1),e.gnContentOpen=ko.observable(!0),e.gnLastNotesOpen=ko.observable(!0)};return s.prototype.contractProgramsEndPoint=ko.computed(function(){var e=n.currentUser();return e?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),s.prototype.createNewNote=function(){var e=this,t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"general"===e.name().toLowerCase()});e.newNote(a.createEntity("Note",{id:e.thisNoteId(),patientId:e.selectedPatient().id(),typeId:t.id()}))},s.prototype.createNewTouchPoint=function(){var e=this,t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"touchpoint"===e.name().toLowerCase()});e.newTouchPoint(a.createEntity("Note",{id:e.thisTouchPointId(),patientId:e.selectedPatient().id(),contactedOn:(new moment).format(),outcome:e.defaultOutcome,method:e.defaultMethod,source:e.defaultSource,duration:e.defaultDuration,who:e.defaultWho,typeId:t.id(),validatedIdentity:!1})),e.newTouchPointToken=e.newTouchPoint().contactedOn.subscribe(function(t){if(!t){var a=(new moment).format();setTimeout(function(){e.newTouchPoint().contactedOn(a)},100)}})},s.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&a.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:n.currentUser().contracts()[0].number()},"name")},s.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},s.prototype.alphabeticalDateSort=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},s.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=e.data.selectedPatient,t.thisNoteId=ko.computed(function(){return-1*t.selectedPatient().notes().length}),t.thisTouchPointId=ko.computed(function(){return t.thisNoteId()-100}),t.isShowing=t.settings.data.isShowing,t.cancel=function(){t.newNote().entityAspect.rejectChanges(),t.createNewNote(),t.isShowing(!1)},t.cancelTouchPoint=function(){t.newTouchPoint().entityAspect.rejectChanges(),t.newTouchPointToken&&t.newTouchPointToken.dispose(),t.createNewTouchPoint(),t.isShowing(!1)},t.availablePrograms=ko.computed(function(){var e=[];if(t.selectedPatient()){var a=t.selectedPatient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(a,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.startDate=ko.observable(new moment),t.saveNote=function(){function e(){t.isShowing(!1),t.newNote(null),t.isSaving(!1),t.createNewNote()}t.newNote()&&(t.newNote().patientId(t.selectedPatient().id()),t.isSaving(!0),t.newNote().createdById(n.currentUser().userId()),t.newNote().createdOn(new Date),t.newNote().typeId(t.selectedNoteType().id()),a.saveNote(t.newNote()).then(e))},t.saveTouchPoint=function(){function e(){t.isShowing(!1),t.newTouchPoint(null),t.isSaving(!1),t.createNewTouchPoint()}t.newTouchPoint()&&(t.newTouchPoint().patientId(t.selectedPatient().id()),t.isSaving(!0),t.newTouchPoint().createdById(n.currentUser().userId()),t.newTouchPoint().createdOn(new Date),a.saveNote(t.newTouchPoint()).then(e))},t.selectedPatient.subscribe(function(){t.cancel(),t.cancelTouchPoint(),o.activeNote(null)}),t.viewDetails=function(e){t.isShowing(!1);var a=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(a),o.activeNote(e)},t.gotoHistory=function(){t.isShowing(!1);var e=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(e)},t.canSave=ko.computed(function(){return t.newNote()&&!t.isSaving()&&t.newNote().text()}),t.canSaveTouchPoint=ko.computed(function(){return t.newTouchPoint()?!0:!1,t.isSaving(),t.newTouchPoint()&&(t.newTouchPoint().text(),t.newTouchPoint().contactedOn()),t.newTouchPoint()&&!t.isSaving()&&t.newTouchPoint().text()&&t.newTouchPoint().contactedOn()}),t.createNewNote(),t.createNewTouchPoint(),t.lastThreeNotes=ko.computed(function(){var e=t.selectedPatient().notes().sort(t.alphabeticalDateSort),a=[];return ko.utils.arrayForEach(e,function(e){a.length<3&&!e.entityAspect.entityState.isAdded()&&a.push(e)}),a}),i.leaving.subscribe(function(e){e&&(t.cancel(),t.cancelTouchPoint())})},s.prototype.attached=function(){},s});
define('viewmodels/shell/quickadd/quickaddpopover',["models/base","viewmodels/patients/index"],function(e,t){var a=function(){var e=this;e.selectedPatient=ko.computed(t.selectedPatient)};return a.prototype.createQuickAddSections=function(){var t=this;t.quickAddSections.push(new e.quickAddSection("notes","Notes","icon-notes","viewmodels/shell/quickadd/notes")),t.quickAddSections.push(new e.quickAddSection("todo","To Do","icon-notes","viewmodels/shell/quickadd/todo")),t.quickAddSections.push(new e.quickAddSection("assign","Assign","icon-assign-patient","viewmodels/shell/quickadd/assign")),t.activeQuickAddTab(t.quickAddSections()[0])},a.prototype.activate=function(e){var t=this;t.settings=e,t.isShowing=ko.observable(!1),t.quickAddSections=ko.observableArray(),t.activeQuickAddTab=ko.observable(),t.createQuickAddSections(),t.setActiveTab=function(e){t.activeQuickAddTab(e)},t.patientIsSelected=ko.computed(function(){return t.selectedPatient()?!0:!1})},a.prototype.attached=function(){},a});
define('viewmodels/shell/quickadd/todo',["models/base","config.services","services/datacontext","services/session","services/navigation","services/local.collections","viewmodels/patients/index"],function(e,t,a,n,r,i,o){function s(e){var t=this;t.Message=e}var c=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},u=function(){var e=this;e.newTodo=ko.observable(),e.isSaving=ko.observable(),e.categories=ko.computed(a.enums.toDoCategories),e.statuses=ko.computed(a.enums.goalTaskStatuses),e.priorities=ko.computed(a.enums.priorities),e.careManagers=a.enums.careManagers,e.savable=ko.observable(!0)};return u.prototype.createNewTodo=function(){var e,t=this;if(e=t.selectedPatient?t.selectedPatient().id():t.selectedPatient().id()){var r=t.selectedPatient(),i=ko.observable();a.checkForEntityLocally(i,r.id(),"ToDoPatient"),i()||i(a.createEntity("ToDoPatient",{id:r.id(),firstName:r.firstName(),lastName:r.lastName(),middleName:r.middleName(),suffix:r.suffix(),preferredName:r.preferredName()})),t.newTodo(a.createEntity("ToDo",{id:-2,statusId:1,priorityId:0,createdById:n.currentUser().userId(),assignedToId:n.currentUser().userId(),patientId:e,patientDetails:i()}))}else t.newTodo(a.createEntity("ToDo",{id:-2,statusId:1,priorityId:0,createdById:n.currentUser().userId(),assignedToId:n.currentUser().userId(),patientId:e}));t.newTodo().isNew(!0)},u.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=e.data.selectedPatient,t.noPatient=ko.computed(function(){return t.newTodo()?!!t.newTodo().patientId():!1}),t.thisTodoId=ko.computed(function(){return-1*t.selectedPatient().todos().length}),t.isShowing=t.settings.data.isShowing,t.cancel=function(){t.newTodo().entityAspect.rejectChanges(),t.createNewTodo(),t.isShowing(!1)},t.availablePrograms=ko.computed(function(){var e=[];if(t.selectedPatient()&&t.newTodo()&&t.newTodo().patient()){var a=t.selectedPatient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(a,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.errors=ko.computed(function(){var e=[],a=t.newTodo()?t.newTodo().title():"";return a||e.push(new s("'Title' is required")),e}),t.hasErrors=ko.computed(function(){return t.errors().length>0}),t.startDate=ko.observable(new moment),t.save=function(){function e(e){e.isNew(!1),t.isShowing(!1),e.entityAspect.acceptChanges(),i.todos.push(t.todo),t.createNewTodo()}a.saveToDo(t.newTodo(),"Insert").then(e)},t.selectedPatient.subscribe(function(){t.cancel()}),t.canSave=ko.computed({read:function(){return t.newTodo()&&!t.isSaving()&&t.newTodo().title()&&t.savable()&&!a.todosSaving()},write:function(e){t.savable(e)}}),t.removeAssignment=function(){t.newTodo().assignedTo(null),t.assignedToDisplay("")},t.removeAssociation=function(){t.newTodo().patientId(null),t.newTodo()&&t.newTodo().programIds().length>0&&!t.newTodo().patientId()&&t.newTodo().programIds.removeAll()},t.removeUserAssociation=function(){t.removeAssignment()},t.createNewTodo(),t.assignedToDisplay=ko.observable(t.newTodo()&&t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():""),t.assignedToDisplay.subscribe(function(e){var a=ko.utils.arrayFirst(t.careManagers(),function(t){return t.preferredName()===e});a?t.newTodo().assignedTo(a):console.log("No match found")}),t.checkForMatch=function(){return t.assignedToDisplay()===(t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():"")},t.validMatch=ko.computed(function(){var e=!1;return t.newTodo()&&(e=t.checkForMatch(),e||t.newTodo()&&t.newTodo().assignedToId()&&(t.assignedToDisplay(t.newTodo()&&t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():""),t.assignedToDisplay.valueHasMutated(),e=t.checkForMatch())),t.canSave(e),e}).extend({throttle:25}),t.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,a,n){var r=t.careManagers().sort(c),i=$.Deferred();i.done(function(){n(this)});var o=e.toLowerCase(),s=r.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(o)});return i.resolveWith(s),i.promise()}},limit:25}),t.careManagersBloodhound.initialize(),o.leaving.subscribe(function(e){e&&t.cancel()})},u.prototype.attached=function(){},u});
define('viewmodels/shell/sidebar',[],function(){});
define('viewmodels/templates/action.edit',["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},a=function(){};return a.prototype.activate=function(a){var n=this;n.settings=a,n.action=n.settings.action,n.canSave=n.settings.canSave,n.showing=n.settings.showing,n.careManagers=e.enums.careManagers,n.assignToDisplay=ko.observable(n.action()&&n.action().assignTo()?n.action().assignTo().preferredName():""),n.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(n.careManagers(),function(t){return t.preferredName()===e});t?n.action().assignTo(t):console.log("No match found")}),n.checkForMatch=function(){return n.assignToDisplay()===(n.action().assignTo()?n.action().assignTo().preferredName():"")},n.removeAssignment=function(){n.action().assignTo(null),n.assignToDisplay("")},n.validMatch=ko.computed(function(){var e=!1;return n.action()&&(e=n.checkForMatch(),e||(n.action()&&n.action().assignToId()?(n.assignToDisplay(n.action()&&n.action().assignTo()?n.action().assignTo().preferredName():""),n.assignToDisplay.valueHasMutated(),e=n.checkForMatch()):n.removeAssignment())),n.canSave(e),e}).extend({throttle:25}),n.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,a,r){var i=n.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var s=e.toLowerCase(),c=i.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(s)});return o.resolveWith(c),o.promise()}},limit:25}),n.careManagersBloodhound.initialize()},a.prototype.attached=function(){},a});
define('viewmodels/templates/allergies.panel',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","viewmodels/patients/index"],function(e,t,a,n,r,i){function o(e){var t=ko.utils.arrayFirst(u,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function s(e,t,a,n,r){var i=this;i.name=e,i.displayName=t,i.path="small"===e.substr(e.length-5,5)?"views/templates/allergy."+e.substr(0,e.length-6)+".html":"views/templates/allergy."+e+".html",i.cssClass=a,i.sortProperty=n,i.canSort=r?!1:!0}function c(e){var t=this;t.allergy=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.allergy()){var a=!!t.allergy().allergyName(),n=!!t.allergy().status();e=a&&n}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={allergy:t.allergy,canSave:t.canSave,showing:e}}var l=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.allergySort=function(e,t){var a=e.status()?e.status().id():"",n=t.status()?t.status().id():"",r=e.name(),i=t.name();return a!=n?n>a?1:a>n?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new c(e.modalShowing))},u=[new s("expand","","span1 ellipsis filters","",!0),new s("priority","Priority","span2 ellipsis","priority.id"),new s("status","Status","span2 ellipsis","statusId"),new s("priority-small","Priority","span1 ellipsis","priority.id"),new s("status-small","","span1 ellipsis","statusId"),new s("patient","Individual","span2 ellipsis","patientDetails.lastName"),new s("type","Type","span3","type.name",!0),new s("type-small","Type","span2","type.name",!0),new s("name","Allergy","span4 ellipsis","allergyName"),new s("name-small","Allergy","span3 ellipsis","allergyName"),new s("severity","Severity","span4 ellipsis","severity.name"),new s("severity-small","Severity","span3 ellipsis","severity.name"),new s("duedate","Due Date","span2 ellipsis","dueDate"),new s("assignedto","Assigned To","span2 ellipsis","assignedTo.preferredName"),new s("startdate","Date","span2 ellipsis","startDate"),new s("startdate-small","Date","span1 ellipsis","startDate"),new s("updatedon","Date","span2 ellipsis","updatedOn"),new s("updatedon-small","Date","span1 ellipsis","updatedOn")];return ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1}),l.prototype.activate=function(e){var a=this;a.allergies=e.allergies,a.selectedSortColumn=e.selectedSortColumn,a.toggleSort=e.toggleSort,a.canSort=e.canSort?e.canSort:!1,a.saveOverride=function(){function e(){a.modalEntity().allergy().isNew(!1),a.modalEntity().allergy().isUserCreated(!1),a.modalEntity().allergy().entityAspect.acceptChanges()}t.saveAllergies([a.modalEntity().allergy()],"Update").then(e)},a.cancelOverride=function(){t.cancelEntityChanges(a.modalEntity().allergy()),i.getPatientsAllergies()},a.modal=new r.modal("Edit Allergy",a.modalEntity,"viewmodels/templates/allergy.edit",a.modalShowing,a.saveOverride,a.cancelOverride),a.columns=ko.computed(function(){var t=[],a=e.columns();return ko.utils.arrayForEach(a,function(e){var a=o(e);a&&t.push(a)}),t||(t=["status","patient","category","title","duedate"]),t}),a.editAllergy=function(e){a.modalEntity().allergy(e),n.currentModal(a.modal),a.modalShowing(!0)},a.computedAllergies=ko.computed(function(){return ko.utils.arrayForEach(a.allergies(),function(e){e.edit||(e.edit=function(){a.editAllergy(e)}),e.isExpanded||(e.isExpanded=ko.observable(!1))}),a.allergies()})},l});
define('viewmodels/templates/allergy.edit',["services/datacontext"],function(e){var t=function(){};return t.prototype.allergyTypes=ko.computed(e.enums.allergyTypes),t.prototype.severities=ko.computed(e.enums.severities),t.prototype.reactions=ko.computed(e.enums.reactions),t.prototype.allergySources=ko.computed(e.enums.allergySources),t.prototype.allergyStatuses=ko.computed(e.enums.allergyStatuses),t.prototype.removeAllergy=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.allergy=t.settings.allergy},t.prototype.attached=function(){},t});
define('viewmodels/templates/barrier.edit',["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var a=this;a.settings=t,a.barrier=a.settings.entity,a.isNew=a.barrier.goal().isNew,a.barrierStatuses=e.enums.barrierStatuses,a.barrierCategories=e.enums.barrierCategories,a.canSave=a.settings.canSave?a.settings.canSave:!0,a.showing=a.settings.showing?a.settings.showing:!0},t.prototype.attached=function(){},t});
define('viewmodels/templates/care.team.edit',["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},a=function(){};return a.prototype.careManagers=ko.computed(e.enums.careManagers),a.prototype.activate=function(a){var n=this;n.settings=a,n.showing=ko.computed(function(){return!0}),n.selectedPatient=ko.computed(n.settings.selectedPatient),n.canSave=n.settings.canSave,n.saveType=n.settings.saveType,n.primaryCareManager=ko.computed(function(){var e=ko.utils.arrayFirst(n.selectedPatient().careMembers(),function(e){return e.primary()});return e}),n.newAssignedTo=ko.observable(),n.careManagers=e.enums.careManagers,n.assignToDisplay=ko.observable(),n.assignToDisplay.subscribe(function(t){var a=ko.utils.arrayFirst(n.careManagers(),function(e){return e.preferredName()===t});if(a){if(n.primaryCareManager())n.primaryCareManager().preferredName(a.preferredName()),n.primaryCareManager().gender("n"),n.primaryCareManager().contactId(a.id()),n.saveType("Update");else{var r=ko.utils.arrayFirst(e.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});e.createEntity("CareMember",{id:-1,patientId:n.selectedPatient().id(),preferredName:a.preferredName(),typeId:r.id(),gender:"n",primary:!0,contactId:a.id()}),n.saveType("Insert")}n.canSave(!0)}else console.log("No match found")}),n.checkForMatch=function(){return n.assignToDisplay()===(n.primaryCareManager()?n.primaryCareManager().preferredName():"")},n.validMatch=ko.computed(function(){var e=!1;return n.primaryCareManager()&&(e=n.checkForMatch(),e||(n.primaryCareManager()&&n.primaryCareManager().id()?(n.assignToDisplay(n.primaryCareManager()?n.primaryCareManager().preferredName():""),n.assignToDisplay.valueHasMutated(),e=n.checkForMatch()):n.removeAssignment())),n.canSave(e),e}).extend({throttle:25}),n.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,a,r){var i=n.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var s=e.toLowerCase(),c=i.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(s)});return o.resolveWith(c),o.promise()}},limit:25}),n.careManagersBloodhound.initialize()},a.prototype.attached=function(){},a});
define('viewmodels/templates/clinical.dataentry',["services/datacontext","viewmodels/patients/data/index"],function(e,t){function a(e,t,a){var r=this;r.typeName=e,r.firstSection=new n(t),r.secondSection=new n(a)}function n(e){var t=this;t.path=e}var r=function(){};return r.prototype.activate=function(n){var r=this;r.settings=n,r.activeDataType=r.settings.activeDataType,r.showing=ko.computed(function(){return!!r.activeDataType()}),r.selectedPatient=r.settings.selectedPatient,r.selectedTemplate=ko.observable(),r.saveDataEntry=r.settings.saveDataEntry||function(){return!1},r.cancelDataEntry=r.settings.cancelDataEntry||function(){return!1},r.dataTypes=ko.computed(function(){var a=e.enums.observationTypes().slice(0);return-1===a.indexOf(t.allergiesType)&&a.push(t.allergiesType),-1===a.indexOf(t.medicationsType)&&a.push(t.medicationsType),a}),r.templates=ko.computed(function(){var e=r.dataTypes(),t=[];return ko.utils.arrayForEach(e,function(e){-1===e.name().toLowerCase().indexOf("problems")&&"Allergies"!==e.name()&&"Medications"!==e.name()?t.push(new a(e.name(),"viewmodels/patients/sections/basic.observations","viewmodels/patients/sections/additional.observations")):-1!==e.name().toLowerCase().indexOf("problems")?t.push(new a(e.name(),"viewmodels/patients/sections/additional.problem.observations","viewmodels/patients/sections/problems.list")):-1!==e.name().toLowerCase().indexOf("allergies")?t.push(new a(e.name(),"viewmodels/patients/sections/allergies.search","viewmodels/patients/sections/allergies.edit")):t.push(new a(e.name(),"viewmodels/patients/sections/medications.search","viewmodels/patients/sections/medication.edit"))}),t}),r.computedActiveDataType=ko.computed({read:function(){return r.activeDataType()},write:function(e){if(r.activeDataType(e),e){var t=ko.utils.arrayFirst(r.templates(),function(t){return t.typeName===e.name()});r.selectedTemplate(t)}else r.selectedTemplate(e)}})},r.prototype.attached=function(){},r});
define('viewmodels/templates/event.details',["services/datacontext","services/navigation","plugins/router"],function(e,t,a){var n=function(){};return n.prototype.activate=function(e){var n=this;n.settings=e,n.event=n.settings.event,n.canSave=n.settings.canSave,n.showing=n.settings.showing,n.btnMsg=ko.computed(function(){var e="Go to Individual";return e}),n.gotoSource=function(){n.event&&n.event()&&"Intervention"===n.event().type().name()?(n.showing(!1),a.navigate("#patients/"+n.event().patientId()),t.indexOverride(0)):(n.showing(!1),a.navigate("#patients/"+n.event().patientId()),t.indexOverride(0))},n.hasPatient=ko.computed(function(){return!!n.event().patientId()})},n.prototype.attached=function(){},n});
define('viewmodels/templates/focusproblems',["services/datacontext"],function(e){var t=function(){};return t.prototype.newThenAlphabeticalSort=function(e,t){var a=e.isNew()?0:1,n=t.isNew()?0:1,r=e.name().toLowerCase(),i=t.name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},t.prototype.observationDisplays=ko.computed(e.enums.observationDisplays),t.prototype.deleteFocusProblem=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.observationStates=ko.computed(function(){var t=ko.utils.arrayFirst(e.enums.observationTypes(),function(e){return"Problems"===e.name()}),a=ko.utils.arrayFilter(e.enums.observationStates(),function(e){return-1!==e.allowedTypeIds().indexOf(t.id())});return a}),t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=ko.computed(t.settings.selectedPatient),t.computedProblemObservations=ko.computed(function(){var e=[],a=t.selectedPatient().observations();return e=ko.utils.arrayFilter(a,function(e){return e.type()?"Problems"===e.type().name()&&!e.deleteFlag()&&(e.entityAspect.entityState.isModified()||"active"===e.state().name().toLowerCase()):!1}).sort(t.newThenAlphabeticalSort)}).extend({throttle:50}),t.showActions=t.settings.hasOwnProperty("showActions")?t.settings.showActions:t.showing,t.saveFocusProblems=t.settings.saveFocusProblems||function(){return!1},t.cancelFocusProblems=t.settings.cancelFocusProblems||function(){return!1}},t.prototype.attached=function(){},t});
define('viewmodels/templates/goal.edit',["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var a=this;a.settings=t,a.goal=a.settings.goal,a.focusAreas=e.enums.focusAreas,a.sources=e.enums.sources,a.goalTaskStatuses=e.enums.goalTaskStatuses,a.goalTypes=e.enums.goalTypes,a.availablePrograms=ko.computed(function(){var e=[];if(a.goal.patient()){var t=a.goal.patient().programs.slice(0).sort(a.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),a.canSave=a.settings.canSave?a.settings.canSave:!0,a.showing=a.settings.showing?a.settings.showing:!0},t.prototype.attached=function(){},t});
define('viewmodels/templates/intervention.edit',["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalSort=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var a=this;a.settings=t,a.intervention=ko.unwrap(a.settings.entity),a.isNew=a.intervention&&a.intervention.goal()?a.intervention.goal().isNew:function(){return!1},a.careManagers=ko.computed(function(){var t=e.enums.careManagers();return t.sort(a.alphabeticalSort)}),a.computedBarriers=ko.computed(a.intervention.goal().barriers),a.interventionStatuses=e.enums.interventionStatuses,a.interventionCategories=e.enums.interventionCategories,a.careManagers=e.enums.careManagers,a.canSave=a.settings.canSave?a.settings.canSave:!0,a.showing=a.settings.showing?a.settings.showing:!0,a.assignedToDisplay=ko.observable(a.intervention&&a.intervention.assignedTo()?a.intervention.assignedTo().preferredName():""),a.assignedToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t&&a.intervention.assignedTo(t)}),a.checkForMatch=function(){return a.assignedToDisplay()===(a.intervention.assignedTo()?a.intervention.assignedTo().preferredName():"")},a.removeAssignment=function(){a.intervention.assignedTo(null),a.assignedToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.intervention&&(e=a.checkForMatch(),e||(a.intervention&&a.intervention.assignedToId()?(a.assignedToDisplay(a.intervention&&a.intervention.assignedTo()?a.intervention.assignedTo().preferredName():""),a.assignedToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave=e,e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,t,n){var r=a.careManagers().sort(a.alphabeticalSort),i=$.Deferred();i.done(function(){n(this)});var o=e.toLowerCase(),s=r.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(o)});return i.resolveWith(s),i.promise()}},limit:25}),a.careManagersBloodhound.initialize()},t.prototype.attached=function(){},t});
define('viewmodels/templates/intervention.panel',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","plugins/router","services/navigation"],function(e,t,n,a,r,i,o){function s(e,n){return t.getEntityById(null,e,d().EntityType,d().ResourcePath+n+"/Goal/",!0)}function c(e){var t=ko.utils.arrayFirst(m,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function u(e,t,n,a){var r=this;r.name=e,r.displayName=t,r.path="small"===e.substr(e.length-5,5)?"views/templates/intervention."+e.substr(0,e.length-6)+".html":"views/templates/intervention."+e+".html",r.cssClass=n,r.sortProperty=a}function l(e){var t=this;t.intervention=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.intervention()){var n=!!t.intervention().description();e=n}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={entity:t.intervention,canSave:t.canSave,showing:e}}var d=ko.computed(function(){return new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Goal")}),p=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.interventionSort=function(e,t){var n=e.category()?e.category().name():"",a=t.category()?t.category().name():"",r=e.title(),i=t.title();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new l(e.modalShowing))},m=[new u("status","Status","span2","status.id"),new u("status-small","Status","span1","status.id"),new u("patient","Individual","span2","patientDetails.lastName"),new u("category","Category","span2","category.name"),new u("category-small","Category","span1","category.name"),new u("description","Title","span3","description"),new u("description-small","Title","span2","description"),new u("goal","Goal","span3","goalName"),new u("startdate","Start Date","span2","startDate"),new u("assignedto","Assigned To","span2","assignedTo.preferredName"),new u("closeddate","Closed Date","span2","closedDate"),new u("closeddate-small","Closed Date","span1","closedDate"),new u("updatedon","Date","span2","updatedOn"),new u("updatedon-small","Date","span1","updatedOn")],y=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),g=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return p.prototype.activate=function(e){var n=this;n.interventions=e.interventions,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.saveOverride=function(){n.modalEntity().intervention()&&n.modalEntity().intervention().barrierIds().length>0&&!n.modalEntity().intervention().computedPatient().id()&&ko.utils.arrayForEach(n.modalEntity().intervention().barrierIds(),function(e){n.modalEntity().intervention().barrierIds.remove(e)}),t.saveIntervention(n.modalEntity().intervention(),"Update")},n.cancelOverride=function(){t.cancelEntityChanges(n.modalEntity().intervention())},n.modal=new r.modal("Edit Intervention",n.modalEntity,"viewmodels/templates/intervention.edit",n.modalShowing,n.saveOverride,n.cancelOverride),n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=c(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.editIntervention=function(e){function r(){n.modalEntity().intervention(e),a.currentModal(n.modal),n.modalShowing(!0)}e&&e.patientId()&&t.getEntityById(null,e.patientId(),y().EntityType,y().ResourcePath,!0).then(function(){s(e.patientGoalId(),e.computedPatient().id()).then(r),t.getEntityList(null,g().EntityType,g().ResourcePath+e.patientId()+"/Programs",null,null,!0)})},n.computedInterventions=ko.computed(function(){return ko.utils.arrayForEach(n.interventions(),function(e){e.edit||(e.edit=function(){n.editIntervention(e)}),e.gotoGoal||(e.gotoGoal=function(){if(o.currentRoute()&&"Individual"===o.currentRoute().config.title){var t=ko.utils.arrayFirst(o.currentRoute().config.settings.pages,function(e){return"goals"===e.title});o.setSubRoute(t)}else i.navigate("#patients/"+e.computedPatient().id()),o.indexOverride(1)})}),n.interventions()})},p.prototype.detached=function(){var e=this;d.dispose(),y.dispose(),g.dispose(),e.columns.dispose(),e.computedInterventions.dispose()},p});
define('viewmodels/templates/medications.panel',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","viewmodels/patients/medications/index","durandal/app"],function(e,t,n,a,r,i){function o(e){var t=ko.utils.arrayFirst(l,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function s(e,t,n,a,r){var i=this;i.name=e,i.displayName=t,i.path="small"===e.substr(e.length-5,5)?"views/templates/medication."+e.substr(0,e.length-6)+".html":"views/templates/medication."+e+".html",i.cssClass=n,i.sortProperty=a,i.canSort=r?!1:!0}function c(e){var t=this;t.medication=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.medication()){var n=!!t.medication().name(),a=!!t.medication().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={selectedPatient:i.selectedPatient,medication:t.medication,canSave:t.canSave,showing:e}}var u=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.medicationSort=function(e,t){var n=e.status()?e.status().id():"",a=t.status()?t.status().id():"",r=e.name(),i=t.name();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new c(e.modalShowing))},l=[new s("expand","","span1 ellipsis filters","",!0),new s("priority","Priority","span2 ellipsis","priority.id"),new s("status","Status","span2 ellipsis","statusId"),new s("priority-small","Priority","span1 ellipsis","priority.id"),new s("status-small","","span1 ellipsis","statusId"),new s("patient","Individual","span2 ellipsis","patientDetails.lastName"),new s("type","Type","span2","type.name",!0),new s("type-small","Type","span1","type.name",!0),new s("name","Medication","span6 ellipsis","name"),new s("name-small","Medication","span2 ellipsis","name"),new s("strength","Strength","span3 ellipsis","strength"),new s("strength-small","Strength","span2 ellipsis","strength"),new s("reason","Reason","span4 ellipsis","reason.name"),new s("reason-small","Reason","span3 ellipsis","reason.name"),new s("duedate","Due Date","span2 ellipsis","dueDate"),new s("assignedto","Assigned To","span2 ellipsis","assignedTo.preferredName"),new s("startdate","Date","span2 ellipsis","startDate"),new s("startdate-small","Date","span1 ellipsis","startDate"),new s("updatedon","Date","span2 ellipsis","updatedOn"),new s("updatedon-small","Date","span1 ellipsis","updatedOn")];return ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),u.prototype.activate=function(e){var n=this;n.medications=e.medications,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.saveOverride=function(){function e(){n.modalEntity().medication().isEditing(!1),n.modalEntity().medication().isNew(!1),n.modalEntity().medication().isUserCreated(!1),n.modalEntity().medication().entityAspect.acceptChanges()}var a=n.modalEntity().medication();a.needToSave()&&(a.isValid()?t.saveMedication(n.modalEntity().medication(),"Update").then(e):a.entityAspect.rejectChanges())},n.cancelOverride=function(){n.modalEntity().medication().isEditing(!1),t.cancelEntityChanges(n.modalEntity().medication())},n.modal=new r.modal("Edit Medication",n.modalEntity,"viewmodels/patients/sections/medication.edit",n.modalShowing,n.saveOverride,n.cancelOverride),n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=o(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.editMedication=function(e){e.isEditing(!0),n.modalEntity().medication(e),a.currentModal(n.modal),n.modalShowing(!0)},n.computedMedications=ko.computed(function(){return ko.utils.arrayForEach(n.medications(),function(e){e.edit||(e.edit=function(){n.editMedication(e)}),e.isExpanded||(e.isExpanded=ko.observable(!1))}),n.medications()})},u});
define('viewmodels/templates/module.edit',["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.module=a.settings.module,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(a.module()&&a.module().assignTo()?a.module().assignTo().preferredName():""),a.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t?a.module().assignTo(t):console.log("No match found")}),a.showing.subscribe(function(e){e||a.module().assignToId()||a.assignToDisplay("")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.module().assignTo()?a.module().assignTo().preferredName():"")},a.removeAssignment=function(){a.module().assignTo(null),a.assignToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.module()&&(e=a.checkForMatch(),e||(a.module()&&a.module().assignToId()?(a.assignToDisplay(a.module()&&a.module().assignTo()?a.module().assignTo().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r){var i=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var s=e.toLowerCase(),c=i.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(s)});return o.resolveWith(c),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n});
define('viewmodels/templates/observation.add',["services/datacontext"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.addNew=t.settings.addNew,t.canAdd=ko.computed(function(){return t.observation&&t.observation.computedValue()&&t.observation.startDate()?!!t.observation.computedValue().value()&&moment(t.observation.startDate()).isValid():void 0})},e.prototype.attached=function(){},e});
define('viewmodels/templates/observation.bloodpressure.add',["services/datacontext"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.diastolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Diast")});return e?e:null}),t.systolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Sys")});return e?e:null}),t.customBPString=ko.computed(function(){var e="";if(t.diastolicObservationValue()&&t.systolicObservationValue()){var n=t.diastolicObservationValue().previousValue().value(),a=t.systolicObservationValue().previousValue().value(),r=n&&a?a+"/"+n:"",i=moment(t.diastolicObservationValue().previousValue().startDate()).format("MM/DD/YYYY"),o=t.diastolicObservationValue().previousValue().unit(),s=t.diastolicObservationValue().previousValue().source();e=r?r+" "+o:"",e=moment(i).isValid()?e?e+" on "+i:i:e,e=s?e+" ("+s+")":e}return e}),t.canAdd=ko.computed(function(){return t.observation&&t.diastolicObservationValue()&&t.systolicObservationValue()?!!t.diastolicObservationValue().value()&&!!t.systolicObservationValue().value()&&moment(t.observation.startDate()).isValid():!1}),t.addNew=t.settings.addNew},e.prototype.attached=function(){},e});
define('viewmodels/templates/patient.systems',["services/datacontext"],function(e){var t=function(){var e=this;e.newSystemId=ko.observable()};return t.prototype.newThenAlphabeticalSort=function(e,t){var n=e.isNew()?0:1,a=t.isNew()?0:1,r=e.name().toLowerCase(),i=t.name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},t.prototype.activate=function(t){var n=this;n.settings=t,n.showing=ko.computed(function(){return!0}),n.selectedPatient=ko.computed(n.settings.selectedPatient),n.canAddId=ko.computed(function(){return 0===n.selectedPatient().patientSystems().length}),n.computedSystemIds=ko.computed(function(){var e=n.selectedPatient().patientSystems();return e}).extend({throttle:50}),n.createNewId=function(){var t=-1*(n.selectedPatient().patientSystems()+1);e.createEntity("PatientSystem",{id:t,patient:n.selectedPatient(),systemName:"Lawson",displayLabel:"ID",systemId:n.newSystemId()})}},t.prototype.attached=function(){},t});
define('viewmodels/templates/program.edit',["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.program=a.settings.program,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(a.program()&&a.program().assignTo()?a.program().assignTo().preferredName():""),a.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t?a.program().assignTo(t):console.log("No match found")}),a.showing.subscribe(function(e){e||a.program().assignToId()||a.assignToDisplay("")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.program().assignTo()?a.program().assignTo().preferredName():"")},a.removeAssignment=function(){a.program().assignTo(null),a.assignToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.program()&&(e=a.checkForMatch(),e||(a.program()&&a.program().assignToId()?(a.assignToDisplay(a.program()&&a.program().assignTo()?a.program().assignTo().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r){var i=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var s=e.toLowerCase(),c=i.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(s)});return o.resolveWith(c),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n});
define('viewmodels/templates/program.remove',["services/datacontext"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.program=t.settings.program,t.showing=t.settings.showing,t.reason=t.settings.reason},e.prototype.attached=function(){},e});
define('viewmodels/templates/task.edit',["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.task=ko.unwrap(n.settings.entity),n.goalTaskStatuses=e.enums.goalTaskStatuses,n.isNew=n.task&&n.task.goal()?n.task.goal().isNew:function(){return!1},n.computedBarriers=ko.computed(n.task.goal().barriers),n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0},t.prototype.attached=function(){},t});
define('viewmodels/templates/task.panel',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","plugins/router","services/navigation"],function(e,t,a,n,r,i,o){function s(e,a){return t.getEntityById(null,e,d().EntityType,d().ResourcePath+a+"/Goal/",!0)}function c(e){var t=ko.utils.arrayFirst(m,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t}function u(e,t,a,n){var r=this;r.name=e,r.displayName=t,r.path="small"===e.substr(e.length-5,5)?"views/templates/task."+e.substr(0,e.length-6)+".html":"views/templates/task."+e+".html",r.cssClass=a,r.sortProperty=n}function l(e){var t=this;t.task=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.task()){var a=!!t.task().description();e=a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={entity:t.task,canSave:t.canSave,showing:e}}var d=ko.computed(function(){return new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Goal")}),p=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.taskSort=function(e,t){var a=e.category()?e.category().name():"",n=t.category()?t.category().name():"",r=e.title(),i=t.title();return a!=n?n>a?1:a>n?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new l(e.modalShowing))},m=[new u("status","Status","span2","status.id"),new u("status-small","Status","span1","status.id"),new u("patient","Individual","span2","patientDetails.lastName"),new u("targetvalue","Target Value","span2","targetValue"),new u("targetvalue-small","Target Value","span1","targetValue"),new u("description","Title","span4","description"),new u("description-small","Title","span3","description"),new u("goal","Goal","span3","goalName"),new u("startdate","Start Date","span2","startDate"),new u("closeddate","Closed Date","span2","closedDate"),new u("targetdate","Target Date","span2","targetDate"),new u("statusdate","Status Date","span2","statusDate"),new u("assignedto","Assigned To","span2","assignedTo.preferredName"),new u("closedon","Date","span2","closedDate"),new u("closedon-small","Date","span1","closedDate"),new u("updatedon","Date","span2","updatedOn"),new u("updatedon-small","Date","span1","updatedOn")],y=ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),g=ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return p.prototype.activate=function(e){var a=this;a.tasks=e.tasks,a.selectedSortColumn=e.selectedSortColumn,a.toggleSort=e.toggleSort,a.canSort=e.canSort?e.canSort:!1,a.saveOverride=function(){t.saveTask(a.modalEntity().task(),"Update")},a.cancelOverride=function(){t.cancelEntityChanges(a.modalEntity().task())},a.modal=new r.modal("Edit Task",a.modalEntity,"viewmodels/templates/task.edit",a.modalShowing,a.saveOverride,a.cancelOverride),a.columns=ko.computed(function(){var t=[],a=e.columns();return ko.utils.arrayForEach(a,function(e){var a=c(e);a&&t.push(a)}),t||(t=["status","patient","category","title","duedate"]),t}),a.editTask=function(e){function t(){a.modalEntity().task(e),n.currentModal(a.modal),a.modalShowing(!0)}e&&e.goal()&&e.goal().patientId()?e.goal()&&e.goal().patient()&&0===e.goal().patient().programs().length?s(e.patientGoalId(),e.patientId()).then(t):s(e.patientGoalId(),e.patientId()).then(t):t()},a.computedTasks=ko.computed(function(){return ko.utils.arrayForEach(a.tasks(),function(e){e.edit||(e.edit=function(){a.editTask(e)},e.gotoGoal||(e.gotoGoal=function(){var e=ko.utils.arrayFirst(o.currentRoute().config.settings.pages,function(e){return"goals"===e.title});o.setSubRoute(e)}))}),a.tasks()})},p.prototype.detached=function(){var e=this;d.dispose(),y.dispose(),g.dispose(),e.columns.dispose(),e.computedTasks.dispose()},p});
define('viewmodels/templates/todo.edit',["services/datacontext","services/local.collections"],function(e,t){function a(e){var t=this;t.Message=e}var n=[],r=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},i=function(){};return i.prototype.activate=function(i){var o=this;o.settings=i,o.todo=o.settings.todo,o.canSave=o.settings.canSave,o.showing=o.settings.showing,o.careManagers=e.enums.careManagers,o.toDoCategories=e.enums.toDoCategories,o.statuses=e.enums.goalTaskStatuses,o.priorities=e.enums.priorities,o.errors=ko.computed(function(){var e=[],t=o.todo().title();return t||e.push(new a("'Title' is required")),e}),o.hasErrors=ko.computed(function(){return o.errors().length>0}),o.deleteToDo=function(){function a(){o.todo().entityAspect.acceptChanges(),o.showing(!1),t.todos.remove(o.todo()),o.todo().patientId(null),setTimeout(function(){e.detachEntity(o.todo())},25)}var n=confirm("Are you sure you want to delete the to-do?");return n!==!0?!1:(o.todo().deleteFlag(!0),e.saveToDo(o.todo(),"Update").then(a),void 0)},o.noPatient=ko.computed(function(){return!!o.todo().patientId()}),o.availablePrograms=ko.computed(function(){var e=[];if(o.todo().patientId()&&o.todo().patient()){var t=o.todo().patient().programs.slice(0).sort(o.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),o.assignedToDisplay=ko.observable(o.todo()&&o.todo().assignedTo()?o.todo().assignedTo().preferredName():"");var s=o.assignedToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(o.careManagers(),function(t){return t.preferredName()===e});t?o.todo().assignedTo(t):console.log("No match found")});n.push(s),o.checkForMatch=function(){return o.assignedToDisplay()===(o.todo().assignedTo()?o.todo().assignedTo().preferredName():"")},o.removeAssignment=function(){o.todo().assignedTo(null),o.todo().assignedToId(null),o.assignedToDisplay("")},o.removePatientAssociation=function(){o.todo().patientId(null),o.todo()&&o.todo().programIds().length>0&&!o.todo().patientId()&&o.todo().programIds.removeAll()},o.removeUserAssociation=function(){o.removeAssignment()},o.validMatch=ko.computed({read:function(){var e=!1;return o.todo()&&(e=o.checkForMatch(),e||(o.todo()&&o.todo().assignedToId()?(o.assignedToDisplay(o.todo()&&o.todo().assignedTo()?o.todo().assignedTo().preferredName():""),o.assignedToDisplay.valueHasMutated(),e=o.checkForMatch()):o.removeAssignment())),o.canSave(e),e},deferEvaluation:!0}).extend({throttle:25}),o.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,t,a){var n=o.careManagers().sort(r),i=$.Deferred();i.done(function(){a(this)});var s=e.toLowerCase(),c=n.filter(function(e){return!!~e.preferredName().toLowerCase().indexOf(s)});return i.resolveWith(c),i.promise()}},limit:25}),o.careManagersBloodhound.initialize()},i.prototype.attached=function(){},i.prototype.detached=function(){var e=this;e.errors.dispose(),e.hasErrors.dispose(),e.noPatient.dispose(),e.availablePrograms.dispose(),e.validMatch.dispose(),ko.utils.arrayForEach(n,function(e){e.dispose()})},i});
define('viewmodels/templates/todo.panel',["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base"],function(e,t,a,n,r){function i(e){var t=ko.utils.arrayFirst(u,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function o(e,t,a,n){var r=this;r.name=e,r.displayName=t,r.path="small"===e.substr(e.length-5,5)?"views/templates/todo."+e.substr(0,e.length-6)+".html":"views/templates/todo."+e+".html",r.cssClass=a,r.sortProperty=n}function s(e){var t=this;t.todo=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var a=!1,n=e(),r=t.todo();if(!n)return!1;if(r){var i=!!r.title(),o=!!r.status();a=i&&o}return a&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={todo:t.todo,canSave:t.canSave,showing:e}}var c=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.todoSort=function(e,t){var a=e.category()?e.category().name():"",n=t.category()?t.category().name():"",r=e.title(),i=t.title();return a!=n?n>a?1:a>n?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new s(e.modalShowing)),e.originalProgramIds=ko.observableArray([])},u=[new o("priority","Priority","span2","priority.id"),new o("status","Status","span2","status.id"),new o("priority-small","Priority","span1","priority.id"),new o("status-small","Status","span1","status.id"),new o("patient","Individual","span2","patientDetails.lastName"),new o("category","Category","span2","category.name"),new o("category-small","Category","span1","category.name"),new o("title","Title","span4","title"),new o("title-small","Title","span3","title"),new o("duedate","Due Date","span2","dueDate"),new o("assignedto","Assigned To","span2","assignedTo.preferredName"),new o("closedon","Date","span2","closedDate"),new o("closedon-small","Date","span1","closedDate"),new o("updatedon","Date","span2","updatedOn"),new o("updatedon-small","Date","span1","updatedOn")],d=ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),l=ko.computed(function(){return e.currentUser()?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return c.prototype.activate=function(e){var a=this;a.todos=e.todos,a.selectedSortColumn=e.selectedSortColumn,a.toggleSort=e.toggleSort,a.canSort=e.canSort?e.canSort:!1,a.saveOverride=function(){function e(){a.modalEntity().todo().isNew(!1),a.modalEntity().todo().entityAspect.acceptChanges(),a.originalProgramIds.removeAll()}a.modalEntity().todo()&&a.modalEntity().todo().programIds().length>0&&!a.modalEntity().todo().patientId()&&a.modalEntity().todo().programIds.removeAll(),t.saveToDo(a.modalEntity().todo(),"Update").then(e)},a.cancelOverride=function(){if(a.modalEntity().todo().entityAspect.entityState.isAddedModifiedOrDeleted()){t.cancelEntityChanges(a.modalEntity().todo()),a.modalEntity().todo().programIds.removeAll();var e=a.modalEntity().todo().programIds();a.originalProgramIds().length>0&&(ko.utils.arrayPushAll(e,a.originalProgramIds()),a.originalProgramIds.removeAll()),a.modalEntity().todo().entityAspect.setUnchanged(),a.modalEntity().todo().categoryId()||a.modalEntity().todo().category(null),a.modalEntity().todo().assignedToId()||a.modalEntity().todo().assignedTo(null)}},a.modal=new r.modal("Edit To Do",a.modalEntity,"viewmodels/templates/todo.edit",a.modalShowing,a.saveOverride,a.cancelOverride),a.columns=ko.computed(function(){var t=[],a=e.columns();return ko.utils.arrayForEach(a,function(e){var a=i(e);a&&t.push(a)}),t||(t=["status","patient","category","title","duedate"]),t}),a.editToDo=function(e){e&&e.patientDetails()&&e.patientId()&&(e.patient()&&0===e.patient().programs().length?t.getEntityList(null,l().EntityType,l().ResourcePath+e.patientId()+"/Programs",null,null,!0):(t.getEntityById(null,e.patientId(),d().EntityType,d().ResourcePath,!0),t.getEntityList(null,l().EntityType,l().ResourcePath+e.patientId()+"/Programs",null,null,!0))),a.originalProgramIds.removeAll();var r=a.originalProgramIds();ko.utils.arrayPushAll(r,e.programIds()),a.modalEntity().todo(e),n.currentModal(a.modal),a.modalShowing(!0)},a.computedTodos=ko.computed(function(){ko.utils.arrayForEach(a.todos(),function(e){e.edit||(e.edit=function(){a.editToDo(e)})});var e=ko.utils.arrayFilter(a.todos(),function(e){return!e.deleteFlag()});return e})},c.prototype.detached=function(){var e=this;d.dispose(),l.dispose(),e.columns.dispose(),e.computedTodos.dispose()},c});
!function(){window.Visualization=function(){function e(e,t,n){var a=this;this.selector=e,this.patients=t,this.rad_prop=n,this.svg=d3.select(this.selector),this.color_scale=d3.scale.category10(),this.dynamic_radius=!0,this.filters=$("#filters :checkbox"),this.height=d3.min([$(this.svg.node()).parents(".body").width(),$(this.svg.node()).parents(".body").height()]),this.padding=15,this.show_backgrounds=!0,this.width=this.height,this.force=d3.layout.force().charge(-70).gravity(.05).size([this.width,this.height]).on("tick",function(e){return a.tick(e)}),this.filters.change(function(){return a.data_grouping()}),this.filters.each(function(e,t){return $(t).parents("td").next("td").find(".indicator").css("background",a.color_scale(e))}),this.chart_setup()}return e.prototype.chart_setup=function(){var e=this;return this.patients.forEach(function(t){return t.radius=t[e.rad_prop]+5}),this.svg.attr("height",this.height).attr("width",this.width),this.svg.append("g").attr("class","placeholders"),this.svg.append("g").attr("class","nodes"),this.nodes=this.svg.select("g.nodes").selectAll("circle.node").data(this.patients).enter().append("svg:circle").attr("class","node").attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).style("fill",function(){return e.color_scale(0)}).style("opacity","1"),this.data_grouping()},e.prototype.data_grouping=function(){var e,t,n,a=this;return e=$("#filters :checkbox:checked"),this.filters.not(":checked").prop("disabled",e.length>2),e.prop("disabled",e.length<2),$.uniform.update(this.filters),this.overlaps=[],n=function(e){var t;return t=!1,_.pluck(a.overlaps,"sets").forEach(function(n){return d3.max(n)===d3.max(e)&&d3.min(n)===d3.min(e)?t=!0:void 0}),t},t=function(e){var t;return t=0,a.sets.forEach(function(n){return n.conditional(e)?t++:void 0}),t===a.sets.length},this.sets=$.map(e,function(e){var t,n,r;return e=$(e),t=function(){switch(e.data("comparator")){case"contains":return function(t){return-1!==t[e.data("key")].indexOf(parseInt(e.val()))};case"equality":return function(t){return t[e.data("key")]};case"threshold":return function(t){return t[e.data("key")]>e.val()}}}(),r=a.patients.filter(function(e){return t(e)}),n={id:e.val(),conditional:t,patients:r,size:r.length,color:e.parents("td").next("td").find(".indicator").css("background-color")}}),this.sets.forEach(function(e,r){return a.sets.filter(function(e,t){return t!==r}).forEach(function(i){var o,s;return o=e.patients.filter(function(e){return i.conditional(e)}),a.sets.length>2&&(a.central_patients=a.patients.filter(function(e){return t(e)}),o=_.union(o,a.central_patients)),e.patients=_.difference(e.patients,o),i.patients=_.difference(i.patients,o),s=[r,a.sets.indexOf(i)].sort(),n(s)?void 0:a.overlaps.push({patients:o,sets:s,size:o.length,color:a.color_mixer([e.color,i.color])})})}),_.isEmpty(this.overlaps)?(this.sets[0].x=this.width/2,this.sets[0].y=this.height/2,this.sets[0].radius=d3.min([this.width,this.height])/2):(this.sets=venn.venn(this.sets,this.overlaps,{layoutFunction:venn.classicMDSLayout}),this.sets=venn.scaleSolution(this.sets,this.width,this.height,this.padding)),this.patient_attractions()},e.prototype.patient_attractions=function(){var e,t=this;return this.sets.forEach(function(e){var n;return n={x:e.x,y:e.y},_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=[e],t.cluster=e,t.color=e.color})}),this.overlaps.forEach(function(e){return e.groups=[t.sets[e.sets[0]],t.sets[e.sets[1]]],_.extend(e,t.lens_center(e.groups[0],e.groups[1])),_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=e.groups,t.cluster=e,t.color=e.color})}),this.unscoped_patients=_.difference(this.patients,_.flatten(_.pluck(this.sets,"patients")),_.flatten(_.pluck(this.overlaps,"patients"))),this.unscoped_patients.forEach(function(e){return e.bounds=void 0}),_.where(this.patients,{bounds:void 0}).forEach(function(e){return e.cluster={x:-1e3,y:-1e3}}),this.overlaps.length>2&&(e=this.circumcenter(),this.central_patients.forEach(function(n){return n.bounds=t.sets,n.cluster=e,n.color=t.color_mixer(_.pluck(t.sets,"color"))})),this.determine_radius()},e.prototype.determine_radius=function(){var e,t;return e=d3.sum(this.sets,function(e){return venn.circleArea(e.radius,e.radius)}),t=d3.sum(this.patients,function(e){return e[this.rad_prop]}),this.radius=Math.sqrt(e/t/Math.PI),this.node_animations()},e.prototype.node_animations=function(){var e=this;return this.show_backgrounds&&this.placeholders(),this.nodes.data(this.patients),this.force.nodes(this.patients).start(),this.filter_patients(),this.svg.on("click",function(){var t,n,a,r;return a=500,n=d3.select(d3.event.target).datum(),e.nodes.filter(function(e){return e===n}).size()>0?(t=e.nodes.filter(function(e){return e.cluster===n.cluster}),t.transition().duration(a).style("opacity","1"),r=e.nodes.filter(function(e){return e.cluster!==n.cluster}),r.transition().duration(a).style("opacity","0.25"),e.filter_patients(r.data())):(e.nodes.transition().duration(a).style("opacity","1"),e.filter_patients())})},e.prototype.tick=function(e){var t,n,a=this;return n=d3.geom.quadtree(this.patients),t=.1*e.alpha,this.patients.forEach(function(e){return e.radius=a.dynamic_radius?2*e[a.rad_prop]+4:a.radius,e.x+=(e.cluster.x-e.x)*t,e.y+=(e.cluster.y-e.y)*t,n.visit(a.contain(e))}),this.nodes.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",function(e){return e.radius}).style("fill",function(e){return e.color})},e.prototype.filter_patients=function(e){var t,n,a;return null==e&&(e=this.unscoped_patients),n=_.pluck(e,"id"),a=$(this.svg.node()).parents(".column").next(".column").find("tbody tr"),t=a.filter(function(){return _.contains(n,$(this).data("id"))}),t.css("display","none"),a.not(t).css("display","")},e.prototype.placeholders=function(){var e;return e=this.svg.select("g.placeholders").selectAll("circle.layout").data(this.sets),e.enter().append("svg:circle").attr("class","layout"),e.attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("fill",function(e){return e.color}),e.exit().remove()},e.prototype.cartesian_to_polar=function(e,t){return{angle:Math.atan2(e.y-t.y,e.x-t.x),magnitude:venn.distance(e,t)}},e.prototype.circumcenter=function(){var e,t,n=this;return e=this.overlaps.map(function(e){return e.points=venn.circleCircleIntersection(e.groups[0],e.groups[1]),e.slope=n.slope(e.points[0],e.points[1]),e.midpoint=n.midpoint(e.points[0],e.points[1]),e}),e=e.filter(function(e){return void 0!==e.slope}),e=e.map(function(e){return e.yint=e.points[0].y-e.slope*e.points[0].x,e}),t=(-e[1].slope*e[1].points[0].x+e[1].points[0].y+e[0].slope*e[0].points[0].x-e[0].points[0].y)/(e[0].slope-e[1].slope),{x:t,y:e[0].slope*t+e[0].yint}},e.prototype.collide=function(e){var t,n,a,r,i;return i=e.radius,t=e.x-i,n=e.x+i,a=e.y-i,r=e.y+i,function(o,s,c,u,d){var l,p,m;return o.point&&o.point!==e&&(p=e.x-o.point.x,m=e.y-o.point.y,l=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),i=1.05*(e.radius+o.point.radius),i>l&&(l=.5*((l-i)/l),e.x-=p*=l,e.y-=m*=l,o.point.x+=p,o.point.y+=m)),s>n||t>u||c>r||a>d}},e.prototype.color_mixer=function(e){var t;return t=Color(e.pop()),e.forEach(function(e){return t.mix(Color(e))}),e.length>1&&t.darken(.35),t.rgbString()},e.prototype.contain=function(e){var t,n=this;return t={x:e.x,y:e.y},"undefined"!=typeof e.bounds&&(t=this.exclude(e,t),e.bounds.forEach(function(e){var a;return a=n.cartesian_to_polar(t,e),t=n.polar_to_cartesian(a.angle,Math.min(a.magnitude,e.radius-n.padding),e)})),e.x=t.x,e.y=t.y,this.collide(e)},e.prototype.exclude=function(e,t){var n,a=this;return n=_.difference(this.sets,e.bounds),n.forEach(function(e){var n;return n=a.cartesian_to_polar(t,e),t=a.polar_to_cartesian(n.angle,Math.max(n.magnitude,e.radius+a.padding),e)}),t},e.prototype.lens_center=function(e,t){var n;return n=venn.circleCircleIntersection(e,t),this.midpoint(n[0],n[1])},e.prototype.midpoint=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},e.prototype.slope=function(e,t){return[e,t].forEach(function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y)}),t.x===e.x?void 0:(t.y-e.y)/(t.x-e.x)},e.prototype.polar_to_cartesian=function(e,t,n){return null==n&&(n={x:0,y:0}),{x:Math.cos(e)*t+n.x,y:Math.sin(e)*t+n.y}},e}()}.call(this);
define("viewmodels/venn/patient.venn", function(){});

define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!views/admin/concierge/index.html',[],function () { return '<section data-type="flex">\r\n    <div>\r\n        <div class="column open">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Concierge Services</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>Manage Individuals</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Create New Individual</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <a data-bind="click: createIndividual" class="btn color small">Create</a>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Bulk Upload</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <a class="btn small color disabled" href="#">Upload</a>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Delete Individual</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <a class="btn small" data-bind="click: deleteIndividual">Delete</a>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                <!-- ko compose: activeSecondColumn -->\r\n                <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="content">\r\n                                                            <p><em>Select option to the left...</em></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/admin/index.html',[],function () { return '<div class="route">\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/admin/reports/dynamic.report.html',[],function () { return '<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n\t\t                \t<header>\r\n\t\t                        <h1 data-bind="text: report.name"></h1>\r\n\t\t                        <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n\t\t                            <a class="toggle" data-bind="click: closeReport" href="#">\r\n\t\t                                <i class="icon-cancel"></i>\r\n\t\t                            </a>\r\n\t\t                        </div>\r\n\t\t                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table id="matching-patients" class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <!-- ko foreach: report.columns -->\r\n                                                    <th class="ellipsis" data-bind="text: displayName"></th>\r\n                                                <!-- /ko -->\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedEntities -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <!-- ko foreach: $parent.report.columns -->\r\n                                                <td class="ellipsis">\r\n            \t\t\t\t\t\t\t\t\t\t<span data-bind="text: (name.indexOf(\'.\') === -1) ? (name.indexOf(\'|\') === -1 ? $parent[name] : \'(Export to view)\') : ($parent[name.substr(0, name.indexOf(\'.\'))] ? $parent[name.substr(0, name.indexOf(\'.\'))][name.substr(name.indexOf(\'.\')+1, name.length)] : \'-\')"></span>\r\n                                                </td>\r\n                                                <!-- /ko -->                                         \r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/admin/reports/entity.template.html',[],function () { return '<section class="accordion open well">\r\n    <div class="row accordion-toggle open" data-bind="">\r\n        <div class="span6">\r\n            <h3>Query</h3>\r\n        </div>\r\n    </div>\r\n    <div class="accordion-content" data-bind="with: entity">\r\n        <div class="row pad-top divider">\r\n        \t<div class="span4">\r\n        \t\t<div class="row">\r\n                \t<span>Entity Type:</span>\r\n                </div>\r\n                <div class="row">\r\n                \t<h4 data-bind="text: entityType"></h4>\r\n                </div>\r\n        \t</div>\r\n        \t<div class="span4">\r\n        \t\t<div class="row">\r\n                \t<span>Prop Name:</span>\r\n                </div>\r\n                <div class="row">\r\n                \t<input data-bind="value: propName" />\r\n                </div>\r\n        \t</div>\r\n            <div class="span4">\r\n                <div class="row">\r\n                    <span>Columns</span>\r\n                </div>\r\n                <div class="row">\r\n                    <select class="span8" multiple="true" data-bind="options: availableColumns, selectedOptions: columns, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n        \t<div class="span6">\r\n        \t\t<div class="row">\r\n            \t<span>Navigation Properties</span>\r\n                </div>\r\n        \t\t<div class="row">\r\n            \t\t<select class="span8" multiple="true" data-bind="options: availableNavProps, selectedOptions: navProperties, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n            \t</div>\r\n            </div>\r\n        \t<div class="span6">\r\n        \t\t<div class="row">\r\n            \t<span>Child Entities</span>\r\n                </div>\r\n        \t\t<div class="row">\r\n            \t\t<select class="span8" multiple="true" data-bind="options: availableChildEntities, selectedOptions: childEntities, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n            \t</div>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n        \t<div class="span12">\r\n        \t\t<div class="row">\r\n                \t<span>Navigation Properties:</span>\r\n                </div>\r\n                <!-- ko foreach: navProperties -->\r\n                <div class="row">\r\n                    <div class="push1">\r\n                    <!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: $data }  } -->\r\n\r\n                    <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n                <!-- /ko -->\r\n        \t</div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <div class="span12">\r\n                <div class="row">\r\n                    <span>Child Entities:</span>\r\n                </div>\r\n                <!-- ko foreach: childEntities -->\r\n                <div class="row">\r\n                    <div class="push1">\r\n                    <!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: $data }  } -->\r\n\r\n                    <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/admin/reports/index.html',[],function () { return '<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Reports</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: programInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Program Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: programInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Program Data with state of \r\n                                                                            <div class="" data-bind="multiselect: { options: elementStateList, values: selectedProgramStateIds, idValue: \'id\', text: \'name\', label: \'elementStates\' }"></div>\r\n                                                                            </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadProgramData, click: runProgramReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: programsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: programsLoading().length"></span> Individuals / Programs...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Actions Data with state of \r\n                                                                            <div class="" data-bind="multiselect: { options: elementStateList, values: selectedActionStateIds, idValue: \'id\', text: \'name\', label: \'elementStates\' }"></div>\r\n                                                                            </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadActionData, click: runActionReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: actionsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: actionsLoading().length"></span> Actions...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Programs open longer than </span><input data-bind="value: programLength, valueUpdate: \'afterkeydown\', disable: activeSecondColumn" class="underline-input" /><span> days</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowProgramReport, click: showProgramResults">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: goalInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Goal Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: goalInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Goal Data\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadGoalData, click: runGoalReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: goalsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: goalsLoading().length"></span> Goals...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: careMemberInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Care Member Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: careMemberInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Care Member Data\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadCareMemberData, click: runCareMemberReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: careMembersLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: careMembersLoading().length"></span> CM\'s...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Individuals by Care Manager / Action Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: getPatientsByCareManagerReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <!--<div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Action Count Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: actionCountReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>-->\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: overviewInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Overview Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: overviewInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8">\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Active Cohort:</div>\r\n                                                                                <div class="span6" data-bind="with: selectedCohort"><span data-bind="text: sName"></span></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Individuals Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: patientsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="push1 span5 grey">w/o a Care Manager:</div>\r\n                                                                                <div class="span6" data-bind="text: (careMembersList().length > 0 ? haveCareManagerPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: withProgPatReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">w/ 1+ Program(s):</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? haveProgramPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row filter-toggle" data-bind="click: haveGoalPatReport">\r\n                                                                                <div class="push1 span5 grey">w/ 1+ Goal(s):</div>\r\n                                                                                <div class="span6" data-bind="text: (goalsList().length > 0 ? haveGoalPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Programs fully Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: programsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: notStartedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Not Started:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? notStartedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: inProgressProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">In Progress:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? inProgressProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: completedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Completed:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? completedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: closedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Closed:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? closedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Actions fully Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: actionsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: notStartedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Not Started:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? notStartedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: inProgressActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">In Progress:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? inProgressActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: completedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Completed:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? completedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: closedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Closed:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? closedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Goals Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: goalsList().length"></div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: dynamicReportVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Dynamic Query / Report</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: dynamicReportVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Name :</label>\r\n                                                                            <input data-bind="value: dynamicReportName" />\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Description :</label>\r\n                                                                            <input data-bind="value: dynamicReportDescription" />\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Display Columns :</label>\r\n                                                                            <textarea data-bind="value: dynamicReportColumns">\r\n                                                                            </textarea>\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Query JSON :</label>\r\n                                                                            <textarea rows="20" data-bind="value: dynamicReportQueryJSON">\r\n                                                                            </textarea>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Log Query Results to Console</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: getJSONResults">Log</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Dynamic Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: dynamicReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                <!-- ko compose: { model: activeSecondColumn, activationData: { data: activeSecondColumn } } -->\r\n                <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="content">\r\n                                                            <p><em>Click \'Show\' on the left for to view available reports...</em></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/admin/reports/matching.actions.html',[],function () { return '<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n\t\t                \t<header>\r\n\t\t                        <h1>Actions matching report criteria</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n                                    <a class="toggle" data-bind="click: closeReport" href="#">\r\n                                        <i class="icon-cancel"></i>\r\n                                    </a>\r\n                                </div>\r\n\t\t                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table class="nowrap" id="matching-programs">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Patient Name</th>\r\n                                                <th>Action Name</th>\r\n                                                <th>Status</th>\r\n                                                <th>Start Date</th>\r\n                                                <th>Module Name</th>\r\n                                                <th>Program Name</th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedActions -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: module().program().patient().fullName(), attr: { href: \'#patients/\' + module().program().patientId(), \'title\': module().program().patient().fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: elementStateModel().name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="DateOrNothing: attrStartDate"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: module().name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: module().program().name"></span>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/admin/reports/matching.patients.html',[],function () { return '<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n\t\t                \t<header>\r\n\t\t                        <h1>Individuals matching report criteria</h1>\r\n\t\t                        <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n\t\t                            <a class="toggle" data-bind="click: closeReport" href="#">\r\n\t\t                                <i class="icon-cancel"></i>\r\n\t\t                            </a>\r\n\t\t                        </div>\r\n\t\t                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table id="matching-patients" class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Individual Name</th>\r\n                                                <th>Gender</th>\r\n                                                <th>DOB</th>\r\n                                                <th># of Goals<span data-bind="if: !goalsLoaded()">(Data not Loaded)</span></th>\r\n                                                <th># of Programs<span data-bind="if: !programsLoaded()">(Data not Loaded)</span></th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedPatients -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: fullName(), attr: { href: \'#patients/\' + id(), \'title\': fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <img alt="Individual small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: dOB"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $parent.goalsLoaded() ? goals().length : \'-\'"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $parent.programsLoaded() ? programs().length : \'-\'"></span>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/admin/reports/matching.programs.html',[],function () { return '<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n\t\t                \t<header>\r\n\t\t                        <h1>Programs matching report criteria</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n                                    <a class="toggle" data-bind="click: closeReport" href="#">\r\n                                        <i class="icon-cancel"></i>\r\n                                    </a>\r\n                                </div>\r\n\t\t                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table class="nowrap" id="matching-programs">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Individual Name</th>\r\n                                                <th>Program Name</th>\r\n                                                <th>Start Date</th>\r\n                                                <th>Duration</th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedPrograms -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: patient().fullName(), attr: { href: \'#patients/\' + id(), \'title\': patient().fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="DateOrNothing: attrStartDate"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: duration"></span> day(s).\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/admin/reports/query.builder.html',[],function () { return '<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Query Builder</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Main Type Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    \t<select data-bind="options: structuraltypes, value: selectedMainType, optionsText: \'shortName\', optionsCaption: \'Choose...\'"></select>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <!-- ko with: newQueryReport -->\r\n                                                            \t<!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: entityType }  } -->\r\n\r\n                                                            \t<!-- /ko -->\r\n                                                            <!-- /ko -->\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column open">\r\n        <div class="widget-wrapper">\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n                <div class="content">\r\n                    <div class="content-fill">\r\n                        <div class="wrapper">\r\n                            <div class="content">\r\n                                <div class="header">\r\n                                    <div class="table-cell">\r\n                                        <header class="ellipsis">\r\n                                        </header>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="table-row">\r\n                                    <div class="table-cell">\r\n                                        <div class="body">\r\n                                            <div class="content">\r\n                                                <div class="content">\r\n                                                    <p><em>Click \'Show\' on the left for to view available reports...</em></p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/admin/widgets/delete.individuals.list.html',[],function () { return '<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">                               \r\n                                    <div class="pad-vertical">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span3" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="span8">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" placeholder="Search" type="search" data-phyautomation="cohort-patient-search" />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="body" style="min-height: 589px;">\r\n                                        <div class="content">\r\n                                            <!-- ko foreach: patientsList -->\r\n                                            <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                                <div class="patient-list">\r\n                                                    <div class="ellipsis">\r\n                                                        <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                        <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                        <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <!-- /ko -->\r\n                                            <!--<div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                                <div class="push2 span8">\r\n                                                    <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                        Load more patients...\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>-->\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/authenticate.html',[],function () { return '<section>\r\n\r\n</section>';});


define('text!views/columns/flexcolumn.html',[],function () { return '<div class="column" data-bind="click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n    <!-- ko foreach: activeWidgets -->\r\n        <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/columns/fullcolumn.html',[],function () { return '<div class="column" data-bind="foreach: activeWidgets">\r\n    <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n    <!-- /ko -->\r\n</div> ';});


define('text!views/home/index.html',[],function () { return '<div class="route">\r\n    <section class="open" data-type="fixed" data-bind="visible: cohortPatientSelectPanelShowing">\r\n        <div class="column">\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Cohorts</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <table id="filters">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th colspan="3">Choose up to three:</th>\r\n                                </tr>\r\n                                <!-- ko foreach: computedCohorts -->\r\n                                <tr class="condition active" data-bind="attr: { \'id\': \'condition_\' + sName() }">\r\n                                    <td class="narrow">\r\n                                        <div class="checker">\r\n                                            <span class="checked" data-bind="css: { \'checked\': isChecked }">\r\n                                                <input checked="" data-comparator="contains" data-key="sName" type="checkbox" data-bind="checked: isChecked, attr: { \'value\': sName }">\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td class="narrow">\r\n                                        <div class="indicator" style="background-color: rgb(31, 119, 180); background-position: initial initial; background-repeat: initial initial;"></div>\r\n                                    </td>\r\n                                    <td data-bind="text: sName"></td>\r\n                                </tr>\r\n                                <!-- /ko -->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/home/myhome/myhome.html',[],function () { return '<div class="route">\r\n    <section class="highlights">\r\n        <h2>Care Manager Home</h2>\r\n    </section>\r\n    <section data-type="flex">\r\n        <div>\r\n            <div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'calendar\' }, columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1>Calendar</h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'calendar\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="calendar" data-bind="fullCalendar: calendarOptions">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'myToDoList\', \'open\': myToDoListOpen }, columnSizer: {triggers: myToDoListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myToDoListOpen) }">\r\n                                                <header>\r\n                                                    <h1>My To-Do List - <span data-bind="text: myToDos().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls pad-left">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: addToDo, clickBubble: false" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                       \r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'myToDoList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>                                                   \r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/todo.panel\', activationData: { todos: myToDos, columns: activeTodoColumns, toggleSort: toggleTodoSort, selectedSortColumn: selectedTodoSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>                    \r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'myInterventionsList\', \'open\': myInterventionListOpen }, columnSizer: {triggers: myInterventionListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myInterventionListOpen) }">\r\n                                                <header>\r\n                                                    <h1>My Interventions - <span data-bind="text: myInterventions().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls pad-left">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'myInterventionsList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options">\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeInterventionColumns, toggleSort: toggleInterventionSort, selectedSortColumn: selectedInterventionSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'workList\', \'open\': myWorkListOpen }, columnSizer: {triggers: myWorkListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myWorkListOpen) }">\r\n                                                <header>\r\n                                                    <h1 class="nowrap">Work List</h1>\r\n                                                    <div class="controls pad-left">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'workList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\', disabled: !myWorkListOpen() }, click: function(){}, clickBubble: false"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <table class="nowrap">\r\n                                                            <tbody>\r\n                                                                <tr>\r\n                                                                    <th class="narrow">\r\n                                                                        <div class="checker" id="uniform-selectAll"><span><input id="selectAll" name="selectAll" type="checkbox" value="1"></span></div>\r\n                                                                    </th>\r\n                                                                    <th>Name</th>\r\n                                                                    <th>DOB</th>\r\n                                                                    <th>Age</th>\r\n                                                                    <th>Gender</th>\r\n                                                                </tr>\r\n                                                                <!-- ko foreach: patientsList -->\r\n                                                                <tr>\r\n                                                                    <td class="narrow">\r\n                                                                        <div class="checker" id="uniform-selected">\r\n                                                                            <span>\r\n                                                                                <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </td>\r\n                                                                    <td class="ellipsis">\r\n                                                                        <a data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { href: \'#patients/\' + id(), \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span data-bind="with: dOB"><span data-bind="text: $data, attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span data-bind="text: age" data-phyautomation="age"></span>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span class="line" data-bind="text: genderModel().Description"></span>\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                                <!-- /ko -->\r\n                                                            </tbody>\r\n                                                        </table>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>';});


define('text!views/home/population/index.html',[],function () { return '<section class="open" data-type="fixed">\r\n\r\n    <div class="column ">\r\n\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header>\r\n                                            <h1>Cohorts</h1>\r\n                                        </header>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="table-row">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <div class="body" style="height: 589px;">\r\n\r\n                                            <div class="content">\r\n                                                <table id="filters"><tbody>\r\n                                                    <tr>\r\n                                                        <th colspan="3">Choose up to three:\r\n                                                        </th>\r\n                                                    </tr>\r\n                                                    <tr class="condition active" id="condition_7">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span class="checked">\r\n                                                                    <input checked="true" data-comparator="contains" data-key="conditions" type="checkbox" value="7">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(31, 119, 180);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Arthritis\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    <tr class="condition active" id="condition_1">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span class="checked">\r\n                                                                    <input checked="" data-comparator="contains" data-key="conditions" type="checkbox" value="1">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(255, 127, 14);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Asthma\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    <tr class="condition" id="condition_2">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span>\r\n                                                                    <input data-comparator="contains" data-key="conditions" type="checkbox" value="2">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(44, 160, 44);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Diabetes\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</section>\r\n<section data-type="flex">\r\n    <div class="column open">\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header><h1>Population</h1></header>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="table-row">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <div class="body" style="height: 589px;">\r\n\r\n                                            <div class="content">\r\n                                                <svg id="visualizer" height="576" width="576">\r\n                                                </svg>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column ">\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header><h1>Individuals</h1>\r\n\r\n                                            <div class="options">\r\n                                                <select class="dark" data-placeholder="Actions" id="actions" name="actions" style="display: none;">\r\n\r\n                                                    <option value=""></option>\r\n\r\n\r\n                                                    <option value="Send Campaign">Send Campaign</option>\r\n\r\n\r\n                                                    <option value="Assign Care Program">Assign Care Program</option>\r\n\r\n\r\n                                                    <option value="Export">Export</option>\r\n\r\n\r\n                                                    <option value="Print">Print</option>\r\n                                                </select>\r\n\r\n                                                <div class="chosen-container chosen-container-single dark chosen-container-single-nosearch" style="width: 142px;" title="" id="actions_chosen"><a class="chosen-single chosen-default" tabindex="-1">\r\n\r\n                                                    <span>Actions\r\n                                                    </span>\r\n\r\n                                                    <div><b></b>\r\n                                                    </div></a>\r\n\r\n                                                    <div class="chosen-drop">\r\n\r\n                                                        <div class="chosen-search">\r\n                                                            <input type="text" autocomplete="off" readonly="">\r\n                                                        </div>\r\n                                                        <ul class="chosen-results">\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div></header>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="table-row">\r\n\r\n                                        <div class="table-cell">\r\n\r\n                                            <div class="body">\r\n\r\n                                                <div class="content">\r\n                                                    <table class="nowrap">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th class="narrow">\r\n                                                                    <div class="checker" id="uniform-selectAll">\r\n                                                                        <span>\r\n                                                                            <input id="selectAll" name="selectAll" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </th>\r\n                                                                <th class="narrow">ID\r\n                                                                </th>\r\n                                                                <th>Individual Name\r\n                                                                </th>\r\n                                                                <th>Care Gaps\r\n                                                                </th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody>\r\n                                                            <tr data-id="1">\r\n                                                                <td class="narrow">\r\n                                                                    <div class="checker" id="uniform-selected">\r\n                                                                        <span>\r\n                                                                            <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                                <td class="narrow">1\r\n                                                                </td>\r\n                                                                <td>\r\n                                                                    <a href="/patients/1/care_plans">Billy Condo</a>\r\n                                                                </td>\r\n                                                                <td>3\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                            <tr data-id="2" style="display: none;">\r\n                                                                <td class="narrow">\r\n                                                                    <div class="checker" id="uniform-selected">\r\n                                                                        <span>\r\n                                                                            <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                                <td class="narrow">2\r\n                                                                </td>\r\n                                                                <td>\r\n                                                                    <a href="/patients/1/care_plans">Johnny Hairband</a>\r\n                                                                </td>\r\n                                                                <td>2\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/home/todos/index.html',[],function () { return '<div class="route">\r\n    <section data-type="flex">\r\n        <div>\r\n            <div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'todopanel\' }, columnSizer: {triggers: {a: selectedView().name(), b: filtersHeaderOpen(), c: filtersOpen()}}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="filters" data-bind="visible: (filtersHeaderOpen())">\r\n                                            <div class="table-cell">\r\n                                                <div class="wrapper">\r\n                                                    <section class="pinned">\r\n                                                        <div class="row">\r\n                                                            <div class="span6">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="span1 gray">Filter:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style="display: inline-block" data-bind="chsnsingle: { options: views, value: selectedView, text: \'name\', label: \'programs\' }"></div>                                                                \r\n                                                            </div>\r\n                                                            <div class="span4 grey">\r\n                                                                <label data-bind="visible: (selectedCategories().length > 0 || selectedPriorities().length > 0)">\r\n                                                                    <i class="fa fa-filter red"></i>\r\n                                                                    Filters applied\r\n                                                                </label>\r\n                                                                <span style="color: whitesmoke;">-</span>\r\n                                                            </div>\r\n                                                            <div class="span2 grey">\r\n                                                                <div class="pull-right filters" data-bind="visible: (selectedCategories().length > 0 || selectedPriorities().length > 0)">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters, enable: (selectedCategories().length > 0 || selectedPriorities().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>&nbsp</span>\r\n                                                                </div>\r\n                                                                <!-- <span style="color: whitesmoke;">-</span> -->\r\n                                                            </div>                                                            \r\n                                                        </div>\r\n                                                    </section>\r\n                                                    <div class="filter-content" data-bind="visible: filtersOpen">\r\n                                                        <section>\r\n                                                            <div class="row">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span2 grey" data-bind="visible: selectedView() && selectedView().type() === \'todos\'">Priority:</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                                <div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span2 grey">Category:</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                            </div>\r\n                                                            <div class="row">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span6" data-bind="multiselect: { options: priorities, values: selectedPriorities, text: \'levelName\', label: \'categories\', idValue: \'id\' }, visible: selectedView() && selectedView().type() === \'todos\'"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span6" data-bind="multiselect: { options: categories, values: selectedCategories, text: \'name\', label: \'categories\', idValue: \'id\' }"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                            </div>\r\n                                                        </section>\r\n                                                    </div>\r\n                                                    <div class="toggle" data-bind="clickToggle: filtersOpen, css: filtersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- ko if: selectedView() && selectedView().type() === \'todos\' -->\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                    <h1><span data-bind="text: selectedView() ? selectedView().name : \'To-Do List\'"></span> - <span data-bind="text: myToDos().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle" ">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: addToDo, clickBubble: false" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        <i class="pointer fa fa-filter pad-horizontal" data-bind="clickToggle: filtersHeaderOpen, clickBubble: false, css: ((selectedCategories().length > 0 || selectedPriorities().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                        </i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todopanel\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>                                                   \r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/todo.panel\', activationData: { todos: myToDos, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: selectedView() && selectedView().type() === \'interventions\' -->\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                    <h1><span data-bind="text: selectedView() ? selectedView().name : \'Intervention List\'"></span> - <span data-bind="text: myInterventions().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls">\r\n                                                        <i class="pointer fa fa-filter pad-horizontal" data-bind="clickToggle: filtersHeaderOpen, clickBubble: false, css: ((selectedCategories().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                        </i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'interventionpanel\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options">\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- /ko -->\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'todochart\' }, columnSizer: {triggers:{a: selectedView().name()}}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content" data-bind="visible: selectedView() && selectedView().type() === \'todos\'">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1 data-bind="text: selectedView() ? selectedView().name : \'To Do Summary\'"></h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todochart\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: availableTodoSummaries, value: selectedTodoSummary, text: \'name\', label: \'todo-summaries\' }"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <em data-bind="if: myToDosChart().length === 0">No chart data available</em>\r\n                                                        <div class="graph todosummary">\r\n                                                            <div class="" data-bind="pieChart: myToDosChart, chartOptions: { title: \'Pie Chart\' }">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="content" data-bind="visible: selectedView() && selectedView().type() === \'interventions\'">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1 data-bind="text: selectedView() ? selectedView().name : \'To Do Summary\'"></h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todochart\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: availableInterventionSummaries, value: selectedInterventionSummary, text: \'name\', label: \'todo-summaries\' }"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <em data-bind="if: myInterventionsChart().length === 0">No chart data available</em>\r\n                                                        <div class="graph todosummary">\r\n                                                            <div class="" data-bind="pieChart: myInterventionsChart, chartOptions: { title: \'Pie Chart\' }">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>';});


define('text!views/insight/index.html',[],function () { return '<div class="route">\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/insight/reports/index.html',[],function () { return '<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Insight Reports</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n<!--                                                             <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>User Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>User Name</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: userName" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Password / Token</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: pwOrToken" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Organization</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: organization" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>Work with Reports</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Repo to search</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: repoName" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Get Reports List</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <button title="Enter user, password, and repo" class="btn small" data-bind="click: getReportsList, enable: canGetReports">Go</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section> -->\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>Load report</h3>\r\n                                                                    </div>                                                                    \r\n                                                                    <div class="span1 grey">\r\n                                                                        <div class="pull-right">\r\n                                                                            <i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': fetchingReport }"></i>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Report Path</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <!-- ko if: availableReports().length > 0 -->\r\n                                                                                <select data-bind="options: availableReports, value: reportPath, optionsText: \'Name\', optionsValue: \'Path\'"></select>\r\n                                                                            <!-- /ko -->\r\n                                                                            <!-- ko if: availableReports().length === 0 -->\r\n                                                                                <em>No reports available</em>\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n<!--                                                                     <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Selected Container</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <em data-bind="text: containerToLoad" />\r\n                                                                             ako if: !containerToLoad() \r\n                                                                            <em>Select a container to the right</em>\r\n                                                                            /ako\r\n                                                                        </div>\r\n                                                                    </div> -->\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Show report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <button class="btn small" data-bind="click: showDynamicReport, enable: (containerToLoad && !fetchingReport())">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                <!-- ko compose: activeSecondColumn -->\r\n                <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="content">\r\n                                                            <p><em>Select something to the left...</em></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/insight/widgets/active.report.html',[],function () { return '<div class="widget open">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">\r\n                                    <div class="pad-vertical">\r\n                                        <h1>Active Report</h1>\r\n                                        <!-- <div class="row">\r\n                                            <div class="span12" data-bind="chsnsingle: { options: numberOfContainers, value: selectedCount, text: \'Number\', label: \'container-count\' }"></div>\r\n                                        </div> -->\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <!-- ko foreach: reportContainers -->\r\n                                    <div class="row" data-bind="click: $parent.setActiveReportContainer">\r\n                                        <div class="span12">\r\n                                            <!-- <button class="btn small" data-bind="text: Name"></button> -->\r\n                                            <div data-bind="attr: { \'id\': Name }">\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/insight/widgets/reports.list.html',[],function () { return '<div class="widget open">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">                               \r\n                                    <div class="pad-vertical">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span12" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n                                            <input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" placeholder="Search" type="search" data-phyautomation="cohort-patient-search" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <!-- ko foreach: patientsList -->\r\n                                    <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                        <div class="patient-list">\r\n                                            <div class="ellipsis">\r\n                                                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                    <!--<div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                        <div class="push2 span8">\r\n                                            <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                Load more patients...\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>-->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/careplan/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div class="columns-wrapper">\r\n        <!-- ko with: planColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko with: detailsColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko if: ($parents[1].activeAction() && name() === \'ActionDetails\') -->\r\n                <!-- ko compose: { model: path, activationData: { activeAction: $parents[1].activeAction } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeModule() && name() === \'ModuleDetails\') -->\r\n                <!-- ko compose: { model: path, activationData: { activeModule: $parents[1].activeModule } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeProgram() && name() === \'ProgramDetails\' )-->\r\n                <!-- ko compose: { model: path, activationData: { activeProgram: $parents[1].activeProgram } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Plan</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/data/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Data Summary</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/goals/index.html',[],function () { return '<section class="slider" data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column open">\r\n            <!-- ko if: $parent.isComposed -->\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class="column details"><div class="widget-wrapper"></div></div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Goals</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/history/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>History</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/index.html',[],function () { return '<div class="route">\r\n    <section data-type="fixed" data-bind="css: { open: patientDataColumnOpen()  === true }">\r\n        <div class="column-wrapper">\r\n            <div class="column off-canvas" data-bind="css: { open: patientsListFlyoutOpen() === true }" data-phyautomation="cohort-column-pane">\r\n                <div class="widget-wrapper" data-bind="compose: \'patients/widgets/patients.list.flyout.html\'">\r\n                </div>\r\n            </div>\r\n            <div class="column" data-phyautomation="patient-details-pane">\r\n                <div class="widget-wrapper" data-bind="compose: \'patients/widgets/patients.details.html\'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <!-- ko if: isComposed() && navigation.currentRoute() && navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute, activationData: { selectedPatient: selectedPatient } } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/patients/medications/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko if: (path().indexOf(\'html\') === -1) -->\r\n                    <!-- ko compose: { model: path, activationData: activationData } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko ifnot: (path().indexOf(\'html\') === -1) -->\r\n                    <!-- ko compose: path -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>History</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/overview/index.html',[],function () { return '<section class="slider" data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div>\r\n        <div class="column open">\r\n            <div class="widget-wrapper">\r\n                <div class="widget shared" data-bind="css: { \'open\': todosPanelOpen, \'fullscreen\': fullScreenWidget() === \'todopanel\' }, columnSizer: {triggers: {a: todosPanelOpen(), b: todoFiltersHeaderOpen(), c: todoFiltersOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (todoFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">                                                        \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="span1 gray">Filter:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style="display: inline-block" data-bind="chsnsingle: { options: todoViews, value: selectedTodoView, text: \'name\', label: \'todoViews\' }"></div>                                                           \r\n                                                        </div>\r\n                                                        <div class="span4 grey">\r\n                                                            <label data-bind="visible: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span3 grey">\r\n                                                            <div class="pull-right filters" data-bind="visible: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetTodoFilters, enable: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>&nbsp</span>\r\n                                                            </div>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                                <div class="filter-content" data-bind="visible: todoFiltersOpen">\r\n                                                    <section>\r\n                                                        <div class="row">\r\n                                                            <div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="span2 gray">Priority:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                            <div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="span2 gray">Category:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        </div>\r\n                                                        <div class="row">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span6" data-bind="multiselect: { options: todoPriorities, values: selectedTodoPriorities, text: \'levelName\', label: \'todocategories\', idValue: \'id\' }"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span6" data-bind="multiselect: { options: todoCategories, values: selectedTodoCategories, text: \'name\', label: \'taskcategories\', idValue: \'id\' }"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                                        </div>\r\n                                                    </section>\r\n                                                </div>\r\n                                                <div class="toggle" data-bind="clickToggle: todoFiltersOpen, css: todoFiltersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(todosPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedTodoView() ? selectedTodoView().name : \'To-Do List\'"></span> - <span data-bind="text: myToDos().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(todoFiltersHeaderOpen, todosPanelOpen); }, clickBubble: false, css: ((selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0) ? \'red\' : (todoFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshTodoView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todopanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/todo.panel\', activationData: { todos: myToDos, columns: activeTodoColumns, toggleSort: toggleTodoSort, selectedSortColumn: selectedTodoSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="widget shared" data-bind="css: { \'open\': interventionsPanelOpen, \'fullscreen\': fullScreenWidget() === \'interventionpanel\' }, columnSizer: {triggers: {a: interventionsPanelOpen(), b: interventionFiltersHeaderOpen(), c: interventionFiltersOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (interventionFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="span1 gray">Filter:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style="display: inline-block" data-bind="chsnsingle: { options: interventionViews, value: selectedInterventionView, text: \'name\', label: \'interventionViews\' }"></div>\r\n                                                        </div>\r\n                                                        <div class="span5 grey">\r\n                                                            <label data-bind="visible: (selectedInterventionCategories().length > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span2 grey">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-right filters" data-bind="visible: (selectedInterventionCategories().length > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetInterventionFilters, enable: (selectedInterventionCategories().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>&nbsp</span>\r\n                                                            </div>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                                <div class="filter-content" data-bind="visible: interventionFiltersOpen">\r\n                                                    <section>\r\n                                                        <div class="row">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="span2 grey">Category:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        </div>\r\n                                                        <div class="row">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span3">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="span6" data-bind="multiselect: { options: interventionCategories, values: selectedInterventionCategories, text: \'name\', label: \'interventioncategories\', idValue: \'id\' }"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                        </div>\r\n                                                    </section>\r\n                                                </div>\r\n                                                <div class="toggle" data-bind="clickToggle: interventionFiltersOpen, css: interventionFiltersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(interventionsPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedInterventionView() ? selectedInterventionView().name : \'Intervention List\'"></span> - <span data-bind="text: myInterventions().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(interventionFiltersHeaderOpen, interventionsPanelOpen); }, clickBubble: false, css: (selectedInterventionCategories().length > 0 ? \'red\' : (interventionFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshInterventionView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': interventionsSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'interventionpanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeInterventionColumns, toggleSort: toggleInterventionSort, selectedSortColumn: selectedInterventionSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="widget shared" data-bind="css: { \'open\': taskPanelOpen, \'fullscreen\': fullScreenWidget() === \'taskpanel\' }, columnSizer: {triggers: {a: taskPanelOpen(), b: taskFiltersHeaderOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (taskFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">\r\n                                                            <label class="span1 gray">Filter:</label>\r\n                                                            <div style="display: inline-block" data-bind="chsnsingle: { options: taskViews, value: selectedTaskView, text: \'name\', label: \'taskViews\' }"></div>\r\n                                                        </div>\r\n                                                        <div class="span5 grey">\r\n                                                            <label data-bind="visible: (-1 > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span2 grey">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-right filters" data-bind="visible: (-1 > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetTaskFilters, enable: (-1 > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>&nbsp</span>\r\n                                                            </div>                                                            \r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(taskPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedTaskView() ? selectedTaskView().name : \'Task List\'"></span> - <span data-bind="text: myTasks().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter lightestblue pad-right" data-bind="click: function () { toggleHeaderOpen(taskFiltersHeaderOpen, taskPanelOpen); }, clickBubble: false, css: ((taskFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshTaskView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': tasksSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'taskpanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/task.panel\', activationData: { tasks: myTasks, columns: activeTaskColumns, toggleSort: toggleTaskSort, selectedSortColumn: selectedTaskSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column details"><div class="widget-wrapper"></div></div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: {triggers: {a: selectedPatient()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Overview</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/sections/additional.observations.html',[],function () { return '<div>\r\n    <div class="row" data-bind="with: activeDataType">\r\n        <h3 data-bind="text: (\'Additional \' + name()), attr: { title: (\'Additional \' + name()) }"></h3>\r\n    </div>\r\n    <div class="accordion-content columns">\r\n        <div class="column">\r\n            <form>\r\n                <div class="row pad top">\r\n                    <div class="span6">\r\n                        <div class="row">\r\n                            <input class="span12" type="text" data-bind="typeahead: { name: \'giveMeANAME\', taOptions: addtlObsBloodhound, displayKey: \'name\' }, value: selectedAdditionalObservation" placeholder="Enter name" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="span6 pull-left">\r\n                        <a href="#" data-bind="click: addNewObservation, enable: canAdd, css: { \'disabled\': !canAdd() }">\r\n                            <i class="icon-plus"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="row pad top" data-bind="if: additionalObservationsToEnter().length !== 0">\r\n                    <div class="row pad top">\r\n                        <div class="span3">\r\n                            <strong>Element</strong>\r\n                        </div>\r\n                        <div class="span2">\r\n                            <strong>Value</strong>\r\n                        </div>\r\n                        <div class="span2">\r\n                            <strong>Date</strong>\r\n                        </div>\r\n                        <div class="span4">\r\n                            <strong></strong>\r\n                        </div>\r\n                        <div class="span1">\r\n                            <strong></strong>\r\n                        </div>\r\n                    </div>\r\n                    <!-- ko foreach: additionalObservationsToEnter -->\r\n                    <!-- ko if: groupId() -->\r\n                    <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew  } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                    <!-- ko if: !groupId() -->\r\n                    <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew   } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/additional.problem.observations.html',[],function () { return '<div class="row">\r\n\t<div class="pull-right span12 line">\r\n\t\t<div class="span10">\r\n\t        <div class="pull-right">\r\n\t            <input class="span12" type="text" data-bind="typeahead: { name: \'focusProblems\', taOptions: probObsBloodhound, displayKey: \'name\' }, value: selectedObservation, valueUpdate: \'afterkeydown\'" placeholder="Search Focus Problem" />\r\n\t        </div>\r\n\t\t</div>\r\n\t\t<div class="span2">\r\n\t\t\t<button class="btn color small pull-right" data-bind="click: addNewObservation, enable: canAdd">\r\n\t\t\t\t<i class="icon-plus"></i>\r\n\t\t\t\t<span class="pad-left">Add</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/patients/sections/allergies.edit.html',[],function () { return '<div class="pad-vertical">\r\n    <div class="row">\r\n        <div class="span2">\r\n            <strong>Name</strong>\r\n        </div>\r\n        <div class="span3">\r\n            <strong>Type</strong>\r\n        </div>\r\n        <div class="span2">\r\n            <strong>Start Date</strong>\r\n        </div>\r\n        <div class="span2">\r\n            <strong>End Date</strong>\r\n        </div>\r\n        <div class="span2">\r\n            <strong>Status</strong>\r\n        </div>\r\n        <div class="span1">\r\n            &nbsp;\r\n        </div>\r\n    </div>\r\n    <!-- ko foreach: newPatientAllergies -->\r\n\t    <div class="row pad-top divider">\r\n\t        <div class="span2">\r\n\t        \t<span data-bind="text: allergyName"></span>\r\n\t        </div>\r\n\t        <div class="span3">\r\n\t        \t<!-- ko if: !isUserCreated() -->\r\n\t        \t<div class="ellipsis">\r\n\t        \t\t<span data-bind="text: typeString, attr: { title: typeString }"></span>\r\n\t        \t</div>\r\n\t        \t<!-- /ko -->\r\n\t        \t<div data-bind="visible: isUserCreated">\r\n                \t<div class="span9" data-bind="multiselect: { options: $parent.allergyTypes, values: allergyTypeIds, idValue: \'id\', text: \'name\', label: \'allergytypes\', stringValue: typeString, isRequired: true }"></div>\r\n\t        \t</div>\r\n\t        </div>\r\n\t        <div class="span2">\r\n        \t\t<input data-bind="value: startDate, datepickerEditable: startDate, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }, valueUpdate: \'afterkeydown\' " type="text" class="datepicker" >\r\n\t        </div>\r\n\t        <div class="span2">\r\n        \t\t<input data-bind="value: endDate, datepickerEditable: endDate, datepickerDynamicOptions: { minDate: startDate}, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'endDate\') !== -1) }, valueUpdate: \'afterkeydown\' " type="text" class="datepicker" >\r\n\t        </div>\r\n\t        <div class="span2">\r\n                <div class="span12" data-bind="chsnsingle: { options: $parent.allergyStatuses, value: status, text: \'name\', label: \'status\' }"></div>\r\n\t        </div>\r\n\t        <div class="span1 pull-right">\r\n\t            <a href="#" title="Remove" data-bind="click: $parent.removeAllergy">\r\n\t            \t<i class="close pull-right icon-cancel red"></i>\r\n\t        \t</a>\r\n\t        </div>\r\n\t    </div>\r\n\t    <div class="row pad-top">\r\n\t        <!-- <div class="span2">\r\n\t            &nbsp;\r\n\t        </div> -->\r\n\t        <div class="span4">\r\n\t            <strong>Reaction</strong>\r\n\t        </div>\r\n\t        <div class="span4">\r\n\t            <strong>Severity</strong>\r\n\t        </div>\r\n\t        <div class="span4">\r\n\t            <strong>Source</strong>\r\n\t        </div>\r\n\t    </div>\r\n\t    <div class="row pad-top">\r\n\t        <!-- <div class="span2">\r\n\t            &nbsp;\r\n\t        </div> -->\r\n\t        <div class="span4">\r\n\t            &nbsp;\r\n                <div class="span10" data-bind="multiselect: { options: $parent.reactions, values: reactionIds, idValue: \'id\', text: \'name\', label: \'reactions\', stringValue: reactionString }"></div>\r\n\t        </div>\r\n\t        <div class="span4">\r\n                <div class="span10" data-bind="chsnsingle: { options: $parent.severities, value: severity, text: \'name\', label: \'severities\' }"></div>\r\n\t        </div>\r\n\t        <div class="span4">\r\n\t            <div class="span10" data-bind="chsnsingle: { options: $parent.allergySources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n\t        </div>\r\n\t    </div>\r\n\t    <div class="row pad-top">\r\n\t    \t<div class="span3 grey">Notes:</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="span12">\r\n\t\t\t\t<textarea data-bind="value: notes"></textarea>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    <!-- /ko -->\r\n\t    <div class="divider"></div>\r\n</div>';});


define('text!views/patients/sections/allergies.search.html',[],function () { return '<div class="row">\r\n\t<div class="pull-right span12 line">\r\n\t\t<div class="span10">\r\n\t        <div class="pull-right tt-large">\r\n\t            <input class="span12" type="text" data-bind="typeahead: { name: \'allergies\', taOptions: allergyBloodhound, displayKey: \'DisplayName\' }, value: selectedAllergy, valueUpdate: \'afterkeydown\', initOptions: { hint: true, highlight: true, minLength: 3 }, showResultsCount: resultsMessage" placeholder="Search Allergies" />\r\n\t        </div>\r\n\t\t</div>\r\n\t\t<div class="span2">\r\n\t\t\t<button class="btn color small pull-right" data-bind="click: addNewAllergy, enable: canAdd">\r\n\t\t\t\t<i class="icon-plus"></i>\r\n\t\t\t\t<span class="pad-left">Add</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/patients/sections/background.html',[],function () { return '<section class="accordion hoverable open" data-phyautomation="patient-background-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Background</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'" data-phyautomation="patient-background-edit"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <div class="column" data-phyautomation="patient-background-whole">\r\n            <div class="row" data-bind="with: selectedPatient">           \r\n                <!-- ko ifnot: $parent.isExpanded -->\r\n                <div class="span12" data-bind="visible: background">\r\n                    <textarea data-bind="text: background, attr: { \'title\': background }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\r\n                    <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: $parent.isExpanded -->\r\n                <textarea data-bind="text: background, autoHeight: background, attr: { \'title\': background }" readonly="readonly" class="display-only span12" ></textarea>           \r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/barrier.details.html',[],function () { return '<div class="task span12" data-bind="with: barrier">\r\n    <div class="rule"></div>\r\n    <div class="barrier row rule">\r\n        <div class="details">\r\n            <div class="status line">\r\n                <!--<div class="pull-left">\r\n                    <i data-bind="css: (status() ? status().iconClass() : \'\')"></i>\r\n                </div>-->\r\n                <div class="name pad-icon-left accordion-toggle" data-bind="click: $parent.editBarrier">\r\n                    <div class="line-reset">\r\n                        <span data-bind="text: name, css: (status() ? status().textClass() : \'\')">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- ko if: $parent.isExpanded -->\r\n            <div class="accordion-content muted pad pad-icon-left">\r\n                <div class="row pad-bottom">\r\n                    <div class="span6 grey">\r\n                        Category\r\n                    </div>\r\n                    <div class="span6">\r\n                        <span data-bind="with: category">\r\n                            <span data-bind="text: name"></span>\r\n                        </span>                    \r\n                        <span data-bind="if: !category()">-</span>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="pull-left">\r\n                        <a class="edit_barrier icon-outset" href="#" data-bind="click: $parent.editBarrier"><i class="icon-edit"></i>Edit</a>\r\n                    </div>\r\n                    <div class="pull-right">\r\n                        <a class="delete_barrier" href="#" data-bind="click: $parent.deleteBarrier"><i class="icon-cancel"></i>Delete</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/basic.observations.html',[],function () { return '<div class="columns">\r\n    <div class="column">\r\n        <form>\r\n            <div class="row pad top">\r\n                <div class="span2">\r\n                    <strong>Element</strong>\r\n                </div>\r\n                <div class="span2">\r\n                    <strong>Value</strong>\r\n                </div>\r\n                <div class="span3">\r\n                    <strong>Date</strong>\r\n                </div>\r\n                <div class="span4">\r\n                    <strong></strong>\r\n                </div>\r\n                <div class="span1">\r\n                    <strong></strong>\r\n                </div>\r\n            </div>\r\n            <!-- ko foreach: computedBasicObservations -->\r\n            <!-- ko if: groupId -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko if: !groupId() -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </form>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/care.team.html',[],function () { return '<section class="accordion hoverable open">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Care Team</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: editCareTeam">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <ul class="dotted column">\r\n            <!-- ko if: primaryCareTeam().length === 0 -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: assignToMe" class="btn color small">Assign to me</button>\r\n                    <br>\r\n                    <small class="grey">Primary Care Manager</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- ko foreach: primaryCareTeam -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <strong data-bind="text: preferredName, attr: { \'title\': preferredName }"></strong>\r\n                    <br>\r\n                    <small class="grey" data-bind="with: type, attr: { \'title\': (\'Primary \' + type().name()) }">\r\n                        <span data-bind="text: (\'Primary \' + name())"></span>\r\n                    </small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n        <ul class="dotted column">\r\n            <!-- ko if: canReassignToMe() -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: reassignToMe" class="btn color small">Assign to me</button>\r\n                    <br>\r\n                    <small class="grey">Primary Care Manager</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- ko foreach: secondaryCareTeam -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <strong data-bind="text: preferredName, attr: { \'title\': preferredName }"></strong>\r\n                    <br>\r\n                    <small class="grey" data-bind="attr: { \'title\': type().name() }" data-bind="text: type().name()"></small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/clinicalBackground.html',[],function () { return '<section class="accordion hoverable open" data-phyautomation="patient-background-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Background</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'" data-phyautomation="patient-background-edit"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <div class="column" data-phyautomation="patient-background-whole">\r\n            <div class="row" data-bind="with: selectedPatient">           \r\n                <!-- ko ifnot: $parent.isExpanded -->\r\n                <div class="span12" data-bind="visible: background">\r\n                    <textarea data-bind="text: background, attr: { \'title\': background }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\r\n                    <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: $parent.isExpanded -->\r\n                <textarea data-bind="text: background, autoHeight: background, attr: { \'title\': background }" readonly="readonly" class="display-only span12" ></textarea>           \r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/communications.html',[],function () { return '<section class="accordion hoverable open">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Communication</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="with: contactCard, visible: isOpen">\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.primaryCommunications -->\r\n            <div data-bind="compose: template">\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="row">\r\n                <div class="span4 grey">Mode</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !prefCommMethods()">Unknown</em>\r\n                    <span class="row" data-bind="visible: prefCommMethods, text: prefCommMethods, attr: { \'title\': prefCommMethods }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Days</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredDaysOfWeek()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredDaysOfWeek, text: preferredDaysOfWeek, attr: { \'title\': preferredDaysOfWeek }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Time</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredTimesOfDay()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredTimesOfDay, text: preferredTimesOfDay, attr: { \'title\': preferredTimesOfDay }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row" data-bind="with: timeZone">\r\n                <div class="span4 grey">Time Zone</div>\r\n                <div class="span8" data-bind="text: name, attr: { \'title\': name }"></div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Language</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredLanguage()">Unknown</em>\r\n                    <!-- ko with: preferredLanguage -->\r\n                    <span class="row" data-bind="text: name, attr: { \'title\': name }"></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.secondaryCommunications -->\r\n            <div data-bind="compose: template">\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : phoneOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-phone"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'phone opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;phone opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : emailOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-email"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'email opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;email opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : addressOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-address"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'mail opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;mail opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : textOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-sms"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'text opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;text opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="row" data-bind="with: secondaryLanguagesText">\r\n                <div class="span4 grey">Language</div>\r\n                <div class="span8 line short">\r\n                    <span class="row" data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/data.list.html',[],function () { return '<div class="content">\r\n\t<div class="clinicaldatalist">\r\n\t\t<div class="vitalslist">\r\n\t\t\t<table class="no-wrap">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t<th>Type</th>\r\n\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t<th>Value</th>\r\n\t\t\t\t\t\t<th>Start Date</th>\r\n\t\t\t\t\t\t<th>End Date</th>\r\n\t\t\t\t\t\t<th>Source</th>\r\n\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<!-- ko foreach: computedObservationGroups -->\r\n\t\t\t\t\t\t<tr data-bind="style: { backgroundColor: $index()%2 == 0 ? \'whitesmoke\' : \'\' }">\r\n\t\t\t\t\t\t\t<td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<a class="toggle vitalshistory filters" href="#" data-bind="click: $parent.toggleExpand">\r\n\t\t\t\t\t\t\t\t\t<i class="toggle" data-bind="css: isOpen() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<!-- ko with: parentObservation -->\r\n\t\t\t\t\t\t\t<td data-bind="with: type"><span data-bind="text: name"></td>\r\n\t\t\t\t\t\t\t<td data-bind="text: name"></td>\r\n\t\t\t\t\t\t\t<td data-bind="text: computedValueString"></td>\r\n\t\t\t\t\t\t\t<td data-bind="DateOrDash: startDate"></td>\r\n\t\t\t\t\t\t\t<td data-bind="DateOrDash: endDate"></td>\r\n\t\t\t\t\t\t\t<td data-bind="text: source() ? source() : \'-\'"></td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<span data-bind="with: state">\r\n\t\t\t\t\t\t\t\t\t<span data-bind="text: name"></span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<!-- ko if: !state() -->\r\n\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<a title="Remove" data-bind="visible: false"> <!-- click: $parents[1].removeObservation -->\r\n\t\t\t\t\t\t\t\t\t<i class="icon-cancel" style="color: lightgrey;"></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<!-- ko if: isOpen -->\r\n\t\t\t\t\t\t\t<!-- ko foreach: computedObservations -->\r\n\t\t\t\t\t\t\t<tr data-bind="style: { backgroundColor: $parentContext.$index()%2 == 0 ? \'whitesmoke\' : \'\'    }" class="hidden vhist" style="display: table-row;">\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t<td data-bind="text: computedValueString"></td>\r\n\t\t\t\t\t\t\t\t<td data-bind="DateOrDash: startDate"></td>\r\n\t\t\t\t\t\t\t\t<td data-bind="DateOrDash: endDate"></td>\r\n\t\t\t\t\t\t\t\t<td data-bind="text: source() ? source() : \'-\'"></td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<span data-bind="with: state">\r\n\t\t\t\t\t\t\t\t\t\t<span data-bind="text: name"></span>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<!-- ko if: !state() -->\r\n\t\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<a title="Remove" data-bind="visible: false"> <!-- click: $parents[1].removeObservation -->\r\n\t\t\t\t\t\t\t\t\t\t<i class="icon-cancel" style="color: lightgrey;"></i>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t\t<!-- ko if: computedObservations().length === 0 -->\r\n\t\t\t\t\t\t\t<tr data-bind="style: { backgroundColor: $index()%2 == 0 ? \'whitesmoke\' : \'\'    }" class="hidden vhist" style="display: table-row;">\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<!-- ko if: isLoadingObs -->\r\n\t\t\t\t\t\t\t\t\t<i class="fa fa-spinner fa-spin"></i>\r\n\t\t\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t<td colspan="10">\r\n\t\t\t\t\t\t\t\t\t<em>No additional data</em>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<!-- ko if: computedObservationGroups().length === 0 -->\r\n\t\t\t\t<em class="grey">No observations available for the individual.</em>\r\n\t\t\t<!-- /ko -->\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/patients/sections/demographics.html',[],function () { return '<section class="accordion hoverable open" data-phyautomation="patients-demographics-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Individual Details</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen, with: selectedPatient">\r\n        <div class="column" data-phyautomation="patients-demographics-left">\r\n            <div class="row">\r\n                <div class="span4">\r\n                    <img alt="Individual image" class="profile-pic" data-bind="attr: { src: genderModel().LargeImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span8 pad vertical">\r\n                    <h2 class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: fullFirstName, attr: { \'title\': fullFirstName }" data-phyautomation="full-first-name"></span>\r\n                    </h2>\r\n                    <h2 class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: fullLastName, attr: { \'title\': fullLastName }" data-phyautomation="full-last-name"></span>\r\n                    </h2>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Age\r\n                </div>\r\n                <div class="span8">\r\n                    <span data-bind="text: age" data-phyautomation="age"></span>\r\n                    <span class="grey" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\'" data-phyautomation="dob"></span></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey ellipsis" data-bind="text: (displayLabel() || \'ID\')"></div>\r\n                <div class="span8 ellipsis">\r\n                    <em class="row grey" data-bind="visible: !displaySystemId()">Unknown</em>\r\n                    <span class="row" data-bind="visible: displaySystemId, text: displaySystemId, attr: { \'title\': displaySystemId }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Priority\r\n                </div>\r\n                <div class="span8">\r\n                    <!-- ko with : priorityModel -->\r\n                    <img alt="Priority" data-bind="attr: { src: imageSource }" data-phyautomation="priority" />\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Flagged\r\n                </div>\r\n                <div class="span8">\r\n                    <a href="#" data-bind="click: $parent.toggleFlagged">\r\n                        <i data-bind="attr: { class: (flagged() ? \'red\' : \'grey\') + \' icon-flag\' }" data-phyautomation="flagged"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column" data-phyautomation="patients-demographics-right">\r\n            <div class="row" data-bind="with: formattedSSN">\r\n                <div class="span5 grey">SSN</div>\r\n                <div class="span6 filter-toggle" data-bind="text: $data, click: $parents[1].showFullSSN"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/dropdown.w.addnew.html',[],function () { return ' <div>  \r\n    <div class="span2 align-right grey">\r\n        <span data-bind="text: selectionLabel"><span>\r\n    </div>   \r\n    \r\n    <!-- ko ifnot: isCreateNew() -->\r\n    <div class="span3 pad-left">\r\n        <div data-bind="chsnsingle: { options: selectOptions(), value: selectedValue, text: optionTextProp, idValue: optionIdValueProp, \r\n\t\t\t\t\t\tlabel: optionsLabel, caption: \'Choose...\' , disabled: !isEnabled(),\r\n\t\t\t\t\t\tisSearch: isSearch, stickeySearchItemText: AddNewOptionText, \r\n\t\t\t\t\t\tisCancel: true, title: getSelectedValueText(), isFocused: isDropDownFocused, searchQueryText: searchQueryText}"></div>\r\n    </div> \r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: isCreateNew() -->    \r\n    <div class="span3 pad-left filters">\r\n        <input type="text" data-bind="value: getCustomValue(), \r\n\t\t\t\t\tattr: {placeholder: placeholderText, title: getCustomValue()}, valueUpdate: \'afterkeydown\', hasFocus: isFocused,\r\n\t\t\t\t\tevent: { \'keyup\': checkEscape }" \r\n\t\t\t\t\tstyle="width: 84%;" />\r\n\t\t<i class="pointer close pull-right icon-cancel toggle" data-bind="click: cancelChanges"></i>\r\n    </div>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/patients/sections/focus.areas.html',[],function () { return '<section class="accordion hoverable open" data-phyautomation="patients-focus-areas-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Focus Problems</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen, with: problems">\r\n        <!-- ko if: length !== 0 -->\r\n        <ul class="column" data-phyautomation="patients-problems-left">\r\n            <li><em>Primary</em></li>\r\n            <!-- ko foreach: $parent.primaryProblems -->\r\n                <li class="push2 ellipsis" data-bind="text: name, attr: { \'title\': name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !$parent.isExpanded() && $parent.primaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...\r\n                </a>\r\n            </li>\r\n        </ul>\r\n        <ul class="column pad vertical" data-phyautomation="patients-problems-right">\r\n            <li><em>Secondary</em></li>\r\n            <!-- ko foreach: $parent.secondaryProblems -->\r\n                <li class="push2 ellipsis" data-bind="text: name, attr: { \'title\': name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !$parent.isExpanded() && $parent.secondaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n            </li>\r\n        </ul>\r\n        <!-- /ko -->\r\n        <!-- ko if: length === 0 -->\r\n        <em class="grey">No primary or secondary focus problems</em>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/patients/sections/goal.details.html',[],function () { return '<div class="span3 accordion open" data-bind="with: computedGoal">\r\n    <header class="rule">\r\n        <div class="span12">\r\n            <div class="large grey muted line pad-horizontal">\r\n                Goal Details\r\n                <a class="accordion-toggle pull-left open pad-right filters" data-bind="css: { \'open\': isExpanded }, clickToggle: isExpanded">\r\n                    <i class="icon-angle-double-down toggle"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </header>\r\n    <div class="span12 details">\r\n        <div class="status">\r\n            <div class="rule"></div>\r\n            <div class="row pad-icon-left rule">\r\n                <div class="span6 grey">\r\n                    Start Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: startDate">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-icon-left">\r\n                <div class="span6 grey">\r\n                    Target Value\r\n                </div>\r\n                <div class="span6" data-bind="text: targetValue() ? targetValue() : \'-\'">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-icon-left">\r\n                <div class="span6 grey">\r\n                    Target Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: targetDate">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-icon-left">\r\n                <div class="span6 grey">\r\n                    Type\r\n                </div>\r\n                <div class="span6">\r\n                    <span data-bind="with: type">\r\n                        <span data-bind="text: name"></span>\r\n                    </span>                    \r\n                    <span data-bind="if: !type()">-</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: isExpanded -->\r\n        <div class="accordion-content pad pad-icon-left muted">\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Focus Area(s)\r\n                </div>\r\n                <div class="span6" data-bind="text: focusAreaString, attr: { \'title\': focusAreaString }">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Program(s)\r\n                </div>\r\n                <div class="span6" data-bind="text: programString">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Source\r\n                </div>\r\n                <div class="span6">\r\n                    <span data-bind="with: source">\r\n                        <span data-bind="text: name"></span>\r\n                    </span>                    \r\n                    <span data-bind="if: !source()">-</span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    End Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: endDate">\r\n                </div>\r\n            </div>\r\n            <div data-bind="foreach: customAttributes().sort($parent.alphabeticalOrderSort)">\r\n                <div data-bind="compose: displayPath">\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="pull-left">\r\n                    <a class="edit_goal icon-outset" href="#" data-bind="click: $parent.edit"><i class="icon-edit"></i>Edit</a>\r\n                </div>\r\n                <div class="pull-right">\r\n                    <a class="delete_goal" href="#" data-bind="click: $parent.delete"><i class="icon-cancel"></i>Delete</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <div class="span12 transparent">-</div>\r\n    <div class="">\r\n        <div class="span12">\r\n            <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                Barriers\r\n                <a class="accordion-toggle pull-right" data-bind="click: $parent.addBarrier">\r\n                    <i class="icon-plus"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <!-- ko foreach: barriers -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/sections/barrier.details\', activationData: { barrier: $data  } } -->\r\n            <!-- /ko -->\r\n        <!-- /ko -->\r\n        <div class="span12" data-bind="visible: barriers().length === 0">\r\n            <div class="status line">\r\n                <div class="name pad-icon-left">\r\n                    <div class="line-reset">\r\n                        <em class="grey">No barriers.</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/goals.html',[],function () { return '<div class="content">\r\n    <!-- ko foreach: computedGoals -->\r\n        <!-- ko if: !isNew() -->\r\n            <section class="accordion" data-bind="css: { \'open\': isOpen }">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: isOpen, css: { \'open\': isOpen }">\r\n                    <h2 class="status">\r\n                        <div class="span10">\r\n                            <div class="pull-left">\r\n                                <i data-bind="css: status().iconClass"></i>\r\n                            </div>\r\n                            <div class="name pad-icon-left">\r\n                                <span data-bind="text: name, attr: { \'title\': name }, css: status().textClass">\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </h2>\r\n                </div>\r\n                <div class="accordion-content" data-bind="if: isOpen()">\r\n                    <!-- ko compose: { model: \'viewmodels/patients/sections/goal.details\', activationData: { goal: $data  } } -->\r\n                    <!-- /ko -->\r\n                    <div class="span9 accordion" data-bind="css: { \'open\': isExpanded }">\r\n                        <header class="rule">\r\n                            <div class="span6">\r\n                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                    Tasks\r\n                                    <a class="accordion-toggle pull-right" data-bind="click: $parent.addTask">\r\n                                        <i class="icon-plus"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div class="span6 last">\r\n                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                    Interventions\r\n                                    <a class="accordion-toggle pull-right" data-bind="click: $parent.addIntervention">\r\n                                        <i class="icon-plus"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </header>\r\n                        <div class="task row">\r\n                            <div class="span6">\r\n                                <div class="row rule"></div>\r\n                                <!-- ko foreach: tasks -->\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/task.details\', activationData: { task: $data  } } -->\r\n                                    <!-- /ko -->\r\n                                <!-- /ko -->\r\n                                <!-- ko if: tasks().length === 0 -->\r\n                                <div class="intervention row rule">\r\n                                    <div class="details">\r\n                                        <div class="status line">\r\n                                            <div class="name pad-icon-left">\r\n                                                <div class="line-reset">    \r\n                                                    <em class="grey">No tasks</em>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="span6 last">\r\n                                <div class="row rule"></div>\r\n                                <!-- ko foreach: interventions -->\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/intervention.details\', activationData: { intervention: $data  } } -->\r\n                                    <!-- /ko -->\r\n                                <!-- /ko -->\r\n                                <!-- ko if: interventions().length === 0 -->\r\n                                <div class="intervention row rule">\r\n                                    <div class="details">\r\n                                        <div class="status line">\r\n                                            <div class="name pad-icon-left">\r\n                                                <div class="line-reset">    \r\n                                                    <em class="grey">No interventions</em>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="pad-top">\r\n            </div>\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: computedGoals().length > 0 -->\r\n        <section class="accordion"></section>\r\n    <!-- /ko -->\r\n    <!-- ko if: computedGoals().length === 0 -->\r\n        <em class="grey">No goals match the criteria</em>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/patients/sections/intervention.details.html',[],function () { return '<div class="intervention row rule" data-bind="with: intervention">\r\n    <div class="details span12">\r\n        <div class="status line">\r\n            <div class="pull-left" data-bind="with: status">\r\n                <i data-bind="css: iconClass"></i>\r\n            </div>\r\n            <div class="name pad-icon-left accordion-toggle" data-bind="click: $parent.editIntervention">\r\n                <div class="line-reset" data-bind="with: status">\r\n                    <span data-bind="text: $parent.description, css: textClass">\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: $parent.isExpanded -->\r\n        <div class="accordion-content muted pad pad-icon-left">\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Start Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: startDate">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Category\r\n                </div>\r\n                <div class="span6">\r\n                    <span data-bind="with: category">\r\n                        <span data-bind="text: name"></span>\r\n                    </span>                    \r\n                    <span data-bind="if: !category()">-</span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Assigned To\r\n                </div>\r\n                <div class="span6">\r\n                    <span data-bind="with: assignedTo">\r\n                        <span data-bind="text: preferredName"></span>\r\n                    </span>                    \r\n                    <span data-bind="if: !assignedTo()">-</span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="pull-left">\r\n                    <a class="edit_intervention icon-outset" href="#" data-bind="click: $parent.editIntervention"><i class="icon-edit"></i>Edit</a>\r\n                </div>\r\n                <div class="pull-right">\r\n                    <a class="delete_intervention" href="#" data-bind="click: $parent.deleteIntervention"><i class="icon-cancel"></i>Delete</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/medication.edit.html',[],function () { return '<div class="force-down" data-bind="with: newPatientMedication, css:{\'body\': medication !== undefined}">\r\n    <div class="row">\r\n        <div class="span12 line">\r\n            <div class="row">\r\n                <div class="span2 align-right grey">\r\n                    &nbsp\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.categories, value: category, text: \'name\', label: \'medication-category\', caption: \'Choose...\' }"></div>\r\n                </div>\r\n                <div class="span2 align-right grey">\r\n                    Type:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.types, value: type, text: \'name\', label: \'medication-type\', caption: \'Choose...\', isRequired: true }, css: { \'invalid\': !type() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2 align-right grey">\r\n                    Name:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <!-- ko if: isNew -->\r\n                        <input class="span12" type="text" data-bind="typeahead: { name: \'medications\', taOptions: $parent.medicationBloodhound, displayKey: \'DisplayName\' }, value: name, valueUpdate: \'afterkeydown\', initOptions: { hint: false, highlight: true, minLength: 3, overrideSelected: $parent.overrideSelected }, showResultsCount: $parent.resultsMessage, css: { \'invalid\': !$parent.canAdd() }" placeholder="Search Medications" />\r\n                    <!-- /ko -->\r\n                    <!-- ko ifnot: isNew -->\r\n                        <span><pre data-bind="text: name"></pre></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span2 align-right grey">\r\n                    Status:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.statuses, value: status, text: \'name\', label: \'medication-status\', caption: \'Choose...\' }"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Source:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'medication-source\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Prescribed by:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input type="text" data-bind="value: prescribedBy" size="50" />\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Start Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input id="startDate" data-bind="value: startDate, datepickerEditable: startDate, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }, valueUpdate: \'afterkeydown\' " type="text" class="datepicker" > \r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            End Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input id="endDate" data-bind="value: endDate, datepickerEditable: endDate, datepickerDynamicOptions: { minDate: startDate }, css: { \'invalid\': (validationErrorsArray().indexOf(\'endDate\') !== -1) }, valueUpdate: \'afterkeydown\' " type="text" class="datepicker" >\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top divider filters">       \r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData: \r\n                { selectedValue: strength, \r\n\t\t\t\t\toptionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewStrengthValue,\r\n\t\t\t\t\tisEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.strengths, \r\n                    selectionLabel: \'Strength\',\r\n                    optionsLabel: \'medication-strength\',\r\n                    placeholderText: \'Enter new strength\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n\t\t\t\t\tisAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n        <i class="pointer icon-cancel pull-right pad-right toggle" data-bind="click: $parent.resetDropdowns"></i>\r\n    </div>\r\n    <div class="row pad-top">\r\n        \r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData: \r\n                { selectedValue: form, \r\n\t\t\t\t\toptionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewFormValue,\r\n\t\t\t\t\tisEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.dosageForms, \r\n                    selectionLabel: \'Dose Form\',\r\n                    optionsLabel: \'dosage-form\',\r\n                    placeholderText: \'Enter new dose form\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n\t\t\t\t\tisAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n                   \r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData: \r\n                { selectedValue: route, \r\n\t\t\t\t\toptionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewRouteValue,\r\n\t\t\t\t\tisEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.routes, \r\n                    selectionLabel: \'Route\',\r\n                    optionsLabel: \'medication-route\',\r\n                    placeholderText: \'Enter new route\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n\t\t\t\t\tisAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n\r\n        </div>\r\n    <div class="row pad-top">\r\n\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <div class="span2 align-right grey">\r\n            Quantity:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input type="text" data-bind="value: freqQuantity" />\r\n        </div>\r\n\t\t<!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData: \r\n                { selectedValue: frequency, \r\n                    isCreateNew: $parent.isAddingNewFrequencyValue,\r\n                    isCreateNewEnabled: $parent.isCreateNewFrequencyEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.frequency,\r\n\t\t\t\t\toptionTextProp: \'name\',\r\n                    selectionLabel: \'Frequency\',\r\n                    optionsLabel: \'medication-freq-howoften\',\r\n                    placeholderText: \'Enter new frequency\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n\t\t\t\t\tisAddNewOption: false,\r\n\t\t\t\t\tnewCustomValue:\tcustomFrequency \r\n                }} -->\r\n        <!-- /ko -->\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">Reason:</div>\r\n        <div class="span8 pad-left">\r\n            <input data-bind="value: reason" placeholder="reason for medication" size="100" type="text" />\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span3 grey">\r\n            Notes:\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span12">\r\n            <textarea data-bind="value: notes" maxlength="1000"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Created On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: createdOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Updated On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: updatedOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            System:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="text: systemName">\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/medications.html',[],function () { return '<div class="content">\r\n    <div class="row">\r\n        <div class="span1 grey">\r\n            Type\r\n        </div>\r\n        <div class="span2 grey">\r\n            Name\r\n        </div>\r\n        <div class="span2 grey">\r\n            Strength\r\n        </div>\r\n        <div class="span3 grey">\r\n            SIG\r\n        </div>\r\n        <div class="span3 grey">\r\n            Reason\r\n        </div>\r\n        <div class="span1"></div>\r\n    </div>\r\n    <div class="row divider">\r\n        <div class="span1 icon-otc"\r\n        style="font-style: italic">\r\n        </div>\r\n        <div class="span2">\r\n            <a class="edit" href="#">Aspirin</a>\r\n        </div>\r\n        <div class="span2">\r\n            80 mg\r\n        </div>\r\n        <div class=\r\n        "span3 ellipsis">\r\n            Take One Tablet Daily\r\n        </div>\r\n        <div class="span3">\r\n            Heart Attack Protection\r\n        </div>\r\n        <div class="span1">\r\n            <a class="edit hover-toggle grey fa fa-lg fa-pencil" href="#" style="font-style: italic"></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/patients/sections/medications.search.html',[],function () { return '<div></div>';});


define('text!views/patients/sections/notes.html',[],function () { return '<section class="accordion" data-bind="css: { \'open\': isOpen() }, with: group">\r\n    <a data-bind="clickToggle: $parent.isOpen" href="#">\r\n        <h3 class="row line grey accordion-toggle" data-bind="text: Name, attr: { \'title\': Name }"></h3>\r\n    </a>\r\n    <!-- ko foreach: Notes -->\r\n    <div class="row line filter-toggle" data-bind="click: $parents[1].setActiveNote, css: { \'active\': $parents[1].activeNote() === $data }, visible: $parents[1].isOpen">\r\n        <div class="span2 pad-left small grey pull-left" data-bind="Time: createdOn"></div>\r\n        <div class="span2 grey ellipsis">\r\n            <span data-bind="with: type">\r\n                <span data-bind="text: name, attr:{title: name}"></span>\r\n            </span>\r\n            <span data-bind="if: !type()">-</span>\r\n        </div>\r\n        <div class="span5 ellipsis" data-bind="text: displayText, attr: { \'title\': text }"></div>\r\n        <div class="span2 grey ellipsis"><span data-bind="with: createdBy"><span data-bind="text: preferredName, attr: { \'title\': preferredName }"></span></span></div>\r\n        <div class="span1">\r\n            <a href="#" data-bind="click: $parents[1].deleteNote, clickBubble: false">\r\n                <i class="icon-cancel red"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/sections/problems.list.html',[],function () { return '<div>\r\n\t<div class="row">\r\n\t\t<div class="span3">\r\n\t\t\t<strong>Name</strong>\r\n\t\t</div>\r\n\t\t<div class="span2">\r\n\t\t\t<strong>Display</strong>\r\n\t\t</div>\r\n\t\t<div class="span3">\r\n\t\t\t<strong>Start Date</strong>\r\n\t\t</div>\r\n\t\t<div class="span3">\r\n\t\t\t<strong>State</strong>\r\n\t\t</div>\r\n\t\t<div class="span1">\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- ko foreach: computedProblemObservations -->\r\n\t\t<!-- ko compose: "templates/focusproblem.edit.html" -->\r\n\t\t<!-- /ko -->\r\n\t<!-- /ko -->\r\n</div>';});


define('text!views/patients/sections/programs.html',[],function () { return '<div data-bind="foreach: computedPrograms">\r\n    <section class="accordion" data-bind="css: { \'open\': isOpen() }">\r\n        <div class="row accordion-toggle" data-bind="click: $parent.toggleOpen">\r\n            <h2 class="span12 ellipsis">\r\n                <a href="#" data-bind="text: name, clickBubble: false" ></a>\r\n                <a data-bind="click: $parent.setActiveProgram, clickBubble: false, css: { \'active\': $parent.activeProgram() === $data }, arrowMover: \'\'" class="icon filter-toggle pull-right" href="#" title="Program Details">\r\n                    <i class="icon-info"></i>\r\n                </a>\r\n            </h2>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: isOpen">\r\n            <table class="goal-action">\r\n                <tbody>\r\n                    <tr>\r\n                        <th class="filters">\r\n                            <i class="pointer toggle" data-bind="css: allModulesOpen() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\', click: $parent.toggleAllExpanded"></i>\r\n                            Modules\r\n                        </th>\r\n                        <th>\r\n                          <span class="span9">Action</span>\r\n                          <span class="span1"><i class="icon-priority-empty large grey-darker" stye="font-size: 24px;"></i></span>\r\n                          <span class="span1"><i class="fa fa-spinner lightestblue" style="font-size: 17px; width: 25px;"></i></span>\r\n                          <span class="span1"><i class="icon-check green" stye="font-size: 20px;"></i></span>\r\n                        </th>\r\n                    </tr>\r\n                    <!-- ko foreach: modules -->\r\n                    <tr data-bind="visible: enabled() === true">\r\n                        <td class="filter-toggle module" data-bind="clickToggle: isOpen, clickBubble: false, css: { \'active\': $parents[1].activeModule() === $data }, arrowMover: \'\'">\r\n                            <span class="image-container span1">\r\n                                <!-- ko if: completed() === true -->\r\n                                <i class="icon-check green"></i>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <span data-bind="with: name" class="span9">\r\n                                <!-- ko if: $parent.completed() === true -->\r\n                                <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em><em> - <span data-bind="Date: $parent.dateCompleted"></span></em>\r\n                                <!-- /ko -->\r\n                                <!-- ko if: $parent.completed() === false -->\r\n                                <span data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <span class="details pull-right" data-bind="click: $parents[1].setActiveModule, clickBubble: false">\r\n                                <i class="icon-info"></i>\r\n                            </span>\r\n                        </td>\r\n                        <td class="flush">\r\n                            <!-- ko if: isOpen -->\r\n                            <table class="nowrap">\r\n                                <tbody data-bind="foreach: actions().sort($root.alphabeticalOrderSort)">\r\n                                    <tr class="filter-toggle" data-bind="css: { \'active\': $data === $parents[2].activeAction(), \'dirty\': hasChanges() }, visible: !archived() && enabled()">\r\n                                        <td class="image-container" data-bind="click: $parents[2].setActiveAction, arrowMover: \'\'">\r\n                                            <!-- ko if: hasChanges() -->\r\n                                            <i data-bind="attr: { class: (isSaving() ? \'fa-spin\' : \'\') + \' fa fa-spinner lightestblue\' }" />\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: (!hasChanges() && completed() === true)  -->\r\n                                            <i class="icon-check green"></i>\r\n                                            <!-- /ko -->\r\n                                        </td>\r\n                                        <td class="ellipsis" data-bind="click: $parents[2].setActiveAction, with: name, arrowMover: \'\'">\r\n                                            <!-- ko if: $parent.enabled() === false || $parent.completed() === true && !$parent.isSaving() || $parent.completed() === true && !$parent.hasChanges() && $parent.isSaving() -->\r\n                                                <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em>\r\n                                                <!-- ko if: $parent.completed() === true -->\r\n                                                <em><span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span> - <span data-bind="Date: $parent.dateCompleted, attr: { \'title\': $parent.dateCompleted }"></span></em>\r\n                                                <!-- /ko -->\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: $parent.enabled() === true && $parent.completed() === false && !$parent.hasChanges() -->\r\n                                                <span data-bind="text: $data, attr: { \'title\': $data }"></span> <span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span>\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: $parent.hasChanges() -->\r\n                                                <strong class="inprogress" ><span data-bind="text: $data, attr: { \'title\': $data }"></span> <span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span></strong>\r\n                                            <!-- /ko -->\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            <!-- /ko -->\r\n                            <!-- ko if: !isOpen() -->\r\n                            <div class="span12 filter-toggle pad-left" data-bind="clickToggle: isOpen">\r\n                                <div class="row">\r\n                                  <span class="span9 transparent">-</span>\r\n                                  <span class="span1" data-bind="text: notStartedActionsCount, css: { \'transparent\': notStartedActionsCount() === \'-\' }"></span>\r\n                                  <span class="span1" data-bind="text: openActionsCount, css: { \'transparent\': openActionsCount() === \'-\' }"></span>\r\n                                  <span class="span1 grey" data-bind="text: completeActionsCount, css: { \'transparent\': completeActionsCount() === \'-\' }"></span>\r\n                                </div>\r\n                            </div>\r\n                            <!-- /ko -->\r\n                        </td>\r\n                    </tr>\r\n                    <!-- /ko -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </section>\r\n</div>\r\n<div data-bind="visible: computedPrograms().length === 0">\r\n    <section class="accordion open">\r\n        <div class="row accordion-toggle">\r\n            <h2>\r\n                <a></a>\r\n            </h2>\r\n        </div>\r\n        <div class="accordion-content">\r\n            <table class="goal-action">\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <em class="grey">No programs match the criteria.</em>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </section>\r\n</div>';});


define('text!views/patients/sections/recent.individuals.html',[],function () { return '<div class="pad-top" data-bind="foreach: currentUser().computedRecentIndividuals">\t\r\n    <div class="row ellipsis" data-bind="click: $parent.choosePatient, css: { \'filter-toggle active strong\': $parent.selectedPatient() === $data  }">\r\n        <div class="columns patient-list">\r\n            <div class="column ellipsis">\r\n                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n            </div>\r\n            <div class="column ellipsis">\r\n                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/sections/system.ids.html',[],function () { return '<section class="accordion hoverable open" data-phyautomation="patients-system-ids-pane">\r\n    <div class="row line accordion-toggle open">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">IDs</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing">Edit</a>\r\n    </div>\r\n    <ul class="accordion-content columns" data-bind="visible: isOpen">\r\n        <ul class="column" data-bind="foreach: computedPatientSystems">\r\n            <li class="push2 pad-bottom ellipsis">\r\n                <span class="ellipsis" data-bind="text: displayLabel, attr: { title: displayLabel }"></span>: <span class="ellipsis" data-bind="text: systemId, attr: { title: systemId }"></span>\r\n            </li>\r\n        </ul>\r\n    </ul>\r\n</section>';});


define('text!views/patients/sections/task.details.html',[],function () { return '<div class="row rule">\r\n    <div class="span12 details" data-bind="with: task">\r\n        <div class="status line rule">\r\n            <div class="pull-left">\r\n                <i data-bind="css: status().iconClass"></i>\r\n            </div>\r\n            <div class="name pad-icon-left accordion-toggle" data-bind="click: $parent.editTask">\r\n                <div class="line-reset" data-bind="with: status">\r\n                    <span data-bind="text: $parent.description, css: textClass">\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: $parent.isExpanded -->\r\n        <div class="accordion-content muted pad pad-icon-left">\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Start Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: startDate">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Target Value\r\n                </div>\r\n                <div class="span6" data-bind="text: targetValue() ? targetValue() : \'-\'">\r\n                </div>\r\n            </div>\r\n            <div class="row pad-bottom">\r\n                <div class="span6 grey">\r\n                    Target Date\r\n                </div>\r\n                <div class="span6" data-bind="DateOrDash: targetDate">\r\n                </div>\r\n            </div>\r\n            <div data-bind="foreach: customAttributes().sort($parent.alphabeticalOrderSort)">            \r\n                <div data-bind="compose: displayPath">\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="pull-left">\r\n                    <a class="edit_task icon-outset" href="#" data-bind="click: $parent.editTask"><i class="icon-edit"></i>Edit</a>\r\n                </div>\r\n                <div class="pull-right">\r\n                    <a class="delete_task" href="#" data-bind="click: $parent.deleteTask"><i class="icon-cancel"></i>Delete</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/patients/tabs/action.details.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeAction">\r\n    <div class="fullscreen-span6">\r\n        <h4 class="line short pull-left pad-right fullscreen-only">Current</h4>\r\n        <div class="row">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                    <h3>Action Description</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                    <div class="column">\r\n                        <!-- ko ifnot: description() -->\r\n                        <em class="grey">No description available</em>\r\n                        <!-- /ko -->\r\n                        <div class="row pad-top">\r\n                            <!-- ko if: description() -->\r\n                            <p data-bind="text: description"></p>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <section class="accordion hoverable">\r\n                <div class="row accordion-toggle">\r\n                    <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                        <h3>Individual Attributes</h3>\r\n                    </div>\r\n                    <div class="span1">\r\n                        <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                    </div>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                    <div>\r\n                        <div class="column">\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned By:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned To:</span>\r\n                                </div>\r\n                                <!-- ko if: assignToId() -->\r\n                                <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                                <!-- /ko -->\r\n                                <!-- ko ifnot: assignToId() -->\r\n                                <div class="span9"><em class="grey">Unassigned</em></div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="row pad-top divider">\r\n                                <div class="span3 align-left">\r\n                                    <span>Action State:</span>\r\n                                </div>\r\n                                <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                                <!-- <div class="span9" data-bind="text: elementStateModel().name"></div> -->\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Start Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>End Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <!-- <div class="row pad-top divider">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                    <h3>Action Attributes</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-left">\r\n                            <span>Authored By:</span>\r\n                        </div>\r\n                        <div class="span9" data-bind="text: authoredBy"></div>\r\n                    </div>\r\n                    <div class="row pad-top divider">\r\n                        <div class="span3 align-left">\r\n                            <span>Action Version:</span>\r\n                        </div>\r\n                        <div class="span9"><span data-bind="text: actionVersion"></span> <span data-bind="if: actionVersionUpdatedOn">(<span data-bind="Date: actionVersionUpdatedOn"></span>)</span></div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div> -->\r\n        <div class="row pad-top divider" data-bind="with: $parent.computedObjectives">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].objectivesSectionOpen">\r\n                    <h3>Objectives</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].objectivesSectionOpen">\r\n                    <table class="goal-action" data-bind="if: showing">\r\n                        <colgroup>\r\n                            <col span="1" style="width: 40%">\r\n                            <col span="1" style="width: 40%" >\r\n                            <col span="1" style="width: 20%" >\r\n                        </colgroup>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>\r\n                                    <strong>Category</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Objective</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Target</strong>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="foreach: $data">\r\n                            <tr>\r\n                                <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                                <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                                <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <!-- ko if: !showing() -->\r\n                    <em class="grey">No objectives set.</em>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider"></div>\r\n    </div>\r\n    <div class="fullscreen-only span6 muted" data-bind="with: $parent.selectedHistoricalAction">\r\n        <h4 class="line short pull-left pad-right">History</h4>\r\n        <div class="span6" data-bind="chsnsingle: { options: $parents[1].availableHistoricalActions, value: $parents[1].selectedHistoricalAction, text: \'formattedCompletedDate\', label: \'action-actions\', caption: \'Choose...\' }"></div>        \r\n        <div class="row">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].descriptionSectionOpen">\r\n                    <h3>Action Description</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].descriptionSectionOpen">\r\n                    <div class="column">\r\n                        <!-- ko ifnot: description() -->\r\n                        <em class="grey">No description available</em>\r\n                        <!-- /ko -->\r\n                        <div class="row pad-top">\r\n                            <!-- ko if: description() -->\r\n                            <p data-bind="text: description"></p>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <section class="accordion hoverable">\r\n                <div class="row accordion-toggle">\r\n                    <div class="span11"  data-bind="clickToggle: $parents[1].individualAttributesSectionOpen">\r\n                        <h3>Individual Attributes</h3>\r\n                    </div>\r\n                    <div class="span1"><!-- \r\n                        <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a> -->\r\n                    </div>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].individualAttributesSectionOpen">\r\n                    <div>\r\n                        <div class="column">\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned By:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned To:</span>\r\n                                </div>\r\n                                <!-- ko if: assignToId() -->\r\n                                <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                                <!-- /ko -->\r\n                                <!-- ko ifnot: assignToId() -->\r\n                                <div class="span9"><em class="grey">Unassigned</em></div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="row pad-top divider">\r\n                                <div class="span3 align-left">\r\n                                    <span>Action State:</span>\r\n                                </div>\r\n                                <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                                <!-- <div class="span9" data-bind="text: elementStateModel().name"></div> -->\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Start Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>End Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider" data-bind="with: $parents[1].historicalComputedObjectives">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[2].objectivesSectionOpen">\r\n                    <h3>Objectives</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[2].objectivesSectionOpen">\r\n                    <table class="goal-action" data-bind="if: showing">\r\n                        <colgroup>\r\n                            <col span="1" style="width: 40%">\r\n                            <col span="1" style="width: 40%" >\r\n                            <col span="1" style="width: 20%" >\r\n                        </colgroup>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>\r\n                                    <strong>Category</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Objective</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Target</strong>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="foreach: $data">\r\n                            <tr>\r\n                                <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                                <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                                <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <!-- ko if: !showing() -->\r\n                    <em class="grey">No objectives set.</em>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider"></div>\r\n    </div>\r\n    <div class="fullscreen-only span6" data-bind="visible: !$parent.selectedHistoricalAction()">\r\n        <em>No historical data</em>\r\n    </div>\r\n</div>';});


define('text!views/patients/tabs/action.steps.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeAction">\r\n\t<div class="fullscreen-span6">\r\n    <h4 class="line short pull-left pad-right fullscreen-only">Current</h4>\r\n    <!-- ko foreach: computedPath -->\r\n        <!-- ko compose: stepType().path -->\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n\t</div>\r\n\t<div class="fullscreen-only span6 muted" data-bind="with: $parent.selectedHistoricalAction">\r\n        <h4 class="line short pull-left pad-right">History</h4>\r\n        <div class="span6" data-bind="chsnsingle: { options: $parents[1].availableHistoricalActions, value: $parents[1].selectedHistoricalAction, text: \'formattedCompletedDate\', label: \'action-actions\', caption: \'Choose...\' }"></div>        \r\n        <!-- ko foreach: computedPath -->\r\n            <!-- ko compose: stepType().path -->\r\n            <!-- /ko -->\r\n        <!-- /ko -->\r\n\t</div>\r\n    <div class="fullscreen-only span6" data-bind="visible: !$parent.selectedHistoricalAction()">\r\n        <em>No historical data</em>\r\n    </div>\r\n</div>';});


define('text!views/patients/tabs/module.details.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeModule">\r\n    <div class="row">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                <h3>Module Description</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                <div class="column">\r\n                    <!-- ko ifnot: description() -->\r\n                    <em class="grey">No description available</em>\r\n                    <!-- /ko -->\r\n                    <div class="row pad-top">\r\n                        <!-- ko if: description() -->\r\n                        <p data-bind="text: description"></p>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion hoverable">\r\n            <div class="row accordion-toggle">\r\n                <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                    <h3>Individual Attributes</h3>\r\n                </div>\r\n                <div class="span1">\r\n                    <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                </div>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                <div>\r\n                    <div class="column">\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned By:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned To:</span>\r\n                            </div>\r\n                            <!-- ko if: assignToId() -->\r\n                            <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                            <!-- /ko -->\r\n                            <!-- ko ifnot: assignToId() -->\r\n                            <div class="span9"><em class="grey">Unassigned</em></div>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Module State:</span>\r\n                            </div>\r\n                            <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Start Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>End Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <!-- <div class="row pad-top divider">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                <h3>Module Attributes</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Authored By:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: authoredBy"></div>\r\n                </div>\r\n                <div class="row pad-top divider">\r\n                    <div class="span3 align-left">\r\n                        <span>Module Version:</span>\r\n                    </div>\r\n                    <div class="span9"><span data-bind="text: moduleVersion"></span> <span data-bind="if: moduleVersionUpdatedOn">(<span data-bind="Date: moduleVersionUpdatedOn"></span>)</span></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>     -->\r\n    <div class="row pad-top divider" data-bind="with: $parent.computedObjectives">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].objectivesSectionOpen">\r\n                <h3>Objectives</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parents[1].objectivesSectionOpen">\r\n                <table class="goal-action" data-bind="if: showing">\r\n                    <colgroup>\r\n                        <col span="1" style="width: 40%">\r\n                        <col span="1" style="width: 40%" >\r\n                        <col span="1" style="width: 20%" >\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>\r\n                                <strong>Category</strong>\r\n                            </th>\r\n                            <th>\r\n                                <strong>Objective</strong>\r\n                            </th>\r\n                            <th>\r\n                                <strong>Target</strong>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody data-bind="foreach: $data">\r\n                        <tr>\r\n                            <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                            <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                            <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- ko if: !showing() -->\r\n                <em class="grey">No objectives set.</em>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider"></div>\r\n</div>';});


define('text!views/patients/tabs/module.objectives.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n</div>';});


define('text!views/patients/tabs/program.details.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeProgram">\r\n    <div class="row">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                <h3>Program Description</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                <div class="column">\r\n                    <!-- ko ifnot: description() -->\r\n                    <em class="grey">No description available</em>\r\n                    <!-- /ko -->\r\n                    <div class="row pad-top">\r\n                        <!-- ko if: description() -->\r\n                        <p data-bind="text: description"></p>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                    <!-- ko if: eligibilityRequirements() || eligibilityDatesStatement() -->\r\n                    <div class="row">\r\n                        <h3>Eligibility Requirements</h3>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <p data-bind="text: eligibilityRequirements"></p>\r\n                        <p data-bind="text: eligibilityDatesStatement"></p>\r\n                    </div>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion hoverable">\r\n            <div class="row accordion-toggle">\r\n                <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                    <h3>Individual Attributes</h3>\r\n                </div>\r\n                <div class="span1">\r\n                    <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                </div>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                <div>\r\n                    <div class="column">\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned By:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned To:</span>\r\n                            </div>\r\n                            <!-- ko if: assignToId() -->\r\n                            <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                            <!-- /ko -->\r\n                            <!-- ko ifnot: assignToId() -->\r\n                            <div class="span9"><em class="grey">Unassigned</em></div>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Program State:</span>\r\n                            </div>\r\n                            <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Start Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>End Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                        </div>\r\n                        <!-- ko with: attributes -->\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Graduated:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: graduatedFlagModel() ? graduatedFlagModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Eligibility Status:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: eligibilityModel() ? eligibilityModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Enrollment Status:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text:  enrollmentModel() ? enrollmentModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                        <!-- <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Market:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: market"></div>\r\n                        </div> -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                <h3>Program Attributes</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Authored By:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: authoredBy"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Start Date:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="DateOrNothing: startDate"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>End Date:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="DateOrNothing: endDate"></div>\r\n                </div>\r\n                <div class="row pad-top divider">\r\n                    <div class="span3 align-left">\r\n                        <span>Program Version:</span>\r\n                    </div>\r\n                    <div class="span9"><span data-bind="text: programVersion"></span> <span data-bind="if: programVersionUpdatedOn">(<span data-bind="Date: programVersionUpdatedOn"></span>)</span></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Program Template:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: templateName"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Template Version:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: templateVersion"></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider"></div>\r\n</div>';});


define('text!views/patients/tabs/program.goals.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n    <div class="row pad-top">\r\n        <table class="goal-action">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        <strong>Focus Area(s)</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Goal</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Source</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Type</strong>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td class="wrap">Verbalize benefits of healthy eating</td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td class="wrap">Increase daily servings of fruits/veggies </td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term\t\t\t\t</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td>Improve diet</td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>';});


define('text!views/patients/tabs/program.objectives.html',[],function () { return '<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n    <div class="row pad-top" data-bind="with: computedObjectives">\r\n        <table class="goal-action" data-bind="if: showing">\r\n            <colgroup>\r\n                <col span="1" style="width: 40%">\r\n                <col span="1" style="width: 40%" >\r\n                <col span="1" style="width: 20%" >\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        <strong>Category</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Objective</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Target</strong>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: $data">\r\n                <tr>\r\n                    <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                    <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                    <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <!-- ko if: !showing() -->\r\n        <em class="grey">No objectives set.</em>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/action.details.html',[],function () { return '<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeAction, columnSizer: {triggers: activeAction}">\r\n    <div class="content">\r\n        <!-- <div class="arrow-runner">\r\n            <i class="arrow"></i>\r\n        </div> -->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis"><span data-bind="text: (name().length > 18 ? name().substring(0, 18) + \'...\' : name()), attr: { \'title\': name }"></span></h1> \r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">\r\n                                    <div data-bind="chsnsingledark: { options: $parent.actionActions, value: $parent.selectedAction, text: \'text\', label: \'action-actions\', caption: \'Action\', disabled: $parent.programsSaving }"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                        <div data-bind="compose: { model: path, activationData: { tab: $data, activeAction: $parent, selectedHistoricalAction: $parents[1].selectedHistoricalAction, availableHistoricalActions: $parents[1].availableHistoricalActions } }"></div>\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- <div class="footer">\r\n                        <div class="table-cell">\r\n                            <footer>\r\n                                <div class="tray"></div>\r\n                                <div class="row">\r\n                                    <div class="fullscreen-span6">\r\n                                        <button name="button" type="submit">Complete</button>\r\n                                        <button class="pull-right" name="button" type="reset">Save</button>\r\n                                        <a class="tray-toggle" data-remote="true" data-toggle="tooltip" href="/patients/1/program_tasks/139/newnote" title="Add Note">\r\n                                            <i class="icon-notes"></i>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            </footer>\r\n                        </div>\r\n                    </div> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/allergies.html',[],function () { return '<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen(), c: filtersOpen()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="filters" data-bind="visible: filtersHeaderOpen">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <div class="row">\r\n                                        <div class="span5">\r\n                                            <label class="row">\r\n                                                <span class="span3">Type:</span>\r\n                                                <div class="span8" data-bind="multiselect: { options: allergyTypes, values: selectedAllergyTypes, text: \'name\', label: \'allergytypes\', idValue: \'id\' }"></div>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class="span5">&nbsp</div>\r\n                                        <div class="span2" data-bind="click: resetFilters">\r\n                                            <div class="pull-right filters grey">\r\n                                                <i class="icon-filter_clear pointer blue toggle" data-bind="visible: canReset" style="position: inherit;" title="Clear Filter"></i>\r\n                                                <span>&nbsp</span>\r\n                                            </div>\r\n                                        </div>                                        \r\n                                    </div>\r\n                                </section>\r\n                                <div class="filter-content" data-bind="visible: filtersOpen">\r\n                                    <section>\r\n                                        <div class="row">\r\n                                            <div class="span4 grey">Status:</div>\r\n                                        </div>\r\n                                        <div class="row">\r\n                                            <div class="span4" data-bind="multiselect: { options: allergyStatuses, values: selectedAllergyStatuses, text: \'name\', label: \'allergystatuses\', idValue: \'id\' }"></div>\r\n                                        </div>\r\n                                    </section>\r\n                                </div>\r\n                                <div class="toggle" data-bind="clickToggle: filtersOpen, css: filtersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header class="ellipsis">\r\n                                <h1>\r\n                                    <span data-bind="text: widget.name"></span>\r\n                                </h1>\r\n                                <div class="controls">\r\n\t\t\t\t\t\t\t\t\t<div class="toggle" data-bind="">\r\n\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: addAllergy, clickBubble: false" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(filtersHeaderOpen, isOpen); }, clickBubble: false, css: ((selectedAllergyTypes().length > 0 || selectedAllergyStatuses().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))"></i>                                    \r\n\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshData, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': allergySaving }"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div data-bind="compose: { model: \'viewmodels/templates/allergies.panel\', activationData: { allergies: myAllergies, columns: activeAllergyColumns, toggleSort: toggleAllergySort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/careplan.html',[],function () { return '<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen(), \'open\': isOpen }, columnSizer: {triggers: isOpen}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header pointer" data-bind="click: $parents[1].toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 data-bind="text: name"></h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content" data-bind="with: $parents[1].selectedPatient, visible: $parents[1].selectedPatient() && $parents[1].selectedPatient().programs().length > 0">\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/programs\', activationData: { selectedPatient: $data, activeAction: $parents[2].activeAction, activeProgram: $parents[2].activeProgram, activeModule: $parents[2].activeModule, elementStateIds: $parent.elementStateIds, sortOverride: $parent.sortOverride } } -->\r\n                                    <!-- /ko -->\r\n                                </div>\r\n                                <div class="content" data-bind="visible: $parents[1].selectedPatient() && $parents[1].selectedPatient().programs().length === 0">\r\n                                    <em class="grey">No programs assigned to this individual.</em>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/data.summary.html',[],function () { return '<div class="widget open fullscreen" data-bind="columnSizer: {triggers: {a: $parents[1].isOpen, b: $parents[1].selectedPatient()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n<!--                     <div class="filters">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <label>\r\n                                        <span>Data Type</span>\r\n                                        <select data-placeholder="Data Type">\r\n                                            <option>Labs</option>\r\n                                            <option>Problem List</option>\r\n                                            <option>Vitals</option>\r\n                                        </select>\r\n                                    </label>\r\n                                    <label>\r\n                                        <span>Name</span>\r\n                                        <select>\r\n                                            <option>Blood Pressure</option>\r\n                                            <option>BMI</option>\r\n                                            <option>HbA1c</option>\r\n                                            <option>Height</option>\r\n                                            <option>LDL</option>\r\n                                            <option>Waist Circumference</option>\r\n                                            <option>Weight</option>\r\n                                        </select>\r\n                                    </label>\r\n                                    <label>\r\n                                        <span>Reported By</span>\r\n                                        <select>\r\n                                            <option>All</option>\r\n                                            <option>Care Manager</option>\r\n                                            <option>Individual</option>\r\n                                        </select>\r\n                                    </label>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div> -->\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Data Summary</h1>\r\n                                <div class="options">\r\n\t\t\t\t\t\t\t\t\t<div class="toggle">\r\n\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: $parents[1].addData, disable: $parents[1].isEditing" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t</div>                                    \r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell" data-bind="with: $parents[1].selectedPatient">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/data.list\', activationData: { selectedPatient: $data } }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/goals.html',[],function () { return '<div class="widget" data-bind="css: { \'open\': isOpen }, columnSizer: {triggers: {a: isOpen(), b: $parents[1].selectedPatient(), c:$parents[1].selectedPatient().goals()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header class="pointer" data-bind="click: $parents[1].toggleWidgetOpen">\r\n                                <h1 data-bind="text: name"></h1>\r\n                                <div class="options goals-options" data-bind="if: canAdd">\r\n\t\t\t\t\t\t\t\t\t<div class="toggle" >\r\n\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: $parents[1].addGoal, disable: $parent.isEditing, clickBubble: false" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row" data-bind="with: $parents[1].selectedPatient">\r\n                        <!-- ko if: goals().length > 0 -->\r\n                        <div class="table-cell">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/goals\', activationData: { selectedPatient: $data, statusIds: $parent.statusIds, emptyMesssage: $parent.emptyMesssage, sortOverride: $parent.sortOverride } }">\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                        <!-- ko if: goals().length === 0 -->\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <em class="grey">No goals created for this individual.</em>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/history.detail.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: true">\r\n    <div class="content">\r\n        <!-- <div class="arrow-runner"><i class="arrow" style="top: 125px;"></i></div> -->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Details</h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content" data-bind="with: $parents[1].activeNote">\r\n                                    <div class="row pad-top">\r\n                                        <strong>Content:</strong>\r\n                                    </div>\r\n                                    <div class="row pad-top">\r\n                                        <textarea readonly="readonly" class="display-only span12" data-bind="text: text, autoHeight: text, attr: { \'title\': text }"></textarea>\r\n                                    </div>\r\n                                    <div class="row pad-top divider"></div>\r\n                                    <div data-bind="visible: type().name().toLowerCase() === \'touchpoint\'">\r\n                                        <div class="row pad-top" data-bind="with: method">\r\n                                            <strong class="span3">Method:</strong>\r\n                                            <span class="span9" data-bind="text: name"></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="with: outcome">\r\n                                            <strong class="span3">Outcome:</strong>\r\n                                            <span class="span9" data-bind="text: name"></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="with: who">\r\n                                            <strong class="span3">Who:</strong>\r\n                                            <span class="span9" data-bind="text: name"></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="with: source">\r\n                                            <strong class="span3">Source:</strong>\r\n                                            <span class="span9" data-bind="text: name"></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="with: duration">\r\n                                            <strong class="span3">Duration:</strong>\r\n                                            <span class="span9" data-bind="text: name"></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="if: type().name().toLowerCase() === \'touchpoint\'">\r\n                                            <strong class="span3">Validated:</strong>\r\n                                            <span class="span9" data-bind="text: validatedIdentity() ? \'Yes\' : \'No\' "></span>\r\n                                        </div>\r\n                                        <div class="row pad-top" data-bind="if: contactedOn">\r\n                                            <strong class="span3">Date / Time:</strong>\r\n                                            <span class="span9" data-bind="DateTime: contactedOn"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row pad-top" data-bind="with: programString">\r\n                                        <strong class="span3">Program(s):</strong>\r\n                                        <span class="span9" data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                    </div>\r\n                                    <div class="row pad-top" data-bind="if: createdOn">\r\n                                        <strong class="span3">Created:</strong>\r\n                                        <span class="span9"><span data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/history.list.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>History</h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <ul class="dividers">\r\n                                        <li class="row line grey">\r\n                                            <div class="span2">Create Date</div>\r\n                                            <div class="span2">Type</div>\r\n                                            <div class="span5">Content</div>\r\n                                            <div class="span2">By</div>\r\n                                            <div class="span1"> </div>\r\n                                        </li>\r\n                                        <!-- ko foreach: $parents[1].groups -->\r\n                                        <li>\r\n                                            <!-- ko compose: { model: \'viewmodels/patients/sections/notes\', activationData: { activeNote: $parents[2].activeNote, group: $data } } -->\r\n                                            <!-- /ko -->\r\n                                        </li>\r\n                                        <!-- /ko -->\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/medications.html',[],function () { return '<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="filters" data-bind="visible: (filtersHeaderOpen())">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <div class="row">\r\n                                        <div class="span6">\r\n                                            <label class="row">\r\n                                                <span class="span2">Types:</span>\r\n                                                <div class="span4" data-bind="multiselect: { options: medSuppTypes, values: selectedMedicationTypes, text: \'name\', label: \'types\', idValue: \'id\' }"></div>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class="span3 grey">\r\n                                            <label data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                                <i class="fa fa-filter red"></i>\r\n                                                Filters applied\r\n                                            </label>\r\n                                            <span style="color: whitesmoke;">-</span>\r\n                                        </div>\r\n                                        <div class="span2 grey" data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                            <div class="pull-right filters">\r\n                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters" title="Clear Filter"></i>\r\n                                                <span>&nbsp</span>\r\n                                            </div>\r\n                                        </div>                                        \r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 data-bind="text: widget.name"></h1>\r\n                                <div class="controls">\r\n\t\t\t\t\t\t\t\t\t<div class="toggle" data-bind="visible: allowAdd">\r\n\t\t\t\t\t\t\t\t\t\t<i class="pointer icon-plus" data-bind="click: addMedication, clickBubble: false" title="Add"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n                                    <i class="pointer fa fa-filter pad-horizontal" data-bind="click: function () { filtersHeaderOpen(!filtersHeaderOpen()); }, clickBubble: false, css: ((selectedMedicationTypes().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                    </i>\r\n\t\t\t\t\t\t\t\t\t<div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': medicationSaving }"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n                                    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="clickToggle: isFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>                                \r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div data-bind="compose: { model: \'viewmodels/templates/medications.panel\', activationData: { medications: myMedications, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/module.details.html',[],function () { return '<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeModule, columnSizer: true">\r\n    <div class="content">\r\n        <!-- <div class="arrow-runner">\r\n            <i class="arrow"></i>\r\n        </div> -->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis span10" data-bind="text: name, attr: { \'title\': name }"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                            <!-- ko compose: { model: path, activationData: { tab: $data, activeModule: $parent } } -->\r\n                                            <!-- /ko -->\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/patients.details.html',[],function () { return '<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <div class="controls">\r\n                                    <div class="toggle single-arrow-left" data-method="open" data-type="remove" data-phyautomation="patients-details-left-arrow" data-bind="click: minimizePatientsDataColumn"></div>\r\n                                    <div class="toggle double-arrow-right" data-method="open" data-type="add" data-phyautomation="patients-details-right-arrows" data-bind="click: maximizePatientsDataColumn"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body" data-bind="with: selectedPatient">\r\n                                <div class="content">\r\n                                <!-- ko if: $data -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/demographics\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/system.ids\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/focus.areas\',  activationData: { problems: problems, selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/background\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/communications\',  activationData: { contactCard: contactCard }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/care.team\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- /ko -->\r\n                                </div>\r\n                            </div>                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/patients.list.flyout.html',[],function () { return '<div class="widget open" data-bind="columnSizer: \'nobody\'">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Recent</h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle single-arrow-left" data-bind="click: minimizePatientsListFlyoutColumn" data-method="open" data-type="remove" data-phyautomation="cohort-left-arrow"></div>\r\n                                    <div class="toggle double-arrow-right" data-bind="click: maximizePatientsListFlyoutColumn" data-method="open" data-type="add" data-phyautomation="cohort-right-arrows"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/recent.individuals\', activationData: { selectedPatient: selectedPatient, choosePatient: choosePatient } } -->\r\n                                    <!-- /ko -->\r\n                                    <div class="pad-vertical divider">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span10" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n                                            <input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" placeholder="Search" type="search" data-phyautomation="cohort-patient-search" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body" data-bind="setHeightFromPrev: patientsList">\r\n                                <div class="content" data-phyautomation="cohort-patient-list">\r\n                                    <!-- ko foreach: patientsList -->\r\n                                    <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                        <div class="columns patient-list">\r\n                                            <div class="column ellipsis">\r\n                                                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                            </div>\r\n                                            <div class="column ellipsis">\r\n                                                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                    <div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                        <div class="push2 span8">\r\n                                            <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                Load more...\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/program.details.html',[],function () { return '<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeProgram, columnSizer: true">\r\n    <div class="content">\r\n<!--         <div class="arrow-runner">\r\n            <i class="arrow"></i>\r\n         </div>-->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis span8" data-bind="text: name, attr: { \'title\': name }"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">                                    \r\n                                    <div data-bind="chsnsingledark: { options: $parent.programActions, value: $parent.selectedAction, text: \'text\', label: \'programs\', caption: \'Action\' }"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                            <!-- ko compose: { model: path, activationData: { tab: $data, activeProgram: $parent } } -->\r\n                                            <!-- /ko -->\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/widgets/todos.html',[],function () { return '<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Goals</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn color small" data-bind="click: $parents[1].addGoal, disable: $parents[1].isEditing">\r\n                                        <i class="icon-plus"></i>\r\n                                        <span class="pad-left">New Goal</span>\r\n                                    </button>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell" data-bind="with: $parents[1].selectedPatient">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/goals\', activationData: { activeGoal: $parents[2].activeGoal, selectedPatient: $data } }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/populations/index.html',[],function () { return '';});


define('text!views/programdesigner/customattributes/datepicker.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="datepicker: computedValue().value, datepickerOptions: { }" type="text" class="datepicker">\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datepicker.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="Date: computedValue().value"></p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datetimepicker.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">\r\n\t\t<!-- ko if: Modernizr.inputtypes.time -->\r\n\t\t\t<input data-bind="timepicker: value, valueUpdate: blur" type="time">\r\n\t\t<!-- /ko -->\r\n\t\t<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n\t\t\t<input data-bind="jqtimepicker: value" type="text">\r\n\t\t<!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datetimepicker.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">        \r\n\t\t<!-- ko if: Modernizr.inputtypes.time -->\r\n\t\t\t<input data-bind="timepicker: value, attr: { \'disabled\': !value() }" type="time">\t\t\t\r\n\t\t<!-- /ko -->\r\n\t\t<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n\t\t\t<input data-bind="jqtimepicker: value, attr: { \'disabled\': !value() }" type="text">\r\n\t\t<!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/input.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="value: computedValue().value" />\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/input.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="value: computedValue().value"></p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/multiselect.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <div class="span9" data-bind="multiselect: { options: options, values: values, idValue: \'value\', text: \'display\', label: \'multi\' }"></div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/multiselect.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="foreach: values">\r\n            <span data-bind="text: value"></span>\r\n        </p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/singleselect.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span4">\r\n        <div data-bind="chsnsingle: { options: options, value: computedValue().value, text: \'display\', label: \'customattribute\', idValue: \'value\' }"></div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/singleselect.html',[],function () { return '<div class="row pad-bottom">\r\n    <div class="span6 grey"data-bind="text: name">\r\n        Start Date\r\n    </div>\r\n    <div class="span6">\r\n    \t<span data-bind="text: displayValue() ? displayValue() : \'-\'"></span>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/designer/index.html',[],function () { return '<section data-type="full">\r\n    <div data-bind="foreach: columns">\r\n        <!-- ko compose: columntemplate -->\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/programdesigner/index.html',[],function () { return '<div class="route">\r\n    <!-- ko compose: navigation.currentSubRoute().subroute -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/button.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="text: header"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: completeAction, disable: !computedResponse() && !activeStep() || $parent.completed() === true || $parents[1].programsSaving() === true" />\r\n            <button class="pull-right" data-bind="click: $parent.saveAction, enable: !completed() && $parent.hasChanges() && !$parents[1].programsSaving()">Save</button>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/checkbox.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->        \r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': value() === \'true\' }">\r\n                <input type="checkbox" data-bind="checked: value, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed()), clickRadio: $parent.computedResponse" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <!-- ko if: value() === \'true\' -->\r\n    <div class="row">\r\n        <i class="icon-check span1"></i><strong class="span11" data-bind="text: text"></strong><br>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: !computedResponse() || hasNoTrueAnswers() === true -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/datepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: { }, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1" data-bind="Date: computedResponse().value"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/datetimepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6">\r\n\t\t<!-- ko if: Modernizr.inputtypes.time -->\r\n\t\t\t<input data-bind="timepicker: value, valueUpdate: blur, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed() || !value())" type="time">\r\n\t\t<!-- /ko -->\r\n\t\t<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n\t\t\t<input id="value" data-bind="jqtimepicker: value, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed() || !value())" type="text">\r\n\t\t<!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1"><span data-bind="Date: computedResponse().value"></span> <span data-bind="LongTime: computedResponse().value"></span></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/label.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <!-- ko with: text -->\r\n    <p data-bind="text: $data"></p>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/modal.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="text: question"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: $parents[1].toggleModalShowing, disable: !computedResponse() && !activeStep() || $parent.completed() === true" />\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/questioneditor.html',[],function () { return '<div class="row pad pad-top">\r\n    <div class="row">\r\n        <!--Where the question id goes-->\r\n        <h2 class="span4">Question Id</h2>\r\n        <small class="push2 span6">12345</small>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the question type selector goes-->\r\n        <h3 class="span4">Question Type</h3>\r\n        <div data-bind="chsnsingle: { options: questionTypes, value: questionType, text: \'name\', label: \'question-type\' }"></div>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the actual question goes-->\r\n        <h3 class="span4">Question</h3>\r\n        <input class="push2 span6" type="text" data-bind="value: question" />\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/radio.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': $parent.computedResponse() === $data }">\r\n                <input type="radio" data-bind="clickRadio: $parent.computedResponse, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <strong class="push1" data-bind="text: computedResponse().text"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse() -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/singleselect.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() --> \r\n\t<div class="span6">\r\n\t\t<label class="control-group">\r\n\t\t\t<div data-bind="chsnsingle: { options: responses().sort($root.alphabeticalOrderSort), value: computedResponse, text: \'text\', label: \'programs\', disabled: (!computedResponse() && !activeStep() || $parent.completed()), \r\n\t\t\t\t\t\t\ttitle: computedResponse()? computedResponse().text() : null }"></div>\r\n\t\t</label>\r\n\t</div>\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <strong class="push1" data-bind="text: computedResponse().text"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse() -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/textarea.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <textarea data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep() || $parents[1].completed())" maxlength="1000"></textarea>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <textarea data-bind="text: computedResponse().value, attr: { \'title\': computedResponse().value }" class="push1 span11 strong" readonly="readonly" rows="5"></textarea>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/textbox.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <input data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text">\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1" data-bind="text: computedResponse().value"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/timepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="value: value, valueUpdate: blur, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="time">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/widgets/modulewidget.html',[],function () { return '<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }, columnSizer: {triggers: settings.isOpen}">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/widgets/programwidget.html',[],function () { return '<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }, columnSizer: {triggers: settings.isOpen}">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/shell/alerttypes/error.html',[],function () { return '<div class="alert error" data-bind="visible: showing">\r\n    <div class="message">\r\n        <img src="/NightingaleUI/Content/images/alert_red.png">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/alerttypes/info.html',[],function () { return '<div class="alert info" data-bind="visible: showing">\r\n    <div class="message">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/alerttypes/warning.html',[],function () { return '<div class="alert warning" data-bind="visible: showing, timeOut: showing, timeOutOptions: { delay: 2000 }">\r\n    <div class="message">\r\n        <i class="icon-check green"></i>\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/banner.html',[],function () { return '<header role="banner">\r\n    <img class="brand" data-bind="attr: { src: currentBrand().imageSource }" />    \r\n    <div class="options">\r\n        <div class="user-menu dropdown" data-bind="with: $parent.session.currentUser, clickToggle: $parent.userMenuOpen, css: { \'open\': $parent.userMenuOpen }">\r\n            <div class="dropdown-toggle">\r\n                <a class="disabled" data-bind="text: \'User - \' + userName()"></a>\r\n            </div>\r\n            <div class="dropdown-content">\r\n                <li data-bind="click: $parents[1].session.logOff">\r\n                    <a href="#" data-bind="click: $parents[1].session.logOff">Sign Out</a>\r\n                </li>\r\n            </div>\r\n        </div>\r\n        <div class="user-menu dropdown" data-bind="css: { \'open\': $parent.newFeaturesOpen }, visible: $parent.showingNewFeatures">\r\n            <div class="dropdown-toggle">\r\n                <button data-bind="clickToggle: $parent.newFeaturesOpen">\r\n                    <i class="fa fa-bookmark-o yellow"></i>\r\n                </button>\r\n            </div>\r\n            <div class="dropdown-content" style="width: 400px; max-width: 500px; right: 0;" data-bind="foreach: $parent.featureMessages">\r\n                <h4><span data-bind="html: $data"></span></h4>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="loading-messages">\r\n        <div class="messages-dropdown open" data-bind="visible: $parent.compLoadingMessages().length !== 0 && $parent.loadingMessagesShowing() === true ">\r\n            <div class="dropdown-toggle">\r\n                <span class="disabled"><strong>Loading...</strong><i class="icon-spinner icon-spin grey icon-2x"></i></span>\r\n            </div>\r\n            <ul class="messages-content" data-bind="foreach: $parent.compLoadingMessages">\r\n                <li class="ellipsis" data-bind="visible: Showing"><span data-bind="text: Message"></span></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</header>';});


define('text!views/shell/quickadd/assign.html',[],function () { return '<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">\r\n                Category\r\n            </span>\r\n        </div>\r\n        <div class="span9">\r\n            <span class="grey">\r\n                Assign\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <div data-bind="chsnsingle: { options: categories, value: selectedCategory, text: \'Name\', label: \'category\' }"></div>\r\n        </div>\r\n        <div class="span6">\r\n            <div data-bind="chsnsingle: { options: contractPrograms, value: selectedProgram, text: \'name\', label: \'programs\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: cancelAssign" class="cancel">Cancel</button>\r\n            <input data-bind="click: saveAssign, disable: !canSave()" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/communication.html',[],function () { return '<form>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Action</span>\r\n        </label>\r\n        <select>\r\n            <option>Left Message</option>\r\n            <option>Spoke with patient</option>\r\n            <option>Busy</option>\r\n        </select>\r\n        <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 140px;" title="">\r\n            <a class="chosen-single" tabindex="-1">\r\n                <span>Left Message</span>\r\n                <div><b></b></div>\r\n            </a>\r\n            <div class="chosen-drop">\r\n                <div class="chosen-search">\r\n                    <input type="text" autocomplete="off" readonly="" />\r\n                </div>\r\n                <ul class="chosen-results"></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Call Notes</span>\r\n            <input type="text" />\r\n        </label>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Date/Time</span>\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161754" />\r\n        </label>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/dataentry.html',[],function () { return '<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">Element</span>\r\n        </div>\r\n        <div class="span3">\r\n            <span class="grey">Value</span>\r\n        </div>\r\n        <div class="span2">\r\n            <span class="grey">Date</span>\r\n        </div>\r\n        <div class="span4">\r\n            <span class="grey">Source</span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span2">\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161755" />\r\n        </div>\r\n        <div class="span3">\r\n            <select>\r\n                <option>Opt 1</option>\r\n                <option>Opt 2</option>\r\n                <option>Opt 3</option>\r\n            </select>\r\n            <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 0px;" title="">\r\n                <a class="chosen-single" tabindex="-1">\r\n                    <span>Opt 1</span>\r\n                    <div><b></b></div>\r\n                </a>\r\n                <div class="chosen-drop">\r\n                    <div class="chosen-search">\r\n                        <input type="text" autocomplete="off" readonly="" />\r\n                    </div>\r\n                    <ul class="chosen-results"></ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="span1">\r\n            <a href="#">\r\n                <i class="icon-plus"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/general.note.html',[],function () { return '<form>    \r\n    <div class="row pad accordion divider" data-bind="with: $parent.newNote">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].gnContentOpen">\r\n            <div class="bold line">Content:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].gnContentOpen">\r\n            <div class="row pad-top">\r\n                <div class="span12">\r\n                    <label>\r\n                        <div class="input inline text optional note_content">\r\n                            <textarea data-bind="value: text, valueUpdate: \'afterkeydown\'" class="text optional" maxlength="5000"></textarea>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span12 pad-bottom">\r\n                    <label>\r\n                        <span>Program(s)</span>\r\n                    </label>\r\n                    <div class="row">\r\n                        <div class="span9" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion divider" data-bind="with: $parent.newNote">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].gnLastNotesOpen">\r\n            <div class="bold line">Past Notes:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].gnLastNotesOpen, foreach: $parents[1].lastThreeNotes">\r\n            <div class="row pad-top divider" data-bind="if: createdOn">\r\n                <a class="span12" href="#" data-bind="click: $parents[2].viewDetails">\r\n                    <div class="row">\r\n                        <strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n                    </div>\r\n                    <div class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: text"></span>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].lastThreeNotes().length === 0">\r\n            <em>No notes have been entered</em>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top divider" data-bind="visible: !$parent.gnLastNotesOpen()">\r\n    </div>\r\n    <div class="position bottom left">\r\n        <div class="pad vertical">\r\n            <a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <input data-bind="click: $parent.saveNote, enable: $parent.canSave" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/notes.html',[],function () { return '<div class="content" data-bind="with: selectedPatient">\r\n\t<div class="row">\r\n\t\t<div class="bold pull-left pad-right">Type:</div>\r\n\t\t<div class="span5">\r\n\t\t\t<div data-bind="chsnsingle: { options: $parent.noteTypes, value: $parent.selectedNoteType, text: \'name\', label: \'notetypes\' }"></div>\r\n\t\t</div>\r\n\t</div>\r\n    <div class="pad-top"></div>\r\n    <div class="simplenote" data-bind="compose: $parent.activeNoteType">\r\n    </div>\r\n</div>';});


define('text!views/shell/quickadd/quickaddpopover.html',[],function () { return '<div data-bind="with: patientIsSelected">\r\n    <div class="quickadd" data-bind="css: { \'open\': $parent.isShowing }">\r\n        <div class="quickadd-toggle" data-bind="clickToggle: $parent.isShowing">\r\n            <div class="toggle down-up"></div>\r\n            <strong>Quick Add</strong>\r\n        </div>\r\n        <div class="quickadd-content">\r\n            <header data-bind="foreach: $parent.quickAddSections">\r\n                <div class="tab">\r\n                    <a data-bind="click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }" href="#">\r\n                        <i data-bind="attr: { class: IconPath }"></i>\r\n                        <span class="pad-left" data-bind="text: Title"></span>\r\n                    </a>\r\n                </div>\r\n            </header>\r\n            <div class="body pad" data-bind="foreach: $parent.quickAddSections">\r\n                <section data-bind="css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }">\r\n                    <!-- ko compose: { model: Path, activationData: { data: $parents[1] } } -->\r\n                    <!-- /ko -->\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/shell/quickadd/todo.html',[],function () { return '<form class="simple_form new_todo" data-bind="with: selectedPatient">\r\n    <div class="row" data-bind="if: $parent.hasErrors">\r\n        <ul data-bind="foreach: $parent.errors">\r\n            <li class="validation-errors">\r\n                <h5 data-bind="text: Message"></h5>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Category:\r\n        </div>\r\n        <div class="span4 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].categories, value: category, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Status:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].statuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Due Date:     \r\n        </div>\r\n        <div class="span3 pad-left">            \r\n            <input placeholder="due date" size="30" type="text" data-bind="datepicker: dueDate">\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Assigned to:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parents[1].careManagersBloodhound, displayKey: \'preferredName\'}, value: $parents[1].assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        </div>\r\n\t\t<div class="span5 align-right">\r\n\t\t\t<button class="close small" data-bind="enable: assignedToId(), click: $parents[1].removeUserAssociation">Remove Association</button>\r\n\t\t</div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Priority:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].priorities, value: priority, text: \'levelName\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Individual:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <span data-bind="text: (patientDetails() && patientDetails().fullName()) ?  patientDetails().fullName() : \'-\'"></span>\r\n        </div>\r\n        <div class="span5 align-right">\r\n            <button class="close small" data-bind="enable: patientId(), click: $parents[1].removeAssociation">Remove Association</button>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Program(s):\r\n        </div>\r\n        <div class="span5 pad-left" data-bind="visible: patientId()">\r\n            <div class="span12" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n        </div>\r\n        <div class="span5 pad-left" data-bind="visible: !patientId()">\r\n            <span>-</span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Title:\r\n        </div>\r\n        <div class="span9 pad-left">\r\n            <input placeholder="title" size="80" maxlength="500" type="text" data-bind="value: title, valueUpdate: \'afterkeydown\', css: { invalid: ($parents[1].errors().length !== 0) }">\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span3 grey">Description:\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="with: $parent.newTodo">\r\n        <div class="span12">\r\n            <textarea data-bind="value: description" maxlength="500">\r\n            </textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad">\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <button data-bind="click: $parent.save, enable: $parent.canSave" class="btn color">Save</button>\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/touchpoint.note.html',[],function () { return '<form class="simple_form new_note">\r\n    <div class="row pad top accordion divider">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parent.tpDetailsOpen">\r\n            <div class="row">\r\n                <div class="bold line pull-left">\r\n                    Details:\r\n                </div>\r\n                <div class="small line grey pad-left pull-left" data-bind="visible: !$parent.tpDetailsOpen(), with: $parent.newTouchPoint">\r\n                    <!-- ko if: outcome() && method() -->\r\n                    <span data-bind="text: outcome().name"></span> <span data-bind="text: method().name"></span> <span data-bind="text: source().name() === \'Outbound\' ? \'to\' : \'from\' "></span> <span data-bind="text: who().name() === \'Individual\' ? $parent.fullName() : who().name()"></span> on <span data-bind="Date: contactedOn"></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="with: $parent.newTouchPoint, visible: $parent.tpDetailsOpen">\r\n            <div class="row pad">\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Method</h5>\r\n                    <div class="icon-list">\r\n            \t\t\t<div data-bind="chsnsingle: { options: $parents[1].methods, value: method, text: \'name\', label: \'methods\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Who</h5>\r\n                    <div class="icon-list">\r\n            \t\t\t<div data-bind="chsnsingle: { options: $parents[1].whos, value: who, text: \'name\', label: \'whose\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Source</h5>\r\n                    <div class="icon-list">\r\n            \t\t\t<div data-bind="chsnsingle: { options: $parents[1].sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Outcome</h5>\r\n                    <div class="icon-list">\r\n            \t\t\t<div data-bind="chsnsingle: { options: $parents[1].outcomes, value: outcome, text: \'name\', label: \'outcomes\' }"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad">\r\n                <div class="span6">\r\n\t\t\t        <h5 class="grey pad-bottom">Date/Time of Contact</h5>\r\n                \t<div class="row">\r\n\t\t\t\t\t    <div class="span6">\r\n\t\t\t\t\t        <input data-bind="datepicker: contactedOn, datepickerOptions: {  }" type="text">\r\n\t\t\t\t\t    </div>\r\n\t\t\t\t\t    <div class="span6">\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- ko if: Modernizr.inputtypes.time -->\r\n\t\t\t\t\t\t\t\t<input data-bind="timepicker: contactedOn, attr: { \'disabled\': !contactedOn() }" type="time" style="height: 20px; width: 100%">\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t\t<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n\t\t\t\t\t\t\t\t<input data-bind="jqtimepicker: contactedOn, attr: { \'disabled\': !contactedOn() }" type="text" style="height: 20px; width: 100%">\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t    </div>\r\n\t\t\t\t\t</div>\r\n                </div>\r\n                <div class="span6">\r\n                    <h5 class="grey pad-bottom">Program(s)</h5>\r\n                    <div class="icon-list span10" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion open divider" data-bind="with: $parent.newTouchPoint">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].tpContentOpen">\r\n            <div class="bold line">Content:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content pad" data-bind="visible: $parents[1].tpContentOpen">\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <h5 class="grey pad-bottom">Duration</h5>\r\n                </div>\r\n                <div class="span4">\r\n                    <div data-bind="chsnsingle: { options: $parents[1].durations, value: duration, text: \'name\', label: \'durations\' }"></div>\r\n                </div>\r\n                <div class="span6">\r\n                    <label class="control-group">\r\n\t\t\t\t\t    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n\t\t\t\t\t        <span data-bind="css: { \'checked\': validatedIdentity() === true }">\r\n\t\t\t\t\t            <input type="checkbox" data-bind="checked: validatedIdentity" />\r\n\t\t\t\t\t        </span>\r\n\t\t\t\t\t    </div>\r\n                        <span class="grey">Validated identity\r\n                        </span>\r\n\t\t\t\t\t</label>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span12">\r\n                    <label>\r\n                        <div class="input inline text optional note_content">\r\n                            <textarea data-bind="value: text, valueUpdate: \'afterkeydown\'" class="text optional" maxlength="5000"></textarea>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion divider">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parent.tpLastNotesOpen">\r\n            <div class="bold line">Past Notes:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parent.tpLastNotesOpen, foreach: $parent.lastThreeNotes">\r\n            <div class="row pad-top divider" data-bind="if: createdOn">\r\n                <a class="span12" href="#" data-bind="click: $parents[1].viewDetails">\r\n                    <div class="row">\r\n                        <strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n                    </div>\r\n                    <div class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: text"></span>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parent.lastThreeNotes().length === 0">\r\n            <em>No notes have been entered</em>\r\n        </div>\r\n\t</div>\r\n    <div class="row pad-top divider" data-bind="visible: !$parent.tpLastNotesOpen()">\r\n    </div>\r\n    <div class="position bottom left">\r\n        <div class="pad vertical">\r\n            <a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancelTouchPoint" class="cancel">Cancel</button>\r\n            <input data-bind="click: $parent.saveTouchPoint, enable: $parent.canSaveTouchPoint" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/shell.html',[],function () { return '<div>\r\n    <!-- ko with: navigation -->\r\n    <!-- ko compose: \'shell/banner.html\' --><!-- /ko -->\r\n    <!-- ko compose: \'shell/subnav.html\' --><!-- /ko -->\r\n    <!-- /ko -->\r\n    <main role="application" data-bind="router: { cacheViews: true }">\r\n    </main>\r\n    <!-- ko with: currentModal -->\r\n    <div id="modal" data-bind="visible: Showing">\r\n        <div class="content" data-bind="with: Entity">\r\n            <header>\r\n                <h2 class="title">\r\n                    <span data-bind="text: $parent.Title"></span>\r\n                    <i class="close pull-right icon-cancel blue" data-bind="click: $parent.cancelChanges"></i>\r\n                </h2>\r\n            </header>\r\n            <!-- ko if: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: { model: $parent.TemplatePath, activationData: activationData } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko ifnot: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: $parent.TemplatePath -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <footer>\r\n                <div class="pull-right">\r\n                    <a class="btn cancel" data-bind="click: $parent.cancelChanges">Cancel</a>\r\n                    <button class="btn color" data-bind="visible: !$parent.canDelete(), enable: canSave, click: $parent.saveChanges">Save</button>\r\n                    <button class="btn color" data-bind="visible: $parent.canDelete, enable: canSave, click: $parent.delete, text: $parent.deleteText"></button>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div id="alerts" data-bind="foreach: alerts">\r\n        <!-- ko compose: alertPath -->\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/shell/sidebar.html',[],function () { return '<nav role="main" data-bind="foreach: navRoutes, css: { open: $parent.showSideBar() }">\r\n    <a role="menuitem" data-bind="click: $parents[1].setRoute, attr: { href: route }, css: { active: $parent.currentRoute() === $data }">\r\n        <img data-bind="attr: { src: settings.imageSource }" /><span data-bind="text: settings.content"></span>\r\n    </a>\r\n</nav>';});


define('text!views/shell/subnav.html',[],function () { return '<header role="navigation">\r\n    <div class="menu_toggle" data-bind="click: $parent.toggleNavVisibility">\r\n        <img src="/NightingaleUI/Content/images/main_menu_toggle.png" data-phyautomation="navigation-context-button" />\r\n        <img data-bind="attr: { src: (!!currentRoute() && currentRoute().config  && !!currentRoute().config.settings) ? currentRoute().config.settings.imageSource : \'\' }" data-phyautomation="route-image" />\r\n        <span data-bind="text: ((currentRoute() && currentRoute().config && !!currentRoute().config.settings) ? currentRoute().config.settings.content : \'\') " data-phyautomation="route-header"></span>\r\n    </div>\r\n    <div>\r\n    <!-- ko compose: \'shell/sidebar.html\' --><!-- /ko -->\r\n    </div>\r\n    <nav class="tabs" data-bind="if: currentRoute() && currentRoute().config">\r\n        <!-- ko foreach: currentRoute().config.settings.pages -->\r\n            <a role="menuitem" data-bind="click: $parent.setSubRoute, text: content, css: { \'active\': $parent.currentSubRoute() === $data }"></a>\r\n        <!-- /ko -->\r\n    </nav>\r\n    <div id="quick-add" data-bind="visible: $parent.showQuickAdd">\r\n        <!-- ko compose: \'viewmodels/shell/quickadd/quickaddpopover\' -->\r\n        <!-- /ko -->\r\n    </div>\r\n</header>';});


define('text!views/templates/action.edit.html',[],function () { return '<div class="body" data-bind="with: action">\r\n\t<div class="column">\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned By:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned To:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span5">\r\n\t\t\t\t<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="span4">\r\n\t\t\t\t<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- <div class="row pad-top divider">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Action Status:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span9">\r\n\t\t\t\t<select style="display: none;">\r\n\t\t\t\t\t<option>In Progress\t</option>\r\n\t\t\t\t\t<option>Not Started</option>\r\n\t\t\t\t\t<option>Closed</option>\r\n\t\t\t\t\t<option>Removed </option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="row pad-top">\r\n\t\t\t\t<div class="span3 align-left">\r\n\t\t\t\t\t<span>Reason:\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="span9">\r\n\t\t\t\t\t<textarea>\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Start Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" value="03/15/2014">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>End Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" id="dp1401893998028">\r\n\t\t\t</div>\r\n\t\t</div> -->\r\n\t</div>\r\n</div>';});


define('text!views/templates/address.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n            <div class="span12">\r\n                <div class="row">\r\n                    <input data-bind="value: line1, disable: $parent.addressOptedOut" placeholder="line one" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line2, disable: $parent.addressOptedOut" placeholder="line two" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line3, disable: $parent.addressOptedOut" placeholder="line three" />\r\n                </div>\r\n                <div class="row">\r\n                    <input class="span5" style="padding-right: 0;" data-bind="value: city, disable: $parent.addressOptedOut" placeholder="city" />\r\n                    <select class="span4" style="padding-right: 0;" data-bind="options: $root.stateList, value: stateId, optionsValue: \'id\', optionsText: \'name\', disable: $parent.addressOptedOut"></select>\r\n                    <input class="span3" style="padding-right: 0;" data-bind="value: postalCode, disable: $parent.addressOptedOut" placeholder="zip" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/address.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address lighterblue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <span data-bind="text: cityStateZip, attr: { title: fullFormatted }"></span>\r\n    </div>\r\n</div>';});


define('text!views/templates/allergies.panel.html',[],function () { return '<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort && canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort  && canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedAllergies">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div data-bind="compose: { model: $parent, view: path }, css: cssClass"></div>\r\n        </div>\r\n        <div class="row pad allergydtl muted toggle" data-bind="visible: isExpanded">\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Reaction:</strong>\r\n                </div>\r\n                <div class="span2" data-bind="text: reactionString"></div>\r\n                <div class="span2">\r\n                    <strong>Start Date:</strong>\r\n                </div>\r\n                <div class="span2" data-bind="DateOrDash: startDate"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Notes</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <textarea disabled="disabled" data-bind="value: notes"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedAllergies().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>';});


define('text!views/templates/allergy.edit.html',[],function () { return '<div class="body" data-bind="with: allergy">\r\n    <div class="row">\r\n        <div class="span2 align-right grey">\r\n            Name:\r\n        </div>\r\n        <div class="span3 pad-left" data-bind="text: allergyName">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Status:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.allergyStatuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Reaction:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div class="span9" data-bind="multiselect: { options: $parent.reactions, values: reactionIds, idValue: \'id\', text: \'name\', label: \'reactions\', stringValue: reactionString }"></div>\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Severity:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.severities, value: severity, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Source:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.allergySources, value: source, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Start Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input data-bind="value: startDate, datepickerEditable: startDate, datepickerOptions: { maxDate: \'+0\' }, datepickerDynamicOptions: { recalc: [endDate]  }, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }, valueUpdate: \'afterkeydown\'" type="text" class="datepicker">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            End Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        \t<input data-bind="value: endDate, datepickerEditable: endDate, datepickerDynamicOptions: { minDate: startDate, recalc: [startDate] }, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'endDate\') !== -1) }, valueUpdate: \'afterkeydown\' " type="text" class="datepicker">\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top"></div>\r\n    <div class="row">\r\n        <div class="span3 grey">\r\n            Notes:\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span12">\r\n            <textarea data-bind="value: notes"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Created On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: createdOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Updated On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: updatedOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            System:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="text: systemName">\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/allergy.expand.html',[],function () { return '<a class="toggle" href="#" data-bind="clickToggle: isExpanded"><i data-bind="css: isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i></a>';});


define('text!views/templates/allergy.name.html',[],function () { return '<a class="edit" href="#" data-bind="text: (allergyName() ? allergyName() : \'-\'), click: edit, attr: { title: allergyName }">\r\n</a>';});


define('text!views/templates/allergy.severity.html',[],function () { return '<div class="ellipsis">\r\n    <span data-bind="with: severity">\r\n        <span data-bind="text: name, attr: { title: name }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: severity">\r\n    \t<span>-</span>\r\n    </div>\r\n</div>';});


define('text!views/templates/allergy.startdate.html',[],function () { return '<span data-bind="DateOrDash: startDate"></span>';});


define('text!views/templates/allergy.status.html',[],function () { return '<div class="ellipsis" data-bind="with: status">\r\n    <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n    \t<a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n    </span>\r\n    <div class="pull-left filters" data-bind="if: id() === \'2\'">        \r\n\t\t<a href="#" data-bind="click: $parent.activatePatientAllergy"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n    </div>\r\n\t<div class="pull-right filters">\r\n\t\t<a href="#" data-bind="click: $parent.deletePatientAllergy"><i class="icon-cancel red toggle" title="Delete"></i></a>\t\t\r\n\t</div>\r\n</div>\r\n';});


define('text!views/templates/allergy.type.html',[],function () { return '<div>\r\n    <span data-bind="text: typeString">\r\n    </span>\r\n</div>';});


define('text!views/templates/background.html',[],function () { return '<div class="body">\r\n    <div class="row">\r\n        <h4>Background :</h4>\r\n        <textarea class="span12" data-bind="value: background" maxlength="2500"  />\r\n    </div>\r\n</div>';});


define('text!views/templates/barrier.edit.html',[],function () { return '<div class="body" data-bind="with: barrier">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input data-bind="value: name, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" />\r\n                    <span><em class="grey" data-bind="visible: !name()">Description is required</em></span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.barrierStatuses, value: status, text: \'name\', label: \'barrierstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Category</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.barrierCategories, value: category, text: \'name\', label: \'barriercategories\' }"></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/care.team.edit.html',[],function () { return '<div class="body" data-bind="with: selectedPatient">\r\n    <div class="column">\r\n        <section class="data-set clearfix" data-bind="foreach: careMembers">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Preferred Name</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <strong data-bind="text: preferredName" class="string optional" maxlength="255" type="text"></strong>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Assign to</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input type="text" data-bind="typeahead: { name: \'newAssignedToTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n                    <!-- <input data-bind="value: $parent.newAssignedTo, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" /> -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/clinical.dataentry.html',[],function () { return '<div class="body" data-bind="visible: showing">\r\n    <div class="row modal-tab">\r\n    \t<section class="accordion">\r\n    \t\t<div class="row">\r\n                <span class="span3"><strong>Select Data Type:</strong></span>\r\n                <div class="span3 pad-left" data-bind="chsnsingle: { options: dataTypes, value: computedActiveDataType, text: \'name\' }"></div>\r\n    \t\t</div>\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <hr>\r\n                </div>\r\n            </div>\r\n    \t</section>\r\n        <section class="accordion" data-bind="with: selectedTemplate">\r\n            <div class="row" data-bind="with: $parent.activeDataType">\r\n                <h3 data-bind="text: name, attr: { title: name }"></h3>\r\n            </div>\r\n            <!-- ko with: firstSection -->\r\n                <!-- ko compose: { model: path, activationData: { activeDataType: $parents[1].activeDataType, selectedPatient: $parents[1].selectedPatient } } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n        </section>\r\n        <section class="accordion" data-bind="with: selectedTemplate">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <hr>\r\n                </div>\r\n            </div>\r\n            <!-- ko with: secondSection -->\r\n                <!-- ko compose: { model: path, activationData: { activeDataType: $parents[1].activeDataType, selectedPatient: $parents[1].selectedPatient } } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/contactcard.html',[],function () { return '  <div class="body">\r\n    <div class="row">\r\n        <nav class="tabs">\r\n            <ul>\r\n                <li data-bind="css: { \'active\': activeTab() === \'general\' }, setActiveTab: \'general\'">\r\n                    <img alt="Phone blue small" src="/NightingaleUI/Content/images/settings_blue.png" />\r\n                    <a role="menuitem">General</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'phones\' }, setActiveTab: \'phones\'">\r\n                    <i class="icon-phone blue"></i>\r\n                    <a role="menuitem" data-bind="style: {color: phoneValidationErrors().length > 0 ? \'red\' : \'black\'}">Phone</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'texts\' }, setActiveTab: \'texts\'">\r\n                    <i class="icon-sms blue"></i>\r\n                    <a role="menuitem">Text</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'emails\' }, setActiveTab: \'emails\'">\r\n                    <i class="icon-email blue"></i>\r\n                    <a role="menuitem">Email</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'addresses\' }, setActiveTab: \'addresses\'">\r\n                    <i class="icon-address blue"></i>\r\n                    <a role="menuitem">Address</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'languages\' }, setActiveTab: \'languages\'">\r\n                    <img alt="Language blue small" src="/NightingaleUI/Content/images/nav_population.png" />\r\n                    <a role="menuitem">Language</a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n    <div class="row pad top">\r\n        <h2 class="span12" data-bind="text: $parent.fullName, attr: { title: $parent.fullName }"></h2>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'general\'">\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Communication Modes</h4>\r\n                    <ul>\r\n                        <li class="row pad-top">\r\n                            <strong class="span4">Mode</strong>\r\n                            <strong class="span4">Opt-Out?</strong>\r\n                            <strong class="span4">Preferred?</strong>\r\n                        </li>\r\n\t\t\t\t\t\t<div class="pad-top">\r\n\t\t\t\t\t\t\t<!-- ko foreach: modes -->\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<strong class="span4" data-bind="text: name, attr: { title: name }"></strong>\r\n\t\t\t\t\t\t\t\t<label class="control-group span4">\r\n\t\t\t\t\t\t\t\t\t<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n\t\t\t\t\t\t\t\t\t\t<span data-bind="css: { \'checked\': optOut }">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" data-bind="clickToggle: optOut" />\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<label class="control-group span4">\r\n\t\t\t\t\t\t\t\t\t<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n\t\t\t\t\t\t\t\t\t\t<span data-bind="css: { \'checked\': preferred }">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" data-bind="disable: optOut, clickToggle: preferred" />\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<!-- /ko -->\r\n\t\t\t\t\t\t</div>                        \r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span6">\r\n                    <h4>Preferred Days of Week</h4>\r\n                    <ul class="pad-top">\r\n                        <!-- ko foreach: $root.daysOfWeek -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredDaysOfWeek().indexOf(Code) !== -1 || $parent.preferredDaysOfWeek() === \'Any\') }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredDaysOfWeekIds, setValue: Id" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: Name, attr: { title: Name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n                <div class="span6">\r\n                    <h4>Preferred Times of Day</h4>\r\n                    <ul class="pad-top">\r\n                        <!-- ko foreach: $root.timesOfDay -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredTimesOfDay().indexOf(name()) !== -1) }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredTimesOfDayIds, setValue: id()" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: name, attr: { title: name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n\t\t\t\t\t<div class="pad-top">\r\n\t\t\t\t\t\t<h4>Time Zone</h4>\r\n\t\t\t\t\t\t<div class="span6 pad-top">\r\n\t\t\t\t\t\t\t<select class="row" data-bind="options: $root.timeZones, value: timeZoneId, optionsValue: \'id\', optionsText: \'name\'"></select>\r\n\t\t\t\t\t\t\t<!-- <div class="row" data-bind="chsnsingle: { options: $root.timeZones, value: timeZoneId, idValue: \'id\', text: \'name\' }"></div> -->\r\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'texts\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span10">Number</strong>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredText() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredText, setValue: \'null\', disable: textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones -->\r\n            <!-- ko if: (isText() && !optOut()) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': textPreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredText, setValue: $data, disable: $parent.textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span10">\r\n                    <!-- ko compose: \'templates/phone.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'phones\'">\r\n\t\t<div class="row validation-summary" data-bind="if: phoneValidationErrors().length > 0">\r\n            <h3>Please correct the following errors:</h3>\r\n\t\t\t<ul data-bind="foreach: phoneValidationErrors">\r\n\t\t\t\t<li class="validation-errors">\r\n\t\t\t\t\t<h5 data-bind="text: Message"></h5>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Number</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addPhone, disable: phoneOptedOut, attr: { \'title\': phoneOptedOut() ? \'Phone opted out\' : \'Add Phone\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Phone</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredPhone() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredPhone, disable: phoneOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': phonePreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredPhone, disable: ($parent.phoneOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row" data-bind="visible: $parent.phoneOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="row" data-bind="options: $root.phoneTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.phoneOptedOut()"></select>\r\n                    <!-- <div class="row" data-bind="visible: !$parent.phoneOptedOut(), chsnsingle: { options: $root.phoneTypes, value: typeId, idValue: \'id\', text: \'name\', label: \'phones\' }"></div> -->\r\n                </div>\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/phone.edit.html\' -->\r\n                    <!-- /ko -->\r\n                    <label class="row">\r\n                        <span>SMS</span>\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': isText }">\r\n                                <input type="checkbox" data-bind="clickToggle: isText, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removePhone"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'emails\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Email Address</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addEmail, disable: emailOptedOut, attr: { \'title\': emailOptedOut() ? \'Email opted out\' : \'Add Email\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Email</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredEmail() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredEmail, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: emails().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredEmail, disable: ($parent.emailOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.emailOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="span2" data-bind="options: $root.emailTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.emailOptedOut()"></select>\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/email.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.emailOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeEmail"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'addresses\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span3">Type</strong>\r\n                <strong class="span3">Address</strong>\r\n                <strong class="span2">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addAddress, disable: addressOptedOut, attr: { \'title\': addressOptedOut() ? \'Address opted out\' : \'Add Address\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Address</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredAddress() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredAddress, disable: addressOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: addresses -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredAddress, disable: ( $parent.addressOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.addressOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                <select class="span2" data-bind="options: $root.addressTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.addressOptedOut()"></select>\r\n                <div class="span5">\r\n                    <!-- ko compose: \'templates/address.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.addressOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeAddress"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row modal-tab" data-bind="visible: activeTab() === \'languages\'">\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Add new spoken language</h4>\r\n                    <div class="row pad-top">\r\n                        <div class="span3" data-bind="chsnsingle: { options: $root.languages, value: newLanguage, text: \'name\', label: \'languages\' }"></div>\r\n\t\t\t\t\t\t<label class="span2"></label>\r\n                        <button class="span3 btn small color pull-right" data-bind="click: addLanguage, enable: newLanguage">\r\n                            <i class="icon-plus"></i>\r\n                            <span class="pad-left">Language</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <ul class="list-items">\r\n                    <li class="row">\r\n                        <strong class="span2">Preferred?</strong>\r\n                        <strong class="span10">Language</strong>\r\n                    </li>\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': !preferredLanguage() }">\r\n                                    <input type="radio" data-bind="clickRadio: preferredLanguage, setValue: \'null\'" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <strong class="span10"> None</strong>\r\n                    </li>\r\n                    <!-- ko foreach: languages -->\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': preferred }">\r\n                                    <input type="radio" data-bind="clickRadio: $parent.preferredLanguage, setValue: $data" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="span10">\r\n                            <strong data-bind="text: name, attr: { title: name }"></strong>\r\n                        </div>\r\n                    </li>\r\n                    <!-- /ko -->\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/email.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n            <input data-bind="value: text, disable: $parent.emailOptedOut" placeholder="email" />\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/email.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email lighterblue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span class="span12 ellipsis" data-bind="text: text, attr: { title: text }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/event.details.html',[],function () { return '<div class="body" data-bind="with: event">\r\n\t<div class="column">\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n  \t\t\t<div class="span9" data-bind="DateOrNothing: start"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span3 align-left">\r\n\t\t\t<span>Individual:\r\n\t\t\t</span>\r\n\t\t</div>\r\n      \t<div class="span9" data-bind="text: patientName"></div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span3 align-left">\r\n\t\t\t<span>Assigned to:\r\n\t\t\t</span>\r\n\t\t</div>\r\n      \t<div class="span9" data-bind="text: assignedToName"></div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span3 align-left">\r\n\t\t\t<span>Title:\r\n\t\t\t</span>\r\n\t\t</div>\r\n  \t\t<span class="span9" data-bind="text: title"></span>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span3 align-left">\r\n\t\t\t<span>All day?:\r\n\t\t\t</span>\r\n\t\t</div>\r\n  \t\t<span class="span9" data-bind="text: allDay() ? \'Yes\' : \'No\'"></span>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span3 align-left">\r\n\t\t\t<button class="btn color" data-bind="text: $parent.btnMsg, click: $parent.gotoSource, enable: $parent.hasPatient"></button>\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/templates/focusproblem.edit.html',[],function () { return '<div class="row pad-top divider">\r\n\t<div class="span3" data-bind="text: name"></div>\r\n\t<div class="span2">\r\n\t\t<select data-bind="options: $parent.observationDisplays, value: displayId, optionsText: \'name\', optionsValue: \'id\'"></select>\r\n\t</div>\r\n\t<div class="span3">\r\n\t\t<input class="datepicker" type="text" data-bind="value: startDate, datepickerEditable: startDate, valueUpdate: \'afterkeydown\', datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }">\r\n\t</div>\r\n\t<div class="span3">\r\n\t\t<select data-bind="options: $parent.observationStates, value: stateId, optionsText: \'name\', optionsValue: \'id\', attr: { \'disabled\': isNew }"></select>\r\n\t</div>\r\n\t<div class="span1">\r\n    <a href="#" data-bind="click: $parent.deleteFocusProblem, clickBubble: false"><i class="icon-cancel red"></i></a>\r\n\t</div>\r\n</div>';});


define('text!views/templates/focusproblems.html',[],function () { return '<div class="body" data-bind="visible: showing">\r\n\t<div class="pad-vertical">\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/additional.problem.observations\', activationData: { selectedPatient: selectedPatient } } -->\r\n\t\t<!-- /ko -->\r\n\t</div>\r\n\t<div class="pad-vertical">\r\n\t\t<!-- ko compose: { model: \'viewmodels/patients/sections/problems.list\', activationData: { selectedPatient: selectedPatient} } -->\r\n\t\t<!-- /ko -->\r\n\t</div>\r\n\t<section class="accordion" data-bind="visible: showActions">\r\n\t\t<div class="row">\r\n\t\t\t<div class="accordion-content columns">\r\n\t\t\t\t<div class="column">\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t<div class="pad vertical">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="position bottom right">\r\n\t\t\t\t\t\t\t\t<button data-bind="click: cancelFocusProblems" class="cancel small">Cancel</button>\r\n\t\t\t\t\t\t\t\t<button data-bind="click: saveFocusProblems" class="small color">Save</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</section>\r\n</div>';});


define('text!views/templates/forcephone.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-phone blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { title: formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/goal.edit.html',[],function () { return '<div class="body" data-bind="with: goal">\r\n    <div class="column">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle">\r\n            </div>\r\n            <div class="accordion-content">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Description</span>\r\n                    </div>\r\n                    <div class="span9">\r\n                        <input data-bind="value: name, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" />\r\n                        <span><em class="grey" data-bind="visible: !name()">Description is required</em></span>\r\n                    </div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Focus Area(s)</span>\r\n                    </div>\r\n                    <div class="span6" data-bind="multiselect: { options: $parent.focusAreas, values: focusAreaIds, idValue: \'id\', text: \'name\', label: \'focusAreas\', stringValue: focusAreaString }"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Program(s)</span>\r\n                    </div>\r\n                    <div class="span6" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                </div>\r\n                <div class="row pad-vertical">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Source</span>\r\n                    </div>\r\n                    <div class="span3" data-bind="if: $parent.sources">\r\n                        <div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n                        <span>\r\n                            <em class="grey" data-bind="visible: !source()">Goal source is required</em>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle">\r\n                <h4>Attributes</h4>\r\n            </div>\r\n            <div class="accordion-content">\r\n                <div class="column">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Type</span>\r\n                        </div>\r\n                        <div class="span3">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTypes, value: type, text: \'name\', label: \'goaltypes\' }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span3">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTaskStatuses, value: status, text: \'name\', label: \'goaltypes\', disabled: isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Value</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <input data-bind="value: targetValue" maxlength="255" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">End Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: endDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <!-- ko foreach: customAttributes().sort($parent.alphabeticalOrderSort) -->\r\n                    <!-- ko compose: path -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/intervention.assignedto.html',[],function () { return '<div>\r\n\t<div class="ellipsis" data-bind="if: assignedToId()">\r\n\t    <span data-bind="text: assignedTo().preferredName, attr: { title: assignedTo().preferredName }"></span>\r\n\t</div>\r\n\t<div data-bind="ifnot: assignedToId">\r\n\t\t<span>-</span>\r\n\t</div>\r\n</div>';});


define('text!views/templates/intervention.category.html',[],function () { return '<div class="ellipsis">\r\n    <span data-bind="with: category">\r\n        <span data-bind="text: name, attr: { title: name }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: category">\r\n    \t<span>-</span>\r\n    </div>\r\n</div>';});


define('text!views/templates/intervention.closeddate.html',[],function () { return '<span data-bind="DateOrDash: closedDate"></span>';});


define('text!views/templates/intervention.description.html',[],function () { return '<a class="edit" href="#" data-bind="text: (description() ? description() : \'-\'), click: edit, attr: { title: description }">\r\n</a>';});


define('text!views/templates/intervention.edit.html',[],function () { return '<div class="body" data-bind="with: intervention" style="min-height: 400px;">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span7">\r\n                    <input data-bind="value: description, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="500" type="text" />\r\n                    <span><em class="grey" data-bind="visible: !description()">Description is required</em></span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.interventionStatuses, value: status, text: \'name\', label: \'interventionstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Start Date</span>\r\n                </div>\r\n                <div class="span6">\r\n                    <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Category</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.interventionCategories, value: category, text: \'name\', label: \'interventioncategories\' }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Assigned To</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Associated Barrier(s)</span>\r\n                </div>\r\n                <!-- ko if: goal -->\r\n                <div class="span6" data-bind="multiselect: { options: $parent.computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                <!-- /ko -->\r\n                <!-- ko if: !goal() -->\r\n                <span class="span9">No barriers</span>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/intervention.goal.html',[],function () { return '<div class="ellipsis">\r\n\t<span data-bind="if: computedGoalName()">\r\n\t    <a href="#" data-bind="text: computedGoalName, click: gotoGoal, attr: { title: computedGoalName }"></a>\r\n\t</span>\r\n\t<!-- ko ifnot: computedGoalName() -->\r\n\t\t<span>-</span>\r\n\t<!-- /ko -->\r\n</div>';});


define('text!views/templates/intervention.panel.html',[],function () { return '<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedInterventions">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedInterventions().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>';});


define('text!views/templates/intervention.patient.html',[],function () { return '<div class="ellipsis">\r\n\t<span data-bind="if: computedPatient()">\r\n\t    <a data-bind="text: computedPatient().fullLastName() +\', \' + computedPatient().fullFirstName(), attr: { href: \'#patients/\' + computedPatient().id(), title: computedPatient().fullLastName() +\', \' + computedPatient().fullFirstName() }"></a>\r\n\t</span>\r\n\t<!-- ko ifnot: computedPatient() -->\r\n\t\t<span>-</span>\r\n\t<!-- /ko -->\r\n</div>';});


define('text!views/templates/intervention.startdate.html',[],function () { return '<span data-bind="DateOrDash: startDate"></span>';});


define('text!views/templates/intervention.status.html',[],function () { return '<i data-bind="css: status().iconClass"></i>';});


define('text!views/templates/language.html',[],function () { return '<div class="row">\r\n    <div class="span2 grey">Language</div>\r\n    <div class="span8" data-bind="text: name, attr: { title: name }"></div>\r\n</div>';});


define('text!views/templates/medication.expand.html',[],function () { return '<a class="toggle" href="#" data-bind="clickToggle: isExpanded"><i data-bind="css: isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i></a>';});


define('text!views/templates/medication.name.html',[],function () { return '<a class="edit" href="#" data-bind="click: edit, attr: { title: name }">\r\n\t<pre data-bind="text: (name() ? name() : \'-\')"></pre></a>';});


define('text!views/templates/medication.reason.html',[],function () { return '<div class="ellipsis">\r\n    <span data-bind="with: reason">\r\n        <span data-bind="text: $data, attr: { title: $data }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: reason">\r\n    \t<span>-</span>\r\n    </div>\r\n</div>';});


define('text!views/templates/medication.startdate.html',[],function () { return '<span data-bind="DateOrDash: startDate"></span>';});


define('text!views/templates/medication.status.html',[],function () { return '<div class="ellipsis" data-bind="with: status">\r\n    <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n    \t<a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\t\t\r\n    </span>\r\n    <div class="pull-left filters" data-bind="if: id() === \'2\'">        \r\n\t\t<a href="#" data-bind="click: $parent.activatePatientMedication"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n    </div>\r\n\t<div class="pull-right filters">\r\n\t\t<a href="#" data-bind="click: $parent.deletePatientMedication"><i class="icon-cancel red toggle" title="Delete"></i></a>\r\n\t</div>\r\n</div>';});


define('text!views/templates/medication.strength.html',[],function () { return '<div>\r\n\t <span data-bind="StringOrDash: strength, attr:{title: strength, class: \'ellipsis\', style: \'display: block;\'}">\r\n    </span>\r\n\t\r\n</div>';});


define('text!views/templates/medication.type.html',[],function () { return '<div>\r\n\t<!-- ko with: type -->\r\n    <i data-bind="css: name().toLowerCase() === \'otc\' ? \'icon-otc\' : \'icon-rx\'">\r\n    </i>\r\n    <!-- /ko -->\r\n\t<!-- ko if: !type() -->\r\n    <span>\r\n    \t&nbsp\r\n    </span>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/templates/medications.panel.html',[],function () { return '<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort && canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort  && canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedMedications">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div data-bind="compose: { model: $parent, view: path }, css: cssClass"></div>\r\n        </div>\r\n        <div class="row pad allergydtl muted toggle" data-bind="visible: isExpanded">\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>SIG:</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <span data-bind="text: computedSigCode"></span>&nbsp\r\n                </div>\r\n            </div>\r\n\t\t\t<div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Type:</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <span data-bind="text: type()? type().name() : \'-\'"></span>&nbsp\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Source</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <span data-bind="text: source() ? source().name() : \'-\'">&nbsp</span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Reason</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <span data-bind="StringOrDash: reason"></span>&nbsp\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Start Date:</strong>\r\n                </div>\r\n                <div class="span3" data-bind="DateOrDash: startDate"></div>\r\n                <div class="span2">\r\n                    <strong>End Date:</strong>\r\n                </div>\r\n                <div class="span3" data-bind="DateOrDash: endDate"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2">\r\n                    <strong>Notes</strong>\r\n                </div>\r\n                <div class="span10">\r\n                    <textarea disabled="disabled" data-bind="value: notes"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedMedications().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>';});


define('text!views/templates/module.edit.html',[],function () { return '<div class="body" data-bind="with: module">\r\n\t<div class="column">\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned By:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned To:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span5">\r\n\t\t\t\t<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="span4">\r\n\t\t\t\t<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- <div class="row pad-top divider">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Action Status:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span9">\r\n\t\t\t\t<select style="display: none;">\r\n\t\t\t\t\t<option>In Progress\t</option>\r\n\t\t\t\t\t<option>Not Started</option>\r\n\t\t\t\t\t<option>Closed</option>\r\n\t\t\t\t\t<option>Removed </option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="row pad-top">\r\n\t\t\t\t<div class="span3 align-left">\r\n\t\t\t\t\t<span>Reason:\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="span9">\r\n\t\t\t\t\t<textarea>\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Start Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" value="03/15/2014">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>End Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" id="dp1401893998028">\r\n\t\t\t</div>\r\n\t\t</div> -->\r\n\t</div>\r\n</div>';});


define('text!views/templates/observation.add.html',[],function () { return '<div class="row pad top" data-bind="with: observation">\r\n    <div class="span2">\r\n        <span data-bind="text: name, attr: { title: name }"></span> <span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n    </div>\r\n    <div class="span2">\r\n        <input type="text" data-bind="value: computedValue().value, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'value\') !== -1) }">\r\n    </div>\r\n    <div class="span3">\r\n        <input class="datepicker" type="text" data-bind="value: startDate, datepickerEditable: startDate, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }, valueUpdate: \'afterkeydown\' ">\r\n    </div>\r\n    <div class="span4">\r\n        <label>\r\n            <span data-bind="text: computedValue().previousValueString, attr: { title: computedValue().previousValueString }"></span>\r\n        </label>\r\n    </div>\r\n    <div class="span1 pull-left">\r\n        <a href="#" data-bind="click: $parent.addNew, disable: !$parent.canAdd(), css: { \'disabled\': !$parent.canAdd() }">\r\n            <i class="icon-plus"></i>\r\n        </a>\r\n    </div>\r\n</div>';});


define('text!views/templates/observation.bloodpressure.add.html',[],function () { return '<div class="row pad top" data-bind="with: observation">\r\n    <div class="span2">\r\n        <span data-bind="text: name, attr: { title: name }"></span> <span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n    </div>\r\n    <div class="span3">\r\n        <div class="row">\r\n            <div class="span6" data-bind="with: $parent.systolicObservationValue">\r\n                <input type="text" placeholder="Systolic" data-bind="value: value, valueUpdate: \'afterkeydown\', css: { \'invalid\': ($parent.validationErrorsArray().indexOf(\'systolic\') !== -1) }">\r\n            </div>\r\n            <div class="span6" data-bind="with: $parent.diastolicObservationValue">\r\n                <input type="text" placeholder="Diastolic" data-bind="value: value, valueUpdate: \'afterkeydown\', css: { \'invalid\': ($parent.validationErrorsArray().indexOf(\'diastolic\') !== -1) }">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="span3">        \r\n\t\t<input class="datepicker" type="text" data-bind="value: startDate, datepickerEditable: startDate, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (validationErrorsArray().indexOf(\'startDate\') !== -1) }, valueUpdate: \'afterkeydown\' ">\r\n    </div>\r\n    <div class="span3">\r\n        <label>\r\n            <span data-bind="text: $parent.customBPString, attr: { title: $parent.customBPString }"></span>\r\n        </label>\r\n    </div>\r\n    <div class="span1 pull-left">\r\n        <a href="#" data-bind="click: $parent.addNew, enable: $parent.canAdd, css: { \'disabled\': !$parent.canAdd() }">\r\n            <i class="icon-plus"></i>\r\n        </a>\r\n    </div>\r\n</div>';});


define('text!views/templates/patient.delete.html',[],function () { return '<div class="body">\r\n    <div class="row">\r\n        <h2 class="span12" data-bind="text: fullName"></h2>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>First Name</span>\r\n            <h4 data-bind="text: firstName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Middle Name</span>\r\n            <h4 data-bind="text: middleName"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Last Name</span>\r\n            <h4 data-bind="text: lastName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Suffix</span>\r\n            <h4 data-bind="text: suffix"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Preferred Name</span>\r\n            <h4 data-bind="text: preferredName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>DOB</span>\r\n            <h4 data-bind="text: dOB"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>SSN</span>\r\n            <h4 data-bind="text: formattedSSN"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6" data-bind="with: genderModel">\r\n            <div class="row">\r\n                <span class="span3 line">Gender</span>\r\n                <div class="span2 line align-right">\r\n                    <img alt="Patient small" class="" data-bind="attr: { src: SmallImgSrc }" />\r\n                </div>\r\n                <h4 data-bind="text: Description"></h4>\r\n            </div>\r\n        </label>\r\n        <label class="span6" data-bind="with: priorityModel">\r\n            <div class="row">\r\n                <span class="span3 line">Priority</span>\r\n                <div class="span2 line align-right">\r\n                    <img data-bind="attr: { src: imageSource }">\r\n                </div>\r\n                <h4 data-bind="text: levelName"></h4>\r\n            </div>\r\n        </label>\r\n    </div>\r\n</div>';});


define('text!views/templates/patient.html',[],function () { return '<div class="body">\r\n    <div class="row" data-bind="visible: isDuplicate">\r\n<!--         <p>\r\n            <i class="fa fa-exclamation-triangle"></i> <span>An individual by the same first name, last name and date of birth already exists.  Do you want to continue and create this individual?</span><button data-bind="click: forceSave">Proceed and Create</button>\r\n        </p> -->\r\n        <span class="errorheader" style="margin-top: 10px; border: 1px solid; background: #fbcbc7; color: #871409; display: block; font-size: 11px; padding: 5px;">\r\n            <a href="#">\r\n                <i class="icon-warning red"></i>\r\n            </a>An individual with the same first name, last name and date of birth already exists. Do you want to continue and create this individual? <button class="btn small color" data-bind="click: forceSave">Proceed and Create</button></span>\r\n    </div>\r\n    <div class="row">\r\n        <h2 class="span12" data-bind="text: fullName"></h2>\r\n    </div>\r\n    <div class="row validation-summary" data-bind="if: !isValid()">\r\n\t\t<h3>Please correct the follwing errors:</h3>\r\n        <ul data-bind="foreach: validationErrors">\r\n            <li class="validation-errors">\r\n                <h5 data-bind="text: Message"></h5>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>First Name</span>\r\n            <input type="text" data-bind="value: firstName, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'firstName\') !== -1) }" placeholder="first name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>Middle Name</span>\r\n            <input type="text" data-bind="value: middleName, valueUpdate: \'afterkeydown\'" placeholder="middle name" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Last Name</span>\r\n            <input type="text" data-bind="value: lastName, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'lastName\') !== -1) }" placeholder="last name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>Suffix</span>\r\n            <input type="text" data-bind="value: suffix, valueUpdate: \'afterkeydown\'" placeholder="suffix" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Preferred Name</span>\r\n            <input type="text" data-bind="value: preferredName, valueUpdate: \'afterkeydown\'" placeholder="preferred name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>DOB</span>\r\n            <input type="text" data-bind="value: dOB, date: dOB, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'dOB\') !== -1) }" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Override SSN - <span data-bind="with: formattedSSN">(<span data-bind="text: $data"></span>)</span>:</span>\r\n            <input type="text" data-bind="ssn: fullSSN, value: fullSSN, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'fullSSN\') !== -1) }" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6" data-bind="with: genderModel">\r\n            <div class="row">\r\n                <span class="span3 line">Gender</span>\r\n                <div class="span2 line align-right">\r\n                    <img alt="Patient small" class="" data-bind="attr: { src: SmallImgSrc }" />\r\n                </div>\r\n                <div style="padding-top: 2%;" class="span4 line" data-bind="chsnsingle: { options:  $root.genders, value: $parent.gender, text: \'Description\', idValue: \'Gender\' }"></div>\r\n            </div>\r\n        </label>\r\n        <label class="span6" data-bind="with: priorityModel">\r\n            <div class="row">\r\n                <span class="span3 line">Priority</span>\r\n                <div class="span2 line align-right">\r\n                    <img style="vertical-align: middle;" data-bind="attr: { src: imageSource }">\r\n                </div>\r\n                <div style="padding-top: 2%;" class="span4 line" data-bind="chsnsingle: { options:  $root.priorities, value:  $parent.priority, text: \'levelName\', idValue: \'id\' }"></div>\r\n            </div>\r\n        </label>\r\n    </div>\r\n\t<div class="line"></div><div class="line"></div>\r\n</div>';});


define('text!views/templates/patient.systems.html',[],function () { return '<div class="body" data-bind="visible: showing">\r\n\t<div class="pad-vertical">\r\n\t</div>\r\n\t<div class="pad-vertical" data-bind="visible: canAddId">\r\n\t\t<div class="row">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t\t<div class="span6 pad-horizontal">\r\n\t\t\t\t\t<input type="text" size="30" placeholder="ID Value" data-bind="value: newSystemId, valueUpdate: \'afterkeydown\'" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="span3 pad-left">\r\n\t\t\t\t\t<button class="btn color small pull-right" href="#" data-bind="click: createNewId, enable: newSystemId">\r\n\t\t\t\t\t\t<i class="icon-plus"></i>\r\n\t\t\t\t\t\t<span class="pad-left">Add</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="pad-vertical">\r\n\t\t<div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="span1">\r\n\t\t\t\t\t<strong>Primary</strong>\r\n\t\t\t\t</div>\r\n<!-- \t\t\t\t<div class="span3">\r\n\t\t\t\t\t<strong>System</strong>\r\n\t\t\t\t</div> -->\r\n\t\t\t\t<div class="span3">\r\n\t\t\t\t\t<strong>Value</strong>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class="span3">\r\n\t\t\t\t\t<strong>Status</strong>\r\n\t\t\t\t</div> -->\r\n\t\t\t\t<div class="span2">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- ko foreach: computedSystemIds -->\r\n\t\t\t\t<!-- ko compose: "templates/system.id.edit.html" -->\r\n\t\t\t\t<!-- /ko -->\r\n\t\t\t<!-- /ko -->\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/templates/phone.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' blue\' }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n\t\t\t<input data-bind="phone: $data, value: number, valueUpdate: \'afterkeydown\', hasFocus: isFocused ,disable: $parent.phoneOptedOut, css: { invalid: !isValid() }" placeholder="XXX-XXX-XXXX" title="XXX-XXX-XXXX"/>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/phone.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="lighterblue" data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' lighterblue\' }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { \'title\': formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/program.edit.html',[],function () { return '<div class="body" data-bind="with: program">\r\n\t<div class="column">\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned By:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Assigned To:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span5">\r\n\t\t\t\t<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="span4">\r\n\t\t\t\t<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- <div class="row pad-top divider">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Action Status:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span9">\r\n\t\t\t\t<select style="display: none;">\r\n\t\t\t\t\t<option>In Progress\t</option>\r\n\t\t\t\t\t<option>Not Started</option>\r\n\t\t\t\t\t<option>Closed</option>\r\n\t\t\t\t\t<option>Removed </option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class="row pad-top">\r\n\t\t\t\t<div class="span3 align-left">\r\n\t\t\t\t\t<span>Reason:\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="span9">\r\n\t\t\t\t\t<textarea>\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>Start Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" value="03/15/2014">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span3 align-left">\r\n\t\t\t\t<span>End Date:\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<input class="datepicker" type="text" id="dp1401893998028">\r\n\t\t\t</div>\r\n\t\t</div> -->\r\n\t</div>\r\n</div>';});


define('text!views/templates/program.remove.html',[],function () { return '<div class="body" data-bind="with: program">\r\n\t<div class="pad-vertical">\r\n\t\t<div class="row">\r\n\t\t\t<h3 class="span12">Confirm that you want to remove the program <span data-bind="text: name"></span></h3>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="pad-vertical">\r\n\t\t<div class="row">\r\n\t\t\t<div class="span3">\r\n\t\t\t\t<strong>Reason for removing:</strong>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<div class="span12">\r\n\t\t\t<textarea data-bind="value: $parent.reason"></textarea>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row pad-top divider"><em>All modules and actions associated with this program, including the program itself, will be removed from the individual\'s plan.  You need to manually remove any data or other programs, modules, or actions that were set as a result of any actions and modules already completed that are no longer applicable.  </em>\r\n\t\t</div>\r\n\t\t<div class="row pad-top">\r\n\t\t\t<em>This action cannot be undone\t</em>\r\n\t\t</div>\r\n\t</div>\r\n</div>';});


define('text!views/templates/system.id.edit.html',[],function () { return '<div class="row pad-top divider">\r\n\t<div class="span1">\r\n        <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n            <span class="checked">\r\n                <input type="radio"/>\r\n            </span>\r\n        </div>\r\n\t</div>\r\n\t<!-- <div class="span3" data-bind="text: systemName"></div> -->\r\n\t<!-- <div class="span3" data-bind="text: systemName"></div> -->\r\n\t<div class="span3">\r\n\t\t<input type="text" data-bind="value: systemId, valueUpdate: \'afterkeydown\'"/>\r\n\t</div>\r\n\t<!-- <div class="span3">\r\n\t\t<select data-bind="options: $parent.observationDisplays, value: displayId, optionsText: \'name\', optionsValue: \'id\'"></select>\r\n\t</div> -->\r\n\t<!-- <div class="span2">\r\n    <input class="datepicker" readonly="readonly" type="text" data-bind="datepicker: startDate, datepickerOptions: { maxDate: \'+0\' }, css: { invalid: (validationErrorsArray().indexOf(\'startDate\') !== -1) }" />\r\n\t</div>\r\n\t<div class="span3">\r\n\t\t<select data-bind="options: $parent.observationStates, value: stateId, optionsText: \'name\', optionsValue: \'id\', attr: { \'disabled\': isNew }"></select>\r\n\t</div>\r\n\t<div class="span1">\r\n    <a href="#" data-bind="click: $parent.deleteFocusProblem, clickBubble: false"><i class="icon-cancel red"></i></a>\r\n\t</div> -->\r\n</div>';});


define('text!views/templates/system.ids.list.html',[],function () { return '';});


define('text!views/templates/task.closeddate.html',[],function () { return '<span data-bind="DateOrDash: closedDate"></span>';});


define('text!views/templates/task.description.html',[],function () { return '<a class="edit" href="#" data-bind="text: (description() ? description() : \'-\'), click: edit, attr: { title: description }">\r\n</a>';});


define('text!views/templates/task.edit.html',[],function () { return '<div class="body" data-bind="with: task">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span7">\r\n                    <input data-bind="value: description, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="500" type="text" />\r\n                    <span><em class="grey" data-bind="visible: !description()">Description is required</em></span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.goalTaskStatuses, value: status, text: \'name\', label: \'goaltaskstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Start Date</span>\r\n                </div>\r\n                <div class="span6">\r\n                    <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Target Value</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input data-bind="value: targetValue" maxlength="255" />\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Target Date</span>\r\n                </div>\r\n                <div class="span6">\r\n                    <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Associated Barrier(s)</span>\r\n                </div>\r\n                <!-- ko if: goal -->\r\n                <div class="span6" data-bind="multiselect: { options: $parent.computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                <!-- /ko -->\r\n                <!-- ko if: !goal() -->\r\n                <span class="span9">No barriers</span>\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- ko foreach: customAttributes().sort($parent.alphabeticalOrderSort) -->\r\n            <!-- ko compose: path -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/templates/task.goal.html',[],function () { return '<div class="ellipsis">\r\n\t<span data-bind="if: computedGoalName()">\r\n\t    <a href="#" data-bind="text: computedGoalName, click: gotoGoal, attr: { title: computedGoalName }"></a>\r\n\t</span>\r\n\t<!-- ko ifnot: computedGoalName() -->\r\n\t\t<span>-</span>\r\n\t<!-- /ko -->\r\n</div>';});


define('text!views/templates/task.panel.html',[],function () { return '<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedTasks">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedTasks().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>';});


define('text!views/templates/task.startdate.html',[],function () { return '<span data-bind="DateOrDash: startDate"></span>';});


define('text!views/templates/task.status.html',[],function () { return '<i data-bind="css: status().iconClass"></i>';});


define('text!views/templates/task.statusdate.html',[],function () { return '<span data-bind="DateOrDash: statusDate"></span>';});


define('text!views/templates/task.targetdate.html',[],function () { return '<span data-bind="DateOrDash: targetDate"></span>';});


define('text!views/templates/task.targetvalue.html',[],function () { return '<div class="ellipsis">\r\n    <span data-bind="with: targetValue">\r\n        <span data-bind="text: $data, attr: { title: $data }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: targetValue">\r\n    \t<span>-</span>\r\n    </div>\r\n</div>';});


define('text!views/templates/todo.assignedto.html',[],function () { return '<div>\r\n\t<div class="ellipsis" data-bind="if: assignedToId()">\r\n\t    <span data-bind="text: assignedTo() ? (assignedTo().preferredName? assignedTo().preferredName: \'-\') : \'-\', attr: { title: assignedTo() ? (assignedTo().preferredName? assignedTo().preferredName: \'-\') : \'-\' }"></span>\r\n\t</div>\r\n\t<div data-bind="ifnot: assignedToId">\r\n\t\t<span>-</span>\r\n\t</div>\r\n</div>';});


define('text!views/templates/todo.category.html',[],function () { return '<div>\r\n    <span data-bind="with: category">\r\n        <span data-bind="text: name"></span>\r\n    </span>\r\n    <div data-bind="ifnot: category">\r\n    \t<span>-</span>\r\n    </div>\r\n</div>';});


define('text!views/templates/todo.closedon.html',[],function () { return '<span data-bind="DateOrDash: closedDate"></span>';});


define('text!views/templates/todo.duedate.html',[],function () { return '<span data-bind="DateOrDash: dueDate"></span>';});


define('text!views/templates/todo.edit.html',[],function () { return '<div class="body" data-bind="with: todo">\t\r\n    <div class="row" data-bind="if: $parent.hasErrors">\r\n        <ul data-bind="foreach: $parent.errors">\r\n            <li class="validation-errors">\r\n                <h5 data-bind="text: Message"></h5>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\t<div class="row">\r\n\t\t<div class="span2 align-right grey">Category:\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.toDoCategories, value: category, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Status: \t\t\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.statuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Assigned to:\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n\t\t\t<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n\t\t</div>\r\n\t\t<div class="span5 align-right">\r\n\t\t\t<button class="close small" data-bind="enable: assignedToId(), click: $parent.removeUserAssociation">Remove Association</button>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Due Date: \t\t\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n\t\t\t<input placeholder="due date" size="30" type="text" data-bind="datepicker: dueDate">\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Priority:\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n        \t<div data-bind="chsnsingle: { options: $parent.priorities, value: priority, text: \'levelName\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Individual:\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n\t\t\t<span data-bind="text: (patientDetails() && patientDetails().fullName()) ?  patientDetails().fullName() : \'-\'"></span>\r\n\t\t</div>\r\n\t\t<div class="span5 align-right">\r\n\t\t\t<button class="close small" data-bind="enable: patientId(), click: $parent.removePatientAssociation">Remove Association</button>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top" data-bind="">\r\n\t\t<div class="span2 align-right grey">Program(s):\r\n\t\t</div>\r\n\t\t<div class="span4 pad-left" data-bind="visible: patientId()">\r\n            <div data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString, disable: $parent.noPatient }">\r\n            </div>\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left" data-bind="visible: !patientId()">\r\n            <span>-</span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Title:\r\n\t\t</div>\r\n\t\t<div class="span9 pad-left">\r\n\t\t\t<input placeholder="title" size="80" maxlength="500" type="text" data-bind="value: title, valueUpdate: \'afterkeydown\', css: { invalid: ($parent.errors().length !== 0) }">\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="span3 grey">Description:\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="span12">\r\n\t\t\t<textarea data-bind="value: description" maxlength="500">\r\n\t\t\t</textarea>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Created On: \t\t\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left">\r\n\t\t\t<span data-bind="DateOrDash: createdOn"></span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top">\r\n\t\t<div class="span2 align-right grey">Updated On: \t\t\r\n\t\t</div>\r\n\t\t<div class="span3 pad-left" data-bind="DateOrDash: updatedOn">\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row pad-top" data-bind="visible: !isNew()">\r\n\t\t<button data-bind="click: $parent.deleteToDo">\r\n\t\t\t<i class="icon-cancel"></i> Delete\r\n\t\t</button>\r\n\t</div>\r\n</div>';});


define('text!views/templates/todo.panel.html',[],function () { return '<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedTodos">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedTodos().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>';});


define('text!views/templates/todo.patient.html',[],function () { return '<div class="ellipsis">\r\n\t<span data-bind="if: patientId() && patientDetails()">\r\n\t    <a data-bind="text: patientDetails().fullLastName() +\', \' + patientDetails().fullFirstName(), attr: { href: \'#patients/\' + patientId(), title: patientDetails().fullLastName() +\', \' + patientDetails().fullFirstName() }"></a>\r\n\t</span>\r\n\t<!-- ko ifnot: patientId -->\r\n\t\t<span>-</span>\r\n\t<!-- /ko -->\r\n</div>';});


define('text!views/templates/todo.priority.html',[],function () { return '<img data-bind="attr: { src: priority().imageSource }" />';});


define('text!views/templates/todo.status.html',[],function () { return '<i data-bind="css: status().iconClass"></i>';});


define('text!views/templates/todo.title.html',[],function () { return '<a class="edit" href="#" data-bind="text: (title() ? title() : \'-\'), click: edit, attr: { title: title }">\r\n</a>';});


define('text!views/templates/todo.updatedon.html',[],function () { return '<span data-bind="DateOrDash: updatedOn"></span>';});


define('text!views/widgets/controls.html',[],function () { return '<div class="controls">\r\n    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: $parents[1].minimizeThisColumn, enable: $parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: $parents[1].maximizeThisColumn, enable: !$parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: $parents[1].toggleFullScreen, clickBubble: false">\r\n    </div>\r\n</div>';});


define('text!views/widgets/controls.two.html',[],function () { return '<div class="controls">\r\n    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: minimizeThisColumn, enable: isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: maximizeThisColumn, enable: isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: toggleFullScreen, clickBubble: false">\r\n    </div>\r\n</div>';});


define('text!widgets/chsnmultiple/view.html',[],function () { return '<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/chsnmultiple/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."})},e.prototype.attached=function(){},e});

define('text!widgets/chsnsingle/view.html',[],function () { return '<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, \r\n\t\t\t\t\t\tchosenUpdater: selectedValue, disable: disabled, \r\n\t\t\t\t\t\tchosenOptions: { caption: caption, isSearch: isSearch, isCancel: isCancel, title: title }">\r\n\t\t<option></option>\r\n\t</select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, \r\n\t\t\t\t\t\tchosenUpdater: selectedValue, disable: disabled, \r\n\t\t\t\t\t\tchosenOptions: { caption: caption, isSearch: isSearch, isCancel: isCancel, title: title }">\r\n\t\t<option></option>\r\n\t</select>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/chsnsingle/viewmodel',["durandal/composition"],function(){var e=[],t=function(){};return t.prototype.compositionComplete=function(e){function t(e){var t=!1,a=$(n.ulSearchResults).children("li:contains("+n.stickeySearchItemText+")");if(0==a.length){var r=e?"highlighted":"";n.ulSearchResults.append('<li class="active-result '+r+'" data-option-array-index="'+n.stickeyIndex+'">'+n.stickeySearchItemText+"</li>"),t=!0}return t}var n=this;if(ko.utils.unwrapObservable(n.isFocused)&&(n.selectElm=$(e).find("select"),n.selectElm.trigger("chosen:activate")),n.isSearch&&n.stickeySearchItemText&&(n.searchTokenInput=$(e).find("div.chosen-search input"),n.ulSearchResults=$(e).find("ul.chosen-results"),n.searchTokenInput)){var a=$(e).children("select").children("option:contains("+n.stickeySearchItemText+")");n.stickeyIndex=a.index(),$(n.searchTokenInput).on("change keyup paste",function(e){var a=$(this).val();if(ko.isObservable(n.searchQueryText)&&n.searchQueryText(a),a&&a.length>0||"paste"===e.type||"cut"===e.type){var r=!1,i=e.which||e.keyCode;1==n.ulSearchResults.children(".no-results").length&&(r=!0),t(r)||13==i&&2==n.ulSearchResults.children().length&&r&&n.stickeyIndex&&n.stickeyIndex>0&&n.options&&n.options.length>0&&(n.idValue?n.selectedValue(n.options[n.stickeyIndex-1][n.idValue]):n.selectedValue(n.options[n.stickeyIndex-1]))}("paste"===e.type||"cut"===e.type)&&setTimeout(function(){t()},100)})}},t.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.disabled=t.settings.disabled,t.isRequired=t.settings.isRequired,t.caption=t.settings.caption?t.settings.caption:"Choose one",t.isCancel=t.settings.isCancel?t.settings.isCancel:!1,t.isSearch=t.settings.isSearch?t.settings.isSearch:!1,t.searchQueryText=t.settings.searchQueryText,t.stickeySearchItemText=t.settings.stickeySearchItemText?t.settings.stickeySearchItemText:null,t.title=t.settings.title?t.settings.title:null,t.isFocused=t.settings.isFocused?t.settings.isFocused:null,t.isInvalid=ko.computed(function(){return t.isRequired&&!t.selectedValue()}),t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.isObservable(e[t.text])?ko.computed(e[t.text]):ko.computed(function(){return e[t.text]})}),e})},t.prototype.attached=function(){},t.prototype.detached=function(){var t=this;ko.utils.arrayForEach(e,function(e){e.dispose()}),t.isInvalid.dispose(),$(t.searchTokenInput).remove()},t});

define('text!widgets/chsnsingledark/view.html',[],function () { return '<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select class="dark" data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosenUpdater: selectedValue, disable: disabled, chosenOptions: { caption: caption }"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select class="dark"  data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosenUpdater: selectedValue, disable: disabled, chosenOptions: { caption: caption }"></select>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/chsnsingledark/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.disabled=t.settings.disabled,t.caption=t.settings.caption?t.settings.caption:"Choose one",t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.isObservable(e[t.text])?ko.computed(e[t.text]):ko.computed(function(){return e[t.text]})}),e})},e.prototype.attached=function(){},e});

define('text!widgets/multiselect/view.html',[],function () { return '<div class="chosen-container chosen-container-multi chosen-container-active" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <ul class="chosen-choices" data-bind="css: { \'invalid\': isInvalid() }">\r\n        <li class="search-field">\r\n            <input type="text" class="default" data-bind="value: computedLabel, click: toggleDropdown, event: { mouseover: stopClosing, mouseleave: startClosing }, disable: isDisabled" readonly="readonly">\r\n        </li>\r\n    </ul>\r\n    <div class="chosen-drop" data-bind="visible: showing, event: { mouseover: stopClosing, mouseleave: startClosing }">\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.checkForIdValue($data[$parent.idValue]()) }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>';});

define('widgets/multiselect/viewmodel',["durandal/composition"],function(){function e(){t||(t=require("services/datacontext"))}var t,n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.canClose=ko.observable(!1),a.showing=ko.observable(!1),a.options=a.settings.options,a.selectedValues=a.settings.values,a.isRequired=a.settings.isRequired,a.text=a.settings.text,a.label=a.settings.label,a.idValue=a.settings.idValue,a.stringValue=a.settings.stringValue,a.computedOptions=ko.computed(function(){var e=a.options();return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[a.text])}),e}),a.checkForIdValue=function(e){var t=ko.utils.arrayFirst(a.selectedValues(),function(t){return t.id()===e});return t?!0:!1},a.computedLabel=ko.computed(function(){return a.selectedValues()?a.selectedValues().length+" selected.":"Choose..."}),a.selectOption=function(n){e();var r=ko.utils.arrayFirst(a.selectedValues(),function(e){return e.id()===n.id()});if(r){var i=a.selectedValues().indexOf(r);i>-1?a.selectedValues.splice(i,1):a.selectedValues.remove(r)}else{var o={id:n.id()};thisComplexType=t.createComplexType("Identifier",o),a.selectedValues.push(thisComplexType)}},a.checkClosing=ko.computed(function(){a.canClose()&&a.showing(!1)}).extend({throttle:1e3}),a.isDisabled=ko.computed(function(){var e=!1;return a.settings.disabled&&(e=a.settings.disabled),e}),a.isInvalid=ko.computed(function(){return a.isRequired&&0===a.selectedValues().length})},n.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},n.prototype.startClosing=function(){var e=this;e.canClose(!1),e.canClose(!0)},n.prototype.stopClosing=function(){var e=this;e.canClose(!1)},n.prototype.attached=function(){},n});

define('text!widgets/singleselect/view.html',[],function () { return '<div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 150px;" title="" id="filter_chosen" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <a class="chosen-single" data-bind="click: toggleDropdown, attr: { \'data-phyautomation\': label + \'-dropdown-button\' }, event: { mouseover: stopClosing, mouseleave: startClosing }, disable: isDisabled">\r\n        <span data-bind="text: computedLabel"></span>\r\n        <div>\r\n            <b></b>\r\n        </div>\r\n    </a>\r\n    <div class="chosen-drop" data-bind="visible: showing, event: { mouseover: stopClosing, mouseleave: startClosing }">\r\n        <div class="chosen-search">\r\n            <input type="text" autocomplete="off" readonly="" />\r\n        </div>\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions, attr: { \'data-phyautomation\': label + \'-dropdown-results\' } ">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.selectedValue() === $data }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <!-- ko if : computedOptions().length === 0 -->\r\n    <p><em class="grey" data-bind="text: \'No \' + label + \' available\'"></em></p>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/singleselect/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.canClose=ko.observable(!1),t.showing=ko.observable(!1),t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."}),t.selectOption=function(e){t.idValue?t.selectedValue(e[t.idValue]()):t.selectedValue(e),t.showing(!1)},t.checkClosing=ko.computed(function(){t.canClose()&&t.showing(!1)}).extend({throttle:1e3}),t.isDisabled=ko.computed(function(){var e=!1;return t.settings.disabled&&(e=t.settings.disabled),e})},e.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},e.prototype.startClosing=function(){var e=this;e.canClose(!1),e.canClose(!0)},e.prototype.stopClosing=function(){var e=this;e.canClose(!1)},e.prototype.attached=function(){},e});
define('plugins/dialog',["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,a,r,i,o){function s(t){return e.defer(function(n){e.isString(t)?e.acquire(t).then(function(t){n.resolve(e.resolveObject(t))}).fail(function(n){e.error("Failed to load dialog module ("+t+"). Details: "+n.message)}):n.resolve(t)}).promise()}var c,u={},l=o.observable(0),d=function(e,t,n,a,r){this.message=e,this.title=t||d.defaultTitle,this.options=n||d.defaultOptions,this.autoclose=a||!1,this.settings=i.extend({},d.defaultSettings,r)};return d.prototype.selectOption=function(e){c.close(this,e)},d.prototype.getView=function(){return r.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(e){delete d.prototype.getView,d.prototype.viewUrl=e},d.defaultTitle=t.title||"Application",d.defaultOptions=["Ok"],d.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"","class":"modal-content messageBox",style:null},d.setDefaults=function(e){i.extend(d.defaultSettings,e)},d.prototype.getButtonClass=function(e){var t="";return this.settings&&(this.settings.buttonClass&&(t=this.settings.buttonClass),0===e()&&this.settings.primaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.primaryButtonClass),e()>0&&this.settings.secondaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.secondaryButtonClass)),t},d.prototype.getClass=function(){return this.settings?this.settings["class"]:"messageBox"},d.prototype.getStyle=function(){return this.settings?this.settings.style:null},d.prototype.getButtonText=function(t){var n=i.type(t);return"string"===n?t:"object"===n?"string"===i.type(t.text)?t.text:(e.error("The object for a MessageBox button does not have a text property that is a string."),null):(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.prototype.getButtonValue=function(t){var n=i.type(t);return"string"===n?t:"object"===n?"undefined"===i.type(t.text)?(e.error("The object for a MessageBox button does not have a value property defined."),null):t.value:(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"<!-- ko foreach: options -->",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"<!-- /ko -->",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),c={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:o.computed(function(){return l()>0}),getContext:function(e){return u[e||"default"]},addContext:function(e,t){t.name=e,u[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.binding&&(n.binding=t.binding),t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,r,i){var o=this,c=u[i||"default"];return e.defer(function(e){s(t).then(function(t){var i=a.create();i.activateItem(t,r).then(function(a){if(a){var r=t.__dialog__={owner:t,context:c,activator:i,close:function(){var n=arguments;i.deactivateItem(t,!0).then(function(a){a&&(l(l()-1),c.removeHost(r),delete t.__dialog__,0===n.length?e.resolve():1===n.length?e.resolve(n[0]):e.resolve.apply(e,n))})}};r.settings=o.createCompositionSettings(t,c),c.addHost(r),l(l()+1),n.compose(r.host,r.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,n,a,r,i){return e.isString(this.MessageBox)?c.show(this.MessageBox,[t,n||d.defaultTitle,a||d.defaultOptions,r||!1,i||{}]):c.show(new this.MessageBox(t,n,a,r,i))},install:function(e){t.showDialog=function(e,t,n){return c.show(e,t,n)},t.closeDialog=function(){return c.close.apply(c,arguments)},t.showMessage=function(e,t,n,a,r){return c.showMessage(e,t,n,a,r)},e.messageBox&&(c.MessageBox=e.messageBox),e.messageBoxView&&(c.MessageBox.prototype.getView=function(){return r.processMarkup(e.messageBoxView)}),e.messageBoxViewUrl&&c.MessageBox.setViewUrl(e.messageBoxViewUrl)}},c.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=i("body"),n=i('<div class="modalBlockout"></div>').css({"z-index":c.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),a=i('<div class="modalHost"></div>').css({"z-index":c.getNextZIndex()}).appendTo(t);if(e.host=a.get(0),e.blockout=n.get(0),!c.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var r=i("html"),o=t.outerWidth(!0),s=r.scrollTop();i("html").css("overflow-y","hidden");var u=i("body").outerWidth(!0);t.css("margin-right",u-o+parseInt(e.oldBodyMarginRight,10)+"px"),r.scrollTop(s)}},removeHost:function(e){if(i(e.host).css("opacity",0),i(e.blockout).css("opacity",0),setTimeout(function(){o.removeNode(e.host),o.removeNode(e.blockout)},this.removeDelay),!c.isOpen()){var t=i("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?i("body").css("margin-right",e.oldBodyMarginRight):i("body").css("margin-right","")}},attached:function(e){i(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var a=c.getDialog(n.model),r=i(e),o=r.find("img").filter(function(){var e=i(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});r.data("predefinedWidth",r.get(0).style.width);var s=function(e,t){setTimeout(function(){var n=i(e);t.context.reposition(e),i(t.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};s(e,a),o.load(function(){s(e,a)}),(r.hasClass("autoclose")||n.model.autoclose)&&i(a.blockout).click(function(){a.close()})},reposition:function(e){var t=i(e),n=i(window);t.data("predefinedWidth")||t.css({width:""});var a=t.outerWidth(!1),r=t.outerHeight(!1),o=n.height()-10,s=n.width()-10,c=Math.min(r,o),u=Math.min(a,s);t.css({"margin-top":(-c/2).toString()+"px","margin-left":(-u/2).toString()+"px"}),r>o?t.css("overflow-y","auto").outerHeight(o):t.css({"overflow-y":"",height:""}),a>s?t.css("overflow-x","auto").outerWidth(s):(t.css("overflow-x",""),t.data("predefinedWidth")?t.css("width",t.data("predefinedWidth")):t.outerWidth(u))}}),c});
define('plugins/http',["jquery","knockout"],function(e,t){return{callbackParam:"callback",toJSON:function(e){return t.toJSON(e)},get:function(n,a,r){return e.ajax(n,{data:a,headers:t.toJS(r)})},jsonp:function(n,a,r,i){return-1==n.indexOf("=?")&&(r=r||this.callbackParam,n+=-1==n.indexOf("?")?"?":"&",n+=r+"=?"),e.ajax({url:n,dataType:"jsonp",data:a,headers:t.toJS(i)})},put:function(n,a,r){return e.ajax({url:n,data:this.toJSON(a),type:"PUT",contentType:"application/json",dataType:"json",headers:t.toJS(r)})},post:function(n,a,r){return e.ajax({url:n,data:this.toJSON(a),type:"POST",contentType:"application/json",dataType:"json",headers:t.toJS(r)})},remove:function(n,a,r){return e.ajax({url:n,data:a,type:"DELETE",headers:t.toJS(r)})}}});
define('plugins/observable',["durandal/system","durandal/binder","knockout"],function(e,t,n){function a(e){var t=e[0];return"_"===t||"$"===t||w&&e===w}function r(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function i(e){if(!e||r(e)||e.ko===n||e.jquery)return!1;var t=g.call(e);return-1==v.indexOf(t)&&!(e===!0||e===!1)}function o(e){var t={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function s(e,t,n){var a=e.__observable__,r=!0;if(!a||!a.__full__){a=a||o(e),a.__full__=!0,b.forEach(function(n){t[n]=function(){return k[n].apply(e,arguments)}}),y.forEach(function(n){e[n]=function(){r=!1;var e=T[n].apply(t,arguments);return r=!0,e}}),f.forEach(function(n){e[n]=function(){r&&t.valueWillMutate();var a=k[n].apply(e,arguments);return r&&t.valueHasMutated(),a}}),h.forEach(function(a){e[a]=function(){for(var i=0,o=arguments.length;o>i;i++)c(arguments[i],n);r&&t.valueWillMutate();var s=k[a].apply(e,arguments);return r&&t.valueHasMutated(),s}}),e.splice=function(){for(var a=2,i=arguments.length;i>a;a++)c(arguments[a],n);r&&t.valueWillMutate();var o=k.splice.apply(e,arguments);return r&&t.valueHasMutated(),o};for(var i=0,s=e.length;s>i;i++)c(e[i],n)}}function c(t,a){var r,c;if(w&&t&&t[w]&&(a=a?a.slice(0):[],a.push(t[w])),i(t)&&(r=t.__observable__,!r||!r.__full__)){if(r=r||o(t),r.__full__=!0,e.isArray(t)){var u=n.observableArray(t);s(t,u,a)}else for(var p in t)if(!m(p)&&!r[p]){var g=Object.getPropertyDescriptor(t,p);g&&(g.get||g.set)?d(t,p,{get:g.get,set:g.set}):(c=t[p],e.isFunction(c)||l(t,p,c,a))}S&&e.log("Converted",t)}}function u(e,t,n){n?t?t.destroyAll||s(t,e):(t=[],s(t,e)):c(t),e(t)}function l(t,a,r,i){var l,d,p=t.__observable__||o(t);if(void 0===r&&(r=t[a]),e.isArray(r))l=n.observableArray(r),s(r,l,i),d=!0;else if("function"==typeof r){if(!n.isObservable(r))return null;l=r}else!P&&e.isPromise(r)?(l=n.observable(),r.then(function(t){if(e.isArray(t)){var a=n.observableArray(t);s(t,a,i),t=a}l(t)})):(l=n.observable(r),c(r,i));return i&&i.length>0&&i.forEach(function(n){e.isArray(r)?l.subscribe(function(e){n(t,a,null,e)},null,"arrayChange"):l.subscribe(function(e){n(t,a,e,null)})}),Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:l,set:n.isWriteableObservable(l)?function(t){t&&e.isPromise(t)&&!P?t.then(function(t){u(l,t,e.isArray(t))}):u(l,t,d)}:void 0}),p[a]=l,l}function d(t,a,r){var i,o={owner:t,deferEvaluation:!0};return"function"==typeof r?o.read=r:("value"in r&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof r.get&&"function"!=typeof r.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),o.read=r.get||r.read,o.write=r.set||r.write),i=n.computed(o),t[a]=i,l(t,a,i)}var p,m,g=Object.prototype.toString,v=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],y=["remove","removeAll","destroy","destroyAll","replace"],f=["pop","reverse","sort","shift","slice"],h=["push","unshift"],b=["filter","map","reduce","reduceRight","forEach","every","some"],k=Array.prototype,T=n.observableArray.fn,S=!1,w=void 0,P=!1;if(!("getPropertyDescriptor"in Object)){var N=Object.getOwnPropertyDescriptor,I=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,t){for(var n,a=e;a&&!(n=N(a,t));)a=I(a);return n}}return p=function(e,t){var a,r,i;return e?(a=e.__observable__,a&&(r=a[t])?r:(i=e[t],n.isObservable(i)?i:l(e,t,i))):null},p.defineProperty=d,p.convertProperty=l,p.convertObject=c,p.install=function(e){var n=t.binding;t.binding=function(e,t,a){a.applyBindings&&!a.skipConversion&&c(e),n(e,t)},S=e.logConversion,e.changeDetection&&(w=e.changeDetection),P=e.skipPromises,m=e.shouldIgnorePropertyName||a},p});
define('plugins/serializer',["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var n=e[0];if("_"===n||"$"===n)return void 0}return t},serialize:function(t,n){return n=void 0===n?{}:n,(e.isString(n)||e.isNumber(n))&&(n={space:n}),JSON.stringify(t,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var n=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[n]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,n,a){var r=n(t);if(r){var i=a(r);if(i)return i.fromJSON?i.fromJSON(t):new i(t)}return t},deserialize:function(e,t){var n=this;t=t||{};var a=t.getTypeId||function(e){return n.getTypeId(e)},r=t.getConstructor||function(e){return n.typeMap[e]},i=t.reviver||function(e,t){return n.reviver(e,t,a,r)};return JSON.parse(e,i)},clone:function(e,t){return this.deserialize(this.serialize(e,t),t)}}});
define('plugins/widget',["durandal/system","durandal/composition","jquery","knockout"],function(e,t,n,a){function r(e,n){var r=a.utils.domData.get(e,c);r||(r={parts:t.cloneNodes(a.virtualElements.childNodes(e))},a.virtualElements.emptyNode(e),a.utils.domData.set(e,c,r)),n.parts=r.parts}var i={},o={},s=["model","view","kind"],c="durandal-widget-data",u={getSettings:function(t){var n=a.utils.unwrapObservable(t())||{};if(e.isString(n))return{kind:n};for(var r in n)n[r]=-1!=a.utils.arrayIndexOf(s,r)?a.utils.unwrapObservable(n[r]):n[r];return n},registerKind:function(e){a.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,a,i,o){var s=u.getSettings(n);s.kind=e,r(t,s),u.create(t,s,o,!0)}},a.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,n){t&&(o[e]=t),n&&(i[e]=n)},mapKindToModuleId:function(e){return i[e]||u.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return o[e]||u.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,n,a,r){r||(n=u.getSettings(function(){return n},e));var i=u.createCompositionSettings(e,n);t.compose(e,i,a)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var n=e.kinds,i=0;i<n.length;i++)u.registerKind(n[i]);a.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var o=u.getSettings(t);r(e,o),u.create(e,o,i,!0)}},t.composeBindings.push(e.bindingName+":"),a.virtualElements.allowedBindings[e.bindingName]=!0}};return u});
define('transitions/entrance',["durandal/system","durandal/composition","jquery"],function(e,t,n){function a(e,t){e.classList.remove(t?"entrance-in-fade":"entrance-in"),e.classList.remove("entrance-out")}var r=100,i={left:"0px",opacity:1},o={left:"",top:"",right:"",bottom:"",position:"",opacity:""},s=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/),c=!1,u="Webkit Moz O ms Khtml".split(" "),l=document.createElement("div");if(void 0!==l.style.animationName&&(c=!0),!c)for(var d=0;d<u.length;d++)if(void 0!==l.style[u[d]+"AnimationName"]){c=!0;break}c?s?e.log("Using CSS3/jQuery mixed animations."):e.log("Using CSS3 animations."):e.log("Using jQuery animations.");var p=function(t){return e.defer(function(e){function u(){e.resolve()}function l(){t.keepScrollPosition||n(document).scrollTop(0)}function d(){l(),t.triggerAttach(),c?(a(t.child,g),t.child.classList.add(g?"entrance-in-fade":"entrance-in"),setTimeout(function(){a(t.child,g),t.activeView&&a(t.activeView,g),m.css(o),u()},p)):m.animate(i,{duration:p,easing:"swing",always:function(){m.css(o),u()}})}if(t.child){var p=t.duration||500,m=n(t.child),g=!!t.fadeOnly,v={display:"block",opacity:0,position:"absolute",left:g||c?"0px":"20px",right:0,top:0,bottom:0};m.css(v),t.activeView?c&&!s?(a(t.activeView,g),t.activeView.classList.add("entrance-out"),setTimeout(d,r)):n(t.activeView).fadeOut({duration:r,always:d}):d()}else n(t.activeView).fadeOut(r,u)}).promise()};return p});

require(["main"]);
}());