(function () {/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*jslint sloppy: true */
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        hasOwn = Object.prototype.hasOwnProperty,
        aps = [].slice;

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap,
            foundI, foundStarMap, starI, i, j, part,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name && name.charAt(0) === ".") {
            //If have a base name, try to normalize against it,
            //otherwise, assume it is a top-level require that will
            //be relative to baseUrl in the end.
            if (baseName) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that "directory" and not name of the baseName's
                //module. For instance, baseName of "one/two/three", maps to
                //"one/two/three.js", but we want the directory, "one/two" for
                //this normalization.
                baseParts = baseParts.slice(0, baseParts.length - 1);

                name = baseParts.concat(name.split("/"));

                //start trimDots
                for (i = 0; i < name.length; i += 1) {
                    part = name[i];
                    if (part === ".") {
                        name.splice(i, 1);
                        i -= 1;
                    } else if (part === "..") {
                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                            //End of the line. Keep at least one non-dot
                            //path segment at the front so it can be mapped
                            //correctly to disk. Otherwise, there is likely
                            //no path mapping for a path starting with '..'.
                            //This can still fail, but catches the most reasonable
                            //uses of ..
                            break;
                        } else if (i > 0) {
                            name.splice(i - 1, 2);
                            i -= 2;
                        }
                    }
                }
                //end trimDots

                name = name.join("/");
            } else if (name.indexOf('./') === 0) {
                // No baseName, so this is ID is resolved relative
                // to baseUrl, pull off the leading dot.
                name = name.substring(2);
            }
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (hasProp(waiting, name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!hasProp(defined, name) && !hasProp(defining, name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    function onResourceLoad(name, defined, deps){
        if(requirejs.onResourceLoad && name){
            requirejs.onResourceLoad({defined:defined}, {id:name}, deps);
        }
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relName) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relName));
            } else {
                name = normalize(name, relName);
            }
        } else {
            name = normalize(name, relName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i,
            args = [],
            usingExports;

        //Use name if no relName
        relName = relName || name;

        //Call the callback to define the module, if necessary.
        if (typeof callback === 'function') {

            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relName);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (hasProp(defined, depName) ||
                           hasProp(waiting, depName) ||
                           hasProp(defining, depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback.apply(defined[name], args);

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }

        onResourceLoad(name, defined, args);
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, callback).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            //Using a non-zero value because of concern for what old browsers
            //do, and latest browsers "upgrade" to 4 if lower value is used:
            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
            //If want a value immediately, use require('id') instead -- something
            //that works in almond on the global level, but not guaranteed and
            //unlikely to work in other AMD implementations.
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 4);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        config = cfg;
        if (config.deps) {
            req(config.deps, config.callback);
        }
        return req;
    };

    /**
     * Expose module registry for debugging and tooling
     */
    requirejs._defined = defined;

    define = function (name, deps, callback) {

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
            waiting[name] = [name, deps, callback];
        }
    };

    define.amd = {
        jQuery: true
    };
}());

define("../Scripts/almond-custom", function(){});

define('config.app',[],function(){var e="Nightingale",i="api",t={title:e,remoteServiceName:i};return t});
define('config.models',[],function(){function e(e,t){var a=this;a.propertyName=ko.observable(e),a.propertyValue=ko.observable(t)}function t(e,t){var a=this;a.Property=e,a.Value=t}function a(e,t,a,r,n,i){var o=this;o.Title=ko.observable(e),o.Entity=t,o.TemplatePath=ko.observable(a),o.Showing=r?r:!1,o.saveChanges=function(){if(n)n(),o.Showing(!1);else{d();var e=ko.unwrap(o.Entity);e.saveChanges(),o.Showing(!1)}},o.cancelChanges=function(){if(i)i(),o.Showing(!1);else{var e=ko.unwrap(o.Entity);e.cancelChanges(),o.Showing(!1)}}}function r(e,t,a,r){var n=this;n.Type=ko.observable(e),n.Title=ko.observable(t),n.IconPath=ko.observable(a),n.Path=ko.observable(r)}function n(e,t,a){var r=this;r.Id=e,r.Gender=t,r.Description=a,r.SmallImgSrc="/NightingaleUI/Content/images/patient_"+a.toLowerCase()+"_small.png",r.LargeImgSrc="/NightingaleUI/Content/images/patient_"+a.toLowerCase()+"_large.png"}function i(e,t,a){var r=this;r.Id=e,r.Code=t,r.Name=a}function o(e,t){var a=this;a.id=ko.observable(e),a.name=ko.observable(t)}function s(e){function a(e){d(),e.age=ko.computed(function(){if(!e.dOB())return"";var t=moment(e.dOB()).add("hours",23),a=moment(new Date).add("days",1);return!t||t>a||!t.isValid()?"":a.diff(t,"years")}),e.fullFirstName=ko.computed(function(){var t=e.firstName(),a=e.preferredName(),r=e.middleName().substr(0,1)+".",n=a?a:2===r.length?t+" "+r:t;return n}),e.fullLastName=ko.computed(function(){var t=e.lastName(),a=e.suffix(),r=a?t+" "+a:t;return r}),e.fullName=ko.computed(function(){var t=e.fullFirstName(),a=e.fullLastName();return t?t+" "+a:a}),e.formattedSSN=ko.computed(function(){var t="";return e.lastFourSSN()&&(t="XXX-XX-"+e.lastFourSSN()),t}),e.genderModel=ko.computed({read:function(){var t,a=e.gender().toLowerCase();return"m"===a||"male"===a?(e.gender("M"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"m"===e.Id})):"f"===a||"female"===a?(e.gender("F"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}}),e.canSave=ko.computed(function(){var t=e.firstName(),a=e.lastName();return!!t&&!!a}),e.saveChanges=function(){var a=e.id(),r=e,n=[new t("Id",a),new t("Priority",r.priority()),new t("Gender",r.gender()),new t("FirstName",r.firstName()),new t("LastName",r.lastName()),new t("PreferredName",r.preferredName()),new t("Suffix",r.suffix()),new t("DOB",r.dOB()),new t("MiddleName",r.middleName()),new t("Background",r.background())];r.fullSSN()&&n.push(new t("FullSSN",r.fullSSN())),p.saveEntity(r,n)},e.cancelChanges=function(){d(),p.cancelEntityChanges(e)}}function r(e){e.genderModel=ko.computed({read:function(){var t,a=e.gender()?e.gender().toLowerCase():"";return"m"===a||"male"===a?(e.gender("M"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"m"===e.Id})):"f"===a||"female"===a?(e.gender("F"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(p.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}})}function n(e){e.level&&e.level()||e.level("1")}function i(e){e.type=ko.computed(function(){return e.result()||0===e.result()?0===e.result()?"error":"warning":""}),e.alertPath=ko.computed(function(){return e.type()?"shell/alerttypes/"+e.type()+".html":""}),e.showing=ko.observable(!0);var t=e.showing.subscribe(function(){d(),p.enums.alerts.remove(e),t.dispose()})}e.addEntityType({shortName:"Patient",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"},displaySystemId:{dataType:"String"},displaySystemName:{dataType:"String"},displayLabel:{dataType:"String"},providerId:{dataType:"Int64"},dOB:{dataType:"String"},gender:{dataType:"String"},marital:{dataType:"String"},background:{dataType:"String"},protectedFlag:{dataType:"Boolean"},lastFourSSN:{dataType:"String"},fullSSN:{dataType:"String"},priority:{dataType:"String"},flagged:{dataType:"Boolean"},twitterHandle:{dataType:"String"}},navigationProperties:{provider:{entityTypeName:"Provider",isScalar:!0,associationName:"Provider_Patients",foreignKeyNames:["providerId"]},priorityModel:{entityTypeName:"Priority",isScalar:!0,associationName:"Priority_Patients",foreignKeyNames:["priority"]},problems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Patient"},programs:{entityTypeName:"Program",isScalar:!1,associationName:"Patient_Programs"},goals:{entityTypeName:"Goal",isScalar:!1,associationName:"Patient_Goals"},notes:{entityTypeName:"Note",isScalar:!1,associationName:"Patient_Notes"},careMembers:{entityTypeName:"CareMember",isScalar:!1,associationName:"Patient_CareMembers"},contactCard:{entityTypeName:"ContactCard",isScalar:!0,associationName:"Patient_ContactCard"},observations:{entityTypeName:"Observation",isScalar:!1,associationName:"Patient_Observations"}}}),e.addEntityType({shortName:"PatientProblem",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},patientID:{dataType:"String"},problemID:{dataType:"String"},level:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"PatientProblem_Patient",foreignKeyNames:["patientID"]},problem:{entityTypeName:"Problem",isScalar:!0,associationName:"PatientProblem_Problem",foreignKeyNames:["problemID"]}}}),e.addEntityType({shortName:"Problem",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patientProblems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Problem"}}}),e.addEntityType({shortName:"Provider",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Provider_Patients"}}}),e.addEntityType({shortName:"Cohort",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sName:{dataType:"String"},description:{dataType:"String"}}}),e.addEntityType({shortName:"Identifier",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"}}}),e.addEntityType({shortName:"CareMember",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},gender:{dataType:"String"},preferredName:{dataType:"String"},patientId:{dataType:"String"},contactId:{dataType:"String"},typeId:{dataType:"String"},primary:{dataType:"Boolean"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_CareMembers",foreignKeyNames:["patientId"]},careManager:{entityTypeName:"CareManager",isScalar:!0,associationName:"CareManager_CareMembers",foreignKeyNames:["contactId"]},type:{entityTypeName:"CareMemberType",isScalar:!0,associationName:"CareMember_Type",foreignKeyNames:["typeId"]}}}),e.addEntityType({shortName:"Alert",namespace:"Nightingale",autoGeneratedKeyType:breeze.AutoGeneratedKeyType.Identity,dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},result:{dataType:"Int64"},reason:{dataType:"String"}}}),e.registerEntityTypeCtor("Patient",null,a),e.registerEntityTypeCtor("PatientProblem",null,n),e.registerEntityTypeCtor("Alert",null,i),e.registerEntityTypeCtor("CareMember",null,r)}function d(){p||(p=require("services/datacontext"))}var p;breeze.DataType;var u={property:e,Parameter:t,modal:a,quickAddSection:r,Gender:n,Day:i,SomeType:o,initialize:s};return u});
define('services/session',["config.models"],function(){function e(){var e="/1.0/"+m().contracts()[0].number()+"/logout";t(),p.logOutUserByToken(e).then(a)}function t(){p||(p=require("services/datacontext"))}function a(){n(),window.location.href="/Logout.aspx"}function n(){return i(),c("ngSession"),!0}function r(){if(l){var e=ko.toJS(m);e=JSON.stringify(e,["userId","aPIToken","firstName","lastName","userName","aPIToken","contracts","id","name","number"]),localStorage.setItem("ngSession",e)}return y&&o("ngSession",e),!0}function i(){localStorage.clear()}function o(e,t){var a=escape(t);document.cookie=e+"="+a}function s(e){var t=document.cookie,a=t.indexOf(" "+e+"=");if(-1==a&&(a=t.indexOf(e+"=")),-1==a)t=null;else{a=t.indexOf("=",a)+1;var n=t.indexOf(";",a);-1==n&&(n=t.length),t=unescape(t.substring(a,n))}return t}function c(e){var t=e?e:"ngSession";document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function u(){function e(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function t(){var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}l=e(),y=t()}function d(){if(t(),u(),l){var e=localStorage.getItem("ngSession"),a=JSON.parse(e);if(a&&a.aPIToken)return m(p.createUserFromSessionUser(a)),m()}else if(y){var a=s("ngSession");if(a&&a.aPIToken)return m(p.createUserFromSessionUser(a)),m()}}var p,l=!1,y=!1;ko.computed({read:function(){return m()?new servicesConfig.createEndPoint("1.0",m().contracts()[0].number(),"response","Response"):""},deferEvaluation:!0});var m=ko.observable(),g={setLocalStorageAndCookie:r,deleteCookie:c,currentUser:m,logOff:e,runTests:u,getUserFromSession:d};return g});
define('config.models.contacts',["services/session"],function(){function e(e){function a(e){e.activeTab=ko.observable("general"),e.prefCommMethods=ko.computed(function(){t();var a="";return ko.utils.arrayForEach(e.modes(),function(e){if(e.optOut()&&e.preferred(!1),e.preferred()){var t=ko.utils.arrayFirst(r.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});a+=t.name()+", "}}),a.length>0&&(a=a.substr(0,a.length-2)),a}),e.secondaryLanguagesText=ko.computed(function(){t();var a="";return ko.utils.arrayForEach(e.languages(),function(e){if(!e.preferred()){var t=ko.utils.arrayFirst(r.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});a+=t.name()+", "}}),a.length>0&&(a=a.substr(0,a.length-2)),a}),e.preferredTimesOfDay=ko.computed(function(){t();var a="";return ko.utils.arrayForEach(e.preferredTimesOfDayIds(),function(e){var t=ko.utils.arrayFirst(r.enums.timesOfDay(),function(t){return t.id()===e.id()});a+=t.name()+", "}),a.length>0&&(a=a.substr(0,a.length-2)),a}),e.preferredDaysOfWeek=ko.computed(function(){t();var a="";return 7===e.preferredDaysOfWeekIds().length?a="Any":(ko.utils.arrayForEach(e.preferredDaysOfWeekIds(),function(e){var t=ko.utils.arrayFirst(r.enums.daysOfWeek(),function(t){return t.Id===e.id()});a+=t.Code+", "}),a.length>0&&(a=a.substr(0,a.length-2))),a}),e.addPhone=function(){t();var a=-1*(e.phones().length+1),n=r.enums.phoneTypes()[0].id(),o=r.createComplexType("Phone",{id:a,typeId:n});e.phones.push(o)},e.removePhone=function(t){e.phones.remove(t)},e.addEmail=function(){t();var a=e.emails().length+1,n=r.enums.emailTypes()[0].id(),o=r.createComplexType("Email",{id:a,typeId:n});e.emails.push(o)},e.removeEmail=function(t){e.emails.remove(t)},e.addAddress=function(){t();var a=e.addresses().length+1,n=r.enums.addressTypes()[0].id(),o=r.createComplexType("Address",{id:a,typeId:n});e.addresses.push(o)},e.removeAddress=function(t){e.addresses.remove(t)},e.newLanguage=ko.observable(null),e.addLanguage=function(){t();var a=e.newLanguage(),n=r.createComplexType("ContactLanguage",{lookUpLanguageId:a.id(),name:a.name()});e.languages.push(n),e.newLanguage(null)},e.removeLanguage=function(t){e.languages.remove(t)},e.preferredPhone=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.phonePreferred(!1)}),t?t:null},write:function(t){t&&t.phonePreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.phonePreferred(!1)})}}).extend({throttle:50}),e.preferredText=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.textPreferred(!1)}),t?t:null},write:function(t){t&&t.textPreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.textPreferred(!1)})}}).extend({throttle:50}),e.preferredEmail=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.emails(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.emails(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.preferredAddress=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.addresses(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.addresses(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.preferredLanguage=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.languages(),function(e){e.preferred()&&(t=e)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.languages(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.phoneOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(r){if(r&&"Phone"===r.name()){var a=r.optOut();a&&s(e),t=a}}),t}),e.textOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(r){if(r&&"Text"===r.name()){var a=r.optOut();a&&p(e),t=a}}),t}),e.addressOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(r){if(r&&"Mail"===r.name()){var a=r.optOut();a&&c(e),t=a}}),t}),e.emailOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(r){if(r&&"Email"===r.name()){var a=r.optOut();a&&l(e),t=a}}),t}),e.canSave=ko.computed(function(){return!0}),e.saveChanges=function(){r.saveContactCard(e)},e.cancelChanges=function(){t(),r.cancelAllChangesToContactCard(e)}}function n(e){t(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(r.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});return t?t.name():void 0})}function o(e){t(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(r.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});return t?t.name():void 0})}function i(e){e.type=ko.computed(function(){var t=e.typeId(),a=null;return t&&(a=ko.utils.arrayFirst(r.enums.phoneTypes(),function(e){return t===e.id()})),a}),e.formattedNumber=ko.computed(function(){var t=e.number();return t?(t=t.toString(),t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")):null})}function u(e){e.type=ko.computed(function(){var t=e.typeId(),a=null;return t&&(a=ko.utils.arrayFirst(r.enums.emailTypes(),function(e){return t===e.id()})),a})}function d(e){e.type=ko.computed(function(){var t=e.typeId(),a=null;return t&&(a=ko.utils.arrayFirst(r.enums.addressTypes(),function(e){return t===e.id()})),a}),e.state=ko.computed(function(){var t=e.stateId();if(t){var a=ko.utils.arrayFirst(r.enums.states.peek(),function(e){return e.id()===t});return a}return null}),e.cityStateZip=ko.computed(function(){var t=e.city()||"",r=e.state()?e.state().code():"",a=e.postalCode()||"";return t+", "+r+"  "+a})}function s(e){ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred(!1)})}function p(e){ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred(!1)})}function c(e){ko.utils.arrayForEach(e.addresses(),function(e){e.preferred(!1)})}function l(e){ko.utils.arrayForEach(e.emails(),function(e){e.preferred(!1)})}e.addEntityType({shortName:"ContactCard",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},timeZoneId:{dataType:"String"},preferredTimesOfDayIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},preferredDaysOfWeekIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},languages:{complexTypeName:"ContactLanguage:#Nightingale",isScalar:!1},modes:{complexTypeName:"ContactMode:#Nightingale",isScalar:!1},emails:{complexTypeName:"Email:#Nightingale",isScalar:!1},phones:{complexTypeName:"Phone:#Nightingale",isScalar:!1},addresses:{complexTypeName:"Address:#Nightingale",isScalar:!1}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_ContactCard",foreignKeyNames:["patientId"]},timeZone:{entityTypeName:"TimeZone",isScalar:!0,associationName:"TimeZone_ContactCards",foreignKeyNames:["timeZoneId"]}}}),e.addEntityType({shortName:"Phone",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},number:{dataType:"Int64"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},isText:{dataType:"Boolean"},phonePreferred:{dataType:"Boolean"},textPreferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Email",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactLanguage",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpLanguageId:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactMode",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpModeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Address",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},line1:{dataType:"String"},line2:{dataType:"String"},line3:{dataType:"String"},city:{dataType:"String"},stateId:{dataType:"String"},postalCode:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.registerEntityTypeCtor("ContactCard",null,a),e.registerEntityTypeCtor("ContactLanguage",null,n),e.registerEntityTypeCtor("ContactMode",null,o),e.registerEntityTypeCtor("Address",null,d),e.registerEntityTypeCtor("Phone",null,i),e.registerEntityTypeCtor("Email",null,u)}function t(){r||(r=require("services/datacontext"))}var r;breeze.DataType;var a={initialize:e};return a});
define('config.models.goals',["services/session"],function(){function e(e){function t(e){e.isNew=ko.observable(!1),e.focusAreaString=ko.computed(function(){a();var t="";return ko.utils.arrayForEach(e.focusAreaIds(),function(e){var a=ko.utils.arrayFirst(r.enums.focusAreas(),function(t){return t.id()===e.id()});t+=a.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.programString=ko.computed(function(){a();var t="",r=e.programIds();if(e.patient()&&e.patient().programs()){var n=e.patient().programs();ko.utils.arrayForEach(r,function(e){var a=ko.utils.arrayFirst(n,function(t){return t.id()===e.id()});t+=a.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2))}return 0===t.length&&(t="None"),t})}function n(e){e.barrierString=ko.computed(function(){a();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(a){var r=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===a.id()});t+=r.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t})}function i(e){e.barrierString=ko.computed(function(){a();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(a){var r=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===a.id()});t+=r.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t})}function o(e){if(a(),e.path=ko.computed(function(){var t=e.controlType(),a="";return t&&(1===t?a="programdesigner/customattributes/singleselect.edit.html":2===t?a="programdesigner/customattributes/multiselect.edit.html":3===t?a="programdesigner/customattributes/datepicker.edit.html":4===t?a="programdesigner/customattributes/datetimepicker.edit.html":5===t&&(a="programdesigner/customattributes/input.edit.html")),a}),e.displayPath=ko.computed(function(){var t=e.controlType(),a="";return t&&(1===t?a="programdesigner/customattributes/singleselect.html":2===t?a="programdesigner/customattributes/multiselect.html":3===t?a="programdesigner/customattributes/datepicker.html":4===t?a="programdesigner/customattributes/datetimepicker.html":5===t&&(a="programdesigner/customattributes/input.html")),a}),0===e.values().length){var t=r.createComplexType("Value",{});e.values.push(t)}e.computedValue=ko.computed({read:function(){var t=null;return 1===e.values().length?t=e.values()[0]:e.values().length>1&&(t=e.values()),t},write:function(t){2===e.controlType||e.values()[0].value(t)}})}e.addEntityType({shortName:"Goal",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sourceId:{dataType:"String"},statusId:{dataType:"String"},typeId:{dataType:"String"},patientId:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},focusAreaIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1}},navigationProperties:{source:{entityTypeName:"Source",isScalar:!0,associationName:"Goal_Source",foreignKeyNames:["sourceId"]},type:{entityTypeName:"GoalType",isScalar:!0,associationName:"Goal_Type",foreignKeyNames:["typeId"]},status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Goal_Status",foreignKeyNames:["statusId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Goals",foreignKeyNames:["patientId"]},tasks:{entityTypeName:"Task",isScalar:!1,associationName:"Goal_Tasks"},barriers:{entityTypeName:"Barrier",isScalar:!1,associationName:"Goal_Barriers"},interventions:{entityTypeName:"Intervention",isScalar:!1,associationName:"Goal_Interventions"}}}),e.addEntityType({shortName:"Attribute",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"},values:{complexTypeName:"Value:#Nightingale",isScalar:!1},controlType:{dataType:"Int64"},order:{dataType:"Int64"},options:{complexTypeName:"ValueDisplay:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Value",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"}}}),e.addEntityType({shortName:"Barrier",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},categoryId:{dataType:"String"},statusId:{dataType:"String"},patientGoalId:{dataType:"String"}},navigationProperties:{category:{entityTypeName:"BarrierCategory",isScalar:!0,associationName:"Barrier_Category",foreignKeyNames:["categoryId"]},status:{entityTypeName:"BarrierStatus",isScalar:!0,associationName:"Barrier_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Barriers",foreignKeyNames:["patientGoalId"]}}}),e.addEntityType({shortName:"Task",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},patientGoalId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1}},navigationProperties:{status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Task_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Tasks",foreignKeyNames:["patientGoalId"]}}}),e.addEntityType({shortName:"Intervention",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},categoryId:{dataType:"String"},startDate:{dataType:"DateTime"},patientGoalId:{dataType:"String"},assignedToId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{status:{entityTypeName:"InterventionStatus",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["statusId"]},category:{entityTypeName:"InterventionCategory",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["categoryId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Interventions",foreignKeyNames:["patientGoalId"]},assignedTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Intervention_CareManager",foreignKeyNames:["assignedToId"]}}}),e.addEntityType({shortName:"IdName",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"ValueDisplay",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},display:{dataType:"String"}}}),e.addEntityType({shortName:"FocusArea",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Source",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"GoalTaskStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"GoalType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareManager",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String",isPartOfKey:!0},preferredName:{dataType:"String"}}}),e.registerEntityTypeCtor("Goal",null,t),e.registerEntityTypeCtor("Intervention",null,n),e.registerEntityTypeCtor("Task",null,i),e.registerEntityTypeCtor("Attribute",null,o)}function t(){}function a(){r||(r=require("services/datacontext"))}var r;breeze.DataType;var n={initialize:e,createMocks:t};return n});
define('config.models.lookups',["services/session"],function(){function e(e){e.addEntityType({shortName:"TimeOfDay",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"TimeZone",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Language",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"State",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationMode",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},commModeIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Priority",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},levelName:{dataType:"String"},imageSource:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Priority_Patients"}}}),e.addEntityType({shortName:"ObservationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareMemberType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ElementState",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},order:{dataType:"Int64"},name:{dataType:"String"}}})}function t(e){e.createEntity("ElementState",{id:1,order:6,name:"Removed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:2,order:3,name:"Not Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:3,order:1,name:"Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:5,order:4,name:"Completed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:4,order:2,name:"In Progress"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:6,order:5,name:"Closed"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:0,levelName:"Not Set",imageSource:"/NightingaleUI/Content/images/priority_empty.png"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:1,levelName:"Low",imageSource:"/NightingaleUI/Content/images/priority_low.png"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:2,levelName:"Medium",imageSource:"/NightingaleUI/Content/images/priority_medium.png"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:3,levelName:"High",imageSource:"/NightingaleUI/Content/images/priority_high.png"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:1,name:"Radio",path:"programdesigner/questiontypes/radio.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:2,name:"Text",path:"programdesigner/questiontypes/label.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:3,name:"Textbox",path:"programdesigner/questiontypes/textbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:10,name:"TextArea",path:"programdesigner/questiontypes/textarea.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:4,name:"SingleSelect",path:"programdesigner/questiontypes/singleselect.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:7,name:"Complete",path:"programdesigner/questiontypes/button.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:6,name:"DatePicker",path:"programdesigner/questiontypes/datepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:8,name:"TimePicker",path:"programdesigner/questiontypes/timepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:9,name:"DateTimePicker",path:"programdesigner/questiontypes/datetimepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:5,name:"Checkbox",path:"programdesigner/questiontypes/checkbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:11,name:"Modal",path:"programdesigner/questiontypes/modal.html"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:1,name:"Open"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:2,name:"Met"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:3,name:"Not Met"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:4,name:"Abandoned"}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:1,name:"Open"}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:2,name:"Resolved"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:1,name:"Open"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:2,name:"Completed"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:3,name:"Removed"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:1,name:"Long-Term"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:2,name:"Short-Term"}).entityAspect.acceptChanges()}breeze.DataType;var a={initialize:e,initializeEnums:t};return a});
define('config.models.notes',["services/session"],function(){function e(e){function r(e){e.isNew=ko.observable(!1),e.programString=ko.computed(function(){t();var a="",r=e.programIds();if(e.patient()&&e.patient().programs()){var n=e.patient().programs();ko.utils.arrayForEach(r,function(e){var t=ko.utils.arrayFirst(n,function(t){return t.id()===e.id()});t&&(a+=t.name()+", ")}),a.length>0&&(a=a.substr(0,a.length-2))}return 0===a.length&&(a="None"),a}),e.createdBy=ko.computed(function(){t();var r=ko.utils.arrayFirst(a.enums.careManagers(),function(t){return t.id()===e.createdById()});return r}),e.localDate=ko.computed(function(){var t=moment(e.createdOn()).format("MM/DD/YYYY");return t})}e.addEntityType({shortName:"Note",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},text:{dataType:"String"},createdOn:{dataType:"DateTime"},createdById:{dataType:"String"},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Notes",foreignKeyNames:["patientId"]}}}),e.registerEntityTypeCtor("Note",null,r)}function t(){a||(a=require("services/datacontext"))}var a;breeze.DataType;var r={initialize:e};return r});
define('config.models.observations',["services/session"],function(){function e(e){function t(e){e.computedValue=ko.computed({read:function(){var t=null;return 1===e.values().length?t=e.values()[0]:e.values().length>1&&(t=e.values()[0]),t},write:function(t){2===e.controlType||e.values()[0].value(t)}})}function a(e){e.value=ko.computed(e.name)}function r(e){e.previousValueString=ko.computed(function(){var t="";if(e.previousValue()){var a=e.previousValue().value(),r=moment(e.previousValue().startDate()).format("MM/DD/YYYY"),i=e.previousValue().unit(),n=e.previousValue().source();t=a?a+" "+i:"",t=moment(r).isValid()?t?t+" on "+r:r:t,t=n?t+" ("+n+")":t}return t})}e.addEntityType({shortName:"Observation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},observationId:{dataType:"String"},name:{dataType:"String"},standard:{dataType:"Boolean"},typeId:{dataType:"String"},patientId:{dataType:"String"},units:{dataType:"String"},startDate:{dataType:"DateTime"},groupId:{dataType:"String"},values:{complexTypeName:"ObservationValue:#Nightingale",isScalar:!1}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Observations",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"ObservationValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},value:{dataType:"String"},previousValue:{complexTypeName:"ObservationPreviousValue:#Nightingale",isScalar:!0}}}),e.addEntityType({shortName:"ObservationPreviousValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},startDate:{dataType:"DateTime"},unit:{dataType:"String"},source:{dataType:"String"}}}),e.addEntityType({shortName:"AdditionalObservation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},typeId:{dataType:"String"}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]}}}),e.registerEntityTypeCtor("AdditionalObservation",null,a),e.registerEntityTypeCtor("Observation",null,t),e.registerEntityTypeCtor("ObservationValue",null,r)}breeze.DataType;var t={initialize:e};return t});
define('config.services',[],function(){function e(e,t,a,n,i){var r=this;r.ResourcePath=e+"/"+t+"/"+a+"/",r.EntityType=n,r.Parameters=i}var t;t=-1===window.location.href.indexOf("localhost")&&-1===window.location.href.indexOf("dev")?"http://azurephytel.cloudapp.net:59900":"http://azurephyteldev.cloudapp.net:59900";var a=t+"/Nightingale",n=t+"/Security",i={remoteServiceName:a,securityServiceName:n,createEndPoint:e};return i});
define('services/entityserializer',[],function(){function e(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Steps=[],n.SpawnElement=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Action").select("id, name, moduleId, sourceId, order, completed, completedBy, enabled, status, elementState, dateCompleted, next, previous"),i=t.executeQueryLocally(r),o=i[0];o.steps=[],o.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};o.spawnElement.push(t)}),ko.utils.arrayForEach(e.steps.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Step").select("id, header, description, title, text, question, notes, actionId, sourceId, stepTypeId, selectedResponseId, order, completed, enabled, status"),n=t.executeQueryLocally(a),r=n[0];r.responses=[],r.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};r.spawnElement.push(t)}),ko.utils.arrayForEach(e.responses.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Response").select("id, text, required, value, stepId, nominal, nextStepId"),n=t.executeQueryLocally(a),i=n[0];i.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};i.spawnElement.push(t)}),r.responses.push(i)}),o.steps.push(r)}),n.Id=o.id,n.Name=o.name,n.ModuleId=o.moduleId,n.SourceId=o.sourceId,n.Order=o.order,n.Completed=o.completed,n.CompletedBy=o.completedBy,n.Enabled=o.enabled,n.Status=o.status,n.ElementState=o.elementState,n.DateCompleted=o.dateCompleted,n.Next=o.next,n.Previous=o.previous,ko.utils.arrayForEach(o.spawnElement,function(e){n.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),ko.utils.arrayForEach(o.steps,function(e){var t={};t.Responses=[],t.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){t.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),t.Id=e.id,t.Header=e.header,t.Description=e.description,t.Title=e.title,t.Text=e.text,t.Question=e.question,t.Notes=e.notes,t.ActionId=e.actionId,t.SourceId=e.sourceId,t.StepTypeId=e.stepTypeId,t.SelectedResponseId=e.selectedResponseId,t.Order=e.order,t.Completed=e.completed,t.Enabled=e.enabled,t.Status=e.status,ko.utils.arrayForEach(e.responses,function(e){var a={};a.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){a.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),a.Id=e.id,a.Text=e.text,a.Required=e.required,a.Value=e.value,a.StepId=e.stepId,a.Nominal=e.nominal,a.nextStepId=e.nextStepId,t.Responses.push(a)}),(new Date).getTime()-a,n.Steps.push(t)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function t(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Modes=[],n.Addresses=[],n.Phones=[],n.Emails=[],n.Languages=[],n.TimesOfDaysId=[],n.WeekDays=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("ContactCard").select("id, patientId, timeZoneId"),i=t.executeQueryLocally(r),o=i[0];o.steps=[],ko.utils.arrayForEach(e.preferredTimesOfDayIds.peek(),function(e){n.TimesOfDaysId.push(e.id.peek())}),ko.utils.arrayForEach(e.preferredDaysOfWeekIds.peek(),function(e){thisDowId=parseInt(e.id.peek()),n.WeekDays.push(thisDowId)}),n.PatientId=o.patientId,n.Id=o.id,n.TimeZoneId=o.timeZoneId,ko.utils.arrayForEach(e.modes.peek(),function(e){var t={};t.LookUpModeId=e.lookUpModeId.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),n.Modes.push(t)}),ko.utils.arrayForEach(e.addresses.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.City=e.city.peek(),t.StateId=e.stateId.peek(),t.PostalCode=e.postalCode.peek(),t.Line1=e.line1.peek(),t.Line2=e.line2.peek(),t.Line3=e.line3.peek(),n.Addresses.push(t)}),ko.utils.arrayForEach(e.emails.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.Text=e.text.peek(),n.Emails.push(t)}),ko.utils.arrayForEach(e.phones.peek(),function(e){var t={};t.Id=e.id.peek(),t.IsText=e.isText.peek(),t.Number=e.number.peek(),t.OptOut=e.optOut.peek(),t.PhonePreferred=e.phonePreferred.peek(),t.TextPreferred=e.textPreferred.peek(),t.TypeId=e.typeId.peek(),n.Phones.push(t)}),ko.utils.arrayForEach(e.languages.peek(),function(e){var t={};t.LookUpLanguageId=e.lookUpLanguageId.peek(),t.Preferred=e.preferred.peek(),n.Languages.push(t)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function a(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.Tasks=[],n.Barriers=[],n.Interventions=[],n.FocusAreaIds=[],n.ProgramIds=[],n.CustomAttributes=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Goal").select("id, name, patientId, sourceId, typeId, statusId, startDate, endDate, targetValue, targetDate"),i=t.executeQueryLocally(r),o=i[0];ko.utils.arrayForEach(e.focusAreaIds.peek(),function(e){n.FocusAreaIds.push(e.id.peek())}),ko.utils.arrayForEach(e.programIds.peek(),function(e){n.ProgramIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),n.CustomAttributes.push(t)}),n.Id=o.id,n.Name=o.name,n.PatientId=o.patientId,n.SourceId=o.sourceId,n.TypeId=o.typeId,n.StatusId=o.statusId,n.StartDate=o.startDate,n.EndDate=o.endDate,n.TargetValue=o.targetValue,n.TargetDate=o.targetDate,ko.utils.arrayForEach(e.tasks.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Task").select("id, description, statusId, targetValue, startDate, targetDate, patientGoalId"),r=t.executeQueryLocally(a),i=r[0],o={};o.BarrierIds=[],o.CustomAttributes=[],o.Id=i.id,o.Description=i.description,o.StatusId=i.statusId,o.TargetValue=i.targetValue,o.StartDate=i.startDate,o.TargetDate=i.targetDate,o.PatientGoalId=i.patientGoalId,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){o.BarrierIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),o.CustomAttributes.push(t)}),n.Tasks.push(o)}),ko.utils.arrayForEach(e.barriers.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Barrier").select("id, name, patientGoalId, statusId, categoryId"),r=t.executeQueryLocally(a),i=r[0],o={};o.Id=i.id,o.Name=i.name,o.PatientGoalId=i.patientGoalId,o.StatusId=i.statusId,o.CategoryId=i.categoryId,n.Barriers.push(o)}),ko.utils.arrayForEach(e.interventions.peek(),function(e){var a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Intervention").select("id, categoryId, assignedToId, description, statusId, startDate, patientGoalId"),r=t.executeQueryLocally(a),i=r[0],o={};o.BarrierIds=[],o.CustomAttributes=[],o.Id=i.id,o.CategoryId=i.categoryId,o.AssignedToId=i.assignedToId,o.Description=i.description,o.StatusId=i.statusId,o.StartDate=i.startDate,o.PatientGoalId=i.patientGoalId,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){o.BarrierIds.push(e.id.peek())}),n.Interventions.push(o)});var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function n(e,t){var a=(new Date).getTime(),n={};n.Values=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Observation").select("id, name, startDate, units, patientId"),i=t.executeQueryLocally(r),o=i[0];return n.Id=o.id,n.Name=o.name,n.StartDate=o.startDate,n.Units=o.units,n.PatientId=o.patientId,ko.utils.arrayForEach(e.values.peek(),function(e){n.Values.push({Id:e.id.peek(),Text:e.text.peek(),Value:e.value.peek()})}),(new Date).getTime()-a,n}function r(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={};n.ProgramIds=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Note").select("id, text, patientId, createdOn, createdById"),i=t.executeQueryLocally(r),o=i[0];ko.utils.arrayForEach(e.programIds.peek(),function(e){n.ProgramIds.push(e.id.peek())}),n.Id=o.id,n.Text=o.text,n.PatientId=o.patientId,n.CreatedOn=o.createdOn,n.CreatedById=o.createdById;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}function i(e,t){var a=(new Date).getTime();console.log("Starting the serializer",a);var n={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("CareMember").select("id, patientId, contactId, typeId, primary, preferredName"),i=t.executeQueryLocally(r),o=i[0];n.Id=o.id,n.PatientId=o.patientId,n.ContactId=o.contactId,n.TypeId=o.typeId,n.Primary=o.primary,n.PreferredName=o.preferredName;var s=(new Date).getTime()-a;return console.log("Done custom stringifying, it took this long to stringify (in milliseconds) - ",s),n}var o={serializeAction:e,serializeContactCard:t,serializeGoal:a,serializeObservation:n,serializeNote:r,serializeCareMember:i};return o});
define('services/entityfinder',["services/session","config.services"],function(e,t){function a(){c||(c=require("services/datacontext"))}function n(e){if(a(),e.Result){var t=c.createEntity("Alert",{result:e.Result.Result,reason:e.Result.Reason});t.entityAspect.acceptChanges(),c.enums.alerts.push(t)}return(e.Program||e.Programs)&&(e.Program&&i(e.Program),e.Programs&&ko.utils.arrayForEach(e.Programs,function(e){i(e)})),(e.Module||e.Modules)&&(e.Module&&o(e.Module),e.Modules&&ko.utils.arrayForEach(e.Modules,function(e){o(e)})),(e.Action||e.Actions)&&(e.Action&&s(e.Action),e.Actions&&ko.utils.arrayForEach(e.Actions,function(e){s(e)})),!0}function r(e){var t=e.PatientId;return a(),e.RelatedChanges&&t&&ko.utils.arrayForEach(e.RelatedChanges,function(e){"Problems"===e&&c.getEntityList(null,u().EntityType,u().ResourcePath+t+"/Problems",null,null,!0)}),!0}function i(e){var t=c.createEntity("Program",{id:e.Id,name:e.Name,patientId:e.PatientId,shortName:e.shortName,status:e.Status,enabled:e.Enabled,completed:e.Completed,elementState:e.ElementState});t.entityAspect.acceptChanges()}function o(e){var t=c.createEntity("Module",{id:e.Id,name:e.Name,programId:e.ProgramId,shortName:e.shortName,status:e.Status,enabled:e.Enabled,completed:e.Completed});t.entityAspect.acceptChanges()}function s(e){var t=c.createEntity("action",{id:e.Id,name:e.Name,moduleId:e.ModuleId,shortName:e.shortName,status:e.Status,enabled:e.Enabled,completed:e.Completed});t.entityAspect.acceptChanges()}var c,u=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","PatientProblem"):""}),d={searchForEntities:n,searchForProblems:r};return d});
define('services/dataservices/programsservice',["services/session","config.services","services/entityfinder"],function(e,t,a){function n(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1===t.indexOf(e)&&(e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.rejectChanges()}))})}function r(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1!==t.indexOf(e)&&e.completed(!0)})}function i(n,r,i,c){function u(e){return console.log(e),a.searchForProblems(e.httpResponse.data),!0}if(!n)throw new Error("[manager] cannot be a null parameter");s();var d=r.Completed?"Process":"Save",p=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+c+"/Program/Module/Action/"+d,"Program");if(r){var l={};l.Action=r,l.ProgramId=i,l=JSON.stringify(l);var y=breeze.EntityQuery.from(p.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:l});return n.executeQuery(y).then(u).fail(o)}}function o(){s(),console.log("Error - ",error);var e=c.createEntity("Alert",{result:0,reason:"Save failed!"});e.entityAspect.acceptChanges(),c.enums.alerts.push(e)}function s(){c||(c=require("services/datacontext"))}var c,u={saveActionPost:i,cancelChangesForNonComputedPath:n,setCompletedSteps:r};return u});
define('config.models.program',["config.services","services/session","services/entityserializer","services/dataservices/programsservice"],function(e,t,a,n){function r(e){function t(e){e.elementState()||e.elementState(1)}function r(e){e.computedPath=ko.computed({read:function(){i();var t=!1,a=e.steps().sort(alphabeticalOrderSort),n=[];if(0===a.length)return a;for(var r=!0,o=a[0];o;){r&&o.activeStep(!0),n.push(o);var s=p(o,t);if(s&&!s.activeStep()&&(t=!0),!s)break;o=s,r=!1}return n},deferEvaluation:!0}).extend({throttle:50}),e.hasChanges=ko.computed(function(){return 4===e.elementState()}),e.isSaving=ko.observable(!1),e.saveAction=function(){setTimeout(function(){e.isSaving(!0),d(e)},0)}}function s(e){i(),e.activeStep=ko.observable(!1),e.selectedResponse=ko.observable(),e.computedResponse=ko.computed({read:function(){return 0!==e.selectedResponseId()&&e.selectedResponseId()?(o.getEntityById(e.selectedResponse,e.selectedResponseId(),"Response","fakePath1",!1),e.selectedResponse()):null},write:function(t){void 0!==t&&(e.action().elementState(4),e.selectedResponse(t),t&&e.selectedResponseId(t.id()))},deferEvaluation:!0})}function p(e,t){function a(e,t){var a=ko.observable();return o.getEntityById(a,e,"Step","fakePath2",!1),a()&&a().activeStep(t),a()}var n=null,r="Complete"===e.stepType().name(),i=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||!e.computedResponse().value())),s=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||"SingleSelect"!==e.stepType().name()&&"Radio"!==e.stepType().name()));return e.computedResponse()&&e.computedResponse().nextStepId()&&i&&!r?n=a(e.computedResponse().nextStepId(),!t):e.computedResponse()&&e.computedResponse().nextStepId()&&s&&!r?n=a(e.computedResponse().nextStepId(),!t):0===e.responses().length||r?n=null:ko.utils.arrayForEach(e.responses(),function(e){e.nominal()===!0&&(e.required()!==!0||e.value()||(t=!0),n=a(e.nextStepId(),!t))}),r&&(e.completeAction||(e.completeAction=function(){var t=e.action();setTimeout(function(){t.dateCompleted((new moment).toISOString()),t.completed(!0),t.isSaving(!0),d(t)},0)})),n}function d(e){function t(){if(e.completed())e.elementState(5);else if(4===e.elementState()){var t=o.createEntity("Alert",{result:"warning",reason:"Progress saved"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.steps(),function(e){e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.acceptChanges()})}),e.module().entityAspect.acceptChanges(),e.isSaving(!1)}setTimeout(function(){n.cancelChangesForNonComputedPath(e),e.completed()&&n.setCompletedSteps(e);var r=a.serializeAction(e,o.manager),i=e.module().program().patientId(),s=e.module().program().id();return o.saveAction(r,s,i).then(t)},50)}e.addEntityType({shortName:"ContractProgram",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},shortName:{dataType:"String"}}}),e.addEntityType({shortName:"Program",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String"},shortName:{dataType:"String"},status:{dataType:"String"},description:{dataType:"String"},enabled:{dataType:"Boolean"},sourceId:{dataType:"String"},programState:{dataType:"Int64"},startDate:{dataType:"DateTime"},elementState:{dataType:"Int64"}},navigationProperties:{modules:{entityTypeName:"Module",isScalar:!1,associationName:"Program_Modules"},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Programs",foreignKeyNames:["patientId"]},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Program_ElementState",foreignKeyNames:["elementState"]}}}),e.addEntityType({shortName:"Module",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},description:{dataType:"String"},programId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},elementState:{dataType:"Int64"}},navigationProperties:{program:{entityTypeName:"Program",isScalar:!0,associationName:"Program_Modules",foreignKeyNames:["programId"]},actions:{entityTypeName:"Action",isScalar:!1,associationName:"Module_Actions"}}}),e.addEntityType({shortName:"Action",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},moduleId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},completedBy:{dataType:"String"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},elementState:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1}},navigationProperties:{module:{entityTypeName:"Module",isScalar:!0,associationName:"Module_Actions",foreignKeyNames:["moduleId"]},steps:{entityTypeName:"Step",isScalar:!1,associationName:"Action_Steps"},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Action_ElementState",foreignKeyNames:["elementState"]}}}),e.addEntityType({shortName:"Step",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},header:{dataType:"String"},description:{dataType:"String"},title:{dataType:"String"},text:{dataType:"String"},question:{dataType:"String"},notes:{dataType:"String"},actionId:{dataType:"String"},sourceId:{dataType:"String"},stepTypeId:{dataType:"String"},selectedResponseId:{dataType:"String"},order:{dataType:"Int64"},controlType:{dataType:"Int64"},selectType:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},status:{dataType:"Int64"}},navigationProperties:{action:{entityTypeName:"Action",isScalar:!0,associationName:"Action_Steps",foreignKeyNames:["actionId"]},stepType:{entityTypeName:"StepType",isScalar:!0,associationName:"Step_StepType",foreignKeyNames:["stepTypeId"]},responses:{entityTypeName:"Response",isScalar:!1,associationName:"Step_Responses"}}}),e.addEntityType({shortName:"Response",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},text:{dataType:"String"},required:{dataType:"Boolean"},value:{dataType:"String"},stepId:{dataType:"String"},nominal:{dataType:"Boolean"},order:{dataType:"Int64"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},nextStepId:{dataType:"String"}},navigationProperties:{step:{entityTypeName:"Step",isScalar:!0,associationName:"Step_Responses",foreignKeyNames:["stepId"]}}}),e.addEntityType({shortName:"StepType",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"},path:{dataType:"String"}},navigationProperties:{steps:{entityTypeName:"Step",isScalar:!1,associationName:"Step_StepType"}}}),e.addEntityType({shortName:"SpawnElement",namespace:"Nightingale",isComplexType:!0,dataProperties:{elementId:{dataType:"String"},elementType:{dataType:"String"},tag:{dataType:"String"}}}),e.registerEntityTypeCtor("Program",null,t),e.registerEntityTypeCtor("Action",null,r),e.registerEntityTypeCtor("Step",null,s)}function i(){o||(o=require("services/datacontext"))}var o;ko.computed({read:function(){var a=t.currentUser();return a?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"response","Response"):""},deferEvaluation:!0}),self.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},breeze.DataType;var s={initialize:r};return s});
define('config.models.user',["config.services","services/session"],function(){function e(e){function t(e){e.settings=ko.observableArray()}e.addEntityType({shortName:"User",namespace:"NightingaleUser",dataProperties:{userId:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},userName:{dataType:"String"},aPIToken:{dataType:"String"},contracts:{complexTypeName:"Contract:#NightingaleUser",isScalar:!1}}}),e.addEntityType({shortName:"Contract",namespace:"NightingaleUser",isComplexType:!0,dataProperties:{id:{dataType:"Int64"},name:{dataType:"String"},number:{dataType:"String"}}}),e.addEntityType({shortName:"Event",namespace:"NightingaleUser",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String"},title:{dataType:"String"},start:{dataType:"DateTime"},end:{dataType:"DateTime"},allDay:{dataType:"Boolean"},url:{dataType:"String"}}}),e.registerEntityTypeCtor("User",null,t)}function t(e,t){var a=new Date,n=a.getDate(),r=a.getMonth(),i=a.getFullYear();e.createEntity("Event",{id:"eventone",title:"Diabetes Appointment",userId:t,start:new Date(i,r,n+4),end:new Date(i,r,n+4),allDay:!0}),e.createEntity("Event",{id:"eventtwo",title:"Phone call",userId:t,start:new Date(i,r,n-5),end:new Date(i,r,n-2)}),e.createEntity("Event",{id:"eventthree",title:"Something else",userId:t,start:new Date(i,r,n-5),end:new Date(i,r,n-2)}),e.createEntity("Event",{id:"eventfour",title:"Goto google.com",userId:t,start:new Date(i,r,1),allDay:!0,url:"http://www.google.com"})}breeze.DataType;var a={initialize:e,createCalendarMocks:t};return a});
define('config.routes',[],function(){var e=[{route:"",moduleId:"viewmodels/home/index",title:"home",settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"}]}},{route:"home",moduleId:"viewmodels/home/index",title:"home",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"}]}},{route:"ut/(:tokenId)",moduleId:"viewmodels/authenticate",title:"authenticate",settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Authenticating",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"}]}},{route:"populations",moduleId:"viewmodels/populations/index",title:"populations",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Populations",pages:[{title:"careplan",subroute:"populations/careplan/index.html",content:"Plan"},{title:"overview",subroute:"populations/overview/index.html",content:"Overview"}]}},{route:"patients(/:id)",moduleId:"viewmodels/patients/index",title:"patients",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_patients.png",content:"Patients",pages:[{title:"goals",subroute:"viewmodels/patients/goals/index",content:"Goals"},{title:"careplan",subroute:"viewmodels/patients/careplan/index",content:"Plan"},{title:"history",subroute:"viewmodels/patients/history/index",content:"History"},{title:"data",subroute:"viewmodels/patients/data/index",content:"Data"}]}},{route:"designer(/:id)",moduleId:"exclmodules/designer/index",title:"designer",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_programs.png",content:"Program Designer",pages:[{title:"thinker",subroute:"exclmodules/designer/home/index",content:"Thinker"}]}}],t={routes:e};return t});
define('durandal/system',["require","jquery"],function(e,t){function n(e){var t="[object "+e+"]";a["is"+e]=function(e){return s.call(e)==t}}var a,r=!1,i=Object.keys,o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,c=!1,u=Array.isArray,l=Array.prototype.slice;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(d){c=!0}e.on&&e.on("moduleLoaded",function(e,t){a.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t){a.setModuleId(e.defined[t.id],t.id)});var p=function(){},g=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==l.call(arguments).length&&"string"==typeof l.call(arguments)[0]?console.log(l.call(arguments).toString()):console.log.apply(console,l.call(arguments));else Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,l.call(arguments))}catch(t){}},f=function(e){if(e instanceof Error)throw e;throw new Error(e)};a={version:"2.0.1",noop:p,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},resolveObject:function(e){return a.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(r=e,r?(this.log=g,this.error=f,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=p,this.error=p)),r},log:p,error:p,assert:function(e,t){e||a.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},acquire:function(){var t,n=arguments[0],r=!1;return a.isArray(n)?(t=n,r=!0):t=l.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||r?n.resolve(l.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=l.call(arguments,1),n=0;n<t.length;n++){var a=t[n];if(a)for(var r in a)e[r]=a[r]}return e},wait:function(e){return a.defer(function(t){setTimeout(t.resolve,e)}).promise()}},a.keys=i||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)o.call(e,n)&&(t[t.length]=n);return t},a.isElement=function(e){return!(!e||1!==e.nodeType)},a.isArray=u||function(e){return"[object Array]"==s.call(e)},a.isObject=function(e){return e===Object(e)},a.isBoolean=function(e){return"boolean"==typeof e},a.isPromise=function(e){return e&&a.isFunction(e.then)};for(var m=["Arguments","Function","String","Number","Date","RegExp"],v=0;v<m.length;v++)n(m[v]);return a});
define('durandal/viewEngine',["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],a=0;a<e.length;a++){var r=e[a];if(8!=r.nodeType){if(3==r.nodeType){var i=/\S/.test(r.nodeValue);if(!i)continue}n.push(r)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},createView:function(t){var n=this,a=this.convertViewIdToRequirePath(t);return e.defer(function(r){e.acquire(a).then(function(e){var a=n.processMarkup(e);a.setAttribute("data-view",t),r.resolve(a)}).fail(function(e){n.createFallbackView(t,a,e).then(function(e){e.setAttribute("data-view",t),r.resolve(e)})})}).promise()},createFallbackView:function(t,n){var a=this,r='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(a.processMarkup('<div class="durandal-view-404">'+r+"</div>"))}).promise()}}});
define('durandal/viewLocator',["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.getAttribute("data-view");if(r==t)return a}}function a(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var r=new RegExp(a(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(r,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,a){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,n,a);if(t.viewUrl)return this.locateView(t.viewUrl,n,a);var i=e.getModuleId(t);return i?this.locateView(this.convertModuleIdToViewId(i),n,a):this.locateView(this.determineFallbackViewId(t),n,a)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),a=n&&n.length>1?n[1]:"";return"views/"+a},translateViewIdToArea:function(e){return e},locateView:function(a,r,i){if("string"==typeof a){var o;if(o=t.isViewUrl(a)?t.convertViewUrlToViewId(a):a,r&&(o=this.translateViewIdToArea(o,r)),i){var s=n(i,o);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(a)}).promise()}}});
define('durandal/binder',["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function a(a,u,d,l){if(!u||!d)return r.throwOnErrors?e.error(i):e.log(i,u,l),void 0;if(!u.getAttribute)return r.throwOnErrors?e.error(o):e.log(o,u,l),void 0;var p=u.getAttribute("data-view");try{var m;return a&&a.binding&&(m=a.binding(u)),m=n(m),r.binding(l,u,m),m.applyBindings?(e.log("Binding",p,l),t.applyBindings(d,u)):a&&t.utils.domData.set(u,c,{$data:a}),r.bindingComplete(l,u,m),a&&a.bindingComplete&&a.bindingComplete(u),t.utils.domData.set(u,s,m),m}catch(y){y.message=y.message+";\nView: "+p+";\nModuleId: "+e.getModuleId(l),r.throwOnErrors?e.error(y):e.log(y.message)}}var r,i="Insufficient Information to Bind",o="Unexpected View Type",s="durandal-binding-instruction",c="__ko_bindingContext__";return r={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,s)},bindContext:function(e,t,n){return n&&e&&(e=e.createChildContext(n)),a(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return a(e,t,e,e)}}});
define('durandal/activator',["durandal/system","knockout"],function(e,t){function n(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=u.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=u.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=u.defaults.afterDeactivate),e.affirmations||(e.affirmations=u.defaults.affirmations),e.interpretResponse||(e.interpretResponse=u.defaults.interpretResponse),e.areSameItem||(e.areSameItem=u.defaults.areSameItem),e}function a(t,n,a){return e.isArray(a)?t[n].apply(t,a):t[n](a)}function r(t,n,a,r,i){if(t&&t.deactivate){e.log("Deactivating",t);var o;try{o=t.deactivate(n)}catch(s){return e.error(s),r.resolve(!1),void 0}o&&o.then?o.then(function(){a.afterDeactivate(t,n,i),r.resolve(!0)},function(t){e.log(t),r.resolve(!1)}):(a.afterDeactivate(t,n,i),r.resolve(!0))}else t&&a.afterDeactivate(t,n,i),r.resolve(!0)}function i(t,n,r,i){if(t)if(t.activate){e.log("Activating",t);var o;try{o=a(t,"activate",i)}catch(s){return e.error(s),r(!1),void 0}o&&o.then?o.then(function(){n(t),r(!0)},function(t){e.log(t),r(!1)}):(n(t),r(!0))}else n(t),r(!0);else r(!0)}function o(t,n,a){return a.lifecycleData=null,e.defer(function(r){if(t&&t.canDeactivate){var i;try{i=t.canDeactivate(n)}catch(o){return e.error(o),r.resolve(!1),void 0}i.then?i.then(function(e){a.lifecycleData=e,r.resolve(a.interpretResponse(e))},function(t){e.error(t),r.resolve(!1)}):(a.lifecycleData=i,r.resolve(a.interpretResponse(i)))}else r.resolve(!0)}).promise()}function s(t,n,r,i){return r.lifecycleData=null,e.defer(function(o){if(t==n())return o.resolve(!0),void 0;if(t&&t.canActivate){var s;try{s=a(t,"canActivate",i)}catch(c){return e.error(c),o.resolve(!1),void 0}s.then?s.then(function(e){r.lifecycleData=e,o.resolve(r.interpretResponse(e))},function(t){e.error(t),o.resolve(!1)}):(r.lifecycleData=s,o.resolve(r.interpretResponse(s)))}else o.resolve(!0)}).promise()}function c(a,c){var u,d=t.observable(null);c=n(c);var l=t.computed({read:function(){return d()},write:function(e){l.viaSetter=!0,l.activateItem(e)}});return l.__activator__=!0,l.settings=c,c.activator=l,l.isActivating=t.observable(!1),l.canDeactivateItem=function(e,t){return o(e,t,c)},l.deactivateItem=function(t,n){return e.defer(function(e){l.canDeactivateItem(t,n).then(function(a){a?r(t,n,c,e,d):(l.notifySubscribers(),e.resolve(!1))})}).promise()},l.canActivateItem=function(e,t){return s(e,d,c,t)},l.activateItem=function(t,n){var a=l.viaSetter;return l.viaSetter=!1,e.defer(function(o){if(l.isActivating())return o.resolve(!1),void 0;l.isActivating(!0);var s=d();return c.areSameItem(s,t,u,n)?(l.isActivating(!1),o.resolve(!0),void 0):(l.canDeactivateItem(s,c.closeOnDeactivate).then(function(p){p?l.canActivateItem(t,n).then(function(p){p?e.defer(function(e){r(s,c.closeOnDeactivate,c,e)}).promise().then(function(){t=c.beforeActivate(t,n),i(t,d,function(e){u=n,l.isActivating(!1),o.resolve(e)},n)}):(a&&l.notifySubscribers(),l.isActivating(!1),o.resolve(!1))}):(a&&l.notifySubscribers(),l.isActivating(!1),o.resolve(!1))}),void 0)}).promise()},l.canActivate=function(){var e;return a?(e=a,a=!1):e=l(),l.canActivateItem(e)},l.activate=function(){var e;return a?(e=a,a=!1):e=l(),l.activateItem(e)},l.canDeactivate=function(e){return l.canDeactivateItem(l(),e)},l.deactivate=function(e){return l.deactivateItem(l(),e)},l.includeIn=function(e){e.canActivate=function(){return l.canActivate()},e.activate=function(){return l.activate()},e.canDeactivate=function(e){return l.canDeactivate(e)},e.deactivate=function(e){return l.deactivate(e)}},c.includeIn?l.includeIn(c.includeIn):a&&l.activate(),l.forItems=function(t){c.closeOnDeactivate=!1,c.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},c.beforeActivate=function(e){var n=l();if(e){var a=t.indexOf(e);-1==a?t.push(e):e=t()[a]}else e=c.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},c.afterDeactivate=function(e,n){n&&t.remove(e)};var n=l.canDeactivate;l.canDeactivate=function(a){return a?e.defer(function(e){function n(){for(var t=0;t<i.length;t++)if(!i[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var r=t(),i=[],o=0;o<r.length;o++)l.canDeactivateItem(r[o],a).then(function(e){i.push(e),i.length==r.length&&n()})}).promise():n()};var a=l.deactivate;return l.deactivate=function(n){return n?e.defer(function(e){function a(a){l.deactivateItem(a,n).then(function(){i++,t.remove(a),i==o&&e.resolve()})}for(var r=t(),i=0,o=r.length,s=0;o>s;s++)a(r[s])}).promise():a()},l},l}var u,d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}};return u={defaults:d,create:c,isActivator:function(e){return e&&e.__activator__}}});
define('durandal/composition',["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,a,r,i,o){function s(e){for(var t=[],n={childElements:t,activeView:null},a=o.virtualElements.firstChild(e);a;)1==a.nodeType&&(t.push(a),a.getAttribute(T)&&(n.activeView=a)),a=o.virtualElements.nextSibling(a);return n.activeView||(n.activeView=t[0]),n}function c(){E--,0===E&&setTimeout(function(){for(var t=S.length;t--;)try{S[t]()}catch(n){e.error(n)}S=[]},1)}function u(e){delete e.activeView,delete e.viewElements}function d(t,n,a){if(a)n();else if(t.activate&&t.model&&t.model.activate){var r;try{r=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),r&&r.then?r.then(n,function(t){e.error(t),n()}):r||void 0===r?n():(c(),u(t))}catch(i){e.error(i)}}else n()}function l(){var t=this;if(t.activeView&&t.activeView.removeAttribute(T),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(T,!0),t.composingNewView&&t.model&&t.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(n){e.error(n)}})}catch(n){e.error(n)}t.triggerAttach=e.noop}function p(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),a=t.child.getAttribute("data-view");return n!=a}}return!0}return!1}function m(e){for(var t=0,n=e.length,a=[];n>t;t++){var r=e[t].cloneNode(!0);a.push(r)}return a}function g(e){var t=m(e.parts),n=b.getParts(t,null,!0),a=b.getParts(e.child);for(var r in n)i(a[r]).replaceWith(n[r])}function y(t){var n,a,r=o.virtualElements.childNodes(t.parent);if(!e.isArray(r)){var i=[];for(n=0,a=r.length;a>n;n++)i[n]=r[n];r=i}for(n=1,a=r.length;a>n;n++)o.removeNode(r[n])}function f(e){o.utils.domData.set(e,w,e.style.display),e.style.display="none"}function v(e){e.style.display=o.utils.domData.get(e,w)}function h(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,a=C.length;a>n;n++)if(t.indexOf(C[n])>-1)return!0;return!1}var b,k={},T="data-active-view",S=[],E=0,P="durandal-composition-data",I="data-part",N=["model","view","transition","area","strategy","activationData"],w="durandal-visibility-data",C=["compose:"],O={complete:function(e){S.push(e)}};return b={composeBindings:C,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:O,addBindingHandler:function(e,t,n){var a,r,i="composition-handler-"+e;t=t||o.bindingHandlers[e],n=n||function(){return void 0},r=o.bindingHandlers[e]={init:function(e,a,r,s,c){if(E>0){var u={trigger:o.observable(null)};b.current.complete(function(){t.init&&t.init(e,a,r,s,c),t.update&&(o.utils.domData.set(e,i,t),u.trigger("trigger"))}),o.utils.domData.set(e,i,u)}else o.utils.domData.set(e,i,t),t.init&&t.init(e,a,r,s,c);return n(e,a,r,s,c)},update:function(e,t,n,a,r){var s=o.utils.domData.get(e,i);return s.update?s.update(e,t,n,a,r):(s.trigger&&s.trigger(),void 0)}};for(a in t)"init"!==a&&"update"!==a&&(r[a]=t[a])},getParts:function(e,t,n){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var a=0,r=e.length;r>a;a++){var i=e[a];if(i.getAttribute){if(!n&&h(i))continue;var o=i.getAttribute(I);o&&(t[o]=i),!n&&i.hasChildNodes()&&b.getParts(i.childNodes,t)}}return t},cloneNodes:m,finalize:function(t){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(p(t)){var a=this.convertTransitionToModuleId(t.transition);e.acquire(a).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=n.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews&&o.removeNode(t.activeView)}}else t.child?y(t):o.virtualElements.emptyNode(t.parent);t.triggerAttach(),c(),u(t)})}).fail(function(t){e.error("Failed to load transition ("+a+"). Details: "+t.message)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var r=n.getBindingInstruction(t.activeView);!r||void 0!=r.cacheViews&&!r.cacheViews?o.removeNode(t.activeView):f(t.activeView)}t.child?(t.cacheViews||y(t),v(t.child)):t.cacheViews||o.virtualElements.emptyNode(t.parent)}t.triggerAttach(),c(),u(t)}else t.cacheViews||o.virtualElements.emptyNode(t.parent),t.triggerAttach(),c(),u(t)},bindAndShow:function(e,t,r){t.child=e,t.composingNewView=t.cacheViews?-1==o.utils.arrayIndexOf(t.viewElements,e):!0,d(t,function(){if(t.binding&&t.binding(t.child,t.parent,t),t.preserveContext&&t.bindingContext)t.composingNewView&&(t.parts&&g(t),f(e),o.virtualElements.prepend(t.parent,e),n.bindContext(t.bindingContext,e,t.model));else if(e){var r=t.model||k,i=o.dataFor(e);if(i!=r){if(!t.composingNewView)return o.removeNode(e),a.createView(e.getAttribute("data-view")).then(function(e){b.bindAndShow(e,t,!0)}),void 0;t.parts&&g(t),f(e),o.virtualElements.prepend(t.parent,e),n.bind(r,e)}}b.finalize(t)},r)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t){var n,i=t(),s=o.utils.unwrapObservable(i)||{},c=r.isActivator(i);if(e.isString(s))return s=a.isViewUrl(s)?{view:s}:{model:s,activate:!0};if(n=e.getModuleId(s))return s={model:s,activate:!0};!c&&s.model&&(c=r.isActivator(s.model));for(var u in s)s[u]=-1!=o.utils.arrayIndexOf(N,u)?o.utils.unwrapObservable(s[u]):s[u];return c?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(e){e.strategy(e).then(function(t){b.bindAndShow(t,e)})},inject:function(n){return n.model?n.view?(t.locateView(n.view,n.area,n.viewElements).then(function(e){b.bindAndShow(e,n)}),void 0):(n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,b.executeStrategy(n)}).fail(function(t){e.error("Failed to load view strategy ("+n.strategy+"). Details: "+t.message)}):this.executeStrategy(n),void 0):(this.bindAndShow(null,n),void 0)},compose:function(n,a,r,i){E++,i||(a=b.getSettings(function(){return a},n)),a.compositionComplete&&S.push(function(){a.compositionComplete(a.child,a.parent,a)}),S.push(function(){a.composingNewView&&a.model&&a.model.compositionComplete&&a.model.compositionComplete(a.child,a.parent,a)});var o=s(n);a.activeView=o.activeView,a.parent=n,a.triggerAttach=l,a.bindingContext=r,a.cacheViews&&!a.viewElements&&(a.viewElements=o.childElements),a.model?e.isString(a.model)?e.acquire(a.model).then(function(t){a.model=e.resolveObject(t),b.inject(a)}).fail(function(t){e.error("Failed to load composed module ("+a.model+"). Details: "+t.message)}):b.inject(a):a.view?(a.area=a.area||"partial",a.preserveContext=!0,t.locateView(a.view,a.area,a.viewElements).then(function(e){b.bindAndShow(e,a)})):this.bindAndShow(null,a)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s=b.getSettings(t,e);if(s.mode){var c=o.utils.domData.get(e,P);if(!c){var u=o.virtualElements.childNodes(e);c={},"inline"===s.mode?c.view=a.ensureSingleElement(u):"templated"===s.mode&&(c.parts=m(u)),o.virtualElements.emptyNode(e),o.utils.domData.set(e,P,c)}"inline"===s.mode?s.view=c.view.cloneNode(!0):"templated"===s.mode&&(s.parts=c.parts),s.preserveContext=!0}b.compose(e,s,i,!0)}},o.virtualElements.allowedBindings.compose=!0,b});
define('durandal/events',["durandal/system"],function(e){var t=/\s+/,n=function(){},a=function(e,t){this.owner=e,this.events=t};return a.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},a.prototype.on=a.prototype.then,a.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,r){var i,o,s;if(n){for(i=this.callbacks||(this.callbacks={}),e=e.split(t);o=e.shift();)s=i[o]||(i[o]=[]),s.push(n,r);return this}return new a(this,e)},n.prototype.off=function(n,a,r){var i,o,s,c;if(!(o=this.callbacks))return this;if(!(n||a||r))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(o);i=n.shift();)if((s=o[i])&&(a||r))for(c=s.length-2;c>=0;c-=2)a&&s[c]!==a||r&&s[c+1]!==r||s.splice(c,2);else delete o[i];return this},n.prototype.trigger=function(e){var n,a,r,i,o,s,c,u;if(!(a=this.callbacks))return this;for(u=[],e=e.split(t),i=1,o=arguments.length;o>i;i++)u[i-1]=arguments[i];for(;n=e.shift();){if((c=a.all)&&(c=c.slice()),(r=a[n])&&(r=r.slice()),r)for(i=0,o=r.length;o>i;i+=2)r[i].apply(r[i+1]||this,u);if(c)for(s=[n].concat(u),i=0,o=c.length;o>i;i+=2)c[i].apply(c[i+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n});
define('durandal/app',["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,a,r){function i(){return e.defer(function(t){return 0==s.length?(t.resolve(),void 0):(e.acquire(s).then(function(n){for(var a=0;a<n.length;a++){var r=n[a];if(r.install){var i=c[a];e.isObject(i)||(i={}),r.install(i),e.log("Plugin:Installed "+s[a])}else e.log("Plugin:Loaded "+s[a])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var o,s=[],c=[];return o={title:"Application",configurePlugins:function(t,n){var a=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<a.length;r++){var i=a[r];s.push(n+i),c.push(t[i])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){i().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(a,r,i){var o,s={activate:!0,transition:r};o=!i||e.isString(i)?document.getElementById(i||"applicationHost"):i,e.isString(a)?t.isViewUrl(a)?s.view=a:s.model=a:s.model=a,n.compose(o,s)}},a.includeIn(o),o});
requirejs.config({paths:{text:"../Scripts/text",durandal:"../Scripts/durandal",plugins:"../Scripts/durandal/plugins",transitions:"../Scripts/durandal/transitions"},waitSeconds:15,urlArgs:"v=0.1.6.1"}),define("jquery",[],function(){return jQuery}),define("knockout",ko),define('main',["durandal/system","durandal/app","durandal/viewLocator"],function(e,t,a){e.debug(!0),t.title="Nightingale",t.configurePlugins({router:!0,dialog:!0,widget:{kinds:["singleselect","multiselect","chsnsingle"]}}),t.start().then(function(){a.useConvention(),t.setRoot("viewmodels/shell/shell")})});
define('services/bindings',[],function(){function e(){t||(t=require("services/datacontext"))}var t;ko.bindingHandlers.Date={update:function(e,t){var a=t(),n=moment(a()),i=n.format("MM/DD/YYYY");$(e).text(i)}},ko.bindingHandlers.Time={update:function(e,t){var a=t(),n=moment(a()),i=n.format("HH:mm");$(e).text(i)}},ko.bindingHandlers.clickRadio={init:function(e,t,a,n){var i=t(),r=a().setValue||null;$(e).on("click",function(){"null"===r?i(null):r?i(r):i(n)})}},ko.bindingHandlers.clickToggleInArray={init:function(a,n,i){e();var r=n(),o=i().setValue||null,s=ko.utils.arrayFirst(r(),function(e){return e.id()===o});if(!s){var d={id:o};s=t.createComplexType("Identifier",d)}$(a).on("click",function(){var e=r().indexOf(s);-1===e?r.push(s):r.remove(s)})}},ko.bindingHandlers.clickToggleInLanguageArray={init:function(a,n,i){e();var r=n(),o=i().setValue||null;i().nameValue||null;var s=i().lookupPropertyName||null,d=ko.utils.arrayFirst(r(),function(e){return e[s]()===o});if(!d){var p={};p[s]=o,d=t.createComplexType("ContactMode",p)}$(a).on("click",function(){var e=r().indexOf(d);-1===e?r.push(d):r.remove(d)})}},ko.bindingHandlers.clickTrue={update:function(e,t){var a=t();$(e).on("click",function(){a("true")})}},ko.bindingHandlers.clickFalse={update:function(e,t){var a=t();$(e).on("click",function(){a("false")})}},ko.bindingHandlers.hoverToggle={update:function(e,t){var a=t();ko.utils.registerEventHandler(e,"mouseover",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(a),!0)}),ko.utils.registerEventHandler(e,"mouseout",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(a),!1)})}},ko.bindingHandlers.clickToggle={init:function(e,t,a){var n=t(),i=a().canToggle||null;ko.utils.registerEventHandler(e,"click",function(e){if(i){var t=ko.unwrap(i);t&&(e.preventDefault(),n(!n()))}else e.preventDefault(),n(!n())})}},ko.bindingHandlers.setActiveTab={init:function(e,t,a,n){var i=t();ko.utils.registerEventHandler(e,"click",function(e){e.preventDefault(),n.activeTab(i)})}},ko.bindingHandlers.updateActionElementState={init:function(e,t,a,n){var i=t(),r=i.subscribe(function(){n.step().action().elementState(4)});ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.dispose()})}},ko.bindingHandlers.datepicker={init:function(e,t,a,n){var i=t(),r=$(e),o=a().datepickerOptions||{};r.datepicker(o),ko.utils.registerEventHandler(e,"change",function(){var e=r.datepicker("getDate"),t=moment(e).toISOString();return"Invalid date"===t?(i("clear"),null):(n.step&&n.step().action().elementState(4),i(t),void 0)}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.datepicker("destroy")})},update:function(e,t){var a=ko.utils.unwrapObservable(t()),n=$(e),i=n.datepicker("getDate");if(0!==a-i){var r=moment(a),o=r.format("MM/DD/YYYY");n.datepicker("setDate",o),n.blur()}("clear"===a||"Invalid date"===a)&&$.datepicker._clearDate(n)}},ko.bindingHandlers.timepicker={init:function(e,t,a,n){t(),$(e),ko.utils.registerEventHandler(e,"change",function(){var a=t(),i=new Date(moment(a()).toString()),r=moment(i).isDST()?60:0,o=new Date($(e)[0].valueAsDate.getTime()+1e3*60*(i.getTimezoneOffset()+r)),s=i;s.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),n.step().action().elementState(4),a(s.toISOString())})},update:function(e,t){var a=ko.utils.unwrapObservable(t()),n=$(e),i=new moment(a).format("HH:mm");n[0].value=i}},ko.bindingHandlers.timeOut={init:function(e,t,a){var n=a().timeOutOptions||{},i=t();n&&n.delay&&setTimeout(function(){i(!i)},n.delay),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){})}},ko.bindingHandlers.fullCalendar={update:function(e,t){var a=t();e.innerHTML="",$(e).fullCalendar({defaultView:a.defaultView,events:ko.utils.unwrapObservable(a.events),header:a.header,editable:a.editable}),$(e).fullCalendar("gotoDate",ko.utils.unwrapObservable(a.viewDate))}},ko.bindingHandlers.typeahead={init:function(e,t){var a=ko.unwrap(t())||{},n=$(e),i=function(){n.change()},r=a.displayKey;a.displayKey=function(e){return e[r]()},a.dupDetector=function(){return!1},a.source=a.taOptions.ttAdapter(),n.typeahead(null,a).on("typeahead:selected",i).on("typeahead:autocompleted",i),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){n.typeahead("destroy"),n=null})},update:function(e,t){t()}},ko.bindingHandlers.autoHeight={update:function(e,t){t(),$(e).height($(e)[0].scrollHeight)}},ko.bindingHandlers.chosen={init:function(e){ko.bindingHandlers.options.init(e);var t={disable_search:!0,allow_single_deselect:!0,display_selected_options:!0,inherit_select_classes:!0,placeholder_text_multiple:" ",placeholder_text_single:"Choose One",width:"auto"};$(e).chosen(t)},update:function(e,t,a){ko.bindingHandlers.options.update(e,t,a),$(e).trigger("chosen:updated")}},ko.bindingHandlers.chosenUpdater={update:function(e,t,a){ko.unwrap(t());var n=a().disable;n?$(e).attr("disabled","disabled"):$(e).removeAttr("disabled"),$(e).trigger("chosen:updated")}}});
define('services/branding',[],function(){function e(e,t){var a=this;a.brandName=ko.observable(e),a.imageSource=ko.observable(t)}var t=ko.observable(new e("Phytel","/NightingaleUI/Content/images/phytel_logo.png")),a={currentBrand:t};return a});
define('services/jsonResultsAdapter',[],new breeze.JsonResultsAdapter({name:"Nightingale",extractResults:function(e){var t=e.results;if(!t)throw new Error("Unable to resolve 'results' property");return t&&(t.Problems||t.PatientProblem||t.PatientProblems||t.Patient||t.Cohorts||t.Patients||t.Program||t.Programs||t.PlanElems||t.Languages||t.States||t.CommModes||t.TimesOfDays||t.TimeZones||t.CommTypes||t.Contact||t.Contacts||t.LookUps||t.Goals||t.Goal||t.Task||t.Note||t.Notes||t.Library||t.CareMembers||t.Observations||t.Observation)},visitNode:function(e,t,a){if(e.PatientProblemID)return{entityType:"PatientProblem"};if(e.ConditionID&&e.DisplayName)return{entityType:"Condition"};if(e.Id&&e.DOB)return{entityType:"Patient"};if(e.ProgramId&&e.Actions){var n=e.DateCompleted;if(!n)return{entityType:"Module"};var r=n.substr(0,6);if(-1!==r.indexOf("Date")){var i=n.substr(6,13),o=new Date;o.setTime(i),e.DateCompleted=o.toISOString()}return{entityType:"Module"}}if(e.ModuleId&&e.Steps)return{entityType:"Action"};if(e.StepTypeId)return{entityType:"Step"};if(e.StepId)return{entityType:"Response"};if(e.ElementId)return{entityType:"SpawnElement"};if(e.CommModes&&e.Id)return e.CommModeIds=[],$.each(e.CommModes,function(t,a){e.CommModeIds.push({Id:a})}),{entityType:"CommunicationType"};if(t.query.entityType&&"Note"===t.query.entityType.shortName&&e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){s.push({Id:t})}),e.ProgramIds=s}if(e.TimeZoneId)return e.PreferredTimesOfDayIds=[],e.PreferredDaysOfWeekIds=[],e.TimesOfDaysId&&$.each(e.TimesOfDaysId,function(t,a){e.PreferredTimesOfDayIds.push({Id:a})}),e.WeekDays&&$.each(e.WeekDays,function(t,a){e.PreferredDaysOfWeekIds.push({Id:a})}),{entityType:"ContactCard"};if(t.query.entityType&&"Goal"===t.query.entityType.shortName){if("root"===a.nodeType){if(e.FocusAreaIds){var c=[];$.each(e.FocusAreaIds,function(e,t){c.push({Id:t})}),e.FocusAreaIds=c}if(e.ProgramIds){var s=[];$.each(e.ProgramIds,function(e,t){s.push({Id:t})}),e.ProgramIds=s}e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var a=[];t.Values&&($.each(t.Values,function(e,t){a.push({Value:t})}),t.Values=a)})}if(a.navigationProperty){if("tasks"===a.navigationProperty.name){if(e.BarrierIds){var c=[];$.each(e.BarrierIds,function(e,t){c.push({Id:t})}),e.BarrierIds=c}return e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var a=[];$.each(t.Values,function(e,t){a.push({Value:t})}),t.Values=a}),{entityType:"Task"}}if("barriers"===a.navigationProperty.name)return{entityType:"Barrier"};if("interventions"===a.navigationProperty.name){if(e.BarrierIds){var c=[];$.each(e.BarrierIds,function(e,t){c.push({Id:t})}),e.BarrierIds=c}return{entityType:"Intervention"}}}}}}));
define('services/dataservices/getentityservice',[],function(){function e(e,t,a,n,r,i){var o=breeze.EntityQuery.from(t).toType(a);return i&&(o=o.orderBy(i)),n&&r&&(o=o.where(n,"==",r)),e.executeQueryLocally(o)}function t(e,t,a,n,r){var i=breeze.EntityQuery.from(t).where(n,"==",r).toType(a);return e.executeQueryLocally(i)}function a(e,t){e.sort(function(e,a){return e[t]()>a[t]()?1:-1})}function n(){r||(r=require("services/datacontext"))}var r,i=function(t,i,o,s,d,c,p,u,l,y){function m(e){var t=e.results;return o&&o(t),y&&a(o,y),i}function g(e){n(),console.log(e);var t="Failed to load "+s+" from server.",a=r.createEntity("Alert",{result:0,reason:t});return a.entityAspect.acceptChanges(),r.enums.alerts.push(a),i}if(n(),!t)throw new Error("[manager] cannot be a null parameter");if(!u){var f=e(t,d,s,c,p,y);if(f.length>0)return o(f),Q.resolve(i)}p&&!c&&(d+=p);var T={};if(l)T=l;else var T={};p&&c&&(T[c]=p);var v=breeze.EntityQuery.from(d).withParameters(T).toType(s);return t.executeQuery(v).then(m).fail(g)},o=function(e,a,i,o,s,d,c){function p(e){var t=e.results[0];return i&&i(t),a}function u(e){n(),console.log(e);var t="Failed to load "+s+" from server.",i=r.createEntity("Alert",{result:0,reason:t});return i.entityAspect.acceptChanges(),r.enums.alerts.push(i),a}n();var l=d+o,y={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!c){var m=t(e,l,s,"id",o);if(m.length>0)return i(m[0]),Q.resolve(a)}var g=breeze.EntityQuery.from(l).withParameters(y).toType(s);return e.executeQuery(g).then(p).fail(u)},s=function(e,a,i,o,s,d,c,p){function u(e){var t=e.results[0];return i&&i(t),a}function l(e){n(),console.log(e);var t="Failed to load "+s+" from server.",i=r.createEntity("Alert",{result:0,reason:t});return i.entityAspect.acceptChanges(),r.enums.alerts.push(i),a}n();var y=d;o&&(y+=o);var m={};if(p)m=p;else var m={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!c){var g=t(e,y,s,"id",o);if(g.length>0)return i(g[0]),Q.resolve(a)}var f=breeze.EntityQuery.from(y).withParameters(m).toType(s);return e.executeQuery(f).then(u).fail(l)},d={getEntityList:i,getEntityById:o,getMelsEntityById:s};return d});
define('services/dataservices/usersservice',["config.models","config.services","services/session"],function(e,t,a){function n(e){r(),console.log("Error - ",e),e.status&&401===e.status&&a.logOff();var t=i.createEntity("Alert",{result:"error",reason:"Log-in failed!"});t.entityAspect.acceptChanges(),i.enums.alerts.push(t)}function r(){i||(i=require("services/datacontext"))}var i,o=function(e,t,a,r){function i(e){var t=e.results[0];return a(t)}var o={Token:r,APIKey:"12345",Context:"NG"};if(r){var s=breeze.EntityQuery.from(t).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("User");return e.executeQuery(s).then(i).fail(n)}},s=function(e,a){var n;return n=t.securityServiceName+a,e?$.ajax({url:n,cache:!1,headers:{token:e},dataType:"json",type:"POST",data:{Context:"NG"},success:function(){return!0}}):void 0},c=function(e,a,r){var i;e||(e="usersettings"),i=t.remoteServiceName+e,$.ajax({url:i,cache:!1,headers:{Token:r},dataType:"json",type:"GET",success:function(e){return $.each(e.Settings,function(e,t){a().settings.push(t)}),!0}}).fail(n)},u=function(e,t){var a={};a.firstName=t.firstName||"",a.lastName=t.lastName||"",a.aPIToken=t.aPIToken||"",a.userId=t.userId||"",a.userName=t.userName||"",a.contracts=t.contracts||[];var n=e.createEntity("User",a);return n.entityAspect.acceptChanges(),n},d={getSessionUser:o,deleteSessionToken:s,getUserSettings:c,createUserFromSessionUser:u};return d});
define('services/dataservices/calendarservice',["config.models.user","config.services"],function(){function e(e){console.log("Error - ",e)}function t(e,t,a,n,r){var i=breeze.EntityQuery.from(t).select("id, title, start, end, allDay, url").toType(a);return n&&r&&(i=i.where(n,"==",r)),e.executeQueryLocally(i)}var a=function(a,n,r,i,o){function s(e){var t=e.results;return r(t)}if(!a)throw new Error("[manager] cannot be a null parameter");if(!o){var d=t(a,n,"Event","userId",i);if(d.length>0)return r(d),Q.resolve()}var p=breeze.EntityQuery.from(n).toType("Event");return a.executeQuery(p).then(s).fail(e)},n=function(e,t,a){a.userId=t;var n=e.createEntity("Event",a);return n.entityAspect.acceptChanges(),n},r={getEventsByUserId:a,createCalendarEvent:n};return r});
define('services/usercontext',["services/session","config.models","config.services","config.models.user","services/dataservices/usersservice","services/dataservices/calendarservice"],function(e,t,a,n,r,i){function o(){breeze.NamingConvention.camelCase.setAsDefault();var e=new breeze.EntityManager({dataService:u});return n.initialize(e.metadataStore),e}var s=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"null"}),c=ko.computed(function(){return e.currentUser()?e.currentUser().userId():"nothing"}),u=new breeze.DataService({serviceName:a.securityServiceName,hasServerMetadata:!1}),d=o();d.metadataStore;var p=function(e,t,a){return Q(r.getSessionUser(d,"1.0/login",e,t,a))},l=function(e){return Q(r.deleteSessionToken(s(),e))},y=function(e,t,a){return Q(r.getUserSettings(t,e,a))},m=function(e){return r.createUserFromSessionUser(d,e)},g=function(){return n.createCalendarMocks(d,c())},f=function(e,t,a){var n="events";return i.getEventsByUserId(d,n,e,s(),t,a)},v=function(e){return i.createCalendarEvent(d,c(),e)},h=function(e,t){return d.createEntity(e,t)},T={createEntity:h,getUserByUserToken:p,logOutUserByToken:l,getUserSettings:y,createUserFromSessionUser:m,getEventsByUserId:f,createCalendarMocks:g,createCalendarEvent:v};return T});
define('services/dataservices/contactservice',["services/session","config.services","services/entityfinder"],function(e,t){function a(a,n){function o(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Contact","ContactCard");if(n){var d={};d.Contact=n,d=JSON.stringify(d);var c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(c).then(o).fail(r)}}function n(e){i();var t=e.patient().id();e.entityAspect.rejectChanges(),e.entityAspect.setDetached(),o.getEntityList(null,s().EntityType,s().ResourcePath+t+"/Contact",null,null,!0)}function r(e){i(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}function i(){o||(o=require("services/datacontext"))}var o,s=ko.computed(function(){var a=e.currentUser();return a?new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),d={saveContactCard:a,cancelAllChangesToContactCard:n};return d});
define('services/dataservices/lookupsservice',["config.models","config.services","services/session"],function(e,t,a){function n(e,n,i){function o(e){var t=e.results;return i(t)}var s;a&&a.currentUser&&(s=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Lookup/"+n,n));var c=breeze.EntityQuery.from(s.ResourcePath).toType(s.EntityType);return e.executeQuery(c).then(o).fail(r)}function r(e){i(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Load lookups failed!"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}function i(){o||(o=require("services/datacontext"))}var o,s={getLookup:n};return s});
define('services/dataservices/goalsservice',["services/session","config.services","services/entityfinder"],function(e,t){function a(a,n,r,s,c){o();var d="Patient/"+s+"/Goal";c&&(d+="/"+c+"/"+r),d+="/Initialize";var u=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),d,r),p={},l=breeze.EntityQuery.from(u.ResourcePath).toType(r).withParameters(p);return a.executeQuery(l).fail(i)}function n(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Goal/"+n.Id+"/Update","Goal");if(n){var c={};c.Goal=n,c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(i)}}function r(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Goal/"+n.id()+"/Delete","Goal"),c={};c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(i)}function i(){o(),console.log("Error - ",error);var e=s.createEntity("Alert",{result:0,reason:"Save failed!"});e.entityAspect.acceptChanges(),s.enums.alerts.push(e)}function o(){s||(s=require("services/datacontext"))}var s,c={initializeEntity:a,saveGoal:n,deleteGoal:r};return c});
define('services/dataservices/notesservice',["services/session","config.services"],function(e,t){function a(a,n){function o(e){return console.log(e),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Note/Insert","Note");if(n){var c={};c.Note=n,c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(o).fail(r)}}function n(a,n){function o(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Note/"+n.id()+"/Delete","Note"),c={};c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(o).fail(r)}function r(e){i(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}function i(){o||(o=require("services/datacontext"))}var o,s={saveNote:a,deleteNote:n};return s});
define('services/dataservices/observationsservice',["services/session","config.services"],function(e,t){function a(a,n,r){function i(){return ko.utils.arrayForEach(c(),function(e){e.typeId(n)}),!0}o();var c=ko.observableArray(),d=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+r+"/Observation/Type/"+n+"/MatchLibrary/","AdditionalObservation");return s.getEntityList(c,d.EntityType,d.ResourcePath,null,null,!0).then(i)}function n(a,n){function r(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");o();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/Observation/Update","Observation");if(n){var c={};c.Observations=n,c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(d).then(r).fail(i)}}function r(a,n,r,s,c,d){function u(e){return n(e.results[0]),e}o();var p="Patient/"+c+"/Observation/"+d,l=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),p,r),y=breeze.EntityQuery.from(l.ResourcePath).toType(r);return a.executeQuery(y).then(u).fail(i)}function i(e){console.log(e)}function o(){s||(s=require("services/datacontext"))}var s,c={getAdditionalObservationsByTypeIdAndPatientId:a,saveObservations:n,initializeObservation:r};return c});
define('services/dataservices/caremembersservice',["services/session","config.services"],function(e,t){function a(a,n,o){function s(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var d=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.PatientId+"/CareMember/"+o,"CareMember");if(n){var c={};c.CareMember=n,c=JSON.stringify(c);var p=breeze.EntityQuery.from(d.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:c});return a.executeQuery(p).then(s).fail(r)}}function n(a,n){function o(e){return e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n.patientId()+"/Note/"+n.id()+"/Delete","Note"),d={};d=JSON.stringify(d);var c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(c).then(o).fail(r)}function r(e){i(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}function i(){o||(o=require("services/datacontext"))}var o,s={saveCareMember:a,deleteNote:n};return s});
define('services/dataservices/patientsservice',["services/session","config.services"],function(e,t){function a(a,n,o){function s(e){return console.log(e),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var c=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n+"/Background","Background");if(n){var d={};d.PatientId=n,d.Background=o,d=JSON.stringify(d);var u=breeze.EntityQuery.from(c.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return a.executeQuery(u).then(s).fail(r)}}function n(a,n){function o(e){return console.log(e),e.httpResponse.data}if(!a)throw new Error("[manager] cannot be a null parameter");i();var s=new t.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+n+"/SSN");if(n){var c={};c=JSON.stringify(c);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"GET",$encoding:"JSON",$data:c});return a.executeQuery(d).then(o).fail(r)}}function r(e){i(),console.log("Error - ",e);var t=o.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),o.enums.alerts.push(t)}function i(){o||(o=require("services/datacontext"))}var o,s={saveBackground:a,getFullSSN:n};return s});
define('services/datacontext',["services/session","services/jsonResultsAdapter","config.models","config.services","services/dataservices/getentityservice","config.models.program","config.models.lookups","config.models.contacts","config.models.goals","config.models.notes","config.models.observations","services/dataservices/programsservice","services/entityfinder","services/usercontext","services/dataservices/contactservice","services/entityserializer","services/dataservices/lookupsservice","services/dataservices/goalsservice","services/dataservices/notesservice","services/dataservices/observationsservice","services/dataservices/caremembersservice","services/dataservices/patientsservice"],function(e,t,a,n,r,i,o,s,d,p,c,l,u,y,m,g,f,T,v,h,S,N){function k(e,t){var a=this;a.Message=ko.observable(e),a.Showing=ko.observable(t)}function b(){var e=breeze.config.getAdapterInstance("ajax","jQuery");e.defaultSettings={headers:{Token:vt()}};var t=breeze.config.initializeAdapterInstance("dataService","webApi",!0);t.defaultSettings={headers:{Token:vt()}},breeze.ajaxpost.configAjaxAdapter(e)}function P(e,t){return Pt.createEntity(e,t)}function E(e,t,a,n){return T.initializeEntity(Pt,e,t,a,n)}function I(e,t){var a=Pt.metadataStore.getEntityType(e),n=a.createInstance(t);return n}function C(){b();var t=Q.all([q(),At(e.currentUser,"/1.0/"+e.currentUser().contracts()[0].number()+"/settings",vt()),A(),O(),w(),x(),D(),M(),F(),U(),K(),B(),G(),L(),_(),V()]);return t}function A(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/problems","Problem");return Ut(null,t.EntityType,t.ResourcePath,null,null,!0)}}function O(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort");return Ut(null,t.EntityType,t.ResourcePath,null,null,!0)}}function w(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"programs/active","ContractProgram");return Ut(null,t.EntityType,t.ResourcePath,null,null,!0)}}function x(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timesofdays","TimeOfDay");return Ut(kt.timesOfDay,t.EntityType,t.ResourcePath,null,null,!0)}}function D(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timezones","TimeZone");return Ut(kt.timeZones,t.EntityType,t.ResourcePath,null,null,!0,null,"name")}}function M(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/states","State");return Ut(kt.states,t.EntityType,t.ResourcePath,null,null,!0)}}function F(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/languages","Language");return Ut(kt.languages,t.EntityType,t.ResourcePath,null,null,!0)}}function U(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commmodes","CommunicationMode");return Ut(kt.communicationModes,t.EntityType,t.ResourcePath,null,null,!0).then(H)}}function K(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commtypes","CommunicationType");return Ut(kt.communicationTypes,t.EntityType,t.ResourcePath,null,null,!0).then(H)}}function _(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contact/CareManagers","CareManager");return Ut(kt.careManagers,t.EntityType,t.ResourcePath,null,null,!0)}}function B(){return e.currentUser()?(f.getLookup(Pt,"FocusArea",_t.enums.focusAreas,!0),f.getLookup(Pt,"Source",_t.enums.sources,!0),f.getLookup(Pt,"BarrierCategory",_t.enums.barrierCategories,!0),f.getLookup(Pt,"InterventionCategory",_t.enums.interventionCategories,!0)):void 0}function G(){return e.currentUser()?f.getLookup(Pt,"ObservationType",kt.observationTypes,!0):void 0}function R(e){Tt||z(e)}function z(e){ko.utils.arrayForEach(kt.observationTypes(),function(t){h.getAdditionalObservationsByTypeIdAndPatientId(Pt,t.id(),e)}),Tt=!0}function L(){return e.currentUser()?f.getLookup(Pt,"CareMemberType",kt.careMemberTypes,!0):void 0}function H(){if(0===kt.communicationModes().length||0===kt.communicationTypes().length||Nt)return!1;var e="",t="",a="",n="";return ko.utils.arrayForEach(kt.communicationModes(),function(r){"Phone"===r.name()?e=r.id():"Email"===r.name()?t=r.id():"Text"===r.name()?n=r.id():"Mail"===r.name()&&(a=r.id())}),ko.utils.arrayForEach(kt.communicationTypes(),function(r){var i=ko.utils.arrayFirst(r.commModeIds(),function(t){return t.id()===e});i&&kt.phoneTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===t});i&&kt.emailTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===n});i&&kt.textTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===a});i&&kt.addressTypes.push(r)}),Nt=!0,!0}function V(){d.createMocks(Pt);var e=mt();gt(e)}function q(){o.initializeEnums(Pt),_t.getEntityList(_t.enums.priorities,"Priority","fakeEndPoint",null,null,!1),_t.getEntityList(_t.enums.goalTypes,"GoalType","fakeEndPoint",null,null,!1),_t.getEntityList(_t.enums.goalTaskStatuses,"GoalTaskStatus","fakeEndPoint",null,null,!1),_t.getEntityList(_t.enums.barrierStatuses,"BarrierStatus","fakeEndPoint",null,null,!1),_t.getEntityList(_t.enums.interventionStatuses,"InterventionStatus","fakeEndPoint",null,null,!1)}function j(){breeze.NamingConvention.camelCase.setAsDefault(),breeze.config.initializeAdapterInstance("ajax","jQuery",!0);var e=new breeze.EntityManager({dataService:bt});return a.initialize(e.metadataStore),o.initialize(e.metadataStore),i.initialize(e.metadataStore),s.initialize(e.metadataStore),d.initialize(e.metadataStore),p.initialize(e.metadataStore),c.initialize(e.metadataStore),e}function Y(e,t,a){var n,r=a?a:"Loading";return t&&(n=ko.observable(new k(r+" "+e+"s...",t)),W(n)),n}function Z(e){X(e)}function W(e){ht.push(e)}function X(e){-1!==ht.indexOf(e)&&setTimeout(function(){ht.remove(e)},500)}function J(t,a,r,i){function o(e){console.log("Error - ",e);var t=_t.createEntity("Alert",{result:"0",reason:"Save failed!"});t.entityAspect.acceptChanges(),_t.enums.alerts.push(t)}var s=Y("Patient",!0,"Saving"),d=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient"),p=ko.unwrap(t),c=p.id(),l=n.remoteServiceName+"/"+d.ResourcePath+c+"/"+a;(r||0===r)&&(l=l+"/"+r);var y={};return $.each(i,function(e,t){y[t.Property]=t.Value}),$.ajax({url:l,cache:!1,dataType:"json",type:"POST",headers:{Token:vt()},data:y,success:function(e){return p.entityAspect.acceptChanges(),Z(s),u.searchForEntities(e)}}).fail(o)}function et(t,a){function r(e){t.entityAspect.rejectChanges();var a=_t.createEntity("Alert",{result:"0",reason:"Save failed!"});a.entityAspect.acceptChanges(),kt.alerts.push(a),console.log(e)}var i=Y(t.entityType.shortName,!0,"Saving"),o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Update"),s=n.remoteServiceName+"/"+o.ResourcePath+"Update",d={};$.each(a,function(e,t){d[t.Property]=t.Value||'""'});var p=vt();return $.ajax({url:s,cache:!1,dataType:"json",type:"POST",headers:{Token:p},data:d,success:function(){return t.fullSSN()&&(t.lastFourSSN(t.fullSSN().substr(t.fullSSN().length-4)),t.fullSSN(null)),t.entityAspect.acceptChanges(),Z(i),!0}}).fail(r)}function tt(e,t,a){var n=Y("Action",!0,"Saving");return l.saveActionPost(Pt,e,t,a).then(Z(n))}function at(e){function t(t){if(t){var a=t.UpdatedPhone,r=t.UpdatedEmail,i=t.UpdatedAddress;a&&ko.utils.arrayForEach(a,function(t){var a=ko.utils.arrayFirst(e.phones(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),r&&ko.utils.arrayForEach(r,function(t){var a=ko.utils.arrayFirst(e.emails(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),i&&ko.utils.arrayForEach(i,function(t){var a=ko.utils.arrayFirst(e.addresses(),function(e){return e.id()===t.OldId});a&&a.id(t.NewId)}),e.entityAspect.acceptChanges(),Z(n)}}var a,n=Y("Contact card",!0,"Saving");setTimeout(function(){a=g.serializeContactCard(e,Pt)},50),setTimeout(function(){return m.saveContactCard(Pt,a).then(t)},50)}function nt(e){function t(){e.isNew(!1),e.entityAspect.acceptChanges(),Z(n)}var a,n=Y("Goal",!0,"Saving");setTimeout(function(){a=g.serializeGoal(e,Pt)},50),setTimeout(function(){return T.saveGoal(Pt,a).then(t)},50)}function rt(e){function t(){e.entityAspect.rejectChanges(),e.patientId(null),Pt.detachEntity(e),Z(a)}var a=Y("Goal",!0,"Deleting");return T.deleteGoal(Pt,e).then(t)}function it(e){function t(t){return e.id(t.Id),e.entityAspect.acceptChanges(),Z(a),!0}var a=Y("Note",!0,"Saving"),n=g.serializeNote(e,Pt);return v.saveNote(Pt,n).then(t)}function ot(e){function t(){e.entityAspect.rejectChanges(),e.patientId(null),Pt.detachEntity(e),Z(a)}var a=Y("Note",!0,"Deleting");return v.deleteNote(Pt,e).then(t)}function st(e,t){function a(t){return t.Id&&e.id(t.Id),e.entityAspect.acceptChanges(),Z(n),!0}var n=Y("CareMember",!0,"Saving"),r=g.serializeCareMember(e,Pt);return S.saveCareMember(Pt,r,t).then(a)}function dt(e,t,a,n,r){function i(e){return e}return h.initializeObservation(Pt,e,t,n,r,a).then(i)}function pt(e){function t(){return Z(n),!0}var a=ko.observableArray(),n=Y("Observations",!0,"Saving");Ut(a,"Observation","local","patientId",e,!1);var r=[];return r.PatientId=e,ko.utils.arrayForEach(a(),function(e){if(moment(e.startDate()).isValid()){var t=!0;if(ko.utils.arrayForEach(e.values(),function(e){e.value()||(t=!1)}),t){e.entityAspect.acceptChanges();var a=g.serializeObservation(e,Pt);r.push(a)}}}),h.saveObservations(Pt,r).then(t)}function ct(e){function t(){return e.entityAspect.acceptChanges(),Z(a),!0}var a=Y("Background",!0,"Saving"),n=e.background(),r=e.id();return N.saveBackground(Pt,r,n).then(t)}function lt(e){function t(e){return e}return N.getFullSSN(Pt,e).then(t)}function ut(e){return m.cancelAllChangesToContactCard(e)}function yt(e){e.entityAspect.rejectChanges()}function mt(){return Pt.getChanges()}function gt(e){ko.utils.arrayForEach(e,function(e){e.entityAspect.acceptChanges()})}var ft=ko.observable(!1),Tt=!1,vt=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"527bbc43231e250c4cb93eb6"}),ht=ko.observableArray(),St=ko.computed(function(){var e=!1;return ko.utils.arrayForEach(ht(),function(t){t().Showing()&&(e=!0)}),e}),Nt=!1,kt={};kt.priorities=ko.observableArray(),kt.alerts=ko.observableArray(),kt.genders=ko.observableArray([new a.Gender("m","M","Male"),new a.Gender("f","F","Female"),new a.Gender("n","N","Neutral")]),kt.daysOfWeek=ko.observableArray([new a.Day("0","M","Monday"),new a.Day("1","Tu","Tuesday"),new a.Day("2","W","Wednesday"),new a.Day("3","Th","Thursday"),new a.Day("4","F","Friday"),new a.Day("5","Sat","Saturday"),new a.Day("6","Sun","Sunday")]),kt.phoneTypes=ko.observableArray(),kt.emailTypes=ko.observableArray(),kt.addressTypes=ko.observableArray(),kt.textTypes=ko.observableArray(),kt.languages=ko.observableArray(),kt.states=ko.observableArray(),kt.timeZones=ko.observableArray(),kt.timesOfDay=ko.observableArray(),kt.communicationModes=ko.observableArray(),kt.communicationTypes=ko.observableArray(),kt.focusAreas=ko.observableArray(),kt.sources=ko.observableArray(),kt.barrierCategories=ko.observableArray(),kt.interventionCategories=ko.observableArray(),kt.goalTypes=ko.observableArray(),kt.goalTaskStatuses=ko.observableArray(),kt.barrierStatuses=ko.observableArray(),kt.interventionStatuses=ko.observableArray(),kt.careManagers=ko.observableArray(),kt.careMemberTypes=ko.observableArray(),kt.observationTypes=ko.observableArray(),breeze.EntityQuery;var bt=new breeze.DataService({adapterName:"webApi",serviceName:n.remoteServiceName,hasServerMetadata:!1,jsonResultsAdapter:t}),Pt=j(),Et=Pt.metadataStore;Et.setEntityTypeForResourceName("ProgramsTest","Program");var It=y.getUserByUserToken,Ct=y.logOutUserByToken,At=y.getUserSettings,Ot=y.createUserFromSessionUser,wt=y.getEventsByUserId,xt=y.createCalendarMocks,Dt=y.createCalendarEvent,Mt=function(e,t,a,n,i){var o=Y(a,i);return r.getEntityById(Pt,o,e,t,a,n,i).then(Z)},Ft=function(e,t,a,n,i,o){var s=Y(a,i);return r.getMelsEntityById(Pt,s,e,t,a,n,i,o).then(Z)},Ut=function(e,t,a,n,i,o,s,d){var p=Y(t,o);return r.getEntityList(Pt,p,e,t,a,n,i,o,s,d).then(Z)},Kt=u.searchForEntities;Pt.hasChangesChanged.subscribe(function(e){ft(e.hasChanges)});var _t={manager:Pt,loadingMessages:ht,loadingMessagesShowing:St,getEntityById:Mt,getMelsEntityById:Ft,getEntityList:Ut,createEntity:P,initializeEntity:E,createComplexType:I,getUserByUserToken:It,logOutUserByToken:Ct,createUserFromSessionUser:Ot,getEventsByUserId:wt,createCalendarMocks:xt,createCalendarEvent:Dt,primeData:C,saveChangesToPatientProperty:J,saveEntity:et,saveAction:tt,saveGoal:nt,deleteGoal:rt,saveNote:it,deleteNote:ot,saveCareMember:st,enums:kt,saveContactCard:at,cancelAllChangesToContactCard:ut,cancelEntityChanges:yt,getAllChanges:mt,searchForEntities:Kt,checkIfAllAdditionalObservationsAreLoadedYet:R,initializeObservation:dt,saveObservations:pt,saveBackground:ct,getFullSSN:lt,hasChanges:ft};return _t});
define('services/dataservices/stepservice',[],function(){function e(e,t,a,n,r,i){var o=breeze.EntityQuery.from(t).toType(a);return i&&(o=o.orderBy(i)),n&&r&&(o=o.where(n,"==",r)),e.executeQueryLocally(o)}var t=function(e){var t=e.createEntity("Step",{name:"Eligibility"}),t=e.createEntity("QuestionTypeId",{name:"True/False"});e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1})},a=function(t,a){var n=e(t,"Step",entityType);return n.length>0?(a(n),Q.resolve()):void 0},n={createMockStepAndQuestions:t,getStepById:a,getMockStepMap:getMockStepMap};return n});
define('plugins/history',["durandal/system","jquery"],function(e,t){function n(e,t,n){if(n){var a=e.href.replace(/(javascript:|#).*$/,"");e.replace(a+"#"+t)}else e.hash="#"+t}var a=/^[#\/]|\s+$/g,r=/^\/+|\/+$/g,i=/msie [\w.]+/,o=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var n=s.root.replace(o,"");e.indexOf(n)||(e=e.substr(n.length))}else e=s.getHash();return e.replace(a,"")},s.activate=function(n){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var o=s.getFragment(),c=document.documentMode,u=i.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);s.root=("/"+s.root+"/").replace(r,"/"),u&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(o,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!u?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=o;var l=s.location,d=l.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&l.hash&&(this.fragment=s.getHash().replace(a,""),this.history.replaceState({},document.title,s.root+s.fragment+l.search))}return s.options.silent?void 0:s.loadUrl()},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();return e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment?!1:(s.iframe&&s.navigate(e,!1),s.loadUrl(),void 0)},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return s.options.routeHandler?s.options.routeHandler(t):!1},s.navigate=function(t,a){if(!s.active)return!1;if(void 0===a?a={trigger:!0}:e.isBoolean(a)&&(a={trigger:a}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var r=s.root+t;if(""===t&&"/"!==r&&(r=r.slice(0,-1)),s._hasPushState)s.history[a.replace?"replaceState":"pushState"]({},document.title,r);else{if(!s._wantsHashChange)return s.location.assign(r);n(s.location,t,a.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(a.replace||s.iframe.document.open().close(),n(s.iframe.location,t,a.replace))}return a.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s});
define('plugins/router',["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,a,r,i,o,s){function c(e){return e=e.replace(y,"\\$&").replace(m,"(?:$1)?").replace(f,function(e,t){return t?e:"([^/]+)"}).replace(v,"(.*?)"),new RegExp("^"+e+"$")}function u(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function l(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,a=e.length;a>n;n++)if(e[n]!=t[n])return!1;return!0}var p,g,m=/\((.*?)\)/g,f=/(\(\?)?:\w+/g,v=/\*\w+/g,y=/[\-{}\[\]+?.,\\\^$|#\s]/g,h=/\/$/,b=function(){function r(e){return e.router&&e.router.parent==F}function s(e){O&&O.config.isActive&&O.config.isActive(e)}function m(t,n){e.log("Navigation Complete",t,n);var a=e.getModuleId(C);a&&F.trigger("router:navigation:from:"+a),C=t,s(!1),O=n,s(!0);var i=e.getModuleId(C);i&&F.trigger("router:navigation:to:"+i),r(t)||F.updateDocumentTitle(t,n),g.explicitNavigation=!1,g.navigatingBack=!1,F.trigger("router:navigation:complete",t,n,F)}function f(t,n){e.log("Navigation Cancelled"),F.activeInstruction(O),O&&F.navigate(O.fragment,!1),A(!1),g.explicitNavigation=!1,g.navigatingBack=!1,F.trigger("router:navigation:cancelled",t,n,F)}function v(t){e.log("Navigation Redirecting"),A(!1),g.explicitNavigation=!1,g.navigatingBack=!1,F.navigate(t,{trigger:!0,replace:!0})}function y(t,n,a){g.navigatingBack=!g.explicitNavigation&&C!=a.fragment,F.trigger("router:route:activating",n,a,F),t.activateItem(n,a.params).then(function(e){if(e){var i=C;if(m(n,a),r(n)){var o=a.fragment;a.queryString&&(o+="?"+a.queryString),n.router.loadUrl(o)}i==n&&(F.attached(),F.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?v(t.settings.lifecycleData.redirect):f(n,a);p&&(p.resolve(),p=null)}).fail(function(t){e.error(t)})}function k(t,n,a){var r=F.guardRoute(n,a);r?r.then?r.then(function(r){r?e.isString(r)?v(r):y(t,n,a):f(n,a)}):e.isString(r)?v(r):y(t,n,a):f(n,a)}function T(e,t,n){F.guardRoute?k(e,t,n):y(e,t,n)}function S(e){return O&&O.config.moduleId==e.config.moduleId&&C&&(C.canReuseForRoute&&C.canReuseForRoute.apply(C,e.params)||!C.canReuseForRoute&&C.router&&C.router.loadUrl)}function P(){if(!A()){var t=x.shift();x=[],t&&(A(!0),F.activeInstruction(t),S(t)?T(n.create(),C,t):e.acquire(t.config.moduleId).then(function(n){var a=e.resolveObject(n);T(D,a,t)}).fail(function(n){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message)}))}}function E(e){x.unshift(e),P()}function w(e,t,n){for(var a=e.exec(t).slice(1),r=0;r<a.length;r++){var i=a[r];a[r]=i?decodeURIComponent(i):null}var o=F.parseQueryString(n);return o&&a.push(o),{params:a,queryParams:o}}function I(t){F.trigger("router:route:before-config",t,F),e.isRegExp(t)?t.routePattern=t.route:(t.title=t.title||F.convertRouteToTitle(t.route),t.moduleId=t.moduleId||F.convertRouteToModuleId(t.route),t.hash=t.hash||F.convertRouteToHash(t.route),t.routePattern=c(t.route)),t.isActive=t.isActive||o.observable(!1),F.trigger("router:route:after-config",t,F),F.routes.push(t),F.route(t.routePattern,function(e,n){var a=w(t.routePattern,e,n);E({fragment:e,queryString:n,config:t,params:a.params,queryParams:a.queryParams})})}function N(t){if(e.isArray(t.route))for(var n=t.isActive||o.observable(!1),a=0,r=t.route.length;r>a;a++){var i=e.extend({},t);i.route=t.route[a],i.isActive=n,a>0&&delete i.nav,I(i)}else I(t);return F}var C,O,x=[],A=o.observable(!1),D=n.create(),F={handlers:[],routes:[],navigationModel:o.observableArray([]),activeItem:D,isNavigating:o.computed(function(){var e=D(),t=A(),n=e&&e.router&&e.router!=F&&e.router.isNavigating()?!0:!1;return t||n}),activeInstruction:o.observable(null),__router__:!0};return a.includeIn(F),D.settings.areSameItem=function(e,t,n,a){return e==t?d(n,a):!1},F.parseQueryString=function(e){var t,n;if(!e)return null;if(n=e.split("&"),0==n.length)return null;t={};for(var a=0;a<n.length;a++){var r=n[a];if(""!==r){var i=r.split("=");t[i[0]]=i[1]&&decodeURIComponent(i[1].replace(/\+/g," "))}}return t},F.route=function(e,t){F.handlers.push({routePattern:e,callback:t})},F.loadUrl=function(t){var n=F.handlers,a=null,r=t,o=t.indexOf("?");if(-1!=o&&(r=t.substring(0,o),a=t.substr(o+1)),F.relativeToParentRouter){var s=this.parent.activeInstruction();r=s.params.join("/"),r&&"/"==r.charAt(0)&&(r=r.substr(1)),r||(r=""),r=r.replace("//","/").replace("//","/")}r=r.replace(h,"");for(var c=0;c<n.length;c++){var u=n[c];if(u.routePattern.test(r))return u.callback(r,a),!0}return e.log("Route Not Found"),F.trigger("router:route:not-found",t,F),O&&i.navigate(O.fragment,{trigger:!1,replace:!0}),g.explicitNavigation=!1,g.navigatingBack=!1,!1},F.updateDocumentTitle=function(e,n){n.config.title?document.title=t.title?n.config.title+" | "+t.title:n.config.title:t.title&&(document.title=t.title)},F.navigate=function(e,t){return e&&-1!=e.indexOf("://")?(window.location.href=e,!0):(g.explicitNavigation=!0,i.navigate(e,t))},F.navigateBack=function(){i.navigateBack()},F.attached=function(){F.trigger("router:navigation:attached",C,O,F)},F.compositionComplete=function(){A(!1),F.trigger("router:navigation:composition-complete",C,O,F),P()},F.convertRouteToHash=function(e){if(F.relativeToParentRouter){var t=F.parent.activeInstruction(),n=t.config.hash+"/"+e;return i._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return i._hasPushState?e:"#"+e},F.convertRouteToModuleId=function(e){return u(e)},F.convertRouteToTitle=function(e){var t=u(e);return t.substring(0,1).toUpperCase()+t.substring(1)},F.map=function(t,n){if(e.isArray(t)){for(var a=0;a<t.length;a++)F.map(t[a]);return F}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,N(n)},F.buildNavigationModel=function(t){for(var n=[],a=F.routes,r=t||100,i=0;i<a.length;i++){var o=a[i];o.nav&&(e.isNumber(o.nav)||(o.nav=++r),n.push(o))}return n.sort(function(e,t){return e.nav-t.nav}),F.navigationModel(n),F},F.mapUnknownRoutes=function(t,n){var a="*catchall",r=c(a);return F.route(r,function(o,s){var c=w(r,o,s),u={fragment:o,queryString:s,config:{route:a,routePattern:r},params:c.params,queryParams:c.queryParams};if(t)if(e.isString(t))u.config.moduleId=t,n&&i.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var l=t(u);if(l&&l.then)return l.then(function(){F.trigger("router:route:before-config",u.config,F),F.trigger("router:route:after-config",u.config,F),E(u)}),void 0}else u.config=t,u.config.route=a,u.config.routePattern=r;else u.config.moduleId=o;F.trigger("router:route:before-config",u.config,F),F.trigger("router:route:after-config",u.config,F),E(u)}),F},F.reset=function(){return O=C=void 0,F.handlers=[],F.routes=[],F.off(),delete F.options,F},F.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!l(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!l(t.route,"/")&&(t.route+="/"),t.fromParent&&(F.relativeToParentRouter=!0),F.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(e.route=""===e.route?t.route.substring(0,t.route.length-1):t.route+e.route)}),F},F.createChildRouter=function(){var e=b();return e.parent=F,e},F};return g=b(),g.explicitNavigation=!1,g.navigatingBack=!1,g.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},g.activate=function(t){return e.defer(function(n){if(p=n,g.options=e.extend({routeHandler:g.loadUrl},g.options,t),i.activate(g.options),i._hasPushState)for(var a=g.routes,r=a.length;r--;){var o=a[r];o.hash=o.hash.replace("#","")}s(document).delegate("a","click",function(e){if(i._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&g.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(g.explicitNavigation=!0,e.preventDefault(),i.navigate(t))}}else g.explicitNavigation=!0}),i.options.silent&&p&&(p.resolve(),p=null)}).promise()},g.deactivate=function(){i.deactivate()},g.install=function(){o.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var s=o.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var c=o.utils.unwrapObservable(s.router||a.router)||g;s.model=c.activeItem(),s.attached=c.attached,s.compositionComplete=c.compositionComplete,s.activate=!1}r.compose(e,s,i)}},o.virtualElements.allowedBindings.router=!0},g});
define('services/navigation',["plugins/router","services/branding"],function(e,t){function a(t){var a=t.hash;return-1!==a.indexOf("(/:id)")&&(a=a.replace("(/:id)","")),e.navigate("#"+a)}function n(e){i(e)}var r=ko.computed(function(){return e.activeInstruction()?e.activeInstruction():!0}),i=ko.observable(),o=ko.computed(function(){return t.currentBrand()}),s=ko.computed(function(){return e.navigationModel()}),c={currentBrand:o,currentRoute:r,currentSubRoute:i,setSubRoute:n,navRoutes:s,setRoute:a};return c});
define('viewmodels/authenticate',["services/session","config.routes","plugins/router","services/datacontext"],function(e,t,a,n){function r(t){e.runTests();var n=window.location.href.indexOf("#ut")>-1;return n?(a.navigate("#",{replace:!0,trigger:!1}),o(t)):!1}function i(){return n.primeData().then(function(){return a.navigate("home")})}function o(t){return n.getUserByUserToken(e.currentUser,t,!0),s=e.currentUser.subscribe(function(){return e.currentUser()?(n.createCalendarMocks(),e.setLocalStorageAndCookie(),s.dispose(),i()):void 0}),!1}var s,c={activate:r};return c});
define('viewmodels/home/index',["plugins/router","services/navigation","services/session","config.services","services/datacontext"],function(e,t,a,n,r){function i(){o()}function o(){r.getEntityList(c,d().EntityType,d().ResourcePath,null,null,!1)}var s=ko.observable(!1),c=ko.observableArray();ko.extenders.calculateShowingPatients=function(e){return e.subscribe(function(){console.log("Cohorts have checked or changed - ",c())}),e};var u=ko.computed(function(){var e=[];return ko.utils.arrayForEach(c(),function(t){t.isChecked=ko.observable().extend({calculateShowingPatients:!0}),e.push(t)}),e}),d=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),p={cohortPatientSelectPanelShowing:s,cohorts:c,activate:i,navigation:t,computedCohorts:u,title:"Home"};return p});
define('viewmodels/home/myhome/myhome',["services/session","services/datacontext","config.services"],function(e,t,a){function n(e,t,a,n,r){var i=this;i.events=e,i.header=t,i.editable=a,i.viewDate=n||ko.observable(new Date),i.defaultView=r}function r(){var e=this;e.title=ko.observable(),e.start=ko.observable(),e.end=ko.observable(),e.allDay=ko.observable(!1)}function i(){var e={id:T().length+1+"aaa",title:h().title(),start:h().start(),end:h().end(),allDay:h().allDay()};t.createCalendarEvent(e),c()}function o(){return y||(u(),y=!0),!0}function s(){$(".calendar").fullCalendar("render")}function c(){t.getEventsByUserId(T,e.currentUser().userId(),!1).then(function(){console.log("Got the events - ",T())})}function u(){function e(){}return t.getEntityList(b,f().EntityType,f().ResourcePath,null,null,!1,null,"sName").then(e),p=N.subscribe(function(){I([]),d()}),y=!0,!0}function d(e){var a={},a=v().Parameters;a.SearchFilter=e?e:null,t.getEntityList(I,v().EntityType,v().ResourcePath,null,N().iD(),!0,a).then(l)}function l(){}var p,y=!1,m=ko.observable(20),g=ko.observable(0),f=ko.computed(function(){var t=e.currentUser();return t?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),v=ko.computed(function(){var t=e.currentUser();return t?new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:g(),Take:m()}):""}),h=ko.observable(new r),T=ko.observableArray(),S={left:"title",right:"today agendaDay,month prev,next"},k=ko.observable(new Date),b=ko.observableArray(),N=ko.observable(),I=ko.observableArray(),E=new n(T,S,!1,k,"agendaDay"),P={activate:o,attached:s,newEvent:h,addEvent:i,cohortsList:b,selectedCohort:N,patientsList:I,calendarOptions:E,title:"Home"};return P});
define('viewmodels/home/population/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext"],function(e,t,a,n){function r(){}function i(){s||(s=!0)}var o=ko.observableArray(),s=!1;ko.observableArray(),ko.observableArray();var c=n.currentUser(),u={patients:o,activate:r,attached:i,currentUser:c,title:"index"};return u});
define('viewmodels/patients/index',["services/navigation","services/datacontext","services/session","config.services","plugins/router"],function(e,t,a,n,r){function i(){function e(){}return t.getEntityList(C,E().EntityType,E().ResourcePath,null,null,!1,null,"sName").then(e),$(!0),K(!0),k=w.subscribe(function(){N(!1),P(0),O()&&O(null),x([]),o()}),throttledFilterToken=A.subscribe(function(e){w()&&(N(!1),P(0),x([]),o(e))}),0!==a.currentUser().settings().length&&ko.utils.arrayForEach(a.currentUser().settings(),function(e){"TotalPatientCount"===e.Key&&S(parseInt(e.Value))}),B=!0,!0}function o(e){var a={},a=I().Parameters;a.SearchFilter=e?e:null,t.getEntityList(x,I().EntityType,I().ResourcePath,null,w().iD(),!0,a).then(s)}function s(){var e=x().length,t=0===P()?S():P()+S();t>e?N(!1):N(!0),P(t)}function c(){var e=!1,t=!1,a=!1;if(G()&&(ko.utils.arrayForEach(G().programs.peek(),function(t){ko.utils.arrayForEach(t.modules.peek(),function(t){ko.utils.arrayForEach(t.actions.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0),ko.utils.arrayForEach(t.steps.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0),ko.utils.arrayForEach(t.responses.peek(),function(t){t.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e=!0)})})})})}),G().goals.peek()&&ko.utils.arrayForEach(G().goals.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0),ko.utils.arrayForEach(e.tasks.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)}),ko.utils.arrayForEach(e.barriers.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)}),ko.utils.arrayForEach(e.interventions.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(a=!0)})}),G().notes.peek()&&ko.utils.arrayForEach(G().notes.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.text()&&(t=!0)}),e||t||a)){var n="You have unsaved - ";e&&(n+="\n-Action(s)"),t&&(n+="\n-Note(s)"),a&&(n+="\n-Goal(s)"),n+="\nPress OK to continue, or cancel to return to the patient.";var r=confirm(n);return r===!0?!0:($(!1),!1)}return!0}function u(e){function a(){$(!1),r.navigate("#patients/"+i,!1)}if(_()){var n=c();if(!n)return!1}var i;G()&&G()===e?$(!1):t&&(i=e.id?ko.unwrap(e.id):e,t.getEntityById(G,i,L().EntityType,L().ResourcePath,!0).then(a),t.getEntityList(null,D().EntityType,D().ResourcePath+i+"/Problems",null,null,!0),t.getEntityList(null,F().EntityType,F().ResourcePath+i+"/Programs",null,null,!0),t.getEntityList(null,U().EntityType,U().ResourcePath+i+"/Contact",null,null,!0),t.getEntityList(null,M().EntityType,M().ResourcePath+i+"/Goals",null,null,!0),t.getEntityList(null,z().EntityType,z().ResourcePath+i+"/Notes/25",null,null,!0),t.getEntityList(null,R().EntityType,R().ResourcePath+i+"/CareMembers",null,null,!0))}function d(){K(!K())}function l(){K(!1)}function p(){K(!0)}function y(){$(!1)}function m(){$(!0)}function g(e){return e?u(e):G()||($(!0),K(!0)),B||i(),!0}function f(){if(_()){var e=c();if(!e)return!1}return!0}function v(){K(!1),$(!1)}function h(){Q(!Q()),Q()&&(K(!0),$(!1)),!Q()}function T(){Q(!1)}function b(){var e={},a=O(),e=I().Parameters;e.SearchFilter=a?a:null;var n=ko.observableArray();t.getEntityList(n,I().EntityType,I().ResourcePath,null,w().iD(),!0,e).then(function(){x.push.apply(x,n()),s()})}var k,S=ko.observable(50),E=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),P=ko.observable(0),N=ko.observable(!1),I=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:P(),Take:S()}):""}),C=ko.observableArray(),w=ko.observable(),O=ko.observable(),A=ko.computed(O).extend({throttle:500}).extend({notify:"always"}),x=ko.observableArray(),D=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","PatientProblem"):""}),F=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Program"):""}),U=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),M=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Goal"):""}),z=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","Note"):""}),R=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","CareMember"):""}),L=ko.computed(function(){var e=a.currentUser();return e?new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"patient","Patient"):""}),B=!1,G=ko.observable(),Q=ko.observable(!1),$=ko.observable(!0),K=ko.observable(!0),_=ko.computed(t.hasChanges),V={patientsListFlyoutOpen:$,patientDataColumnOpen:K,canLoadMoreCohortPatients:N,cohortFilter:O,togglePatientsColumn:d,minimizePatientsDataColumn:l,maximizePatientsDataColumn:p,minimizePatientsListFlyoutColumn:y,maximizePatientsListFlyoutColumn:m,choosePatient:u,patientsList:x,selectedPatient:G,isEditing:Q,save:T,loadMoreCohortPatients:b,toggleEditing:h,cohortsList:C,selectedCohort:w,activate:g,deactivate:v,navigation:e,title:"Patients",canDeactivate:f,hasChanges:_};return V});
define('viewmodels/shell/shell',["plugins/router","services/navigation","services/session","services/bindings","services/datacontext","config.models","config.routes"],function(e,t,n,a,r,i,o){function s(){}function c(e){g(!1);var n=t.setRoute(e);n?console.log("The route has changed"):console.log("The route has NOT changed")}function u(){e.map(o.routes).buildNavigationModel();var a=window.location.href.indexOf("#ut")>-1;if(!a){var r=n.getUserFromSession();r&&d()}y=t.currentRoute.subscribe(function(){g(!1),t.currentRoute()&&t.currentRoute().config.settings&&0!==t.currentRoute().config.settings.pages.length&&t.currentSubRoute(t.currentRoute().config.settings.pages[0])}),e.activate()}function d(){return r.primeData().then(function(){})}function l(){g(!g())}function p(){f(!f())}function m(){e.navigateBack()}var y,g=ko.observable(!1),f=ko.observable(!1),v=ko.computed(r.loadingMessages),h=ko.computed(function(){var e=v(),t=[];return ko.utils.arrayForEach(e,function(e){t.length<3&&t.push(e)}),t}),b=ko.observable(!1),T=ko.computed(r.loadingMessagesShowing),k=ko.observable(),S=ko.computed(r.enums.alerts),P=ko.computed(r.enums.priorities),E=ko.computed(r.enums.genders),N=ko.computed(r.enums.states),I=ko.computed(r.enums.phoneTypes),C=ko.computed(r.enums.emailTypes),w=ko.computed(r.enums.daysOfWeek),O=ko.computed(r.enums.timesOfDay),A=ko.computed(r.enums.languages),x=ko.computed(r.enums.timeZones),D=ko.computed(r.enums.addressTypes),F=ko.computed(r.enums.communicationModes),M={showSideBar:g,showQuickAdd:f,compLoadingMessages:h,loadingMessagesShowing:T,currentModal:k,toggleNavVisibility:l,toggleQuickAddShowing:p,activate:u,goBack:m,attached:s,navigation:t,session:n,title:"Shell",alerts:S,priorities:P,genders:E,stateList:N,daysOfWeek:w,timesOfDay:O,languages:A,timeZones:x,phoneTypes:I,emailTypes:C,addressTypes:D,communicationModes:F,setRoute:c,userMenuOpen:b};return M});
define('viewmodels/patients/data/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","config.models"],function(e,t,a,n,r,i){function o(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function s(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),n.isOpen.subscribe(function(){N(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new o(t,n))})}function c(){f.subscribe(function(){r.checkIfAllAdditionalObservationsAreLoadedYet(f().id()),v(null)}),S(I()[0])}function u(){b||(f()&&r.checkIfAllAdditionalObservationsAreLoadedYet(f().id()),b=!0)}function d(){function e(){for(var e=f().observations().slice(0);e.length>0;){var t=e[0];t.entityAspect.setDeleted(),t.entityAspect.acceptChanges(),e.splice(0,1)}v.valueHasMutated()}r.saveObservations(f().id()).then(e)}function l(){var e=f().observations().slice(0),t=[];for(ko.utils.arrayForEach(e,function(e){e.startDate("clear")}),ko.utils.arrayForEach(e,function(e){ko.utils.arrayForEach(e.values(),function(e){e.value("")}),e.entityAspect.rejectChanges(),e.standard()||t.push(e)});t.length>0;){var a=t[0];a.entityAspect.setDeleted(),a.entityAspect.acceptChanges(),t.splice(0,1)}v.valueHasMutated()}function p(e){v(e)}function y(e){e.column.isOpen(!1)}function m(e){e.column.isOpen(!0)}function g(e){e.isFullScreen(!e.isFullScreen())}var f=ko.computed(function(){return i.selectedPatient()}),v=ko.observable(),h=ko.computed(r.enums.observationTypes),T=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},S=ko.observable(),k=ko.observableArray(),b=!1,I=ko.observableArray([new s("dataType",!1,[{name:"Data Type",path:"patients/patientswidgets/datatypewidget.html",open:!0}]),new s("dataEntry",!1,[{name:"Details",path:"patients/patientswidgets/dataentrywidget.html",open:!0}])]),N=ko.computed({read:function(){return S()},write:function(e){e.isOpen()?S(e):e===S()&&e===I()[0]?S(I()[1]):e===S()&&S(I()[0])}}),E={activate:c,attached:u,openColumn:S,columns:I,widgets:k,computedOpenColumn:N,selectedPatient:f,alphabeticalOrderSort:T,minimizeThisColumn:y,maximizeThisColumn:m,toggleFullScreen:g,activeDataType:v,setActiveDataType:p,dataTypes:h,saveDataEntry:d,cancelDataEntry:l,title:"index"};return E});
define('viewmodels/patients/careplan/index',["plugins/router","services/navigation","config.services","config.models","services/session","services/datacontext","viewmodels/patients/index","viewmodels/patients/data/index","viewmodels/shell/shell"],function(e,t,a,n,r,i,o,s,c){function u(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=k,e.showDropdown=!0,e.showActions=!1,e.canSave=ko.observable(!0)}function d(){E().activeDataType(null),s.saveDataEntry()}function l(){E().activeDataType(null),s.cancelDataEntry()}function p(){c.currentModal(P),I(!I())}function y(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function m(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),n.isOpen.subscribe(function(){D(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new y(t,n))})}function g(){k.subscribe(function(){O(null)}),C(x()[0])}function f(){A||(A=!0)}function v(e){e.column.isOpen(!1)}function h(e){e.column.isOpen(!0)}function T(e){e.isFullScreen(!e.isFullScreen())}var S=function(e,t){var a=e.elementStateModel().order(),n=t.elementStateModel().order(),r=e.name().toLowerCase(),i=t.name().toLowerCase();return a!=n?n>a?-1:a>n?1:0:i>r?-1:r>i?1:0},k=ko.computed(function(){return o.selectedPatient()}),b=ko.computed(function(){var e=[];return k()&&(e=k().programs(),e.sort(S)),e}),N=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},I=ko.observable(!1),E=ko.observable(new u),P=new n.modal("Data Entry",E,"viewmodels/templates/clinical.dataentry",I,d,l),C=ko.observable(),w=ko.observableArray(),O=ko.observable(),A=!1;ko.computed(function(){var e=r.currentUser();return e?new a.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"program","Program"):""});var x=ko.observableArray([new m("carePlan",!1,[{name:"Plan",path:"patients/patientswidgets/careplanwidget.html",open:!0}]),new m("actionDetails",!1,[{name:"Details",path:"patients/patientswidgets/actionwidget.html",open:!0}])]),D=ko.computed({read:function(){return C()},write:function(e){e.isOpen()?C(e):e===C()&&e===x()[0]?C(x()[1]):e===C()&&C(x()[0])}}),F={activate:g,attached:f,activeAction:O,openColumn:C,columns:x,widgets:w,computedOpenColumn:D,selectedPatient:k,selectedPatientsPrograms:b,programsSortTwo:S,alphabeticalOrderSort:N,minimizeThisColumn:v,maximizeThisColumn:h,toggleFullScreen:T,modalShowing:I,toggleModalShowing:p,title:"index"};return F});
define('viewmodels/patients/goals/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index"],function(e,t,a,n,r,i){function o(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function s(e,t,a){var n=this;n.name=ko.observable(e),n.widgets=ko.observableArray(),n.isOpen=ko.observable(t),$.each(a,function(e,t){n.widgets.push(new o(t,n))})}function c(){function e(e){var t=e.results[0];t.patientId(p().id()),t.statusId(1),t.startDate(new Date),t.isNew(!0),m(t)}r.initializeEntity(h,"Goal",p().id()).then(e),v(!0)}function u(){m(null),g(!1),v(!1)}function d(){p.subscribe(function(){m(null),g(!1),v(!1)})}function l(){f||(f=!0)}var p=ko.computed(function(){return i.selectedPatient()}),y=ko.observableArray(),m=ko.observable(),g=ko.observable(!0),f=!1,v=ko.observable(!1),h=ko.observable();ko.computed(function(){var e=n.currentUser();return e?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"goal","Goal"):""});var T=ko.observableArray([new s("goals",!0,[{name:"Goals",path:"patients/patientswidgets/goalswidget.html",open:!0}]),new s("goalDetails",!1,[{name:"Details",path:"patients/patientswidgets/goaldetailwidget.html",open:!1}])]),S={activate:d,attached:l,activeGoal:m,isEditing:v,sliderOpen:g,columns:T,widgets:y,selectedPatient:p,closeSlider:u,addGoal:c,title:"Goals"};return S});
define('viewmodels/patients/history/index',["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","config.models"],function(e,t,a,n,r,i){function o(e,t){var a=this;a.name=ko.observable(e.name),a.path=ko.observable(e.path),a.isOpen=ko.observable(e.open),a.column=t,a.isFullScreen=ko.observable(!1)}function s(e,t,a){var n=this;n.name=ko.observable(e),n.isOpen=ko.observable(t).extend({notify:"always"}),n.isOpen.subscribe(function(){C(n)}),n.widgets=ko.observableArray(),$.each(a,function(e,t){n.widgets.push(new o(t,n))})}function c(){if(T()){var e=b().slice(0).sort(S);e=e.slice(0,25),d(e)}}function u(e){var t=this;t.Name=ko.observable(e),t.Notes=ko.observableArray()}function d(e){k([]),ko.utils.arrayForEach(e,function(e){var t=e.localDate();if(moment(t).isValid()){var a=ko.utils.arrayFirst(k(),function(e){return e.Name()===t});a||(a=new u(t),k.push(a)),a.Notes.push(e)}})}function l(){I(P()[0]),c()}function p(){E||(E=!0)}function y(){N&&N.valueHasMutated()}function m(e){N(e)}function g(e){I(e)}function f(e){e.column.isOpen(!1)}function v(e){e.column.isOpen(!0)}function h(e){e.isFullScreen(!e.isFullScreen())}var T=ko.computed(function(){return i.selectedPatient()}),S=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},b=ko.computed(function(){var e=[];return T()&&(e=T().notes()),e});b.subscribe(function(){c()});var k=ko.observableArray(),N=ko.observable(),I=ko.observable(),E=!1,P=ko.observableArray([new s("historyList",!1,[{name:"History",path:"patients/patientswidgets/historylistwidget.html",open:!0}]),new s("details",!1,[{name:"Details",path:"patients/patientswidgets/historydetailwidget.html",open:!0}])]),C=ko.computed({read:function(){return I()},write:function(e){e.isOpen()?I(e):e===I()&&e===P()[0]?I(P()[1]):e===I()&&I(P()[0])}}),w={activate:l,selectedPatient:T,columns:P,computedOpenColumn:C,activeNote:N,setActiveNote:m,setOpenColumn:g,minimizeThisColumn:f,maximizeThisColumn:v,toggleFullScreen:h,groups:k,notes:b,attached:p,compositionComplete:y,title:"index"};return w});
define('viewmodels/patients/overview/index',["plugins/router"],function(e){function t(){console.log("Overview activated")}function a(){e.navigateBack()}var n={activate:t,goBack:a,title:"index"};return n});
define('viewmodels/patients/patientscolumns/patientdata',[],function(){function e(){}var t={activate:e};return t});
define('viewmodels/patients/patientssections/additionalobservations',["config.models","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=function(){};return r.prototype.addNewObservation=function(){function e(){t.additionalObservationsToEnter.push(n()),t.selectedAdditionalObservation(null)}var t=this,n=ko.observable(),r=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});r&&a.initializeObservation(n,"Observation",r.id(),r.typeId(),t.selectedPatient().id()).then(e)},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.additionalObservations=ko.observableArray(),t.additionalObservationsToEnter=ko.observableArray(),t.selectedAdditionalObservation=ko.observable(),t.canAdd=ko.computed(function(){var e=!1;if(t.selectedAdditionalObservation()){var a=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});a&&(e=!0)}return e}),t.addtlObsBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,a,n){var r=$.Deferred();r.done(function(){n(this)});var i=e.toLowerCase(),o=t.additionalObservations().filter(function(e){return!!~e.name().toLowerCase().indexOf(i)});return r.resolveWith(o),r.promise()}}}),t.addtlObsBloodhound.initialize(),t.getAdditionalObservationsById=function(){if(t.activeDataType()){var e=t.selectedPatient().observations(),a=[];ko.utils.arrayForEach(e,function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!1&&a.push(e)}),t.additionalObservationsToEnter(a)}},t.activeDataType.subscribe(function(){t.selectedAdditionalObservation(null),t.additionalObservations([]),t.getAdditionalObservations(),t.getAdditionalObservationsById()}),t.addNew=function(e){function n(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().entityAspect.acceptChanges();var a=t.additionalObservationsToEnter.indexOf(e);t.additionalObservationsToEnter.splice(a+1,0,r()),r(null)}var r=ko.observable();return moment(e.startDate()).isValid()&&e.computedValue().value()?a.initializeObservation(r,"Observation",e.observationId(),e.typeId(),e.patientId()).then(n):void 0}},r.prototype.attached=function(){var e=this;0===e.additionalObservations().length&&(e.getAdditionalObservations(),e.getAdditionalObservationsById())},r.prototype.getAdditionalObservations=function(){function e(){r.addtlObsBloodhound.transport.constructor.resetCache()}var r=this;if(r.selectedPatient()&&r.activeDataType()){var i=new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"patient/"+r.selectedPatient().id()+"/Observation/Type/"+r.activeDataType().id()+"/MatchLibrary/","AdditionalObservation");return a.getEntityList(r.additionalObservations,"AdditionalObservation",i.ResourcePath,"typeId",r.activeDataType().id(),!1).then(e)}},r});
define('viewmodels/patients/patientssections/backgroundsection',["config.models","services/datacontext","viewmodels/shell/shell"],function(e,t,a){var n=function(){};return n.prototype.activate=function(n){var r=this;r.settings=n,r.selectedPatient=r.settings.selectedPatient,r.background=r.selectedPatient.background,r.backgroundModalShowing=ko.observable(!1),r.saveBackground=function(){t.saveBackground(r.selectedPatient)},r.cancelBackground=function(){r.selectedPatient.entityAspect.rejectChanges()},r.modal=new e.modal("Edit Background",r.selectedPatient,"templates/background.html",r.backgroundModalShowing,r.saveBackground,r.cancelBackground),r.isOpen=ko.observable(!0),r.isEditing=ko.observable(!1),r.isExpanded=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.backgroundModalShowing(!1);else{a.currentModal(r.modal),r.backgroundModalShowing(!0);var e=r.backgroundModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)}},n.prototype.attached=function(){},n});
define('viewmodels/patients/patientssections/basicobservations',["config.models","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=function(){var e=this;e.basicObservations=ko.observableArray(),e.observationsEndPoint=ko.computed(function(){var e=n.currentUser();return e?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","Observation"):""})};return r.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.getBasicObservationsById=function(){function e(){}if(t.activeDataType()){var n=t.selectedPatient().observations(),r=[];ko.utils.arrayForEach(n,function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!0&&r.push(e)}),0===r.length?a.getEntityList(t.basicObservations,t.observationsEndPoint().EntityType,t.observationsEndPoint().ResourcePath+t.selectedPatient().id()+"/Observation","typeId",t.activeDataType().id(),!0).then(e):t.basicObservations(r)}},t.activeDataType.subscribe(function(){t.basicObservations([]),t.getBasicObservationsById()}),0===t.basicObservations().length&&t.getBasicObservationsById(),t.computedBasicObservations=ko.computed(function(){var e=t.basicObservations();return e.sort(t.alphabeticalNameSort)}),t.addNew=function(e){function n(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().entityAspect.acceptChanges();var a=t.basicObservations.indexOf(e);t.basicObservations.splice(a+1,0,r()),r(null)}var r=ko.observable();moment(e.startDate()).isValid()&&e.computedValue().value()&&a.initializeObservation(r,"Observation",e.observationId(),e.typeId(),e.patientId()).then(n)}},r.prototype.attached=function(){},r});
define('viewmodels/patients/patientssections/careteamsection',["config.models","services/datacontext","services/session"],function(e,t,a){var n=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},r=function(){};return r.prototype.activate=function(e){var t=this;t.selectedPatient=e.selectedPatient,t.careMembers=t.selectedPatient.careMembers,t.isOpen=ko.observable(!0),t.primaryCareTeam=ko.computed(function(){var e=[],a=t.careMembers().sort(n);return ko.utils.arrayForEach(a,function(t){t.primary()&&e.push(t)}),e}),t.secondaryCareTeam=ko.computed(function(){var e=[],a=t.careMembers().sort(n);return ko.utils.arrayForEach(a,function(t){t.primary()||e.push(t)}),e})},r.prototype.canReassignToMe=function(){var e=this;return e.primaryCareTeam().length>0?e.primaryCareTeam().length>0&&e.primaryCareTeam()[0].contactId()!==a.currentUser().userId():!1},r.prototype.assignToMe=function(){var e=this,n=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(n){var r=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a.currentUser().userId()}),i=t.createEntity("CareMember",{id:-1,patientId:e.selectedPatient.id(),preferredName:r.preferredName(),typeId:n.id(),gender:"n",primary:!0,contactId:a.currentUser().userId()});t.saveCareMember(i,"Insert")}},r.prototype.reassignToMe=function(){var e=this,n=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(n){var r=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a.currentUser().userId()}),i=ko.utils.arrayFirst(e.selectedPatient.careMembers(),function(e){return e.primary()});i.preferredName(r.preferredName()),i.gender("n"),i.contactId(r.id()),t.saveCareMember(i,"Update")}},r.prototype.attached=function(){},r});
define('viewmodels/patients/patientssections/communicationssection',["config.models","services/datacontext","viewmodels/shell/shell"],function(e,t,a){var n=function(){};return n.prototype.activate=function(t){var n=this;n.contactCard=t.contactCard,n.communicationModalShowing=ko.observable(!1),n.primaryCommunications=ko.computed(function(){var e=[],t=n.contactCard();if(t){var a=ko.utils.arrayFirst(t.phones(),function(e){return e.phonePreferred()});a&&(a.template="templates/phone.html",e.push(a));var r=ko.utils.arrayFirst(t.phones(),function(e){return e.textPreferred()});r&&r!==a&&(r.template="templates/phone.html",e.push(r));var i=ko.utils.arrayFirst(t.emails(),function(e){return e.preferred()});i&&(i.template="templates/email.html",e.push(i));var o=ko.utils.arrayFirst(t.addresses(),function(e){return e.preferred()});o&&(o.template="templates/address.html",e.push(o))}return e}),n.secondaryCommunications=ko.computed(function(){var e=[],t=n.contactCard();return t&&(t.phoneOptedOut()||ko.utils.arrayForEach(t.phones(),function(t){t.phonePreferred()||t.textPreferred()||t.optOut()||(t.template="templates/phone.html",e.push(t))}),t.phoneOptedOut()&&!t.textOptedOut()&&ko.utils.arrayForEach(t.phones(),function(t){t.textPreferred()||!t.isText()||t.optOut||(t.template="templates/phone.html",e.push(t))}),t.emailOptedOut()||ko.utils.arrayForEach(t.emails(),function(t){t.preferred()||t.optOut()||(t.template="templates/email.html",e.push(t))}),t.addressOptedOut()||ko.utils.arrayForEach(t.addresses(),function(t){t.preferred()||t.optOut()||(t.template="templates/address.html",e.push(t))})),e}),n.modal=new e.modal("Edit Communication Preferences",n.contactCard,"templates/contactcard.html",n.communicationModalShowing),n.isOpen=ko.observable(!0),n.isEditing=ko.observable(!1),n.toggleEditing=function(){if(n.isEditing())n.communicationModalShowing(!1);else{a.currentModal(n.modal),n.communicationModalShowing(!0);var e=n.communicationModalShowing.subscribe(function(){n.isEditing(!1),e.dispose()})}n.isEditing(!n.isEditing()),n.isOpen(!0)}},n.prototype.attached=function(){},n});
define('viewmodels/patients/patientssections/demographicssection',["durandal/app","viewmodels/shell/shell","config.models","services/datacontext"],function(e,t,a,n){var r=function(){};return r.prototype.activate=function(e){var r=this;r.settings=e,r.selectedPatient=r.settings.selectedPatient,r.editModalShowing=ko.observable(!1),r.modal=new a.modal("Edit Patient",r.selectedPatient,"templates/patient.html",r.editModalShowing),r.isOpen=ko.observable(!0),r.isEditing=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.editModalShowing(!1);else{t.currentModal(r.modal),r.editModalShowing(!0);var e=r.editModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)},r.toggleFlagged=function(){var e=r.selectedPatient.flagged();e=!e,r.selectedPatient.flagged(e);var t=e?1:0;n.saveChangesToPatientProperty(r.selectedPatient,"flagged",t,[])},r.showFullSSN=function(){function e(e){alert("Full SSN - "+e.SSN)}n.getFullSSN(r.selectedPatient.id()).then(e)},r.canViewFullSSN=ko.computed(function(){return!0})},r.prototype.attached=function(){},r});
define('viewmodels/patients/patientssections/focusareassection',["config.models","services/datacontext","services/session"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.problems=e.problems,t.isExpanded=ko.observable(!1),t.primaryProblems=ko.computed(function(){var e=[],a=t.problems().sort(t.alphabeticalSort),n=!t.isExpanded();return ko.utils.arrayForEach(a,function(t){"1"===t.level()&&(e.length<5||!n)&&e.push(t)}),e}),t.secondaryProblems=ko.computed(function(){var e=[],a=t.problems().sort(t.alphabeticalSort),n=!t.isExpanded();return ko.utils.arrayForEach(a,function(t){"2"===t.level()&&(e.length<5||!n)&&e.push(t)}),e}),t.isOpen=ko.observable(!0),t.isFullScreen=ko.observable(!1),t.isEditing=ko.observable(!1),t.toggleEditing=function(){t.isEditing(!t.isEditing()),t.isOpen(!0)}},e.prototype.attached=function(){},e});
define('viewmodels/patients/patientssections/goaldetailsection',["config.models","config.services","services/datacontext","services/session"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalDescriptionSort=function(e,t){return e.description()==t.description()?e.description()>t.description()?1:-1:e.description()>t.description()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.activeGoal=t.settings.activeGoal},e.prototype.attached=function(){},e});
define('viewmodels/patients/patientssections/goaleditsection',["config.models","config.services","services/datacontext","services/session","viewmodels/patients/goals/index"],function(e,t,a,n,r){var i=function(){};return i.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.activeGoal=t.settings.activeGoal,t.isEditing=r.isEditing,t.focusAreas=a.enums.focusAreas,t.sources=a.enums.sources,t.goalTypes=a.enums.goalTypes,t.goalTaskStatuses=a.enums.goalTaskStatuses,t.barrierStatuses=a.enums.barrierStatuses,t.computedBarriers=ko.computed(t.activeGoal.barriers),t.interventionStatuses=a.enums.interventionStatuses,t.goalTypes=a.enums.goalTypes,t.barrierCategories=a.enums.barrierCategories,t.interventionCategories=a.enums.interventionCategories,t.careManagers=a.enums.careManagers,t.availablePrograms=ko.computed(function(){var e=[];if(t.activeGoal.patient()){var a=t.activeGoal.patient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(a,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.attributesSectionOpen=ko.observable(!0),t.barriersSectionOpen=ko.observable(!0),t.tasksSectionOpen=ko.observable(!0),t.interventionsSectionOpen=ko.observable(!0),t.selectedFocusAreas=ko.observableArray(),t.addBarrier=function(e){t.barriersSectionOpen(!0),t.addEntity("Barrier",e)},t.addTask=function(e){var a=new Date;t.tasksSectionOpen(!0),t.addEntity("Task",e,a)},t.addIntervention=function(e){t.interventionsSectionOpen(!0);var a=new Date;t.addEntity("Intervention",e,a,n.currentUser().userId())},t.removeBarrier=function(e){ko.utils.arrayForEach(e.goal().tasks(),function(t){var a=ko.utils.arrayFirst(t.barrierIds(),function(t){return t.id()===e.id()});a&&t.barrierIds.remove(a)}),ko.utils.arrayForEach(e.goal().interventions(),function(t){var a=ko.utils.arrayFirst(t.barrierIds(),function(t){return t.id()===e.id()});a&&t.barrierIds.remove(a)}),e.entityAspect.rejectChanges(),e&&e.goal()&&e.goal().barriers.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)},t.removeTask=function(e){e.entityAspect.rejectChanges(),e&&e.goal()&&e.goal().tasks.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)},t.removeIntervention=function(e){e.entityAspect.rejectChanges(),e&&e.goal()&&e.goal().interventions.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)},t.cancelAdd=function(e){e.entityAspect.rejectChanges(),e.goal(null),e.patientGoalId(null)},t.canSave=ko.computed(function(){return t.activeGoal.name()&&t.activeGoal.sourceId()}),t.save=function(e){a.saveGoal(e),r.activeGoal(null),r.isEditing(!1)},t.cancel=function(e){e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.tasks(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.barriers(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.interventions(),function(e){e.entityAspect.rejectChanges()}),r.activeGoal(null),r.isEditing(!1)}},i.prototype.addEntity=function(e,t,n,r){function i(t){var i=t.httpResponse.data.Id;if(i){var o={};o.id=i,o.patientGoalId=c,o.statusId=1,n&&(o.startDate=n),r&&(o.assignedToId=r),a.createEntity(e,o)}else{var s=t.results[0];s.startDate(new Date),s.statusId(1),s.patientGoalId(c)}}var o=this,s=o.activeGoal.patientId(),c=t.id();a.initializeEntity(null,e,s,c).then(i)},i.prototype.attached=function(){},i});
define('viewmodels/patients/patientssections/goalssection',["config.models","config.services","services/datacontext","services/session","viewmodels/patients/goals/index"],function(e,t,a,n,r){var i=ko.computed(function(){var e=n.currentUser();return e?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","Goal"):""}),o=function(){};return o.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.activeGoal=t.settings.activeGoal,t.setActiveGoal=function(e){t.isEditing()||(t.getGoalDetails(e),t.activeGoal(e))},t.isEditing=r.isEditing,t.editGoal=function(e){t.isEditing()||(t.getGoalDetails(e),t.isEditing(!0),t.activeGoal(e))},t.deleteGoal=function(e){var n=confirm("You are about to delete a goal.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(t.activeGoal(null),t.isEditing(!1),a.deleteGoal(e),void 0)}},o.prototype.getGoalDetails=function(e){var t=e.id(),n=e.patientId();a.getEntityById(null,t,i().EntityType,i().ResourcePath+n+"/Goal/",!0)},o.prototype.attached=function(){},o});
define('viewmodels/patients/patientssections/notessection',["config.models","config.services","services/datacontext","services/session"],function(e,t,a){var n=function(){};return n.prototype.activate=function(e){var t=this;t.settings=e,t.group=ko.observable(t.settings.group),t.activeNote=t.settings.activeNote,t.setActiveNote=function(e){t.activeNote(e)},t.deleteNote=function(e){var n=confirm("You are about to delete a note.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(t.activeNote()===e&&t.activeNote(null),a.deleteNote(e),void 0)},t.isOpen=ko.observable(!0)},n.prototype.attached=function(){},n});
define('viewmodels/patients/patientssections/programssection',["config.models","config.services","services/datacontext","services/session"],function(e,t,a,n){var r=function(){};return r.prototype.activate=function(e){var r=this;r.settings=e,r.program=ko.observable(r.settings.program),r.activeAction=r.settings.activeAction,r.setActiveAction=function(e){e.enabled()===!0&&r.activeAction(e)},r.isOpen=ko.observable(!1),0!==r.program().modules().length&&r.isOpen(!0),r.isOpen.subscribe(function(){r.isOpen()&&0===r.program().modules().length&&a.getMelsEntityById(r.program,null,r.contractProgramsEndPoint().EntityType,r.contractProgramsEndPoint().ResourcePath,!0,null).then(function(){patientsListFlyoutOpen(!1)})}),r.isFullScreen=ko.observable(!1),r.contractProgramsEndPoint=ko.computed(function(){var e=n.currentUser(),a=r.program();return e&&a?new t.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient/"+a.patientId()+"/Program/"+a.id(),"Program"):""}),r.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}},r.prototype.attached=function(){},r});
define('viewmodels/patients/patientswidgets/actionwidget',["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.activeAction=t.settings.data.column.activeAction,t.column=t.settings.data.column,t.content=t.settings.data.content,t.isOpen=ko.observable(!1),t.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.isOpen(!t.isOpen())},t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.toggleColumn=function(){t.column.isOpen(!t.column.isOpen())}},t.prototype.attached=function(){},t.prototype.completeAction=function(t){e.saveAction(t)},t});
define('viewmodels/populations/index',["plugins/router"],function(e){function t(){}function a(){e.navigateBack()}var n={activate:t,goBack:a,title:"populations"};return n});
define('viewmodels/programdesigner/designer/index',["services/navigation"],function(e){function t(){}function a(){r||(r=!0)}var n=ko.observableArray(),r=!1,i=ko.computed(function(){var t=this;return t.columns=e.currentSubRoute().columns,ko.utils.arrayForEach(t.columns,function(e){var t=[];ko.utils.arrayForEach(e.widgets,function(a){a.column=e,t.push(a)}),e.activeWidgets=ko.observableArray(t)}),t.columns}),o=ko.observable(),s={activate:t,attached:a,computedOpenColumn:o,columns:i,widgets:n,title:"index"};return s});
define('viewmodels/programdesigner/index',["services/session","services/navigation"],function(e,t){function a(){return o||n(),!0}function n(){return!0}ko.computed(function(){var t=e.currentUser();return t?"NG/1.0/Contract/"+e.currentUser().contracts()[0].number()+"/program/":""});var r=ko.observableArray(),i=ko.observable(),o=!1,s=ko.observable(!1),c={modulesListFlyoutOpen:s,modulesList:r,currentModule:i,navigation:t,activate:a,title:"Program Designer"};return c});
define('viewmodels/programdesigner/widgets/modulewidget',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e});
define('viewmodels/programdesigner/widgets/programwidget',[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e});
define('viewmodels/shell/quickadd/assign',["config.models","config.services","services/datacontext","services/session"],function(e,t,n,a){function r(e,t){var n=this;n.Id=ko.observable(e),n.Name=ko.observable(t)}var i=function(){var e=this;e.categories=ko.observableArray(),e.selectedCategory=ko.observable(),e.contractPrograms=ko.observableArray(),e.selectedProgram=ko.observable(),e.isSaving=ko.observable()};return i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),i.prototype.createCategories=function(){var e=this;e.categories.push(new r(1,"Programs")),e.selectedCategory(e.categories()[0])},i.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&n.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:a.currentUser().contracts()[0].number()},"name")},i.prototype.activate=function(t){var a=this;a.settings=t,a.selectedPatient=t.data.selectedPatient,a.isShowing=a.settings.data.isShowing,a.cancelAssign=function(){a.selectedProgram(null),a.isShowing(!1)},a.startDate=ko.observable(new moment),a.saveAssign=function(){function t(){a.isShowing(!1),a.isSaving(!1),a.selectedProgram(null)}a.selectedProgram()&&(a.isSaving(!0),n.saveChangesToPatientProperty(a.selectedPatient,"Programs",null,[new e.Parameter("ContractProgramId",a.selectedProgram().id())]).then(t))},a.canSave=ko.computed(function(){return a.selectedProgram()&&!a.isSaving()}),a.selectedCategory.subscribe(function(){a.getContractProgramsByCategory()}),a.createCategories()},i.prototype.attached=function(){},i});
define('viewmodels/shell/quickadd/notes',["config.models","config.services","services/datacontext","services/session","services/navigation","viewmodels/patients/history/index"],function(e,t,n,a,r,i){var o=function(){var e=this;e.newNote=ko.observable(),e.isSaving=ko.observable()};return o.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),o.prototype.createNewNote=function(){var e=this;e.newNote(n.createEntity("Note",{id:e.thisNoteId(),patientId:e.selectedPatient().id()}))},o.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&n.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:a.currentUser().contracts()[0].number()},"name")},o.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},o.prototype.alphabeticalDateSort=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},o.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=e.data.selectedPatient,t.thisNoteId=ko.computed(function(){return-1*t.selectedPatient().notes().length}),t.isShowing=t.settings.data.isShowing,t.cancel=function(){t.newNote().entityAspect.rejectChanges(),t.createNewNote(),t.isShowing(!1)},t.availablePrograms=ko.computed(function(){var e=[];if(t.selectedPatient()){var n=t.selectedPatient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(n,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.startDate=ko.observable(new moment),t.save=function(){function e(){t.isShowing(!1),t.newNote(null),t.isSaving(!1),t.createNewNote()}t.newNote()&&(t.newNote().patientId(t.selectedPatient().id()),t.isSaving(!0),t.newNote().createdById(a.currentUser().userId()),t.newNote().createdOn(new Date),n.saveNote(t.newNote()).then(e))},t.selectedPatient.subscribe(function(){t.cancel(),i.activeNote(null)}),t.viewDetails=function(e){t.isShowing(!1);var n=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(n),i.activeNote(e)},t.gotoHistory=function(){t.isShowing(!1);var e=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(e)},t.canSave=ko.computed(function(){return t.newNote()&&!t.isSaving()&&t.newNote().text()}),t.createNewNote(),t.lastThreeNotes=ko.computed(function(){var e=t.selectedPatient().notes().sort(t.alphabeticalDateSort),n=[];return ko.utils.arrayForEach(e,function(e){n.length<3&&!e.entityAspect.entityState.isAdded()&&n.push(e)}),n})},o.prototype.attached=function(){},o});
define('viewmodels/shell/quickadd/quickaddpopover',["config.models","viewmodels/patients/index"],function(e,t){var n=function(){var e=this;e.selectedPatient=ko.computed(t.selectedPatient)};return n.prototype.createQuickAddSections=function(){var t=this;t.quickAddSections.push(new e.quickAddSection("notes","Notes","icon-notes","viewmodels/shell/quickadd/notes")),t.quickAddSections.push(new e.quickAddSection("assign","Assign Patient","icon-assign-patient","viewmodels/shell/quickadd/assign")),t.activeQuickAddTab(t.quickAddSections()[0])},n.prototype.activate=function(e){var t=this;t.settings=e,t.isShowing=ko.observable(!1),t.quickAddSections=ko.observableArray(),t.activeQuickAddTab=ko.observable(),t.createQuickAddSections(),t.setActiveTab=function(e){t.activeQuickAddTab(e)},t.patientIsSelected=ko.computed(function(){return t.selectedPatient()?!0:!1})},n.prototype.attached=function(){},n});
define('viewmodels/shell/sidebar',[],function(){});
define('viewmodels/templates/clinical.dataentry',["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(t){var n=this;n.settings=t,n.activeDataType=n.settings.activeDataType,n.showing=ko.computed(function(){return!!n.activeDataType()}),n.selectedPatient=n.settings.selectedPatient,n.showDropdown=n.settings.showDropdown||!1,n.showActions=n.settings.hasOwnProperty("showActions")?n.settings.showActions:n.showing,n.saveDataEntry=n.settings.saveDataEntry||function(){return!1},n.cancelDataEntry=n.settings.cancelDataEntry||function(){return!1},n.dataTypes=ko.computed(e.enums.observationTypes),n.computedActiveDataType=ko.computed({read:function(){return n.activeDataType()},write:function(e){n.activeDataType(e)}})},t.prototype.attached=function(){},t});
define('viewmodels/templates/observation.add',["services/datacontext"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.addNew=t.settings.addNew,t.canAdd=ko.computed(function(){return t.observation&&t.observation.computedValue()&&t.observation.startDate()?!!t.observation.computedValue().value()&&moment(t.observation.startDate()).isValid():void 0})},e.prototype.attached=function(){},e});
define('viewmodels/templates/observation.bloodpressure.add',["services/datacontext"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.diastolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Diast")});return e?e:null}),t.systolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Sys")});return e?e:null}),t.customBPString=ko.computed(function(){var e="";if(t.diastolicObservationValue()&&t.systolicObservationValue()){var n=t.diastolicObservationValue().previousValue().value(),a=t.systolicObservationValue().previousValue().value(),r=n&&a?a+"/"+n:"",i=moment(t.diastolicObservationValue().previousValue().startDate()).format("MM/DD/YYYY"),o=t.diastolicObservationValue().previousValue().unit(),s=t.diastolicObservationValue().previousValue().source();e=r?r+" "+o:"",e=moment(i).isValid()?e?e+" on "+i:i:e,e=s?e+" ("+s+")":e}return e}),t.canAdd=ko.computed(function(){return t.observation&&t.diastolicObservationValue()&&t.systolicObservationValue()?!!t.diastolicObservationValue().value()&&!!t.systolicObservationValue().value()&&moment(t.observation.startDate()).isValid():!1}),t.addNew=t.settings.addNew},e.prototype.attached=function(){},e});
!function(){window.Visualization=function(){function e(e,t,n){var a=this;this.selector=e,this.patients=t,this.rad_prop=n,this.svg=d3.select(this.selector),this.color_scale=d3.scale.category10(),this.dynamic_radius=!0,this.filters=$("#filters :checkbox"),this.height=d3.min([$(this.svg.node()).parents(".body").width(),$(this.svg.node()).parents(".body").height()]),this.padding=15,this.show_backgrounds=!0,this.width=this.height,this.force=d3.layout.force().charge(-70).gravity(.05).size([this.width,this.height]).on("tick",function(e){return a.tick(e)}),this.filters.change(function(){return a.data_grouping()}),this.filters.each(function(e,t){return $(t).parents("td").next("td").find(".indicator").css("background",a.color_scale(e))}),this.chart_setup()}return e.prototype.chart_setup=function(){var e=this;return this.patients.forEach(function(t){return t.radius=t[e.rad_prop]+5}),this.svg.attr("height",this.height).attr("width",this.width),this.svg.append("g").attr("class","placeholders"),this.svg.append("g").attr("class","nodes"),this.nodes=this.svg.select("g.nodes").selectAll("circle.node").data(this.patients).enter().append("svg:circle").attr("class","node").attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).style("fill",function(){return e.color_scale(0)}).style("opacity","1"),this.data_grouping()},e.prototype.data_grouping=function(){var e,t,n,a=this;return e=$("#filters :checkbox:checked"),this.filters.not(":checked").prop("disabled",e.length>2),e.prop("disabled",e.length<2),$.uniform.update(this.filters),this.overlaps=[],n=function(e){var t;return t=!1,_.pluck(a.overlaps,"sets").forEach(function(n){return d3.max(n)===d3.max(e)&&d3.min(n)===d3.min(e)?t=!0:void 0}),t},t=function(e){var t;return t=0,a.sets.forEach(function(n){return n.conditional(e)?t++:void 0}),t===a.sets.length},this.sets=$.map(e,function(e){var t,n,r;return e=$(e),t=function(){switch(e.data("comparator")){case"contains":return function(t){return-1!==t[e.data("key")].indexOf(parseInt(e.val()))};case"equality":return function(t){return t[e.data("key")]};case"threshold":return function(t){return t[e.data("key")]>e.val()}}}(),r=a.patients.filter(function(e){return t(e)}),n={id:e.val(),conditional:t,patients:r,size:r.length,color:e.parents("td").next("td").find(".indicator").css("background-color")}}),this.sets.forEach(function(e,r){return a.sets.filter(function(e,t){return t!==r}).forEach(function(i){var o,s;return o=e.patients.filter(function(e){return i.conditional(e)}),a.sets.length>2&&(a.central_patients=a.patients.filter(function(e){return t(e)}),o=_.union(o,a.central_patients)),e.patients=_.difference(e.patients,o),i.patients=_.difference(i.patients,o),s=[r,a.sets.indexOf(i)].sort(),n(s)?void 0:a.overlaps.push({patients:o,sets:s,size:o.length,color:a.color_mixer([e.color,i.color])})})}),_.isEmpty(this.overlaps)?(this.sets[0].x=this.width/2,this.sets[0].y=this.height/2,this.sets[0].radius=d3.min([this.width,this.height])/2):(this.sets=venn.venn(this.sets,this.overlaps,{layoutFunction:venn.classicMDSLayout}),this.sets=venn.scaleSolution(this.sets,this.width,this.height,this.padding)),this.patient_attractions()},e.prototype.patient_attractions=function(){var e,t=this;return this.sets.forEach(function(e){var n;return n={x:e.x,y:e.y},_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=[e],t.cluster=e,t.color=e.color})}),this.overlaps.forEach(function(e){return e.groups=[t.sets[e.sets[0]],t.sets[e.sets[1]]],_.extend(e,t.lens_center(e.groups[0],e.groups[1])),_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=e.groups,t.cluster=e,t.color=e.color})}),this.unscoped_patients=_.difference(this.patients,_.flatten(_.pluck(this.sets,"patients")),_.flatten(_.pluck(this.overlaps,"patients"))),this.unscoped_patients.forEach(function(e){return e.bounds=void 0}),_.where(this.patients,{bounds:void 0}).forEach(function(e){return e.cluster={x:-1e3,y:-1e3}}),this.overlaps.length>2&&(e=this.circumcenter(),this.central_patients.forEach(function(n){return n.bounds=t.sets,n.cluster=e,n.color=t.color_mixer(_.pluck(t.sets,"color"))})),this.determine_radius()},e.prototype.determine_radius=function(){var e,t;return e=d3.sum(this.sets,function(e){return venn.circleArea(e.radius,e.radius)}),t=d3.sum(this.patients,function(e){return e[this.rad_prop]}),this.radius=Math.sqrt(e/t/Math.PI),this.node_animations()},e.prototype.node_animations=function(){var e=this;return this.show_backgrounds&&this.placeholders(),this.nodes.data(this.patients),this.force.nodes(this.patients).start(),this.filter_patients(),this.svg.on("click",function(){var t,n,a,r;return a=500,n=d3.select(d3.event.target).datum(),e.nodes.filter(function(e){return e===n}).size()>0?(t=e.nodes.filter(function(e){return e.cluster===n.cluster}),t.transition().duration(a).style("opacity","1"),r=e.nodes.filter(function(e){return e.cluster!==n.cluster}),r.transition().duration(a).style("opacity","0.25"),e.filter_patients(r.data())):(e.nodes.transition().duration(a).style("opacity","1"),e.filter_patients())})},e.prototype.tick=function(e){var t,n,a=this;return n=d3.geom.quadtree(this.patients),t=.1*e.alpha,this.patients.forEach(function(e){return e.radius=a.dynamic_radius?2*e[a.rad_prop]+4:a.radius,e.x+=(e.cluster.x-e.x)*t,e.y+=(e.cluster.y-e.y)*t,n.visit(a.contain(e))}),this.nodes.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",function(e){return e.radius}).style("fill",function(e){return e.color})},e.prototype.filter_patients=function(e){var t,n,a;return null==e&&(e=this.unscoped_patients),n=_.pluck(e,"id"),a=$(this.svg.node()).parents(".column").next(".column").find("tbody tr"),t=a.filter(function(){return _.contains(n,$(this).data("id"))}),t.css("display","none"),a.not(t).css("display","")},e.prototype.placeholders=function(){var e;return e=this.svg.select("g.placeholders").selectAll("circle.layout").data(this.sets),e.enter().append("svg:circle").attr("class","layout"),e.attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("fill",function(e){return e.color}),e.exit().remove()},e.prototype.cartesian_to_polar=function(e,t){return{angle:Math.atan2(e.y-t.y,e.x-t.x),magnitude:venn.distance(e,t)}},e.prototype.circumcenter=function(){var e,t,n=this;return e=this.overlaps.map(function(e){return e.points=venn.circleCircleIntersection(e.groups[0],e.groups[1]),e.slope=n.slope(e.points[0],e.points[1]),e.midpoint=n.midpoint(e.points[0],e.points[1]),e}),e=e.filter(function(e){return void 0!==e.slope}),e=e.map(function(e){return e.yint=e.points[0].y-e.slope*e.points[0].x,e}),t=(-e[1].slope*e[1].points[0].x+e[1].points[0].y+e[0].slope*e[0].points[0].x-e[0].points[0].y)/(e[0].slope-e[1].slope),{x:t,y:e[0].slope*t+e[0].yint}},e.prototype.collide=function(e){var t,n,a,r,i;return i=e.radius,t=e.x-i,n=e.x+i,a=e.y-i,r=e.y+i,function(o,s,c,u,d){var l,p,m;return o.point&&o.point!==e&&(p=e.x-o.point.x,m=e.y-o.point.y,l=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),i=1.05*(e.radius+o.point.radius),i>l&&(l=.5*((l-i)/l),e.x-=p*=l,e.y-=m*=l,o.point.x+=p,o.point.y+=m)),s>n||t>u||c>r||a>d}},e.prototype.color_mixer=function(e){var t;return t=Color(e.pop()),e.forEach(function(e){return t.mix(Color(e))}),e.length>1&&t.darken(.35),t.rgbString()},e.prototype.contain=function(e){var t,n=this;return t={x:e.x,y:e.y},"undefined"!=typeof e.bounds&&(t=this.exclude(e,t),e.bounds.forEach(function(e){var a;return a=n.cartesian_to_polar(t,e),t=n.polar_to_cartesian(a.angle,Math.min(a.magnitude,e.radius-n.padding),e)})),e.x=t.x,e.y=t.y,this.collide(e)},e.prototype.exclude=function(e,t){var n,a=this;return n=_.difference(this.sets,e.bounds),n.forEach(function(e){var n;return n=a.cartesian_to_polar(t,e),t=a.polar_to_cartesian(n.angle,Math.max(n.magnitude,e.radius+a.padding),e)}),t},e.prototype.lens_center=function(e,t){var n;return n=venn.circleCircleIntersection(e,t),this.midpoint(n[0],n[1])},e.prototype.midpoint=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},e.prototype.slope=function(e,t){return[e,t].forEach(function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y)}),t.x===e.x?void 0:(t.y-e.y)/(t.x-e.x)},e.prototype.polar_to_cartesian=function(e,t,n){return null==n&&(n={x:0,y:0}),{x:Math.cos(e)*t+n.x,y:Math.sin(e)*t+n.y}},e}()}.call(this);
define("viewmodels/venn/patient.venn", function(){});

define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!views/authenticate.html',[],function () { return '<section></section>';});


define('text!views/columns/flexcolumn.html',[],function () { return '<div class="column" data-bind="click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n    <!-- ko foreach: activeWidgets -->\r\n        <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/columns/fullcolumn.html',[],function () { return '<div class="column" data-bind="foreach: activeWidgets">\r\n    <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n    <!-- /ko -->\r\n</div> ';});


define('text!views/home/index.html',[],function () { return '<div class="route">\r\n    <section class="open" data-type="fixed" data-bind="visible: cohortPatientSelectPanelShowing">\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Cohorts</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <table id="filters">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th colspan="3">Choose up to three:</th>\r\n                                </tr>\r\n                                <!-- ko foreach: computedCohorts -->\r\n                                <tr class="condition active" data-bind="attr: { \'id\': \'condition_\' + sName }">\r\n                                    <td class="narrow">\r\n                                        <div class="checker">\r\n                                            <span class="checked" data-bind="css: { \'checked\': isChecked }">\r\n                                                <input checked="" data-comparator="contains" data-key="sName" type="checkbox" data-bind="checked: isChecked, attr: { \'value\': sName }">\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td class="narrow">\r\n                                        <div class="indicator" style="background-color: rgb(31, 119, 180); background-position: initial initial; background-repeat: initial initial;"></div>\r\n                                    </td>\r\n                                    <td data-bind="text: sName"></td>\r\n                                </tr>\r\n                                <!-- /ko -->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/home/myhome/myhome.html',[],function () { return '<section class="highlights">\r\n    <h2>Care Manager Home</h2>\r\n</section>\r\n<section data-type="flex">\r\n    <div class="column">\r\n        <div class="widget open">\r\n            <div class="content">\r\n                <div class="wrapper">\r\n                    <div class="content">\r\n                        <div class="header">\r\n                            <div class="table-cell">\r\n                                <header>\r\n                                    <h1>Calendar</h1>\r\n                                    <div class="controls">\r\n                                        <div class="toggle single-arrow-left" data-method="open" data-type="remove">\r\n                                        </div>\r\n                                        <div class="toggle double-arrow-right" data-method="open" data-type="add">\r\n                                        </div>\r\n                                    </div>\r\n                                </header>\r\n                            </div>\r\n                        </div>\r\n                        <div class="table-row">\r\n                            <div class="table-cell">\r\n                                <div class="body">\r\n                                    <div class="calendar" data-bind="fullCalendar: calendarOptions">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column open">\r\n        <div class="widget">\r\n            <div class="content">\r\n                <div class="wrapper">\r\n                    <div class="content">\r\n                        <div class="header">\r\n                            <div class="table-cell">\r\n                                <header>\r\n                                    <h1>Alerts</h1>\r\n                                    <div class="controls">\r\n                                        <div class="toggle single-arrow-left" data-method="open" data-type="remove"></div>\r\n                                        <div class="toggle double-arrow-right" data-method="open" data-type="add"></div>\r\n                                        <div class="toggle fullscreen" data-method="fullscreen" data-type="both"></div>\r\n                                    </div>\r\n                                </header>\r\n                            </div>\r\n                        </div>\r\n                        <div class="table-row">\r\n                            <div class="table-cell">\r\n                                <div class="body">\r\n                                    <table class="nowrap">\r\n                                        <tbody>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="widget open">\r\n            <div class="content">\r\n                <div class="wrapper">\r\n                    <div class="content">\r\n                        <div class="filters">\r\n                            <div class="table-cell">\r\n                            </div>\r\n                        </div>\r\n                        <div class="header">\r\n                            <div class="table-cell">\r\n                                <header>\r\n                                    <h1 class="nowrap">Work List</h1>\r\n                                    <div class="controls">\r\n                                        <div class="toggle single-arrow-left" data-method="open" data-type="remove"></div>\r\n                                        <div class="toggle double-arrow-right" data-method="open" data-type="add">\r\n                                        </div>\r\n                                        <div class="toggle fullscreen" data-method="fullscreen" data-type="both"></div>\r\n                                    </div>\r\n                                    <div class="options myhome">\r\n                                        <div data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                    </div>\r\n                                </header>\r\n                            </div>\r\n                        </div>\r\n                        <div class="table-row">\r\n                            <div class="table-cell">\r\n                                <div class="body">\r\n                                    <table class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" id="uniform-selectAll"><span><input id="selectAll" name="selectAll" type="checkbox" value="1"></span></div>\r\n                                                </th>\r\n                                                <th>Name</th>\r\n                                                <th>DOB</th>\r\n                                                <th>Age</th>\r\n                                                <th>Gender</th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: patientsList -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" id="uniform-selected">\r\n                                                        <span>\r\n                                                            <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <a data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { href: \'#patients/\' + id(), \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="with: dOB"><span data-bind="text: $data, attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: age" data-phyautomation="age"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <img alt="Gender small" data-bind="attr: { \'src\': genderModel().SmallImgSrc }">\r\n                                                    <span data-bind="text: genderModel().Description"></span>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div><div class="widget">\r\n            <div class="content">\r\n                <div class="wrapper">\r\n                    <div class="content">\r\n                        <div class="header">\r\n                            <div class="table-cell">\r\n                                <header>\r\n                                    <h1>Recommended Actions</h1>\r\n                                    <div class="controls">\r\n                                        <div class="toggle single-arrow-left" data-method="open" data-type="remove"></div>\r\n                                        <div class="toggle double-arrow-right" data-method="open" data-type="add"></div>\r\n                                        <div class="toggle fullscreen" data-method="fullscreen" data-type="both"></div></div>\r\n                                    </header>\r\n                            </div>\r\n                        </div>\r\n                        <div class="table-row">\r\n                            <div class="table-cell">\r\n                                <div class="body">\r\n                                    <table class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                </th>\r\n                                                <th>Program</th>\r\n                                                <th>Message</th>\r\n                                                <th># of eligible individuals</th>\r\n                                                <th></th>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/home/population/index.html',[],function () { return '<section data-type="flex">\r\n    <div class="column open">\r\n        <div class="widget open">\r\n            <div class="content">\r\n                <header>\r\n                    <h1>Population</h1>\r\n                </header>\r\n                <div class="body">\r\n                    <svg id="visualizer" height="576" width="576">\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column">\r\n        <div class="widget open">\r\n            <div class="content">\r\n                <header>\r\n                    <h1>Patients</h1>\r\n                    <div class="options">\r\n                    </div>\r\n                </header>\r\n                <div class="body">\r\n                    <table class="nowrap">\r\n                        <thead>\r\n                            <tr>\r\n                                <th class="narrow">\r\n                                    <div class="checker" id="uniform-selectAll">\r\n                                        <span>\r\n                                            <input id="selectAll" name="selectAll" type="checkbox" value="1" />\r\n                                        </span>\r\n                                    </div>\r\n                                </th>\r\n                                <th class="narrow">ID</th>\r\n                                <th>Patient Name</th>\r\n                                <th>Care Gaps</th>\r\n                            </tr>\r\n                        </thead>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/careplan/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="foreach: widgets, click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n            <!-- ko compose: path -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Plan</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <em class="grey">No individual selected.</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/data/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="foreach: widgets, click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n            <!-- ko compose: path -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Data-Type</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <em class="grey">No individual selected.</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/goals/index.html',[],function () { return '<section class="" data-type="flex" data-bind="css: { \'slider\': !activeGoal() }">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="foreach: widgets, css: { open: isOpen }">\r\n            <!-- ko compose: path -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Goals</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <em class="grey">No individual selected.</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/history/index.html',[],function () { return '<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="foreach: widgets, css: { open: $parent.computedOpenColumn() === $data }">\r\n            <!-- ko compose: path -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>History</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <em class="grey">No individual selected.</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/index.html',[],function () { return '<div class="route">\r\n    <section data-type="fixed" data-bind="css: { open: patientDataColumnOpen()  === true }">\r\n        <div class="column off-canvas" data-bind="css: { open: patientsListFlyoutOpen() === true }" data-phyautomation="cohort-column-pane">\r\n            <!-- ko compose: \'patients/patientswidgets/patientslistflyoutwidget.html\' -->\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class="column" data-phyautomation="patient-details-pane">\r\n            <!-- ko compose: \'patients/patientswidgets/patientsdetailswidget.html\' -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </section>\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute, activationData: { selectedPatient: selectedPatient } } -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/patients/overview/index.html',[],function () { return '<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Vitals</h1>\r\n                        <div class="controls">\r\n                            <div class="toggle single-arrow-left" data-method="open" data-type="remove"></div>\r\n                            <div class="toggle double-arrow-right" data-method="open" data-type="add"></div>\r\n                            <div class="toggle fullscreen" data-method="fullscreen" data-type="both"></div>\r\n                        </div>\r\n                    </header>\r\n                    <div class="body">\r\n                        <div class="graph vitals" data-metric="BMI" data-patient="35" data-highcharts-chart="0">\r\n                            <div class="highcharts-container" id="highcharts-0" style="position: relative; overflow: hidden; width: 414px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: \'Lucida Grande\', \'Lucida Sans Unicode\', Verdana, Arial, Helvetica, sans-serif; font-size: 12px;">\r\n                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="414" height="200">\r\n                                    <desc>Created with Highcharts 3.0.5</desc>\r\n                                    <defs><clipPath id="highcharts-1"><rect fill="none" x="0" y="0" width="394" height="145"></rect></clipPath></defs>\r\n                                    <rect rx="5" ry="5" fill="#FFFFFF" x="0" y="0" width="414" height="200"></rect>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n                                        <path fill="none" d="M 10 185.5 L 404 185.5" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n                                        <path fill="none" d="M 9.5 40 L 9.5 185" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-series-group" zIndex="3">\r\n                                        <g class="highcharts-series" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="url(#highcharts-1)">\r\n                                            <path fill="none" d="M 0 0" stroke-linejoin="round" visibility="visible" stroke-opacity="0.0001" stroke="rgb(192,192,192)" stroke-width="22" zIndex="2" class=" highcharts-tracker" style=""></path>\r\n                                        </g>\r\n                                        <g class="highcharts-markers highcharts-tracker" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="none" style=""></g>\r\n                                    </g>\r\n                                    <text x="10" y="25" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:16px;color:#274b6d;fill:#274b6d;width:350px;" text-anchor="start" class="highcharts-title" zIndex="4"><tspan x="10">BMI</tspan></text>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-tooltip" zIndex="8" style="cursor:default;padding:0;white-space:nowrap;" visibility="hidden" transform="translate(0,0)"><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="rgb(255,255,255)" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85"></rect><text x="8" y="21" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#333333;fill:#333333;" zIndex="1"></text></g>\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                        <div class="graph vitals" data-metric="Blood Glucose" data-patient="35" data-highcharts-chart="1">\r\n\r\n                            <div class="highcharts-container" id="highcharts-4" style="position: relative; overflow: hidden; width: 414px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: \'Lucida Grande\', \'Lucida Sans Unicode\', Verdana, Arial, Helvetica, sans-serif; font-size: 12px;">\r\n                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="414" height="200">\r\n                                    <desc>Created with Highcharts 3.0.5</desc>\r\n                                    <defs><clipPath id="highcharts-5"><rect fill="none" x="0" y="0" width="394" height="145"></rect></clipPath></defs>\r\n                                    <rect rx="5" ry="5" fill="#FFFFFF" x="0" y="0" width="414" height="200"></rect>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n\r\n                                        <path fill="none" d="M 10 185.5 L 404 185.5" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n\r\n                                        <path fill="none" d="M 9.5 40 L 9.5 185" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-series-group" zIndex="3">\r\n                                        <g class="highcharts-series" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="url(#highcharts-5)">\r\n\r\n                                            <path fill="none" d="M 0 0" stroke-linejoin="round" visibility="visible" stroke-opacity="0.0001" stroke="rgb(192,192,192)" stroke-width="22" zIndex="2" class=" highcharts-tracker" style=""></path>\r\n                                        </g>\r\n                                        <g class="highcharts-markers highcharts-tracker" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="none" style=""></g>\r\n                                    </g>\r\n                                    <text x="10" y="25" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:16px;color:#274b6d;fill:#274b6d;width:350px;" text-anchor="start" class="highcharts-title" zIndex="4"><tspan x="10">Blood Glucose</tspan></text>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-tooltip" zIndex="8" style="cursor:default;padding:0;white-space:nowrap;" visibility="hidden" transform="translate(0,0)"><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="rgb(255,255,255)" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85"></rect><text x="8" y="21" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#333333;fill:#333333;" zIndex="1"></text></g>\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                        <div class="graph vitals" data-metric="HbA1c" data-patient="35" data-highcharts-chart="2">\r\n\r\n                            <div class="highcharts-container" id="highcharts-8" style="position: relative; overflow: hidden; width: 414px; height: 200px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: \'Lucida Grande\', \'Lucida Sans Unicode\', Verdana, Arial, Helvetica, sans-serif; font-size: 12px;">\r\n                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="414" height="200">\r\n                                    <desc>Created with Highcharts 3.0.5</desc>\r\n                                    <defs><clipPath id="highcharts-9"><rect fill="none" x="0" y="0" width="394" height="145"></rect></clipPath></defs>\r\n                                    <rect rx="5" ry="5" fill="#FFFFFF" x="0" y="0" width="414" height="200"></rect>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-grid" zIndex="1"></g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n\r\n                                        <path fill="none" d="M 10 185.5 L 404 185.5" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-axis" zIndex="2">\r\n\r\n                                        <path fill="none" d="M 9.5 40 L 9.5 185" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path>\r\n                                    </g>\r\n                                    <g class="highcharts-series-group" zIndex="3">\r\n                                        <g class="highcharts-series" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="url(#highcharts-9)">\r\n\r\n                                            <path fill="none" d="M 0 0" stroke-linejoin="round" visibility="visible" stroke-opacity="0.0001" stroke="rgb(192,192,192)" stroke-width="22" zIndex="2" class=" highcharts-tracker" style=""></path>\r\n                                        </g>\r\n                                        <g class="highcharts-markers highcharts-tracker" visibility="visible" zIndex="0.1" transform="translate(10,40) scale(1 1)" clip-path="none" style=""></g>\r\n                                    </g>\r\n                                    <text x="10" y="25" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:16px;color:#274b6d;fill:#274b6d;width:350px;" text-anchor="start" class="highcharts-title" zIndex="4"><tspan x="10">HbA1c</tspan></text>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-axis-labels" zIndex="7"></g>\r\n                                    <g class="highcharts-tooltip" zIndex="8" style="cursor:default;padding:0;white-space:nowrap;" visibility="hidden" transform="translate(0,0)"><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="none" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85" isShadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></rect><rect rx="3" ry="3" fill="rgb(255,255,255)" x="0.5" y="0.5" width="16" height="16" fill-opacity="0.85"></rect><text x="8" y="21" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#333333;fill:#333333;" zIndex="1"></text></g>\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column open">\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Alerts</h1>\r\n                        <div class="controls">\r\n                            <div class="toggle single-arrow-left" data-method="open" data-type="remove"></div>\r\n                            <div class="toggle double-arrow-right" data-method="open" data-type="add"></div>\r\n                            <div class="toggle fullscreen" data-method="fullscreen" data-type="both"></div>\r\n                        </div>\r\n                    </header>\r\n                    <div class="body">\r\n                        <table class="nowrap">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th>\r\n                                        Opportunity\r\n                                    </th>\r\n                                    <th>\r\n                                        Last Value\r\n                                    </th>\r\n                                    <th>\r\n                                        Date\r\n                                    </th>\r\n                                </tr>\r\n                                <!--<tr>\r\n                                    <td>\r\n                                        HbA1c &gt; 9\r\n                                    </td>\r\n                                    <td>\r\n                                        9.3\r\n                                    </td>\r\n                                    <td>\r\n                                        7/15/2013\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Diabetic Eye Exam past 12 mo.\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td>\r\n                                        2/12/2011\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Colorectal Cancer Screening\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Wellness – Annual\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Hypertension Visit\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        HbA1c &gt; 9\r\n                                    </td>\r\n                                    <td>\r\n                                        9.3\r\n                                    </td>\r\n                                    <td>\r\n                                        7/15/2013\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Diabetic Eye Exam past 12 mo.\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td>\r\n                                        2/12/2011\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Colorectal Cancer Screening\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Wellness – Annual\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Hypertension Visit\r\n                                    </td>\r\n                                    <td>\r\n                                        —\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>-->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="widget open">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Current Medications</h1>\r\n                        <div class="controls">\r\n                            <div class="toggle single-arrow-left" data-method="open" data-type="remove">\r\n                            </div>\r\n                            <div class="toggle double-arrow-right" data-method="open" data-type="add">\r\n                            </div>\r\n                            <div class="toggle fullscreen" data-method="fullscreen" data-type="both">\r\n                            </div>\r\n                        </div>\r\n                    </header>\r\n                    <div class="body">\r\n                        <table class="nowrap">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th>\r\n                                        Medication\r\n                                    </th>\r\n                                    <th>\r\n                                        Start Date\r\n                                    </th>\r\n                                </tr>\r\n                                <!--<tr>\r\n                                    <td>\r\n                                        Lantus 100 U/ml vial\r\n                                    </td>\r\n                                    <td>\r\n                                        2/18/2013\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Kombiglyze XR tablets 5 mg/1000 mg\r\n                                    </td>\r\n                                    <td>\r\n                                        4/11/2010\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Simvastatin 40 mg oral tablets\r\n                                    </td>\r\n                                    <td>\r\n                                        12/6/2008\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Lisinopril-hydrochlorothiazide 10-12.5\r\n                                    </td>\r\n                                    <td>\r\n                                        6/6/2008\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Aspirin 81 mg oral tablet\r\n                                    </td>\r\n                                    <td>\r\n                                        6/3/2007\r\n                                    </td>\r\n                                </tr>-->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="widget open">\r\n\r\n                <div class="content">\r\n\r\n                    <header>\r\n                        <h1>Vitals</h1>\r\n\r\n                        <div class="controls">\r\n\r\n                            <div class="toggle single-arrow-left" data-method="open" data-type="remove">\r\n                            </div>\r\n\r\n                            <div class="toggle double-arrow-right" data-method="open" data-type="add">\r\n                            </div>\r\n\r\n                            <div class="toggle fullscreen" data-method="fullscreen" data-type="both">\r\n                            </div>\r\n                        </div>\r\n                    </header>\r\n\r\n                    <div class="body">\r\n                        <table class="nowrap">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th>\r\n                                        Risk Model\r\n                                    </th>\r\n                                    <th>\r\n                                        Result\r\n                                    </th>\r\n                                </tr>\r\n                                <!--<tr>\r\n                                    <td>\r\n                                        LOH\r\n                                    </td>\r\n                                    <td>\r\n                                        0.7\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        LOED\r\n                                    </td>\r\n                                    <td>\r\n                                        1\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        PolyRx\r\n                                    </td>\r\n                                    <td>\r\n                                        Yes\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Prospective Risk\r\n                                    </td>\r\n                                    <td>\r\n                                        10\r\n                                    </td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>\r\n                                        Relative Risk\r\n                                    </td>\r\n                                    <td>\r\n                                        21\r\n                                    </td>\r\n                                </tr>-->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientscolumns/patientdata.html',[],function () { return '<div class="column off-canvas" data-bind="css: { open: patientsListFlyoutOpen() === true }" data-phyautomation="cohort-column-pane">\r\n    <!-- ko compose: \'patients/patientswidgets/patientslistflyoutwidget.html\' -->\r\n    <!-- /ko -->\r\n</div>\r\n<div class="column" data-phyautomation="patient-details-pane">\r\n    <!-- ko compose: \'patients/patientswidgets/patientsdetailswidget.html\' -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/patients/patientssections/additionalobservations.html',[],function () { return '<div class="accordion-content columns">\r\n    <div class="column">\r\n        <form>\r\n            <div class="row pad top">\r\n                <div class="span6">\r\n                    <div class="row">\r\n                        <input class="span12" type="text" data-bind="typeahead: { name: \'giveMeANAME\', taOptions: addtlObsBloodhound, displayKey: \'name\' }, value: selectedAdditionalObservation" placeholder="Enter name" />\r\n                    </div>\r\n                </div>\r\n                <div class="span6 pull-left">\r\n                    <a href="#" data-bind="click: addNewObservation, enable: canAdd, css: { \'disabled\': !canAdd() }">\r\n                        <i class="icon-plus"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class="row pad top" data-bind="if: additionalObservationsToEnter().length !== 0">\r\n                <div class="row pad top">\r\n                    <div class="span3">\r\n                        <strong>Element</strong>\r\n                    </div>\r\n                    <div class="span2">\r\n                        <strong>Value</strong>\r\n                    </div>\r\n                    <div class="span2">\r\n                        <strong>Date</strong>\r\n                    </div>\r\n                    <div class="span4">\r\n                        <strong></strong>\r\n                    </div>\r\n                    <div class="span1">\r\n                        <strong></strong>\r\n                    </div>\r\n                </div>\r\n                <!-- ko foreach: additionalObservationsToEnter -->\r\n                <!-- ko if: groupId() -->\r\n                <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew  } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: !groupId() -->\r\n                <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew   } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientssections/backgroundsection.html',[],function () { return '<section class="accordion open" data-phyautomation="patient-background-pane">\r\n    <div class="row">\r\n        <a class="accordion-toggle" href="#" data-bind="clickToggle: isOpen">Background</a>\r\n        <a class="edit" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'" data-phyautomation="patient-background-edit"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <div class="column" data-phyautomation="patient-background-whole">\r\n            <div class="row" data-bind="with: selectedPatient">           \r\n                <!-- ko ifnot: $parent.isExpanded -->\r\n                <div class="span12" data-bind="visible: background">\r\n                    <textarea data-bind="text: background, attr: { \'title\': background }" disabled="disabled" class="display-only no-scroll" rows="5"></textarea>\r\n                    <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: $parent.isExpanded -->\r\n                <textarea data-bind="text: background, autoHeight: background, attr: { \'title\': background }" disabled="disabled" class="display-only span12" ></textarea>           \r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientssections/basicobservations.html',[],function () { return '<div class="columns">\r\n    <div class="column">\r\n        <form>\r\n            <div class="row pad top">\r\n                <div class="span3">\r\n                    <strong>Element</strong>\r\n                </div>\r\n                <div class="span2">\r\n                    <strong>Value</strong>\r\n                </div>\r\n                <div class="span2">\r\n                    <strong>Date</strong>\r\n                </div>\r\n                <div class="span4">\r\n                    <strong></strong>\r\n                </div>\r\n                <div class="span1">\r\n                    <strong></strong>\r\n                </div>\r\n            </div>\r\n            <!-- ko foreach: computedBasicObservations() -->\r\n            <!-- ko if: groupId() -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko if: !groupId() -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </form>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientssections/careteamsection.html',[],function () { return '<section class="accordion open">\r\n    <div class="row">\r\n        <a class="accordion-toggle" href="#" data-bind="clickToggle: isOpen">Care Team</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <ul class="dotted column">\r\n            <!-- ko if: primaryCareTeam().length === 0 -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: assignToMe" class="btn color small">Assign to me</button>\r\n                    <br>\r\n                    <small class="grey">Primary Care Manager</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- ko foreach: primaryCareTeam -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <strong data-bind="text: preferredName, attr: { \'title\': preferredName }"></strong>\r\n                    <br>\r\n                    <small class="grey" data-bind="with: type, attr: { \'title\': (\'Primary \' + type().name()) }">\r\n                        <span data-bind="text: (\'Primary \' + name())"></span>\r\n                    </small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n        <ul class="dotted column">\r\n            <!-- ko if: canReassignToMe() -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: reassignToMe" class="btn color small">Assign to me</button>\r\n                    <br>\r\n                    <small class="grey">Primary Care Manager</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- ko foreach: secondaryCareTeam -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <strong data-bind="text: preferredName, attr: { \'title\': preferredName }"></strong>\r\n                    <br>\r\n                    <small class="grey" data-bind="attr: { \'title\': type().name() }" data-bind="text: type().name()"></small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientssections/communicationssection.html',[],function () { return '<section class="accordion open">\r\n    <div class="row">\r\n        <a class="accordion-toggle" href="#" data-bind="clickToggle: isOpen">Communication</a>\r\n        <a class="edit" href="#" data-bind="click: toggleEditing">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="with: contactCard, visible: isOpen">\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.primaryCommunications -->\r\n            <!-- ko compose: template -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <div class="row">\r\n                <div class="span2 grey">Mode</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !prefCommMethods()">Unknown</em>\r\n                    <span class="row" data-bind="visible: prefCommMethods, text: prefCommMethods, attr: { \'title\': prefCommMethods }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span2 grey">Days</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredDaysOfWeek()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredDaysOfWeek, text: preferredDaysOfWeek, attr: { \'title\': preferredDaysOfWeek }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span2 grey">Time</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredTimesOfDay()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredTimesOfDay, text: preferredTimesOfDay, attr: { \'title\': preferredTimesOfDay }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row" data-bind="with: timeZone">\r\n                <div class="span4 grey">Time Zone</div>\r\n                <div class="span8" data-bind="text: name, attr: { \'title\': name }"></div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span2 grey">Language</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredLanguage()">Unknown</em>\r\n                    <!-- ko with: preferredLanguage -->\r\n                    <span class="row" data-bind="text: name, attr: { \'title\': name }"></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.secondaryCommunications -->\r\n            <!-- ko compose: template -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko if : phoneOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-phone"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'phone opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;phone opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : emailOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-email"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'email opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;email opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : addressOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-address"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'mail opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;mail opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : textOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-sms"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'text opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;text opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="row" data-bind="with: secondaryLanguagesText">\r\n                <div class="span2 grey">Language</div>\r\n                <div class="span8 line short">\r\n                    <span class="row" data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientssections/demographicssection.html',[],function () { return '<section class="accordion open" data-phyautomation="patients-demographics-pane">\r\n    <div class="row">\r\n        <a class="accordion-toggle" href="#" data-bind="clickToggle: isOpen">Patient Details</a>\r\n        <a class="edit" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen, with: selectedPatient">\r\n        <div class="column" data-phyautomation="patients-demographics-left">\r\n            <div class="row">\r\n                <div class="span4">\r\n                    <img alt="Patient image" class="profile-pic" data-bind="attr: { src: genderModel().LargeImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span8 pad vertical">\r\n                    <h2 class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: fullFirstName, attr: { \'title\': fullFirstName }" data-phyautomation="full-first-name"></span>\r\n                    </h2>\r\n                    <h2 class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: fullLastName, attr: { \'title\': fullLastName }" data-phyautomation="full-last-name"></span>\r\n                    </h2>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Age\r\n                </div>\r\n                <div class="span8">\r\n                    <span data-bind="text: age" data-phyautomation="age"></span>\r\n                    <span class="grey" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\'" data-phyautomation="dob"></span></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey ellipsis" data-bind="text: (displayLabel() || \'ID\')"></div>\r\n                <div class="span8 ellipsis">\r\n                    <em class="row grey" data-bind="visible: !displaySystemId()">Unknown</em>\r\n                    <span class="row" data-bind="visible: displaySystemId, text: displaySystemId, attr: { \'title\': displaySystemId }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Priority\r\n                </div>\r\n                <div class="span8">\r\n                    <!-- ko with : priorityModel -->\r\n                    <img alt="Priority" data-bind="attr: { src: imageSource }" data-phyautomation="priority" />\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">\r\n                    Flagged\r\n                </div>\r\n                <div class="span8">\r\n                    <a href="#" data-bind="click: $parent.toggleFlagged">\r\n                        <i data-bind="attr: { class: (flagged() ? \'red\' : \'grey\') + \' icon-flag\' }" data-phyautomation="flagged"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column" data-phyautomation="patients-demographics-right">\r\n            <div class="row" data-bind="with: formattedSSN">\r\n                <div class="span5 grey">SSN</div>\r\n                <div class="span6 filter-toggle" data-bind="text: $data, click: $parents[1].showFullSSN"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientssections/focusareassection.html',[],function () { return '<section class="accordion open" data-phyautomation="patients-focus-areas-pane">\r\n    <div class="row">\r\n        <a class="accordion-toggle" href="#" data-bind="clickToggle: isOpen">Focus Areas</a>\r\n        <!-- <a class="edit" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a> -->\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <!-- ko if: problems().length !== 0 -->\r\n        <ul class="column" data-phyautomation="patients-problems-left">\r\n            <li><em>Primary</em></li>\r\n            <!-- ko foreach: primaryProblems -->\r\n            <li class="push2" data-bind="text: problem().name, attr: { \'title\': problem().name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !isExpanded() && primaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: isExpanded" href="#">...</a>\r\n            </li>\r\n        </ul>\r\n        <ul class="column pad vertical" data-phyautomation="patients-problems-right">\r\n            <li><em>Secondary</em></li>\r\n            <!-- ko foreach: secondaryProblems -->\r\n            <li class="push2" data-bind="text: problem().name, attr: { \'title\': problem().name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !isExpanded() && secondaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: isExpanded" href="#">...</a>\r\n            </li>\r\n        </ul>\r\n        <!-- /ko -->\r\n        <!-- ko if: problems().length === 0 -->\r\n        <em class="grey">No primary or secondary focus areas</em>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/patients/patientssections/goaldetailsection.html',[],function () { return '<div class="body" data-bind="with: activeGoal">\r\n    <div class="">\r\n        <!--<div class="row pad-top">\r\n            <div class="span3">\r\n                <span class="grey">Name</span>\r\n            </div>\r\n            <div class="span9">\r\n                <p data-bind="text: name"></p>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top">\r\n            <div class="span3">\r\n                <span class="grey">Focus Area(s)</span>\r\n            </div>\r\n            <div class="span9">\r\n                <p data-bind="text: focusAreaString"></p>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top">\r\n            <div class="span3">\r\n                <span class="grey">Program(s)</span>\r\n            </div>\r\n            <div class="span9">\r\n                <p data-bind="text: programString"></p>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-vertical">\r\n            <div class="span3">\r\n                <span class="grey">Source</span>\r\n            </div>\r\n            <div class="span9">\r\n                <p data-bind="with: source"><span data-bind="text: name"></span></p>\r\n            </div>\r\n        </div>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle">\r\n                <h4>Attributes</h4>\r\n            </div>\r\n            <div class="accordion-content">\r\n                <div class="column">\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">Type</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <p data-bind="with: type"><span data-bind="text: name"></span></p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <p data-bind="with: status"><span data-bind="text: name"></span></p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <p data-bind="Date: startDate"></p>\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">Target Value</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <p data-bind="text: targetValue"></p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">Target Date</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <p data-bind="Date: targetDate"></p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3">\r\n                            <span class="grey">End Date</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <p data-bind="Date: endDate"></p>\r\n                        </div>\r\n                    </div>\r\n                    <!-- koa foreach: customAttributes().sort($parent.alphabeticalOrderSort) -->\r\n                    <!-- koa compose: displayPath -->\r\n                    <!-- /kao -->\r\n                    <!-- /kao -->\r\n                <!--</div>\r\n            </div>\r\n        </section>-->\r\n        <div class="row">\r\n            <h4>Tasks</h4>\r\n            <div class="row pad-top">\r\n                <div class="span5 line short grey">Name</div>\r\n                <div class="span7 line short grey">Status</div>\r\n            </div>\r\n            <!-- ko foreach: tasks().sort($parent.alphabeticalDescriptionSort) -->\r\n            <div class="row">\r\n                <div class="span5 line short ellipsis" data-bind="text: description, attr: { \'title\': description }"></div>\r\n                <div class="span7 line short ellipsis" data-bind="with: status"><span data-bind="text: name, attr: { \'title\': name }"></span></div>\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <h4>Barriers</h4>\r\n            <div class="row pad-top">\r\n                <div class="span5 line short grey">Name</div>\r\n                <div class="span7 line short grey">Status</div>\r\n            </div>\r\n            <!-- ko foreach: barriers().sort($parent.alphabeticalNameSort) -->\r\n            <div class="row">\r\n                <div class="span5 line short ellipsis" data-bind="text: name, attr: { \'title\': name }"></div>\r\n                <div class="span7 line short ellipsis" data-bind="with: status"><span data-bind="text: name, attr: { \'title\': name }"></span></div>\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <h4>Interventions</h4>\r\n            <div class="row pad-top">\r\n                <div class="span5 line short grey">Name</div>\r\n                <div class="span7 line short grey">Status</div>\r\n            </div>\r\n            <!-- ko foreach: interventions().sort($parent.alphabeticalDescriptionSort) -->\r\n            <div class="row">\r\n                <div class="span5 line short ellipsis" data-bind="text: description, attr: { \'title\': description }"></div>\r\n                <div class="span7 line short ellipsis" data-bind="with: status"><span data-bind="text: name, attr: { \'title\': name }"></span></div>\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n\r\n    </div>\r\n</div>';});


define('text!views/patients/patientssections/goaleditsection.html',[],function () { return '<div class="body" data-bind="with: activeGoal">\r\n    <div class="wasAForm">\r\n        <div class="row pad-top">\r\n            <div class="span3 align-right">\r\n                <span class="grey">Focus Area(s)</span>\r\n            </div>\r\n            <div class="span9" data-bind="multiselect: { options: $parent.focusAreas, values: focusAreaIds, idValue: \'id\', text: \'name\', label: \'focusAreas\', stringValue: focusAreaString }"></div>\r\n        </div>\r\n        <div class="row pad-top">\r\n            <div class="span3 align-right">\r\n                <span class="grey">Program(s)</span>\r\n            </div>\r\n            <div class="span9" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n        </div>\r\n        <div class="row pad-top">\r\n            <div class="span3 align-right">\r\n                <span class="grey">Goal Name</span>\r\n            </div>\r\n            <div class="span9">\r\n                <input data-bind="value: name, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" />\r\n                <span><em class="grey" data-bind="visible: !name()">Goal name is required</em></span>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-vertical">\r\n            <div class="span3 align-right">\r\n                <span class="grey">Source</span>\r\n            </div>\r\n            <div class="span9" data-bind="if: $parent.sources">\r\n                <div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n                <span>\r\n                    <em class="grey" data-bind="visible: !source()">Goal source is required</em>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                <h4>Attributes</h4>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                <div class="column">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Type</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTypes, value: type, text: \'name\', label: \'goaltypes\' }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTaskStatuses, value: status, text: \'name\', label: \'goaltypes\', disabled: isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Value</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <input data-bind="value: targetValue" maxlength="255" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">End Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: endDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <!-- ko foreach: customAttributes().sort($parent.alphabeticalOrderSort) -->\r\n                    <!-- ko compose: path -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.barriersSectionOpen">\r\n                <h4 class="pull-left">Barriers</h4>\r\n                <a class="btn color small pull-right" href="#" data-bind="click: $parent.addBarrier, clickBubble: false">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Add Barrier</span>\r\n                </a>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.barriersSectionOpen">\r\n                <div data-bind="visible: barriers().length === 0" class="empty-message">No barriers.</div>\r\n                <!-- ko foreach: barriers -->\r\n                <section class="data-set clearfix">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Category</span>\r\n                        </div>\r\n                        <div class="span7">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].barrierCategories, value: category, text: \'name\', label: \'barriercategories\' }"></div>\r\n                        </div>\r\n                        <a class="delete pull-right" href="#" data-bind="click: $parents[1].removeBarrier">\r\n                            <i class="icon-cancel"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Name</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <input data-bind="value: name" class="string optional" maxlength="255" type="text" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].barrierStatuses, value: status, text: \'name\', label: \'barrierstatuses\', disabled: $parent.isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.tasksSectionOpen">\r\n                <h4 class="pull-left">Individual Tasks</h4>\r\n                <a class="btn color small pull-right" href="#" data-bind="click: $parent.addTask, clickBubble: false">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Add Task</span>\r\n                </a>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.tasksSectionOpen">\r\n                <div data-bind="visible: tasks().length === 0" class="empty-message">No tasks.</div>\r\n                <!-- ko foreach: tasks -->\r\n                <section class="data-set clearfix">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Description</span>\r\n                        </div>\r\n                        <div class="span7">\r\n                            <input data-bind="value: description" class="string optional" maxlength="500" type="text" />\r\n                        </div>\r\n                        <a class="delete pull-right" href="#" data-bind="click: $parents[1].removeTask">\r\n                            <i class="icon-cancel"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].goalTaskStatuses, value: status, text: \'name\', label: \'goaltaskstatuses\', disabled: $parent.isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Value</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <input data-bind="value: targetValue" maxlength="255" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Associated Barrier(s)</span>\r\n                        </div>\r\n                        <!-- ko if: goal -->\r\n                        <div class="span9" data-bind="multiselect: { options: $parents[1].computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                        <!-- /ko -->\r\n                        <!-- ko if: !goal() -->\r\n                        <span class="span9">No barriers</span>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                    <!-- ko foreach: customAttributes().sort($parents[1].alphabeticalOrderSort) -->\r\n                    <!-- ko compose: path -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </section>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.interventionsSectionOpen">\r\n                <h4 class="pull-left">Care Manager Interventions</h4>\r\n                <a class="btn color small pull-right" href="#" data-bind="click: $parent.addIntervention, clickBubble: false">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Add Intervention</span>\r\n                </a>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.interventionsSectionOpen">\r\n                <div data-bind="visible: interventions().length === 0" class="empty-message">No interventions.</div>\r\n                <!-- ko foreach: interventions -->\r\n                <section class="data-set clearfix">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Description</span>\r\n                        </div>\r\n                        <div class="span7">\r\n                            <input data-bind="value: description" class="string optional" maxlength="500" type="text" />\r\n                        </div>\r\n                        <a class="delete pull-right" href="#" data-bind="click: $parents[1].removeIntervention">\r\n                            <i class="icon-cancel"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].interventionStatuses, value: status, text: \'name\', label: \'interventionstatuses\', disabled: $parent.isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Category</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].interventionCategories, value: category, text: \'name\', label: \'interventioncategories\' }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Assigned To</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <div data-bind="chsnsingle: { options: $parents[1].careManagers, value: assignedToId, text: \'preferredName\', label: \'caremanagers\', idValue: \'id\' }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Associated Barrier(s)</span>\r\n                        </div>\r\n                        <!-- ko if: goal -->\r\n                        <div class="span9" data-bind="multiselect: { options: $parents[1].computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                        <!-- /ko -->\r\n                        <!-- ko if: !goal() -->\r\n                        <span class="span9">No barriers</span>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </section>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n        <div class="row pad-top divider">\r\n            <button class="btn" data-bind="click: $parent.cancel">Cancel</button>\r\n            <button class="btn color" data-bind="click: $parent.save, enable: $parent.canSave">Save</button>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientssections/goalssection.html',[],function () { return '<table data-bind="with: selectedPatient">\r\n    <thead>\r\n        <tr>\r\n            <th>Goal Name</th>\r\n            <th>Focus Areas</th>\r\n            <th>Status</th>\r\n            <th>Tasks </th>\r\n            <th>Barriers </th>\r\n            <th>Interventions </th>\r\n            <th colspan="2"></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody data-bind="foreach: goals">\r\n        <!-- ko if: !isNew() -->\r\n        <tr class="filter-toggle" data-bind="click: $parents[1].setActiveGoal, css: { active: $parents[1].activeGoal() === $data }">\r\n            <td data-bind="text: name, attr: { \'title\': name }"></td>\r\n            <td data-bind="text: focusAreaString, attr: { \'title\': name }"></td>\r\n            <td data-bind="with: status"><span data-bind="text: name, attr: { \'title\': name }"></span></td>\r\n            <td data-bind="text: tasks().length, attr: { \'title\': tasks().length }"></td>\r\n            <td data-bind="text: barriers().length, attr: { \'title\': barriers().length }"></td>\r\n            <td data-bind="text: interventions().length, attr: { \'title\': interventions().length }"></td>\r\n            <td class="narrow">\r\n                <a class="filter-toggle" href="#" data-bind="click: $parents[1].editGoal, clickBubble: false">\r\n                    <i class="icon-edit"></i>\r\n                </a>\r\n            </td>\r\n            <td class="narrow">\r\n                <a href="#" data-bind="click: $parents[1].deleteGoal, clickBubble: false"><i class="icon-cancel"></i></a>\r\n            </td>\r\n        </tr>\r\n        <!-- /ko -->\r\n    </tbody>\r\n    <!-- ko if: goals().length === 0 -->\r\n    <tbody>\r\n        <tr>\r\n            <td>\r\n                <em class="grey">No goals defined for the individual.</em>\r\n            </td>\r\n        </tr>\r\n    </tbody>\r\n    <!-- /ko -->\r\n</table>';});


define('text!views/patients/patientssections/notessection.html',[],function () { return '<section class="accordion" data-bind="css: { \'open\': isOpen() }, with: group">\r\n    <a data-bind="clickToggle: $parent.isOpen" href="#">\r\n        <h3 class="row line grey accordion-toggle" data-bind="text: Name, attr: { \'title\': Name }"></h3>\r\n    </a>\r\n    <!-- ko foreach: Notes -->\r\n    <div class="row line filter-toggle" data-bind="click: $parents[1].setActiveNote, css: { \'active\': $parents[1].activeNote() === $data }, visible: $parents[1].isOpen">\r\n        <div class="span2 pad-left small grey pull-left" data-bind="Time: createdOn"></div>\r\n        <div class="span5 ellipsis" data-bind="text: text, attr: { \'title\': text }"></div>\r\n        <div class="span4"><span data-bind="with: createdBy"><span data-bind="text: preferredName, attr: { \'title\': preferredName }"></span></span></div>\r\n        <div class="span1">\r\n            <a href="#" data-bind="click: $parents[1].deleteNote, clickBubble: false">\r\n                <i class="icon-cancel red"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';});


define('text!views/patients/patientssections/programssection.html',[],function () { return '<section class="accordion" data-bind="css: { \'open\': isOpen() }, with: program">\r\n    <div class="row accordion-toggle" data-bind="clickToggle: $parent.isOpen">\r\n        <h2>\r\n            <a href="#" data-bind="text: name, clickBubble: false" ></a>\r\n        </h2>\r\n    </div>\r\n    <div class="accordion-content" data-bind="visible: $parent.isOpen">\r\n        <table class="goal-action">\r\n            <tbody>\r\n                <tr><th>Modules</th><th class="icon">Action</th></tr>\r\n                <!-- ko foreach: modules -->\r\n                <tr data-bind="visible: enabled() === true">\r\n                    <td class="flush">\r\n                        <table class="nowrap">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td class="image-container">\r\n                                        <!-- ko if: completed() === true -->\r\n                                        <i class="icon-check green"></i>\r\n                                        <!-- /ko -->\r\n                                    </td>\r\n                                    <td class="module" data-bind="with: name">\r\n                                        <!-- ko if: $parent.completed() === true -->\r\n                                        <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em><em> - <span data-bind="Date: $parent.dateCompleted"></span></em>\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: $parent.completed() === false -->\r\n                                        <span data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                        <!-- /ko -->\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </td>\r\n                    <td class="flush">\r\n                        <table class="nowrap">\r\n                            <tbody data-bind="foreach: actions().sort($root.alphabeticalOrderSort)">\r\n                                <tr>\r\n                                    <td class="filter-toggle image-container" data-bind="click: $parents[2].setActiveAction, css: { \'active\': $data === $parents[2].activeAction(), \'dirty\': hasChanges() }">\r\n                                        <!-- ko if: hasChanges() -->\r\n                                        <img src="/NightingaleUI/Content/images/in_progress.png" class="grey" data-bind="css: { \'icon-spin\': isSaving() }" />\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: completed() === true -->\r\n                                        <i class="icon-check green"></i>\r\n                                        <!-- /ko -->\r\n                                    </td>\r\n                                    <td class="filter-toggle" data-bind="click: $parents[2].setActiveAction, css: { \'active\': $data === $parents[2].activeAction(), \'dirty\': hasChanges() }, with: name">\r\n                                        <!-- ko if: $parent.enabled() === false || $parent.completed() === true && !$parent.isSaving() || $parent.completed() === true && !$parent.hasChanges() && $parent.isSaving() -->\r\n                                        <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em>\r\n                                        <!-- ko if: $parent.completed() === true -->\r\n                                        <em> - <span data-bind="Date: $parent.dateCompleted, attr: { \'title\': $parent.dateCompleted }"></span></em>\r\n                                        <!-- /ko -->\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: $parent.enabled() === true && $parent.completed() === false && !$parent.hasChanges() -->\r\n                                        <span data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: $parent.hasChanges() -->\r\n                                        <strong class="inprogress" data-bind="text: $data, attr: { \'title\': $data }"></strong>\r\n                                        <!-- /ko -->\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </td>\r\n                </tr>\r\n                <!-- /ko -->\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>';});


define('text!views/patients/patientswidgets/actionwidget.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>Details</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="body" data-bind="with: $parents[1].activeAction">\r\n            <!-- ko foreach: computedPath -->\r\n                <!-- ko compose: stepType().path -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/careplanwidget.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>Plan</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="body">\r\n            <!-- ko foreach: $parents[1].selectedPatientsPrograms() -->\r\n                <!-- ko if: elementState() !== 1 -->\r\n                <!-- ko compose: { model: \'viewmodels/patients/patientssections/programssection\', activationData: { activeAction: $parents[2].activeAction, program: $data } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko if: $parents[1].selectedPatient().programs().length === 0 -->\r\n            <section class="accordion open">\r\n                <div class="row accordion-toggle">\r\n                    <h2>\r\n                        <a></a>\r\n                    </h2>\r\n                </div>\r\n                <div class="accordion-content">\r\n                    <table class="goal-action">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>\r\n                                    <em class="grey">No programs loaded for this patient.</em>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/dataentrywidget.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>Details</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="table-row">\r\n            <div class="table-cell">\r\n                <!-- ko compose: { model: \'viewmodels/templates/clinical.dataentry\', activationData: { activeDataType: $parents[1].activeDataType, selectedPatient: $parents[1].selectedPatient, saveDataEntry: $parents[1].saveDataEntry, cancelDataEntry: $parents[1].cancelDataEntry} } -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/datatypewidget.html',[],function () { return '<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>Data-Type</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="table-row">\r\n            <div class="table-cell">\r\n                <div class="body">\r\n                    <ul class="dividers">\r\n                        <!-- ko foreach: $parents[1].dataTypes-->\r\n                        <li class="h3 row line grey filter-toggle" data-bind="text: name, click: $parents[2].setActiveDataType, css: { \'active\': $parents[2].activeDataType() === $data }, attr: { \'title\': name }"></li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/goaldetailwidget.html',[],function () { return '<div class="widget open" data-bind="if: $parents[1].activeGoal">\r\n    <div class="content" data-bind="with: $parents[1].activeGoal">\r\n        <div class="wrapper">\r\n            <div class="header">\r\n                <div class="table-cell">\r\n                    <header>\r\n                        <h1 data-bind="text: (!isNew() ? \'Goal Details\' : \'New Goal\'), attr: { \'title\': \'Goal Details\' }"></h1>\r\n                        <div class="options goals-options">\r\n                            <a class="toggle" data-bind="click: $parents[2].closeSlider" href="#">\r\n                                <i class="icon-cancel"></i>\r\n                            </a>\r\n                        </div>\r\n                    </header>\r\n                </div>\r\n            </div>\r\n            <div class="table-row">\r\n                <div class="table-cell">\r\n                    <!-- ko if: $parents[2].isEditing -->\r\n                    <!-- ko compose: { model: \'viewmodels/patients/patientssections/goaleditsection\', activationData: { activeGoal: $data } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                    <!-- ko if: !$parents[2].isEditing() -->\r\n                    <!-- ko compose: { model: \'viewmodels/patients/patientssections/goaldetailsection\', activationData: { activeGoal: $data } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/goalswidget.html',[],function () { return '<div class="widget open">\r\n    <div class="content">\r\n        <div class="wrapper">\r\n            <div class="header">\r\n                <div class="table-cell">\r\n                    <header>\r\n                        <h1>Goals</h1>\r\n                        <div class="options goals-options">\r\n                            <button class="btn color small filter-toggle" data-bind="click: $parents[1].addGoal, disable: $parents[1].isEditing">\r\n                                <i class="icon-plus"></i>\r\n                                <span class="pad-left">New Goal</span>\r\n                            </button>\r\n                        </div>\r\n                    </header>\r\n                </div>\r\n            </div>\r\n            <div class="table-row">\r\n                <div class="table-cell" data-bind="with: $parents[1].selectedPatient">\r\n                    <div class="body" data-bind="compose: { model: \'viewmodels/patients/patientssections/goalssection\', activationData: { activeGoal: $parents[2].activeGoal, selectedPatient: $data } }">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/historydetailwidget.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>Details</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="table-row">\r\n            <div class="table-cell">\r\n                <div class="body">\r\n                    <div class="filter-content" data-bind="with: $parents[1].activeNote">\r\n                        <div class="row pad-top">\r\n                            <strong class="span3">Programs:</strong>\r\n                            <span class="span9" data-bind="text: programString, attr: { \'title\': programString }"></span>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <strong class="span3">By:</strong>\r\n                            <em class="span9" data-bind="text: createdBy().preferredName, attr: { \'title\': createdBy().preferredName }"></em>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <strong>Note</strong>\r\n                        </div>\r\n                        <div class="row">\r\n                            <textarea disabled="disabled" class="display-only span12" data-bind="text: text, autoHeight: text, attr: { \'title\': text }"></textarea>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/historylistwidget.html',[],function () { return '<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }">\r\n    <div class="content">\r\n        <header>\r\n            <h1>History</h1>\r\n            <!-- ko compose: \'widgets/controls.html\' -->\r\n            <!-- /ko -->\r\n        </header>\r\n        <div class="table-row">\r\n            <div class="table-cell">\r\n                <div class="body">\r\n                    <ul class="dividers">\r\n                        <li class="row line grey">\r\n                            <div class="span2">Date</div>\r\n                            <div class="span5">Note</div>\r\n                            <div class="span5">By</div>\r\n                        </li>\r\n                        <!-- ko foreach: $parents[1].groups -->\r\n                        <li>\r\n                            <!-- ko compose: { model: \'viewmodels/patients/patientssections/notessection\', activationData: { activeNote: $parents[2].activeNote, group: $data } } -->\r\n                            <!-- /ko -->\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/patientsdetailswidget.html',[],function () { return '<div class="widget open">\r\n    <div class="content">\r\n        <header>\r\n            <div class="controls">\r\n                <div class="toggle single-arrow-left" data-method="open" data-type="remove" data-phyautomation="patients-details-left-arrow" data-bind="click: minimizePatientsDataColumn"></div>\r\n                <div class="toggle double-arrow-right" data-method="open" data-type="add" data-phyautomation="patients-details-right-arrows" data-bind="click: maximizePatientsDataColumn"></div>\r\n            </div>\r\n        </header>\r\n        <div class="body" data-bind="with: selectedPatient">\r\n            <!-- ko if: $data -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/patientssections/demographicssection\',  activationData: { selectedPatient: $data }  } -->\r\n            <!-- /ko -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/patientssections/focusareassection\',  activationData: { problems: problems }  } -->\r\n            <!-- /ko -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/patientssections/backgroundsection\',  activationData: { selectedPatient: $data }  } -->\r\n            <!-- /ko -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/patientssections/communicationssection\',  activationData: { contactCard: contactCard }  } -->\r\n            <!-- /ko -->\r\n            <!-- ko compose: { model: \'viewmodels/patients/patientssections/careteamsection\',  activationData: { selectedPatient: $data }  } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/patients/patientswidgets/patientslistflyoutwidget.html',[],function () { return '<div class="widget">\r\n    <div class="content">\r\n        <header>\r\n            <div class="options">\r\n                <div data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n            </div>\r\n            <div class="controls">\r\n                <div class="toggle single-arrow-left" data-bind="click: minimizePatientsListFlyoutColumn" data-method="open" data-type="remove" data-phyautomation="cohort-left-arrow"></div>\r\n                <div class="toggle double-arrow-right" data-bind="click: maximizePatientsListFlyoutColumn" data-method="open" data-type="add" data-phyautomation="cohort-right-arrows"></div>\r\n            </div>\r\n        </header>\r\n        <div class="body">\r\n            <input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" placeholder="Search" type="search" data-phyautomation="cohort-patient-search"/>\r\n            <div class="patients scroll">\r\n                <ul data-bind="foreach: patientsList" data-phyautomation="cohort-patient-list">\r\n                    <li class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                        <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                        <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a><span></span>\r\n                        <span class="line short grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                <div class="push2 span8">\r\n                    <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                        Load more patients...\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/populations/index.html',[],function () { return '';});


define('text!views/programdesigner/customattributes/datepicker.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="datepicker: computedValue().value, datepickerOptions: { }" type="text" class="datepicker">\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datepicker.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="Date: computedValue().value"></p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datetimepicker.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">\r\n        <input data-bind="timepicker: value, valueUpdate: blur" type="time">\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/datetimepicker.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">\r\n        <input data-bind="timepicker: value, attr: { \'disabled\': !value() }" type="time">\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/input.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="value: computedValue().value" />\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/input.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="value: computedValue().value"></p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/multiselect.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <div class="span9" data-bind="multiselect: { options: options, values: values, idValue: \'value\', text: \'display\', label: \'multi\' }"></div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/multiselect.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="foreach: values">\r\n            <span data-bind="text: value"></span>\r\n        </p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/singleselect.edit.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <div data-bind="chsnsingle: { options: options, value: computedValue().value, text: \'display\', label: \'customattribute\', idValue: \'value\' }"></div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/customattributes/singleselect.html',[],function () { return '<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="text: computedValue().value"></p>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/designer/index.html',[],function () { return '<section data-type="full">\r\n    <div data-bind="foreach: columns">\r\n        <!-- ko compose: columntemplate -->\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';});


define('text!views/programdesigner/index.html',[],function () { return '<div class="route">\r\n    <!-- ko compose: navigation.currentSubRoute().subroute -->\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/button.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="text: header"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: completeAction, disable: !computedResponse() && !activeStep() || $parent.completed() === true" />\r\n            <button class="pull-right" data-bind="click: $parent.saveAction, enable: !completed() && $parent.hasChanges()">Save</button>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/checkbox.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': value() === \'true\' }">\r\n                <input type="checkbox" data-bind="checked: value, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed()), clickRadio: $parent.computedResponse" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/datepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: { }, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/datetimepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6">\r\n        <input data-bind="timepicker: value, valueUpdate: blur, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed() || !value())" type="time">\r\n    </div>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/label.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <!-- ko with: text -->\r\n    <p data-bind="text: $data"></p>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/modal.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="text: question"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: $parents[3].toggleModalShowing, disable: !computedResponse() && !activeStep() || $parent.completed() === true" />\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/questioneditor.html',[],function () { return '<div class="row pad pad-top">\r\n    <div class="row">\r\n        <!--Where the question id goes-->\r\n        <h2 class="span4">Question Id</h2>\r\n        <small class="push2 span6">12345</small>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the question type selector goes-->\r\n        <h3 class="span4">Question Type</h3>\r\n        <div data-bind="chsnsingle: { options: questionTypes, value: questionType, text: \'name\', label: \'question-type\' }"></div>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the actual question goes-->\r\n        <h3 class="span4">Question</h3>\r\n        <input class="push2 span6" type="text" data-bind="value: question" />\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/questiontypes/radio.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': $parent.computedResponse() === $data }">\r\n                <input type="radio" data-bind="clickRadio: $parent.computedResponse, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/singleselect.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <label class="control-group">\r\n        <div data-bind="chsnsingle: { options: responses().sort($root.alphabeticalOrderSort), value: computedResponse, text: \'text\', label: \'programs\', disabled: (!computedResponse() && !activeStep() || $parent.completed()) }"></div>\r\n    </label>\r\n</div>';});


define('text!views/programdesigner/questiontypes/textarea.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <textarea data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep() || $parents[1].completed())" maxlength="1000"></textarea>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/textbox.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <input data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text">\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/questiontypes/timepicker.html',[],function () { return '<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="text: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="text: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="value: value, valueUpdate: blur, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="time">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n</div>';});


define('text!views/programdesigner/widgets/modulewidget.html',[],function () { return '<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/programdesigner/widgets/programwidget.html',[],function () { return '<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/shell/alerttypes/error.html',[],function () { return '<div class="alert error" data-bind="visible: showing">\r\n    <div class="message">\r\n        <img src="/NightingaleUI/Content/images/alert_red.png">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/alerttypes/info.html',[],function () { return '<div class="alert info" data-bind="visible: showing">\r\n    <div class="message">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/alerttypes/warning.html',[],function () { return '<div class="alert warning" data-bind="visible: showing, timeOut: showing, timeOutOptions: { delay: 2000 }">\r\n    <div class="message">\r\n        <i class="icon-check green"></i>\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>';});


define('text!views/shell/banner.html',[],function () { return '<header role="banner">\r\n    <img class="brand" data-bind="attr: { src: currentBrand().imageSource }" />    \r\n    <div class="options">\r\n        <div class="user-menu dropdown" data-bind="with: $parent.session.currentUser, clickToggle: $parent.userMenuOpen, css: { \'open\': $parent.userMenuOpen }">\r\n            <div class="dropdown-toggle">\r\n                <a class="disabled" data-bind="text: \'User - \' + userName()"></a>\r\n            </div>\r\n            <div class="dropdown-content">\r\n                <li data-bind="click: $parents[1].session.logOff">\r\n                    <a href="#" data-bind="click: $parents[1].session.logOff">Sign Out</a>\r\n                </li>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="options loading-messages">\r\n        <div class="user-menu dropdown open" data-bind="visible: $parent.compLoadingMessages().length !== 0 && $parent.loadingMessagesShowing() === true ">\r\n            <div class="dropdown-toggle">\r\n                <span class="disabled"><strong>Loading...</strong><i class="icon-spinner icon-spin grey icon-2x"></i></span>\r\n            </div>\r\n            <ul class="dropdown-content" data-bind="foreach: $parent.compLoadingMessages">\r\n                <li class="ellipsis" data-bind="visible: Showing"><p data-bind="text: Message"></p></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</header>';});


define('text!views/shell/quickadd/assign.html',[],function () { return '<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">\r\n                Category\r\n            </span>\r\n        </div>\r\n        <div class="span9">\r\n            <span class="grey">\r\n                Assign\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <div data-bind="chsnsingle: { options: categories, value: selectedCategory, text: \'Name\', label: \'category\' }"></div>\r\n        </div>\r\n        <div class="span9">\r\n            <div data-bind="chsnsingle: { options: contractPrograms, value: selectedProgram, text: \'name\', label: \'programs\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: cancelAssign" class="cancel">Cancel</button>\r\n            <input data-bind="click: saveAssign, disable: !canSave()" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/communication.html',[],function () { return '<form>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Action</span>\r\n        </label>\r\n        <select>\r\n            <option>Left Message</option>\r\n            <option>Spoke with patient</option>\r\n            <option>Busy</option>\r\n        </select>\r\n        <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 140px;" title="">\r\n            <a class="chosen-single" tabindex="-1">\r\n                <span>Left Message</span>\r\n                <div><b></b></div>\r\n            </a>\r\n            <div class="chosen-drop">\r\n                <div class="chosen-search">\r\n                    <input type="text" autocomplete="off" readonly="" />\r\n                </div>\r\n                <ul class="chosen-results"></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Call Notes</span>\r\n            <input type="text" />\r\n        </label>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Date/Time</span>\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161754" />\r\n        </label>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/dataentry.html',[],function () { return '<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">Element</span>\r\n        </div>\r\n        <div class="span3">\r\n            <span class="grey">Value</span>\r\n        </div>\r\n        <div class="span2">\r\n            <span class="grey">Date</span>\r\n        </div>\r\n        <div class="span4">\r\n            <span class="grey">Source</span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span2">\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161755" />\r\n        </div>\r\n        <div class="span3">\r\n            <select>\r\n                <option>Opt 1</option>\r\n                <option>Opt 2</option>\r\n                <option>Opt 3</option>\r\n            </select>\r\n            <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 0px;" title="">\r\n                <a class="chosen-single" tabindex="-1">\r\n                    <span>Opt 1</span>\r\n                    <div><b></b></div>\r\n                </a>\r\n                <div class="chosen-drop">\r\n                    <div class="chosen-search">\r\n                        <input type="text" autocomplete="off" readonly="" />\r\n                    </div>\r\n                    <ul class="chosen-results"></ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="span1">\r\n            <a href="#">\r\n                <i class="icon-plus"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/notes.html',[],function () { return '<form data-bind="with: selectedPatient">\r\n    <ul class="add-form">\r\n        <li data-bind="with: $parent.newNote">\r\n            <div class="input text optional note_content">\r\n                <label class="text optional" for="note_content">Content</label>\r\n                <textarea data-bind="value: text, valueUpdate: \'afterkeydown\'" class="text optional" maxlength="5000"></textarea>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n    <div class="row pad-top" data-bind="with: $parent.newNote">\r\n        <div class="span12 pad-bottom">\r\n            <label>\r\n                <span>Related Program(s)</span>\r\n            </label>\r\n            <div class="span12" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n        </div>\r\n    </div>\r\n    <!-- ko foreach: $parent.lastThreeNotes -->\r\n    <div class="row pad-top divider" data-bind="if: createdOn">\r\n        <a class="span12" href="#" data-bind="click: $parents[1].viewDetails">\r\n            <div class="row">\r\n                <strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n            </div>\r\n            <div class="row">\r\n                <span class="span12 ellipsis" data-bind="text: text"></span>\r\n            </div>\r\n        </a>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div class="position bottom left">\r\n        <div class="pad vertical">\r\n            <a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <input data-bind="click: $parent.save, enable: $parent.canSave" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>';});


define('text!views/shell/quickadd/quickaddpopover.html',[],function () { return '<div data-bind="with: patientIsSelected">\r\n    <div class="popover" data-bind="css: { \'open\': $parent.isShowing }">\r\n        <div class="popover-toggle" data-bind="clickToggle: $parent.isShowing">\r\n            <div class="toggle down-up"></div>\r\n            <strong>Quick Add</strong>\r\n        </div>\r\n        <div class="popover-content">\r\n            <header data-bind="foreach: $parent.quickAddSections">\r\n                <div class="tab">\r\n                    <a data-bind="click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }" href="#">\r\n                        <i data-bind="attr: { class: IconPath }"></i>\r\n                        <span class="pad-left" data-bind="text: Title"></span>\r\n                    </a>\r\n                </div>\r\n            </header>\r\n            <div class="body pad" data-bind="foreach: $parent.quickAddSections">\r\n                <section data-bind="css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }">\r\n                    <!-- ko compose: { model: Path, activationData: { data: $parents[1] } } -->\r\n                    <!-- /ko -->\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/shell/shell.html',[],function () { return '<div>\r\n    <!-- ko with: navigation -->\r\n    <!-- ko compose: \'shell/banner.html\' --><!-- /ko -->\r\n    <!-- ko compose: \'shell/subnav.html\' --><!-- /ko -->\r\n    <!-- /ko -->\r\n    <main role="application" class="page-host" data-bind="router: { cacheViews: true }">\r\n    </main>\r\n    <!-- ko with: currentModal -->\r\n    <div id="modal" data-bind="visible: Showing">\r\n        <div class="content" data-bind="with: Entity">\r\n            <header>\r\n                <h2 class="title">\r\n                    <span data-bind="text: $parent.Title"></span>\r\n                    <i class="close pull-right icon-cancel blue" data-bind="click: $parent.cancelChanges"></i>\r\n                </h2>\r\n            </header>\r\n            <!-- ko if: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: { model: $parent.TemplatePath, activationData: { selectedPatient: selectedPatient, activeDataType: activeDataType, showDropdown: true, showActions: false  } } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko ifnot: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: $parent.TemplatePath -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <footer>\r\n                <div class="pull-right">\r\n                    <a class="btn cancel" data-bind="click: $parent.cancelChanges">Cancel</a>\r\n                    <button class="btn color" data-bind="enable: canSave, click: $parent.saveChanges">Save</button>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div id="alerts" data-bind="foreach: alerts">\r\n        <!-- ko compose: alertPath -->\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/shell/sidebar.html',[],function () { return '<nav role="main" data-bind="foreach: navRoutes, css: { open: $parent.showSideBar() }">\r\n    <a role="menuitem" data-bind="click: $parents[1].setRoute, attr: { href: \'#\' + hash }, css: { active: $parent.currentRoute() === $data }">\r\n        <img data-bind="attr: { src: settings.imageSource }" /><span data-bind="text: settings.content"></span>\r\n    </a>\r\n</nav>';});


define('text!views/shell/subnav.html',[],function () { return '<header role="navigation">\r\n    <div class="menu_toggle" data-bind="click: $parent.toggleNavVisibility">\r\n        <img src="/NightingaleUI/Content/images/main_menu_toggle.png" data-phyautomation="navigation-context-button" />\r\n        <img data-bind="attr: { src: !!currentRoute().config.settings ? currentRoute().config.settings.imageSource : \'\' }" data-phyautomation="route-image" />\r\n        <span data-bind="text: !!currentRoute().config.settings ? currentRoute().config.settings.content : \'\' " data-phyautomation="route-header"></span>\r\n    </div>\r\n    <div>\r\n    <!-- ko compose: \'shell/sidebar.html\' --><!-- /ko -->\r\n    </div>\r\n    <nav class="tabs" data-bind="if: currentRoute">\r\n        <ul data-bind="foreach: currentRoute().config.settings.pages">\r\n            <li data-bind="click: $parent.setSubRoute, css: { \'active\': $parent.currentSubRoute() === $data }" data-phyautomation="route-tabs">\r\n                <a role="menuitem" data-bind="text: content, css: { \'active\': $parent.currentSubRoute() === $data }"></a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <div id="quick-add">\r\n        <!-- ko compose: \'viewmodels/shell/quickadd/quickaddpopover\' -->\r\n        <!-- /ko -->\r\n    </div>\r\n</header>';});


define('text!views/templates/address.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <div class="span12">\r\n                <div class="row">\r\n                    <input data-bind="value: line1, disable: $parent.addressOptedOut" placeholder="line one" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line2, disable: $parent.addressOptedOut" placeholder="line two" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line3, disable: $parent.addressOptedOut" placeholder="line three" />\r\n                </div>\r\n                <div class="row">\r\n                    <input class="span4" data-bind="value: city, disable: $parent.addressOptedOut" placeholder="city" />\r\n                    <select class="span4" data-bind="options: $root.stateList, value: stateId, optionsValue: \'id\', optionsText: \'name\', disable: $parent.addressOptedOut"></select>\r\n                    <input class="span4" data-bind="value: postalCode, disable: $parent.addressOptedOut" placeholder="zip" />\r\n                </div>\r\n                <div class="row">\r\n                    <!-- <div class="span4" data-bind="chsnsingle: { options: $root.stateList, value: stateId, idValue: \'id\', text: \'name\' }, disable: $parent.addressOptedOut"></div> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/address.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <div class="span12 ellipsis">\r\n                <div class="row">\r\n                    <span class="span12 ellipsis" data-bind="text: line1, attr: { title: line1 }"></span>\r\n                </div>\r\n                <div class="row">\r\n                    <span class="span12 ellipsis" data-bind="text: line2, attr: { title: line2 }"></span>\r\n                </div>\r\n                <div class="row">\r\n                    <span class="span12 ellipsis" data-bind="text: line3, attr: { title: line3 }"></span>\r\n                </div>\r\n                <div class="row">\r\n                    <span class="span12 ellipsis" data-bind="text: cityStateZip, attr: { title: cityStateZip }"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/background.html',[],function () { return '<div class="body">\r\n    <div class="row">\r\n        <h4>Background :</h4>\r\n        <textarea class="span12" data-bind="value: background" maxlength="2500"  />\r\n    </div>\r\n</div>';});


define('text!views/templates/clinical.dataentry.html',[],function () { return '<div class="body" data-bind="visible: showing">\r\n\t<section class="accordion" data-bind="if: showDropdown">\r\n\t\t<div class="row">\r\n            <span class="span3"><strong>Select Data Category:</strong></span>\r\n            <div class="span9 pad-left" data-bind="chsnsingle: { options: dataTypes, value: computedActiveDataType, text: \'name\' }"></div>\r\n\t\t</div>\r\n        <div class="row" data-bind="visible: showDropdown">\r\n            <div class="span12">\r\n                <hr>\r\n            </div>\r\n        </div>\r\n\t</section>\r\n    <section class="accordion" data-bind="visible: showing">\r\n        <div class="row" data-bind="with: activeDataType">\r\n            <h3 data-bind="text: name, attr: { title: name }"></h3>\r\n        </div>\r\n        <!-- ko compose: { model: \'viewmodels/patients/patientssections/basicobservations\', activationData: { activeDataType: activeDataType, selectedPatient: selectedPatient } } -->\r\n        <!-- /ko -->\r\n    </section>\r\n    <section class="accordion" data-bind="visible: showing">\r\n        <div class="row" data-bind="visible: showDropdown">\r\n            <div class="span12">\r\n                <hr>\r\n            </div>\r\n        </div>\r\n        <div class="row" data-bind="with: activeDataType">\r\n            <h3 data-bind="text: (\'Additional \' + name()), attr: { title: (\'Additional \' + name()) }"></h3>\r\n        </div>\r\n        <!-- ko compose: { model: \'viewmodels/patients/patientssections/additionalobservations\', activationData: { activeDataType: activeDataType, selectedPatient: selectedPatient } } -->\r\n        <!-- /ko -->\r\n    </section>\r\n    <section class="accordion" data-bind="visible: showActions">\r\n        <div class="row">\r\n            <div class="accordion-content columns">\r\n                <div class="column">\r\n                    <form>\r\n                        <div class="row">\r\n                            <div class="pad vertical">\r\n                            </div>\r\n                            <div class="position bottom right">\r\n                                <button data-bind="click: cancelDataEntry" class="cancel small">Cancel</button>\r\n                                <button data-bind="click: saveDataEntry" class="small color">Save</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>';});


define('text!views/templates/contactcard.html',[],function () { return '  <div class="body">\r\n    <div class="row">\r\n        <nav class="tabs">\r\n            <ul>\r\n                <li data-bind="css: { \'active\': activeTab() === \'general\' }, setActiveTab: \'general\'">\r\n                    <img alt="Phone blue small" src="/NightingaleUI/Content/images/settings_blue.png" />\r\n                    <a role="menuitem">General</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'phones\' }, setActiveTab: \'phones\'">\r\n                    <i class="icon-phone blue"></i>\r\n                    <a role="menuitem">Phone</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'texts\' }, setActiveTab: \'texts\'">\r\n                    <i class="icon-sms blue"></i>\r\n                    <a role="menuitem">Text</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'emails\' }, setActiveTab: \'emails\'">\r\n                    <i class="icon-email blue"></i>\r\n                    <a role="menuitem">Email</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'addresses\' }, setActiveTab: \'addresses\'">\r\n                    <i class="icon-address blue"></i>\r\n                    <a role="menuitem">Address</a>\r\n                </li>\r\n                <li data-bind="css: { \'active\': activeTab() === \'languages\' }, setActiveTab: \'languages\'">\r\n                    <img alt="Language blue small" src="/NightingaleUI/Content/images/nav_population.png" />\r\n                    <a role="menuitem">Language</a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n    <div class="row pad top">\r\n        <h2 class="span12" data-bind="text: $parent.fullName, attr: { title: $parent.fullName }"></h2>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'general\'">\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Communication Modes</h4>\r\n                    <ul>\r\n                        <li class="row">\r\n                            <strong class="span4">Mode</strong>\r\n                            <strong class="span4">Opt-Out?</strong>\r\n                            <strong class="span4">Preferred?</strong>\r\n                        </li>\r\n                        <!-- ko foreach: modes -->\r\n                        <li>\r\n                            <strong class="span4" data-bind="text: name, attr: { title: name }"></strong>\r\n                            <label class="control-group span4">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': optOut }">\r\n                                        <input type="checkbox" data-bind="clickToggle: optOut" />\r\n                                    </span>\r\n                                </div>\r\n                            </label>\r\n                            <label class="control-group span4">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': preferred }">\r\n                                        <input type="checkbox" data-bind="disable: optOut, clickToggle: preferred" />\r\n                                    </span>\r\n                                </div>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span6">\r\n                    <h4>Preferred Days of Week</h4>\r\n                    <ul>\r\n                        <!-- ko foreach: $root.daysOfWeek -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredDaysOfWeek().indexOf(Code) !== -1 || $parent.preferredDaysOfWeek() === \'Any\') }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredDaysOfWeekIds, setValue: Id" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: Name, css: { \'grey\': ($parent.preferredDaysOfWeek().indexOf(Code) !== -1) }, attr: { title: Name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n                <div class="span6">\r\n                    <h4>Preferred Times of Day</h4>\r\n                    <ul>\r\n                        <!-- ko foreach: $root.timesOfDay -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredTimesOfDay().indexOf(name()) !== -1) }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredTimesOfDayIds, setValue: id()" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: name, css: { \'grey\': ($parent.preferredDaysOfWeek().indexOf(name()) !== -1) }, attr: { title: name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                    <h4>Time Zone</h4>\r\n                    <select class="row" data-bind="options: $root.timeZones, value: timeZoneId, optionsValue: \'id\', optionsText: \'name\'"></select>\r\n                    <!-- <div class="row" data-bind="chsnsingle: { options: $root.timeZones, value: timeZoneId, idValue: \'id\', text: \'name\' }"></div> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'texts\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span10">Number</strong>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredText() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredText, setValue: \'null\', disable: textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones -->\r\n            <!-- ko if: (isText() && !optOut()) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': textPreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredText, setValue: $data, disable: $parent.textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span10">\r\n                    <!-- ko compose: \'templates/phone.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'phones\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Number</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <a class="span2 btn small color pull-right" data-bind="click: addPhone">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Phone</span>\r\n                </a>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredPhone() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredPhone, disable: phoneOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': phonePreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredPhone, disable: ($parent.phoneOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row" data-bind="visible: $parent.phoneOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="row" data-bind="options: $root.phoneTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.phoneOptedOut()"></select>\r\n                    <!-- <div class="row" data-bind="visible: !$parent.phoneOptedOut(), chsnsingle: { options: $root.phoneTypes, value: typeId, idValue: \'id\', text: \'name\', label: \'phones\' }"></div> -->\r\n                </div>\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/phone.edit.html\' -->\r\n                    <!-- /ko -->\r\n                    <label class="row">\r\n                        <span>SMS</span>\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': isText }">\r\n                                <input type="checkbox" data-bind="clickToggle: isText, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removePhone"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'emails\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Email Address</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <a class="span2 btn small color pull-right" data-bind="click: addEmail">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Email</span>\r\n                </a>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredEmail() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredEmail, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: emails().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredEmail, disable: ($parent.emailOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.emailOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="span2" data-bind="options: $root.emailTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.emailOptedOut()"></select>\r\n                <!-- <div class="span2" data-bind="visible: !$parent.emailOptedOut(), chsnsingle: { options: $root.emailTypes, value: typeId, idValue: \'id\', text: \'name\', label: \'emails\' }"></div> -->\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/email.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.emailOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeEmail"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'addresses\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Address</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <a class="span2 btn small color pull-right" data-bind="click: addAddress">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Address</span>\r\n                </a>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredAddress() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredAddress, disable: addressOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: addresses -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredAddress, disable: ( $parent.addressOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.addressOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                <select class="span2" data-bind="options: $root.addressTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.addressOptedOut()"></select>\r\n                <!-- <div class="span2" data-bind="visible: !$parent.addressOptedOut(), chsnsingle: { options: $root.addressTypes, value: typeId, idValue: \'id\', text: \'name\', label: \'addresses\' }"></div> -->\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/address.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.addressOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeAddress"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'languages\'">\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Add new spoken language</h4>\r\n                    <div class="row">\r\n                        <div class="span9" data-bind="chsnsingle: { options: $root.languages, value: newLanguage, text: \'name\', label: \'languages\' }"></div>\r\n                        <button class="span3 btn small color pull-right" data-bind="click: addLanguage, enable: newLanguage">\r\n                            <i class="icon-plus"></i>\r\n                            <span class="pad-left">Language</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <ul class="list-items">\r\n                    <li class="row">\r\n                        <strong class="span2">Preferred?</strong>\r\n                        <strong class="span10">Language</strong>\r\n                    </li>\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': !preferredLanguage() }">\r\n                                    <input type="radio" data-bind="clickRadio: preferredLanguage, setValue: \'null\'" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <strong class="span10"> None</strong>\r\n                    </li>\r\n                    <!-- ko foreach: languages -->\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': preferred }">\r\n                                    <input type="radio" data-bind="clickRadio: $parent.preferredLanguage, setValue: $data" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="span10">\r\n                            <strong data-bind="text: name, attr: { title: name }"></strong>\r\n                        </div>\r\n                    </li>\r\n                    <!-- /ko -->\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/email.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <input data-bind="value: text, disable: $parent.emailOptedOut" placeholder="email" />\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/email.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span class="span12 ellipsis" data-bind="text: text, attr: { title: text }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/forcephone.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-phone blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { title: formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/language.html',[],function () { return '<div class="row">\r\n    <div class="span2 grey">Language</div>\r\n    <div class="span8" data-bind="text: name, attr: { title: name }"></div>\r\n</div>';});


define('text!views/templates/observation.add.html',[],function () { return '<div class="row pad top" data-bind="with: observation">\r\n    <div class="span2">\r\n        <span data-bind="text: name, attr: { title: name }"></span> <span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n    </div>\r\n    <div class="span2">\r\n        <input type="text" data-bind="value: computedValue().value, valueUpdate: \'afterkeydown\', css: { \'invalid\': (!computedValue().value() && startDate()) }">\r\n    </div>\r\n    <div class="span3">\r\n        <input class="datepicker" type="text" data-bind="datepicker: startDate, valueUpdate: \'afterkeydown\', datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (computedValue().value() && !moment(startDate()).isValid()) }">\r\n    </div>\r\n    <div class="span4">\r\n        <label>\r\n            <span data-bind="text: computedValue().previousValueString, attr: { title: computedValue().previousValueString }"></span>\r\n        </label>\r\n    </div>\r\n    <div class="span1 pull-left">\r\n        <a href="#" data-bind="click: $parent.addNew, disable: !$parent.canAdd(), css: { \'disabled\': !$parent.canAdd() }">\r\n            <i class="icon-plus"></i>\r\n        </a>\r\n    </div>\r\n</div>';});


define('text!views/templates/observation.bloodpressure.add.html',[],function () { return '<div class="row pad top" data-bind="with: observation">\r\n    <div class="span2">\r\n        <span data-bind="text: name, attr: { title: name }"></span> <span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n    </div>\r\n    <div class="span4">\r\n        <div class="row">\r\n            <div class="span6">\r\n                <input type="text" data-bind="value: $parent.systolicObservationValue().value, valueUpdate: \'afterkeydown\', css: { \'invalid\': (!$parent.systolicObservationValue().value() && ($parent.diastolicObservationValue().value() || startDate())) }">\r\n            </div>\r\n            <div class="span6">\r\n                <input type="text" data-bind="value: $parent.diastolicObservationValue().value, valueUpdate: \'afterkeydown\', css: { \'invalid\': (!$parent.diastolicObservationValue().value() && ($parent.systolicObservationValue().value() || startDate())) }">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="span3">\r\n        <input class="datepicker" type="text" data-bind="datepicker: startDate, datepickerOptions: { maxDate: \'+0\' }, css: { \'invalid\': (($parent.diastolicObservationValue().value() || $parent.systolicObservationValue().value()) && !moment(startDate()).isValid()) }" />\r\n    </div>\r\n    <div class="span2">\r\n        <label>\r\n            <span data-bind="text: $parent.customBPString, attr: { title: $parent.customBPString }"></span>\r\n        </label>\r\n    </div>\r\n    <div class="span1 pull-left">\r\n        <a href="#" data-bind="click: $parent.addNew, enable: $parent.canAdd, css: { \'disabled\': !$parent.canAdd() }">\r\n            <i class="icon-plus"></i>\r\n        </a>\r\n    </div>\r\n</div>';});


define('text!views/templates/patient.html',[],function () { return '<div class="body">\r\n    <div class="row">\r\n        <h2 class="span12" data-bind="text: fullName"></h2>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>First Name</span>\r\n            <input type="text" data-bind="value: firstName, valueUpdate: \'afterkeydown\'" placeholder="first name" />\r\n            <span><em class="grey" data-bind="visible: firstName().length === 0">First name is required</em></span>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Middle Name</span>\r\n            <input type="text" data-bind="value: middleName, valueUpdate: \'afterkeydown\'" placeholder="middle name" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Last Name</span>\r\n            <input type="text" data-bind="value: lastName, valueUpdate: \'afterkeydown\'" placeholder="last name" />\r\n            <span><em class="grey" data-bind="visible: lastName().length === 0">Last name is required</em></span>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Suffix</span>\r\n            <input type="text" data-bind="value: suffix, valueUpdate: \'afterkeydown\'" placeholder="suffix" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Preferred Name</span>\r\n            <input type="text" data-bind="value: preferredName, valueUpdate: \'afterkeydown\'" placeholder="preferred name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>DOB</span>\r\n            <input type="text" data-bind="value: dOB, valueUpdate: \'afterkeydown\'" placeholder="date of birth" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Override SSN - <span data-bind="with: formattedSSN">(<span data-bind="text: $data"></span>)</span>:</span>\r\n            <input type="text" data-bind="value: fullSSN" placeholder="full ssn" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6" data-bind="with: genderModel">\r\n            <div class="row">\r\n                <span class="">Gender</span>\r\n                <img alt="Patient small" class="" data-bind="attr: { src: SmallImgSrc }" />\r\n                <div class="span8" data-bind="chsnsingle: { options:  $root.genders, value: $parent.gender, text: \'Description\', idValue: \'Gender\' }"></div>\r\n            </div>\r\n        </label>\r\n        <label class="span6" data-bind="with: priorityModel">\r\n            <div class="row">   \r\n                <span>Priority</span>\r\n                <img data-bind="attr: { src: imageSource }">\r\n                <div class="span8" data-bind="chsnsingle: { options:  $root.priorities, value:  $parent.priority, text: \'levelName\', idValue: \'id\' }"></div>\r\n            </div>\r\n        </label>\r\n    </div>\r\n</div>';});


define('text!views/templates/phone.edit.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' blue\' }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <input data-bind="value: number, disable: $parent.phoneOptedOut" placeholder="number" />\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/templates/phone.html',[],function () { return '<div class="row">\r\n    <div class="span2">\r\n        <i class="blue" data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' blue\' }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { \'title\': formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/widgets/controls.html',[],function () { return '<div class="controls">\r\n    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: $parents[1].minimizeThisColumn, enable: $parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: $parents[1].maximizeThisColumn, enable: !$parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: $parents[1].toggleFullScreen, clickBubble: false">\r\n    </div>\r\n</div>';});


define('text!widgets/chsnmultiple/view.html',[],function () { return '<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/chsnmultiple/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."})},e.prototype.attached=function(){},e});

define('text!widgets/chsnsingle/view.html',[],function () { return '<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosenUpdater: selectedValue, disable: disabled"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosenUpdater: selectedValue, disable: disabled"></select>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/chsnsingle/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.disabled=t.settings.disabled,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.isObservable(e[t.text])?ko.computed(e[t.text]):ko.computed(function(){return e[t.text]})}),e})},e.prototype.attached=function(){},e});

define('text!widgets/multiselect/view.html',[],function () { return '<div class="chosen-container chosen-container-multi chosen-container-active" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <ul class="chosen-choices">\r\n        <li class="search-field">\r\n            <input type="text" class="default" data-bind="value: computedLabel, click: toggleDropdown, event: { mouseover: stopClosing, mouseleave: startClosing }, disable: isDisabled">\r\n        </li>\r\n    </ul>\r\n    <div class="chosen-drop" data-bind="visible: showing, event: { mouseover: stopClosing, mouseleave: startClosing }">\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.stringValue().indexOf(thisText()) !== -1 }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>';});

define('widgets/multiselect/viewmodel',["durandal/composition"],function(){function e(){t||(t=require("services/datacontext"))}var t,n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.canClose=ko.observable(!1),a.showing=ko.observable(!1),a.options=a.settings.options,a.selectedValues=a.settings.values,a.text=a.settings.text,a.label=a.settings.label,a.idValue=a.settings.idValue,a.stringValue=a.settings.stringValue,a.computedOptions=ko.computed(function(){var e=a.options();return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[a.text])}),e}),a.computedLabel=ko.computed(function(){return a.selectedValues()?a.selectedValues().length+" selected.":"Choose..."}),a.selectOption=function(n){e();var r=ko.utils.arrayFirst(a.selectedValues(),function(e){return e.id()===n.id()});if(r)a.selectedValues.remove(r);else{var i={id:n.id()};thisComplexType=t.createComplexType("Identifier",i),a.selectedValues.push(thisComplexType)}},a.checkClosing=ko.computed(function(){a.canClose()&&a.showing(!1)}).extend({throttle:1e3}),a.isDisabled=ko.computed(function(){var e=!1;return a.settings.disabled&&(e=a.settings.disabled),e})},n.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},n.prototype.startClosing=function(){var e=this;e.canClose(!1),e.canClose(!0)},n.prototype.stopClosing=function(){var e=this;e.canClose(!1)},n.prototype.attached=function(){},n});

define('text!widgets/singleselect/view.html',[],function () { return '<div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 150px;" title="" id="filter_chosen" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <a class="chosen-single" data-bind="click: toggleDropdown, attr: { \'data-phyautomation\': label + \'-dropdown-button\' }, event: { mouseover: stopClosing, mouseleave: startClosing }, disable: isDisabled">\r\n        <span data-bind="text: computedLabel"></span>\r\n        <div>\r\n            <b></b>\r\n        </div>\r\n    </a>\r\n    <div class="chosen-drop" data-bind="visible: showing, event: { mouseover: stopClosing, mouseleave: startClosing }">\r\n        <div class="chosen-search">\r\n            <input type="text" autocomplete="off" readonly="" />\r\n        </div>\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions, attr: { \'data-phyautomation\': label + \'-dropdown-results\' } ">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.selectedValue() === $data }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <!-- ko if : computedOptions().length === 0 -->\r\n    <p><em class="grey" data-bind="text: \'No \' + label + \' available\'"></em></p>\r\n    <!-- /ko -->\r\n</div>';});

define('widgets/singleselect/viewmodel',["durandal/composition"],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.canClose=ko.observable(!1),t.showing=ko.observable(!1),t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."}),t.selectOption=function(e){t.idValue?t.selectedValue(e[t.idValue]()):t.selectedValue(e),t.showing(!1)},t.checkClosing=ko.computed(function(){t.canClose()&&t.showing(!1)}).extend({throttle:1e3}),t.isDisabled=ko.computed(function(){var e=!1;return t.settings.disabled&&(e=t.settings.disabled),e})},e.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},e.prototype.startClosing=function(){var e=this;e.canClose(!1),e.canClose(!0)},e.prototype.stopClosing=function(){var e=this;e.canClose(!1)},e.prototype.attached=function(){},e});
define('plugins/dialog',["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,a,r,i,o){function s(t){return e.defer(function(n){e.isString(t)?e.acquire(t).then(function(t){n.resolve(e.resolveObject(t))}).fail(function(n){e.error("Failed to load dialog module ("+t+"). Details: "+n.message)}):n.resolve(t)}).promise()}var c,u={},l=0,d=function(e,t,n){this.message=e,this.title=t||d.defaultTitle,this.options=n||d.defaultOptions};return d.prototype.selectOption=function(e){c.close(this,e)},d.prototype.getView=function(){return r.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(e){delete d.prototype.getView,d.prototype.viewUrl=e},d.defaultTitle=t.title||"Application",d.defaultOptions=["Ok"],d.defaultViewMarkup=['<div data-view="plugins/messageBox" class="messageBox">','<div class="modal-header">','<h3 data-bind="text: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="text: message"></p>',"</div>",'<div class="modal-footer" data-bind="foreach: options">','<button class="btn" data-bind="click: function () { $parent.selectOption($data); }, text: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>',"</div>","</div>"].join("\n"),c={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:function(){return l>0},getContext:function(e){return u[e||"default"]},addContext:function(e,t){t.name=e,u[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,r,i){var o=this,c=u[i||"default"];return e.defer(function(e){s(t).then(function(t){var i=a.create();i.activateItem(t,r).then(function(a){if(a){var r=t.__dialog__={owner:t,context:c,activator:i,close:function(){var n=arguments;i.deactivateItem(t,!0).then(function(a){a&&(l--,c.removeHost(r),delete t.__dialog__,0===n.length?e.resolve():1===n.length?e.resolve(n[0]):e.resolve.apply(e,n))})}};r.settings=o.createCompositionSettings(t,c),c.addHost(r),l++,n.compose(r.host,r.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,n,a){return e.isString(this.MessageBox)?c.show(this.MessageBox,[t,n||d.defaultTitle,a||d.defaultOptions]):c.show(new this.MessageBox(t,n,a))},install:function(e){t.showDialog=function(e,t,n){return c.show(e,t,n)},t.showMessage=function(e,t,n){return c.showMessage(e,t,n)},e.messageBox&&(c.MessageBox=e.messageBox),e.messageBoxView&&(c.MessageBox.prototype.getView=function(){return e.messageBoxView})}},c.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=i("body"),n=i('<div class="modalBlockout"></div>').css({"z-index":c.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),a=i('<div class="modalHost"></div>').css({"z-index":c.getNextZIndex()}).appendTo(t);if(e.host=a.get(0),e.blockout=n.get(0),!c.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var r=i("html"),o=t.outerWidth(!0),s=r.scrollTop();i("html").css("overflow-y","hidden");var u=i("body").outerWidth(!0);t.css("margin-right",u-o+parseInt(e.oldBodyMarginRight,10)+"px"),r.scrollTop(s)}},removeHost:function(e){if(i(e.host).css("opacity",0),i(e.blockout).css("opacity",0),setTimeout(function(){o.removeNode(e.host),o.removeNode(e.blockout)},this.removeDelay),!c.isOpen()){var t=i("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?i("body").css("margin-right",e.oldBodyMarginRight):i("body").css("margin-right","")}},attached:function(e){i(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var a=c.getDialog(n.model),r=i(e),o=r.find("img").filter(function(){var e=i(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});r.data("predefinedWidth",r.get(0).style.width);var s=function(){setTimeout(function(){r.data("predefinedWidth")||r.css({width:""});var e=r.outerWidth(!1),t=r.outerHeight(!1),n=i(window).height(),o=Math.min(t,n);r.css({"margin-top":(-o/2).toString()+"px","margin-left":(-e/2).toString()+"px"}),r.data("predefinedWidth")||r.outerWidth(e),t>n?r.css("overflow-y","auto"):r.css("overflow-y",""),i(a.host).css("opacity",1),r.css("visibility","visible"),r.find(".autofocus").first().focus()},1)};s(),o.load(s),r.hasClass("autoclose")&&i(a.blockout).click(function(){a.close()})}}),c});
define('plugins/http',["jquery","knockout"],function(e,t){return{callbackParam:"callback",get:function(t,n){return e.ajax(t,{data:n})},jsonp:function(t,n,a){return-1==t.indexOf("=?")&&(a=a||this.callbackParam,t+=-1==t.indexOf("?")?"?":"&",t+=a+"=?"),e.ajax({url:t,dataType:"jsonp",data:n})},post:function(n,a){return e.ajax({url:n,data:t.toJSON(a),type:"POST",contentType:"application/json",dataType:"json"})}}});
define('plugins/observable',["durandal/system","durandal/binder","knockout"],function(e,t,n){function a(e){var t=e[0];return"_"===t||"$"===t}function r(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function i(e){if(!e||r(e)||e.ko===n||e.jquery)return!1;var t=p.call(e);return-1==m.indexOf(t)&&!(e===!0||e===!1)}function o(e,t){var n=e.__observable__,a=!0;if(!n||!n.__full__){n=n||(e.__observable__={}),n.__full__=!0,g.forEach(function(n){e[n]=function(){a=!1;var e=h[n].apply(t,arguments);return a=!0,e}}),f.forEach(function(n){e[n]=function(){a&&t.valueWillMutate();var r=v[n].apply(e,arguments);return a&&t.valueHasMutated(),r}}),y.forEach(function(n){e[n]=function(){for(var r=0,i=arguments.length;i>r;r++)s(arguments[r]);a&&t.valueWillMutate();var o=v[n].apply(e,arguments);return a&&t.valueHasMutated(),o}}),e.splice=function(){for(var n=2,r=arguments.length;r>n;n++)s(arguments[n]);a&&t.valueWillMutate();var i=v.splice.apply(e,arguments);return a&&t.valueHasMutated(),i};for(var r=0,i=e.length;i>r;r++)s(e[r])}}function s(t){var r,s;if(i(t)&&(r=t.__observable__,!r||!r.__full__)){if(r=r||(t.__observable__={}),r.__full__=!0,e.isArray(t)){var c=n.observableArray(t);o(t,c)}else for(var l in t)a(l)||r[l]||(s=t[l],e.isFunction(s)||u(t,l,s));b&&e.log("Converted",t)}}function c(e,t,n){var a;e(t),a=e.peek(),n?a?a.destroyAll||o(a,e):(a=[],e(a),o(a,e)):s(a)}function u(t,a,r){var i,u,l=t.__observable__||(t.__observable__={});if(void 0===r&&(r=t[a]),e.isArray(r))i=n.observableArray(r),o(r,i),u=!0;else if("function"==typeof r){if(!n.isObservable(r))return null;i=r}else e.isPromise(r)?(i=n.observable(),r.then(function(t){if(e.isArray(t)){var a=n.observableArray(t);o(t,a),t=a}i(t)})):(i=n.observable(r),s(r));return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:i,set:n.isWriteableObservable(i)?function(t){t&&e.isPromise(t)?t.then(function(t){c(i,t,e.isArray(t))}):c(i,t,u)}:void 0}),l[a]=i,i}function l(t,a,r){var i,o={owner:t,deferEvaluation:!0};return"function"==typeof r?o.read=r:("value"in r&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof r.get&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),o.read=r.get,o.write=r.set),i=n.computed(o),t[a]=i,u(t,a,i)}var d,p=Object.prototype.toString,m=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],g=["remove","removeAll","destroy","destroyAll","replace"],f=["pop","reverse","sort","shift","splice"],y=["push","unshift"],v=Array.prototype,h=n.observableArray.fn,b=!1;return d=function(e,t){var a,r,i;return e?(a=e.__observable__,a&&(r=a[t])?r:(i=e[t],n.isObservable(i)?i:u(e,t,i))):null},d.defineProperty=l,d.convertProperty=u,d.convertObject=s,d.install=function(e){var n=t.binding;t.binding=function(e,t,a){a.applyBindings&&!a.skipConversion&&s(e),n(e,t)},b=e.logConversion},d});
define('plugins/serializer',["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var n=e[0];if("_"===n||"$"===n)return void 0}return t},serialize:function(t,n){return n=void 0===n?{}:n,(e.isString(n)||e.isNumber(n))&&(n={space:n}),JSON.stringify(t,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var n=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[n]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,n,a){var r=n(t);if(r){var i=a(r);if(i)return i.fromJSON?i.fromJSON(t):new i(t)}return t},deserialize:function(e,t){var n=this;t=t||{};var a=t.getTypeId||function(e){return n.getTypeId(e)},r=t.getConstructor||function(e){return n.typeMap[e]},i=t.reviver||function(e,t){return n.reviver(e,t,a,r)};return JSON.parse(e,i)}}});
define('plugins/widget',["durandal/system","durandal/composition","jquery","knockout"],function(e,t,n,a){function r(e,n){var r=a.utils.domData.get(e,c);r||(r={parts:t.cloneNodes(a.virtualElements.childNodes(e))},a.virtualElements.emptyNode(e),a.utils.domData.set(e,c,r)),n.parts=r.parts}var i={},o={},s=["model","view","kind"],c="durandal-widget-data",u={getSettings:function(t){var n=a.utils.unwrapObservable(t())||{};if(e.isString(n))return{kind:n};for(var r in n)n[r]=-1!=a.utils.arrayIndexOf(s,r)?a.utils.unwrapObservable(n[r]):n[r];return n},registerKind:function(e){a.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,a,i,o){var s=u.getSettings(n);s.kind=e,r(t,s),u.create(t,s,o,!0)}},a.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,n){t&&(o[e]=t),n&&(i[e]=n)},mapKindToModuleId:function(e){return i[e]||u.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return o[e]||u.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,n,a,r){r||(n=u.getSettings(function(){return n},e));var i=u.createCompositionSettings(e,n);t.compose(e,i,a)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var n=e.kinds,i=0;i<n.length;i++)u.registerKind(n[i]);a.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var o=u.getSettings(t);r(e,o),u.create(e,o,i,!0)}},t.composeBindings.push(e.bindingName+":"),a.virtualElements.allowedBindings[e.bindingName]=!0}};return u});
define('transitions/entrance',["durandal/system","durandal/composition","jquery"],function(e,t,n){var a=100,r={marginRight:0,marginLeft:0,opacity:1},i={marginLeft:"",marginRight:"",opacity:"",display:""},o=function(t){return e.defer(function(e){function o(){e.resolve()}function s(){t.keepScrollPosition||n(document).scrollTop(0)}function c(){s(),t.triggerAttach();var e={marginLeft:l?"0":"20px",marginRight:l?"0":"-20px",opacity:0,display:"block"},a=n(t.child);a.css(e),a.animate(r,{duration:u,easing:"swing",always:function(){a.css(i),o()}})}if(t.child){var u=t.duration||500,l=!!t.fadeOnly;t.activeView?n(t.activeView).fadeOut({duration:a,always:c}):c()}else n(t.activeView).fadeOut(a,o)}).promise()};return o});

require(["main"]);
}());