<div class="widget" data-bind="css: { 'open': isOpen, 'fullscreen': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen()}}">
    <div class="content">
        <div class="content-fill">
            <div class="wrapper">
                <div class="content">
                    <div class="filters" data-bind="visible: (filtersHeaderOpen())">
                        <div class="table-cell">
                            <div class="wrapper">
                                <section class="pinned">
                                    <div class="row">
                                        <div class="span6">
                                            <label class="row">
                                                <span class="span2">Types:</span>
                                                <div class="span4" data-bind="multiselect: { options: medSuppTypes, values: selectedMedicationTypes, text: 'name', label: 'types', idValue: 'id' }"></div>
                                            </label>
                                        </div>
                                        <div class="span3 grey">
                                            <label data-bind="visible: (selectedMedicationTypes().length > 0)">
                                                <i class="fa fa-filter red"></i>
                                                Filters applied
                                            </label>
                                            <span style="color: whitesmoke;">-</span>
                                        </div>
                                        <div class="span2 grey" data-bind="visible: (selectedMedicationTypes().length > 0)">
                                            <div class="pull-right filters">
                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters" title="Clear Filter"></i>
                                                <span>&nbsp</span>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                    <div class="header pointer" data-bind="click: toggleWidgetOpen">
                        <div class="table-cell">
                            <header>
                                <h1 data-bind="text: widget.name"></h1>
                                <div class="controls">
                                    <div class="toggle" data-bind="visible: allowAdd">
                                        <i class="pointer icon-plus" data-bind="click: addMedication, clickBubble: false" title="Add"></i>
                                    </div>
                                    <i class="pointer fa fa-filter pad-horizontal" data-bind="click: function () { filtersHeaderOpen(!filtersHeaderOpen()); }, clickBubble: false, css: ((selectedMedicationTypes().length > 0) ? 'red' : (filtersHeaderOpen() ? 'lighterblue': 'lightestblue'))">
                                    </i>
                                    <div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">
                                        <i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { 'fa-spin': medicationSaving }"></i>
                                    </div>
                                    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: widget.column.isOpen(), clickBubble: false">
                                    </div>
                                    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !widget.column.isOpen(), clickBubble: false">
                                    </div>
                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="clickToggle: isFullScreen, clickBubble: false">
                                    </div>
                                </div>
                            </header>
                        </div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell">
                            <div class="body">
                                <div class="content">
                                    <div data-bind="compose: { model: 'viewmodels/templates/medications.panel', activationData: { medications: myMedications, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
