/*!	@license 
	Licensed Materials - Property of IBM
	PID : 5725-Z49
	Copyright IBM Corp. 2013, 2016
	US Government Users Restricted Rights- Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
*/
!function(){var e,t,n;!function(a){function r(e,t){return k.call(e,t)}function i(e,t){var n,a,r,i,s,o,d,l,c,p,u=t&&t.split("/"),v=b.map,m=v&&v["*"]||{};if(e&&"."===e.charAt(0))if(t){for(u=u.slice(0,u.length-1),e=u.concat(e.split("/")),l=0;l<e.length;l+=1)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((u||m)&&v){for(n=e.split("/"),l=n.length;l>0;l-=1){if(a=n.slice(0,l).join("/"),u)for(c=u.length;c>0;c-=1)if(r=v[u.slice(0,c).join("/")],r&&(r=r[a])){i=r,s=l;break}if(i)break;!o&&m&&m[a]&&(o=m[a],d=l)}!i&&o&&(i=o,s=d),i&&(n.splice(0,s,i),e=n.join("/"))}return e}function s(e,t){return function(){return m.apply(a,S.call(arguments,0).concat([e,t]))}}function o(e){return function(t){return i(t,e)}}function d(e){return function(t){y[e]=t}}function l(e){if(r(f,e)){var t=f[e];delete f[e],w[e]=!0,v.apply(a,t)}if(!r(y,e)&&!r(w,e))throw new Error("No "+e);return y[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(t,n,a){e.onResourceLoad&&t&&e.onResourceLoad({defined:n},{id:t},a)}function u(e){return function(){return b&&b.config&&b.config[e]||{}}}var v,m,g,h,y={},f={},b={},w={},k=Object.prototype.hasOwnProperty,S=[].slice;g=function(e,t){var n,a=c(e),r=a[0];return e=a[1],r&&(r=i(r,t),n=l(r)),r?e=n&&n.normalize?n.normalize(e,o(t)):i(e,t):(e=i(e,t),a=c(e),r=a[0],e=a[1],r&&(n=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},h={require:function(e){return s(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:u(e)}}},v=function(e,t,n,i){var o,c,u,v,m,b,k=[];if(i=i||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,m=0;m<t.length;m+=1)if(v=g(t[m],i),c=v.f,"require"===c)k[m]=h.require(e);else if("exports"===c)k[m]=h.exports(e),b=!0;else if("module"===c)o=k[m]=h.module(e);else if(r(y,c)||r(f,c)||r(w,c))k[m]=l(c);else{if(!v.p)throw new Error(e+" missing "+c);v.p.load(v.n,s(i,!0),d(c),{}),k[m]=y[c]}u=n.apply(y[e],k),e&&(o&&o.exports!==a&&o.exports!==y[e]?y[e]=o.exports:u===a&&b||(y[e]=u))}else e&&(y[e]=n);p(e,y,k)},e=t=m=function(e,t,n,r,i){return"string"==typeof e?h[e]?h[e](t):l(g(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=n,n=null):e=a),t=t||function(){},"function"==typeof n&&(n=r,r=i),r?v(a,e,t,n):setTimeout(function(){v(a,e,t,n)},4),m)},m.config=function(e){return b=e,b.deps&&m(b.deps,b.callback),m},e._defined=y,n=function(e,t,n){t.splice||(n=t,t=[]),r(y,e)||r(f,e)||(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("durandal/system",["require","jquery"],function(t,n){function a(e){var t="[object "+e+"]";r["is"+e]=function(e){return d.call(e)==t}}var r,i=!1,s=Object.keys,o=Object.prototype.hasOwnProperty,d=Object.prototype.toString,l=!1,c=Array.isArray,p=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(u){l=!0}t.on&&t.on("moduleLoaded",function(e,t){r.setModuleId(e,t)}),"undefined"!=typeof e&&(e.onResourceLoad=function(e,t,n){r.setModuleId(e.defined[t.id],t.id)});var v=function(){},m=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==p.call(arguments).length&&"string"==typeof p.call(arguments)[0]?console.log(p.call(arguments).toString()):console.log.apply(console,p.call(arguments));else Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,p.call(arguments))}catch(t){}},g=function(e,t){var n;n=e instanceof Error?e:new Error(e),n.innerError=t;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(a){}throw n};r={version:"2.1.0",noop:v,getModuleId:function(e){return e?"function"==typeof e&&e.prototype?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e&&e.prototype?void(e.prototype.__moduleId__=t):void("string"!=typeof e&&(e.__moduleId__=t)):void 0},resolveObject:function(e){return r.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(i=e,i?(this.log=m,this.error=g,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=v,this.error=v)),i},log:v,error:v,assert:function(e,t){e||r.error(new Error(t||"Assert:Failed"))},defer:function(e){return n.Deferred(e)},guid:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)})},acquire:function(){var e,n=arguments[0],a=!1;return r.isArray(n)?(e=n,a=!0):e=p.call(arguments,0),this.defer(function(n){t(e,function(){var e=arguments;setTimeout(function(){e.length>1||a?n.resolve(p.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=p.call(arguments,1),n=0;n<t.length;n++){var a=t[n];if(a)for(var r in a)e[r]=a[r]}return e},wait:function(e){return r.defer(function(t){setTimeout(t.resolve,e)}).promise()}},r.keys=s||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)o.call(e,n)&&(t[t.length]=n);return t},r.isElement=function(e){return!(!e||1!==e.nodeType)},r.isArray=c||function(e){return"[object Array]"==d.call(e)},r.isObject=function(e){return e===Object(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isPromise=function(e){return e&&r.isFunction(e.then)};for(var h=["Arguments","Function","String","Number","Date","RegExp"],y=0;y<h.length;y++)a(h[y]);return r}),n("durandal/viewEngine",["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){var t=this.viewPlugin?this.viewPlugin+"!":"";return t+e+this.viewExtension+this.viewPluginParameters},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],a=0;a<e.length;a++){var r=e[a];if(8!=r.nodeType){if(3==r.nodeType){var i=/\S/.test(r.nodeValue);if(!i)continue}n.push(r)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(e){return this.cache[e]},putViewInCache:function(e,t){this.cache[e]=t},createView:function(t){var n=this,a=this.convertViewIdToRequirePath(t),r=this.tryGetViewFromCache(a);return r?e.defer(function(e){e.resolve(r.cloneNode(!0))}).promise():e.defer(function(r){e.acquire(a).then(function(e){var i=n.processMarkup(e);i.setAttribute("data-view",t),n.putViewInCache(a,i),r.resolve(i.cloneNode(!0))}).fail(function(e){n.createFallbackView(t,a,e).then(function(e){e.setAttribute("data-view",t),n.cache[a]=e,r.resolve(e.cloneNode(!0))})})}).promise()},createFallbackView:function(t,n,a){var r=this,i='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(r.processMarkup('<div class="durandal-view-404">'+i+"</div>"))}).promise()}}}),n("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.getAttribute("data-view");if(r==t)return a}}function a(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var r=new RegExp(a(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(r,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,a){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,n,a);if(t.viewUrl)return this.locateView(t.viewUrl,n,a);var i=e.getModuleId(t);return i?this.locateView(this.convertModuleIdToViewId(i),n,a):this.locateView(this.determineFallbackViewId(t),n,a)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),a=n&&n.length>1?n[1]:"";return a=a.trim(),"views/"+a},translateViewIdToArea:function(e,t){return e},locateView:function(a,r,i){if("string"==typeof a){var s;if(s=t.isViewUrl(a)?t.convertViewUrlToViewId(a):a,r&&(s=this.translateViewIdToArea(s,r)),i){var o=n(i,s);if(o)return e.defer(function(e){e.resolve(o)}).promise()}return t.createView(s)}return e.defer(function(e){e.resolve(a)}).promise()}}}),n("durandal/binder",["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function a(a,l,c,p){if(!l||!c)return void(r.throwOnErrors?e.error(i):e.log(i,l,p));if(!l.getAttribute)return void(r.throwOnErrors?e.error(s):e.log(s,l,p));var u=l.getAttribute("data-view");try{var v;return a&&a.binding&&(v=a.binding(l)),v=n(v),r.binding(p,l,v),v.applyBindings?(e.log("Binding",u,p),t.applyBindings(c,l)):a&&t.utils.domData.set(l,d,{$data:a}),r.bindingComplete(p,l,v),a&&a.bindingComplete&&a.bindingComplete(l),t.utils.domData.set(l,o,v),v}catch(m){m.message=m.message+";\nView: "+u+";\nModuleId: "+e.getModuleId(p),r.throwOnErrors?e.error(m):e.log(m.message)}}var r,i="Insufficient Information to Bind",s="Unexpected View Type",o="durandal-binding-instruction",d="__ko_bindingContext__";return r={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,o)},bindContext:function(e,t,n,r){return n&&e&&(e=e.createChildContext(n,"string"==typeof r?r:null)),a(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return a(e,t,e,e)}}}),n("durandal/activator",["durandal/system","knockout"],function(e,t){function n(t){return void 0==t&&(t={}),e.isBoolean(t.closeOnDeactivate)||(t.closeOnDeactivate=l.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=l.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=l.defaults.afterDeactivate),t.affirmations||(t.affirmations=l.defaults.affirmations),t.interpretResponse||(t.interpretResponse=l.defaults.interpretResponse),t.areSameItem||(t.areSameItem=l.defaults.areSameItem),t.findChildActivator||(t.findChildActivator=l.defaults.findChildActivator),t}function a(t,n,a){return e.isArray(a)?t[n].apply(t,a):t[n](a)}function r(t,n,a,r,i){if(t&&t.deactivate){e.log("Deactivating",t);var s;try{s=t.deactivate(n)}catch(o){return e.log("ERROR: "+o.message,o),void r.resolve(!1)}s&&s.then?s.then(function(){a.afterDeactivate(t,n,i),r.resolve(!0)},function(t){e.log(t),r.resolve(!1)}):(a.afterDeactivate(t,n,i),r.resolve(!0))}else t&&a.afterDeactivate(t,n,i),r.resolve(!0)}function i(t,n,r,i){var s;if(t&&t.activate){e.log("Activating",t);try{s=a(t,"activate",i)}catch(o){return e.log("ERROR: "+o.message,o),void r(!1)}}s&&s.then?s.then(function(){n(t),r(!0)},function(t){e.log("ERROR: "+t.message,t),r(!1)}):(n(t),r(!0))}function s(t,n,a,r){return r=e.extend({},c,r),a.lifecycleData=null,e.defer(function(i){function s(){if(t&&t.canDeactivate&&r.canDeactivate){var s;try{s=t.canDeactivate(n)}catch(o){return e.log("ERROR: "+o.message,o),void i.resolve(!1)}s.then?s.then(function(e){a.lifecycleData=e,i.resolve(a.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),i.resolve(!1)}):(a.lifecycleData=s,i.resolve(a.interpretResponse(s)))}else i.resolve(!0)}var o=a.findChildActivator(t);o?o.canDeactivate().then(function(e){e?s():i.resolve(!1)}):s()}).promise()}function o(t,n,r,i,s){return r.lifecycleData=null,e.defer(function(o){if(r.areSameItem(n(),t,i,s))return void o.resolve(!0);if(t&&t.canActivate){var d;try{d=a(t,"canActivate",s)}catch(l){return e.log("ERROR: "+l.message,l),void o.resolve(!1)}d.then?d.then(function(e){r.lifecycleData=e,o.resolve(r.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),o.resolve(!1)}):(r.lifecycleData=d,o.resolve(r.interpretResponse(d)))}else o.resolve(!0)}).promise()}function d(a,d){var l,c=t.observable(null);d=n(d);var p=t.computed({read:function(){return c()},write:function(e){p.viaSetter=!0,p.activateItem(e)}});return p.__activator__=!0,p.settings=d,d.activator=p,p.isActivating=t.observable(!1),p.forceActiveItem=function(e){c(e)},p.canDeactivateItem=function(e,t,n){return s(e,t,d,n)},p.deactivateItem=function(t,n){return e.defer(function(e){p.canDeactivateItem(t,n).then(function(a){a?r(t,n,d,e,c):(p.notifySubscribers(),e.resolve(!1))})}).promise()},p.canActivateItem=function(e,t){return o(e,c,d,l,t)},p.activateItem=function(t,n,a){var s=p.viaSetter;return p.viaSetter=!1,e.defer(function(o){if(p.isActivating())return void o.resolve(!1);p.isActivating(!0);var u=c();return d.areSameItem(u,t,l,n)?(p.isActivating(!1),void o.resolve(!0)):void p.canDeactivateItem(u,d.closeOnDeactivate,a).then(function(a){a?p.canActivateItem(t,n).then(function(a){a?e.defer(function(e){r(u,d.closeOnDeactivate,d,e)}).promise().then(function(){t=d.beforeActivate(t,n),i(t,c,function(e){l=n,p.isActivating(!1),o.resolve(e)},n)}):(s&&p.notifySubscribers(),p.isActivating(!1),o.resolve(!1))}):(s&&p.notifySubscribers(),p.isActivating(!1),o.resolve(!1))})}).promise()},p.canActivate=function(){var e;return a?(e=a,a=!1):e=p(),p.canActivateItem(e)},p.activate=function(){var e;return a?(e=a,a=!1):e=p(),p.activateItem(e)},p.canDeactivate=function(e){return p.canDeactivateItem(p(),e)},p.deactivate=function(e){return p.deactivateItem(p(),e)},p.includeIn=function(e){e.canActivate=function(){return p.canActivate()},e.activate=function(){return p.activate()},e.canDeactivate=function(e){return p.canDeactivate(e)},e.deactivate=function(e){return p.deactivate(e)}},d.includeIn?p.includeIn(d.includeIn):a&&p.activate(),p.forItems=function(t){d.closeOnDeactivate=!1,d.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},d.beforeActivate=function(e){var n=p();if(e){var a=t.indexOf(e);-1==a?t.push(e):e=t()[a]}else e=d.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},d.afterDeactivate=function(e,n){n&&t.remove(e)};var n=p.canDeactivate;p.canDeactivate=function(a){return a?e.defer(function(e){function n(){for(var t=0;t<i.length;t++)if(!i[t])return void e.resolve(!1);e.resolve(!0)}for(var r=t(),i=[],s=0;s<r.length;s++)p.canDeactivateItem(r[s],a).then(function(e){i.push(e),i.length==r.length&&n()})}).promise():n()};var a=p.deactivate;return p.deactivate=function(n){return n?e.defer(function(e){function a(a){setTimeout(function(){p.deactivateItem(a,n).then(function(){i++,t.remove(a),i==s&&e.resolve()})},1)}for(var r=t(),i=0,s=r.length,o=0;s>o;o++)a(r[o])}).promise():a()},p},p}var l,c={canDeactivate:!0},p={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t,n,a){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)},findChildActivator:function(e){return null}};return l={defaults:p,create:d,isActivator:function(e){return e&&e.__activator__}}}),n("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,a,r,i,s){function o(t,n,a){try{if(t.onError)try{t.onError(n,a)}catch(r){e.error(r)}else e.error(n)}finally{l(t,a,!0)}}function d(e){for(var t=[],n={childElements:t,activeView:null},a=s.virtualElements.firstChild(e);a;)1==a.nodeType&&(t.push(a),a.getAttribute(S)&&(n.activeView=a)),a=s.virtualElements.nextSibling(a);return n.activeView||(n.activeView=t[0]),n}function l(e,t,n){if(x--,0===x){var a=T;T=[],n||setTimeout(function(){for(var n=a.length;n--;)try{a[n]()}catch(r){o(e,r,t)}},1)}c(e)}function c(e){delete e.activeView,delete e.viewElements}function p(t,n,a,r){if(a)n();else if(t.activate&&t.model&&t.model.activate){var i;try{i=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),i&&i.then?i.then(n,function(e){o(t,e,r),n()}):i||void 0===i?n():l(t,r)}catch(s){o(t,s,r)}}else n()}function u(t,n){var t=this;if(t.activeView&&t.activeView.removeAttribute(S),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(S,!0),t.composingNewView&&t.model&&t.model.detached&&s.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(e){o(t,e,n)}})}catch(a){o(t,a,n)}t.triggerAttach=e.noop}function v(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),a=t.child.getAttribute("data-view");return n!=a}}return!0}return!1}function m(e){for(var t=0,n=e.length,a=[];n>t;t++){var r=e[t].cloneNode(!0);a.push(r)}return a}function g(t){var n=m(t.parts),a=w.getParts(n),r=w.getParts(t.child);for(var s in a){var o=r[s];o||(o=i('[data-part="'+s+'"]',t.child).get(0))?o.parentNode.replaceChild(a[s],o):e.log("Could not find part to override: "+s)}}function h(t){var n,a,r=s.virtualElements.childNodes(t.parent);if(!e.isArray(r)){var i=[];for(n=0,a=r.length;a>n;n++)i[n]=r[n];r=i}for(n=1,a=r.length;a>n;n++)s.removeNode(r[n])}function y(e){s.utils.domData.set(e,C,e.style.display),e.style.display="none"}function f(e){var t=s.utils.domData.get(e,C);e.style.display="none"===t?"block":t}function b(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,a=I.length;a>n;n++)if(t.indexOf(I[n])>-1)return!0;return!1}var w,k={},S="data-active-view",T=[],x=0,P="durandal-composition-data",D="data-part",N=["model","view","transition","area","strategy","activationData","onError"],C="durandal-visibility-data",I=["compose:"],O={complete:function(e){T.push(e)}};return w={composeBindings:I,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:O,addBindingHandler:function(e,t,n){var a,r,i="composition-handler-"+e;t=t||s.bindingHandlers[e],n=n||function(){},r=s.bindingHandlers[e]={init:function(e,a,r,o,d){if(x>0){var l={trigger:s.observable(null)};w.current.complete(function(){t.init&&t.init(e,a,r,o,d),t.update&&(s.utils.domData.set(e,i,t),l.trigger("trigger"))}),s.utils.domData.set(e,i,l)}else s.utils.domData.set(e,i,t),t.init&&t.init(e,a,r,o,d);return n(e,a,r,o,d)},update:function(e,t,n,a,r){var o=s.utils.domData.get(e,i);return o.update?o.update(e,t,n,a,r):void(o.trigger&&o.trigger())}};for(a in t)"init"!==a&&"update"!==a&&(r[a]=t[a])},getParts:function(e,t){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var n=0,a=e.length;a>n;n++){var r,i=e[n];i.getAttribute&&(r=i.getAttribute(D),r&&(t[r]=i),i.hasChildNodes()&&!b(i)&&w.getParts(i.childNodes,t))}return t},cloneNodes:m,finalize:function(t,a){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(v(t)){var r=this.convertTransitionToModuleId(t.transition);e.acquire(r).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=n.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews?s.removeNode(t.activeView):y(t.activeView)}}else t.child?h(t):s.virtualElements.emptyNode(t.parent);t.child&&f(t.child),t.triggerAttach(t,a),l(t,a)})}).fail(function(e){o(t,"Failed to load transition ("+r+"). Details: "+e.message,a)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var i=n.getBindingInstruction(t.activeView);!i||void 0!=i.cacheViews&&!i.cacheViews?s.removeNode(t.activeView):y(t.activeView)}t.child?(t.cacheViews||h(t),f(t.child)):t.cacheViews||s.virtualElements.emptyNode(t.parent)}t.triggerAttach(t,a),l(t,a)}else t.cacheViews||s.virtualElements.emptyNode(t.parent),t.triggerAttach(t,a),l(t,a)},bindAndShow:function(e,t,r,i){r.child=e,r.parent.__composition_context=r,r.cacheViews?r.composingNewView=-1==s.utils.arrayIndexOf(r.viewElements,e):r.composingNewView=!0,p(r,function(){if(r.parent.__composition_context==r){if(delete r.parent.__composition_context,r.binding&&r.binding(r.child,r.parent,r),r.preserveContext&&r.bindingContext)r.composingNewView&&(r.parts&&g(r),y(e),s.virtualElements.prepend(r.parent,e),n.bindContext(r.bindingContext,e,r.model,r.as));else if(e){var i=r.model||k,o=s.dataFor(e);if(o!=i){if(!r.composingNewView)return s.removeNode(e),void a.createView(e.getAttribute("data-view")).then(function(e){w.bindAndShow(e,t,r,!0)});r.parts&&g(r),y(e),s.virtualElements.prepend(r.parent,e),n.bind(i,e)}}w.finalize(r,t)}else l(r,t)},i,t)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t,n){var i,o=t(),d=s.utils.unwrapObservable(o)||{},l=r.isActivator(o);if(e.isString(d))return d=a.isViewUrl(d)?{view:d}:{model:d,activate:!l};if(i=e.getModuleId(d))return d={model:d,activate:!l};!l&&d.model&&(l=r.isActivator(d.model));for(var c in d)-1!=s.utils.arrayIndexOf(N,c)?d[c]=s.utils.unwrapObservable(d[c]):d[c]=d[c];return l?d.activate=!1:void 0===d.activate&&(d.activate=!0),d},executeStrategy:function(e,t){e.strategy(e).then(function(n){w.bindAndShow(n,t,e)})},inject:function(n,a){return n.model?n.view?void t.locateView(n.view,n.area,n.viewElements).then(function(e){w.bindAndShow(e,a,n)}):(n.strategy||(n.strategy=this.defaultStrategy),void(e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,w.executeStrategy(n,a)}).fail(function(e){o(n,"Failed to load view strategy ("+n.strategy+"). Details: "+e.message,a)}):this.executeStrategy(n,a))):void this.bindAndShow(null,a,n)},compose:function(n,a,r,i){x++,i||(a=w.getSettings(function(){return a},n)),a.compositionComplete&&T.push(function(){a.compositionComplete(a.child,a.parent,a)}),T.push(function(){a.composingNewView&&a.model&&a.model.compositionComplete&&a.model.compositionComplete(a.child,a.parent,a)});var s=d(n);a.activeView=s.activeView,a.parent=n,a.triggerAttach=u,a.bindingContext=r,a.cacheViews&&!a.viewElements&&(a.viewElements=s.childElements),a.model?e.isString(a.model)?e.acquire(a.model).then(function(t){a.model=e.resolveObject(t),w.inject(a,n)}).fail(function(e){o(a,"Failed to load composed module ("+a.model+"). Details: "+e.message,n)}):w.inject(a,n):a.view?(a.area=a.area||"partial",a.preserveContext=!0,t.locateView(a.view,a.area,a.viewElements).then(function(e){w.bindAndShow(e,n,a)})):this.bindAndShow(null,n,a)}},s.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var o=w.getSettings(t,e);if(o.mode){var d=s.utils.domData.get(e,P);if(!d){var l=s.virtualElements.childNodes(e);d={},"inline"===o.mode?d.view=a.ensureSingleElement(l):"templated"===o.mode&&(d.parts=m(l)),s.virtualElements.emptyNode(e),s.utils.domData.set(e,P,d)}"inline"===o.mode?o.view=d.view.cloneNode(!0):"templated"===o.mode&&(o.parts=d.parts),o.preserveContext=!0}w.compose(e,o,i,!0)}},s.virtualElements.allowedBindings.compose=!0,w}),n("durandal/events",["durandal/system"],function(e){var t=/\s+/,n=function(){},a=function(e,t){this.owner=e,this.events=t};return a.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},a.prototype.on=a.prototype.then,a.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,r){var i,s,o;if(n){for(i=this.callbacks||(this.callbacks={}),e=e.split(t);s=e.shift();)o=i[s]||(i[s]=[]),o.push(n,r);return this}return new a(this,e)},n.prototype.off=function(n,a,r){var i,s,o,d;if(!(s=this.callbacks))return this;if(!(n||a||r))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(s);i=n.shift();)if((o=s[i])&&(a||r))for(d=o.length-2;d>=0;d-=2)a&&o[d]!==a||r&&o[d+1]!==r||o.splice(d,2);else delete s[i];return this},n.prototype.trigger=function(e){var n,a,r,i,s,o,d,l;if(!(a=this.callbacks))return this;for(l=[],e=e.split(t),i=1,s=arguments.length;s>i;i++)l[i-1]=arguments[i];for(;n=e.shift();){if((d=a.all)&&(d=d.slice()),(r=a[n])&&(r=r.slice()),r)for(i=0,s=r.length;s>i;i+=2)r[i].apply(r[i+1]||this,l);if(d)for(o=[n].concat(l),i=0,s=d.length;s>i;i+=2)d[i].apply(d[i+1]||this,o)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),n("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,a,r){function i(){return e.defer(function(t){return 0==o.length?void t.resolve():void e.acquire(o).then(function(n){for(var a=0;a<n.length;a++){var r=n[a];if(r.install){var i=d[a];e.isObject(i)||(i={}),r.install(i),e.log("Plugin:Installed "+o[a])}else e.log("Plugin:Loaded "+o[a])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)})}).promise()}var s,o=[],d=[];return s={title:"Application",configurePlugins:function(t,n){var a=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<a.length;r++){var i=a[r];o.push(n+i),d.push(t[i])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){i().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(a,r,i){function s(){if(d.model)if(d.model.canActivate)try{var t=d.model.canActivate();t&&t.then?t.then(function(e){e&&n.compose(o,d)}).fail(function(t){e.error(t)}):t&&n.compose(o,d)}catch(a){e.error(a)}else n.compose(o,d);else n.compose(o,d)}var o,d={activate:!0,transition:r};o=!i||e.isString(i)?document.getElementById(i||"applicationHost"):i,e.isString(a)&&t.isViewUrl(a)?d.view=a:d.model=a,e.isString(d.model)?e.acquire(d.model).then(function(t){d.model=e.resolveObject(t),s()}).fail(function(t){e.error("Failed to load root module ("+d.model+"). Details: "+t.message)}):s()}},a.includeIn(s),s}),e.config({paths:{text:"../Scripts/text",durandal:"../Scripts/durandal",plugins:"../Scripts/durandal/plugins",transitions:"../Scripts/durandal/transitions"},waitSeconds:15,urlArgs:"v=0.1.7.7"}),jQuery.support.cors=!0,n("jquery",[],function(){return jQuery}),n("knockout",ko),n("main",["durandal/system","durandal/app","durandal/viewLocator","durandal/composition"],function(e,t,n,a){t.title="Nightingale",t.configurePlugins({router:!0,dialog:!0,widget:{kinds:["singleselect","multiselect","chsnsingle","chsnsingledark"]}}),t.start().then(function(){n.useConvention(),a.addBindingHandler("hasFocus"),t.setRoot("viewmodels/shell/shell")})}),n("config.app",[],function(){var e="Nightingale",t="api",n={title:e,remoteServiceName:t};return n}),n("config.routes",[],function(){var e=[{route:"",moduleId:"viewmodels/home/index",title:"home",settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"},{title:"todos",subroute:"viewmodels/home/todos/index",content:"To Do"},{title:"contacts",subroute:"viewmodels/home/contacts/index",content:"Contacts"}]}},{route:"home",moduleId:"viewmodels/home/index",title:"home",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_home.png",content:"Home",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"},{title:"todos",subroute:"viewmodels/home/todos/index",content:"To Do"},{title:"contacts",subroute:"viewmodels/home/contacts/index",content:"Contacts"}]}},{route:"ut/(:tokenId)",moduleId:"viewmodels/authenticate",title:"authenticate",settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Authenticating",pages:[{title:"myhome",subroute:"viewmodels/home/myhome/myhome",content:"My Home"}]}},{route:"populations",moduleId:"viewmodels/populations/index",title:"populations",nav:!1,settings:{imageSource:"/NightingaleUI/Content/images/nav_population.png",content:"Populations",pages:[{title:"careplan",subroute:"populations/careplan/index.html",content:"Plan"},{title:"overview",subroute:"populations/overview/index.html",content:"Overview"}]}},{route:"patients(/:id)",moduleId:"viewmodels/patients/index",title:"Individual",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_patients.png",content:"Individual",pages:[{title:"overview",subroute:"viewmodels/patients/overview/index",content:"Overview"},{title:"goals",subroute:"viewmodels/patients/goals/index",content:"Goals"},{title:"careplan",subroute:"viewmodels/patients/careplan/index",content:"Programs"},{title:"history",subroute:"viewmodels/patients/history/index",content:"History"},{title:"team",subroute:"viewmodels/patients/team/index",content:"Team"},{title:"data",subroute:"viewmodels/patients/data/index",content:"Data"},{title:"medications",subroute:"viewmodels/patients/medications/index",content:"Medications"}]}},{route:"admin",moduleId:"viewmodels/admin/index",title:"admin",nav:!0,settings:{imageSource:"/NightingaleUI/Content/images/nav_admin.png",content:"Admin",pages:[{title:"Concierge",subroute:"viewmodels/admin/concierge/index",content:"Concierge"}]}}],t={routes:e};return t}),n("config.services",[],function(){function e(e,t,n,a,r){var i=this;i.ResourcePath=e+"/"+t+"/"+n+"/",i.EntityType=a,i.Parameters=r}var t,n,a;-1===window.location.href.indexOf("localhost")&&-1===window.location.href.indexOf("dev")&&-1===window.location.href.indexOf("login.phytel")&&-1===window.location.href.indexOf("ngmodel.phytel")&&-1===window.location.href.indexOf("staging")&&-1===window.location.href.indexOf("nightingalelogin")?(t="//azurephytel.cloudapp.net:59900",n="12345",a="",-1!==window.location.href.indexOf("azurephytel.cloudapp.net")&&(a="UA-44886803-5",console.log("config.services - ENV = QA "))):-1!==window.location.href.indexOf("ngmodel.phytel")?(t="//mdlapi.phytel.com",n="12345",a="UA-44886803-6",console.log("config.services - ENV = MODEL ")):-1!==window.location.href.indexOf("login.phytel")?(t="//api.phytel.com",n="5273f88f69879b2f2c2fbeb3",a="UA-44886803-4",console.log("config.services - ENV = PROD ")):-1!==window.location.href.indexOf("staging")?(t="//azurephytelstaging.cloudapp.net:59900",n="12345",a=""):-1!==window.location.href.indexOf("nightingalelogin")?(t="//nightingalelogin.cloudapp.net:59900",n="12345",a=""):(t="//azurephyteldev.cloudapp.net:59900",n="12345",a="UA-44886803-3",console.log("config.services - ENV = DEV "));var r=t+"/Nightingale",i=t+"/Security",s={remoteServiceName:r,securityServiceName:i,createEndPoint:e,apiAppKey:n,gaId:a};return s}),n("services/validatorfactory",[],function(){function e(e,t,n){var a=e.getEntityType(t);ko.utils.arrayForEach(n,function(e){var t=a.getProperty(e.name);t.displayName=e.displayName,ko.utils.arrayForEach(e.validatorsList,function(e){t.validators.push(e)})})}var t={fixNamesAndRegisterValidators:e};return t}),n("services/formatter",[],function(){var e=function(){};return e.padZeroLeft=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},e.appendNewDetails=function(e,t,n){if(e()){var a="";t()&&t().length&&(a="\n"),a+=moment().format("MM-DD-YYYY h:mm A")+" ",a+=" "+n,a+=" - "+e(),t(t()?t()+a:a),e("")}},e.formatSeparators=function(e,t,n){
var a=t.split(n);e=e.replace(new RegExp(n,"g"),"");for(var r=t.replace(new RegExp(n,"g"),"").length,i=0,s=0,o="";i<a.length&&s<e.length;){var d=e.slice(s,s+a[i].length);s+=d.length,o+=d,d.length===a[i].length&&r-1>s&&(o+=n),i+=1}return o},e.date=function(){},e.date.optimizeYear=function(e){var t=e.split("/");if(t.length>2&&t[2].length>0&&t[2].length<=2){var n=t[2];1==n.length&&(n="0"+n);var a=Number(String(moment().year()).slice(2,4));n=Number(n)>a?"19"+n:"20"+n;var r=t[0]+"/"+t[1]+"/"+n;e=r,moment(e).isValid()&&(e=moment(e).format("MM/DD/YYYY"))}return e},e.date.optimizeDate=function(e){function t(e,t){var a=e;if(e.length>0)if(e.length>=2){if(a=e.slice(0,2),Number(a)>12&&(a="12"),Number(a)<1&&(a="01"),a+="/",e.length>2){var r=e.slice(2,4);a+=n(r,e.length<4),e.length>4&&(a+=e.slice(4,8))}}else 1===e.length&&(Number(e)>1||t)&&(a=0===Number(e)?"01/":"0"+e+"/");return a}function n(e,t){var n=e;return e.length>0&&(1==e.length?((t||Number(e)>3)&&(n="0"+e+"/"),t&&Number(e)<1&&(n="01/")):e.length>=2&&(n=e.slice(0,2),Number(n)>31&&(n="31"),Number(n)<1&&(n="01"),n+="/",e.length>2&&(n+=e.slice(2)))),n}var a=e;if(e){var r=e.split("/");r.length>=1&&(a=t(r[0],r.length>1)),r.length>=2&&(a+=n(r[1],r.length>2),r.length>2&&(a+=r[2]))}return a},e.date.optimizeTime=function(e){var t=e;if(e){var n=e.split(":");if(n.length>=1){var a=n[0];if(a=a.replace(/\D/g,""),1===a.length&&n.length>1?t="0"+a+":":2===a.length&&(t=a+":"),n.length>1){var a=n[1];t+=n[1]}}}return t},e}),n("services/customvalidators",["services/formatter"],function(e){function t(t,n){if(null==t||""==t)return!0;if(isNaN(new Date(t).valueOf()))return n.msg="'"+t+"' is not a valid "+n.property.displayName,!1;var a=moment(t,["MM-DD-YYYY","MM/DD/YYYY","M/D/YYYY"],!0);if(!a.isValid()){var r=e.date.optimizeDate(t);if(!moment(r,["MM-DD-YYYY","MM/DD/YYYY"],!0).isValid())return n.msg="'"+t+"' is not a valid "+n.property.displayName,!1}if(n.minDate){var i=n.minDate,s=n.property.displayName+" must be on or after "+moment(i).format("MM/DD/YYYY");if(("now"===i||"today"===i)&&(s=n.property.displayName+" must be today or in the past",i=moment()),!moment(i).isValid())return!0;if(a.isBefore(moment(i).format("MM/DD/YYYY"),"days"))return n.msg=s,!1}if(n.maxDate){var o=n.maxDate,s=n.property.displayName+" must be on or before "+moment(o).format("MM/DD/YYYY");if(("now"===o||"today"===o)&&(s=n.property.displayName+" must be today or in the past",o=moment()),!moment(o).isValid())return!0;if(a.isAfter(moment(o).format("MM/DD/YYYY"),"days"))return n.msg=s,!1}return!0}function n(e,t){if(null==e)return!0;var n=e.replace("-","");return 0===parseInt(n)}var a={};return a.zipValidator=breeze.Validator.makeRegExpValidator("zipVal",/^\d{5}([\-]\d{4})?$/,"The %displayName% '%value%' is not a valid U.S. zip code."),a.ssnValidator=breeze.Validator.makeRegExpValidator("SSN",/^\d{3}-?\d{2}-?\d{4}$/,"'%value%' is not a valid %displayName%"),a.dateValidator=function(e){return new breeze.Validator("dateValidator",t,{minDate:e.minDate,maxDate:e.maxDate,messageTemplate:"%msg%"})},a.isNotAllZeroes=new breeze.Validator("notAllZeroes",n,{messageTemplate:"'%displayName%' must not be all zeroes."}),a={validators:a}}),n("models/base",["services/validatorfactory","services/customvalidators","services/formatter","services/session"],function(e,n,a,r){function i(e,t){var n=this;n.propertyName=ko.observable(e),n.propertyValue=ko.observable(t)}function s(e,t,n){var a=this;a.Property=e,a.Operator=n,a.Value=t}function o(e){var t=this;t.Title=e.title,e.relatedPatientName?t.Title=ko.computed(function(){var t=e.relatedPatientName();return t?e.title+" - "+t:e.title}):e.showSelectedPatientInTitle&&(g(),t.Title=ko.computed(function(){var t=e.title,n=w&&w()?w().fullName():"";return n&&(t=t+" - "+n),t})),t.Entity=e.entity,t.customButtons=e.customButtons?e.customButtons:[],t.TemplatePath=ko.observable(e.templatePath),t.classOverride=ko.observable(e.classOverride?e.classOverride:null),t.Showing=e.showing?e.showing:!1,t.saveChanges=function(){if(e.saveOverride)e.saveOverride(),t.Showing(!1);else{m();var n=ko.unwrap(t.Entity);n.saveChanges(),t.Showing(!1)}},t.cancelChanges=function(){if(e.cancelOverride){var n=e.cancelOverride();(void 0===n||n===!0)&&t.Showing(!1)}else{var a=ko.unwrap(t.Entity);a.cancelChanges(),t.Showing(!1)}},t["delete"]=function(){e.deleteOverride?(e.deleteOverride(),t.Showing(!1)):t.Showing(!1)},t.deleteText=ko.observable("Delete"),t.canDelete=ko.observable(!1)}function d(e,t,n,a){var r=this;r.Type=ko.observable(e),r.Title=ko.observable(t),r.IconPath=ko.observable(n),r.Path=ko.observable(a)}function l(e,t,n){var a=this;a.Id=e,a.Gender=t,a.Description=n,a.SmallImgSrc="/NightingaleUI/Content/images/patient_"+n.toLowerCase()+"_small.png",a.LargeImgSrc="/NightingaleUI/Content/images/patient_"+n.toLowerCase()+"_large.png"}function c(e,t,n){var a=this;a.Id=e,a.Code=t,a.Name=n}function p(e,t){var n=this;n.id=ko.observable(e),n.name=ko.observable(t)}function u(e,t){var n=this;n.PropName=e,n.Message=t}function v(t){function r(e){m(),e.isNew=ko.observable(!1),e.isDuplicate=ko.observable(!1),e.forcedSave=!1,e.age=ko.computed(function(){if(!e.dOB())return"";var t=moment(e.dOB()).add("hours",23),n=moment(new Date).add("days",1);return!t||t>n||!t.isValid()?"":n.diff(t,"years")}),e.fullFirstName=ko.computed(function(){var t=e.firstName(),n=e.preferredName(),a=e.middleName()?e.middleName().substr(0,1)+".":"",r=n?n:2===a.length?t+" "+a:t;return r}),e.fullLastName=ko.computed(function(){var t=e.lastName(),n=e.suffix(),a=n?t+" "+n:t;return a}),e.fullName=ko.computed(function(){var t=e.fullFirstName(),n=e.fullLastName();return t?t+" "+n:n}),e.formattedSSN=ko.computed(function(){var t="";return e.lastFourSSN()&&(t="XXX-XX-"+e.lastFourSSN()),t}),e.genderModel=ko.computed({read:function(){m();var t,n=e.gender()?e.gender().toLowerCase():"";return"m"===n||"male"===n?(e.gender("M"),t=ko.utils.arrayFirst(y.enums.genders(),function(e){return"m"===e.Id})):"f"===n||"female"===n?(e.gender("F"),t=ko.utils.arrayFirst(y.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(y.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}}),e.forceSave=function(){e.forcedSave=!0,e.saveChanges()},e.saveChanges=function(){m(),e.dOB()&&e.dOB(a.date.optimizeDate(e.dOB()));var t=e;y.saveIndividual(t)},e.cancelChanges=function(){m(),y.cancelEntityChanges(e)},e.isNew.subscribe(function(e){}),e.isValid=ko.observable(!0),e.canSave=ko.computed(function(){return e.isValid()&&!e.isDuplicate()}),e.validationErrors=ko.observableArray([]),e.entityAspect.validationErrorsChanged.subscribe(function(t){var n=e.entityAspect.hasValidationErrors,a=[];if(n){e.isValid(!1);var r=e.entityAspect.getValidationErrors();ko.utils.arrayForEach(r,function(e){a.push(new u(e.propertyName,e.errorMessage))}),e.validationErrors(a)}else e.validationErrors([]),e.isValid(!0)}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),null===e.firstName()&&(e.firstName("."),setTimeout(function(){e.firstName("")},1)),null===e.lastName()&&(e.lastName("."),setTimeout(function(){e.lastName("")},1)),e.setDefaultStatusReason=function(){unknownReason=ko.utils.arrayFirst(y.enums.patientStatusReasons(),function(e){return"Unknown"===e.name()}),e.patientStatusReason(unknownReason)},e.canSavePatientSystems=ko.computed(function(){var t=e.patientSystems(),n=!0,a=!1;return ko.utils.arrayForEach(t,function(e){(e.isNew()||"Unchanged"!==e.entityAspect.entityState.name)&&(a=!0),e.isValid()||(n=!1)}),n&&a}),e.getPrimaryPatientSystem=function(){var t=ko.utils.arrayFilter(e.patientSystems(),function(e){return e.primary()===!0&&"2"!==e.statusId()});return t=t.sort(function(e,t){var n=e.createdOn(),a=t.createdOn();return n==a?0:isNaN(n)||n>a?-1:isNaN(a)||a>n?1:void 0}),t[0]},e.minor=ko.computed(function(){var t=y.getSettingsParam("MinorAge");return null!==e.age()&&parseInt(e.age())>=0&&e.age()<t}),e["protected"]()!==!0&&e["protected"](!1),"1"!==e.deceasedId()&&e.deceasedId("2"),e.isLoaded=ko.observable(!1)}function i(e){e.isDeleted=ko.observable(!1),e.isNew=ko.observable(!1);var t=h();e.isEditable=ko.observable(!1),e.createdById()===t.id()?e.isEditable(!1):e.isEditable(!0),e.validationErrors=ko.observableArray(),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.isValid=ko.computed(function(){var t=[],n=e.value(),a=e.system(),r=e.isDeleted();return r?!0:(n?0===n.trim().length&&t.push({PropName:"value",Message:"Value cannot be blank",Id:e.id()}):t.push({PropName:"value",Message:"Value is required",Id:e.id()}),a||t.push({PropName:"system",Message:"System is required",Id:e.id()}),e.validationErrors(t),0===t.length)})}function s(e){e.isNew=ko.observable(!1),e.validationErrors=ko.observableArray(),e.careTeamValidationErrors=ko.observableArray(),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.checkAppend=function(){a.appendNewDetails(e.newNotes,e.notes,y.getUserFullName())},e.startDateErrors=ko.observableArray([]),e.endDateErrors=ko.observableArray([]),e.setInvalidStartDate=ko.computed(function(){var t=e.validationErrorsArray();return t&&-1!==t.indexOf("startDate")}),e.setInvalidEndDate=ko.computed(function(){var t=e.validationErrorsArray();return t&&-1!==t.indexOf("endDate")}),e.customRoleName()&&!e.roleId()&&e.roleId(-1),e.isEditable=ko.computed(function(){return"Engage"==e.dataSource()}),e.computedRoleName=ko.computed(function(){var t="",n=e.roleId(),a=e.roleType(),r=e.customRoleName();return-1==n?t=r:n&&a&&(t=a.role()),t}).extend({throttle:100}),e.isValid=ko.computed(function(){var t=[],n=e.contactId(),a=e.roleId(),r=e.customRoleName(),i=e.careTeamValidationErrors();i.length&&ko.utils.arrayForEach(i,function(e){t.push({PropName:e.PropName,Message:e.Message})}),n||t.push({PropName:"contact",Message:"A contact is required"}),a?-1!=a||r||t.push({PropName:"customRoleName",Message:"Other Role is required"}):t.push({PropName:"role",Message:"Role is required"});var s=e.startDate(),o=e.endDate(),d=e.startDateErrors(),l=e.endDateErrors();return d.length>0&&ko.utils.arrayForEach(d,function(e){t.push({PropName:"startDate",Message:"Start Date "+e.Message})}),l.length>0&&ko.utils.arrayForEach(l,function(e){t.push({PropName:"endDate",Message:"End Date "+e.Message})}),0==d.length&&0==l.length&&s&&o&&moment(s).isAfter(moment(o))&&(t.push({PropName:"endDate",Message:"End Date must be on or after: "+moment(s).format("MM/DD/YYYY")}),t.push({PropName:"startDate",Message:"Start Date must be on or before: "+moment(o).format("MM/DD/YYYY")})),e.validationErrors(t),0===t.length})}function o(e){var t="Primary Care Manager",n="Primary Care Physician";e.primaryCarePhysicians=ko.computed(function(){var t=e.members()?e.members():[],a=1,r=ko.utils.arrayFilter(t,function(e){return e.statusId()==a&&e.roleId()&&e.roleType()&&e.core()?!e.customRoleName()&&e.roleType().role()==n:void 0});return r}).extend({throttle:50}),e.primaryCareManagers=ko.computed(function(){var n=e.members()?e.members():[],a=1,r=ko.utils.arrayFilter(n,function(e){return e.statusId()==a&&e.roleId()&&e.roleType()&&e.core()?!e.customRoleName()&&e.roleType().role()==t:void 0});return r}).extend({throttle:50})}function d(e){e.level&&e.level()||e.level("1")}function l(e){e.type=ko.computed(function(){return e.result()||0===e.result()?0===e.result()?"error":"warning":""}),e.alertPath=ko.computed(function(){return e.type()?"shell/alerttypes/"+e.type()+".html":""}),e.showing=ko.observable(!0);var t=e.showing.subscribe(function(){m(),y.alerts.remove(e),t.dispose()})}t.addEntityType({shortName:"Patient",namespace:"Nightingale",dataProperties:{background:{dataType:"String"},clinicalBackground:{dataType:"String"},deceasedId:{dataType:"Int64"},displaySystemId:{dataType:"String"},displaySystemName:{dataType:"String"},displayLabel:{dataType:"String"},dOB:{dataType:"String"},flagged:{dataType:"Boolean"},firstName:{dataType:"String"},fullSSN:{dataType:"String"},gender:{dataType:"String"},id:{dataType:"String",isPartOfKey:!0},contactId:{dataType:"String"},lastFourSSN:{dataType:"String"},lastName:{dataType:"String"},maritalStatusId:{dataType:"String"},middleName:{dataType:"String"},preferredName:{dataType:"String"},priority:{dataType:"String"},"protected":{dataType:"Boolean"},providerId:{dataType:"Int64"},reasonId:{dataType:"String"},statusId:{dataType:"String"},statusDataSource:{dataType:"String"},suffix:{dataType:"String"},dataSource:{dataType:"String"},twitterHandle:{dataType:"String"}},navigationProperties:{provider:{entityTypeName:"Provider",isScalar:!0,associationName:"Provider_Patients",foreignKeyNames:["providerId"]},maritalStatus:{entityTypeName:"MaritalStatus",isScalar:!0,associationName:"Patient_MaritalStatus",foreignKeyNames:["maritalStatusId"]},priorityModel:{entityTypeName:"Priority",isScalar:!0,associationName:"Priority_Patients",foreignKeyNames:["priority"]},patientStatus:{entityTypeName:"PatientStatus",isScalar:!0,associationName:"Patient_PatientStatus",foreignKeyNames:["statusId"]},patientStatusReason:{entityTypeName:"PatientStatusReason",isScalar:!0,associationName:"Patient_PatientStatusReason",foreignKeyNames:["reasonId"]},problems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Patient"},programs:{entityTypeName:"Program",isScalar:!1,associationName:"Patient_Programs"},goals:{entityTypeName:"Goal",isScalar:!1,associationName:"Patient_Goals"},notes:{entityTypeName:"Note",isScalar:!1,associationName:"Patient_Notes"},todos:{entityTypeName:"ToDo",isScalar:!1,associationName:"Patient_Todos"},allergies:{entityTypeName:"PatientAllergy",isScalar:!1,associationName:"Patient_Allergies"},medications:{entityTypeName:"PatientMedication",isScalar:!1,associationName:"Patient_Medications"},contactCard:{entityTypeName:"ContactCard",isScalar:!0,associationName:"Patient_ContactCard"},observations:{entityTypeName:"PatientObservation",isScalar:!1,associationName:"Patient_Observations"},patientSystems:{entityTypeName:"PatientSystem",isScalar:!1,associationName:"Patient_PatientSystems"},deceased:{entityTypeName:"Deceased",isScalar:!0,associationName:"Patient_Deceased",foreignKeyNames:["deceasedId"]}}});var c=[{name:"firstName",displayName:"First Name",validatorsList:[k.required(),k.maxLength({maxLength:20})]},{name:"lastName",displayName:"Last Name",validatorsList:[k.required(),k.maxLength({maxLength:20})]},{name:"fullSSN",displayName:"SSN",validatorsList:[n.validators.ssnValidator]},{name:"dOB",displayName:"DOB",validatorsList:[n.validators.dateValidator({minDate:moment().subtract(200,"year").format("MM/DD/YYYY"),maxDate:"today"})]}];e.fixNamesAndRegisterValidators(t,"Patient",c),t.addEntityType({shortName:"PatientProblem",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},patientID:{dataType:"String"},problemID:{dataType:"String"},level:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"PatientProblem_Patient",foreignKeyNames:["patientID"]},problem:{entityTypeName:"Problem",isScalar:!0,associationName:"PatientProblem_Problem",foreignKeyNames:["problemID"]}}}),t.addEntityType({shortName:"Problem",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patientProblems:{entityTypeName:"PatientProblem",isScalar:!1,associationName:"PatientProblem_Problem"}}}),t.addEntityType({shortName:"Provider",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Provider_Patients"}}}),t.addEntityType({shortName:"Cohort",namespace:"Nightingale",dataProperties:{iD:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sName:{dataType:"String"},description:{dataType:"String"}}}),t.addEntityType({shortName:"Identifier",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"}}}),t.addEntityType({shortName:"AllergySearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},displayName:{dataType:"String"}}}),t.addEntityType({shortName:"MedicationSearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},displayName:{dataType:"String"}}}),t.addEntityType({shortName:"CareTeam",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},contactId:{dataType:"String"},createdById:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedById:{dataType:"String"},updatedOn:{dataType:"DateTime"}},navigationProperties:{patientContact:{entityTypeName:"ContactCard",isScalar:!0,associationName:"CareTeam_Patient_ContactCard",foreignKeyNames:["contactId"]},members:{entityTypeName:"CareMember",isScalar:!1,associationName:"CareTeam_CareMembers"}}}),t.addEntityType({shortName:"CareMember",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},gender:{dataType:"String"},preferredName:{dataType:"String"},careTeamId:{dataType:"String"},contactId:{dataType:"String"},typeId:{dataType:"String"},primary:{dataType:"Boolean"},roleId:{dataType:"String"},customRoleName:{dataType:"String"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},core:{dataType:"Boolean"},notes:{dataType:"String"},newNotes:{dataType:"String"},frequencyId:{dataType:"String"},distance:{dataType:"String"},distanceUnit:{dataType:"String"},externalRecordId:{dataType:"String"},dataSource:{dataType:"String"},statusId:{dataType:"Int64",defaultValue:1},createdById:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedById:{dataType:"String"},updatedOn:{dataType:"DateTime"}},navigationProperties:{careTeam:{entityTypeName:"CareTeam",isScalar:!0,associationName:"CareTeam_CareMembers",foreignKeyNames:["careTeamId"]},contact:{entityTypeName:"ContactCard",isScalar:!0,associationName:"CareMember_ContactCard",foreignKeyNames:["contactId"]},type:{entityTypeName:"CareMemberType",isScalar:!0,associationName:"CareMember_Type",foreignKeyNames:["typeId"]},status:{entityTypeName:"CareMemberStatus",isScalar:!0,associationName:"CareMember_CareMemberStatus",foreignKeyNames:["statusId"]},frequency:{entityTypeName:"CareTeamFrequency",isScalar:!0,associationName:"CareMember_CareTeamFrequency",foreignKeyNames:["frequencyId"]},roleType:{entityTypeName:"ContactTypeLookup",isScalar:!0,associationName:"ContactTypeLookup_ContactCard",foreignKeyNames:["roleId"]},createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"PatientSystem_CreatedBy",foreignKeyNames:["createdById"]},updatedBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"PatientSystem_UpdatedBy",foreignKeyNames:["updatedById"]}}}),t.addEntityType({shortName:"Alert",namespace:"Nightingale",autoGeneratedKeyType:breeze.AutoGeneratedKeyType.Identity,dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},result:{dataType:"Int64"},reason:{dataType:"String"}}}),t.addEntityType({shortName:"PatientSystem",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},systemId:{dataType:"String"},value:{dataType:"String"},dataSource:{dataType:"String"},statusId:{dataType:"String"},primary:{dataType:"Boolean"},createdById:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedById:{dataType:"String"},updatedOn:{dataType:"DateTime"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_PatientSystems",foreignKeyNames:["patientId"]},system:{entityTypeName:"System",isScalar:!0,associationName:"PatientSystem_System",foreignKeyNames:["systemId"]},patientSystemStatus:{entityTypeName:"PatientSystemStatus",isScalar:!0,associationName:"Patient_PatientSystemStatus",foreignKeyNames:["statusId"]},createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"PatientSystem_CreatedBy",foreignKeyNames:["createdById"]},updatedBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"PatientSystem_UpdatedBy",foreignKeyNames:["updatedById"]}}}),t.addEntityType({shortName:"System",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},field:{dataType:"String"},displayLabel:{dataType:"String"},statusId:{dataType:"String"},primary:{dataType:"Boolean"}},navigationProperties:{patientSystem:{entityTypeName:"System",isScalar:!0,associationName:"Patient_System"},systemStatus:{entityTypeName:"SystemStatus",isScalar:!0,associationName:"System_SystemStatus",foreignKeyNames:["statusId"]}}}),t.registerEntityTypeCtor("Patient",null,r),t.registerEntityTypeCtor("PatientProblem",null,d),t.registerEntityTypeCtor("Alert",null,l),t.registerEntityTypeCtor("CareMember",null,s),t.registerEntityTypeCtor("CareTeam",null,o),t.registerEntityTypeCtor("PatientSystem",null,i)}function m(){y||(y=t("services/datacontext"))}function g(){b||(b=t("viewmodels/patients/index"),w=ko.computed(function(){return b.selectedPatient()}))}function h(){return f||(m(),f=y.getSystemCareManager()),f}var y,f,b,w,k=(breeze.DataType,breeze.Validator),S={property:i,Parameter:s,modal:o,quickAddSection:d,Gender:l,Day:c,SomeType:p,validationError:u,initialize:v};return S}),n("services/session",["models/base"],function(e){function n(){var e="/1.0/"+h().contracts()[0].number()+"/logout";a(),v.logOutUserByToken(e).then(r)}function a(){v||(v=t("services/datacontext"))}function r(){i(),window.location.href="/Logout.aspx"}function i(){return o(),c("ngSession"),!0}function s(){if(m){var e=ko.toJS(h);e=JSON.stringify(e,["userId","aPIToken","firstName","lastName","userName","aPIToken","contracts","id","name","number"]),localStorage.setItem("ngSession",e)}return g&&d("ngSession",e),!0}function o(){localStorage.clear()}function d(e,t){var n=escape(t);document.cookie=e+"="+n}function l(e){var t=document.cookie,n=t.indexOf(" "+e+"=");if(-1==n&&(n=t.indexOf(e+"=")),-1==n)t=null;else{n=t.indexOf("=",n)+1;var a=t.indexOf(";",n);-1==a&&(a=t.length),t=unescape(t.substring(n,a))}return t}function c(e){var t=e?e:"ngSession";document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function p(){function e(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function t(){var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}return m=e(),g=t(),{ls:m,cookies:g}}function u(){if(a(),p(),m){var e=localStorage.getItem("ngSession"),t=JSON.parse(e);if(t&&t.aPIToken)return h(v.createUserFromSessionUser(t)),h()}else if(g){var t=l("ngSession");if(t&&t.aPIToken)return h(v.createUserFromSessionUser(t)),h()}}var v,m=!1,g=!1,h=ko.observable(),y={setLocalStorageAndCookie:s,deleteCookie:c,currentUser:h,logOff:n,runTests:p,getUserFromSession:u};return y}),n("services/dateHelper",["services/formatter"],function(e){var t=function(){};return t.isValidDate=function(e){return!this.isInvalidDate(e,null,!0)},t.isInvalidDate=function(t,n,a){if(null==t||""==t||void 0===t)return a?{Message:"is not valid"}:null;if(isNaN(new Date(t).valueOf()))return{Message:"is not valid"};var r=moment(t,["MM-DD-YYYY","MM/DD/YYYY","M/D/YYYY"],!0);if(!(r.isValid()&&-1!==t.search(/^\d{1,2}\/\d{1,2}\/\d{4}/)||(r=moment(t,["YYYY-MM-DDTHH:mm:ss.SSSSZ","YYYY-MM-DDTHH:mm:ssZ"],!0),r.isValid()))){var i=e.date.optimizeDate(t);if(!moment(i,["MM/DD/YYYY"],!0).isValid()||-1===t.search(/^\d{1,2}\/\d{1,2}\/\d{4}/))return{Message:"is not valid"}}if(n&&n.minDate){var s,o=n.minDate;if("now"===o||"today"===o?(s=o,o=moment()):s=moment(o).format("MM/DD/YYYY"),!moment(o).isValid())return!0;if(r.isBefore(moment(o),"days"))return{Message:"can not be before "+s}}if(n&&n.maxDate){var d,l=n.maxDate;if("now"===l||"today"===l?(d=l,l=moment()):d=moment(l).format("MM/DD/YYYY"),!moment(l).isValid())return!0;if(r.isAfter(moment(l),"days"))return{Message:"can not be after "+d}}return null},t.isSameDate=function(e,t){return moment(e.format("MM/DD/YYYY")).isSame(t.format("MM/DD/YYYY"))},t.setDateValue=function(e,t){return t.date(e.date()),t.month(e.month()),t.year(e.year()),t},t.setTimeValue=function(e,t,n){return n.hour(e),n.minute(t),n},t}),n("models/allergies",["services/session","services/dateHelper"],function(e,n){function a(e){function t(e){e.isNew=ko.observable(!1),e.isUserCreated=ko.observable(!1),e.typeString=ko.computed(function(){r();var t="";return ko.utils.arrayForEach(e.allergyTypeIds(),function(e){var n=ko.utils.arrayFirst(i.enums.allergyTypes(),function(t){return t.id()===e.id()});n&&(t+=n.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.startDateErrors=ko.observableArray([]),e.endDateErrors=ko.observableArray([]),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=[],a=e.startDate(),r=e.endDate(),i=e.startDateErrors(),s=e.endDateErrors();return i.length>0&&ko.utils.arrayForEach(i,function(a){n.push({PropName:"startDate",Message:e.allergyName()+" Start Date "+a.Message}),t=!0}),r&&(s.length>0&&ko.utils.arrayForEach(s,function(a){n.push({PropName:"endDate",Message:e.allergyName()+" End Date "+a.Message}),t=!0}),0==i.length&&0==s.length&&a&&r&&moment(a).isAfter(moment(r))&&(n.push({PropName:"endDate",Message:e.allergyName()+" End Date must be on or after: "+moment(a).format("MM/DD/YYYY")}),n.push({PropName:"startDate",Message:e.allergyName()+" Start Date must be on or before: "+moment(r).format("MM/DD/YYYY")}),t=!0)),e.validationErrors(n),!t}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.setInvalidStartDate=ko.computed(function(){var t=e.validationErrorsArray();return t&&-1!==t.indexOf("startDate")}),e.setInvalidEndDate=ko.computed(function(){var t=e.validationErrorsArray();return t&&-1!==t.indexOf("endDate")}),e.needToSave=function(){var t=(e.entityAspect.entityState.isModified()||e.isNew())&&e.sourceId();return t},e.reactionString=ko.computed(function(){r();var t="";return ko.utils.arrayForEach(e.reactionIds(),function(e){var n=ko.utils.arrayFirst(i.enums.reactions(),function(t){return t.id()===e.id()});n&&(t+=n.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.setStatus=function(t,n){function a(){e.isNew(!1),e.isUserCreated(!1),e.entityAspect.acceptChanges(),i.createAlert("warning",n)}r(),e.statusId(t),i.saveAllergies([e],"Update").then(a)},e.inactivate=function(){e.setStatus(2,"Allergy has been deactivated!")},e.activatePatientAllergy=function(){e.setStatus(1,"Allergy has been activated!")},e.deletePatientAllergy=function(){function t(){return!0}var n="You are about to delete: "+e.allergyName()+" from this individual.  Press OK to continue, or cancel to return without deleting.",a=confirm(n);return a!==!0?!1:(r(),void i.deletePatientAllergy(e).then(t))}}e.addEntityType({shortName:"PatientAllergy",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},allergyName:{dataType:"String"},allergyId:{dataType:"String"},patientId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},statusId:{dataType:"String"},sourceId:{dataType:"String"},systemName:{dataType:"String"},allergyTypeIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},reactionIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},severityId:{dataType:"String"},notes:{dataType:"String"},code:{dataType:"String"},codingSystemId:{dataType:"String"},dataSource:{dataType:"String",defaultValue:"Engage"},externalRecordId:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Allergies",foreignKeyNames:["patientId"]},severity:{entityTypeName:"Severity",isScalar:!0,associationName:"Allergy_Severity",foreignKeyNames:["severityId"]},status:{entityTypeName:"AllergyStatus",isScalar:!0,associationName:"Allergy_Status",foreignKeyNames:["statusId"]},source:{entityTypeName:"AllergySource",isScalar:!0,associationName:"Allergy_Source",foreignKeyNames:["sourceId"]}}}),e.addEntityType({shortName:"AllergyStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.registerEntityTypeCtor("PatientAllergy",null,t)}function r(){i||(i=t("services/datacontext"))}var i,s=(breeze.DataType,{initialize:a});return s}),n("models/contacts",["services/session","services/validatorfactory","services/customvalidators","services/formatter"],function(e,n,a,r){function i(e){function t(e){e.isNew=ko.observable(!1),e.subTypeName=ko.computed(function(){s();var t=null,n=e.subTypeId();if(n){var a=o.getContactTypeLookupById(n);a&&a.length&&(t=a[0].name())}return t}).extend({throttle:50}),e.specialtyName=ko.computed(function(){s();var t=null,n=e.specialtyId();if(n){var a=o.getContactTypeLookupById(n);a&&a.length&&(t=a[0].name())}return t}).extend({throttle:50}),e.subSpecialtyString=ko.computed(function(){s();var t=null,n=e.subSpecialtyIds();return n.length&&ko.utils.arrayForEach(n,function(e){var n=o.getContactTypeLookupById(e.id());n&&n.length>0&&(t&&t.length?t+=", ":t="",t+=n[0].name())}),t}).extend({throttle:50})}function n(e){function t(e){var t="";return t+=e.subTypeName(),e.specialtyId()&&(t+=" - "+e.specialtyName(),e.subSpecialtyString()&&(t+=" ("+e.subSpecialtyString()+")")),t}function n(e){var t=e.subTypeName();return e.specialtyId()&&(t+=" - "+e.specialtyName()),t}function a(){var t=[],n=!1,a=e.firstName(),r=e.lastName();e.isPatient();return a&&a.trim().length||(t.push({PropName:"firstName",Message:"'First Name' is required"}),n=!0),r&&r.trim().length||(t.push({PropName:"lastName",Message:"'Last Name' is required"}),n=!0),e.profileValidationErrors(t),n}function i(){var t=[],n=!1;return ko.utils.arrayForEach(e.phones(),function(e){e.validate();var a=e.isValid();a||(t.push({Message:e.validationMessage()}),n=!0)}),e.phoneValidationErrors(t),n}e.isNew=ko.observable(!1),e.activeTab=ko.observable("General"),e.originalContactSubTypes=ko.observableArray();var l=e.originalContactSubTypes();e.contactSubTypes().length>0&&ko.utils.arrayPushAll(l,e.contactSubTypes()),e.originalPreferredTimesOfDayIds=ko.observableArray();var c=e.originalPreferredTimesOfDayIds();e.preferredTimesOfDayIds().length>0&&ko.utils.arrayPushAll(c,e.preferredTimesOfDayIds()),e.originalPreferredDaysOfWeekIds=ko.observableArray();var p=e.originalPreferredDaysOfWeekIds();e.preferredDaysOfWeekIds().length>0&&ko.utils.arrayPushAll(p,e.preferredDaysOfWeekIds()),e.originalLanguages=ko.observableArray();var h=e.originalLanguages();e.languages().length>0&&ko.utils.arrayPushAll(h,e.languages()),e.originalModes=ko.observableArray();var y=e.originalModes();e.modes().length>0&&ko.utils.arrayPushAll(y,e.modes()),e.originalEmails=ko.observableArray();var f=e.originalEmails();e.emails().length>0&&ko.utils.arrayPushAll(f,e.emails()),e.originalPhones=ko.observableArray();var b=e.originalPhones();e.phones().length>0&&ko.utils.arrayPushAll(b,e.phones()),e.originalAddresses=ko.observableArray();var w=e.originalAddresses();e.addresses().length>0&&ko.utils.arrayPushAll(w,e.addresses()),e.prefCommMethods=ko.computed(function(){s();var t="";return ko.utils.arrayForEach(e.modes(),function(e){if(e.optOut()&&e.preferred(!1),e.preferred()){var n=ko.utils.arrayFirst(o.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});t+=n.name()+", "}}),t.length>0&&(t=t.substr(0,t.length-2)),t}),e.secondaryLanguagesText=ko.computed(function(){s();var t="";return ko.utils.arrayForEach(e.languages(),function(e){if(!e.preferred()){var n=ko.utils.arrayFirst(o.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});t+=n.name()+", "}}),t.length>0&&(t=t.substr(0,t.length-2)),t}),e.preferredTimesOfDay=ko.computed(function(){
s();var t="";return ko.utils.arrayForEach(e.preferredTimesOfDayIds(),function(e){var n=ko.utils.arrayFirst(o.enums.timesOfDay(),function(t){return t.id()===e.id()});t+=n.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2)),t}),e.preferredDaysOfWeek=ko.computed(function(){s();var t="";return 7===e.preferredDaysOfWeekIds().length?t="Any":(ko.utils.arrayForEach(e.preferredDaysOfWeekIds(),function(e){var n=ko.utils.arrayFirst(o.enums.daysOfWeek(),function(t){return t.Id===e.id()});t+=n.Code+", "}),t.length>0&&(t=t.substr(0,t.length-2))),t}),e.addPhone=function(){s();var t=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Phone"===e.name()});if(t&&!t.optOut()){var n=-1*(e.phones().length+1),a=o.enums.phoneTypes()[0].id(),r=o.createComplexType("Phone",{id:n,typeId:a,dataSource:"Engage"});r.isFocused(!0),e.phones.push(r)}},e.removePhone=function(t){e.phones.remove(t)},e.addEmail=function(){s();var t=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Email"===e.name()});if(t&&!t.optOut()){var n=e.emails().length+1,a=o.enums.emailTypes()[0].id(),r=o.createComplexType("Email",{id:n,typeId:a});e.emails.push(r)}},e.removeEmail=function(t){e.emails.remove(t)},e.addAddress=function(){s();var t=ko.utils.arrayFirst(e.modes(),function(e){return e&&"Mail"===e.name()});if(t&&!t.optOut()){var n=e.addresses().length+1,a=o.enums.addressTypes()[0].id(),r=o.createComplexType("Address",{id:n,typeId:a});e.addresses.push(r)}},e.removeAddress=function(t){e.addresses.remove(t)},e.newLanguage=ko.observable(null),e.languageValidationErrors=ko.observableArray([]),e.canAddLanguage=ko.computed(function(){var t=e.newLanguage(),n=e.languages(),a=!1,r=[];return t&&ko.utils.arrayForEach(n,function(e){e.name()===t.name()&&(a=!0,r.push({Message:d}))}),e.languageValidationErrors(r),t&&!a}),e.addLanguage=function(){if(e.canAddLanguage()){s();var t=e.newLanguage(),n=o.createComplexType("ContactLanguage",{lookUpLanguageId:t.id(),name:t.name()});e.languages.push(n),e.newLanguage(null)}},e.removeLanguage=function(t){e.languages.remove(t)},e.preferredPhone=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.phonePreferred(!1)}),t?t:null},write:function(t){t&&t.phonePreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.phonePreferred(!1)})}}).extend({throttle:50}),e.preferredText=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred()&&!e.optOut()&&(t=e),e.optOut()&&e.textPreferred(!1)}),t?t:null},write:function(t){t&&t.textPreferred(!0),ko.utils.arrayForEach(e.phones(),function(e){e!==t&&e.textPreferred(!1)})}}).extend({throttle:50}),e.preferredEmail=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.emails(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.emails(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.preferredAddress=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.addresses(),function(e){e.preferred()&&!e.optOut()&&(t=e),e.optOut()&&e.preferred(!1)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.addresses(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.fullName=ko.computed(function(){var t="",n=e.prefix(),a=e.suffix(),r=e.firstName(),i=e.lastName(),s=e.middleName();return n&&(t+=n+" "),r&&(t+=r+" "),s&&(t+=s+" "),i&&(t+=i+" "),a&&(t+=a),t=t.trim()}).extend({throttle:50}),e.genderModel=ko.computed({read:function(){s();var t,n=e.gender()?e.gender().toLowerCase():"";return"m"===n||"male"===n?(e.gender("M"),t=ko.utils.arrayFirst(o.enums.genders(),function(e){return"m"===e.Id})):"f"===n||"female"===n?(e.gender("F"),t=ko.utils.arrayFirst(o.enums.genders(),function(e){return"f"===e.Id})):(e.gender("N"),t=ko.utils.arrayFirst(o.enums.genders(),function(e){return"n"===e.Id})),t},write:function(t){e.gender(ko.unwrap(t).Id.toUpperCase())}}).extend({throttle:50}),e.firstLastOrPreferredName=ko.computed(function(){var t=e.preferredName(),n=e.firstName();n||(n="");var a=e.lastName();return a||(a=""),t?t:n+" "+a}).extend({throttle:100}),e.detailedSubTypes=ko.computed(function(){var n=[];return e.contactSubTypes&&e.contactSubTypes().length&&ko.utils.arrayForEach(e.contactSubTypes(),function(e){var a=t(e);n.push(a)}),n}).extend({throttle:50}),e.contactSummary=ko.computed(function(){var t="";if(e.contactSubTypes&&e.contactSubTypes().length){var a="";ko.utils.arrayForEach(e.contactSubTypes(),function(e){a.length&&(a+=", "),a+=n(e)}),t+=a}if(e.preferredPhone()&&e.preferredPhone().number()){var i=e.preferredPhone().number();i=i.replace(/\D/g,""),formattedPhone=r.formatSeparators(i,"XXX-XXX-XXXX","-"),t.length&&(t+=", "),t+=formattedPhone}return e.preferredAddress()&&e.preferredAddress().cityState()&&(t.length&&(t+=", "),t+=e.preferredAddress().cityState()),t}).extend({throttle:50}),e.preferredLanguage=ko.computed({read:function(){var t;return ko.utils.arrayForEach(e.languages(),function(e){e.preferred()&&(t=e)}),t?t:null},write:function(t){t&&t.preferred(!0),ko.utils.arrayForEach(e.languages(),function(e){e!==t&&e.preferred(!1)})}}).extend({throttle:50}),e.phoneOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(n){if(n&&"Phone"===n.name()){var a=n.optOut();a&&u(e),t=a}}),t}),e.textOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(n){if(n&&"Text"===n.name()){var a=n.optOut();a&&v(e),t=a}}),t}),e.addressOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(n){if(n&&"Mail"===n.name()){var a=n.optOut();a&&m(e),t=a}}),t}),e.emailOptedOut=ko.computed(function(){var t=!1;return ko.utils.arrayForEach(e.modes(),function(n){if(n&&"Email"===n.name()){var a=n.optOut();a&&g(e),t=a}}),t}),e.isPatient()&&e.patient()&&(e.firstName()||e.firstName(e.patient().firstName()),e.lastName()||e.lastName(e.patient().lastName())),e.phoneValidationErrors=ko.observableArray([]),e.profileValidationErrors=ko.observableArray([]),e.profileValidationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.profileValidationErrors(),function(e){t.push(e.PropName)}),t}),e.isDirty=ko.observable(!1),e.clearDirty=function(){e.isDirty(!1)},e.watchDirty=function(){var t=e.entityAspect.propertyChanged.subscribe(function(n){e.isDirty(!0),t.dispose()}),n=e.contactSubTypes.subscribe(function(t){e.isDirty(!0),n.dispose()})},e.phoneValidationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.phoneValidationErrors(),function(e){t.push(e.PropName+e.Value)}),t}).extend({throttle:50}),e.isDuplicate=ko.observable(!1),e.isDuplicateTested=ko.observable(!0),e.isValid=ko.computed(function(){var e=a(),t=i();return!t&&!e}).extend({throttle:50}),e.isEditable=ko.computed(function(){return"Engage"==e.dataSource()}).extend({throttle:50}),e.canSave=ko.computed(function(){return e.isValid()}).extend({throttle:50}),e.saveChanges=function(){return s(),o.saveContactCard(e)},e.cancelChanges=function(){s(),o.cancelAllChangesToContactCard(e)}}function a(e){s(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(o.enums.languages(),function(t){return t.id()===e.lookUpLanguageId()});return t?t.name():void 0})}function i(e){s(),e.name=ko.computed(function(){var t=ko.utils.arrayFirst(o.enums.communicationModes(),function(t){return t.id()===e.lookUpModeId()});return t?t.name():void 0})}function l(e){e.type=ko.computed(function(){s();var t=e.typeId(),n=null;return t&&(n=ko.utils.arrayFirst(o.enums.phoneTypes(),function(e){return t===e.id()})),n}),e.formattedNumber=ko.computed(function(){var t=e.number();return t?(t=t.toString(),t.replace(/(\d{3})-?(\d{3})-?(\d{4})/,"($1) $2-$3")):null}),e.isValid=ko.observable(!0),e.validationMessage=ko.observable(),e.validate=function(){if(e.number()&&e.number().match(/^\d{3}-?\d{3}-?\d{4}$/))return e.isValid(!0),e.validationMessage(null),!0;e.isValid(!1);var t;return e.number()&&e.number().length>0?(t=e.number()+" is not a valid Phone Number",e.number().length<12&&(t+=" (must have 10 digits)")):t="Phone Number is required",e.validationMessage(t),!1},e.isFocused=ko.observable(!1)}function c(e){e.type=ko.computed(function(){s();var t=e.typeId(),n=null;return t&&(n=ko.utils.arrayFirst(o.enums.emailTypes(),function(e){return t===e.id()})),n})}function p(e){e.type=ko.computed(function(){s();var t=e.typeId(),n=null;return t&&(n=ko.utils.arrayFirst(o.enums.addressTypes(),function(e){return t===e.id()})),n}),e.state=ko.computed(function(){s();var t=e.stateId();if(t){var n=ko.utils.arrayFirst(o.enums.states.peek(),function(e){return e.id()===t});return n}return null}),e.cityState=ko.computed(function(){var t=e.city()||"",n=e.state()?e.state().code():"";return t+", "+n}),e.cityStateZip=ko.computed(function(){var t=e.city()||"",n=e.state()?e.state().code():"",a=e.postalCode()||"";return t+", "+n+"  "+a}),e.fullFormatted=ko.computed(function(){var t=e.line1()?e.line1()+" \n":"",n=e.line2()?e.line2()+" \n":"",a=e.line3()?e.line3()+" \n":"",r=e.cityStateZip();return t+n+a+r})}function u(e){ko.utils.arrayForEach(e.phones(),function(e){e.phonePreferred(!1)})}function v(e){ko.utils.arrayForEach(e.phones(),function(e){e.textPreferred(!1)})}function m(e){ko.utils.arrayForEach(e.addresses(),function(e){e.preferred(!1)})}function g(e){ko.utils.arrayForEach(e.emails(),function(e){e.preferred(!1)})}e.addEntityType({shortName:"ContactCard",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},isPatient:{dataType:"Boolean"},userId:{dataType:"String"},isUser:{dataType:"Boolean"},firstName:{dataType:"String"},middleName:{dataType:"String"},lastName:{dataType:"String"},preferredName:{dataType:"String"},gender:{dataType:"String",defaultValue:"N"},timeZoneId:{dataType:"String"},preferredTimesOfDayIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},preferredDaysOfWeekIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},languages:{complexTypeName:"ContactLanguage:#Nightingale",isScalar:!1},modes:{complexTypeName:"ContactMode:#Nightingale",isScalar:!1},emails:{complexTypeName:"Email:#Nightingale",isScalar:!1},phones:{complexTypeName:"Phone:#Nightingale",isScalar:!1},addresses:{complexTypeName:"Address:#Nightingale",isScalar:!1},contactTypeId:{dataType:"String"},contactSubTypes:{complexTypeName:"ContactSubType:#Nightingale",isScalar:!1},externalRecordId:{dataType:"String"},dataSource:{dataType:"String",defaultValue:"Engage"},statusId:{dataType:"Int64",defaultValue:1},deceasedId:{dataType:"Int64",defaultValue:2},prefix:{dataType:"String"},suffix:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},createdById:{dataType:"String"},updatedById:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_ContactCard",foreignKeyNames:["patientId"]},timeZone:{entityTypeName:"TimeZone",isScalar:!0,associationName:"TimeZone_ContactCards",foreignKeyNames:["timeZoneId"]},contactType:{entityTypeName:"ContactTypeLookup",isScalar:!0,associationName:"ContactTypeLookup_ContactCard",foreignKeyNames:["contactTypeId"]},contactStatus:{entityTypeName:"ContactStatus",isScalar:!0,associationName:"Contact_ContactStatus",foreignKeyNames:["statusId"]},deceased:{entityTypeName:"Deceased",isScalar:!0,associationName:"Contact_Deceased",foreignKeyNames:["deceasedId"]},createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_CreatedBy",foreignKeyNames:["createdById"]},updatedBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_UpdatedBy",foreignKeyNames:["updatedById"]},careTeam:{entityTypeName:"CareTeam",isScalar:!0,associationName:"CareTeam_Patient_ContactCard"}}}),e.addEntityType({shortName:"ContactSearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},isPatient:{dataType:"Boolean"},userId:{dataType:"String"},isUser:{dataType:"Boolean"},firstName:{dataType:"String"},middleName:{dataType:"String"},lastName:{dataType:"String"},preferredName:{dataType:"String"},gender:{dataType:"String",defaultValue:"N"},timeZoneId:{dataType:"String"},preferredTimesOfDayIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},preferredDaysOfWeekIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},languages:{complexTypeName:"ContactLanguage:#Nightingale",isScalar:!1},modes:{complexTypeName:"ContactMode:#Nightingale",isScalar:!1},emails:{complexTypeName:"Email:#Nightingale",isScalar:!1},phones:{complexTypeName:"Phone:#Nightingale",isScalar:!1},addresses:{complexTypeName:"Address:#Nightingale",isScalar:!1},contactTypeId:{dataType:"String"},contactSubTypes:{complexTypeName:"ContactSubType:#Nightingale",isScalar:!1},externalRecordId:{dataType:"String"},dataSource:{dataType:"String",defaultValue:"Engage"},statusId:{dataType:"Int64",defaultValue:1},deceasedId:{dataType:"Int64",defaultValue:2},prefix:{dataType:"String"},suffix:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},createdById:{dataType:"String"},updatedById:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_ContactSearch",foreignKeyNames:["patientId"]},timeZone:{entityTypeName:"TimeZone",isScalar:!0,associationName:"TimeZone_ContactCards",foreignKeyNames:["timeZoneId"]},contactType:{entityTypeName:"ContactTypeLookup",isScalar:!0,associationName:"ContactTypeLookup_ContactCard",foreignKeyNames:["contactTypeId"]},contactStatus:{entityTypeName:"ContactStatus",isScalar:!0,associationName:"Contact_ContactStatus",foreignKeyNames:["statusId"]},deceased:{entityTypeName:"Deceased",isScalar:!0,associationName:"Contact_Deceased",foreignKeyNames:["deceasedId"]},createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_CreatedBy",foreignKeyNames:["createdById"]},updatedBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_UpdatedBy",foreignKeyNames:["updatedById"]}}}),e.addEntityType({shortName:"ContactCarememberSearch",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},isPatient:{dataType:"Boolean"},userId:{dataType:"String"},isUser:{dataType:"Boolean"},firstName:{dataType:"String"},middleName:{dataType:"String"},lastName:{dataType:"String"},preferredName:{dataType:"String"},gender:{dataType:"String",defaultValue:"N"},timeZoneId:{dataType:"String"},preferredTimesOfDayIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},preferredDaysOfWeekIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},languages:{complexTypeName:"ContactLanguage:#Nightingale",isScalar:!1},modes:{complexTypeName:"ContactMode:#Nightingale",isScalar:!1},emails:{complexTypeName:"Email:#Nightingale",isScalar:!1},phones:{complexTypeName:"Phone:#Nightingale",isScalar:!1},addresses:{complexTypeName:"Address:#Nightingale",isScalar:!1},contactTypeId:{dataType:"String"},contactSubTypes:{complexTypeName:"ContactSubType:#Nightingale",isScalar:!1},externalRecordId:{dataType:"String"},dataSource:{dataType:"String",defaultValue:"Engage"},statusId:{dataType:"Int64",defaultValue:1},deceasedId:{dataType:"Int64",defaultValue:2},prefix:{dataType:"String"},suffix:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},createdById:{dataType:"String"},updatedById:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_ContactCarememberSearch",foreignKeyNames:["patientId"]},timeZone:{entityTypeName:"TimeZone",isScalar:!0,associationName:"TimeZone_ContactCards",foreignKeyNames:["timeZoneId"]},contactType:{entityTypeName:"ContactTypeLookup",isScalar:!0,associationName:"ContactTypeLookup_ContactCard",foreignKeyNames:["contactTypeId"]},contactStatus:{entityTypeName:"ContactStatus",isScalar:!0,associationName:"Contact_ContactStatus",foreignKeyNames:["statusId"]},deceased:{entityTypeName:"Deceased",isScalar:!0,associationName:"Contact_Deceased",foreignKeyNames:["deceasedId"]},createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_CreatedBy",foreignKeyNames:["createdById"]},updatedBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"ContactCard_UpdatedBy",foreignKeyNames:["updatedById"]}}}),e.addEntityType({shortName:"Phone",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},number:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},isText:{dataType:"Boolean"},phonePreferred:{dataType:"Boolean"},textPreferred:{dataType:"Boolean"},dataSource:{dataType:"String"}}}),e.addEntityType({shortName:"Email",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactLanguage",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpLanguageId:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactMode",namespace:"Nightingale",isComplexType:!0,dataProperties:{lookUpModeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Address",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},line1:{dataType:"String"},line2:{dataType:"String"},line3:{dataType:"String"},city:{dataType:"String"},stateId:{dataType:"String"},postalCode:{dataType:"String"},typeId:{dataType:"String"},optOut:{dataType:"Boolean"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"ContactTypeLookup",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},parentId:{dataType:"String"},name:{dataType:"String"},role:{dataType:"String"},group:{dataType:"String"}}}),e.addEntityType({shortName:"ContactSubType",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},subTypeId:{dataType:"String"},specialtyId:{dataType:"String"},subSpecialtyIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}}}),e.registerEntityTypeCtor("ContactCard",null,n),e.registerEntityTypeCtor("ContactSearch",null,n),e.registerEntityTypeCtor("ContactCarememberSearch",null,n),e.registerEntityTypeCtor("ContactLanguage",null,a),e.registerEntityTypeCtor("ContactMode",null,i),e.registerEntityTypeCtor("Address",null,p),e.registerEntityTypeCtor("Phone",null,l),e.registerEntityTypeCtor("Email",null,c),e.registerEntityTypeCtor("ContactSubType",null,t)}function s(){o||(o=t("services/datacontext"))}var o,d=(breeze.DataType,breeze.Validator,"Language already associated"),l={initialize:i};return l}),n("models/controls",[],function(){function e(){return this}var t={modal:e};return t}),n("models/goals",["services/session"],function(e){function n(e){function t(e){e.isNew=ko.observable(!1),e.checkAppend=function(){a(e.newDetails,e.details)},e.relatedInterventions=ko.computed(function(){i();var t=[];return e.goal()&&ko.utils.arrayForEach(e.goal().interventions(),function(n){var a=ko.utils.arrayFirst(n.barrierIds(),function(t){return t.id()===e.id()});a&&t.push(n)}),t}),e.relatedTasks=ko.computed(function(){i();var t=[];return e.goal()&&ko.utils.arrayForEach(e.goal().tasks(),function(n){var a=ko.utils.arrayFirst(n.barrierIds(),function(t){return t.id()===e.id()});a&&t.push(n)}),t}),e.taskListString=ko.computed(function(){i();var t="",n=e.relatedTasks();return ko.utils.arrayForEach(n,function(e){t+=e?e.description()+", ":""}),t.length>0?t=t.substr(0,t.length-2):0===t.length&&(t="None"),t}),e.interventionListString=ko.computed(function(){i();var t="",n=e.relatedInterventions();return ko.utils.arrayForEach(n,function(e){t+=e?e.description()+", ":""}),t.length>0?t=t.substr(0,t.length-2):0===t.length&&(t="None"),t}),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=[],a=e.name();return a||(n.push({PropName:"name",Message:"Description is required"}),t=!0),e.validationErrors(n),!t}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function n(e){e.isNew=ko.observable(!1),e.checkAppend=function(){a(e.newDetails,e.details)},e.focusAreaString=ko.computed(function(){i();var t="";return ko.utils.arrayForEach(e.focusAreaIds(),function(e){var n=ko.utils.arrayFirst(s.enums.focusAreas(),function(t){return t.id()===e.id()});t+=n.name()+", "}),t.length>0&&(t=t.substr(0,t.length-2)),0===t.length&&(t="-"),t}),e.programString=ko.computed(function(){i();var t="",n=e.programIds();if(e.patient()&&e.patient().programs()){var a=e.patient().programs();ko.utils.arrayForEach(n,function(e){var n=ko.utils.arrayFirst(a,function(t){return t.id()===e.id()});t+=n?n.name()+", ":""}),t.length>0&&(t=t.substr(0,t.length-2))}return 0===t.length&&(t="None"),t}),e.isLoaded=!1,e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=[],a=e.name();return a||(n.push({PropName:"name",Message:"Description is required"}),t=!0),e.validationErrors(n),!t}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.sortedInterventions=ko.computed(function(){return e.interventions().sort(function(e,t){return e.description()==t.description()?e.description()<t.description()?-1:1:e.description()<t.description()?-1:1})}),e.sortedTasks=ko.computed(function(){return e.tasks().sort(function(e,t){return e.description()==t.description()?e.description()<t.description()?-1:1:e.description()<t.description()?-1:1})})}function r(e){e.isNew=ko.observable(!1),e.checkAppend=function(){a(e.newDetails,e.details)},e.barrierString=ko.computed(function(){i();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(n){var a=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===n.id()});a&&(t+=a.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t}),e.relatedBarriers=ko.computed(function(){i();var t=[];return e.goal()&&ko.utils.arrayForEach(e.barrierIds(),function(n){var a=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===n.id()});a&&t.push(a)}),t}),e.computedGoalName=ko.computed(function(){var t="";return e.goal()?t=e.goal().name():e.goalName()&&(t=e.goalName()),t}),e.computedPatient=ko.computed(function(){var t="";return e.goal()&&e.goal().patient()?t=e.goal().patient():e.goalName()&&(t=e.patientDetails()),t}),e.isDirty=ko.observable(!1),e.clearDirty=function(){e.isDirty(!1)},e.watchDirty=function(){var t=e.entityAspect.propertyChanged.subscribe(function(n){e.isDirty(!0),t.dispose()}),n=e.barrierIds.subscribe(function(t){e.isDirty(!0),n.dispose()})},e.dueDateErrors=ko.observableArray([]),e.startDateErrors=ko.observableArray([]),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=e.description(),a=(e.startDate(),e.dueDate(),[]),r=e.dueDateErrors(),i=e.startDateErrors(),s=e.isDirty();return n||(t=!0,(s||!e.isNew())&&a.push({PropName:"description",Message:"Description is required"})),i.length>0&&ko.utils.arrayForEach(i,function(e){a.push({PropName:"startDate",Message:"Start Date "+e.Message}),t=!0}),r.length>0&&ko.utils.arrayForEach(r,function(e){a.push({PropName:"dueDate",Message:"Due Date "+e.Message}),t=!0}),e.validationErrors(a),!t}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function o(e){e.checkAppend=function(){a(e.newDetails,e.details)},e.barrierString=ko.computed(function(){i();var t="";return e.goal()&&(ko.utils.arrayForEach(e.barrierIds(),function(n){var a=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===n.id()});a&&(t+=a.name()+", ")}),t.length>0&&(t=t.substr(0,t.length-2))),0===t.length&&(t="None"),t}),e.relatedBarriers=ko.computed(function(){i();var t=[];return e.goal()&&ko.utils.arrayForEach(e.barrierIds(),function(n){var a=ko.utils.arrayFirst(e.goal().barriers(),function(e){return e.id()===n.id()});a&&t.push(a)}),t}),e.computedGoalName=ko.computed(function(){var t="";return e.goal()?t=e.goal().name():e.goalName()&&(t=e.goalName()),t}),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=[],a=e.description();return a||(n.push({PropName:"description",Message:"Description is required"}),t=!0),e.validationErrors(n),!t}),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function d(e){if(i(),e.path=ko.computed(function(){var t=e.controlType(),n="";return t&&(1===t?n="programdesigner/customattributes/singleselect.edit.html":2===t?n="programdesigner/customattributes/multiselect.edit.html":3===t?n="programdesigner/customattributes/datepicker.edit.html":4===t?n="programdesigner/customattributes/datetimepicker.edit.html":5===t&&(n="programdesigner/customattributes/input.edit.html")),n}),e.displayPath=ko.computed(function(){var t=e.controlType(),n="";return t&&(1===t?n="programdesigner/customattributes/singleselect.html":2===t?n="programdesigner/customattributes/multiselect.html":3===t?n="programdesigner/customattributes/datepicker.html":4===t?n="programdesigner/customattributes/datetimepicker.html":5===t&&(n="programdesigner/customattributes/input.html")),n}),0===e.values().length){var t=s.createComplexType("Value",{});e.values.push(t)}e.computedValue=ko.computed({read:function(){var t=null;return 1===e.values().length?t=e.values()[0]:e.values().length>1&&(t=e.values()),t},write:function(t){2===e.controlType||e.values()[0].value(t)}}),e.displayValue=ko.computed(function(){var t=null;return 1===e.values().length?t=ko.utils.arrayFirst(e.options(),function(t){return e.values()[0].value()===t.value()}):e.values().length>1&&(t=e.values()),t?t.display():""})}function l(e){e.fullName=ko.computed(function(){var t=e.firstName(),n=e.lastName();return t+" "+n}).extend({throttle:100}),e.firstLastOrPreferredName=ko.computed(function(){var t=e.preferredName(),n=e.firstName();n||(n="");var a=e.lastName();return a||(a=""),t?t:n+" "+a}).extend({throttle:100})}e.addEntityType({shortName:"Goal",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},sourceId:{dataType:"String"},statusId:{dataType:"String"},typeId:{dataType:"String"},patientId:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},focusAreaIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1},details:{dataType:"String"},newDetails:{dataType:"String"}},navigationProperties:{source:{entityTypeName:"Source",isScalar:!0,associationName:"Goal_Source",foreignKeyNames:["sourceId"]},type:{entityTypeName:"GoalType",isScalar:!0,associationName:"Goal_Type",foreignKeyNames:["typeId"]},status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Goal_Status",foreignKeyNames:["statusId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Goals",foreignKeyNames:["patientId"]},tasks:{entityTypeName:"Task",isScalar:!1,associationName:"Goal_Tasks"},barriers:{entityTypeName:"Barrier",isScalar:!1,associationName:"Goal_Barriers"},interventions:{entityTypeName:"Intervention",isScalar:!1,associationName:"Goal_Interventions"}}}),e.addEntityType({shortName:"Attribute",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"},values:{complexTypeName:"Value:#Nightingale",isScalar:!1},controlType:{dataType:"Int64"},order:{dataType:"Int64"},options:{complexTypeName:"ValueDisplay:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Value",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"}}}),e.addEntityType({shortName:"Barrier",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},categoryId:{dataType:"String"},statusId:{dataType:"String"},patientGoalId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},details:{dataType:"String"},newDetails:{dataType:"String"}},navigationProperties:{category:{entityTypeName:"BarrierCategory",isScalar:!0,associationName:"Barrier_Category",foreignKeyNames:["categoryId"]},status:{entityTypeName:"BarrierStatus",isScalar:!0,associationName:"Barrier_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Barriers",foreignKeyNames:["patientGoalId"]}}}),e.addEntityType({shortName:"Task",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},createdById:{dataType:"String"},targetValue:{dataType:"String"},startDate:{dataType:"DateTime"},targetDate:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},statusDate:{dataType:"DateTime"},goalName:{dataType:"String"},patientGoalId:{dataType:"String"},patientId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},customAttributes:{complexTypeName:"Attribute:#Nightingale",isScalar:!1},deleteFlag:{dataType:"Boolean"},details:{dataType:"String"},newDetails:{dataType:"String"}},navigationProperties:{status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Task_Status",foreignKeyNames:["statusId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Tasks",foreignKeyNames:["patientGoalId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"Task_PatientDetails",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"Intervention",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},description:{dataType:"String"},statusId:{dataType:"String"},createdById:{dataType:"String"},categoryId:{dataType:"String"},startDate:{dataType:"DateTime"},dueDate:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},goalName:{dataType:"String"},patientGoalId:{dataType:"String"},patientId:{dataType:"String"},assignedToId:{dataType:"String"},barrierIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},deleteFlag:{dataType:"Boolean"},details:{dataType:"String"},newDetails:{dataType:"String"}},navigationProperties:{status:{entityTypeName:"InterventionStatus",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["statusId"]},category:{entityTypeName:"InterventionCategory",isScalar:!0,associationName:"Intervention_Status",foreignKeyNames:["categoryId"]},goal:{entityTypeName:"Goal",isScalar:!0,associationName:"Goal_Interventions",foreignKeyNames:["patientGoalId"]},assignedTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Intervention_CareManager",foreignKeyNames:["assignedToId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"Intervention_PatientDetails",foreignKeyNames:["patientId"]}}}),e.addEntityType({shortName:"PatientDetails",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"}}}),e.addEntityType({shortName:"IdName",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"ValueDisplay",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},display:{dataType:"String"}}}),e.addEntityType({shortName:"FocusArea",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Source",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierCategory",namespace:"Nightingale",
dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"InterventionStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"BarrierStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"GoalTaskStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},order:{dataType:"Int64"},iconClass:{dataType:"String"},textClass:{dataType:"String"}}}),e.addEntityType({shortName:"GoalType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareManager",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String"},preferredName:{dataType:"String"},firstName:{dataType:"String"},lastName:{dataType:"String"}}}),e.registerEntityTypeCtor("Goal",null,n),e.registerEntityTypeCtor("Barrier",null,t),e.registerEntityTypeCtor("Intervention",null,r),e.registerEntityTypeCtor("Task",null,o),e.registerEntityTypeCtor("Attribute",null,d),e.registerEntityTypeCtor("CareManager",null,l)}function a(t,n){if(t()){var a="";n()&&n().length&&(a="\n"),a+=moment().format("MM-DD-YYYY h:mm A")+" ",a+=" "+e.currentUser().firstName()+" "+e.currentUser().lastName(),a+=" - "+t(),n(n()?n()+a:a),t("")}}function r(e){}function i(){s||(s=t("services/datacontext"))}var s,o=(breeze.DataType,{initialize:n,createMocks:r});return o}),n("models/lookups",["services/session"],function(e){function t(e){e.addEntityType({shortName:"TimeOfDay",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"TimeZone",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},preferred:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Language",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"State",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},code:{dataType:"String"},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationMode",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CommunicationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},commModeIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}}}),e.addEntityType({shortName:"Priority",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},levelName:{dataType:"String"},imageSource:{dataType:"String"},iconClass:{dataType:"String"}},navigationProperties:{patients:{entityTypeName:"Patient",isScalar:!1,associationName:"Priority_Patients"}}}),e.addEntityType({shortName:"PatientStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ContactStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareMemberStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"CareTeamFrequency",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"SystemStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"PatientSystemStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"PatientStatusReason",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ObservationType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"CareMemberType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ElementState",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},order:{dataType:"Int64"},name:{dataType:"String"}}}),e.addEntityType({shortName:"EligibilityStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"EnrollmentStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"YesOrNo",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ToDoCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"NoteMethod",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteOutcome",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteWho",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteSource",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"NoteType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"String"}}}),e.addEntityType({shortName:"VisitType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"UtilizationSource",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"Disposition",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"UtilizationLocation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"AllergyType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Severity",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Reaction",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"AllergySource",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"MedSuppType",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"FreqHowOften",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"FreqWhen",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Frequency",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"MedicationStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"MedicationCategory",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"DurationUnit",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"RefusalReason",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"MedicationReview",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},isDefault:{dataType:"Boolean"}}}),e.addEntityType({shortName:"MaritalStatus",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"Deceased",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}})}function n(e){e.createEntity("ElementState",{id:1,order:6,name:"Removed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:2,order:3,name:"Not Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:3,order:1,name:"Started"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:5,order:4,name:"Completed"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:4,order:2,name:"In Progress"}).entityAspect.acceptChanges(),e.createEntity("ElementState",{id:6,order:5,name:"Closed"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:0,levelName:"Not Set",imageSource:"/NightingaleUI/Content/images/priority_empty.png",iconClass:"icon-priority-empty"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:1,levelName:"Low",imageSource:"/NightingaleUI/Content/images/priority_low.png",iconClass:"icon-priority grey"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:2,levelName:"Medium",imageSource:"/NightingaleUI/Content/images/priority_medium.png",iconClass:"icon-priority yellow"}).entityAspect.acceptChanges(),e.createEntity("Priority",{id:3,levelName:"High",imageSource:"/NightingaleUI/Content/images/priority_high.png",iconClass:"icon-priority red"}).entityAspect.acceptChanges(),e.createEntity("PatientStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("PatientStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("PatientStatus",{id:3,name:"Archived"}).entityAspect.acceptChanges(),e.createEntity("ContactStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("ContactStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("ContactStatus",{id:3,name:"Archived"}).entityAspect.acceptChanges(),e.createEntity("CareMemberStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("CareMemberStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("CareMemberStatus",{id:3,name:"Invalid"}).entityAspect.acceptChanges(),e.createEntity("SystemStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("SystemStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("PatientSystemStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("PatientSystemStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:1,name:"Radio",path:"programdesigner/questiontypes/radio.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:2,name:"Text",path:"programdesigner/questiontypes/label.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:3,name:"Textbox",path:"programdesigner/questiontypes/textbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:10,name:"TextArea",path:"programdesigner/questiontypes/textarea.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:4,name:"SingleSelect",path:"programdesigner/questiontypes/singleselect.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:7,name:"Complete",path:"programdesigner/questiontypes/button.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:6,name:"DatePicker",path:"programdesigner/questiontypes/datepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:8,name:"TimePicker",path:"programdesigner/questiontypes/timepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:9,name:"DateTimePicker",path:"programdesigner/questiontypes/datetimepicker.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:5,name:"Checkbox",path:"programdesigner/questiontypes/checkbox.html"}).entityAspect.acceptChanges(),e.createEntity("StepType",{id:11,name:"Modal",path:"programdesigner/questiontypes/modal.html"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:1,name:"Open",order:1,iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:2,name:"Met",order:4,iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:3,name:"Not Met",order:2,iconClass:"icon-warning-o red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalTaskStatus",{id:4,name:"Abandoned",order:3,iconClass:"icon-warning red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:1,name:"Open",iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("BarrierStatus",{id:2,name:"Resolved",iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:1,name:"Open",iconClass:"icon-priority-empty orange",textClass:""}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:2,name:"Completed",iconClass:"icon-check darkgreen",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("InterventionStatus",{id:3,name:"Removed",iconClass:"icon-warning-o red",textClass:"grey"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:1,name:"Long-Term"}).entityAspect.acceptChanges(),e.createEntity("GoalType",{id:2,name:"Short-Term"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:-1,name:"None"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:1,name:"Primary"}).entityAspect.acceptChanges(),e.createEntity("ObservationDisplay",{id:2,name:"Secondary"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:1,name:"Not Eligible"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:2,name:"Eligible"}).entityAspect.acceptChanges(),e.createEntity("EligibilityStatus",{id:3,name:"Pending"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:1,name:"Enrolled"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:2,name:"Pending"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:3,name:"Did Not Enroll"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:4,name:"Disenrolled"}).entityAspect.acceptChanges(),e.createEntity("EnrollmentStatus",{id:5,name:"Completed Program"}).entityAspect.acceptChanges(),e.createEntity("YesOrNo",{id:1,name:"No"}).entityAspect.acceptChanges(),e.createEntity("YesOrNo",{id:2,name:"Yes"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:3,name:"Refused"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:4,name:"Not Done Medical"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:5,name:"Unknown"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:6,name:"Invalid"}).entityAspect.acceptChanges(),e.createEntity("AllergyStatus",{id:7,name:"Duplicate"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:1,name:"Active"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:2,name:"Inactive"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:3,name:"Refused"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:4,name:"Not Done Medical"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:5,name:"Unknown"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:6,name:"Invalid"}).entityAspect.acceptChanges(),e.createEntity("MedicationStatus",{id:7,name:"Duplicate"}).entityAspect.acceptChanges(),e.createEntity("MedicationCategory",{id:1,name:"Medication"}).entityAspect.acceptChanges(),e.createEntity("Deceased",{id:1,name:"Yes"}).entityAspect.acceptChanges(),e.createEntity("Deceased",{id:2,name:"No"}).entityAspect.acceptChanges()}var a=(breeze.DataType,{initialize:t,initializeEnums:n});return a}),n("models/medications",["services/session","services/dateHelper"],function(e,n){function a(e){function t(e){e.isNew=ko.observable(!1),e.isCreateNewMedication=ko.observable(!1),e.customFrequency=ko.observable(),e.isDuplicate=ko.observable(!1),e.familyId=ko.observable(),e.canSave=ko.observable(!1),e.isEditing=ko.observable(!1),e.recalculateNDC=ko.observable(!1),e.deleteFlag(!1),e.computedSigCode=ko.computed(function(){var t="";if(e.startDate()&&e.endDate()){var n=moment(e.startDate()),n=n&&n.isValid()?n:null,a=moment(e.endDate()),a=a&&a.isValid()?a:null;if(n&&a){var r=a.diff(n,"days");r&&(t="for "+r+(1==r?" day":" days"))}}if(!(e.freqQuantity()||e.strength()||e.form()||e.route()||e.frequency()||t))return"-";var i=e.strength()?e.strength().trim():"",s=e.form()?e.form().trim():"",o=e.route()?e.route().trim():"",d=e.freqQuantity()?e.freqQuantity().trim():"";d=d?d:"";var l=e.frequency()?e.frequency().name().trim():"";return d||i||s||o||l||t?d+" "+i+" "+s+" "+o+" "+l+" "+t:"-"}),e.computedDisplayName=ko.computed(function(){var t="",n=e.freqQuantity(),a=e.name(),r=e.strength(),i=e.route(),s=e.form();return t+=a?a+" - ":"",t+=n?"("+n+") ":"",t+=r?r+" ":"",t+=i?i+" ":"",t+=s?s+" ":""," - "===t.substr(t.length-3)&&(t=t.slice(0,-3)),t}),e.medSortDate=ko.computed(function(){var t="",n=e.startDate(),a=e.orderedDate(),r=e.rxDate(),i=e.prescribedDate();return t=n?n:a?a:r?r:i?i:null}),e.computedPrescribedBy=ko.computed(function(){var t="",n=e.prescribedBy();t=n?n:"";var a=e.prescribedDate();if(a){var r=moment(a),i=r.format("MM/DD/YYYY");t=t?t+" on "+i:i}return t}),e.computedOrderedBy=ko.computed(function(){var t="",n=e.orderedBy();t=n?n:"";var a=e.orderedDate();if(a){var r=moment(a),i=r.format("MM/DD/YYYY");t=t?t+" on "+i:i}return t}),e.computedRxInfo=ko.computed(function(){var t="",n=e.type();t=n?n.name():"Unknown";var a=e.rxNumber();t=a?t+", Rx # "+a:t;var r=e.rxDate();if(r){var i=moment(r),s=i.format("MM/DD/YYYY");t=t?t+" on "+s:t}return t}),e.computedDuration=ko.computed(function(){var t="",n=""+(e.durationUnit()?e.durationUnit().name():""),a=e.duration()?e.duration()+" ":"";return t=a+n}),e.setStatus=function(t,n){function a(){e.isNew(!1),e.entityAspect.acceptChanges(),i.createAlert("warning",n)}r(),e.statusId(t),i.saveMedication(e).then(a)},e.inactivate=function(){e.setStatus(2,"Medication has been deactivated!")},e.activatePatientMedication=function(){e.setStatus(1,"Medication has been activated!")},e.deletePatientMedication=function(){function t(){return!0}var n="You are about to delete: "+e.name()+" from this individual.  Press OK to continue, or cancel to return without deleting.",a=confirm(n);return a!==!0?!1:(r(),void i.deletePatientMedication(e).then(t))},e.startDateErrors=ko.observableArray([]),e.endDateErrors=ko.observableArray([]),e.prescribedDateErrors=ko.observableArray([]),e.orderedDateErrors=ko.observableArray([]),e.rxDateErrors=ko.observableArray([]),e.validationErrors=ko.observableArray([]),e.isValid=ko.computed(function(){var t=!1,n=[],a=e.startDate(),r=e.endDate(),i=e.startDateErrors(),s=e.endDateErrors();return i.length>0&&ko.utils.arrayForEach(i,function(a){n.push({PropName:"startDate",Message:e.name()+" Start Date "+a.Message}),t=!0}),r&&(s.length>0&&ko.utils.arrayForEach(s,function(a){n.push({PropName:"endDate",Message:e.name()+" End Date "+a.Message}),t=!0}),a&&!t&&moment(a).isAfter(moment(r))&&(n.push({PropName:"endDate",Message:e.name()+" End Date must be on or after: "+moment(a).format("MM/DD/YYYY")}),n.push({PropName:"startDate",Message:e.name()+" Start Date must be on or before: "+moment(r).format("MM/DD/YYYY")}),t=!0)),e.validationErrors(n),e.canSave()&&!t}),e.needToSave=function(){var t=e.isNew()&&e.name()&&e.type()&&e.category()&&e.canSave();return t=t||e.isEditing()&&e.entityAspect.entityState.isModified()},e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t})}function n(e){void 0===e.patientId&&(e.patientId=ko.observable(null)),void 0===e.sortOrder&&(e.sortOrder=ko.observable(0))}e.addEntityType({shortName:"PatientMedication",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String"},dosage:{dataType:"String"},strength:{dataType:"String"},route:{dataType:"String"},form:{dataType:"String"},deleteFlag:{dataType:"Boolean"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},statusId:{dataType:"String"},freqQuantity:{dataType:"String"},freqHowOftenId:{dataType:"String"},frequencyId:{dataType:"String"},freqWhenId:{dataType:"String"},categoryId:{dataType:"String"},sourceId:{dataType:"String"},systemName:{dataType:"String"},typeId:{dataType:"String"},prescribedBy:{dataType:"String"},sigCode:{dataType:"String"},reason:{dataType:"String"},isCreateNewMedication:{dataType:"Boolean"},customFrequency:{dataType:"String"},isDuplicate:{dataType:"Boolean"},familyId:{dataType:"String"},notes:{dataType:"String"},nDCs:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},pharmClasses:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},dataSource:{dataType:"String",defaultValue:"Engage"},originalDataSource:{dataType:"String"},duration:{dataType:"String"},durationUnitId:{dataType:"String"},otherDuration:{dataType:"String"},reviewId:{dataType:"String"},refusalReasonId:{dataType:"String"},otherRefusalReason:{dataType:"String"},orderedBy:{dataType:"String"},orderedDate:{dataType:"DateTime"},prescribedDate:{dataType:"DateTime"},rxNumber:{dataType:"String"},rxDate:{dataType:"DateTime"},pharmacy:{dataType:"String"},externalRecordId:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Medications",foreignKeyNames:["patientId"]},status:{entityTypeName:"MedicationStatus",isScalar:!0,associationName:"Medication_Status",foreignKeyNames:["statusId"]},category:{entityTypeName:"MedicationCategory",isScalar:!0,associationName:"Medication_Category",foreignKeyNames:["categoryId"]},type:{entityTypeName:"MedSuppType",isScalar:!0,associationName:"Medication_Type",foreignKeyNames:["typeId"]},source:{entityTypeName:"AllergySource",isScalar:!0,associationName:"Medication_Source",foreignKeyNames:["sourceId"]},freqHowOften:{entityTypeName:"FreqHowOften",isScalar:!0,associationName:"Medication_FreqHowOften",foreignKeyNames:["freqHowOftenId"]},freqWhen:{entityTypeName:"FreqWhen",isScalar:!0,associationName:"Medication_FreqWhen",foreignKeyNames:["freqWhenId"]},frequency:{entityTypeName:"PatientMedicationFrequency",isScalar:!0,associationName:"Medication_Frequency",foreignKeyNames:["frequencyId"]},durationUnit:{entityTypeName:"DurationUnit",isScalar:!0,associationName:"Medication_DurationUnit",foreignKeyNames:["durationUnitId"]},review:{entityTypeName:"MedicationReview",isScalar:!0,associationName:"Medication_MedicationReview",foreignKeyNames:["reviewId"]},refusalReason:{entityTypeName:"RefusalReason",isScalar:!0,associationName:"Medication_RefusalReason",foreignKeyNames:["refusalReasonId"]}}}),e.registerEntityTypeCtor("PatientMedication",null,t),e.addEntityType({shortName:"PatientMedicationFrequency",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String",isNullable:!0},sortOrder:{dataType:"Int64"}}}),e.registerEntityTypeCtor("PatientMedicationFrequency",null,n)}function r(){i||(i=t("services/datacontext"))}var i,s=(breeze.DataType,{initialize:a});return s}),n("models/notes",["services/session","services/dateHelper"],function(e,n){function a(t){function n(e){e.fullFirstName=ko.computed(function(){var t=e.firstName(),n=e.preferredName(),a=e.middleName()?e.middleName().substr(0,1)+".":"",r=n?n:2===a.length?t+" "+a:t;return r}),e.fullLastName=ko.computed(function(){var t=e.lastName(),n=e.suffix(),a=n?t+" "+n:t;return a}),e.fullName=ko.computed(function(){var t=e.fullFirstName(),n=e.fullLastName();return t?t+" "+n:n})}function a(t){t.isNew=ko.observable(!1),t.programString=ko.computed(function(){i();var e="",n=t.programIds();if(t.patient()&&t.patient().programs()){var a=t.patient().programs();ko.utils.arrayForEach(n,function(t){var n=ko.utils.arrayFirst(a,function(e){return e.id()===t.id()});n&&(e+=n.name()+", ")}),e.length>0&&(e=e.substr(0,e.length-2))}return 0===e.length&&(e="None"),e}),t.createdBy=ko.computed(function(){i();var e=ko.utils.arrayFirst(d.enums.careManagers(),function(e){return e.id()===t.createdById()});return e});var n=s();t.isEditable=ko.observable(!1),t.createdById()===n.id()?t.isEditable(!1):t.isEditable(!0),t.updatedBy=ko.computed(function(){i();var e=ko.utils.arrayFirst(d.enums.careManagers(),function(e){return e.id()===t.updatedById()});return e}),t.localDate=ko.computed(function(){var e=moment(t.createdOn()).format("MM/DD/YYYY");return e}),t.displayText=ko.computed(function(){var e="";return e=t.text()&&/\S/.test(t.text())?t.text():"-"}),t.contactedOnErrors=ko.observableArray([]),t.admitDateErrors=ko.observableArray([]),t.dischargeDateErrors=ko.observableArray([]),t.validationErrors=ko.observableArray([]),t.isDirty=ko.observable(!1),t.clearDirty=function(){t.isDirty(!1)},t.watchDirty=function(){var e=t.entityAspect.propertyChanged.subscribe(function(n){t.isDirty(!0),e.dispose()}),n=t.programIds.subscribe(function(e){t.isDirty(!0),n.dispose()})},t.checkAppend=function(){var n="\n"+moment().format("MM-DD-YYYY h:mm A")+" ";n+=" "+e.currentUser().firstName()+" "+e.currentUser().lastName(),n+=" - "+t.newContent(),t.text(t.text()?t.text()+n:n),t.newContent("")},t.newContent=ko.observable(),t.isValid=ko.computed(function(){var e=t.type(),n=e?e.name().toLowerCase():null,a=!1,r=[],i=t.contactedOn(),s=t.contactedOnErrors(),o=t.text(),d=t.duration(),l=t.admitDateErrors(),c=t.admitDate(),p=t.dischargeDateErrors(),u=t.dischargeDate(),v=t.visitType(),m=(t.otherType(),t.disposition(),t.otherDisposition(),t.utilizationLocation(),t.otherLocation(),t.isDirty());switch(d&&d>1440&&setTimeout(function(){t.duration(1440)},100),null!==d&&1>d&&setTimeout(function(){t.duration(null)},100),n){case"touchpoint":o||(a=!0,m&&r.push({PropName:"text",Message:"Content is required"})),i&&s.length>0&&ko.utils.arrayForEach(s,function(e){r.push({PropName:"contactedOn",Message:"Date/Time of Contact "+e.Message}),a=!0});break;case"utilization":l.length>0&&ko.utils.arrayForEach(l,function(e){r.push({PropName:"admitDate",Message:"Visit/Admit Date "+e.Message}),a=!0}),p.length>0&&ko.utils.arrayForEach(p,function(e){r.push({PropName:"dischargeDate",Message:"Discharge Date "+e.Message}),a=!0}),0==l.length&&0==p.length&&c&&u&&moment(c).isAfter(moment(u))&&(r.push({PropName:"admitDate",Message:" Discharge Date must be on or after: "+moment(c).format("MM/DD/YYYY")}),r.push({PropName:"dischargeDate",Message:" Visit/Admit Date must be on or before: "+moment(u).format("MM/DD/YYYY")}),a=!0),v||(a=!0,m&&r.push({PropName:"visitType",Message:"Visit Type is required"}));break;case null:case void 0:r.push({PropName:"Type",Message:"Type is required "}),a=!0;default:o||(a=!0,m&&r.push({PropName:"text",Message:"Content is required"}))}return t.validationErrors(r),!a}),t.showOtherVisitType=ko.computed(function(){var e=t.visitType(),n=!!e&&"other"===e.name().toLowerCase();return n||t.otherType(null),n}),t.showOtherLocation=ko.computed(function(){var e=t.utilizationLocation(),n=!!e&&"other"===e.name().toLowerCase();return n||t.otherLocation(null),n}),t.showOtherDisposition=ko.computed(function(){var e=t.disposition(),n=!!e&&"other"===e.name().toLowerCase();return n||t.otherDisposition(null),n}),t.getUtilizationLength=function(){var e=t.admitted(),n=t.admitDate(),a=t.dischargeDate(),r=t.admitDateErrors(),i=t.dischargeDateErrors(),s=null;return moment(n).isValid()&&0===r.length&&(!a&&e?s=moment().diff(n,"days"):a&&0===i.length&&(s=moment(a).diff(n,"days"))),s},t.utilizationLengthStr=ko.computed(function(){var e=t.getUtilizationLength(),n="";return 1===e?n=String(e)+" day":(0===e||e>1)&&(n=String(e)+" days"),n}),t.utilizationLengthDesc=ko.computed(function(){var e="";return e=t.admitDate()&&t.admitted()&&!t.dischargeDate()?"Current Stay":"Total Stay"}),t.validationErrorsArray=ko.computed(function(){var e=[];return ko.utils.arrayForEach(t.validationErrors(),function(t){e.push(t.PropName)}),e}),t.setInvalidAdmitDate=ko.computed(function(){var e=t.validationErrorsArray();return e&&-1!==e.indexOf("admitDate")}),t.setInvalidDischargeDate=ko.computed(function(){var e=t.validationErrorsArray();return e&&-1!==e.indexOf("dischargeDate")})}function l(t){t.isNew=ko.observable(!1),t.programString=ko.computed(function(){i();var e="",n=t.programIds();if(t.patientId()&&t.patient()&&t.patient().programs()){var a=t.patient().programs();ko.utils.arrayForEach(n,function(t){var n=ko.utils.arrayFirst(a,function(e){return e.id()===t.id()});n&&(e+=n.name()+", ")}),e.length>0&&(e=e.substr(0,e.length-2))}return 0===e.length&&(e="None"),e}),t.patientName=ko.computed(function(){var e=t.patientId(),n=t.patient();return e&&n?n.fullName():null}),t.isDirty=ko.observable(!1),t.clearDirty=function(){t.isDirty(!1)},t.watchDirty=function(){var e=t.entityAspect.propertyChanged.subscribe(function(n){t.isDirty(!0),e.dispose()}),n=t.programIds.subscribe(function(e){t.isDirty(!0),n.dispose()})},t.dueDateErrors=ko.observableArray([]),t.startTimeErrors=ko.observableArray([]),t.validationErrors=ko.observableArray([]),t.validationErrorsArray=ko.computed(function(){var e=[];return ko.utils.arrayForEach(t.validationErrors(),function(t){e.push(t.PropName)}),e}),t.showInvalidStartTime=ko.computed(function(){var e=!1,n=t.validationErrorsArray();return e=-1!==n.indexOf("startTime")}),t.showInvalidDueDate=ko.computed(function(){var e=!1,n=t.validationErrorsArray();return e=-1!==n.indexOf("dueDate")}),t.isValid=ko.computed(function(){var e=!1,n=[],a=t.startTime(),r=t.duration(),i=t.dueDate(),s=t.dueDateErrors(),o=t.isDirty(),d=t.title();return r&&r>1440&&setTimeout(function(){t.duration(1440)},100),null!==r&&1>r&&setTimeout(function(){t.duration(null)},100),s.length>0&&ko.utils.arrayForEach(s,function(t){n.push({PropName:"dueDate",Message:"Due Date "+t.Message}),e=!0}),!a&&!r||i||(e=!0,n.push({PropName:"dueDate",Message:"Due Date is required if Start Time / Duration are provided"})),r&&!a&&(e=!0,n.push({PropName:"startTime",Message:"Start Time is required if Duration is provided"})),a&&!r&&(e=!0,n.push({PropName:"duration",Message:"Duration is required if Start Time is provided"})),d||(e=!0,o&&n.push({PropName:"title",Message:"Title is required"})),t.validationErrors(n),!e}),t.getAsNewEvent=function(){var e={id:t.id(),title:t.getEventTitle(),patientId:t.patientId(),patientName:t.getEventPatientName(),assignedToName:o(),userId:t.assignedToId(),typeId:2,isNew:!0};return t.startTime()&&t.duration()&&t.dueDate()?e=r(e,t.startTime(),t.duration(),t.dueDate()):(e.start=t.dueDate(),
e.allDay=!0),e},t.updateExistingEvent=function(e){return e.title(t.getEventTitle()),e.patientId(t.patientId()),e.patientName(t.getEventPatientName()),e.assignedToName(o()),e.userId(t.assignedToId()),e.entityAspect.acceptChanges(),t.startTime()&&t.duration()&&t.dueDate()?e=r(e,t.startTime(),t.duration(),t.dueDate()):(e.start(t.dueDate()),e.allDay(!0)),e},t.getEventTitle=function(){return(t.patientDetails()?t.patientDetails().fullLastName()+", "+t.patientDetails().fullFirstName()+" - ":"")+t.title()},t.getEventPatientName=function(){return t.patientDetails()?t.patientDetails().fullLastName()+", "+t.patientDetails().fullFirstName():"-"},t.isEvent=function(){return t&&t.assignedToId()&&t.assignedToId()===e.currentUser().userId()&&!t.deleteFlag()&&moment(t.dueDate()).isValid()&&(1===t.statusId()||3===t.statusId())}}t.addEntityType({shortName:"Note",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},patientId:{dataType:"String"},text:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},createdById:{dataType:"String"},updatedById:{dataType:"String"},typeId:{dataType:"String"},methodId:{dataType:"String"},outcomeId:{dataType:"String"},whoId:{dataType:"String"},sourceId:{dataType:"String"},duration:{dataType:"Int64"},contactedOn:{dataType:"DateTime"},validatedIdentity:{dataType:"Boolean"},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1},admitDate:{dataType:"DateTime"},dischargeDate:{dataType:"DateTime"},dataSource:{dataType:"String"},admitted:{dataType:"Boolean"},visitTypeId:{dataType:"String"},otherType:{dataType:"String"},utilizationSourceId:{dataType:"String"},dispositionId:{dataType:"String"},otherDisposition:{dataType:"String"},locationId:{dataType:"String"},otherLocation:{dataType:"String"}},navigationProperties:{patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Notes",foreignKeyNames:["patientId"]},type:{entityTypeName:"NoteType",isScalar:!0,associationName:"Note_Type",foreignKeyNames:["typeId"]},method:{entityTypeName:"NoteMethod",isScalar:!0,associationName:"Note_Method",foreignKeyNames:["methodId"]},outcome:{entityTypeName:"NoteOutcome",isScalar:!0,associationName:"Note_Outcome",foreignKeyNames:["outcomeId"]},who:{entityTypeName:"NoteWho",isScalar:!0,associationName:"Note_Who",foreignKeyNames:["whoId"]},source:{entityTypeName:"NoteSource",isScalar:!0,associationName:"Note_Source",foreignKeyNames:["sourceId"]},visitType:{entityTypeName:"VisitType",isScalar:!0,associationName:"Note_VisitType",foreignKeyNames:["visitTypeId"]},utilizationSource:{entityTypeName:"UtilizationSource",isScalar:!0,associationName:"Note_UtilizationSource",foreignKeyNames:["utilizationSourceId"]},disposition:{entityTypeName:"Disposition",isScalar:!0,associationName:"Note_Disposition",foreignKeyNames:["dispositionId"]},utilizationLocation:{entityTypeName:"UtilizationLocation",isScalar:!0,associationName:"Note_UtilizationLocation",foreignKeyNames:["locationId"]}}}),t.addEntityType({shortName:"ToDo",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},createdById:{dataType:"String"},assignedToId:{dataType:"String"},statusId:{dataType:"Int64"},categoryId:{dataType:"String"},priorityId:{dataType:"Int64"},dueDate:{dataType:"DateTime"},startTime:{dataType:"DateTime"},duration:{dataType:"Int64"},title:{dataType:"String"},description:{dataType:"String"},createdOn:{dataType:"DateTime"},updatedOn:{dataType:"DateTime"},closedDate:{dataType:"DateTime"},patientId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},programIds:{complexTypeName:"Identifier:#Nightingale",isScalar:!1}},navigationProperties:{createdBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Todo_CreatedBy",foreignKeyNames:["createdById"]},assignedTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Todo_AssignedTo",foreignKeyNames:["assignedToId"]},category:{entityTypeName:"ToDoCategory",isScalar:!0,associationName:"Todo_TodoCategory",foreignKeyNames:["categoryId"]},priority:{entityTypeName:"Priority",isScalar:!0,associationName:"Todo_Priority",foreignKeyNames:["priorityId"]},status:{entityTypeName:"GoalTaskStatus",isScalar:!0,associationName:"Todo_Status",foreignKeyNames:["statusId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Todos",foreignKeyNames:["patientId"]},patientDetails:{entityTypeName:"ToDoPatient",isScalar:!0,associationName:"ToDoPatient_Todos",foreignKeyNames:["patientId"]}}}),t.addEntityType({shortName:"ToDoPatient",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},middleName:{dataType:"String"},suffix:{dataType:"String"},preferredName:{dataType:"String"}}}),t.registerEntityTypeCtor("Note",null,a),t.registerEntityTypeCtor("ToDo",null,l),t.registerEntityTypeCtor("ToDoPatient",null,n)}function r(e,t,a,r){if(t&&a&&r){var i=r,s=null,o=moment(i),d=moment(t),l=n.setTimeValue(d.hour(),d.minute(),o);i=l.toDate(),s=l.clone().add(a,"minutes").toDate(),e.isNew?(e.start=i,e.end=s,e.allDay=!1):(e.start(i),e.end(s),e.allDay(!1))}return e}function i(){d||(d=t("services/datacontext"))}function s(){return l||(i(),l=d.getSystemCareManager()),l}function o(){return c||(i(),c=d.getUsercareManagerName()),c}var d,l,c,p=(breeze.DataType,{initialize:a});return p}),n("models/observations",["services/session","services/validatorfactory","services/customvalidators","services/dateHelper"],function(e,t,n,a){function r(e){function t(e){e.isNew=ko.observable(!1),e.computedValue=ko.computed({read:function(){var t=e.values(),n=null;return 1===t.length?n=t[0]:t.length>1&&(n=t),n},write:function(t){2===e.controlType||e.values()[0].value(t)}}),e.computedValueString=ko.computed(function(){var t=e.computedValue();if(t)if(Array.isArray(t)){var n=ko.utils.arrayFirst(t,function(e){return-1!==e.text().indexOf("Diast")}),a=ko.utils.arrayFirst(t,function(e){return-1!==e.text().indexOf("Sys")});t=n&&a?a.value()+"/"+n.value()+" "+e.units():""}else t=t.value()+" "+e.units();else t="-";return t}),e.validationErrors=ko.observableArray([]),e.startDateErrors=ko.observableArray([]),e.needToSave=function(){var t=!1;return(e.isNew()||e.entityAspect.entityState.isModified())&&(t="Problems"===e.type().name()?e.isValid():e.isValid()&&e.hasActualValues()),t},e.hasActualValues=ko.observable(),e.isValid=ko.computed(function(){function t(){e.hasActualValues(!1);var t=[];return ko.utils.arrayForEach(a,function(n){var a="value";if(n.text&&n.text()&&-1!==n.text().indexOf("Systolic")?a="systolic":n.text&&n.text()&&-1!==n.text().indexOf("Diastolic")&&(a="diastolic"),isNaN(n.value())){var i=n.name?n.name():n.text?n.text():"observation ",o=i+" has invalid value";t.push({PropName:a,Message:o}),s=!0}if(r&&!n.value()){var i=n.name?n.name():n.text?n.text():"observation ",o=i+" must have a value";t.push({PropName:a,Message:o}),s=!0}else n.value()&&e.hasActualValues(!0)}),!r&&e.hasActualValues()&&(t.push({PropName:"startDate",Message:e.name()+" must have a Date"}),s=!0),i.length>0&&ko.utils.arrayForEach(i,function(n){t.push({PropName:"startDate",Message:e.name()+" Date "+n.Message}),s=!0}),e.validationErrors(t),s}function n(){var t=[];return i.length>0&&ko.utils.arrayForEach(i,function(n){t.push({PropName:"startDate",Message:e.name()+" Date "+n.Message}),s=!0}),e.validationErrors(t),s}var a=e.values(),r=e.startDate(),i=e.startDateErrors(),s=e.entityAspect.hasValidationErrors,o=e.type()?e.type().name():null;switch(o){case"Assessments":s=t();break;case"Labs":s=t();break;case"Problems":s=n();break;case"Risks":s=t();break;case"Vitals":s=t()}return!s}),e.canSave=ko.computed(e.isValid),e.validationErrorsArray=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.validationErrors(),function(e){t.push(e.PropName)}),t}),e.setInvalidStartDate=ko.computed(function(){var t=e.validationErrorsArray();return t&&-1!==t.indexOf("startDate")})}function n(e){e.value=ko.computed(e.name)}function a(e){e.previousValueString=ko.computed(function(){var t="";if(e.previousValue()){var n=e.previousValue().value(),a=moment(e.previousValue().startDate()).format("MM/DD/YYYY"),r=e.previousValue().unit(),i=e.previousValue().source();t=n?n+" "+r:"",t=moment(a).isValid()?t?t+" on "+a:a:t,t=i?t+" ("+i+")":t}return t})}e.addEntityType({shortName:"PatientObservation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},observationId:{dataType:"String"},name:{dataType:"String"},standard:{dataType:"Boolean"},typeId:{dataType:"String"},stateId:{dataType:"String"},displayId:{dataType:"String"},patientId:{dataType:"String"},units:{dataType:"String"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},groupId:{dataType:"String"},deleteFlag:{dataType:"Boolean"},source:{dataType:"String"},values:{complexTypeName:"ObservationValue:#Nightingale",isScalar:!1}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]},observation:{entityTypeName:"Observation",isScalar:!0,associationName:"PatientObservation_Observation",foreignKeyNames:["observationId"]},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Observations",foreignKeyNames:["patientId"]},state:{entityTypeName:"ObservationState",isScalar:!0,associationName:"Observation_State",foreignKeyNames:["stateId"]},display:{entityTypeName:"ObservationDisplay",isScalar:!0,associationName:"Observation_Display",foreignKeyNames:["displayId"]}}}),e.addEntityType({shortName:"ObservationValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},text:{dataType:"String"},value:{dataType:"String"},previousValue:{complexTypeName:"ObservationPreviousValue:#Nightingale",isScalar:!0}}}),e.addEntityType({shortName:"ObservationPreviousValue",namespace:"Nightingale",isComplexType:!0,dataProperties:{value:{dataType:"String"},startDate:{dataType:"DateTime"},unit:{dataType:"String"},source:{dataType:"String"}}}),e.addEntityType({shortName:"Observation",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},typeId:{dataType:"String"},standard:{dataType:"Boolean"}},navigationProperties:{type:{entityTypeName:"ObservationType",isScalar:!0,associationName:"Observation_Type",foreignKeyNames:["typeId"]}}}),e.addEntityType({shortName:"ObservationDisplay",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.addEntityType({shortName:"ObservationState",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},allowedTypeIds:{complexTypeName:"IdName:#Nightingale",isScalar:!1}}}),e.registerEntityTypeCtor("Observation",null,n),e.registerEntityTypeCtor("PatientObservation",null,t),e.registerEntityTypeCtor("ObservationValue",null,a)}var i=(breeze.DataType,{initialize:r});return i}),n("services/entityserializer",[],function(){function e(e,t){var n=(new Date).getTime(),a={};a.Steps=[],a.SpawnElement=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Action").select("id, archived, archiveOriginId, name, moduleId, sourceId, order, completed, enabled, status, deleteFlag, elementState, dateCompleted, next, previous, assignDate, assignById, assignToId, attrStartDate, attrEndDate, completedBy, stateUpdatedOn, description"),i=t.executeQueryLocally(r),s=i[0];s.steps=[],s.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};s.spawnElement.push(t)}),ko.utils.arrayForEach(e.steps.peek(),function(e){var n=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Step").select("id, header, description, title, text, question, notes, actionId, sourceId, stepTypeId, selectedResponseId, order, completed, enabled, status"),a=t.executeQueryLocally(n),r=a[0];r.responses=[],r.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};r.spawnElement.push(t)}),ko.utils.arrayForEach(e.responses.peek(),function(e){var n=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Response").select("id, text, required, value, stepId, nominal, nextStepId, order"),a=t.executeQueryLocally(n),i=a[0];i.spawnElement=[],ko.utils.arrayForEach(e.spawnElement.peek(),function(e){var t={elementId:e.elementId.peek(),elementType:e.elementType.peek(),tag:e.tag.peek()};i.spawnElement.push(t)}),r.responses.push(i)}),s.steps.push(r)}),a.Id=s.id,a.Name=s.name,a.ModuleId=s.moduleId,a.SourceId=s.sourceId,a.Order=s.order,a.Completed=s.completed,a.CompletedBy=s.completedBy,a.Enabled=s.enabled,a.Status=s.status,a.DeleteFlag=s.deleteFlag,a.ElementState=s.elementState,a.StateUpdatedOn=s.stateUpdatedOn,a.DateCompleted=s.dateCompleted,a.Next=s.next,a.Previous=s.previous,a.AssignDate=s.assignDate,a.AssignById=s.assignById,a.AssignToId=s.assignToId,a.Archived=s.archived,a.ArchiveOriginId=s.archiveOriginId,a.Description=s.description,a.AttrStartDate=s.attrStartDate,a.AttrEndDate=s.attrEndDate,a.DateCompleted=s.dateCompleted,ko.utils.arrayForEach(s.spawnElement,function(e){a.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),ko.utils.arrayForEach(s.steps,function(e){var t={};t.Responses=[],t.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){t.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),t.Id=e.id,t.Header=e.header,t.Description=e.description,t.Title=e.title,t.Text=e.text,t.Question=e.question,t.Notes=e.notes,t.ActionId=e.actionId,t.SourceId=e.sourceId,t.StepTypeId=e.stepTypeId,t.SelectedResponseId=e.selectedResponseId,t.Order=e.order,t.Completed=e.completed,t.Enabled=e.enabled,t.Status=e.status,ko.utils.arrayForEach(e.responses,function(e){var n={};n.SpawnElement=[],ko.utils.arrayForEach(e.spawnElement,function(e){n.SpawnElement.push({ElementId:e.elementId,ElementType:e.elementType,Tag:e.tag})}),n.Id=e.id,n.Text=e.text,n.Required=e.required,n.Value=e.value,n.StepId=e.stepId,n.Nominal=e.nominal,n.NextStepId=e.nextStepId,n.Order=e.order,t.Responses.push(n)});(new Date).getTime()-n;a.Steps.push(t)});(new Date).getTime()-n;return a}function t(e,t){var n=(new Date).getTime(),a="ContactCard";e.entityAspect.entity.entityType.name.startsWith("ContactSearch")&&(a="ContactSearch");var r={};r.Modes=[],r.Addresses=[],r.Phones=[],r.Emails=[],r.Languages=[],r.TimesOfDaysId=[],r.WeekDays=[],r.ContactSubTypes=[];var i=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType(a).select("id, patientId, timeZoneId, isPatient, userId, isUser, firstName, middleName, lastName, preferredName, gender, contactTypeId, externalRecordId, dataSource, statusId, deceasedId, prefix, suffix, createdOn, updatedOn, createdById, updatedById"),s=t.executeQueryLocally(i),o=s[0];o.steps=[],ko.utils.arrayForEach(e.preferredTimesOfDayIds.peek(),function(e){r.TimesOfDaysId.push(e.id.peek())}),ko.utils.arrayForEach(e.preferredDaysOfWeekIds.peek(),function(e){thisDowId=parseInt(e.id.peek()),r.WeekDays.push(thisDowId)}),r.PatientId=o.patientId,r.Id=o.id,r.TimeZoneId=o.timeZoneId,r.IsPatient=o.isPatient,r.UserId=o.userId,r.IsUser=o.isUser,r.FirstName=o.firstName,r.MiddleName=o.middleName,r.LastName=o.lastName,r.PreferredName=o.preferredName,r.Gender=o.gender,r.ContactTypeId=o.contactTypeId,r.ExternalRecordId=o.externalRecordId,r.DataSource=o.dataSource,r.StatusId=o.statusId,r.DeceasedId=o.deceasedId,r.Prefix=o.prefix,r.Suffix=o.suffix,r.CreatedOn=o.createdOn,r.UpdatedOn=o.updatedOn,r.CreatedById=o.createdById,r.UpdatedById=o.updatedById,ko.utils.arrayForEach(e.modes.peek(),function(e){var t={};t.LookUpModeId=e.lookUpModeId.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),r.Modes.push(t)}),ko.utils.arrayForEach(e.addresses.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.City=e.city.peek(),t.StateId=e.stateId.peek(),t.PostalCode=e.postalCode.peek(),t.Line1=e.line1.peek(),t.Line2=e.line2.peek(),t.Line3=e.line3.peek(),r.Addresses.push(t)}),ko.utils.arrayForEach(e.emails.peek(),function(e){var t={};t.Id=e.id.peek(),t.OptOut=e.optOut.peek(),t.Preferred=e.preferred.peek(),t.TypeId=e.typeId.peek(),t.Text=e.text.peek(),r.Emails.push(t)}),ko.utils.arrayForEach(e.phones.peek(),function(e){var t={};t.Id=e.id.peek(),t.IsText=e.isText.peek(),t.Number=e.number.peek().replace(/-/g,""),t.OptOut=e.optOut.peek(),t.PhonePreferred=e.phonePreferred.peek(),t.TextPreferred=e.textPreferred.peek(),t.TypeId=e.typeId.peek(),t.DataSource=e.dataSource.peek(),r.Phones.push(t)}),ko.utils.arrayForEach(e.languages.peek(),function(e){var t={};t.LookUpLanguageId=e.lookUpLanguageId.peek(),t.Preferred=e.preferred.peek(),r.Languages.push(t)}),ko.utils.arrayForEach(e.contactSubTypes.peek(),function(e){var t={};t.Id=e.id()?e.id():null,t.SubTypeId=e.subTypeId(),t.SpecialtyId=e.specialtyId()?e.specialtyId():null,t.SubSpecialtyIds=[],ko.utils.arrayForEach(e.subSpecialtyIds.peek(),function(e){t.SubSpecialtyIds.push(e.id.peek())}),r.ContactSubTypes.push(t)});(new Date).getTime()-n;return r}function n(e,t){var n=(new Date).getTime(),a={};a.FocusAreaIds=[],a.ProgramIds=[],a.CustomAttributes=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Goal").select("id, name, patientId, sourceId, typeId, statusId, startDate, endDate, targetValue, targetDate, details"),i=t.executeQueryLocally(r),s=i[0];ko.utils.arrayForEach(e.focusAreaIds.peek(),function(e){a.FocusAreaIds.push(e.id.peek())}),ko.utils.arrayForEach(e.programIds.peek(),function(e){a.ProgramIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),a.CustomAttributes.push(t)}),a.Id=s.id,a.Name=s.name,a.PatientId=s.patientId,a.SourceId=s.sourceId,a.TypeId=s.typeId,a.StatusId=s.statusId,a.StartDate=s.startDate,a.EndDate=s.endDate,a.TargetValue=s.targetValue,a.TargetDate=s.targetDate,a.Details=s.details;(new Date).getTime()-n;return a}function a(e,t){var n=(new Date).getTime(),a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Intervention").select("id, categoryId, assignedToId, description, statusId, startDate, dueDate, patientGoalId, patientId, closedDate, deleteFlag, details"),r=t.executeQueryLocally(a),i=r[0],s={};s.BarrierIds=[],s.CustomAttributes=[],s.Id=i.id,s.CategoryId=i.categoryId,s.AssignedToId=i.assignedToId,s.Description=i.description,s.StatusId=i.statusId,s.StartDate=i.startDate,s.DueDate=i.dueDate,s.ClosedDate=i.closedDate,s.PatientGoalId=i.patientGoalId,s.DeleteFlag=i.deleteFlag,s.Details=i.details,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){s.BarrierIds.push(e.id.peek())});(new Date).getTime()-n;return s}function r(e,t){var n=(new Date).getTime(),a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Task").select("id, description, statusId, targetValue, startDate, targetDate, patientGoalId, patientId, closedDate, statusDate, deleteFlag, details"),r=t.executeQueryLocally(a),i=r[0],s={};s.BarrierIds=[],s.CustomAttributes=[],s.Id=i.id,s.Description=i.description,s.StatusId=i.statusId,s.TargetValue=i.targetValue,s.StartDate=i.startDate,s.TargetDate=i.targetDate,s.ClosedDate=i.closedDate,s.StatusDate=i.statusDate,s.PatientGoalId=i.patientGoalId,s.DeleteFlag=i.deleteFlag,s.Details=i.details,ko.utils.arrayForEach(e.barrierIds.peek(),function(e){s.BarrierIds.push(e.id.peek())}),ko.utils.arrayForEach(e.customAttributes.peek(),function(e){var t={Id:e.id.peek(),Name:e.name.peek(),ControlType:e.controlType.peek(),Order:e.order.peek()};t.Options=[],t.Values=[],ko.utils.arrayForEach(e.options.peek(),function(e){t.Options.push({Value:e.value.peek(),Display:e.display.peek()})}),ko.utils.arrayForEach(e.values.peek(),function(e){t.Values.push(e.value.peek())}),s.CustomAttributes.push(t)});(new Date).getTime()-n;return s}function i(e,t){var n=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Barrier").select("id, name, patientGoalId, statusId, categoryId, deleteFlag, details"),a=t.executeQueryLocally(n),r=a[0],i={};return i.Id=r.id,i.Name=r.name,i.PatientGoalId=r.patientGoalId,i.StatusId=r.statusId,i.CategoryId=r.categoryId,i.DeleteFlag=r.deleteFlag,i.Details=r.details,i}function s(e,t){var n=(new Date).getTime(),a={};a.Values=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientObservation").select("id, name, startDate, endDate, units, patientId, typeId, displayId, stateId, deleteFlag, standard, observationId, groupId, source"),i=t.executeQueryLocally(r),s=i[0];a.Id=s.id,a.Name=s.name;var o=moment(s.startDate);a.StartDate=o.isValid()?o.toISOString():null;var d=moment(s.endDate);a.EndDate=d.isValid()?d.toISOString():null,a.GroupId=s.groupId,a.Standard=s.standard,a.ObservationId=s.observationId,a.Source=s.source,a.Units=s.units,a.PatientId=s.patientId,a.TypeId=s.typeId,a.DisplayId=s.displayId,a.StateId=s.stateId,a.DeleteFlag=s.deleteFlag,ko.utils.arrayForEach(e.values.peek(),function(e){a.Values.push({Id:e.id.peek(),Text:e.text.peek(),Value:e.value.peek()})});(new Date).getTime()-n;return a}function o(e,t){var n=(new Date).getTime(),a={};a.ProgramIds=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Note").select("id, text, patientId, createdOn, createdById, typeId, methodId, outcomeId, whoId, sourceId, duration, contactedOn, validatedIdentity, admitDate, dischargeDate, dataSource, admitted, visitTypeId, otherType, utilizationSourceId, dispositionId, otherDisposition, locationId, otherLocation, updatedById, updatedOn"),i=t.executeQueryLocally(r),s=i[0];ko.utils.arrayForEach(e.programIds.peek(),function(e){a.ProgramIds.push(e.id.peek())}),a.Id=s.id,a.Text=s.text,a.PatientId=s.patientId,a.CreatedOn=s.createdOn,a.CreatedById=s.createdById,a.updatedOn=s.updatedOn,a.updatedById=s.updatedById,a.TypeId=s.typeId,a.MethodId=s.methodId,a.OutcomeId=s.outcomeId,a.WhoId=s.whoId,a.SourceId=s.sourceId,a.Duration=s.duration,a.ContactedOn=s.contactedOn,a.ValidatedIdentity=s.validatedIdentity,a.admitDate=s.admitDate,a.dischargeDate=s.dischargeDate,a.dataSource=s.dataSource,a.admitted=s.admitted,a.visitTypeId=s.visitTypeId,a.otherType=s.otherType,a.utilizationSourceId=s.utilizationSourceId,a.dispositionId=s.dispositionId,a.otherDisposition=s.otherDisposition,a.locationId=s.locationId,a.otherLocation=s.otherLocation;(new Date).getTime()-n;return a}function d(e,t){var n=(new Date).getTime(),a={};a.ProgramIds=[];var r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("ToDo").select("id, title, description, patientId, createdById, assignedToId, statusId, categoryId, priorityId, dueDate, startTime, duration, createdOn, updatedOn, deleteFlag, closedDate"),i=t.executeQueryLocally(r),s=i[0];ko.utils.arrayForEach(e.programIds.peek(),function(e){a.ProgramIds.push(e.id.peek())}),a.Id=s.id,a.Title=s.title,a.Description=s.description,a.PatientId=s.patientId,a.CreatedById=s.createdById,a.AssignedToId=s.assignedToId,a.StatusId=s.statusId,a.CategoryId=s.categoryId,a.PriorityId=s.priorityId,a.DueDate=s.dueDate,a.StartTime=s.startTime,a.Duration=s.duration,a.UpdatedOn=s.updatedOn,a.CreatedOn=s.createdOn,a.ClosedDate=s.closedDate,a.DeleteFlag=s.deleteFlag;(new Date).getTime()-n;return a}function l(e,t){var n={},a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("CareTeam").select("id, contactId"),r=t.executeQueryLocally(a),i=r[0];return n.Id=i.id<1?null:i.id,n.ContactId=i.contactId,n.members=[],ko.utils.arrayForEach(e.members(),function(e){var a=c(e,t);n.members.push(a)}),n}function c(e,t){var n={},a=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("CareMember").select("id, contactId, careTeamId, roleId, customRoleName, startDate, endDate, core, notes, frequencyId, distance,distanceUnit, externalRecordId, dataSource, statusId, updatedOn, createdOn, updatedById, createdById"),r=t.executeQueryLocally(a),i=r[0];return n.Id=i.id<1?null:i.id,n.ContactId=i.contactId,-1==i.roleId?(n.RoleId=null,n.CustomRoleName=i.customRoleName):(n.RoleId=i.roleId,n.CustomRoleName=null),n.StartDate=i.startDate,n.EndDate=i.endDate,n.Core=i.core,n.Notes=i.notes,n.FrequencyId=i.frequencyId,n.Distance=i.distance,n.DistanceUnit=i.distanceUnit,n.ExternalRecordId=i.externalRecordId,n.DataSource=i.dataSource,n.StatusId=i.statusId,n.UpdatedOn=i.updatedOn,n.CreatedOn=i.createdOn,n.UpdatedById=i.updatedById,n.CreatedById=i.createdById,n.CareTeamId=i.careTeamId?i.careTeamId:null,n}function p(e,t){var n=(new Date).getTime(),a={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("CareMember").select("id, patientId, contactId, typeId, primary, preferredName"),i=t.executeQueryLocally(r),s=i[0];a.Id=s.id,a.PatientId=s.patientId,a.ContactId=s.contactId,a.TypeId=s.typeId,a.Primary=s.primary,a.PreferredName=s.preferredName;(new Date).getTime()-n;return a}function u(e,t){var n=(new Date).getTime(),a={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("Patient").select("id, priority, gender, firstName, lastName, preferredName, suffix, dOB, middleName, background, clinicalBackground, fullSSN, dataSource, statusId, reasonId, statusDataSource, deceasedId, maritalStatusId, protected"),i=t.executeQueryLocally(r),s=i[0];a.Id=s.id,a.Priority=s.priority,a.Gender=s.gender,a.FirstName=s.firstName,a.LastName=s.lastName,a.PreferredName=s.preferredName,a.Suffix=s.suffix,a.DOB=s.dOB,a.MiddleName=s.middleName,a.Background=s.background,a.ClinicalBackground=s.clinicalBackground,a.DataSource=s.dataSource,a.StatusId=s.statusId,a.ReasonId=s.reasonId,a.StatusDataSource=s.statusDataSource,a.DeceasedId=s.deceasedId,a.MaritalStatusId=s.maritalStatusId,a.Protected=s["protected"],s.fullSSN&&(a.FullSSN=s.fullSSN),e.isDuplicate()&&e.forcedSave&&(a.InsertDuplicate=!0);(new Date).getTime()-n;return a}function v(e,t){var n=(new Date).getTime(),a={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientSystem").select("id, patientId, systemId, value, dataSource, statusId, primary, createdById, createdOn, updatedById, updatedOn"),i=t.executeQueryLocally(r),s=i[0];s.id&&!isNaN(s.id)&&s.id<0?a.Id=null:a.Id=s.id,a.PatientId=s.patientId,a.SystemId=s.systemId,a.value=s.value.trim(),a.DataSource=s.dataSource,a.statusId=s.statusId,a.primary=s.primary,a.createdById=s.createdById,a.createdOn=s.createdOn,a.updatedById=s.updatedById,a.updatedOn=s.updatedOn;(new Date).getTime()-n;return a}function m(e,t){var n=(new Date).getTime(),a={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientAllergy").select("id, allergyName, startDate, endDate, patientId, statusId, deleteFlag, severityId, allergyId, sourceId, notes, systemName, code, codingSystemId, dataSource, externalRecordId"),i=t.executeQueryLocally(r),s=i[0];a.Id=s.id,a.AllergyName=s.allergyName;var o=moment(s.startDate);a.StartDate=o.isValid()?o.toISOString():null;var d=moment(s.endDate);a.EndDate=d.isValid()?d.toISOString():null,a.PatientId=s.patientId,a.AllergyId=s.allergyId,a.StatusId=s.statusId,a.SourceId=s.sourceId,a.DeleteFlag=s.deleteFlag,a.SeverityId=s.severityId,a.Notes=s.notes,a.SystemName=s.systemName,a.Code=s.code,a.CodingSystemId=s.codingSystemId,a.DataSource=s.dataSource,a.ExternalRecordId=s.externalRecordId,e.isUserCreated()&&(a.IsNewAllergy=!0),a.AllergyTypeIds=[],ko.utils.arrayForEach(e.allergyTypeIds.peek(),function(e){a.AllergyTypeIds.push(e.id.peek())}),a.ReactionIds=[],ko.utils.arrayForEach(e.reactionIds.peek(),function(e){a.ReactionIds.push(e.id.peek())});(new Date).getTime()-n;return a}function g(e,t){var n=(new Date).getTime(),a={},r=breeze.EntityQuery.from("fakePath").where("id","==",e.id()).toType("PatientMedication").select("id, name, startDate, endDate, patientId, statusId, deleteFlag, sourceId, notes, systemName, dosage, strength, route, form, freqQuantity, freqHowOftenId, frequencyId, freqWhenId, customFrequency, categoryId, prescribedBy, typeId, sigCode, reason, familyId, isCreateNewMedication, dataSource, duration, durationUnitId, otherDuration, reviewId, refusalReasonId, otherRefusalReason, orderedBy, orderedDate, prescribedDate, rxNumber, rxDate, pharmacy, originalDataSource, externalRecordId"),i=t.executeQueryLocally(r),s=i[0];a.Id=s.id,a.Name=s.name;var o=moment(s.startDate);a.StartDate=o.isValid()?o.toISOString():null;var d=moment(s.endDate);a.EndDate=d.isValid()?d.toISOString():null,a.PatientId=s.patientId,a.StatusId=s.statusId,a.SourceId=s.sourceId,a.DeleteFlag=s.deleteFlag,a.Notes=s.notes,a.SystemName=s.systemName,a.Dosage=s.dosage,a.Strength=s.strength,a.Route=s.route,a.Form=s.form,a.FreqQuantity=s.freqQuantity,a.FreqHowOftenId=s.freqHowOftenId,a.FrequencyId=s.frequencyId,a.FreqWhenId=s.freqWhenId,a.CategoryId=s.categoryId,a.PrescribedBy=s.prescribedBy,a.TypeId=s.typeId,a.SigCode=s.sigCode,a.Reason=s.reason,a.FamilyId=s.familyId,a.RecalculateNDC=e.recalculateNDC(),a.OriginalDataSource=s.originalDataSource,a.Duration=parseInt(s.duration),a.DurationUnitId=s.durationUnitId,a.OtherDuration=s.otherDuration,a.ReviewId=s.reviewId,a.RefusalReasonId=s.refusalReasonId,a.OtherRefusalReason=s.otherRefusalReason,a.OrderedBy=s.orderedBy,a.OrderedDate=s.orderedDate,a.PrescribedDate=s.prescribedDate,a.RxNumber=s.rxNumber,a.RxDate=s.rxDate,a.Pharmacy=s.pharmacy,a.DataSource=s.dataSource,a.ExternalRecordId=s.externalRecordId,a.NDCs=[],ko.utils.arrayForEach(e.nDCs.peek(),function(e){a.NDCs.push(e.id.peek())}),a.PharmClasses=[],ko.utils.arrayForEach(e.pharmClasses.peek(),function(e){a.PharmClasses.push(e.id.peek())});(new Date).getTime()-n;return a}var h={serializeAction:e,serializeContactCard:t,serializeGoal:n,serializeIntervention:a,serializeTask:r,serializeBarrier:i,serializeObservation:s,serializeNote:o,serializeToDo:d,serializeCareMember:p,serializeCareTeam:l,serializeCareTeamMember:c,serializeIndividual:u,serializePatientSystem:v,serializePatientAllergy:m,serializePatientMedication:g};return h}),n("services/local.collections",["models/base"],function(e){function n(){r(),i.getEntityList(o,"ToDo","fakeTodoEndPoint",null,null,!1)}function a(){r(),i.getEntityList(l,"Intervention","fakeInterventionEndPoint",null,null,!1)}function r(){i||(i=t("services/datacontext"))}var i,s={};s.priorities=ko.observableArray(),s.genders=ko.observableArray([new e.Gender("m","M","Male"),new e.Gender("f","F","Female"),new e.Gender("n","N","Neutral")]),s.patientStatuses=ko.observableArray(),s.patientStatusReasons=ko.observableArray(),s.patientSystemStatus=ko.observableArray(),s.systemStatus=ko.observableArray(),s.systems=ko.observableArray(),s.daysOfWeek=ko.observableArray([new e.Day("0","M","Monday"),new e.Day("1","Tu","Tuesday"),new e.Day("2","W","Wednesday"),new e.Day("3","Th","Thursday"),new e.Day("4","F","Friday"),new e.Day("5","Sat","Saturday"),new e.Day("6","Sun","Sunday")]),s.userAssociatedTypes=ko.observableArray([new e.SomeType("0","Assigned to me"),new e.SomeType("1","Unassigned")]),s.maritalStatuses=ko.observableArray(),s.deceasedStatuses=ko.observableArray(),s.contactStatuses=ko.observableArray([new e.SomeType("1","Active"),new e.SomeType("2","Inactive"),new e.SomeType("3","Archived")]),s.careMemberStatuses=ko.observableArray(),s.contactLookUpGroupType=ko.observableArray([new e.SomeType("0","Unknown"),new e.SomeType("1","ContactType"),new e.SomeType("2","CareTeam")]),s.phoneTypes=ko.observableArray(),s.emailTypes=ko.observableArray(),s.addressTypes=ko.observableArray(),s.textTypes=ko.observableArray(),s.languages=ko.observableArray(),s.states=ko.observableArray(),s.timeZones=ko.observableArray(),s.timesOfDay=ko.observableArray(),s.communicationModes=ko.observableArray(),s.communicationTypes=ko.observableArray(),
s.focusAreas=ko.observableArray(),s.sources=ko.observableArray(),s.barrierCategories=ko.observableArray(),s.toDoCategories=ko.observableArray(),s.interventionCategories=ko.observableArray(),s.goalTypes=ko.observableArray(),s.goalTaskStatuses=ko.observableArray(),s.barrierStatuses=ko.observableArray(),s.interventionStatuses=ko.observableArray(),s.careManagers=ko.observableArray(),s.careMemberTypes=ko.observableArray(),s.careMemberFrequency=ko.observableArray(),s.observationTypes=ko.observableArray(),s.observationStates=ko.observableArray(),s.observationDisplays=ko.observableArray(),s.objectives=ko.observableArray(),s.noteTypes=ko.observableArray(),s.noteMethods=ko.observableArray(),s.noteWhos=ko.observableArray(),s.noteSources=ko.observableArray(),s.noteOutcomes=ko.observableArray(),s.visitTypes=ko.observableArray(),s.utilizationSources=ko.observableArray(),s.dispositions=ko.observableArray(),s.utilizationLocations=ko.observableArray(),s.allergyTypes=ko.observableArray(),s.severities=ko.observableArray(),s.reactions=ko.observableArray(),s.allergySources=ko.observableArray(),s.allergyStatuses=ko.observableArray(),s.medicationStatuses=ko.observableArray(),s.medicationCategories=ko.observableArray(),s.freqHowOftens=ko.observableArray(),s.frequency=ko.observableArray(),s.medSuppTypes=ko.observableArray(),s.freqWhens=ko.observableArray(),s.durationUnits=ko.observableArray(),s.refusalReasons=ko.observableArray(),s.medicationReviews=ko.observableArray();var o=ko.observableArray(),d=ko.observableArray(),l=ko.observableArray(),c=ko.observableArray(),p=ko.observableArray(),u=ko.observableArray(),v=ko.observableArray(),m=ko.observableArray(),g={enums:s,todos:o,contacts:d,tasks:c,interventions:l,events:p,alerts:u,contactTypesTree:v,contactTypes:m,refreshToDos:n,refreshInterventions:a};return g}),n("services/entityfinder",["services/session","config.services","services/local.collections"],function(e,n,a){function r(){l||(l=t("services/datacontext"),c=t("viewmodels/patients/index"))}function i(e){if(r(),e.Result){var t=l.createEntity("Alert",{result:e.Result.Result,reason:e.Result.Reason});t.entityAspect.acceptChanges(),l.alerts.push(t)}return(e.Program||e.Programs)&&(e.Program&&d(e.Program),e.Programs&&ko.utils.arrayForEach(e.Programs,function(e){d(e)})),!0}function s(e){var t=e.PatientId;return r(),e.RelatedChanges&&t&&ko.utils.arrayForEach(e.RelatedChanges,function(e){"100"===e&&l.getEntityList(null,p().EntityType,p().ResourcePath+t+"/Observation/Problems",null,null,!0),"200"===e&&c.getPatientsToDos()}),!0}function o(e){var t=e[0];t&&t.interventions&&ko.utils.arrayForEach(t.interventions,function(e){-1===a.interventions.indexOf(e)&&a.interventions.push(e)}),t&&t.tasks&&ko.utils.arrayForEach(t.tasks,function(e){-1===a.tasks.indexOf(e)&&a.tasks.push(e)})}function d(e){var t=l.createEntity("Program",{id:e.Id,name:e.Name,patientId:e.PatientId,shortName:e.shortName,status:e.Status,enabled:e.Enabled,completed:e.Completed,elementState:e.ElementState});t.entityAspect.acceptChanges()}var l,c,p=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","PatientObservation"):""}),u={searchForEntities:i,searchForProblems:s,searchForLocalCollectionEntities:o};return u}),n("services/dataservices/programsservice",["services/session","config.services","services/entityfinder"],function(e,n,a){function r(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1===t.indexOf(e)&&(e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.rejectChanges()}))})}function i(e){var t=e.computedPath();ko.utils.arrayForEach(e.steps(),function(e){-1!==t.indexOf(e)&&e.completed(!0)})}function s(t,a,r,i){if(!t)throw new Error("[manager] cannot be a null parameter");c();var s=a.Completed?"Process":"Save",o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/Module/Action/"+s,"Program");if(a){var d={};d.Action=a,d.ProgramId=r,d=JSON.stringify(d);var p=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return t.executeQuery(p).fail(l)}}function o(t,a,r,i,s){function o(e){return!0}if(!t)throw new Error("[manager] cannot be a null parameter");c();var d=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/"+a+"/Remove","Program"),p={};p.Reason=s,p.ProgramName=r,p=JSON.stringify(p);var u=breeze.EntityQuery.from(d.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:p});return t.executeQuery(u).then(o).fail(l)}function d(t,a,r,i){function s(e){return!0}if(!t)throw new Error("[manager] cannot be a null parameter");c();var o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/"+r+"/Attributes/Update","Program");if(a){var d={};d.PlanElement=a,d=JSON.stringify(d);var p=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d});return t.executeQuery(p).then(s).fail(l)}}function l(e){c();var t=v.createEntity("Alert",{result:0,reason:"Save failed!"});throw t.entityAspect.acceptChanges(),v.alerts.push(t),v.programsSaving(!1),new Error("Unable to save")}function c(){v||(v=t("services/datacontext"))}function p(t,a,r,i){if(!t)throw new Error("[manager] cannot be a null parameter");c();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient/"+i+"/Program/Module/Action/Repeat","Action");if(a){var o={};o.Action=a,o.ProgramId=r,o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return t.executeQuery(d).fail(l)}}function u(e,t){var n=breeze.EntityQuery.from("Action").where("archiveOriginId","==",t.id()).toType("Action"),a=e.executeQueryLocally(n);return a.length>0?a[0]:null}var v,m={saveActionPost:s,removeProgram:o,cancelChangesForNonComputedPath:r,setCompletedSteps:i,savePlanElemAttrs:d,repeatAction:p,getRepeatedAction:u};return m}),n("models/programs",["config.services","services/session","services/entityserializer","services/dataservices/programsservice"],function(e,n,a,r){function i(e){function t(e){e.elementState()||e.elementState(1),e.eligibilityDatesStatement=ko.computed(function(){var t=e.eligibilityStartDate(),n=e.eligibilityEndDate();if(!t&&!n)return"";var a="Eligibility ";return t&&(t=moment(t).format("MM/DD/YYYY"),a+=" begins on "+t),n&&(n=moment(n).format("MM/DD/YYYY"),a+=t?" and ends on "+n:" ends on "+n),a}),e.duration=ko.computed(function(){var t=moment(e.attrStartDate()),n=moment(),a=n.diff(t,"days");return a}),e.allModulesOpen=ko.computed(function(){var t=ko.utils.arrayFirst(e.modules(),function(e){return!e.isOpen()});return!t}),e.displayName=ko.computed(function(){var t=e.name(),n=e.attrEndDate(),a=e.elementState();if(n&&5==a||6==a){var r=moment(n);r.isValid()&&(t=t+" - "+r.format("MM/DD/YYYY"))}return t})}function n(e){e.isOpen=ko.observable(),4!==e.elementState()||e.completed()?e.isOpen(!1):e.isOpen(!1),e.completeActionsCount=ko.computed(function(){var t=e.actions(),n=ko.utils.arrayFilter(t,function(e){return 5===e.elementState()&&e.enabled()});return n.length>0?n.length:"-"}),e.openActionsCount=ko.computed(function(){var t=e.actions(),n=ko.utils.arrayFilter(t,function(e){return 4===e.elementState()&&e.enabled()});return n.length>0?n.length:"-"}),e.notStartedActionsCount=ko.computed(function(){var t=e.actions(),n=ko.utils.arrayFilter(t,function(e){return 2===e.elementState()&&e.enabled()});return n.length>0?n.length:"-"})}function i(e){o(),e.objective=ko.computed(function(){var t;return e.id()&&(t=ko.utils.arrayFirst(d.enums.objectives(),function(t){return t.id()===e.id()})),t}),e.categoriesString=ko.computed(function(){var t,n="";return e.id()&&(t=ko.utils.arrayFirst(d.enums.objectives(),function(t){return t.id()===e.id()}),t&&t.categories()&&(ko.utils.arrayForEach(t.categories(),function(e){n+=e.name()+", "}),n=n.substring(0,n.length-2))),n})}function s(e){function t(e,n){e.archiveOriginId();e.historicalAction()&&(n.push(e.historicalAction()),t(e.historicalAction(),n))}e.computedPath=ko.computed({read:function(){o();var t=!1,n=e.steps().sort(l),a=[];if(0===n.length)return n;for(var r=!0,i=n[0];i;){r&&i.activeStep(!0),a.push(i);var s=p(i,t);if(s&&!s.activeStep()&&(t=!0),!s)break;i=s,r=!1}return a},deferEvaluation:!0}).extend({throttle:50}),e.hasChanges=ko.computed(function(){return 4===e.elementState()}),e.isSaving=ko.observable(!1),e.isLoading=ko.observable(!1),e.saveAction=function(){setTimeout(function(){e.isSaving(!0),u(e)},0)},e.formattedCompletedDate=ko.computed(function(){var t=moment(e.dateCompleted()),n=t.format("MM/DD/YYYY");return n}),e.history=ko.computed(function(){var n=(e.historicalAction(),[]);return t(e,n),n})}function c(e){o(),e.activeStep=ko.observable(!1),e.selectedResponse=ko.observable(),e.computedResponse=ko.computed({read:function(){return 0!==e.selectedResponseId()&&e.selectedResponseId()?(d.getEntityById(e.selectedResponse,e.selectedResponseId(),"Response","fakePath1",!1),e.selectedResponse()):null},write:function(t){void 0!==t&&(4!==e.action().elementState()&&(e.action().stateUpdatedOn((new moment).toISOString()),e.action().elementState(4)),e.selectedResponse(t),t&&e.selectedResponseId(t.id()))},deferEvaluation:!0}),e.hasNoTrueAnswers=ko.computed(function(){if(e.stepType()&&"Checkbox"===e.stepType().name()){var t=ko.utils.arrayFirst(e.responses(),function(e){return"true"===e.value()});return t?!1:!0}return!1}).extend({throttle:25})}function p(e,t){function n(e,t){var n=ko.observable();return d.getEntityById(n,e,"Step","fakePath2",!1),n()&&n().activeStep(t),n()}var a=null,r="Complete"===e.stepType().name(),i=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||!e.computedResponse().value())),s=!(!e.computedResponse()||e.computedResponse().required()&&(!e.computedResponse().required()||"SingleSelect"!==e.stepType().name()&&"Radio"!==e.stepType().name()));return e.computedResponse()&&e.computedResponse().nextStepId()&&i&&!r?a=n(e.computedResponse().nextStepId(),!t):e.computedResponse()&&e.computedResponse().nextStepId()&&s&&!r?a=n(e.computedResponse().nextStepId(),!t):0===e.responses().length||r?a=null:ko.utils.arrayForEach(e.responses(),function(e){e.nominal()===!0&&(e.required()!==!0||e.value()||(t=!0),a=n(e.nextStepId(),!t))}),r&&(e.completeAction||(e.completeAction=function(){var t=e.action();setTimeout(function(){t.dateCompleted((new moment).toISOString()),t.completed(!0),t.isSaving(!0),u(t)},0)})),a}function u(e){o(),setTimeout(function(){r.cancelChangesForNonComputedPath(e),e.completed()&&r.setCompletedSteps(e);var t=a.serializeAction(e,d.manager),n=e.module().program().patientId(),i=e.module().program().id();return d.saveAction(e,t,i,n)},50)}e.addEntityType({shortName:"ContractProgram",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},shortName:{dataType:"String"}}}),e.addEntityType({shortName:"Program",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},patientId:{dataType:"String"},shortName:{dataType:"String"},status:{dataType:"String"},description:{dataType:"String"},eligibilityRequirements:{dataType:"String"},eligibilityStartDate:{dataType:"DateTime"},eligibilityEndDate:{dataType:"DateTime"},enabled:{dataType:"Boolean"},sourceId:{dataType:"String"},programState:{dataType:"Int64"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},version:{dataType:"String"},templateName:{dataType:"String"},authoredBy:{dataType:"String"},programVersion:{dataType:"String"},templateVersion:{dataType:"String"},programVersionUpdatedOn:{dataType:"DateTime"},elementState:{dataType:"Int64"},stateUpdatedOn:{dataType:"DateTime"},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1}},navigationProperties:{modules:{entityTypeName:"Module",isScalar:!1,associationName:"Program_Modules"},patient:{entityTypeName:"Patient",isScalar:!0,associationName:"Patient_Programs",foreignKeyNames:["patientId"]},attributes:{entityTypeName:"Attributes",isScalar:!0,associationName:"Program_Attributes"},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Program_ElementState",foreignKeyNames:["elementState"]},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Program_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Program_AssignedTo",foreignKeyNames:["assignToId"]}}}),e.addEntityType({shortName:"Module",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},description:{dataType:"String"},programId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},elementState:{dataType:"Int64"},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},startDate:{dataType:"DateTime"},endDate:{dataType:"DateTime"},stateUpdatedOn:{dataType:"DateTime"},authoredBy:{dataType:"String"},moduleVersion:{dataType:"String"},moduleVersionUpdatedOn:{dataType:"DateTime"}},navigationProperties:{program:{entityTypeName:"Program",isScalar:!0,associationName:"Program_Modules",foreignKeyNames:["programId"]},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Module_ElementState",foreignKeyNames:["elementState"]},actions:{entityTypeName:"Action",isScalar:!1,associationName:"Module_Actions"},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Module_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Module_AssignedTo",foreignKeyNames:["assignToId"]}}}),e.addEntityType({shortName:"Action",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},description:{dataType:"String"},moduleId:{dataType:"String"},sourceId:{dataType:"String"},order:{dataType:"Int64"},completed:{dataType:"Boolean"},archived:{dataType:"Boolean"},archivedDate:{dataType:"DateTime"},archiveOriginId:{dataType:"String"},completedBy:{dataType:"String"},enabled:{dataType:"Boolean"},status:{dataType:"Int64"},deleteFlag:{dataType:"Boolean"},elementState:{dataType:"Int64"},stateUpdatedOn:{dataType:"DateTime"},dateCompleted:{dataType:"DateTime"},next:{dataType:"String"},previous:{dataType:"String"},assignDate:{dataType:"DateTime"},assignById:{dataType:"String"},assignToId:{dataType:"String"},actionVersion:{dataType:"String"},actionVersionUpdatedOn:{dataType:"DateTime"},authoredBy:{dataType:"String"},attrStartDate:{dataType:"DateTime"},attrEndDate:{dataType:"DateTime"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},objectives:{complexTypeName:"Objective:#Nightingale",isScalar:!1}},navigationProperties:{module:{entityTypeName:"Module",isScalar:!0,associationName:"Module_Actions",foreignKeyNames:["moduleId"]},steps:{entityTypeName:"Step",isScalar:!1,associationName:"Action_Steps"},elementStateModel:{entityTypeName:"ElementState",isScalar:!0,associationName:"Action_ElementState",foreignKeyNames:["elementState"]},assignBy:{entityTypeName:"CareManager",isScalar:!0,associationName:"Action_AssignedBy",foreignKeyNames:["assignById"]},assignTo:{entityTypeName:"CareManager",isScalar:!0,associationName:"Action_AssignedTo",foreignKeyNames:["assignToId"]},historicalAction:{entityTypeName:"Action",isScalar:!0,associationName:"Action_HistoricalAction",foreignKeyNames:["archiveOriginId"]}}}),e.addEntityType({shortName:"Step",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},header:{dataType:"String"},description:{dataType:"String"},title:{dataType:"String"},text:{dataType:"String"},question:{dataType:"String"},notes:{dataType:"String"},actionId:{dataType:"String"},sourceId:{dataType:"String"},stepTypeId:{dataType:"String"},selectedResponseId:{dataType:"String"},order:{dataType:"Int64"},controlType:{dataType:"Int64"},selectType:{dataType:"Int64"},completed:{dataType:"Boolean"},enabled:{dataType:"Boolean"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},status:{dataType:"Int64"}},navigationProperties:{action:{entityTypeName:"Action",isScalar:!0,associationName:"Action_Steps",foreignKeyNames:["actionId"]},stepType:{entityTypeName:"StepType",isScalar:!0,associationName:"Step_StepType",foreignKeyNames:["stepTypeId"]},responses:{entityTypeName:"Response",isScalar:!1,associationName:"Step_Responses"}}}),e.addEntityType({shortName:"Response",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},text:{dataType:"String"},required:{dataType:"Boolean"},value:{dataType:"String"},stepId:{dataType:"String"},nominal:{dataType:"Boolean"},order:{dataType:"Int64"},spawnElement:{complexTypeName:"SpawnElement:#Nightingale",isScalar:!1},nextStepId:{dataType:"String"}},navigationProperties:{step:{entityTypeName:"Step",isScalar:!0,associationName:"Step_Responses",foreignKeyNames:["stepId"]}}}),e.addEntityType({shortName:"StepType",namespace:"Nightingale",dataProperties:{id:{dataType:"Int64",isPartOfKey:!0},name:{dataType:"String"},path:{dataType:"String"}},navigationProperties:{steps:{entityTypeName:"Step",isScalar:!1,associationName:"Step_StepType"}}}),e.addEntityType({shortName:"SpawnElement",namespace:"Nightingale",isComplexType:!0,dataProperties:{elementId:{dataType:"String"},elementType:{dataType:"String"},tag:{dataType:"String"}}}),e.addEntityType({shortName:"Attributes",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},planElementId:{dataType:"String"},authoredBy:{dataType:"String"},ineligibleReason:{dataType:"String"},eligibility:{dataType:"String"},enrollment:{dataType:"String"},graduatedFlag:{dataType:"String"},population:{dataType:"String"},removedReason:{dataType:"String"},didNotEnrollReason:{dataType:"String"},overrideReason:{dataType:"String"},removedReason:{dataType:"String"},completedBy:{dataType:"String"},completed:{dataType:"Int64"},dateCompleted:{dataType:"DateTime"},market:{dataType:"String"}},navigationProperties:{program:{entityTypeName:"Program",isScalar:!0,associationName:"Program_Attributes",foreignKeyNames:["planElementId"]},eligibilityModel:{entityTypeName:"EligibilityStatus",isScalar:!0,associationName:"Attributes_Eligibility",foreignKeyNames:["eligibility"]},enrollmentModel:{entityTypeName:"EnrollmentStatus",isScalar:!0,associationName:"Attributes_Enrollment",foreignKeyNames:["enrollment"]},graduatedFlagModel:{entityTypeName:"YesOrNo",isScalar:!0,associationName:"Attributes_GraduatedFlag",foreignKeyNames:["graduatedFlag"]},completedModel:{entityTypeName:"YesOrNo",isScalar:!0,associationName:"Attributes_Completed",foreignKeyNames:["completed"]}}}),e.addEntityType({shortName:"Objective",namespace:"Nightingale",isComplexType:!0,dataProperties:{id:{dataType:"String"},value:{dataType:"String"},unit:{dataType:"String"},status:{dataType:"Int64"}}}),e.addEntityType({shortName:"ObjectiveLookup",namespace:"Nightingale",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"},categories:{complexTypeName:"IdName:#Nightingale",isScalar:!1}}}),e.registerEntityTypeCtor("Program",null,t),e.registerEntityTypeCtor("Module",null,n),e.registerEntityTypeCtor("Objective",null,i),e.registerEntityTypeCtor("Action",null,s),e.registerEntityTypeCtor("Step",null,c)}function s(e){function t(){if(e.completed())e.elementState(5);else if(4===e.elementState()){var t=d.createEntity("Alert",{result:"warning",reason:"Progress saved"});t.entityAspect.acceptChanges(),d.alerts.push(t)}e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.steps(),function(e){e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.acceptChanges()})}),e.module().entityAspect.acceptChanges(),e.isSaving(!1)}o(),setTimeout(function(){r.cancelChangesForNonComputedPath(e),e.completed()&&r.setCompletedSteps(e);var n=a.serializeAction(e,d.manager),i=e.module().program().patientId(),s=e.module().program().id();return e.entityAspect.acceptChanges(),d.saveAction(e,n,s,i).then(t)},50)}function o(){d||(d=t("services/datacontext"))}var d,l=(ko.computed({read:function(){var t=n.currentUser();return t?new e.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"response","Response"):""},deferEvaluation:!0}),function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}),c=(breeze.DataType,{initialize:i,extSaveAction:s});return c}),n("models/users",["config.services","services/session"],function(e,t){function n(e){function t(e){e.settings=ko.observable(),e.recentIndividuals=ko.observableArray(),e.computedRecentIndividuals=ko.computed(function(){var t=e.recentIndividuals().slice(0,5);return t}).extend({throttle:25})}function n(e){e.hasTimes=ko.computed(function(){return moment(e.end()).isValid()&&moment(e.start()).isValid()}),e.timeString=function(){var t=moment(e.start()),n=t.isValid?t.format("MM/DD/YYYY"):"-";if(e.end()){var a=moment(e.end());if(a.isValid()&&t.isValid()){var n=t.format("MM/DD/YYYY h:mm A");if(t.isSame(a,"day")){var r=a.format("h:mm A");n+=" - "+r}else{var r=a.format("MM/DD/YYYY h:mm A");n+=" - "+r}}}return n}}e.addEntityType({shortName:"User",namespace:"NightingaleUser",dataProperties:{userId:{dataType:"String",isPartOfKey:!0},firstName:{dataType:"String"},lastName:{dataType:"String"},userName:{dataType:"String"},aPIToken:{dataType:"String"},contracts:{complexTypeName:"Contract:#NightingaleUser",isScalar:!1}}}),e.addEntityType({shortName:"Contract",namespace:"NightingaleUser",isComplexType:!0,dataProperties:{id:{dataType:"Int64"},name:{dataType:"String"},number:{dataType:"String"}}}),e.addEntityType({shortName:"Event",namespace:"NightingaleUser",dataProperties:{id:{dataType:"String",isPartOfKey:!0},userId:{dataType:"String"},title:{dataType:"String"},start:{dataType:"DateTime"},end:{dataType:"DateTime"},allDay:{dataType:"Boolean"},url:{dataType:"String"},patientId:{dataType:"String"},typeId:{dataType:"String"},patientName:{dataType:"String"},assignedToName:{dataType:"String"}},navigationProperties:{type:{entityTypeName:"EventType",isScalar:!0,associationName:"Event_Type",foreignKeyNames:["typeId"]}}}),e.addEntityType({shortName:"EventType",namespace:"NightingaleUser",dataProperties:{id:{dataType:"String",isPartOfKey:!0},name:{dataType:"String"}}}),e.registerEntityTypeCtor("User",null,t),e.registerEntityTypeCtor("Event",null,n)}function a(e){e.createEntity("EventType",{id:1,name:"Intervention"}).entityAspect.acceptChanges(),e.createEntity("EventType",{id:2,name:"To Do"}).entityAspect.acceptChanges()}function r(e,t){var n=new Date,a=n.getDate(),r=n.getMonth(),i=n.getFullYear();e.createEntity("Event",{id:"eventone",title:"Diabetes Appointment",userId:t,start:new Date(i,r,a+4),end:new Date(i,r,a+4),allDay:!0}),e.createEntity("Event",{id:"eventtwo",title:"Phone call",userId:t,start:new Date(i,r,a-5),end:new Date(i,r,a-2)}),e.createEntity("Event",{id:"eventthree",title:"Something else",userId:t,start:new Date(i,r,a-5),end:new Date(i,r,a-2)}),e.createEntity("Event",{id:"eventfour",title:"Goto google.com",userId:t,start:new Date(i,r,1),allDay:!0,url:"http://www.google.com"})}var i=(breeze.DataType,{initialize:n,createCalendarMocks:r,initializeEnums:a});return i}),n("services/analytics",[],function(){var e=function(e,t,n){window.ga&&(window.ga("set",{dimension1:t,dimension2:n}),console.log("analytics initialized : gaId="+e+", contractId= "+t+", userName= "+n))},t=function(e){console.log("analytics sendPageView : path="+e),window.ga&&window.ga("send","pageview",{page:e})};return{initialize:e,sendPageView:t}}),n("services/bindings",["services/formatter","services/dateHelper"],function(e,n){function a(t,n){$(t).attr("maxlength",10),$(t).attr("placeholder","MM/DD/YYYY"),$(t).attr("title","MM/DD/YYYY"),$(t).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||47===t||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),$(t).on("blur",function(){var a=$(t).val();a&&(a=e.date.optimizeDate(a),a=e.date.optimizeYear(a),a!==$(t).val()&&$(t).val(a),n()!==a&&n(a))}),$(t).on("keydown paste",function(a){setTimeout(function(){var r=a.which||a.keyCode,i=$(t).val();if($(t).datepicker&&$(t).datepicker("hide"),!a.shiftKey&&!a.ctrlKey&&37!=r&&39!=r&&9!=r&&35!=r&&36!=r&&46!==r&&8!=r){var s=t.selectionStart;if(i){"paste"===a.type&&(i=i.replace(/\D/g,""));var o=i;(s==i.length||"paste"===a.type||i.replace(/\D/g,"").length>=8)&&(o=e.date.optimizeDate(i)),(o&&o!==i||"paste"===a.type)&&($(t).val(o),n(o))}}},5)})}function r(e,t){var n,a;a=e.parent().find(".widget");var r=!1;e.parent()&&(r=!!e.parent().find(".widget.fullscreen").length),$bodys=a.find(".content > .table-row > .table-cell > .body");var i;if(r){if(!e.hasClass("fullscreen"))return;a.find(".content").css("height",""),$bodys.css("height",""),i=e.closest(".column").height()+"px",a=e.parent().find(".widget.fullscreen"),$bodys=a.find(".content > .table-row > .table-cell > .body")}else a.find(".content").css("height",""),$bodys.css("height","");var s;a.each(function(e,t){var a;a=$(this),s=r?i:this.offsetHeight+"px",n=a.children(".content"),n.css("height",s),n.find(".wrapper > .content").css("height",s)}),t||$bodys.each(function(e,t){var n=this.parentElement.offsetHeight?this.parentElement.offsetHeight:0;s=r?n-10:n,s+="px",$(t).css("height",s)})}function i(){return!window.ActiveXObject&&"ActiveXObject"in window}function s(e){var t=$(e),n=t.offset().top;n-=t.parents(".widget").offset().top,n+=t.outerHeight()/2,$(".arrow").css("top",n)}function o(e){$(e).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()})}function d(e){$(e).off("keypress.extraDecimal").on("keypress.extraDecimal",function(t){var n=t.which||t.keyCode;46==n&&$(e).val().indexOf(".")>-1&&t.preventDefault()})}function l(){c||(c=t("services/datacontext"))}var c;ko.bindingHandlers.Date={update:function(e,t){var n=t(),a=moment(n()),r=a.format("MM/DD/YYYY");$(e).text(r)}},ko.bindingHandlers.DateTime={update:function(e,t){var n=t(),a=moment(n()),r=a.format("MM/DD/YYYY h:mm A");$(e).text(r)}},ko.bindingHandlers.DateOrNothing={update:function(e,t){var n=t(),a=moment(n()),r=a.format("MM/DD/YYYY");r="Invalid date"==r?"":r,$(e).text(r)}},ko.bindingHandlers.DateOrDash={update:function(e,t){var n=t(),a="-";if(n&&n()){var r=moment(n());a=r.format("MM/DD/YYYY"),a="Invalid date"==a?"-":a}$(e).text(a)}},ko.bindingHandlers.StringOrDash={update:function(e,t){var n=t(),a="-";n&&n()&&(a=n().trim()?n():"-"),$(e).text(a)}},ko.bindingHandlers.Time={update:function(e,t){var n=t(),a=moment(n()),r=a.format("HH:mm");$(e).text(r)}},ko.bindingHandlers.LongTime={update:function(e,t){var n=t(),a=moment(n()),r=a.format("hh:mm A");$(e).text(r)}},ko.bindingHandlers.clickRadio={init:function(e,t,n,a){var r=t(),i=n().setValue||null;$(e).on("click",function(){r("null"===i?null:i?i:a)})}},ko.bindingHandlers.clickToggleInArray={init:function(e,t,n,a){l();var r=t(),i=n().setValue||null,s=ko.utils.arrayFirst(r(),function(e){return e.id()===i});if(!s){var o={id:i};s=c.createComplexType("Identifier",o)}$(e).on("click",function(){var e=r().indexOf(s);-1===e?r.push(s):r.remove(s)})}},ko.bindingHandlers.clickToggleInLanguageArray={init:function(e,t,n,a){l();var r=t(),i=n().setValue||null,s=(n().nameValue||null,n().lookupPropertyName||null),o=ko.utils.arrayFirst(r(),function(e){return e[s]()===i});if(!o){var d={};d[s]=i,o=c.createComplexType("ContactMode",d)}$(e).on("click",function(){var e=r().indexOf(o);-1===e?r.push(o):r.remove(o)})}},ko.bindingHandlers.clickTrue={update:function(e,t,n){var a=t();$(e).on("click",function(){a("true")})}},ko.bindingHandlers.clickFalse={update:function(e,t,n){var a=t();$(e).on("click",function(){a("false")})}},ko.bindingHandlers.hoverToggle={update:function(e,t){var n=t();ko.utils.registerEventHandler(e,"mouseover",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(n),!0)}),ko.utils.registerEventHandler(e,"mouseout",function(){ko.utils.toggleDomNodeCssClass(e,ko.utils.unwrapObservable(n),!1)})}},ko.bindingHandlers.clickToggle={init:function(e,t,n){var a=t(),r=n().canToggle||null;ko.utils.registerEventHandler(e,"click",function(e){if(r){var t=ko.unwrap(r);t&&(e.preventDefault(),a(!a()))}else e.preventDefault(),a(!a())})}},ko.bindingHandlers.setActiveTab={init:function(e,t,n,a){var r=t();ko.utils.registerEventHandler(e,"click",function(e){e.preventDefault(),a.activeTab(r)})}},ko.bindingHandlers.updateActionElementState={init:function(e,t,n,a){var r=t(),i=r.subscribe(function(){4!==a.step().action().elementState()&&(a.step().action().stateUpdatedOn((new moment).toISOString()),a.step().action().elementState(4))});ko.utils.domNodeDisposal.addDisposeCallback(e,function(){i.dispose()})}},ko.bindingHandlers.numericDecimal={init:function(e,t){var n=t();o(e),d(e),$(e).on("keydown paste change",function(t){var a=t.which||t.keyCode;"paste"==t.type&&t.preventDefault();var r=e.selectionStart;t.type;setTimeout(function(){var t=$(e).val(),i=t;"."==t?(i="0.",n&&($(e).val(i),n(i))):(isNaN(+t)||t.match(/\D/)&&!t.match(/\./))&&(i=t.replace(/\D/,""),n&&($(e).val(i),n(i))),46===a||8===a&&r-1<i.length?(8==a&&(r=r>0?r-1:r),e.setSelectionRange(r,r)):a>=48&&57>=a&&r<i.length&&e.setSelectionRange(r+1,r+1)},5)})}},ko.bindingHandlers.numeric={init:function(e,t){var n=t();o(e),$(e).on("keydown paste change",function(t){var a=t.which||t.keyCode;"paste"==t.type&&t.preventDefault(),"keydown"==t.type&&190==a&&t.preventDefault();var r=e.selectionStart;t.type;setTimeout(function(){var t=$(e).val(),i=t;(isNaN(+t)||t.match(/\D/))&&(i=t.replace(/\D/,""),n&&($(e).val(i),n(i))),46===a||8===a&&r-1<i.length?(8==a&&(r=r>0?r-1:r),e.setSelectionRange(r,r)):a>=48&&57>=a&&r<i.length&&e.setSelectionRange(r+1,r+1)},5)})}},ko.bindingHandlers.ssn={init:function(t,n,a,r){$(t).attr("maxlength",11),$(t).attr("placeholder","XXX-XX-XXXX"),$(t).attr("title","XXX-XX-XXXX");var i=n(),s=i();s&&s.length>0&&(s=e.formatSeparators(s,"XXX-XX-XXXX","-"),i(s)),o(t),$(t).on("keydown paste",function(n){setTimeout(function(){var a=n.which||n.keyCode,r=$(t).val(),s=t.selectionStart;if(r&&37!==a&&39!==a&&9!==a){if(s===r.length&&8===a)return;var o=e.formatSeparators(r.replace(/\D/g,""),"XXX-XX-XXXX","-");i(o),46===a||8===a&&s<o.length?t.setSelectionRange(s,s):a>=48&&57>=a&&s<r.length&&t.setSelectionRange(s,s)}},5)})}},ko.bindingHandlers.phone={init:function(t,n,a,r){var i=n();$(t).on("blur",function(){i.validate()?$(t).removeClass("invalid"):$(t).addClass("invalid")}),$(t).attr("maxlength",12),$(t).attr("placeholder","XXX-XXX-XXXX"),$(t).attr("title","XXX-XXX-XXXX");var s=i.number();s&&s.length>0&&(s=e.formatSeparators(s,"XXX-XXX-XXXX","-"),i.number(s)),$(t).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),$(t).on("keydown paste",function(n){setTimeout(function(){var a=n.which||n.keyCode,r=$(t).val(),s=t.selectionStart;if(r&&37!==a&&39!==a&&9!==a){if(s===r.length&&8===a)return;var o=e.formatSeparators(r.replace(/\D/g,""),"XXX-XXX-XXXX","-");i.number(o),46===a||8===a&&s<o.length?t.setSelectionRange(s,s):a>=48&&57>=a&&s<r.length&&t.setSelectionRange(s,s)}},5)})}},ko.bindingHandlers.date={init:function(e,t,n,r){var i=t();a(e,i)}},ko.bindingHandlers.datepicker={init:function(e,t,a,r){var i=t(),s=$(e);$(e).attr("maxlength",10);
var o=a().datepickerOptions||{},d=a().datepickerDynamicOptions||{};s.datepicker(o);var l=moment.utc(i());if(l.isValid()){l.local();var c=l.format("MM/DD/YYYY");s.datepicker("setDate",c)}if(ko.utils.registerEventHandler(e,"change",function(){var e=s.datepicker("getDate"),t=moment.utc(e);if(!t.isValid())return i(""),null;r.step&&4!==r.step().action().elementState()&&(r.step().action().stateUpdatedOn((new moment).toISOString()),r.step().action().elementState(4));var a=moment(i());a.isValid()?n.isSameDate(t,a)||(a=n.setDateValue(t,a)):a=t,i(a.toISOString())}),d&&d.minDate&&ko.isObservable(d.minDate)){if(d.minDate()){var p=new Date(d.minDate().getTime());s.datepicker("option","minDate",p)}d.minDate.subscribe(function(e){var t=new Date(e.getTime());t.setDate(t.getDate()),s.datepicker("option","minDate",t),i()&&i()<t&&i(t)})}if(d&&d.maxDate&&ko.isObservable(d.maxDate)){if(maxDate.maxDate()){var u=new Date(d.maxDate().getTime());s.datepicker("option","maxDate",u)}d.maxDate.subscribe(function(e){var t=new Date(e.getTime());t.setDate(t.getDate()-1),s.datepicker("option","maxDate",t),i()&&i()>t&&i(t)})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){s.datepicker("destroy")})},update:function(e,t,a,r){var i=t();$el=$(e),datepickerMoment=moment.utc($el.datepicker("getDate"));var s=moment.utc(i());if(s.isValid()&&datepickerMoment.isValid()&&!n.isSameDate(s,datepickerMoment)){s.local();var o=s.format("MM/DD/YYYY");$el.datepicker("setDate",o),$el.blur().change()}if("clear"===i||!s.isValid()){var i=t();i(null),$.datepicker._clearDate($el)}}},ko.bindingHandlers.datepickerEditable={init:function(e,t,r,i){var s=t(),o=$(e);a(e,s);var d=r().datepickerOptions||{},l=r().datepickerDynamicOptions||{};if(o.datepicker(d),s()&&moment(s()).isValid()&&("string"==typeof s()&&s().length>9||"string"!=typeof s())){var c=moment.utc(s());c.local();var p=c.format("MM/DD/YYYY");o.datepicker("setDate",p)}if(l&&l.minDate&&ko.isObservable(l.minDate)){if(l.minDate()){var u=moment(l.minDate());u.isValid()&&o.datepicker("option","minDate",u.toDate())}l.minDate.subscribe(function(e){if(e&&n.isValidDate(e,!0)){var t=moment(e),a=o.val();(!a||n.isValidDate(a)&&!moment(a).isBefore(e))&&o.datepicker("option","minDate",t.toDate())}})}if(l&&l.maxDate&&ko.isObservable(l.maxDate)){if(l.maxDate()){var v=moment(l.maxDate());v.isValid()&&o.datepicker("option","maxDate",v.toDate())}l.maxDate.subscribe(function(e){if(e&&n.isValidDate(e,!0)){var t=moment(e),a=o.val();(!a||n.isValidDate(a)&&!moment(a).isAfter(e))&&o.datepicker("option","maxDate",t.toDate())}})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o.datepicker("destroy")})},update:function(e,t,a,r){var i=t(),s=$(e),o=s.datepicker("getDate");o=o?o.toString():null;var d=moment.utc(o);if(n.isValidDate(i(),!0)){var l=moment.utc(i());if(l.isValid()&&d.isValid()&&!n.isSameDate(l,d)){l.local();var c=l.format("MM/DD/YYYY");s.datepicker("setDate",c),s.blur().change()}r.step&&4!==r.step().action().elementState()&&(r.step().action().stateUpdatedOn((new moment).toISOString()),r.step().action().elementState(4))}"clear"===i&&(i(null),$.datepicker._clearDate(s))}},ko.bindingHandlers.jqtimepicker={init:function(t,n,a,r){function i(e){$(this);if(!l)return void(l=!0);var t=0,n=0;if(e){var a=moment.utc(e);a.isValid()&&(timeMoment=moment().hours(e.getHours()).minutes(e.getMinutes()),t=timeMoment.hours(),n=timeMoment.minutes()),s(o,t,n)}else d||o(null)}function s(e,t,n){e()||e(moment("1/1/1970").toISOString());var a=moment(e());a.local(),a.isValid()&&(a.hours()!==t||a.minutes()!==n)&&(a.hours(t).minutes(n).seconds(0),a.utc(),e(a.toISOString()))}var o=n().observableDateTime,d=n().showDate,l=!1,c=$(t);if(c.timepicker({zindex:"999",interval:15,scrollbar:!0,startTime:new Date(0,0,0,8,0,0),dynamic:!1,change:i}),o&&o()&&moment(o()).isValid()){var p=moment(o());p.local();var u=e.padZeroLeft(p.hours(),2),v=e.padZeroLeft(p.minutes(),2);c.timepicker("setTime",u+":"+v)}else l=!0;o&&o.extend({notify:"always"}),$(t).attr("maxlength",8),$(t).attr("placeholder","HH:mm AM/PM"),$(t).attr("title","HH:mm AM/PM"),$(t).on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||47===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||97===t||65===t||109===t||77===t||112===t||80===t||58===t||e.preventDefault()}),$(t).on("keydown paste",function(n){setTimeout(function(){var a=n.which||n.keyCode,r=$(t).val();if(!n.shiftKey&&!n.ctrlKey&&37!=a&&39!=a&&9!=a&&35!=a&&36!=a&&46!==a&&8!=a||!r){var i=t.selectionStart;if(r){"paste"===n.type&&(r=r.replace(/\D/g,""));var s=r;(i==r.length||"paste"===n.type||r.replace(/\D/g,"").length>=8)&&(s=e.date.optimizeTime(r)),(s&&s!==r||"paste"===n.type)&&$(t).val(s)}else d?(p=moment(o()),(p.isValid()&&0!==p.hour()||0!==p.minute())&&(p.hour(0),p.minute(0),o(p.toISOString()))):o(null)}},5)})}},ko.bindingHandlers.timepicker={init:function(e,t,n,a){t(),$(e);ko.utils.registerEventHandler(e,"change",function(){var n=t(),r=new Date(moment(n()).toString()),i=moment(r).isDST()?60:0;if(moment($(e)[0].valueAsDate).isValid()){var s=new Date($(e)[0].valueAsDate.getTime()+60*(r.getTimezoneOffset()+i)*1e3),o=r;o.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),a.step&&a.step()&&4!==a.step().action().elementState()&&(a.step().action().stateUpdatedOn((new moment).toISOString()),a.step().action().elementState(4)),n(o.toISOString())}})},update:function(e,t,n){var a=ko.utils.unwrapObservable(t()),r=$(e),i=new moment(a);i.isValid()&&(r[0].value=i.format("HH:mm"))}},ko.bindingHandlers.timeOut={init:function(e,t,n){var a=n().timeOutOptions||{},r=t();a&&a.delay&&setTimeout(function(){r(!r)},a.delay),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){})}},ko.bindingHandlers.fullCalendar={update:function(e,t){var n=t();e.innerHTML="",$(e).fullCalendar({defaultView:n.defaultView,allDayText:"All day",events:ko.utils.unwrapObservable(n.events),header:n.header,editable:n.editable,eventClick:n.eventClick}),$(e).fullCalendar("gotoDate",ko.utils.unwrapObservable(n.viewDate))}},ko.bindingHandlers.typeahead={init:function(e,t,n){var a=ko.unwrap(n().initOptions)||{},r=ko.unwrap(t())||{},i=$(e),s=function(){i.change()},o=function(){var e=n().value();e?s():i.typeahead("val","")},d=r.displayKey;r.displayKey=function(e){return ko.unwrap(e[d])},r.dupDetector=function(e,t){return!1};var l=a.overrideSelected?a.overrideSelected:s;r.source=r.taOptions.ttAdapter();i.typeahead(a,r).on("typeahead:selected",l).on("typeahead:autocompleted",l).on("typeahead:closed",o);ko.utils.domNodeDisposal.addDisposeCallback(e,function(){i.typeahead("destroy"),i=null})},update:function(e,t){t()}},ko.bindingHandlers.autoHeight={update:function(e,t){t();$(e).height($(e)[0].scrollHeight)}},ko.bindingHandlers.chosen={init:function(e,t,n,a){ko.bindingHandlers.options.init(e);var r=ko.unwrap(n()),i=r.chosenOptions?r.chosenOptions.caption:"NO CAPTION SET YET NOT GOOD!!!!",s=r.chosenOptions?r.chosenOptions.isSearch:!1,o=r.chosenOptions?r.chosenOptions.isCancel:!1,d=null;r.chosenOptions&&r.chosenOptions.title&&(d=r.chosenOptions.title);var l={disable_search:!s,allow_single_deselect:o,search_contains:!0,display_selected_options:!0,inherit_select_classes:!0,placeholder_text_multiple:" ",placeholder_text_single:i,width:"auto"};$(e).prepend("<option></option>"),$(e).chosen(l)},update:function(e,t,n,a){ko.bindingHandlers.options.update(e,t,n),$(e).trigger("chosen:updated"),a.title&&(e.parentElement.children[1].children[0].title=a.title)}},ko.bindingHandlers.chosenUpdater={update:function(e,t,n){var a=(ko.unwrap(t()),ko.unwrap(n().disable));a?$(e).attr("disabled","disabled"):$(e).removeAttr("disabled"),$(e).trigger("chosen:updated")}},ko.bindingHandlers.arrowMover={init:function(e,t,n){ko.unwrap(t());$(e).on("click",function(){s(e)})}},ko.bindingHandlers.setHeightFromPrev={update:function(e,t,n){var a=(ko.unwrap(t()),$(e)),r=a.parent().height()-a.prev(".fixed").outerHeight();a.css("height",r+"px")}},ko.bindingHandlers.pieChart={update:function(e,t,n){var a=ko.utils.unwrapObservable(t()),r=n().chartOptions;$(e).highcharts({chart:{plotBackgroundColor:null,plotShadow:!1},title:{text:null},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{animation:!1,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},colors:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4","#ffffbf"],credits:{enabled:!1},series:[{type:"pie",name:r.title,data:a}]})}},ko.bindingHandlers.showResultsCount={update:function(e,t,n){var a=ko.unwrap(t());setTimeout(function(){var e=$(".tt-dataset-"+ko.unwrap(n().typeahead).name+" .tt-suggestions")[0],t=$(".tt-dataset-"+ko.unwrap(n().typeahead).name+" .tt-suggestions > .tt-suggestion")[0];if(e&&a){var r=document.createElement("div");r.innerHTML="("+a+")",e.insertBefore(r,t)}},150)}},ko.bindingHandlers.columnSizer={init:function(e,t,n){if(!i()){var a=$(e);$(document).ready(function(){setTimeout(function(){var e="nobody"===t()?!0:!1;r(a,e)},1)}),$(window).on("resize",function(e){r(a)})}},update:function(e,t,n){ko.unwrap(n().columnSizer.triggers);if(!i()){var a=$(e);setTimeout(function(){var e="nobody"===t()?!0:!1;r(a,e)},1)}}}}),n("services/branding",[],function(){function e(e,t){var n=this;n.brandName=ko.observable(e),n.imageSource=ko.observable(t)}var t=ko.observable(new e("Phytel","/NightingaleUI/Content/images/IBM_White_Logo_34.png")),n={currentBrand:t};return n}),n("services/jsonResultsAdapter",[],new breeze.JsonResultsAdapter({name:"Nightingale",extractResults:function(e){var t=e.results;if(!t)throw new Error("Unable to resolve 'results' property");return t&&(t.Problems||t.PatientProblem||t.PatientProblems||t.Patient||t.Cohorts||t.Patients||t.Program||t.Programs||t.PlanElems||t.Languages||t.States||t.Reason||t.CommModes||t.TimesOfDays||t.TimeZones||t.CommTypes||t.Contact||t.Contacts||t.LookUps||t.LookUpDetails||t.Goals||t.Goal||t.Note||t.Notes||t.PatientNote||t.Utilization||t.Library||t.CareMembers||t.CareTeam||t.CareTeamMember||t.Observations||t.Observation||t.PatientObservations||t.PatientObservation||t.Action||t.Actions||t.Attributes||t.Objectives||t.ToDo||t.ToDos||t.PatientDetails||t.Intervention||t.Interventions||t.Task||t.Tasks||t.Systems||t.PatientSystems||t.Allergy||t.Allergies||t.PatientAllergy||t.PatientAllergies||t.PatientMedSupp||t.PatientMedSupps||t.PatientMedFrequencies||t.ContactTypeLookUps)},visitNode:function(e,t,n){if(!e)return!1;if(e.PatientProblemID)return{entityType:"PatientProblem"};if(e.ConditionID&&e.DisplayName)return{entityType:"Condition"};if(e.Id&&e.DOB||e.Id&&e.Flagged&&e.Priority)return{entityType:"Patient"};if(e.ProgramId&&e.Actions){var a=e.DateCompleted;if(!a)return{entityType:"Module"};var r=a.substr(0,6);if(-1!==r.indexOf("Date")){var i=a.substr(6,13),s=new Date;s.setTime(i),e.DateCompleted=s.toISOString()}return{entityType:"Module"}}if(e.PatientId&&e.ContractProgramId)return{entityType:"Program"};if(e.Enrollment&&e.PlanElementId)return{entityType:"Attributes"};if(e.ModuleId&&e.Steps)return{entityType:"Action"};if(e.StepTypeId)return{entityType:"Step"};if(e.StepId)return{entityType:"Response"};if(e.ElementId)return{entityType:"SpawnElement"};if(e.CommModes&&e.Id)return e.CommModeIds=[],$.each(e.CommModes,function(t,n){e.CommModeIds.push({Id:n})}),{entityType:"CommunicationType"};if(e.ContactSubTypes){$.each(e.ContactSubTypes,function(e,t){var n=[];t.SubSpecialtyIds&&$.each(t.SubSpecialtyIds,function(e,t){t&&n.push({Id:t})}),t.SubSpecialtyIds=n})}if(t.query.fromEntityType&&"Note"===t.query.fromEntityType.shortName&&e.ProgramIds){var o=[];$.each(e.ProgramIds,function(e,t){t&&o.push({Id:t})}),e.ProgramIds=o}if(e.TimeZoneId)return e.PreferredTimesOfDayIds=[],e.PreferredDaysOfWeekIds=[],e.TimesOfDaysId&&$.each(e.TimesOfDaysId,function(t,n){e.PreferredTimesOfDayIds.push({Id:n})}),e.WeekDays&&$.each(e.WeekDays,function(t,n){e.PreferredDaysOfWeekIds.push({Id:n})}),{entityType:"ContactCard"};if(t.query.fromEntityType&&"ToDo"===t.query.fromEntityType.shortName){if(e.ProgramIds){var o=[];$.each(e.ProgramIds,function(e,t){t&&o.push({Id:t})}),e.ProgramIds=o}return n.navigationProperty&&"patientDetails"===n.navigationProperty.name?{entityType:"ToDoPatient"}:{entityType:"ToDo"}}if(t.query.fromEntityType&&"Intervention"===t.query.fromEntityType.shortName||n.propertyName&&"interventions"===n.propertyName){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return n.navigationProperty&&"patientDetails"===n.navigationProperty.name?{entityType:"ToDoPatient"}:{entityType:"Intervention"}}if(t.query.fromEntityType&&"Task"===t.query.fromEntityType.shortName||n.propertyName&&"tasks"===n.propertyName){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}if(n.navigationProperty&&"patientDetails"===n.navigationProperty.name)return{entityType:"ToDoPatient"};if(e.CustomAttributes)return $.each(e.CustomAttributes,function(e,t){var n=[];t&&t.Values&&($.each(t.Values,function(e,t){t&&n.push({Value:t})}),t.Values=n)}),{entityType:"Task"}}if(t.query.fromEntityType&&"CareTeam"===t.query.fromEntityType.shortName||n.propertyName&&"careTeam"===n.propertyName||n.propertyName&&"members"===n.propertyName){if("root"===n.nodeType||n.propertyName&&"careTeam"===n.propertyName)return e.Members&&e.Id&&$.each(e.Members,function(t,n){n.CareTeamId=e.Id,!n.RoleId&&n.CustomRoleName&&(n.RoleId=-1)}),{entityType:"CareTeam"};if(n.navigationProperty){if("members"===n.navigationProperty.name)return{entityType:"CareMember"};if("contact"===n.navigationProperty.name)return{entityType:"ContactCard"};if("roleType"===n.navigationProperty.name)return{entityType:"ContactTypeLookup"}}}if(t.query.fromEntityType&&"Goal"===t.query.fromEntityType.shortName||n.propertyName&&"goals"===n.propertyName){if("root"===n.nodeType||n.propertyName&&"goals"===n.propertyName){if(e.FocusAreaIds){var d=[];$.each(e.FocusAreaIds,function(e,t){t&&d.push({Id:t})}),e.FocusAreaIds=d}if(e.ProgramIds){var o=[];$.each(e.ProgramIds,function(e,t){t&&o.push({Id:t})}),e.ProgramIds=o}return e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var n=[];t.Values&&($.each(t.Values,function(e,t){t&&n.push({Value:t})}),t.Values=n)}),{entityType:"Goal"}}if(n.navigationProperty){if("tasks"===n.navigationProperty.name){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return e.CustomAttributes&&$.each(e.CustomAttributes,function(e,t){var n=[];$.each(t.Values,function(e,t){t&&n.push({Value:t})}),t.Values=n}),{entityType:"Task"}}if("barriers"===n.navigationProperty.name)return{entityType:"Barrier"};if("interventions"===n.navigationProperty.name){if(e.BarrierIds){var d=[];$.each(e.BarrierIds,function(e,t){t&&d.push({Id:t})}),e.BarrierIds=d}return{entityType:"Intervention"}}}}if(e.Id&&e.Name&&e.Categories)return{entityType:"ObjectiveLookup"};if(e.ObservationId&&e.TypeId)return{entityType:"PatientObservation"};if(e.Title&&e.StatusId&&e.AssignedToId){if(e.ProgramIds){var o=[];$.each(e.ProgramIds,function(e,t){t&&o.push({Id:t})}),e.ProgramIds=o}return{entityType:"ToDo"}}if(t.query.fromEntityType&&"ObservationState"===t.query.fromEntityType.shortName&&(e.AllowedTypeIds=[],$.each(e.TypeIds,function(t,n){e.AllowedTypeIds.push({Id:n})})),e.AllergyId&&e.AllergyTypeIds){var l=[],c=[];return $.each(e.AllergyTypeIds,function(e,t){l.push({Id:t})}),e.AllergyTypeIds=l,$.each(e.ReactionIds,function(e,t){c.push({Id:t})}),e.ReactionIds=c,{entityType:"PatientAllergy"}}if(t.query.fromEntityType&&"PatientMedication"===t.query.fromEntityType.shortName){var p=[],u=[];if($.each(e.NDCs,function(e,t){p.push({Id:t})}),$.each(e.PharmClasses,function(e,t){u.push({Id:t})}),e.NDCs=p,e.PharmClasses=u,"root"===n.nodeType||n.propertyName&&"patientMedSupps"===n.propertyName)return{entityType:"PatientMedication"}}}})),n("services/dataservices/getentityservice",["services/session"],function(e){function n(e,t,n,a,r,i){var s=breeze.EntityQuery.from(t).toType(n);return i&&(s=s.orderBy(i)),a&&r&&(s=s.where(a,"==",r)),e.executeQueryLocally(s)}function a(e,t,n,a,r){var i=breeze.EntityQuery.from(t).where(a,"==",r).toType(n);return e.executeQueryLocally(i)}function r(e,t){e.sort(function(e,n){return e[t]()>n[t]()?1:-1})}function i(t){t.status&&401===t.status&&e.logOff()}function s(){o||(o=t("services/datacontext"))}var o,d=function(e,t,a,d,l,c,p,u,v,m,g){function h(e){var n=e.results;return a&&a(n),m&&r(a,m),t}function y(e){s(),i(e),console.log(e);var n="Failed to load "+d+" from server.",a=o.createEntity("Alert",{result:0,reason:n});return a.entityAspect.acceptChanges(),o.alerts.push(a),t}if(s(),!e)throw new Error("[manager] cannot be a null parameter");if(!u){var f=n(e,l,d,c,p,m);if(f.length>0)return a(f),Q.resolve(t)}p&&!c&&(l+=p);var b={};if(v)b=v;else var b={};p&&c&&(b[c]=p);var w,k=breeze.EntityQuery.from(l).withParameters(b).toType(d);if(g){var S=e.queryOptions.using(breeze.MergeStrategy.SkipMerge);w=k.using(S)}else w=k;return e.executeQuery(w).then(h).fail(y)},l=function(e,t,n,r,d,l,c){function p(e){var a=e.results[0];return n&&n(a),t}function u(e){s(),i(e),console.log(e);var n="Failed to load "+d+" from server.",a=o.createEntity("Alert",{result:0,reason:n});return a.entityAspect.acceptChanges(),o.alerts.push(a),t}s();var v=l+r,m={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!c){var g=a(e,v,d,"id",r);if(g.length>0)return n&&n(g[0]),Q.resolve(t)}var h=breeze.EntityQuery.from(v).withParameters(m).toType(d);return e.executeQuery(h).then(p).fail(u)},c=function(e,t,n,r,d,l,c,p){function u(e){var a=e.results[0];return n&&n(a),t}function v(e){s(),i(e),console.log(e);var n="Failed to load "+d+" from server.",a=o.createEntity("Alert",{result:0,reason:n});return a.entityAspect.acceptChanges(),o.alerts.push(a),t}s();var m=l;r&&(m+=r);var g={};if(p)g=p;else var g={};if(!e)throw new Error("[manager] cannot be a null parameter");if(!c){var h=a(e,m,d,"id",r);if(h.length>0)return n(h[0]),Q.resolve(t)}var y=breeze.EntityQuery.from(m).withParameters(g).toType(d);return e.executeQuery(y).then(u).fail(v)},p={getEntityList:d,getEntityById:l,getLocalById:a,getMelsEntityById:c};return p}),n("services/dataservices/usersservice",["models/base","config.services","services/session"],function(e,n,a){function r(e){i(),console.log("Error - ",e),e.status&&401===e.status&&a.logOff();var t=s.createEntity("Alert",{result:"error",reason:"Log-in failed!"});t.entityAspect.acceptChanges(),s.alerts.push(t)}function i(){s||(s=t("services/datacontext"))}var s,o=function(e,t,a,i,s){function o(e){var t=e.results[0];return a(t)}var d={Token:i,APIKey:n.apiAppKey,Context:"NG"};if(i){var l=breeze.EntityQuery.from(t).withParameters({$method:"POST",$encoding:"JSON",$data:d}).toType("User");return e.executeQuery(l).then(o).fail(r)}},d=function(e,t){var a;return a=n.securityServiceName+t,e?$.ajax({url:a,cache:!1,headers:{token:e},dataType:"json",type:"POST",data:{Context:"NG"},success:function(e){return!0}}):void 0},l=function(e,t,a){var i;e||(e="usersettings"),i=n.remoteServiceName+e,$.ajax({url:i,cache:!1,headers:{Token:a},dataType:"json",type:"GET",success:function(e){return t().settings(e.Settings),!0}}).fail(r)},c=function(e,t){var n={};n.firstName=t.firstName||"",n.lastName=t.lastName||"",n.aPIToken=t.aPIToken||"",n.userId=t.userId||"",n.userName=t.userName||"",n.contracts=t.contracts||[];var a=e.createEntity("User",n);return a.entityAspect.acceptChanges(),a},p={getSessionUser:o,deleteSessionToken:d,getUserSettings:l,createUserFromSessionUser:c};return p}),n("services/dataservices/calendarservice",["models/users","config.services","services/local.collections"],function(e,t,n){function a(e){n.events.remove(e),e.entityAspect.setDeleted(),e.entityAspect.acceptChanges()}function r(e){var t=ko.utils.arrayFirst(n.events(),function(t){return t.id()===e});t&&a(t)}function i(e,t,n,a,r,i){var s=breeze.EntityQuery.from(t).select("id, title, start, end, allDay, url").toType(n);return a&&r&&(s=s.where(a,"==",r)),e.executeQueryLocally(s)}function s(e,t,n,a,r){var i=breeze.EntityQuery.from(t).where(a,"==",r).toType(n);return e.executeQueryLocally(i)}var o=function(e,t,n,a,r){if(!e)throw new Error("[manager] cannot be a null parameter");if(!r){var s=i(e,t,"Event","userId",a);if(s.length>0)return n(s),Q.resolve()}},d=function(e,t){var a=e.createEntity("Event",t);return a.entityAspect.acceptChanges(),n.events.push(a),a},l=function(e,t){if(!e)throw new Error("[manager] cannot be a null parameter");var n=s(e,"Event","Event","id",t);return n.length>0?n[0]:void 0},c={getEventsByUserId:o,createCalendarEvent:d,removeCalendarEventById:r,getEventById:l};return c}),n("services/usercontext",["services/session","models/base","config.services","models/users","services/dataservices/usersservice","services/dataservices/calendarservice"],function(e,t,n,a,r,i){function s(){breeze.NamingConvention.camelCase.setAsDefault();var e=new breeze.EntityManager({dataService:l});return a.initialize(e.metadataStore),e}var o=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"null"}),d=ko.computed(function(){return e.currentUser()?e.currentUser().userId():"nothing"}),l=new breeze.DataService({serviceName:n.securityServiceName,hasServerMetadata:!1}),c=s(),p=(c.metadataStore,function(e,t,n){return Q(r.getSessionUser(c,"1.0/login",e,t,n))}),u=function(e){return Q(r.deleteSessionToken(o(),e))},v=function(e,t,n){return Q(r.getUserSettings(t,e,n))},m=function(e){return r.createUserFromSessionUser(c,e)},g=function(){return a.createCalendarMocks(c,d())},h=function(){return a.initializeEnums(c)},y=function(e,t,n){var a="events";return i.getEventsByUserId(c,a,e,t,n)},f=function(e){return i.getEventById(c,e)},b=function(e){return i.createCalendarEvent(c,e)},w=function(e){i.removeCalendarEventById(e)},k=function(e,t){return c.createEntity(e,t)},S={createEntity:k,getUserByUserToken:p,logOutUserByToken:u,getUserSettings:v,createUserFromSessionUser:m,getEventsByUserId:y,createCalendarMocks:g,createCalendarEvent:b,removeCalendarEventById:w,getEventById:f,initializeEnums:h};return S}),n("services/dataservices/contactservice",["services/session","config.services","services/entityfinder"],function(e,n,a){function r(t,a,r){function i(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");if(c(),a){var s,o;r?(o="POST",s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts","ContactCard")):(o="PUT",s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+a.Id,"ContactCard"));var d={};d.Contact=a,d=JSON.stringify(d);var p=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:o,$encoding:"JSON",$data:d});return t.executeQuery(p).then(i).fail(l)}}function i(e,t){t.removeAll();var n=t();e().length>0&&ko.utils.arrayPushAll(n,e())}function s(e){c(),e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(e.entityAspect.rejectChanges(),e.isNew()||(i(e.originalContactSubTypes,e.contactSubTypes),i(e.originalPreferredTimesOfDayIds,e.preferredTimesOfDayIds),i(e.originalPreferredDaysOfWeekIds,e.preferredDaysOfWeekIds),i(e.originalLanguages,e.languages),i(e.originalModes,e.modes),i(e.originalEmails,e.emails),i(e.originalPhones,e.phones),i(e.originalAddresses,e.addresses),e.entityAspect.setUnchanged()))}function o(e,t,n){if(c(),!e)throw new Error("[manager] cannot be a null parameter");t||(t="ContactCard");var a=breeze.EntityQuery.from(t).toType(t);if(n){var r=[];if(ko.utils.arrayForEach(n,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}}return e.executeQueryLocally(a)}function d(t,a,r,i,s){function o(e){var t=e.results;if(i){var n=e.httpResponse.data.TotalCount;void 0!=n&&i(n)}return a?void a(t):t}if(!t)throw new Error("[manager] cannot be a null parameter");c();var d={ContactTypeIds:r.contactTypeIds,ContactSubTypeIds:r.contactSubTypeIds,ContactStatuses:r.contactStatuses,FirstName:r.firstName,LastName:r.lastName,FilterType:r.filterType?r.filterType:null,Take:r.take,Skip:r.skip};s||(s="ContactCard"),endPoint=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"SearchContacts",s),d=JSON.stringify(d);var p=breeze.EntityQuery.from(endPoint.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:d}).toType(s);return t.executeQuery(p).then(o).fail(l)}function l(e){c(),console.log("Error - ",e);var t=p.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),p.alerts.push(t)}function c(){p||(p=t("services/datacontext"))}var p,u=(ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),{saveContactCard:r,getContacts:d,getLocalContacts:o,cancelAllChangesToContactCard:s});return u}),n("services/dataservices/lookupsservice",["models/base","config.services","services/session"],function(e,n,a){function r(e,t,r,i){function o(e){var t=e.results;return r(t)}var d;a&&a.currentUser&&(d=new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Lookup/"+t,t));var l=breeze.EntityQuery.from(d.ResourcePath).toType(d.EntityType);return e.executeQuery(l).then(o).fail(s)}function i(e,t,r,i){function o(e){var t=e.results;return r(t)}var d;a&&a.currentUser&&(d=new n.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Lookup/Details/"+t,t));var l=breeze.EntityQuery.from(d.ResourcePath).toType(d.EntityType);return e.executeQuery(l).then(o).fail(s)}function s(e){o(),console.log("Error - ",e);var t=d.createEntity("Alert",{result:0,reason:"Load lookups failed!"});t.entityAspect.acceptChanges(),d.alerts.push(t)}function o(){d||(d=t("services/datacontext"))}var d,l={getLookup:r,getNoteLookup:i};return l}),n("services/dataservices/goalsservice",["services/session","config.services","services/entityfinder"],function(e,n,a){function r(t,a,r,i,s){p();var o="Patient/"+i+"/Goal";s&&(o+="/"+s+"/"+r),o+="/Initialize";var d=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),o,r),l={},u=breeze.EntityQuery.from(d.ResourcePath).toType(r).withParameters(l);return t.executeQuery(u).fail(c)}function i(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Goal/"+a.Id+"/Update","Goal");if(a){var s={};s.Goal=a,s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Goal");return t.executeQuery(o).then(r).fail(c)}}function s(t,a,r){function i(e){e.results[0];return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+a.PatientGoalId+"/Intervention/"+a.Id+"/Update","Goal");if(a){var o={};o.Intervention=a,o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Intervention");return t.executeQuery(d).then(i).fail(c)}}function o(t,a,r){function i(e){e.results[0];return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+a.PatientGoalId+"/Task/"+a.Id+"/Update","Goal");if(a){var o={};o.Task=a,o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Task");return t.executeQuery(d).then(i).fail(c)}}function d(t,a,r){function i(e){e.results[0];return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Goal/"+a.PatientGoalId+"/Barrier/"+a.Id+"/Update","Goal");if(a){var o={};o.Barrier=a,o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("Barrier");return t.executeQuery(d).then(i).fail(c)}}function l(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.patientId()+"/Goal/"+a.id()+"/Delete","Goal"),s={};s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return t.executeQuery(o).then(r).fail(c)}function c(e){p(),console.log("Error - ",error);var t=h.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),h.alerts.push(t)}function p(){h||(h=t("services/datacontext"))}function u(e,t,n){function a(e){var n=e.results;return t?t(n):n}function r(e){console.log(e),p(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=h.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),h.alerts.push(n),!1}if(p(),!e)throw new Error("[manager] cannot be a null parameter");var i={};if(n)i=n;else var i={};var s={};s.PatientId=n.PatientId,s.AssignedToId=n.AssignedToId,s.CreatedById=n.CreatedById,s.FromDate=n.FromDate,s.StatusIds=n.StatusIds,s=JSON.stringify(s);var o=breeze.EntityQuery.from(y().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Intervention");return e.executeQuery(o).then(a).fail(r)}function v(e,t,n){if(p(),!e)throw new Error("[manager] cannot be a null parameter");var a=breeze.EntityQuery.from("Interventions").toType("Intervention");n&&(a=a.orderBy(n));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}return e.executeQueryLocally(a)}function m(e,t,n){function a(e){var n=e.results;return t?t(n):n}function r(e){console.log(e),p(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=h.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),h.alerts.push(n),!1}if(p(),!e)throw new Error("[manager] cannot be a null parameter");var i={};if(n)i=n;else var i={};var s={};s.PatientId=n.PatientId,s.AssignedToId=n.AssignedToId,s.CreatedById=n.CreatedById,s.FromDate=n.FromDate,s.StatusIds=n.StatusIds,s=JSON.stringify(s);var o=breeze.EntityQuery.from(f().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("Task");return e.executeQuery(o).then(a).fail(r)}function g(e,t,n){if(p(),!e)throw new Error("[manager] cannot be a null parameter");var a=breeze.EntityQuery.from("Tasks").toType("Task");n&&(a=a.orderBy(n));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}return e.executeQueryLocally(a)}var h,y=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Goal/Interventions","Intervention",null):""}),f=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Goal/Tasks","Task",null):""}),b={initializeEntity:r,saveGoal:i,saveIntervention:s,saveTask:o,saveBarrier:d,deleteGoal:l,getInterventions:u,getInterventionsQuery:v,getTasks:m,getTasksQuery:g};return b}),n("services/dataservices/notesservice",["services/session","config.services"],function(e,n){function a(t,a,r){function i(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");var s="";d();var l,c="POST",p=!1;if(!isNaN(a.Id)&&Number(a.Id)<1?(p=!0,r&&"utilization"===r.toLowerCase()?(a.Id=null,l=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Notes/Utilizations","Utilization"),s="Note"):(l=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Note/Insert","Note"),s="Note")):(r&&"utilization"===r.toLowerCase()?(l=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Notes/Utilizations/"+String(a.Id),"Utilization"),
s="Note"):(l=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Note/"+String(a.Id),"PatientNote"),s="Note"),c="PUT"),a){var u={};u[l.EntityType]=a,u=JSON.stringify(u);var v=breeze.EntityQuery.from(l.ResourcePath).toType("Note").withParameters({$method:c,$encoding:"JSON",$data:u});return t.executeQuery(v).then(i).fail(o)}}function r(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");d();var i="POST",s=null;a.type()&&"utilization"===a.type().name().toLowerCase()?(s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Notes/Utilizations/"+a.id(),"Note"),i="DELETE"):s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.patientId()+"/Note/"+a.id()+"/Delete","Note");var l={};l=JSON.stringify(l);var c=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:i,$encoding:"JSON",$data:l});return t.executeQuery(c).then(r).fail(o)}function i(t,a,r,i,s){function o(e){var t=e.results;return s?s(t):t}function l(e){console.log(e),d(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=p.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),p.alerts.push(n),!1}if(i&&"utilization"===i.toLowerCase()){if(d(),!t)throw new Error("[manager] cannot be a null parameter");var c=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/Notes/Utilizations/"+a,"Note"),u=breeze.EntityQuery.from(c.ResourcePath).withParameters({$method:"GET",$encoding:"JSON"}).toType("Note");return t.executeQuery(u).then(o).fail(l)}}function s(t,a,r){function i(e){return e.results&&e.results.length>0?e.results[0]:e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");d();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Scheduling/ToDo/"+r,"ToDo");if(a){var l={};l.ToDo=a,l=JSON.stringify(l);var c=breeze.EntityQuery.from(s.ResourcePath).toType("ToDo").withParameters({$method:"POST",$encoding:"JSON",$data:l});return t.executeQuery(c).then(i).fail(o)}}function o(e){d(),console.log("Error - ",e);var t=p.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),p.alerts.push(t)}function d(){p||(p=t("services/datacontext"))}function l(e,t,n,a){function r(e){var n=e.results;if(a){var r=e.httpResponse.data.TotalCount;void 0!=r&&a(r)}return t?t(n):n}function i(e){console.log(e),d(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=p.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),p.alerts.push(n),!1}if(d(),!e)throw new Error("[manager] cannot be a null parameter");var s={};if(n)s=n;else var s={};var o={};o.PatientId=n.PatientId,o.AssignedToId=n.AssignedToId,o.NotAssignedToId=n.NotAssignedToId,o.CreatedById=n.CreatedById,o.FromDate=n.FromDate,o.StatusIds=n.StatusIds,o.CategoryIds=n.CategoryIds,o.PriorityIds=n.PriorityIds,o.Skip=n.Skip,o.Take=n.Take,o.Sort=n.Sort,o=JSON.stringify(o);var l=breeze.EntityQuery.from(u().ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("ToDo");return e.executeQuery(l).then(r).fail(i)}function c(e,t,n){if(d(),!e)throw new Error("[manager] cannot be a null parameter");var a=breeze.EntityQuery.from("ToDo").toType("ToDo");n&&(a=a.orderBy(n));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}return e.executeQueryLocally(a)}var p,u=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Scheduling/ToDos","ToDo",null):""}),v={saveNote:a,getNote:i,deleteNote:r,saveToDo:s,getToDos:l,getToDosQuery:c};return v}),n("services/dataservices/observationsservice",["services/session","config.services"],function(e,n){function a(t){d();var a=ko.observableArray(),r=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"/Observations","Observation");return l.getEntityList(a,r.EntityType,r.ResourcePath,null,null,!0)}function r(t,a){function r(){return ko.utils.arrayForEach(i(),function(e){e.typeId(a)}),!0}d();var i=ko.observableArray(),s="533d8278d433231deccaa62d"!==a?"/MatchLibrary/false":"/MatchLibrary/",o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"/Observation/Type/"+a+s,"Observation");return l.getEntityList(i,o.EntityType,o.ResourcePath,null,null,!0).then(r)}function i(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");d();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/Observation/Update","PatientObservation");if(a){var s={};s.PatientObservations=a,s=JSON.stringify(s);var l=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return t.executeQuery(l).then(r).fail(o)}}function s(t,a,r,i,s,c){function p(e){return l.observationsSaving(!1),a(e.results[0]),e}d(),l.observationsSaving(!0);var u="Patient/"+s+"/Observation/"+c;u+="533d8278d433231deccaa62d"!==i?"":"/Problem/Initialize";var v=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),u,r),m=breeze.EntityQuery.from(v.ResourcePath).toType(r);return t.executeQuery(m).then(p).fail(o)}function o(e){l.observationsSaving(!1),console.log(e)}function d(){l||(l=t("services/datacontext"))}var l,c={getObservations:a,getObservationsByTypeId:r,saveObservations:i,initializeObservation:s};return c}),n("services/dataservices/caremembersservice",["services/session","config.services"],function(e,n){function a(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+a.ContactId+"/CareTeams","CareTeam");if(a){var s={};s.CareTeam=a,s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("CareTeam");return t.executeQuery(o).then(r).fail(c)}}function r(t,a,r,i){function s(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+i+"/CareTeams/"+r+"/CareTeamMembers","CareMember"),d="PUT";if(!r)throw new Error("saveCareTeamMember must have [teamId]");if(a.Id<0?d="POST":o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+i+"/CareTeams/"+r+"/CareTeamMembers/"+a.Id,"CareMember"),a){var l={};l.CareTeamMember=a,l=JSON.stringify(l);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:d,$encoding:"JSON",$data:l}).toType("CareMember");return t.executeQuery(u).then(s).fail(c)}}function i(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p(),endPoint=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+a.careTeam().contactId()+"/CareTeams/"+a.careTeamId()+"/CareTeamMembers/"+a.id(),"CareMember");var i=breeze.EntityQuery.from(endPoint.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return t.executeQuery(i).then(r).fail(c)}function s(t,a,r){function i(e){if(e.results&&e.results.length>0){var t=e.results[0];return a?a(t):t}}if(!t)throw new Error("[manager] cannot be a null parameter");p(),endPoint=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contacts/"+r+"/CareTeams","CareTeam");var s=breeze.EntityQuery.from(endPoint.ResourcePath).withParameters({$method:"GET",$encoding:"JSON"}).toType("CareTeam");return t.executeQuery(s).then(i).fail(o)}function o(e){p(),console.log("Error - ",e);var t=u.createEntity("Alert",{result:0,reason:"Get Care Team failed!"});t.entityAspect.acceptChanges(),u.alerts.push(t)}function d(t,a,r){function i(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.PatientId+"/CareMember/"+r,"CareMember");if(a){var o={};o.CareMember=a,o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return t.executeQuery(d).then(i).fail(c)}}function l(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");p();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a.patientId()+"/Note/"+a.id()+"/Delete","Note"),s={};s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return t.executeQuery(o).then(r).fail(c)}function c(e){p(),console.log("Error - ",e);var t=u.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),u.alerts.push(t)}function p(){u||(u=t("services/datacontext"))}var u,v={getCareTeam:s,saveCareTeam:a,saveCareTeamMember:r,deleteCareTeamMember:i,saveCareMemberOld:d,deleteNote:l};return v}),n("services/dataservices/patientsservice",["services/session","config.services"],function(e,n){function a(t,a,r){if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=a.Id,s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Update","Patient");if(i){var o={};o.Patient=a,o.Insert=r,a.InsertDuplicate&&(o.InsertDuplicate=!0),o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return t.executeQuery(d).fail(l)}}function r(t,a){function r(e){var t=u.createEntity("Alert",{result:1,reason:"Individual deleted!"});return t.entityAspect.acceptChanges(),u.alerts.push(t),e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=a.id(),s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+i+"/Delete","Patient");if(i){var o={};o=JSON.stringify(o);var d=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:o});return t.executeQuery(d).then(r)}}function i(t,a){function r(e){return a(e.results[0]),e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/Initialize"),s=breeze.EntityQuery.from(i.ResourcePath).toType("Patient");return t.executeQuery(s).then(r).fail(l)}function s(t,a,r){function i(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");if(c(),a){var s=a.join(),o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+r+"/PatientSystems/"+s,"PatientSystem"),d=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return t.executeQuery(d).then(i).fail(l)}}function o(t,a,r){function i(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");if(c(),a&&a.length){var s=a[0].PatientId,o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+s+"/PatientSystems","PatientSystem"),d={};d.PatientSystems=a;var p="PUT";r&&(p="POST"),d=JSON.stringify(d);var u=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:p,$encoding:"JSON",$data:d});return r&&(u=breeze.EntityQuery.from(o.ResourcePath).toType("PatientSystem").withParameters({$method:p,$encoding:"JSON",$data:d})),t.executeQuery(u).then(i).fail(l)}}function d(t,a){function r(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient/"+a+"/SSN");if(a){var s={};s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"GET",$encoding:"JSON",$data:s});return t.executeQuery(o).then(r).fail(l)}}function l(e){c(),console.log("[PatientService] Error - ",e);var t=u.createEntity("Alert",{result:0,reason:"Save failed!"});return t.entityAspect.acceptChanges(),u.alerts.push(t),e}function c(){u||(u=t("services/datacontext"))}function p(t){var n=e.currentUser(),a=n.recentIndividuals();-1!==a.indexOf(t)?(n.recentIndividuals.remove(t),n.recentIndividuals.unshift(t)):n.recentIndividuals.unshift(t)}var u,v={saveIndividual:a,getFullSSN:d,deleteIndividual:r,addPatientToRecentList:p,initializeIndividual:i,savePatientSystems:o,deletePatientSystems:s};return v}),n("services/dataservices/allergiesservice",["services/session","config.services","services/entityfinder"],function(e,n,a){function r(t,a){function r(e){return e.results}if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/allergy","IdName"),s={};s.SearchTerm=a,s.Take=15,s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters(s).toType("AllergySearch");return t.executeQuery(o).then(r).fail(l)}function i(t,a,r,i,s){function o(e){return v.allergySaving(!1),a(e.results[0]),a}c(),v.allergySaving(!0);var d="PatientAllergy/Initialize",p={};p.PatientId=i,p.AllergyId=s;var u=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),d,r),m=breeze.EntityQuery.from(u.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:p}).toType("PatientAllergy");return t.executeQuery(m).then(o).fail(l)}function s(t,a){c();var r="Allergy/Initialize",i={};i.AllergyName=a;var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),r,"AllergySearch"),o=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:i}).toType("AllergySearch");return t.executeQuery(o).fail(l)}function o(t,a){if(!t)throw new Error("[manager] cannot be a null parameter");c();var r=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientAllergy/Update");if(a){var i={};i.PatientAllergies=a,i=JSON.stringify(i);var s=breeze.EntityQuery.from(r.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:i}).toType("PatientAllergy");return t.executeQuery(s).fail(l)}}function d(t,a){function r(e){var t=v.createEntity("Alert",{result:1,reason:"Allergy deleted!"});return t.entityAspect.acceptChanges(),v.alerts.push(t),e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");c();var i=a.id();if(i){var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient");s.ResourcePath+=a.patientId()+"/PatientAllergy/"+i;var o=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return t.executeQuery(o).then(r)}}function l(e){c(),console.log("Error - ",e);var t=v.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),v.alerts.push(t)}function c(){v||(v=t("services/datacontext"))}function p(e,t,n,a){function r(e){var n=e.results;return t?t(n):n}function i(e){console.log(e),c(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=v.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),v.alerts.push(n),!1}if(c(),!e)throw new Error("[manager] cannot be a null parameter");var s={};if(n)s=n;else var s={};var o={};o.StatusIds=n.StatusIds,o=JSON.stringify(o);var d=breeze.EntityQuery.from(m().ResourcePath+a).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("PatientAllergy");return e.executeQuery(d).then(r).fail(i)}function u(e,t,n){if(c(),!e)throw new Error("[manager] cannot be a null parameter");var a=breeze.EntityQuery.from("PatientAllergy").toType("PatientAllergy");n&&(a=a.orderBy(n));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}return e.executeQueryLocally(a)}var v,m=(ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientAllergy","PatientAllergy",null):""})),g={getRemoteAllergies:r,saveAllergies:o,initializeAllergy:i,initializeNewAllergy:s,getPatientAllergies:p,getPatientAllergiesQuery:u,deletePatientAllergy:d};return g}),n("services/dataservices/medicationsservice",["services/session","config.services","services/entityfinder","services/dataservices/getentityservice"],function(e,n,a,r){function i(t,a){function r(e){return e.results}if(!t)throw new Error("[manager] cannot be a null parameter");u();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/meds","IdName"),s={};s.SearchTerm=a,s.Take=15,s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters(s).toType("MedicationSearch");return t.executeQuery(o).then(r).fail(p)}function s(t,a,r,i,s){function o(e){return e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");u();var d=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Search/meds/fields","MedicationSearch"),l={};l.Name=a,r&&(l.Route=r),i&&(l.Form=i),s&&(l.Strength=s.split(" ")[0]);var c=breeze.EntityQuery.from(d.ResourcePath).withParameters(l).toType("MedicationSearch");return t.executeQuery(c).then(o).fail(p)}function o(t,a,r,i,s){function o(e){return f.medicationSaving(!1),a(e.results[0]),a}u(),f.medicationSaving(!0);var d="PatientMedication/Initialize",l={};l.PatientId=i,l.MedicationId=s;var c=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),d,r),v=breeze.EntityQuery.from(c.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:l}).toType("PatientMedication");return t.executeQuery(v).then(o).fail(p)}function d(t,a){function r(e){return e.httpResponse.data}u();var i="MedicationMap/Initialize",s={MedicationMap:{FullName:a}},o=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),i),d=breeze.EntityQuery.from(o.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s});return t.executeQuery(d).then(r).fail(p)}function l(t,a,r){if(!t)throw new Error("[manager] cannot be a null parameter");u();var i=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp/Save");if(a){var s={};s.PatientMedSupp=a,r&&(s.Insert=!0),a.RecalculateNDC&&!r&&(s.RecalculateNDC=!0),s=JSON.stringify(s);var o=breeze.EntityQuery.from(i.ResourcePath).withParameters({$method:"POST",$encoding:"JSON",$data:s}).toType("PatientMedication");return t.executeQuery(o).fail(p)}}function c(t,a){function r(e){var t=f.createEntity("Alert",{result:1,reason:"Medication deleted!"});return t.entityAspect.acceptChanges(),f.alerts.push(t),e.httpResponse.data}if(!t)throw new Error("[manager] cannot be a null parameter");u();var i=a.id();if(i){var s=new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient");s.ResourcePath+=a.patientId()+"/PatientMedSupp/"+i;var o=breeze.EntityQuery.from(s.ResourcePath).withParameters({$method:"DELETE",$encoding:"JSON"});return t.executeQuery(o).then(r)}}function p(e){u(),console.log("Error - ",e);var t=f.createEntity("Alert",{result:0,reason:"Save failed!"});t.entityAspect.acceptChanges(),f.alerts.push(t)}function u(){f||(f=t("services/datacontext"))}function v(e,t){return r.getLocalById(e,w().ResourcePath+t,"PatientMedicationFrequency","id",t)}function m(e,t,n){function a(a){if(a&&a.httpResponse&&a.httpResponse.data){var r=a.httpResponse.data;if(r.Id){var i=v(e,r.Id);0===i.length&&e.createEntity("PatientMedicationFrequency",{id:r.Id,name:t,patientId:n,sortOrder:0},breeze.EntityState.Unchanged)}return r}return a}if(t&&n){if(u(),!e)throw new Error("[manager] cannot be a null parameter");var r={PatientMedFrequency:{PatientId:n,Name:t}};r=JSON.stringify(r);var i=breeze.EntityQuery.from(w().ResourcePath+"Insert").withParameters({$method:"POST",$encoding:"JSON",$data:r}).toType("PatientMedicationFrequency");return e.executeQuery(i).then(a).fail(p)}}function g(e,t,n,a){function r(t,n){function a(e){var n=e.results;return t?t(n):n}var r=breeze.Predicate.create("patientId",breeze.FilterQueryOp.Equals,null).or("patientId",breeze.FilterQueryOp.Equals,"").or("patientId",breeze.FilterQueryOp.Equals,n).or("patientId",breeze.FilterQueryOp.Equals,"-1"),i=breeze.EntityQuery.from(w().ResourcePath+n).toType("PatientMedicationFrequency").where(r).orderBy("sortOrder, name");return i=i.using(breeze.FetchStrategy.FromLocalCache),e.executeQuery(i).then(a).fail(s)}function i(e){return n&&ko.utils.arrayForEach(e.results,function(e){e.patientId(n),e.sortOrder(0),e.entityAspect.acceptChanges()}),r(t,n)}function s(e){console.log(e),u(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=f.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),f.alerts.push(n),!1}if(u(),!e)throw new Error("[manager] cannot be a null parameter");if(a){var o=breeze.EntityQuery.from(w().ResourcePath+n).toType("PatientMedicationFrequency");return e.executeQuery(o).then(i).fail(s)}return r(t,n)}function h(e,t,n,a){function r(e){var n=e.results;return t?t(n):n}function i(e){console.log(e),u(),checkForFourOhOne(e);var t="Failed to load "+entityType+" from server.",n=f.createEntity("Alert",{result:0,reason:t});return n.entityAspect.acceptChanges(),f.alerts.push(n),!1}if(u(),!e)throw new Error("[manager] cannot be a null parameter");var s={};if(n)s=n;else var s={};var o={};o.StatusIds=n.StatusIds,o.CategoryIds=n.CategoryIds,o=JSON.stringify(o);var d=breeze.EntityQuery.from(b().ResourcePath+a).withParameters({$method:"POST",$encoding:"JSON",$data:o}).toType("PatientMedication");return e.executeQuery(d).then(r).fail(i)}function y(e,t,n){if(u(),!e)throw new Error("[manager] cannot be a null parameter");var a=breeze.EntityQuery.from("PatientMedication").toType("PatientMedication");n&&(a=a.orderBy(n));var r=[];if(ko.utils.arrayForEach(t,function(e){var t=breeze.Predicate.create(e.Property,e.Operator,e.Value);r.push(t)}),r){var i=breeze.Predicate.and(r);a=a.where(i)}return e.executeQueryLocally(a)}var f,b=(ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ContactCard"):""}),ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp","PatientMedication",null):""})),w=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"PatientMedSupp/Frequency","PatientMedicationFrequency"):""}),k={getRemoteMedications:i,saveMedication:l,initializeMedication:o,initializeNewMedication:d,getPatientMedications:h,getPatientFrequencies:g,saveCustomFrequency:m,getRemoteMedicationFields:s,getPatientMedicationsQuery:y,deletePatientMedication:c};return k}),n("services/datacontext",["services/session","services/jsonResultsAdapter","models/base","config.services","services/dataservices/getentityservice","models/programs","models/lookups","models/contacts","models/goals","models/notes","models/observations","models/allergies","models/medications","services/dataservices/programsservice","services/entityfinder","services/usercontext","services/dataservices/contactservice","services/entityserializer","services/dataservices/lookupsservice","services/dataservices/goalsservice","services/dataservices/notesservice","services/dataservices/observationsservice","services/dataservices/caremembersservice","services/dataservices/patientsservice","services/dataservices/allergiesservice","services/dataservices/medicationsservice","services/local.collections","services/dateHelper"],function(e,t,n,a,r,i,s,o,d,l,c,p,u,v,m,g,h,y,f,b,w,k,S,T,x,P,D,N){function C(e,t){var n=this;n.Message=ko.observable(e),n.Showing=ko.observable(t)}function I(){var e=breeze.config.getAdapterInstance("ajax","jQuery");e.defaultSettings={headers:{Token:Wt()}};var t=breeze.config.initializeAdapterInstance("dataService","webApi",!0);t.defaultSettings={headers:{Token:Wt()}},breeze.ajaxpost()}function O(e,t){return tn.createEntity(e,t)}function E(e,t,n,a){return b.initializeEntity(tn,e,t,n,a)}function A(e,t){var n=tn.metadataStore.getEntityType(e),a=n.createInstance(t);return a}function M(t){var n,a=e.currentUser(),r=a&&e.currentUser().settings?e.currentUser().settings():null;return r&&r.hasOwnProperty(t)&&(n=r[t]),n}function F(){I();var t=Q.all([ue(),sn(e.currentUser,"/1.0/"+e.currentUser().contracts()[0].number()+"/settings",Wt()),R(),B(),V(),U(),z(),_(),q(),Y(),j(),G(),K(),W(),J(),Z(),ee(),H(),ie(),de(),le(),X(),re(),pe(),L()]).then(te);return t}function R(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"System","System");return hn(fn.enums.systems,t.EntityType,t.ResourcePath,null,null,!0)}}function L(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"ContactTypeLookups","ContactTypeLookup");return hn(D.contactTypesTree,t.EntityType,t.ResourcePath,null,null,!0).then(function(){})}}function V(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/problems","Problem");return hn(null,t.EntityType,t.ResourcePath,null,null,!0)}}function B(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Lookup/Details/MaritalStatus","MaritalStatus");return hn(fn.enums.maritalStatuses,t.EntityType,t.ResourcePath,null,null,!0)}}function U(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort");return hn(null,t.EntityType,t.ResourcePath,null,null,!0)}}function z(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"programs/active","ContractProgram");return hn(null,t.EntityType,t.ResourcePath,null,null,!0)}}function _(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timesofdays","TimeOfDay");return hn(fn.enums.timesOfDay,t.EntityType,t.ResourcePath,null,null,!0)}}function q(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/Reason","PatientStatusReason");return hn(fn.enums.patientStatusReasons,t.EntityType,t.ResourcePath,null,null,!0)}}function Y(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/timezones","TimeZone");return hn(fn.enums.timeZones,t.EntityType,t.ResourcePath,null,null,!0,null,"name")}}function H(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/objectives","ObjectiveLookup");return hn(fn.enums.objectives,t.EntityType,t.ResourcePath,null,null,!0)}}function j(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/states","State");return hn(fn.enums.states,t.EntityType,t.ResourcePath,null,null,!0)}}function G(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/languages","Language");return hn(fn.enums.languages,t.EntityType,t.ResourcePath,null,null,!0)}}function K(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commmodes","CommunicationMode");return hn(fn.enums.communicationModes,t.EntityType,t.ResourcePath,null,null,!0).then(ce)}}function W(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"lookup/commtypes","CommunicationType");return hn(fn.enums.communicationTypes,t.EntityType,t.ResourcePath,null,null,!0).then(ce)}}function X(){if(e.currentUser()&&0!==e.currentUser().contracts().length){var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contact/CareManagers","CareManager");return hn(fn.enums.careManagers,t.EntityType,t.ResourcePath,null,null,!0)}}function J(){return e.currentUser()?(f.getNoteLookup(tn,"NoteMethod",fn.enums.noteMethods,!0),f.getNoteLookup(tn,"NoteOutcome",fn.enums.noteOutcomes,!0),f.getNoteLookup(tn,"NoteWho",fn.enums.noteWhos,!0),f.getNoteLookup(tn,"NoteSource",fn.enums.noteSources,!0),f.getLookup(tn,"NoteType",fn.enums.noteTypes,!0),f.getNoteLookup(tn,"VisitType",fn.enums.visitTypes,!0),f.getNoteLookup(tn,"UtilizationSource",fn.enums.utilizationSources,!0),f.getNoteLookup(tn,"Disposition",fn.enums.dispositions,!0),f.getNoteLookup(tn,"UtilizationLocation",fn.enums.utilizationLocations,!0)):void 0}function Z(){return e.currentUser()?(f.getLookup(tn,"FocusArea",fn.enums.focusAreas,!0),f.getLookup(tn,"Source",fn.enums.sources,!0),f.getLookup(tn,"BarrierCategory",fn.enums.barrierCategories,!0),f.getLookup(tn,"ToDoCategory",fn.enums.toDoCategories,!0),f.getLookup(tn,"InterventionCategory",fn.enums.interventionCategories,!0)):void 0}function ee(){e.currentUser()&&(f.getLookup(tn,"MedSuppType",fn.enums.medSuppTypes,!0),f.getLookup(tn,"FreqHowOften",fn.enums.freqHowOftens,!0),f.getLookup(tn,"Frequency",fn.enums.frequency,!0),f.getLookup(tn,"FreqWhen",fn.enums.freqWhens,!0),f.getLookup(tn,"DurationUnit",fn.enums.durationUnits,!0),f.getNoteLookup(tn,"RefusalReason",fn.enums.refusalReasons,!0),f.getNoteLookup(tn,"MedicationReview",fn.enums.medicationReviews,!0))}function te(){var e=Q.all([ae(),ne()]);return e}function ne(){function e(e,t){function n(e,n){return t&&"other"===e.name().toLowerCase()?1:e.name()>n.name()?1:n.name()>e.name()?-1:0}return e.sort(n)}fn.enums.visitTypes(e(fn.enums.visitTypes,!0)),fn.enums.utilizationSources(e(fn.enums.utilizationSources,!0)),fn.enums.dispositions(e(fn.enums.dispositions,!0)),fn.enums.utilizationLocations(e(fn.enums.utilizationLocations,!0))}function ae(){ko.utils.arrayForEach(fn.enums.frequency(),function(e){tn.createEntity("PatientMedicationFrequency",{id:e.id(),name:e.name(),sortOrder:0},breeze.EntityState.Unchanged)}),tn.createEntity("PatientMedicationFrequency",{id:-1,name:"-Add New-",sortOrder:1},breeze.EntityState.Unchanged)}function re(){function t(){e.currentUser().recentIndividuals([]),ko.utils.arrayForEach(n(),function(t){e.currentUser().recentIndividuals.push(t)})}var n=ko.observableArray(),r=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Contact/"+e.currentUser().userId()+"/RecentPatients","Patient");fn.getEntityList(n,r.EntityType,r.ResourcePath,null,null,!1).then(t)}function ie(){return e.currentUser()?f.getLookup(tn,"ObservationType",D.enums.observationTypes,!0).then(function(){se();var t=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Observation/States","ObservationState");return hn(D.enums.observationStates,t.EntityType,t.ResourcePath,null,null,!0)}):void 0}function se(){zt||oe()}function oe(){k.getObservations(tn),zt=!0}function de(){return e.currentUser()?(f.getLookup(tn,"CareTeamFrequency",D.enums.careMemberFrequency,!0),f.getLookup(tn,"CareMemberType",D.enums.careMemberTypes,!0)):void 0}function le(){return e.currentUser()?(f.getLookup(tn,"AllergyType",D.enums.allergyTypes,!0),f.getLookup(tn,"Severity",D.enums.severities,!0),f.getNoteLookup(tn,"AllergySource",D.enums.allergySources,!0),f.getLookup(tn,"Reaction",D.enums.reactions,!0)):void 0}function ce(){if(0===D.enums.communicationModes().length||0===D.enums.communicationTypes().length||Zt)return!1;var e="",t="",n="",a="";return ko.utils.arrayForEach(D.enums.communicationModes(),function(r){"Phone"===r.name()?e=r.id():"Email"===r.name()?t=r.id():"Text"===r.name()?a=r.id():"Mail"===r.name()&&(n=r.id());
}),ko.utils.arrayForEach(D.enums.communicationTypes(),function(r){var i=ko.utils.arrayFirst(r.commModeIds(),function(t){return t.id()===e});i&&D.enums.phoneTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===t});i&&D.enums.emailTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===a});i&&D.enums.textTypes.push(r);var i=ko.utils.arrayFirst(r.commModeIds(),function(e){return e.id()===n});i&&D.enums.addressTypes.push(r)}),Zt=!0,!0}function pe(){d.createMocks(tn);var e=tt();nt(e)}function ue(){s.initializeEnums(tn),g.initializeEnums(tn),fn.getEntityList(fn.enums.priorities,"Priority","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.patientStatuses,"PatientStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.systemStatus,"SystemStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.patientSystemStatus,"PatientSystemStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.goalTypes,"GoalType","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.goalTaskStatuses,"GoalTaskStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.barrierStatuses,"BarrierStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.interventionStatuses,"InterventionStatus","fakeEndPoint",null,null,!1),fn.getEntityList(D.enums.observationDisplays,"ObservationDisplay","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.allergyStatuses,"AllergyStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.medicationStatuses,"MedicationStatus","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.medicationCategories,"MedicationCategory","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.deceasedStatuses,"Deceased","fakeEndPoint",null,null,!1),fn.getEntityList(fn.enums.careMemberStatuses,"CareMemberStatus","fakeEndPoint",null,null,!1)}function ve(){breeze.NamingConvention.camelCase.setAsDefault(),breeze.config.initializeAdapterInstance("ajax","jQuery",!0);var e=new breeze.EntityManager({dataService:en});return n.initialize(e.metadataStore),s.initialize(e.metadataStore),i.initialize(e.metadataStore),o.initialize(e.metadataStore),d.initialize(e.metadataStore),l.initialize(e.metadataStore),c.initialize(e.metadataStore),p.initialize(e.metadataStore),u.initialize(e.metadataStore),e}function me(e,t,n){var a,r=n?n:"Loading";return t&&(a=ko.observable(new C(r+" "+e+"...",t)),ye(a)),a}function ge(e,t){t&&_t(!1),fe(e)}function he(e){throw at(e),new Error("Could not complete query")}function ye(e){Xt.push(e)}function fe(e){-1!==Xt.indexOf(e)&&setTimeout(function(){Xt.remove(e)},500)}function be(t,n,r,i){function s(e){at(e);var t=fn.createEntity("Alert",{result:"0",reason:"Save failed!"});t.entityAspect.acceptChanges(),D.alerts.push(t),fe(o)}var o=me("Individual",!0,"Saving"),d=new a.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient"),l=ko.unwrap(t),c=l.id(),p=a.remoteServiceName+"/"+d.ResourcePath+c+"/"+n;(r||0===r)&&(p=p+"/"+r);var u={};return $.each(i,function(e,t){u[t.Property]=t.Value}),$.ajax({url:p,cache:!1,dataType:"json",type:"POST",headers:{Token:Wt()},data:u,success:function(e){return l.entityAspect.acceptChanges(),ge(o),m.searchForEntities(e)}}).fail(s)}function we(e){function t(t){return tn.detachEntity(e),ge(a),setTimeout(function(){location.reload()},2e3),!0}function n(e){var t=fn.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),D.alerts.push(t),at(e),fe(a),new Error("Delete failed")}var a=me("Individual",!0,"Deleting");T.deleteIndividual(tn,e).then(t).fail(n)}function ke(e){function t(t){return t.httpResponse.data.Outcome&&0==t.httpResponse.data.Outcome.Result?(e.isDuplicate(!0),void ge(a)):(e.isDuplicate(!1),e.isNew(!1),e.fullSSN()&&(e.lastFourSSN(e.fullSSN().substr(e.fullSSN().length-4)),e.fullSSN(null)),e.entityAspect.acceptChanges(),St(e),kt(e,"ContactCard"),kt(e,"ContactSearch"),kt(e,"ContactCarememberSearch"),ge(a),!0)}function n(t){e.entityAspect.rejectChanges(),at(t);var n=fn.createEntity("Alert",{result:"0",reason:"Save failed!"});n.entityAspect.acceptChanges(),D.alerts.push(n),console.log(t),fe(a)}var a=me("Individual",!0,"Saving");e.isNew()&&!e.dataSource()&&e.dataSource("Engage");var r,i=e.isNew();return r=y.serializeIndividual(e,tn),T.saveIndividual(tn,r,i).then(t).fail(n)}function Se(e){function t(e){return e}return T.initializeIndividual(tn,e).then(t)}function Te(e,t){var n=me("Program",!0,"Removing");return v.removeProgram(tn,e.id(),e.name(),e.patientId(),t).then(ge(n)).fail(he)}function xe(e,t,n,a){function r(t){if(t.httpResponse.data&&t.httpResponse.data.PlanElems&&t.httpResponse.data.PlanElems.Actions){var n=ko.utils.arrayFirst(t.httpResponse.data.PlanElems.Actions,function(t){return t.Id===e.id()});e.completedBy(n.CompletedBy)}if(ge(i),m.searchForProblems(t.httpResponse.data),t.results&&m.searchForLocalCollectionEntities(t.results),_t(!1),e.entityAspect.acceptChanges(),e.completed()&&5!==e.elementState())e.elementState(5);else if(4===e.elementState()){var a=fn.createEntity("Alert",{result:"warning",reason:"Progress saved"});a.entityAspect.acceptChanges(),D.alerts.push(a)}ko.utils.arrayForEach(e.steps(),function(e){e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.responses(),function(e){e.entityAspect.acceptChanges()})}),e.module().entityAspect.acceptChanges(),e.isSaving(!1)}var i=me("Action",!0,"Saving");return _t(!0),e.entityAspect.acceptChanges(),v.saveActionPost(tn,t,n,a).then(r)}function Pe(e){function t(t){ge(n),_t(!1),it("warning","Action has been repeated!"),e.isSaving(!1)}var n=me("Action",!0,"Saving");_t(!0);var a=y.serializeAction(e,fn.manager),r=e.module().program().patientId(),i=e.module().program().id();return v.repeatAction(tn,a,i,r).then(t)}function De(e){var t=v.getRepeatedAction(tn,e);return t}function Ne(e,t,n){var a=me("Assignment",!0,"Saving"),r={Id:e.id(),AssignToId:e.assignToId()};return v.savePlanElemAttrs(tn,r,t,n).then(ge(a))}function Ce(e,t){var n=[];return ko.utils.arrayForEach(D.contactTypesTree(),function(a){(e&&a.group()==e||!e)&&(t&&!a.parentId()||0==t&&a.parentId()||!t)&&n.push(a)}),n}function Ie(e){var t=ko.utils.arrayFilter(D.contactTypesTree(),function(t){return t.id()==e});return t}function Oe(e,t){t.removeAll();var n=t();e().length>0&&ko.utils.arrayPushAll(n,e())}function Ee(t){function n(n){if(n){if(i&&n.Id)t.id(n.Id),t.isNew(!1),t.createdById(e.currentUser().userId()),t.createdOn(new Date);else if(t.updatedById(e.currentUser().userId()),t.updatedOn(new Date),t.patient()){var a=t.patient();a.firstName(t.firstName()),a.lastName(t.lastName()),a.middleName(t.middleName()),a.suffix(t.suffix()),a.gender(t.gender()),a.preferredName(t.preferredName()),a.deceasedId(t.deceasedId()),a.entityAspect.acceptChanges()}var s=n.UpdatedPhone,o=n.UpdatedEmail,d=n.UpdatedAddress;s&&ko.utils.arrayForEach(s,function(e){var n=ko.utils.arrayFirst(t.phones(),function(t){return t.id()===e.OldId});n&&n.id(e.NewId)}),o&&ko.utils.arrayForEach(o,function(e){var n=ko.utils.arrayFirst(t.emails(),function(t){return t.id()===e.OldId});n&&n.id(e.NewId)}),d&&ko.utils.arrayForEach(d,function(e){var n=ko.utils.arrayFirst(t.addresses(),function(t){return t.id()===e.OldId});n&&n.id(e.NewId)}),Oe(t.contactSubTypes,t.originalContactSubTypes),Oe(t.preferredTimesOfDayIds,t.originalPreferredTimesOfDayIds),Oe(t.preferredDaysOfWeekIds,t.originalPreferredDaysOfWeekIds),Oe(t.languages,t.originalLanguages),Oe(t.modes,t.originalModes),Oe(t.emails,t.originalEmails),Oe(t.phones,t.originalPhones),Oe(t.addresses,t.originalAddresses),t.entityAspect.acceptChanges(),ge(r)}}var a,r=me("Contact",!0,"Saving"),i=t.isNew();return a=y.serializeContactCard(t,tn),h.saveContactCard(tn,a,i).then(n)}function Ae(e,t){var a=new n.Parameter("id",t,"==");return Me(e,a)}function Me(e,t){return h.getLocalContacts(tn,e,t)}function Fe(e,t,n,a){function r(e){return ge(i),e}var i=me("Contacts",!0,"Loading");return h.getContacts(tn,e,t,n,a).then(r)}function $e(e){function t(t){e.isNew(!1),e.entityAspect.acceptChanges(),ko.utils.arrayForEach(e.tasks(),function(e){e.entityAspect.acceptChanges()}),ko.utils.arrayForEach(e.interventions(),function(e){e.entityAspect.acceptChanges()}),ko.utils.arrayForEach(e.barriers(),function(e){e.isNew(!1),e.entityAspect.acceptChanges()}),ge(n)}var n=me("Goal",!0,"Saving");e.checkAppend(),e.entityAspect.acceptChanges();var a;setTimeout(function(){a=y.serializeGoal(e,tn)},50),setTimeout(function(){return b.saveGoal(tn,a).then(t)},50)}function Re(e){function t(t){-1===D.interventions.indexOf(e)&&D.interventions.push(e),e.entityAspect.acceptChanges(),ge(n)}var n=me("Intervention",!0,"Saving");e.checkAppend(),e.entityAspect.acceptChanges();var a;return a=y.serializeIntervention(e,tn),b.saveIntervention(tn,a,e.goal().patientId()).then(t)}function Le(e){function t(t){-1===D.tasks.indexOf(e)&&D.tasks.push(e),ge(n)}var n=me("Task",!0,"Saving");e.checkAppend();var a=e.goal().patientId();e.entityAspect.acceptChanges();var r;return r=y.serializeTask(e,tn),b.saveTask(tn,r,a).then(t)}function Ve(e){function t(t){e.entityAspect.acceptChanges(),ge(n)}var n=me("Barrier",!0,"Saving");e.checkAppend();var a=e.goal().patientId();e.entityAspect.acceptChanges();var r;return r=y.serializeBarrier(e,tn),b.saveBarrier(tn,r,a).then(t)}function Be(e){function t(t){e.entityAspect.rejectChanges(),e.patientId(null),ge(n),tn.detachEntity(e)}var n=me("Goal",!0,"Deleting");return b.deleteGoal(tn,e).then(t)}function Ue(t){function n(e){return s?tn.detachEntity(t):(t.entityAspect.acceptChanges(),r(e.Utilization)),ge(i),!0}function a(e){return s?t.id(e.Id):r(e.PatientNote),t.entityAspect.acceptChanges(),ge(i),!0}function r(e){e.UpdatedOn&&t.updatedOn(e.UpdatedOn),e.UpdatedById&&t.updatedById(e.UpdatedById)}var i=me("Note",!0,"Saving"),s=!1;t.id()<1?(s=!0,t.createdById(e.currentUser().userId()),t.createdOn(new Date),t.dataSource("Engage")):(t.updatedById(e.currentUser().userId()),t.updatedOn(new Date));var o=y.serializeNote(t,tn),d=t.type().name().toLowerCase();switch(d){case"utilization":return w.saveNote(tn,o,d).then(n);default:return w.saveNote(tn,o,d).then(a)}}function ze(e){function t(t){e.entityAspect.rejectChanges(),e.patientId(null),tn.detachEntity(e),ge(n)}var n=me("Note",!0,"Deleting");return w.deleteNote(tn,e).then(t)}function _e(e,t,n,a){return n&&"utilization"===n.toLowerCase()?w.getNote(tn,e,t,n,a):Q()}function qe(e,t){function n(e){return ge(a),e}var a=me("CareTeam",!0,"Loading");return S.getCareTeam(tn,e,t).then(n)}function Ye(e){function t(t){var a=[];if(e&&e.members().length>0&&ko.utils.arrayForEach(e.members(),function(e){e.id()<0&&a.push(e)}),e&&e.id()<0&&a.push(e),ko.utils.arrayForEach(a,function(e){tn.detachEntity(e)}),t.CareTeam&&t.CareTeam.Id){var r=breeze.EntityQuery.from("CareTeam").toType("CareTeam").where("id","==",t.CareTeam.Id).take(1);return e=tn.executeQueryLocally(r),ge(n),e[0]}}var n=me("CareTeam",!0,"Saving");ko.utils.arrayForEach(e.members(),function(e){e.checkAppend(),e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.entityAspect.acceptChanges()}),e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.entityAspect.acceptChanges();var a=y.serializeCareTeam(e,tn);return S.saveCareTeam(tn,a).then(t)}function Qe(t){function n(n){if(n&&n.Id&&t.id()<0){t.id(n.Id),t.createdOn(new Date),t.createdById(e.currentUser().userId());var r=Ae(t.contactId(),"ContactCard");r||O("ContactCard",t.contact());fn.getLocalContacts("ContactSearch")}else t.updatedOn(new Date),t.updatedById(e.currentUser().userId());return t.entityAspect.acceptChanges(),ge(a),!0}var a=me("CareMember",!0,"Saving");if(!t.careTeamId())throw new Error("saveCareTeamMember the member must have a careTeamId set");if(!t.careTeam().contactId())throw new Error("saveCareTeamMember the member must have a careTeam().contactId() set");t.checkAppend();var r=y.serializeCareTeamMember(t,tn);return S.saveCareTeamMember(tn,r,t.careTeamId(),t.careTeam().contactId()).then(n)}function He(e){function t(t){e.entityAspect.rejectChanges(),tn.detachEntity(e),ge(n)}var n=me("CareMember",!0,"Deleting");return S.deleteCareTeamMember(tn,e).then(t)}function je(e,t){function n(t){return t.Id&&e.id(t.Id),e.entityAspect.acceptChanges(),ge(a),!0}var a=me("CareMember",!0,"Saving");e.checkAppend();var r=y.serializeCareMember(e,tn);return S.saveCareMemberOld(tn,r,t).then(n)}function Ge(e,t,n,a,r){function i(e){return e}return k.initializeObservation(tn,e,t,a,r,n).then(i)}function Ke(e){function t(e){return qt(!1),ge(a),!0}var n=ko.observableArray(),a=me("Observations",!0,"Saving");hn(n,"PatientObservation","local","patientId",e,!1);var r=[];return r.PatientId=e,ko.utils.arrayForEach(n(),function(e){if(e.needToSave()){e.entityAspect.acceptChanges();var t=y.serializeObservation(e,tn);r.push(t)}else e.entityAspect.rejectChanges()}),r.length>0?(qt(!0),k.saveObservations(tn,r).then(t)):(ge(a),qt(!1),Q())}function We(e){function t(t){ge(n),Yt(!1);var a=e[0].patient();return r&&ko.utils.arrayForEach(e,function(e){e.id()<0&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),a.patientSystems.valueHasMutated(),!0}var n=me("System Ids",!0,"Saving"),a=[],r=!1;return ko.utils.arrayForEach(e,function(e){if(e.isValid()){var t=e.value().trim();e.value(t),e.entityAspect.acceptChanges();var n=y.serializePatientSystem(e,tn);a.push(n),e.isNew()&&(r=!0)}}),a.length>0?(Yt(!0),T.savePatientSystems(tn,a,r).then(t)):(ge(n),Yt(!1),Q())}function Xe(e){function t(t){return ge(n),Yt(!1),ko.utils.arrayForEach(e,function(e){fn.detachEntity(e)}),a.patientSystems.valueHasMutated(),!0}var n=me("System Ids",!0,"Deleting"),a=null,r=[];return e&&e.length>0?(a=e[0].patient(),ko.utils.arrayForEach(e,function(e){r.push(e.id())}),Yt(!0),T.deletePatientSystems(tn,r,a.id()).then(t)):(ge(n),Yt(!1),Q())}function Je(e){function t(e){return e}return T.getFullSSN(tn,e).then(t)}function Ze(e){return h.cancelAllChangesToContactCard(e)}function et(e){e.entityAspect.rejectChanges()}function tt(){return tn.getChanges()}function nt(e){ko.utils.arrayForEach(e,function(e){e.entityAspect.acceptChanges()})}function at(t){t.status&&401===t.status&&e.logOff()}function rt(e){T.addPatientToRecentList(e)}function it(e,t){var n=fn.createEntity("Alert",{result:e,reason:t});n.entityAspect.acceptChanges(),D.alerts.push(n)}function st(e,t,n){function a(e){ge(r),ko.utils.arrayForEach(e,function(e){e.entityAspect&&-1===D.todos.indexOf(e)&&D.todos.push(e)}),Qt(!1)}var r=me("ToDos",!0,"Loading");return Qt(!0),w.getToDos(tn,e,t,n).then(a)}function ot(e,t,n){return w.getToDosQuery(tn,e,t,n)}function dt(t,n,a,r,i){var s={StatusIds:[1,3],AssignedToId:e.currentUser().userId(),Skip:n,Take:a,Sort:r};return st(t,s,i)}function lt(e,t){var n=ot(e,t);return n=ko.utils.arrayFilter(n,function(e){return!e.isNew()})}function ct(e,t){function n(e){ge(a),ko.utils.arrayForEach(e,function(e){-1===D.interventions.indexOf(e)&&D.interventions.push(e)}),Ht(!1)}var a=me("Interventions",!0,"Loading");return Ht(!0),b.getInterventions(tn,e,t).then(n)}function pt(e,t){return b.getInterventionsQuery(tn,e,t)}function ut(e,t){function n(e){ge(a),ko.utils.arrayForEach(e,function(e){-1===D.tasks.indexOf(e)&&D.tasks.push(e)}),jt(!1)}var a=me("Tasks",!0,"Loading");return jt(!0),b.getTasks(tn,e,t).then(n)}function vt(e,t){return b.getTasksQuery(tn,e,t)}function mt(e,t){function n(t){return e&&e.id()<0&&tn.detachEntity(e),D.todos.indexOf(t)<0&&D.todos.push(t),ge(a),Qt(!1),t}var a=me("ToDo",!0,"Saving");Qt(!0),e.entityAspect.acceptChanges();var r=y.serializeToDo(e,tn);return w.saveToDo(tn,r,t).then(n)}function gt(){var e=ko.utils.arrayFirst(fn.enums.careManagers(),function(e){return""===e.userId()&&"System"===e.firstName()&&"System"===e.preferredName()});return e}function ht(){var t=ko.utils.arrayFirst(fn.enums.careManagers(),function(t){return t.id()===e.currentUser().userId()});return t.preferredName()}function yt(){var t=ko.utils.arrayFirst(fn.enums.careManagers(),function(t){return t.id()===e.currentUser().userId()});return t}function ft(){return e.currentUser().firstName()+" "+e.currentUser().lastName()}function bt(e){var t=[];ht();return ko.utils.arrayForEach(e,function(e){if(e.isEvent()){var n=e.getAsNewEvent();t.push(n)}}),t}function wt(t){function n(e){e.isEvent()?r(e)||a(e):un(e.id())}function a(e){var t=e.getAsNewEvent();pn(t)}function r(e){var t=ln(e.id());return t?(t=e.updateExistingEvent(t),!0):!1}ko.utils.arrayFirst(fn.enums.careManagers(),function(t){return t.id()===e.currentUser().userId()});ko.utils.arrayForEach(t,function(e){n(e)})}function kt(e,t){var n=ko.observable();mn(n,e.contactId(),t),n()&&(n().firstName(e.firstName()),n().lastName(e.lastName()),n().middleName(e.middleName()),n().suffix(e.suffix()),n().gender(e.gender()),n().preferredName(e.preferredName()),n().deceasedId(e.deceasedId()),n().entityAspect.acceptChanges())}function St(e){var t=ko.observable();mn(t,e.id(),"ToDoPatient"),t()&&(t().firstName(e.firstName()),t().lastName(e.lastName()),t().middleName(e.middleName()),t().suffix(e.suffix()),t().preferredName(e.preferredName()))}function Tt(e){tn.detachEntity(e)}function xt(e,t){var n=-1*(e.medications().length+1),a=ko.utils.arrayFirst(fn.enums.allergySources(),function(e){return e.isDefault()}),r=ko.utils.arrayFirst(fn.enums.medSuppTypes(),function(e){return"Prescribed"===e.name()}),i=O("PatientMedication",{id:n,patientId:e.id(),categoryId:1,statusId:1,sourceId:a.id(),type:r});return i.isNew(!0),i.isEditing(!0),i.name(t),i.isCreateNewMedication(!0),i}function Pt(e,t,n){return P.getPatientFrequencies(tn,e,t,n)}function Dt(e,t,n){function a(e){ge(r),Kt(!1)}var r=me("Medications",!0,"Loading");return Kt(!0),P.getPatientMedications(tn,e,t,n).then(a)}function Nt(e){function t(e){return e}return P.getRemoteMedicationFields(tn,e).then(t)}function Ct(e,t){return P.getPatientMedicationsQuery(tn,e,t)}function It(e){return P.initializeNewMedication(tn,e)}function Ot(e){function t(e){return e.isCreateNewMedication()===!0?P.initializeNewMedication(tn,name).then(function(t){return t&&t.MedicationMap&&t.MedicationMap.Id?(e.familyId(t.MedicationMap.Id),r(e)):void 0}):r(e)}function n(e){return P.saveCustomFrequency(tn,e.customFrequency(),e.patientId()).then(function(t){return t&&t.Id&&e.frequencyId(t.Id),e})}function a(e){e.name()&&e.name(e.name().trim()),e.route()&&e.route(e.route().trim()),e.form()&&e.form(e.form().trim()),e.strength()&&e.strength(e.strength().trim()),e.reason()&&e.reason(e.reason().trim()),e.notes()&&e.notes(e.notes().trim()),e.prescribedBy()&&e.prescribedBy(e.prescribedBy().trim()),e.freqQuantity()&&e.freqQuantity(e.freqQuantity().trim()),e.dosage()&&e.dosage(e.dosage().trim()),e.customFrequency()&&e.customFrequency(e.customFrequency().trim())}function r(e){function t(t){return e.isNew()&&setTimeout(function(){e.entityAspect.rejectChanges(),e.patientId(null),tn.detachEntity(e)},500),e.isEditing(!1),Kt(!1),ge(i),t.results[0]}e.entityAspect.acceptChanges();var n=y.serializePatientMedication(e,tn);return n?(Kt(!0),P.saveMedication(tn,n,e.isNew()).then(t)):Q.promise(function(){return ge(i),!0}).then(t)}var i=me("Medication",!0,"Saving");return a(e),e.customFrequency()?n(e).then(t):t(e)}function Et(e){function t(t){return tn.detachEntity(e),ge(a),!0}function n(e){var t=fn.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),D.alerts.push(t),at(e),fe(a),new Error("Delete failed")}var a=me("Medication",!0,"Deleting");return P.deletePatientMedication(tn,e).then(t).fail(n)}function At(e,t,n,a,r){function i(e){var t=ko.utils.arrayFirst(fn.enums.allergySources(),function(e){return e.isDefault()});return ko.unwrap(e).source(t),ko.unwrap(e).statusId(1),ko.unwrap(e).isUserCreated(r),ko.unwrap(e).createdOn(new Date),e}return x.initializeAllergy(tn,e,t,a,n).then(i)}function Mt(e){return Gt(!0),x.initializeNewAllergy(tn,e)}function Ft(e){function t(t){return ko.utils.arrayForEach(e,function(e){e.isNew(!1)}),Gt(!1),ge(a),t.results}var n=[],a=me("Allergy",!0,"Saving");return ko.utils.arrayForEach(e,function(e){e.entityAspect.acceptChanges();var t=y.serializePatientAllergy(e,tn);n.push(t)}),n.length>0?(Gt(!0),x.saveAllergies(tn,n).then(t)):Q.promise(function(){return ge(a),!0}).then(t)}function $t(e){function t(t){return tn.detachEntity(e),ge(a),!0}function n(e){var t=fn.createEntity("Alert",{result:0,reason:"Delete failed!"});throw t.entityAspect.acceptChanges(),D.alerts.push(t),at(e),fe(a),new Error("Delete failed")}var a=me("Allergy",!0,"Deleting");return x.deletePatientAllergy(tn,e).then(t).fail(n)}function Rt(e,t,n){function a(e){ge(r),Gt(!1)}var r=me("Allergies",!0,"Loading");return Gt(!0),x.getPatientAllergies(tn,e,t,n).then(a)}function Lt(e,t){return x.getPatientAllergiesQuery(tn,e,t)}function Vt(e){return x.getRemoteAllergies(tn,e)}function Bt(e,t,n,a){var r=breeze.EntityQuery.from(n).toType(n).where("patientId","==",e).orderBy(a);return tn.executeQueryLocally(r)}var Ut=ko.observable(!1),zt=!1,_t=ko.observable(!1),qt=ko.observable(!1),Yt=ko.observable(!1),Qt=ko.observable(!1),Ht=ko.observable(!1),jt=ko.observable(!1),Gt=ko.observable(!1),Kt=ko.observable(!1),Wt=ko.computed(function(){return e.currentUser()?e.currentUser().aPIToken():"527bbc43231e250c4cb93eb6"}),Xt=ko.observableArray(),Jt=ko.computed(function(){var e=!1;return ko.utils.arrayForEach(Xt(),function(t){t().Showing()&&(e=!0)}),e}),Zt=!1,en=(breeze.EntityQuery,new breeze.DataService({adapterName:"webApi",serviceName:a.remoteServiceName,hasServerMetadata:!1,jsonResultsAdapter:t})),tn=ve(),nn=tn.metadataStore;nn.setEntityTypeForResourceName("ProgramsTest","Program");var an=g.getUserByUserToken,rn=g.logOutUserByToken,sn=g.getUserSettings,on=g.createUserFromSessionUser,dn=g.getEventsByUserId,ln=g.getEventById,cn=g.createCalendarMocks,pn=g.createCalendarEvent,un=g.removeCalendarEventById,vn=function(e,t,n,a,i){entityTypeName=n&&"Patient"===n?"Individual":n;var s=me(entityTypeName,i);return r.getEntityById(tn,s,e,t,n,a,i).then(ge)},mn=function(e,t,n){var a=breeze.EntityQuery.from(n).where("id","==",t).toType(n),r=tn.executeQueryLocally(a);r.length>0&&e(r[0])},gn=function(e,t,n,a,i,s){entityTypeName=n&&"Patient"===n?"Individual":n;var o=me(entityTypeName,i);return r.getMelsEntityById(tn,o,e,t,n,a,i,s).then(ge)},hn=function(e,t,n,a,i,s,o,d,l){entityTypeName=t&&"Patient"===t?"Individual":t;var c=me(entityTypeName,s);return r.getEntityList(tn,c,e,t,n,a,i,s,o,d,l).then(ge)},yn=m.searchForEntities;tn.hasChangesChanged.subscribe(function(e){Ut(e.hasChanges)});var fn={manager:tn,loadingMessages:Xt,loadingMessagesShowing:Jt,checkForEntityLocally:mn,getEntityById:vn,getMelsEntityById:gn,getEntityList:hn,createEntity:O,initializeEntity:E,createComplexType:A,getUserByUserToken:an,getSystemCareManager:gt,getUsercareManagerName:ht,getUserCareManager:yt,getUserFullName:ft,logOutUserByToken:rn,createUserFromSessionUser:on,getEventsByUserId:dn,createCalendarMocks:cn,createCalendarEvent:pn,syncCalendarEvents:wt,getEventById:ln,getCalendarEvents:bt,primeData:F,saveChangesToPatientProperty:be,deleteIndividual:we,saveIndividual:ke,initializePatient:Se,saveAction:xe,repeatAction:Pe,getRepeatedAction:De,removeProgram:Te,savePlanElemAttr:Ne,saveGoal:$e,saveIntervention:Re,saveTask:Le,saveBarrier:Ve,deleteGoal:Be,saveNote:Ue,deleteNote:ze,getNote:_e,saveCareMember:je,saveCareTeamMember:Qe,deleteCareTeamMember:He,saveCareTeam:Ye,getCareTeam:qe,enums:D.enums,alerts:D.alerts,getContactTypes:Ce,getContactTypeLookupById:Ie,saveContactCard:Ee,cancelAllChangesToContactCard:Ze,getContacts:Fe,getLocalContacts:Me,cancelEntityChanges:et,getAllChanges:tt,searchForEntities:yn,checkIfAllObservationsAreLoadedYet:se,initializeObservation:Ge,saveObservations:Ke,savePatientSystems:We,deletePatientSystems:Xe,getFullSSN:Je,addPatientToRecentList:rt,hasChanges:Ut,programsSaving:_t,observationsSaving:qt,patientSystemsSaving:Yt,todosSaving:Qt,interventionsSaving:Ht,tasksSaving:jt,allergySaving:Gt,medicationSaving:Kt,createAlert:it,getToDos:st,getToDosQuery:ot,getToDosRemoteOpenAssignedToMe:dt,getLocalTodos:lt,getInterventions:ct,getInterventionsQuery:pt,getTasks:ut,getTasksQuery:vt,saveToDo:mt,detachEntity:Tt,initializeNewMedication:It,initializeNewPatientMedication:xt,getPatientMedications:Dt,getPatientFrequencies:Pt,getRemoteMedicationFields:Nt,getPatientMedicationsQuery:Ct,saveMedication:Ot,deletePatientMedication:Et,initializeAllergy:At,initializeNewAllergy:Mt,getRemoteAllergies:Vt,saveAllergies:Ft,getPatientAllergies:Rt,deletePatientAllergy:$t,getPatientAllergiesQuery:Lt,getSettingsParam:M,singleSort:Bt};return fn}),n("services/dataservices/stepservice",[],function(){function e(e,t,n,a,r,i){var s=breeze.EntityQuery.from(t).toType(n);return i&&(s=s.orderBy(i)),a&&r&&(s=s.where(a,"==",r)),e.executeQueryLocally(s)}var t=function(e){var t=e.createEntity("Step",{name:"Eligibility"}),t=e.createEntity("QuestionTypeId",{name:"True/False"});e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1}),e.createEntity("Question",{question:"Eligibility",stepMap:t,typeId:1})},n=function(t,n,a){var r=e(t,"Step",entityType);return r.length>0?(n(r),Q.resolve()):void 0},a={createMockStepAndQuestions:t,getStepById:n,getMockStepMap:getMockStepMap};return a}),n("services/logger",["services/analytics"],function(e){var t=!1;return{initialize:function(n,a,r){n&&n.length>0?(t=!0,console.log("google analytics logger initialized: gaId="+n),e.initialize(n,a,r)):console.log("google analytics logger is turned off. (gaId is empty)")},logNavigation:function(n){t&&e.sendPageView(n)}}}),n("plugins/history",["durandal/system","jquery"],function(e,t){function n(e,t,n){if(n){var a=e.href.replace(/(javascript:|#).*$/,"");o.history.replaceState?o.history.replaceState({},document.title,a+"#"+t):e.replace(a+"#"+t)}else e.hash="#"+t}var a=/^[#\/]|\s+$/g,r=/^\/+|\/+$/g,i=/msie [\w.]+/,s=/\/$/,o={interval:50,active:!1};return"undefined"!=typeof window&&(o.location=window.location,o.history=window.history),o.getHash=function(e){var t=(e||o).location.href.match(/#(.*)$/);return t?t[1]:""},o.getFragment=function(e,t){if(null==e)if(o._hasPushState||!o._wantsHashChange||t){e=o.location.pathname+o.location.search;var n=o.root.replace(s,"");e.indexOf(n)||(e=e.substr(n.length))}else e=o.getHash();return e.replace(a,"")},o.activate=function(n){o.active&&e.error("History has already been activated."),o.active=!0,o.options=e.extend({},{root:"/"},o.options,n),o.root=o.options.root,o._wantsHashChange=o.options.hashChange!==!1,o._wantsPushState=!!o.options.pushState,o._hasPushState=!!(o.options.pushState&&o.history&&o.history.pushState);var s=o.getFragment(),d=document.documentMode,l=i.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);o.root=("/"+o.root+"/").replace(r,"/"),l&&o._wantsHashChange&&(o.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,o.navigate(s,!1)),o._hasPushState?t(window).on("popstate",o.checkUrl):o._wantsHashChange&&"onhashchange"in window&&!l?t(window).on("hashchange",o.checkUrl):o._wantsHashChange&&(o._checkUrlInterval=setInterval(o.checkUrl,o.interval)),o.fragment=s;var c=o.location,p=c.pathname.replace(/[^\/]$/,"$&/")===o.root;if(o._wantsHashChange&&o._wantsPushState){if(!o._hasPushState&&!p)return o.fragment=o.getFragment(null,!0),o.location.replace(o.root+o.location.search+"#"+o.fragment),!0;o._hasPushState&&p&&c.hash&&(this.fragment=o.getHash().replace(a,""),this.history.replaceState({},document.title,o.root+o.fragment+c.search))}return o.options.silent?void 0:o.loadUrl(n.startRoute)},o.deactivate=function(){t(window).off("popstate",o.checkUrl).off("hashchange",o.checkUrl),clearInterval(o._checkUrlInterval),o.active=!1},o.checkUrl=function(){var e=o.getFragment();return e===o.fragment&&o.iframe&&(e=o.getFragment(o.getHash(o.iframe))),e===o.fragment?!1:(o.iframe&&o.navigate(e,!1),void o.loadUrl())},o.loadUrl=function(e){var t=o.fragment=o.getFragment(e);return o.options.routeHandler?o.options.routeHandler(t):!1},o.navigate=function(t,a){if(!o.active)return!1;if(void 0===a?a={trigger:!0}:e.isBoolean(a)&&(a={trigger:a}),t=o.getFragment(t||""),o.fragment!==t){o.fragment=t;var r=o.root+t;if(""===t&&"/"!==r&&(r=r.slice(0,-1)),o._hasPushState)o.history[a.replace?"replaceState":"pushState"]({},document.title,r);else{if(!o._wantsHashChange)return o.location.assign(r);n(o.location,t,a.replace),o.iframe&&t!==o.getFragment(o.getHash(o.iframe))&&(a.replace||o.iframe.document.open().close(),n(o.iframe.location,t,a.replace))}return a.trigger?o.loadUrl(t):void 0}},o.navigateBack=function(){o.history.back()},o}),n("plugins/router",["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,a,r,i,s,o){function d(e){return e=e.replace(f,"\\$&").replace(g,"(?:$1)?").replace(h,function(e,t){return t?e:"([^/]+)"}).replace(y,"(.*?)"),new RegExp("^"+e+"$",w?void 0:"i")}function l(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function p(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,a=e.length;a>n;n++)if(e[n]!=t[n])return!1;return!0}function u(e){return e.queryString?e.fragment+"?"+e.queryString:e.fragment}var v,m,g=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,y=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,b=/\/$/,w=!1,k="/",S="/",T=function(){function r(e,t){return e.router&&e.router.parent==t}function o(e){F&&F.config.isActive&&F.config.isActive(e)}function g(t,n,a){e.log("Navigation Complete",t,n);var i=e.getModuleId(M);i&&V.trigger("router:navigation:from:"+i),M=t,o(!1),F=n,o(!0);var s=e.getModuleId(M);switch(s&&V.trigger("router:navigation:to:"+s),r(t,V)||V.updateDocumentTitle(t,n),a){case"rootRouter":k=u(F);break;case"rootRouterWithChild":S=u(F);break;case"lastChildRouter":k=S}m.explicitNavigation=!1,m.navigatingBack=!1,V.trigger("router:navigation:complete",t,n,V)}function y(t,n){e.log("Navigation Cancelled"),V.activeInstruction(F),V.navigate(k,!1),R(!1),m.explicitNavigation=!1,m.navigatingBack=!1,V.trigger("router:navigation:cancelled",t,n,V)}function f(t){e.log("Navigation Redirecting"),R(!1),m.explicitNavigation=!1,m.navigatingBack=!1,V.navigate(t,{trigger:!0,replace:!0})}function w(t,n,a){m.navigatingBack=!m.explicitNavigation&&M!=a.fragment,V.trigger("router:route:activating",n,a,V);var i={canDeactivate:!V.parent};t.activateItem(n,a.params,i).then(function(e){if(e){var i=M,s=r(n,V),o="";if(V.parent?s||(o="lastChildRouter"):o=s?"rootRouterWithChild":"rootRouter",g(n,a,o),s){n.router.trigger("router:route:before-child-routes",n,a,V);var d=a.fragment;a.queryString&&(d+="?"+a.queryString),n.router.loadUrl(d)}i==n&&(V.attached(),V.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?f(t.settings.lifecycleData.redirect):y(n,a);v&&(v.resolve(),v=null)}).fail(function(t){e.error(t)})}function x(t,n,a){var r=V.guardRoute(n,a);r||""===r?r.then?r.then(function(r){r?e.isString(r)?f(r):w(t,n,a):y(n,a)}):e.isString(r)?f(r):w(t,n,a):y(n,a)}function P(e,t,n){V.guardRoute?x(e,t,n):w(e,t,n)}function D(e){return F&&F.config.moduleId==e.config.moduleId&&M&&(M.canReuseForRoute&&M.canReuseForRoute.apply(M,e.params)||!M.canReuseForRoute&&M.router&&M.router.loadUrl)}function N(){if(!R()){var t=$.shift();if($=[],t)if(R(!0),V.activeInstruction(t),V.trigger("router:navigation:processing",t,V),D(t)){var a=n.create();a.forceActiveItem(M),a.settings.areSameItem=L.settings.areSameItem,a.settings.findChildActivator=L.settings.findChildActivator,P(a,M,t)}else t.config.moduleId?e.acquire(t.config.moduleId).then(function(n){var a=e.resolveObject(n);t.config.viewUrl&&(a.viewUrl=t.config.viewUrl),P(L,a,t)}).fail(function(n){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message,n)}):P(L,{viewUrl:t.config.viewUrl,canReuseForRoute:function(){return!0}},t)}}function C(e){$.unshift(e),N()}function I(e,t,n){for(var a=e.exec(t).slice(1),r=0;r<a.length;r++){var i=a[r];a[r]=i?decodeURIComponent(i):null}var s=V.parseQueryString(n);return s&&a.push(s),
{params:a,queryParams:s}}function O(t){V.trigger("router:route:before-config",t,V),e.isRegExp(t.route)?t.routePattern=t.route:(t.title=t.title||V.convertRouteToTitle(t.route),t.viewUrl||(t.moduleId=t.moduleId||V.convertRouteToModuleId(t.route)),t.hash=t.hash||V.convertRouteToHash(t.route),t.hasChildRoutes&&(t.route=t.route+"*childRoutes"),t.routePattern=d(t.route)),t.isActive=t.isActive||s.observable(!1),V.trigger("router:route:after-config",t,V),V.routes.push(t),V.route(t.routePattern,function(e,n){var a=I(t.routePattern,e,n);C({fragment:e,queryString:n,config:t,params:a.params,queryParams:a.queryParams})})}function E(t){if(e.isArray(t.route))for(var n=t.isActive||s.observable(!1),a=0,r=t.route.length;r>a;a++){var i=e.extend({},t);i.route=t.route[a],i.isActive=n,a>0&&delete i.nav,O(i)}else O(t);return V}function A(e){var n=s.unwrap(t.title);n?document.title=e+" | "+n:document.title=e}var M,F,$=[],R=s.observable(!1),L=n.create(),V={handlers:[],routes:[],navigationModel:s.observableArray([]),activeItem:L,isNavigating:s.computed(function(){var e=L(),t=R(),n=e&&e.router&&e.router!=V&&e.router.isNavigating()?!0:!1;return t||n}),activeInstruction:s.observable(null),__router__:!0};a.includeIn(V),L.settings.areSameItem=function(e,t,n,a){return e==t?p(n,a):!1},L.settings.findChildActivator=function(e){return e&&e.router&&e.router.parent==V?e.router.activeItem:null},V.parseQueryString=function(t){var n,a;if(!t)return null;if(a=t.split("&"),0==a.length)return null;n={};for(var r=0;r<a.length;r++){var i=a[r];if(""!==i){var s=i.split(/=(.+)?/),o=s[0],d=s[1]&&decodeURIComponent(s[1].replace(/\+/g," ")),l=n[o];l?e.isArray(l)?l.push(d):n[o]=[l,d]:n[o]=d}}return n},V.route=function(e,t){V.handlers.push({routePattern:e,callback:t})},V.loadUrl=function(t){var n=V.handlers,a=null,r=t,s=t.indexOf("?");if(-1!=s&&(r=t.substring(0,s),a=t.substr(s+1)),V.relativeToParentRouter){var o=this.parent.activeInstruction();r=-1==s?o.params.join("/"):o.params.slice(0,-1).join("/"),r&&"/"==r.charAt(0)&&(r=r.substr(1)),r||(r=""),r=r.replace("//","/").replace("//","/")}r=r.replace(b,"");for(var d=0;d<n.length;d++){var l=n[d];if(l.routePattern.test(r))return l.callback(r,a),!0}return e.log("Route Not Found",t,F),V.trigger("router:route:not-found",t,V),V.parent&&(k=S),i.navigate(k,{trigger:!1,replace:!0}),m.explicitNavigation=!1,m.navigatingBack=!1,!1};var B;return s.isObservable(t.title)&&t.title.subscribe(function(){var e=V.activeInstruction(),t=null!=e?s.unwrap(e.config.title):"";A(t)}),V.updateDocumentTitle=function(e,n){var a=s.unwrap(t.title),r=n.config.title;B&&B.dispose(),r?s.isObservable(r)?(B=r.subscribe(A),A(r())):A(r):a&&(document.title=a)},V.navigate=function(t,n){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):((void 0===n||e.isBoolean(n)&&n||e.isObject(n)&&n.trigger)&&(m.explicitNavigation=!0),(e.isBoolean(n)&&!n||n&&void 0!=n.trigger&&!n.trigger)&&(k=t),i.navigate(t,n))},V.navigateBack=function(){i.navigateBack()},V.attached=function(){V.trigger("router:navigation:attached",M,F,V)},V.compositionComplete=function(){R(!1),V.trigger("router:navigation:composition-complete",M,F,V),N()},V.convertRouteToHash=function(e){if(e=e.replace(/\*.*$/,""),V.relativeToParentRouter){var t=V.parent.activeInstruction(),n=e?t.config.hash+"/"+e:t.config.hash;return i._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return i._hasPushState?e:"#"+e},V.convertRouteToModuleId=function(e){return l(e)},V.convertRouteToTitle=function(e){var t=l(e);return t.substring(0,1).toUpperCase()+t.substring(1)},V.map=function(t,n){if(e.isArray(t)){for(var a=0;a<t.length;a++)V.map(t[a]);return V}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,E(n)},V.buildNavigationModel=function(t){for(var n=[],a=V.routes,r=t||100,i=0;i<a.length;i++){var s=a[i];s.nav&&(e.isNumber(s.nav)||(s.nav=++r),n.push(s))}return n.sort(function(e,t){return e.nav-t.nav}),V.navigationModel(n),V},V.mapUnknownRoutes=function(t,n){var a="*catchall",r=d(a);return V.route(r,function(s,o){var d=I(r,s,o),l={fragment:s,queryString:o,config:{route:a,routePattern:r},params:d.params,queryParams:d.queryParams};if(t)if(e.isString(t))l.config.moduleId=t,n&&i.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var c=t(l);if(c&&c.then)return void c.then(function(){V.trigger("router:route:before-config",l.config,V),V.trigger("router:route:after-config",l.config,V),C(l)})}else l.config=t,l.config.route=a,l.config.routePattern=r;else l.config.moduleId=s;V.trigger("router:route:before-config",l.config,V),V.trigger("router:route:after-config",l.config,V),C(l)}),V},V.reset=function(){return F=M=void 0,V.handlers=[],V.routes=[],V.off(),delete V.options,V},V.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!c(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!c(t.route,"/")&&(t.route+="/"),t.fromParent&&(V.relativeToParentRouter=!0),V.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(""===e.route?e.route=t.route.substring(0,t.route.length-1):e.route=t.route+e.route)}),t.dynamicHash&&(V.on("router:route:after-config").then(function(e){e.routePattern=d(e.route?t.dynamicHash+"/"+e.route:t.dynamicHash),e.dynamicHash=e.dynamicHash||s.observable(e.hash)}),V.on("router:route:before-child-routes").then(function(e,t,n){for(var a=e.router,r=0;r<a.routes.length;r++){var i=a.routes[r],s=t.params.slice(0);i.hash=a.convertRouteToHash(i.route).replace(h,function(e){return s.length>0?s.shift():e}),i.dynamicHash(i.hash)}})),V},V.createChildRouter=function(){var e=T();return e.parent=V,e},V};return m=T(),m.explicitNavigation=!1,m.navigatingBack=!1,m.makeRoutesCaseSensitive=function(){w=!0},m.targetIsThisWindow=function(e){var t=o(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},m.activate=function(t){return e.defer(function(n){if(v=n,m.options=e.extend({routeHandler:m.loadUrl},m.options,t),i.activate(m.options),i._hasPushState)for(var a=m.routes,r=a.length;r--;){var s=a[r];s.hash=s.hash.replace("#","/")}var d=m.options.root&&new RegExp("^"+m.options.root+"/");o(document).delegate("a","click",function(e){if(i._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&m.targetIsThisWindow(e)){var t=o(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(m.explicitNavigation=!0,e.preventDefault(),d&&(t=t.replace(d,"")),i.navigate(t))}}else m.explicitNavigation=!0}),i.options.silent&&v&&(v.resolve(),v=null)}).promise()},m.deactivate=function(){i.deactivate()},m.install=function(){s.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var o=s.utils.unwrapObservable(t())||{};if(o.__router__)o={model:o.activeItem(),attached:o.attached,compositionComplete:o.compositionComplete,activate:!1};else{var d=s.utils.unwrapObservable(o.router||a.router)||m;o.model=d.activeItem(),o.attached=d.attached,o.compositionComplete=d.compositionComplete,o.activate=!1}r.compose(e,o,i)}},s.virtualElements.allowedBindings.router=!0},m}),n("services/navigation",["plugins/router","services/branding","services/logger"],function(e,t,n){function a(t){var n=t.hash;return-1!==n.indexOf("(/:id)")&&(n=n.replace("(/:id)","")),-1!==n.indexOf("#")?e.navigate(n):e.navigate("#"+n)}function r(e){s()!==e&&(s(e),n.logNavigation(i().config.title+"/"+e.title))}var i=ko.computed(function(){return e.activeInstruction()&&!e.isNavigating()?e.activeInstruction():!1}).extend({throttle:1}),s=ko.observable(),o=ko.observable(0),d=(ko.computed(function(){var e=i();e&&e.config&&e.config.settings?0!==e.config.settings.pages.length&&-1===e.config.settings.pages.indexOf(s())&&(r(i().config.settings.pages[o()]),o(0)):!s.peek()&&i()&&(r(i().config.settings.pages[o()]),o(0))}).extend({throttle:1}),ko.computed(function(){return t.currentBrand()})),l=ko.computed(function(){return e.navigationModel()}),c={currentBrand:d,currentRoute:i,currentSubRoute:s,setSubRoute:r,navRoutes:l,setRoute:a,indexOverride:o};return c}),n("services/report.context",["services/datacontext"],function(e){function t(e,t,n){var a=this;a.Property=e,a.Comparator=t,a.Value=n}function n(e,t){var n=breeze.EntityQuery.from(e).toType(e);return $.each(t,function(e,t){n=n.where(t.Property,t.Comparator,t.Value)}),u.executeQueryLocally(n)}function a(e,t,n){var a=this;a.entities=ko.observableArray([]),a.name=e,a.description=t,a.columns=n}function r(e){var t=e,n=d(t.entityType,t.columns);return o(n,t),n}function i(e,t){ko.utils.arrayForEach(t.childEntities,function(n){if(n.onlyFirst){var a=n.entityType;e[a]=d(n.entityType,n.columns,c(t.entityType),e.id)[0],o(e[a],n)}else{var a=n.entityType+"s";e[a]=d(n.entityType,n.columns,c(t.entityType),e.id),o(e[a],n)}})}function s(e,t){t&&t.navProperties&&ko.utils.arrayForEach(t.navProperties,function(t){var n=t.entityType,a=t.propName?t.propName:c(t.entityType);e[n]=l(t.entityType,t.columns,"id",e[a]),o(e[n],t)})}function o(e,t){Array.isArray(e)?ko.utils.arrayForEach(e,function(e){i(e,t),s(e,t)}):(i(e,t),s(e,t))}function d(e,t,n,a){var r="";ko.utils.arrayForEach(t,function(e){r=r+p(e)+","}),r=r.length>0?r.substr(0,r.length-1):"";var i=breeze.EntityQuery.from(e).toType(e).select(r);return a&&(i=i.where(n,"==",a)),u.executeQueryLocally(i)}function l(e,t,n,a){var r="";ko.utils.arrayForEach(t,function(e){r=r+p(e)+","}),r=r.length>0?r.substr(0,r.length-1):"";var i=breeze.EntityQuery.from(e).toType(e).select(r);return a&&(i=i.where(n,"==",a)),u.executeQueryLocally(i)[0]}function c(e){return e.toLowerCase()+"Id"}function p(e){return e.charAt(0).toLowerCase()+e.slice(1)}var u=e.manager,v={clause:t,createDynamicQuery:n,runNewReport:r,report:a};return v}),n("viewmodels/shell/shell",["plugins/router","services/navigation","services/session","services/bindings","services/local.collections","services/datacontext","models/base","config.routes","config.services","services/logger"],function(e,t,n,a,r,i,s,o,d,l){function c(e){b(!1);var n=t.setRoute(e);n?console.log("The route has changed"):console.log("The route has NOT changed")}function p(){e.map(o.routes).buildNavigationModel();var a=window.location.href.indexOf("#ut")>-1;if(y=t.currentRoute.subscribe(function(){b(!1)}),!a){var r=n.getUserFromSession();if(r)return v().then(function(){return u(),e.activate(),!0})}e.activate()}function u(){var e=d.gaId,t=n.currentUser().contracts()[0].number(),a=n.currentUser().userName();l.initialize(e,t,a)}function v(){return i.primeData()}function m(){b(!b())}function g(){P(!P())}function h(t){e.navigateBack()}var y,f=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},b=ko.observable(!1),w=ko.computed(i.loadingMessages),k=ko.computed(function(){var e=w(),t=[];return ko.utils.arrayForEach(e,function(e){t.length<3&&t.push(e)}),t}),S=ko.observable(!1),T=ko.computed(i.loadingMessagesShowing),x=ko.observable(),P=ko.computed(function(){return t.currentRoute()!==!1?"Individual"===t.currentRoute().config.title:!1}),D={showSideBar:b,showQuickAdd:P,compLoadingMessages:k,loadingMessagesShowing:T,currentModal:x,toggleNavVisibility:m,toggleQuickAddShowing:g,activate:p,goBack:h,navigation:t,session:n,title:"Shell",alerts:ko.computed(i.alerts),priorities:ko.computed(i.enums.priorities),genders:ko.computed(i.enums.genders),maritalStatuses:ko.computed(i.enums.maritalStatuses),deceasedStatuses:ko.computed(function(){return i.enums.deceasedStatuses().sort(f)}),protectedStatuses:ko.computed(function(){return[{Id:!1,Name:"No"},{Id:!0,Name:"Yes"}]}),stateList:ko.computed(i.enums.states),phoneTypes:ko.computed(i.enums.phoneTypes),emailTypes:ko.computed(i.enums.emailTypes),daysOfWeek:ko.computed(i.enums.daysOfWeek),timesOfDay:ko.computed(i.enums.timesOfDay),patientStatuses:ko.computed(i.enums.patientStatuses),patientStatusReasons:ko.computed(i.enums.patientStatusReasons),languages:ko.computed(i.enums.languages),timeZones:ko.computed(i.enums.timeZones),addressTypes:ko.computed(i.enums.addressTypes),communicationModes:ko.computed(i.enums.communicationModes),setRoute:c,userMenuOpen:S,initializeLogger:u};return D}),n("viewmodels/admin/concierge/index",["viewmodels/shell/shell","models/base","services/datacontext"],function(e,t,n){function a(){s("viewmodels/admin/widgets/delete.individuals.list")}function r(){function a(n){o().isNew(!0),o().statusId("1"),o().statusDataSource("Engage");var a={title:"Create Individual",entity:o,templatePath:"templates/patient.html",showing:d},r=new t.modal(a);e.currentModal(r),d(!0);var i=d.subscribe(function(){l(!1),i.dispose();var e=o().isDuplicate.subscribe(function(t){if(t){d(!0);var n=o().isDuplicate.subscribe(function(){l(!1),n.dispose(),d(!1),o().entityAspect.acceptChanges()})}e.dispose()})})}n.initializePatient(o).then(a),s(null)}function i(){}var s=ko.observable(),o=ko.observable(),d=ko.observable(!1),l=ko.observable(!1),c={activate:i,activeSecondColumn:s,deleteIndividual:a,createIndividual:r};return c}),n("viewmodels/admin/index",["services/navigation","services/session","config.services","services/datacontext"],function(e,t,n,a){function r(){console.log("Loaded admin index")}var i={activate:r,navigation:e,title:"Admin"};return i}),n("viewmodels/admin/reports/index",["config.services","services/session","services/datacontext","services/report.context"],function(e,t,n,a){function r(e){var t=this;t.name=e}function i(){T()}function s(){x()}function o(){D()}function d(){P()}function l(){ae().length>0&&p(ne())}function c(){ie().length>0&&p(te())}function p(e){Te.data(e),Te("viewmodels/admin/reports/matching.patients")}function u(){ie().length>0&&k(le())}function v(){ie().length>0&&k(se())}function m(){ie().length>0&&k(oe())}function g(){ie().length>0&&k(de())}function h(){ce().length>0&&w(me())}function y(){ce().length>0&&w(pe())}function f(){ce().length>0&&w(ue())}function b(){ce().length>0&&w(ve())}function w(e){Te.data(e),Te("viewmodels/admin/reports/matching.actions")}function k(e){Te.data(e),Te("viewmodels/admin/reports/matching.programs")}function S(){var e=xe(),t=ko.observableArray();n.getEntityList(t,H().EntityType,"gettingLocally",null,null,!1);var a=ko.utils.arrayFilter(t(),function(t){return t.duration()>e?!0:void 0});Te.data(a),Te("viewmodels/admin/reports/matching.programs")}function T(){if(he())alert("Program data already loaded");else{var a=[];ko.utils.arrayForEach(W(),function(e){a.push(parseInt(e.id()))}),ko.utils.arrayForEach(Z(),function(i){function s(){ko.utils.arrayForEach(d(),function(i){function s(){B.remove(o)}if(-1!==a.indexOf(i.elementState())){var o=new r(i.id());B.push(o);var d=new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient/"+i.patientId()+"/Program/"+i.id(),"Program");n.getMelsEntityById(null,null,d.EntityType,d.ResourcePath,!0,null).then(s),ie.push(i)}}),B.remove(o)}var o=new r(i.id());B.push(o);var d=ko.observableArray();n.getEntityList(d,H().EntityType,H().ResourcePath+i.id()+"/Programs",null,null,!0).then(s)}),he(!0)}}function x(){if(ye())alert("Action data already loaded");else{var e=[];ko.utils.arrayForEach(X(),function(t){e.push(parseInt(t.id()))}),ko.utils.arrayForEach(ie(),function(t){var a=new r(t.id());U.push(a);var i=ko.observableArray();ko.utils.arrayForEach(t.modules(),function(s){ko.utils.arrayForEach(s.actions(),function(a){function o(){U.remove(d)}if(-1!==e.indexOf(a.elementState())){var d=new r(a.id());U.push(d),n.getEntityList(i,j().EntityType,j().ResourcePath+"/"+t.patientId()+"/Program/"+t.id()+"/Module/"+s.id()+"/Action/"+a.id(),null,null,!0).then(o),ce.push(a)}}),U.remove(a)})}),ye(!0)}}function P(){be()?alert("Goal data already loaded"):(ko.utils.arrayForEach(Z(),function(e){function t(){ko.utils.arrayForEach(i(),function(e){ae.push(e)}),_.remove(a)}var a=new r(e.id());_.push(a);var i=ko.observableArray();n.getEntityList(i,Y().EntityType,Y().ResourcePath+e.id()+"/Goals",null,null,!0).then(t)}),be(!0))}function D(){fe()?alert("Care Member data already loaded"):(ko.utils.arrayForEach(Z(),function(e){function t(){ko.utils.arrayForEach(i(),function(e){re.push(e)}),z.remove(a)}var a=new r(e.id());z.push(a);var i=ko.observableArray();n.getEntityList(i,Q().EntityType,Q().ResourcePath+e.id()+"/CareMembers",null,null,!0).then(t)}),fe(!0))}function N(){return ge||C(),!0}function C(){function e(){var e=ko.utils.arrayFirst(G(),function(e){return"All individuals"===e.sName()});J(e)}return n.getEntityList(K,"ElementState","fakeEndpoint",null,null,!1,null,"id"),n.getEntityList(G,V().EntityType,V().ResourcePath,null,null,!1,null,"sName").then(e),L=J.subscribe(function(){Z([]),I(),he(!1)}),ge=!0,!0}function I(e){function t(e){}var a={},a=q().Parameters;a.SearchFilter=null,n.getEntityList(Z,q().EntityType,q().ResourcePath,null,J().iD(),!0,a).then(t)}function O(){var e=new a.report;e.name="Individuals by Care Manager",e.description="List of Individuals with Care Manager and Programs",e.columns=[new R("id","Id"),new R("firstName","First Name"),new R("lastName","Last Name"),new R("CareMember.preferredName","Care Manager"),new R("Programs.length","# Programs")],e.queryJson=$.parseJSON('{ "entityType": "Patient", "columns": ["Id", "FirstName", "LastName"], "childEntities": [ { "entityType": "Program", "columns": [ "Id", "Name"], "childEntities": [{ "entityType": "Module", "columns": [ "Id", "Name" ], "childEntities": [{ "entityType": "Action", "columns": [ "Id", "Name" ], "childEntities": []}]}]}, { "entityType": "CareMember", "columns": [ "Id", "PreferredName" ], "childEntities": [], "onlyFirst": true}] }');var t=a.runNewReport(e.queryJson);e.entities(t),F(e)}function E(){var e=new a.report;e.name="Action Count by Individual",e.description="Action Counts by Individual with Care Manager and Programs",e.columns=[new R("id","Id"),new R("preferredName","Name"),new R("CareMemberType.name","Care Manager"),new R("Patient.firstName","Patients First Name")],e.queryJson=$.parseJSON('{ "entityType": "CareMember", "columns": ["Id", "PreferredName", "TypeId"], "navProperties": [ { "entityType": "CareMemberType", "propName": "typeId", "columns": [ "Name" ], "childEntities": [] }, { "entityType": "Patient", "propName": "patientId", "columns": [ "FirstName", "LastName" ], "childEntities": [] } ], "childEntities": [ ] }');var t=a.runNewReport(e.queryJson);e.entities(t),F(e)}function A(){var e=new a.report;e.name=Fe(),e.description=$e(),e.columns=$.parseJSON(Le()),e.queryJson=$.parseJSON(Re());var t=M(e);e.entities(t),F(e)}function M(e){var t=e;t.queryJson||(t=new a.report,t.name=Fe(),t.description=$e(),t.columns=$.parseJSON(Le()),t.queryJson=$.parseJSON(Re()));var n=a.runNewReport(t.queryJson);return n}function F(e){Te.data(e),Te("viewmodels/admin/reports/dynamic.report")}function R(e,t){var n=this;n.name=e,n.displayName=t}var L,V=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort")}),B=ko.observableArray(),U=ko.observableArray(),z=ko.observableArray(),_=ko.observableArray(),q=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:0,Take:5e3})}),Y=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Goal")}),Q=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","CareMember")}),H=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Program")}),j=ko.computed(function(){return new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"Patient","Action")}),G=ko.observableArray(),K=ko.observableArray(),W=ko.observableArray(),X=ko.observableArray(),J=ko.observable(),Z=ko.observableArray(),ee=ko.computed(function(){var e=[];if(0===z().length){var t=Z();e=ko.utils.arrayFilter(t,function(e){var t=ko.utils.arrayFirst(e.careMembers(),function(e){return"Care Manager"===e.type().name()});return!!t})}return e}),te=ko.computed(function(){var e=Z(),t=ko.utils.arrayFilter(e,function(e){return e.programs().length>0});return t}),ne=ko.computed(function(){var e=Z(),t=ko.utils.arrayFilter(e,function(e){return e.goals().length>0});return t}),ae=ko.observableArray(),re=ko.observableArray(),ie=ko.observableArray(),se=ko.computed(function(){var e=ie(),t=ko.utils.arrayFilter(e,function(e){return"In Progress"===e.elementStateModel().name()});return t}),oe=ko.computed(function(){var e=ie(),t=ko.utils.arrayFilter(e,function(e){return"Completed"===e.elementStateModel().name()});return t}),de=ko.computed(function(){var e=ie(),t=ko.utils.arrayFilter(e,function(e){return"Closed"===e.elementStateModel().name()});return t}),le=ko.computed(function(){var e=ie(),t=ko.utils.arrayFilter(e,function(e){return"Not Started"===e.elementStateModel().name()});return t}),ce=ko.observableArray(),pe=ko.computed(function(){var e=ce(),t=ko.utils.arrayFilter(e,function(e){return"In Progress"===e.elementStateModel().name()});return t}),ue=ko.computed(function(){var e=ce(),t=ko.utils.arrayFilter(e,function(e){return"Completed"===e.elementStateModel().name()});return t}),ve=ko.computed(function(){var e=ce(),t=ko.utils.arrayFilter(e,function(e){return"Closed"===e.elementStateModel().name()});return t}),me=ko.computed(function(){var e=ce(),t=ko.utils.arrayFilter(e,function(e){return"Not Started"===e.elementStateModel().name()});return t}),ge=!1,he=ko.observable(!1),ye=ko.observable(!1),fe=ko.observable(!1),be=ko.observable(!1),we=ko.computed(function(){var e=(he(),B());return he()&&0===e.length}),ke=ko.computed(function(){var e=(ye(),U());return ye()&&0===e.length}),Se=ko.computed(function(){var e=z();return fe()&&0===e.length}),Te=ko.observable();Te.data=ko.observableArray();var xe=ko.observable(),Pe=ko.computed(function(){var e=!he(),t=J();return e&&!!t}),De=ko.computed(function(){var e=!ye(),t=J(),n=we();return e&&n&&!!t}),Ne=ko.computed(function(){var e=!be(),t=J();return e&&!!t}),Ce=ko.computed(function(){var e=!fe(),t=J();return e&&!!t}),Ie=ko.observable(!0),Oe=ko.observable(!0),Ee=ko.observable(!0),Ae=ko.observable(!0),Me=ko.observable(!0),Fe=ko.observable(),$e=ko.observable(),Re=ko.observable(),Le=ko.observable(),Ve={patientsList:Z,haveCareManagerPatientsList:ee,cohortsList:G,goalsList:ae,elementStateList:K,selectedActionStateIds:X,selectedProgramStateIds:W,careMembersList:re,programsList:ie,actionsList:ce,inProgressActionsList:pe,completedActionsList:ue,closedActionsList:ve,notStartedActionsList:me,programInfoVisible:Ie,goalInfoVisible:Oe,overviewInfoVisible:Ee,careMemberInfoVisible:Ae,dynamicReportVisible:Me,notStartedProgramsList:le,inProgressProgramsList:se,completedProgramsList:oe,closedProgramsList:de,haveProgramPatientsList:te,haveGoalPatientsList:ne,selectedCohort:J,programsByCohortLoaded:he,careMembersByCohortLoaded:fe,goalsByCohortLoaded:be,programsLoading:B,actionsLoading:U,goalsLoading:_,careMembersLoading:z,activate:N,activeSecondColumn:Te,canLoadProgramData:Pe,canLoadActionData:De,canLoadGoalData:Ne,canLoadCareMemberData:Ce,canShowProgramReport:we,canShowActionReport:ke,programLength:xe,runProgramReport:i,runActionReport:s,runCareMemberReport:o,runGoalReport:d,showProgramResults:S,canShowCareManagerReport:Se,getPatientsByCareManagerReport:O,notStartedProgReport:u,inProgressProgReport:v,completedProgReport:m,closedProgReport:g,notStartedActionReport:h,inProgressActionReport:y,completedActionReport:f,closedActionReport:b,haveGoalPatReport:l,withProgPatReport:c,showPatientList:p,dynamicReportName:Fe,dynamicReportDescription:$e,dynamicReportColumns:Le,dynamicReportQueryJSON:Re,actionCountReport:E,dynamicReport:A,getJSONResults:M};return Ve}),n("viewmodels/admin/reports/dynamic.report",["viewmodels/admin/reports/index"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.data=t.settings.data,t.report=t.data.data(),t.computedEntities=ko.computed(function(){var e=t.report.entities();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),t.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(t.computedEntities(),function(t){var n=t.selected();n||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(t.computedEntities(),function(e){e.selected(!0)}):ko.utils.arrayForEach(t.computedEntities(),function(e){e.selected(!1)})}}).extend({throttle:50}),t.allSelected(!0)},t.prototype.closeReport=function(){var e=this;e.settings.data(null)},t.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),n='","',a='"\r\n"',r="";r=r+e.report.name+a,r=r+e.report.description+a,r=r+moment().format("LLLL")+a,ko.utils.arrayForEach(e.report.columns,function(e){r=r+e.displayName+n}),r+=a,ko.utils.arrayForEach(e.computedEntities(),function(t){t.selected()&&(ko.utils.arrayForEach(e.report.columns,function(e){if(-1===e.name.indexOf(".")&&-1===e.name.indexOf("|"))r=r+t[e.name]+n;else if(-1===e.name.indexOf("|"))r=r+(t[e.name.substr(0,e.name.indexOf("."))]?t[e.name.substr(0,e.name.indexOf("."))][e.name.substr(e.name.indexOf(".")+1,e.name.length)]:"-")+n;else{for(var a=e.name.split("|"),i=t,s=a.length-1;s>=0;s--)i=i[a[0]],void 0===i&&(i="-",s=0),a.shift();r=r+i+n}}),r+=a)}),blob=new Blob([r],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_report.csv",href:i}),t.click()},t}),n("viewmodels/admin/reports/entity.template",["services/datacontext","services/report.context"],function(e,t){function n(e,t,n,a,r){var i=this;i.entityType=e,i.propName=t,i.columns=ko.observableArray(n),i.navProperties=ko.observableArray(a),i.childEntities=ko.observableArray(r),i.availableColumns=ko.observableArray([]),i.availableNavProps=ko.observableArray([]),i.availableChildEntities=ko.observableArray([])}function a(e,t){return-1!==e.indexOf(t,e.length-t.length)}var r=e.manager.metadataStore,i=function(){};return i.prototype.activate=function(e){var t=this;t.entityType=e.entityType,a(t.entityType,"s")&&(t.entityType=t.entityType.substr(0,t.entityType.length-1)),a(t.entityType,"Model")&&(t.entityType=t.entityType.substr(0,t.entityType.length-5));var i=r.getEntityType(t.entityType),s=i.dataProperties,o=ko.utils.arrayFilter(i.navigationProperties,function(e){return e.isScalar}),d=ko.utils.arrayFilter(i.navigationProperties,function(e){return!e.isScalar});t.entity=new n(i.shortName),t.entity.availableColumns(s),t.entity.availableNavProps(o),t.entity.availableChildEntities(d)},i}),n("viewmodels/admin/reports/matching.actions",[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.data=t.settings.data.data,t.actions=t.data,t.computedActions=ko.computed(function(){var e=t.actions();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),t.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(t.computedActions(),function(t){var n=t.selected();n||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(t.computedActions(),function(e){e.selected(!0)}):ko.utils.arrayForEach(t.computedActions(),function(e){e.selected(!1)})}}).extend({throttle:50}),t.allSelected(!0)},e.prototype.closeReport=function(){var e=this;e.settings.data(null)},e.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),n="",a='","',r='"\r\n"',n="Individual Name"+a+"Action Name"+a+"Status"+a+"Start Date"+a+"Module Name"+a+"Program Name"+r;ko.utils.arrayForEach(e.computedActions(),function(e){e.selected()&&(n=n+e.module().program().patient().fullName()+a+e.name()+a+e.elementStateModel().name()+a+e.attrStartDate()+a+e.module().name()+a+e.module().program().name()+r)}),blob=new Blob([n],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},e}),n("viewmodels/admin/reports/matching.patients",["viewmodels/admin/reports/index"],function(e){var t=function(){};return t.prototype.activate=function(t){var n=this;n.settings=t,n.data=n.settings.data.data,n.patients=n.data,n.computedPatients=ko.computed(function(){var e=n.patients();return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),n.goalsLoaded=ko.computed(function(){return e.goalsList().length>0}),n.programsLoaded=ko.computed(function(){return e.programsList().length>0}),n.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(n.computedPatients(),function(t){var n=t.selected();n||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(n.computedPatients(),function(e){e.selected(!0)}):ko.utils.arrayForEach(n.computedPatients(),function(e){e.selected(!1)})}}).extend({throttle:50}),n.allSelected(!0)},t.prototype.closeReport=function(){var e=this;e.settings.data(null)},t.prototype.sendToExcel=function(){var e=document.createElement("a"),t="data:application/vnd.ms-excel",n=document.getElementById("matching-patients"),a=n.outerHTML.replace(/ /g,"%20");e.href=t+", "+a,e.download="exported_table.xls",e.click()},t.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),n='","',a='"\r\n"',r="Individual Name"+n+"Gender"+n+"DOB"+n+"# of Goal"+n+"# of Programs"+a;ko.utils.arrayForEach(e.computedPatients(),function(e){e.selected()&&(r=r+e.fullName()+n+e.gender()+n+e.dOB()+n+e.goals().length+n+e.programs().length+a)}),blob=new Blob([r],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},t}),n("viewmodels/admin/reports/matching.programs",[],function(){var e=function(){},t=function(e,t){return e.duration()==t.duration()?e.duration()>t.duration()?1:-1:e.duration()>t.duration()?1:-1};return e.prototype.activate=function(e){var n=this;n.settings=e,n.data=n.settings.data.data,n.programs=n.data.sort(t),n.computedPrograms=ko.computed(function(){var e=n.programs;return ko.utils.arrayForEach(e,function(e){void 0===e.selected&&(e.selected=ko.observable(!1))}),e}).extend({throttle:50}),n.allSelected=ko.computed({read:function(){var e=!0;return ko.utils.arrayForEach(n.computedPrograms(),function(t){var n=t.selected();n||(e=!1)}),e},write:function(e){e?ko.utils.arrayForEach(n.computedPrograms(),function(e){e.selected(!0)}):ko.utils.arrayForEach(n.computedPrograms(),function(e){e.selected(!1)})}}).extend({throttle:50}),n.allSelected(!0)},e.prototype.closeReport=function(){var e=this;e.settings.data(null)},e.prototype.sendToExcel=function(){var e=document.createElement("a"),t="data:application/vnd.ms-excel",n=document.getElementById("matching-programs"),a=n.outerHTML.replace(/ /g,"%20");e.href=t+", "+a,e.download="exported_table.xls",e.click()},e.prototype.sendCleanCSV=function(){var e=this,t=document.createElement("a"),n="",a='","',r='"\r\n"',n="Individual Name"+a+"Program Name"+a+"Start Date"+a+"Duration"+r;ko.utils.arrayForEach(e.computedPrograms(),function(e){e.selected()&&(n=n+patient.fullName()+a+patient.gender()+a+patient.dOB()+a+patient.goals().length+a+patient.programs().length+r)}),blob=new Blob([n],{type:"text/csv"});var i=URL.createObjectURL(blob);$(t).attr({download:"exported_table.csv",href:i}),t.click()},e}),n("viewmodels/admin/reports/query.builder",["services/datacontext","services/report.context"],function(e,t){function n(e,t,n,a,r){var i=this;i.entityType=e,i.propName=t,i.columns=ko.observableArray(n),i.navProperties=ko.observableArray(a),i.childEntities=ko.observableArray(r),i.availableColumns=ko.observableArray([]),i.availableNavProps=ko.observableArray([]),i.availableChildEntities=ko.observableArray([])}function a(){i()}function r(e){console.log(e);var t=l.getEntityType(e);console.log(t);var a=t.dataProperties,r=ko.utils.arrayFilter(t.navigationProperties,function(e){return e.isScalar}),i=ko.utils.arrayFilter(t.navigationProperties,function(e){return!e.isScalar}),s=new n(t.shortName);return s.availableColumns(a),s.availableNavProps(r),s.availableChildEntities(i),s}function i(){var e=$.parseJSON(l.exportMetadata());console.log(e);var t=l.getEntityType("Patient");console.log(t),s(e.structuralTypes),
console.log(s())}var s=ko.observableArray([]),o=ko.observable(),d=ko.observable(),l=e.manager.metadataStore;o.subscribe(function(e){console.log("Doign this ",e),d(r(e.shortName)),console.log(d())});var c={structuraltypes:s,selectedMainType:o,newQueryReport:d,activate:a};return c}),n("viewmodels/admin/widgets/delete.individuals.list",["config.services","services/session","services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,n,a,r){function i(){T(null)}function s(e){function t(){C(!0),r.currentModal(E)}D(e),n.getEntityById(D,D().id(),h().EntityType,h().ResourcePath,!0).then(t)}function o(){return N?setTimeout(function(){P.valueHasMutated()},200):d(),!0}function d(){function e(){}if(n.getEntityList(k,y().EntityType,y().ResourcePath,null,null,!1,null,"sName").then(e),u=S.subscribe(function(){w(!1),m(!1),f(0),T()&&T(null),P([]),l()}),throttledFilterToken=x.subscribe(function(e){S()&&(w(!1),m(!1),f(0),P([]),l(e))}),t.currentUser().settings()){var a=n.getSettingsParam("TotalPatientCount");a&&g(parseInt(a))}return N=!0,!0}function l(e){var t={},t=b().Parameters;e?t.SearchFilter=e:t.SearchFilter=null,m(!1),n.getEntityList(P,b().EntityType,b().ResourcePath,null,S().iD(),!0,t,null,!0).then(c)}function c(){var e=P().length;0==e&&m(!0);var t=0===f()?g():f()+g();w(t>e?!1:!0),f(t)}function p(){var e={},t=T(),e=b().Parameters;t?e.SearchFilter=t:e.SearchFilter=null;var a=ko.observableArray();n.getEntityList(a,b().EntityType,b().ResourcePath,null,S().iD(),!0,e).then(function(){P.push.apply(P,a()),c()})}var u,v="No records meet your search criteria",m=ko.observable(!1),g=ko.observable(50),h=ko.computed(function(){return t.currentUser()?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"patient","Patient"):!1}),y=ko.computed(function(){var n=t.currentUser();return n?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),f=ko.observable(0),b=ko.computed(function(){var n=t.currentUser();return n?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:f(),Take:g()}):""}),w=ko.observable(!1),k=ko.observableArray(),S=ko.observable(),T=ko.observable(),x=ko.computed(T).extend({throttle:500}).extend({notify:"always"}),P=ko.observableArray(),D=ko.observable(),N=!1,C=ko.observable(!1),I=function(){var e=confirm("You are about to delete an individual.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(P.remove(D()),void n.deleteIndividual(D()))},O={title:"Delete Individual",entity:D,templatePath:"templates/patient.delete.html",showing:C,saveOverride:null,cancelOverride:null,deleteOverride:I,classOverride:null},E=new a.modal(O);E.canDelete(!0);var A={cohortsList:k,selectedCohort:S,cohortFilter:T,clearCohortFilter:i,patientsList:P,activate:o,choosePatient:s,showNoResultsMessage:m,canLoadMoreCohortPatients:w,loadMoreCohortPatients:p,noResultsMessage:v};return A}),n("viewmodels/authenticate",["services/session","config.routes","plugins/router","services/datacontext","viewmodels/shell/shell"],function(e,t,n,a,r){function i(t){e.runTests();var a=window.location.href.indexOf("#ut")>-1;return a?(n.navigate("#",{replace:!0,trigger:!1}),o(t)):!1}function s(){return a.primeData().then(function(){return r.initializeLogger(),n.navigate("home")})}function o(t){return a.getUserByUserToken(e.currentUser,t,!0),d=e.currentUser.subscribe(function(){return e.currentUser()?(e.setLocalStorageAndCookie(),d.dispose(),s()):void 0}),!1}var d,l={activate:i};return l}),n("viewmodels/home/contacts/contact.details",[],function(){function e(e){a(e)}function t(e){var t=this;return t.contact=e.contact,t.isContactSelected=ko.computed(function(){return t.contact&&t.contact()?!0:!1}),t.primaryCommunications=ko.computed(function(){var e=[],n=t.contact();if(n){var a=ko.utils.arrayFirst(n.phones(),function(e){return e.phonePreferred()});a&&(a.template="templates/phone.html",e.push(a));var r=ko.utils.arrayFirst(n.phones(),function(e){return e.textPreferred()});r&&r!==a&&(r.template="templates/phone.html",e.push(r));var i=ko.utils.arrayFirst(n.emails(),function(e){return e.preferred()});i&&(i.template="templates/email.html",e.push(i));var s=ko.utils.arrayFirst(n.addresses(),function(e){return e.preferred()});s&&(s.template="templates/address.html",e.push(s))}return e}).extend({throttle:25}),!0}function n(e,t,n,a){var r=this;r.name=e,r.cssClass=t,r.imgSource=n,r.imgAlt=a,r.isShowing=!0}var a=ko.observable("Profile"),r=ko.observableArray([new n("Profile",null,"/NightingaleUI/Content/images/patient_neutral_small.png","Phone blue small"),new n("Professional",null,"/NightingaleUI/Content/images/settings_blue.png","Phone blue small"),new n("Comm","icon-phone blue",null)]),i={activate:t,detailsTabs:r,setActiveDetailsTab:e,activeDetailsTab:a};return i}),n("viewmodels/home/contacts/index",["services/session","services/datacontext","viewmodels/shell/shell","models/base","services/local.collections"],function(e,n,a,r,i){function s(e,t,n,a){var r=this;r.name=e,r.cssClass=t,r.imgSource=n,r.imgAlt=a,r.isShowing=!0,r.hasErrors=ko.observable(!1)}function o(e,t){e.activeTab(t)}function d(){function e(e){return e&&(e.isNew(!1),e.clearDirty()),L().callbackReturnTo?setTimeout(function(){L().callbackReturnTo(L().contactCard())},10):void 0}V().saveChanges().then(e),V().clearDirty()}function l(){return R(!1),L().contactCard().cancelChanges(),L().contactCard().clearDirty(),L().callbackReturnTo?setTimeout(function(){L().callbackReturnTo()},10):void 0}function c(e){var t=this;t.contactCard=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;return t.contactCard()&&(e=t.contactCard().isValid()&&!t.contactCard().isDuplicate()&&t.contactCard().isDuplicateTested()),e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={contactCard:t.contactCard,canSave:t.canSave,showing:e,saveFunction:d}}function p(t,r,i,s,o){var d=[];ko.utils.arrayForEach(n.enums.communicationModes(),function(e){var t={lookUpModeId:e.id(),optOut:!1,preferred:!1};d.push(t)}),V(n.createEntity("ContactCard",{id:-1,statusId:1,modes:d,createdById:e.currentUser().userId()})),V().isNew(!0),V().activeTab("Profile"),s&&V().firstName(s),o&&V().lastName(o),V().watchDirty(),L().contactCard(V()),i?L().callbackReturnTo=i:L().callbackReturnTo=null,a.currentModal(j),R(!0)}function u(e){e.activeTab("General"),m(e,"Edit Communication Preferences",!0)}function v(e){e.activeTab("Profile");var t="Edit Contact - "+e.firstName()+" "+e.lastName();m(e,t,!1)}function m(e,t,n){V(e),L().contactCard(e),L().callbackReturnTo=null;var i={title:t,showSelectedPatientInTitle:n,entity:L,templatePath:"viewmodels/templates/contact.edit",showing:R,saveOverride:d,cancelOverride:l,deleteOverride:null,classOverride:null},s=new r.modal(i);a.currentModal(s),R(!0)}function g(){var e=this;return oe||(h(),oe=!0),e.contactsShowingText=ko.computed(function(){var t="",n=e.myContactSearchResults(),a=Q();return n.length&&(t=" - "+n.length+" showing"),n.length<a&&(t+=" out of "+a),t}).extend({throttle:100}),e.showResetFilters=ko.computed(function(){var t=!1,n=e.criteriaFirstName(),a=e.criteriaLastName(),r=e.defaultContactType(),i=e.criteriaContactTypeId(),s=e.criteriaContactSubTypes(),o=e.activeContactStatus(),d=e.criteriaContactStatuses(),l=ko.utils.arrayFilter(d,function(e){return e.id()==o.id()});return t=i&&r&&r.id()==i&&1==l.length&&1==d.length&&0==s.length?n||a?!0:!1:!0}).extend({throttle:100}),e.canSearchContacts=ko.computed(function(){var t=!1,n=e.criteriaFirstName(),a=e.criteriaLastName(),r=e.criteriaContactStatuses(),i=e.criteriaContactSubTypes(),s=e.searching?e.searching():!1;return r&&r.length>0&&(i.length>0?t=!0:n&&n.trim().length>0&&a&&a.trim().length>0&&(t=!0)),t=t&&!s}).extend({throttle:100}),e.selectedContactId=ko.computed(function(){var e=de();return e?e.id():""}).extend({throttle:100}),e.showEditButton=ko.computed(function(){var t=e.selectedContactId(),n=de();return t&&n&&n.isEditable()}).extend({throttle:100}),e.showDeleteButton=ko.computed(function(){return e.showEditButton()}).extend({throttle:100}),!0}function h(){if(e.currentUser().settings()){var t=n.getSettingsParam("TotalQueryCount");t&&!isNaN(t)&&q(parseInt(t));var a=n.getSettingsParam("QueryTake");a&&!isNaN(a)&&z(parseInt(a))}oe=!0}function y(){M(!M())}function f(e){A(e===A()?null:e)}function b(){alert("delete")}function w(){ko.utils.arrayForEach(F,function(e){e.isShowing=!0,e.hasErrors(!1)})}function k(e){w(),e.activeTab("Profile"),de(e)}function S(e){var t=null,n=ko.utils.arrayFilter(e(),function(e){return"Person"==e.name()});return n&&n.length>0&&(t=n[0]),t}function T(){se()||se(S(K)),J(se().id()),Z([]),ee([]),ne()&&ee.push(ne()),re(null),ie(null),B([]),U([]),le(!1),ce(!1),pe(!1),de(null)}function x(e){var t=ko.utils.arrayFilter(W(),function(t){return t.parentId()&&t.parentId()==e});return t}function P(){Y(!0),pe(!1);var e=n.getLocalContacts("ContactSearch");B([]),Q(0),_(0),de(null),setTimeout(function(){e&&e.length>0&&ko.utils.arrayForEach(e,function(e){e&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),D()},50)}function D(){var e={contactTypeIds:[],contactSubTypeIds:[],contactStatuses:[],firstName:re(),lastName:ie(),filterType:"StartsWith",take:z(),skip:_()};return e.contactTypeIds.push(J()),ko.utils.arrayForEach(Z(),function(t){e.contactSubTypeIds.push(t.id())}),ko.utils.arrayForEach(ee(),function(t){var n=ko.utils.arrayFilter(te(),function(e){return e.id()==t.id()});n.length>0&&e.contactStatuses.push(n[0].name())}),U([]),n.getContacts(U,e,Q,"ContactSearch").then(I)}function N(){D()}function C(){P()}function I(){ko.utils.arrayForEach(U(),function(e){B.push(e)});var e=_(),t=e+z();t<Q()&&t<q()?(_(t),le(!0)):le(!1),ce(B().length>=q()?!0:!1),0==Q()&&pe(!0),Y(!1)}function O(){n||(n=t("services/datacontext"))}function E(){var e=this;e.contactsShowingText.dispose(),e.showResetFilters.dispose(),e.canSearchContacts.dispose(),e.showDeleteButton.dispose(),e.showEditButton.dispose(),e.contactSubTypes.dispose()}var A=ko.observable(),M=ko.observable(!0);O();var F=ko.observableArray([new s("Profile",null,"/NightingaleUI/Content/images/patient_neutral_small.png","Phone blue small"),new s("General",null,"/NightingaleUI/Content/images/settings_blue.png","Phone blue small"),new s("Phone","icon-phone blue",null),new s("Text","icon-sms blue",null),new s("Email","icon-email blue",null),new s("Address","icon-address blue",null),new s("Language",null,"/NightingaleUI/Content/images/nav_population.png","Language blue small")]),$={profile:0,general:1,phone:2,text:3,email:4,address:5,language:6},R=ko.observable(!1),L=ko.observable(new c(R)),V=ko.observable(),B=ko.observableArray([]),U=ko.observableArray([]),z=ko.observable(100),_=ko.observable(0),q=ko.observable(400),Y=ko.observable(!1),Q=ko.observable(),H=(ko.observable(),{title:"Add Contact",entity:L,templatePath:"viewmodels/templates/contact.edit",showing:R,saveOverride:d,cancelOverride:l,deleteOverride:null,classOverride:null}),j=new r.modal(H),G=1,K=ko.observableArray([]);K(n.getContactTypes(G,"root"));var W=ko.observableArray([]),X=n.getContactTypes(G,!1);W(X);var J=ko.observable(),Z=ko.observableArray(),ee=ko.observableArray(),te=n.enums.contactStatuses,ne=ko.observable(),ae=ko.utils.arrayFilter(te(),function(e){return"Active"==e.name()});ae.length&&ne(ae[0]);var re=ko.observable(),ie=ko.observable(),se=(n.enums.states,ko.observable()),oe=!1,de=ko.observable(),le=ko.observable(!1),ce=ko.observable(!1),pe=ko.observable(!1);T();var ue=ko.computed(function(){var e=[],t=J();return t&&(e=x(t)),e}).extend({throttle:100}),ve=(ko.observable("Profile"),{activate:g,detached:E,tabs:F,tabIndex:$,setActiveTab:o,searchContacts:C,selectedContact:de,selectContact:k,editContact:v,editPatientContact:u,deleteContact:b,addContact:p,myContactSearchResults:B,canLoadMoreContacts:le,loadMoreContacts:N,maxContactsLoaded:ce,searching:Y,resetFilters:T,noResultsFound:pe,criteriaContactTypeId:J,criteriaContactSubTypes:Z,criteriaContactStatuses:ee,criteriaFirstName:re,criteriaLastName:ie,getContactTypeChildren:x,defaultContactType:se,activeContactStatus:ne,contactTypes:K,contactSubTypes:ue,contactStatuses:te,toggleOpenColumn:y,fullScreenWidget:A,leftColumnOpen:M,toggleFullScreen:f});return ve}),n("viewmodels/home/index",["plugins/router","services/navigation","services/session","config.services","services/datacontext"],function(e,t,n,a,r){function i(){s()}function s(){r.getEntityList(d,c().EntityType,c().ResourcePath,null,null,!1)}var o=ko.observable(!1),d=ko.observableArray();ko.extenders.calculateShowingPatients=function(e,t){return e.subscribe(function(){}),e};var l=ko.computed(function(){var e=[];return ko.utils.arrayForEach(d(),function(t){t.isChecked=ko.observable().extend({calculateShowingPatients:!0}),e.push(t)}),e}),c=ko.computed(function(){var e=n.currentUser();return e?new a.createEndPoint("10",n.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),p={cohortPatientSelectPanelShowing:o,cohorts:d,activate:i,navigation:t,computedCohorts:l,title:"Home"};return p}),n("viewmodels/home/myhome/myhome",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","services/local.collections","services/navigation","plugins/router"],function(e,t,n,a,r,i,s,o){function d(e,n,r,i,o){var d=this;d.events=e,d.header=n,d.editable=r,d.viewDate=i||ko.observable(new Date),d.defaultView=o,d.eventClick=function(e){if(s.currentRoute()&&"Individual"===s.currentRoute().config.title){var n=ko.utils.arrayFirst(s.currentRoute().config.settings.pages,function(e){return"goals"===e.title});s.setSubRoute(n)}else{var r=t.getEventById(e.id);ie().event(r),a.currentModal(oe),re(!0)}}}function l(){console.log("something was done")}function c(){function e(e){De().length;e.clearDirty()}t.saveToDo(B(),"Insert").then(e)}function p(){t.cancelEntityChanges(ae().todo()),ae().todo().clearDirty()}function u(){var e=this;e.id=ko.observable(),e.title=ko.observable(),e.start=ko.observable(),e.allDay=ko.observable(!1),e.url=ko.observable(""),e.patientId=ko.observable(""),e.patientName=ko.observable(""),e.assignedToName=ko.observable(""),e.typeId=ko.observable("")}function v(e){de()&&-1!==de().indexOf(e.sortProperty)?de()&&"desc"===de().substr(de().length-4,4)?(de(null),le(null)):(de(e.sortProperty+" desc"),le(e.backendSort?"-"+e.backendSort:null)):(de(e.sortProperty),le(e.backendSort?e.backendSort:null))}function m(e){pe(pe()&&-1!==pe().indexOf(e.sortProperty)?pe()&&"desc"===pe().substr(pe().length-4,4)?null:e.sortProperty+" desc":e.sortProperty)}function g(e){e===Z&&(te()||ee())?Z(!Z()):e===ee&&(te()||Z())?ee(!ee()):e===te&&(ee()||Z())&&te(!te())}function h(e){var n=ko.utils.arrayFirst(i.events(),function(t){return t.id()===e.id()});if(!n){var a={id:e.id(),title:e.title(),start:e.start(),allDay:e.allDay(),patientId:e.patientId(),patientName:e.patientName(),assignedToName:e.assignedToName(),typeId:e.typeId()};t.createCalendarEvent(a)}}function y(){return z||(S(),z=!0),W()?void 0:C()}function f(){$(".calendar").fullCalendar("render")}function b(){J(!J()),k()}function w(e){X(e===X()?null:e),k()}function k(){setTimeout(function(){$(".calendar").fullCalendar("render")},500)}function S(){function n(){}if(t.getEntityList(we,me().EntityType,me().ResourcePath,null,null,!1,null,"sName").then(n),e.currentUser().settings()){var a=t.getSettingsParam("TotalQueryCount");a&&!isNaN(a)&&Y(parseInt(a));var r=t.getSettingsParam("QueryTake");r&&!isNaN(r)&&H(parseInt(r))}return A(),L=ke.subscribe(function(){Se([]),T()}),V.push(L),z=!0,!0}function T(e){var n={},n=ge().Parameters;e?n.SearchFilter=e:n.SearchFilter=null,t.getEntityList(Se,ge().EntityType,ge().ResourcePath,null,ke().iD(),!0,n).then(x)}function x(){}function P(e){}function D(){B(t.createEntity("ToDo",{id:-1,statusId:1,priorityId:0,createdById:e.currentUser().userId(),assignedToId:e.currentUser().userId()})),B().isNew(!0),B().watchDirty(),ae().todo(B()),a.currentModal(ve),ne(!0)}function N(n){var a=[];return a.push(new r.Parameter("assignedToId",e.currentUser().userId(),"==")),a.push(new r.Parameter("statusId","2","!=")),a.push(new r.Parameter("statusId","4","!=")),t.getLocalTodos(a,n)}function C(){Q(0),G(!1),K(!1),De([]),W(!0);var e=t.getLocalTodos([],null);return i.todos([]),setTimeout(function(){return e&&e.length>0&&ko.utils.arrayForEach(e,function(e){e&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),I().then(E)},50)}function I(){return W(!0),G(!1),t.getToDosRemoteOpenAssignedToMe(Pe,Q(),H(),le(),j).then(O)}function O(){var e=Pe()?Pe().length:0,t=Q(),n=t+H();n<j()&&n<Y()?(Q(n),G(!0)):G(!1),j()<Y()?K(!1):e&&t+e>=Y()&&K(!0);var a=xe();De(a),W(!1)}function E(){var e=N();t.syncCalendarEvents(e)}function A(){t.getInterventions(null,{StatusIds:[1],AssignedToId:e.currentUser().userId()})}function M(e){var t=this;t.todo=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;return t.todo()&&(e=t.todo().isValid()),e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={todo:t.todo,canSave:t.canSave,showing:e}}function F(e){var t=this;t.event=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){return t.event(),!1},write:function(e){t.canSaveObservable(e)}}),t.activationData={event:t.event,canSave:t.canSave,showing:e}}function R(){}var L,V=[],B=ko.observable(),U=ko.computed(t.todosSaving).extend({throttle:50}),z=!1,_=ko.observable(20),q=ko.observable(0),Y=ko.observable(400),Q=ko.observable(0),H=ko.observable(100),j=ko.observable(0),G=ko.observable(!1),K=ko.observable(!1),W=ko.observable(!1),X=ko.observable(),J=ko.observable(),Z=ko.observable(!0),ee=ko.observable(!0),te=ko.observable(!1),ne=ko.observable(!1),ae=ko.observable(new M(ne)),re=ko.observable(!1),ie=ko.observable(new F(re)),se={title:"Event Details",entity:ie,templatePath:"viewmodels/templates/event.details",showing:re,saveOverride:l,cancelOverride:l,deleteOverride:null,classOverride:null},oe=new r.modal(se),de=ko.observable(),le=ko.observable("-DueDate"),ce=ko.observable(le()),pe=ko.observable(),ue={title:"Create To Do",entity:ae,templatePath:"viewmodels/templates/todo.edit",showing:ne,saveOverride:c,cancelOverride:p,deleteOverride:null,classOverride:null},ve=new r.modal(ue),me=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),ge=ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:q(),Take:_()}):""}),he=ko.observable(new u),ye=ko.observableArray(),fe={left:"title",right:"today agendaWeek,month prev,next"},be=ko.observable(new Date),we=ko.observableArray(),ke=ko.observable(),Se=ko.observableArray(),Te=function(e){ye.removeAll();var n=t.getCalendarEvents(e);ko.utils.arrayPushAll(ye,n),ye.valueHasMutated(),t.syncCalendarEvents(e)},xe=function(){var e=de(),t=e?e:"dueDate desc";t+=", category.name, title";var n=N(t);return Te(n),n},Pe=ko.observableArray([]),De=ko.observableArray([]),Ne=(ko.computed(function(){var e=[],t=(i.todos(),de(),le?le():null,W());return t||(le()!==ce()?(ce(le()),C(),e=[]):e=xe()),De(e),e}).extend({throttle:50}),ko.computed(function(){var e=U(),t=W();return e||t}).extend({throttle:20})),Ce=ko.computed(function(){var e=" showing ",t=j(),n=W(),a=De?De():[],r=Ne();return r||n?e="Loading...":(e=a.length+" showing",a.length<t&&(e+=" out of "+t)),e}).extend({throttle:100}),Ie=ko.computed(function(){var n=[],a=(i.interventions(),[]),s="";a.push(new r.Parameter("assignedToId",e.currentUser().userId(),"==")),a.push(new r.Parameter("statusId","2","!=")),a.push(new r.Parameter("statusId","3","!=")),s=pe()?pe():"dueDate desc, startDate desc";var o=s+", category.name, description";return n=t.getInterventionsQuery(a,o)}).extend({throttle:50}),Oe=ko.observableArray(["priority","duedate","title","category","patient"]),Ee=ko.observableArray(["dueDate","description","category","patient","goal"]),Ae=new d(ye,fe,!1,be,"agendaWeek"),Me={activate:y,attached:f,detached:R,newEvent:he,addEvent:h,fullScreenWidget:X,toggleFullScreen:w,cohortsList:we,selectedCohort:ke,patientsList:Se,calendarOptions:Ae,title:"Home",myToDos:De,todosShowingText:Ce,canLoadMoreTodos:G,loadMoreTodos:I,maxToToDosLoaded:K,todosReloading:Ne,myInterventions:Ie,activeTodoColumns:Oe,activeInterventionColumns:Ee,editToDo:P,addToDo:D,toggleOpenColumn:b,leftColumnOpen:J,toggleTodoSort:v,toggleInterventionSort:m,selectedTodoSortColumn:de,selectedInterventionSortColumn:pe,myToDoListOpen:Z,myWorkListOpen:te,myInterventionListOpen:ee,toggleWidgetOpen:g};return Me}),n("viewmodels/home/population/index",["plugins/router","services/navigation","config.services","services/session","services/datacontext"],function(e,t,n,a,r){function i(){}function s(){l||(l=!0),o()}function o(){new Visualization("#visualizer",p.patients,"care_gaps")}var d=ko.observableArray(),l=!1,c=(ko.observableArray(),ko.observableArray(),a.currentUser()),p={patients:[{id:1,name:"Billy Condo",overdue:!1,conditions:[6],care_gaps:3},{id:2,name:"Johnny Hairband",overdue:!1,conditions:[5],care_gaps:2}]},u={patients:d,activate:i,attached:s,currentUser:c,title:"index"};return u}),n("viewmodels/home/todos/index",["services/session","services/datacontext","config.services","models/base","services/local.collections","viewmodels/home/myhome/myhome"],function(e,t,n,a,r,i){function s(e){var t=M();e<E()&&t>e?O(!1):e>=E()&&O(!0)}function o(){var e=[],n=[],a="";return ko.utils.arrayForEach(j().parameters,function(e){n.push(e)}),ie().length>0&&ko.utils.arrayForEach(ie(),function(e){n.push(e)}),a=Z()?Z():j().primarySort,a+=", category.name, title",e=t.getLocalTodos(n,a)}function d(e,t){var n=!1;if(e.length!==t.length)n=!0;else{if(0!=e.length||0!=t.length)return!1;n=!1}return n}function l(){O(!1),le([]),F(!0);var e=t.getLocalTodos([],null);r.todos([]),M(0),setTimeout(function(){e&&e.length>0&&ko.utils.arrayForEach(e,function(e){e&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),y()},50)}function c(e){var t=this;t.name=e,t.percentage=0,t.count=0}function p(){return x?b():(u(),x=!0),!0}function u(){if(e.currentUser().settings()){var n=t.getSettingsParam("TotalQueryCount");n&&(E(parseInt(n)),A(E()))}return j(V()[7]),w(),x=!0,!0}function v(){U(!U())}function m(e){B(e===B()?null:e)}function g(){K([]),J([]),ne(!1)}function h(e){Z()&&-1!==Z().indexOf(e.sortProperty)?Z()&&"desc"===Z().substr(Z().length-4,4)?(Z(null),ee(null)):(Z(e.sortProperty+" desc"),ee(e.backendSort?"-"+e.backendSort:null)):(Z(e.sortProperty),ee(e.backendSort?e.backendSort:null))}function y(){var e=[];ko.utils.arrayForEach(j().remoteParams,function(t){e[t.Property]=t.Value}),K().length>0&&(e.CategoryIds=[],ko.utils.arrayForEach(K(),function(t){e.CategoryIds.push(t.id())})),J().length>0&&(e.PriorityIds=[],ko.utils.arrayForEach(J(),function(t){isNaN(t.id())||e.PriorityIds.push(parseInt(t.id()))})),e.Skip=0,e.Take=A(),e.Sort=ee()?ee():j().backendSort,t.getToDos(de,e,M).then(f)}function f(){var e=de()?de().length:0,t=M();t<E()?O(!1):e&&e>=E()&&O(!0),F(!1)}function b(){O(!1),F(!0),l()}function w(){j()&&"todos"==j().type()?b():(t.getInterventions(null,{StatusIds:[1],AssignedToId:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[1],CreatedById:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[2,3],AssignedToId:e.currentUser().userId()}),t.getInterventions(null,{StatusIds:[2,3],CreatedById:e.currentUser().userId()}))}function k(e,t,n,a,r,i,s){var o=this;o.type=ko.observable(e),o.name=ko.observable(t),o.parameters=n,o.columns=ko.observableArray(a),o.primarySort=r?r:"dueDate desc",o.remoteParams=i,o.backendSort=s?s:"-DueDate"}function S(e,t,n){var a=this;a.name=e,a.mainProperty=t,a.secondaryProperty=n}function T(){}var x=!1,P=[],D={id:ko.observable(""),name:ko.observable("Not Set")},N=ko.observable(!0),C=i.addToDo,I=new Date((new Date).setDate((new Date).getDate()-30));I=moment(I).format();var O=ko.observable(!1),E=ko.observable(400),A=ko.observable(E()),M=ko.observable(0),F=ko.observable(!1),$=ko.observable(!1),R=ko.observable(!1),L=ko.observable(!1),V=ko.observableArray([new k("interventions","Intervention: Assigned to Others",[new a.Parameter("createdById",e.currentUser().userId(),"=="),new a.Parameter("assignedToId",e.currentUser().userId(),"!="),new a.Parameter("statusId","1","==")],["duedate","description","category","patient","goal"],"dueDate desc, startDate desc"),new k("interventions","Intervention: Closed by Others",[new a.Parameter("createdById",e.currentUser().userId(),"=="),new a.Parameter("assignedToId",e.currentUser().userId(),"!="),new a.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","patient","goal"],"closedDate desc"),new k("interventions","Intervention: My Closed List",[new a.Parameter("assignedToId",e.currentUser().userId(),"=="),new a.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","patient","goal"],"closedDate desc"),new k("interventions","Intervention: My Open List",[new a.Parameter("assignedToId",e.currentUser().userId(),"=="),new a.Parameter("statusId","1","==")],["duedate","description","category","patient","goal"],"dueDate desc, startDate desc"),new k("todos","To Do: Assigned to Others",[new a.Parameter("createdById",e.currentUser().userId(),"=="),new a.Parameter("assignedToId",e.currentUser().userId(),"!="),new a.Parameter("assignedToId","","!="),new a.Parameter("statusId","2","!="),new a.Parameter("statusId","4","!=")],["priority-small","duedate","title-small","category","patient","assignedto"],"dueDate desc",[new a.Parameter("StatusIds",[1,3]),new a.Parameter("CreatedById",e.currentUser().userId()),new a.Parameter("NotAssignedToId",e.currentUser().userId())],"-DueDate"),new k("todos","To Do: Closed by Others",[new a.Parameter("createdById",e.currentUser().userId(),"=="),new a.Parameter("assignedToId",e.currentUser().userId(),"!="),new a.Parameter("assignedToId","","!="),new a.Parameter("statusId","1","!="),new a.Parameter("statusId","3","!="),new a.Parameter("closedDate",new Date(I),">=")],["status-small","closedon","title-small","category","patient","assignedto"],"closedDate desc",[new a.Parameter("StatusIds",[2,4]),new a.Parameter("CreatedById",e.currentUser().userId()),new a.Parameter("FromDate",I),new a.Parameter("NotAssignedToId",e.currentUser().userId())],"-ClosedDate"),new k("todos","To Do: My Closed List",[new a.Parameter("assignedToId",e.currentUser().userId(),"=="),new a.Parameter("statusId","1","!="),new a.Parameter("statusId","3","!="),new a.Parameter("closedDate",new Date(I),">=")],["status-small","closedon","title-small","category","patient","assignedto"],"closedDate desc",[new a.Parameter("StatusIds",[2,4]),new a.Parameter("AssignedToId",e.currentUser().userId()),new a.Parameter("FromDate",I)],"-ClosedDate"),new k("todos","To Do: My Open List",[new a.Parameter("assignedToId",e.currentUser().userId(),"=="),new a.Parameter("statusId","2","!="),new a.Parameter("statusId","4","!=")],["priority","duedate","title","category","patient"],"dueDate desc",[new a.Parameter("StatusIds",[1,3]),new a.Parameter("AssignedToId",e.currentUser().userId())],"-DueDate"),new k("todos","To Do: Open Unassigned",[new a.Parameter("assignedToId","","=="),new a.Parameter("statusId","2","!="),new a.Parameter("statusId","4","!=")],["priority","duedate","title","category","patient"],"dueDate desc",[new a.Parameter("StatusIds",[1,3]),new a.Parameter("AssignedToId","-1")],"-DueDate"),new k("todos","To Do: Closed Unassigned",[new a.Parameter("assignedToId","","=="),new a.Parameter("statusId","1","!="),new a.Parameter("statusId","3","!=")],["priority","duedate","title","category","patient"],"dueDate desc",[new a.Parameter("StatusIds",[2,4]),new a.Parameter("AssignedToId","-1"),new a.Parameter("FromDate",I)],"-DueDate")]),B=ko.observable(),U=ko.observable("todopanel"),z=[new S("By Priority","priority","levelName"),new S("By Category","category","name"),new S("By Status","status","name")],_=ko.observable(z[1]),q=[new S("By Category","category","name"),new S("By Status","status","name")],Y=ko.observable(q[0]),Q=ko.computed(t.todosSaving),H=t.enums.priorities,j=ko.observable(),G=ko.observable(),K=ko.observableArray(),W=ko.observableArray([]),X=ko.observableArray([]),J=ko.observableArray(),Z=ko.observable(),ee=ko.observable("-DueDate"),te=ko.observable(ee()),ne=ko.observable(),ae=ko.computed(function(){var e;e=j()&&"todos"===j().type()?t.enums.toDoCategories():t.enums.interventionCategories();var n=e.slice(0,e.length);return-1===n.indexOf(D)&&n.push(D),n}),re=j.subscribe(function(e){Z(null),ee(null),G()&&G().type()!==j().type()&&(K([]),J([])),G()&&G().name()!==j().name()&&$(!0),G(e)});P.push(re);var ie=ko.computed(function(){var e=K(),t=J(),n=d(K(),W()),r=d(J(),X());n&&(W([]),ko.utils.arrayForEach(K(),function(e){W.push(e)}),R(!0)),r&&(X([]),ko.utils.arrayForEach(J(),function(e){X.push(e)}),L(!0));var i=[];if(e.length>0){var s=ko.utils.arrayFilter(ae(),function(t){var n=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return n?!1:!0});ko.utils.arrayForEach(s,function(e){i.push(new a.Parameter("categoryId",e.id(),"!="))});var o=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(o=!0)}),o||(i.push(new a.Parameter("categoryId","","!=")),i.push(new a.Parameter("categoryId",null,"!=")))}if(t.length>0){var s=ko.utils.arrayFilter(H(),function(e){var n=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return n?!1:!0});ko.utils.arrayForEach(s,function(e){i.push(new a.Parameter("priorityId",e.id(),"!="))});var o=!1;ko.utils.arrayForEach(t,function(e){"0"===e.id()&&(o=!0)}),o||(i.push(new a.Parameter("priorityId","","!=")),i.push(new a.Parameter("priorityId",null,"!=")))}return i}).extend({throttle:50}),se=ko.computed(function(){var e=[];return j()&&(e=j().columns()),e}),oe=ko.computed(function(){var e=e?e():!1,t=F?F():!1,n=M(),a=le?le():null;return e||t||n>0&&0==a.length}).extend({throttle:50}),de=ko.observableArray([]),le=ko.observableArray([]),ce=(ko.computed(function(){var e=[],t=(r.todos(),j()),n=R(),a=L(),i=(G(),$?$():!1),d=ee()?ee():j().backendSort,c=F();return c||t&&"todos"===t.type()&&(d!==te()&&null!==d||n||a||i?(te(d),n&&R(!1),a&&L(!1),i&&$(!1),O(!1),l(),e=[]):(e=o(),s(e.length),F(!1))),le(e),e}).extend({throttle:100}),ko.computed(function(){var e=" showing ",t=M(),n=le?le():null,a=oe?oe():!1;return a?e="Loading...":(e=n.length+" showing",t&&n.length<t&&(e+=" out of "+t)),e}).extend({throttle:50})),pe=ko.computed(function(){var e=[],n=(r.interventions(),j()),a=[],i="";if(n&&"interventions"===n.type()){ko.utils.arrayForEach(n.parameters,function(e){a.push(e)}),ie().length>0&&ko.utils.arrayForEach(ie(),function(e){a.push(e)}),i=Z()?Z():n.primarySort;e=t.getInterventionsQuery(a,i)}return e}),ue=ko.computed(function(){var e=(le(),[]),t=[],n=0;return e.push(new c("Not set")),ko.utils.arrayForEach(le(),function(t){var n=ko.utils.arrayFirst(e,function(e){return t[_().mainProperty]()?e.name===t[_().mainProperty]()[_().secondaryProperty]():"Not set"===e.name});if(n)n.count+=1;else{var a=new c(t[_().mainProperty]()[_().secondaryProperty]());a.count=1,e.push(a)}}),ko.utils.arrayForEach(e,function(e){n+=e.count}),ko.utils.arrayForEach(e,function(e){e.count&&(e.percentage=e.count/n,t.push([e.name,e.percentage]))}),t}),ve=ko.computed(function(){var e=(pe(),[]),t=[],n=0;return e.push(new c("Not set")),ko.utils.arrayForEach(pe(),function(t){var n=ko.utils.arrayFirst(e,function(e){return t[Y().mainProperty]()?e.name===t[Y().mainProperty]()[Y().secondaryProperty]():"Not set"===e.name});if(n)n.count+=1;else{var a=new c(t[Y().mainProperty]()[Y().secondaryProperty]());a.count=1,e.push(a)}}),ko.utils.arrayForEach(e,function(e){n+=e.count}),ko.utils.arrayForEach(e,function(e){e.count&&(e.percentage=e.count/n,t.push([e.name,e.percentage]))}),t}),me=(ko.computed(function(){var t=e.currentUser();return t?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","ToDo"):"";
}),{activate:p,detached:T,title:"Home",todosSaving:Q,myToDos:le,todosShowingText:ce,maxToToDosLoaded:O,todosReloading:oe,myInterventions:pe,myToDosChart:ue,myInterventionsChart:ve,availableTodoSummaries:z,availableInterventionSummaries:q,selectedTodoSummary:_,selectedInterventionSummary:Y,filtersOpen:ne,addToDo:C,refreshView:w,views:V,activeColumns:se,priorities:H,categories:ae,selectedPriorities:J,selectedCategories:K,selectedView:j,selectedSortColumn:Z,resetFilters:g,toggleSort:h,fullScreenWidget:B,leftColumnOpen:U,toggleFullScreen:m,toggleOpenColumn:v,filtersHeaderOpen:N});return me}),n("viewmodels/insight/index",["services/navigation","services/session","config.services","services/datacontext"],function(e,t,n,a){function r(){console.log("Loaded Insight index")}var i={activate:r,navigation:e,title:"Insight"};return i}),n("viewmodels/insight/reports/index",["services/session"],function(e){function t(){return a(),s("viewmodels/insight/widgets/active.report"),!0}function n(e){var t=this;t.Name=ko.observable(e.label),t.Path=ko.observable(e.uri)}function a(){visualize({auth:{name:p(),password:u(),organization:v()}},function(e){e.resourcesSearch({folderUri:h(),recursive:!1,success:function(e){y([]),$.each(e,function(e,t){"reportUnit"===t.resourceType&&y.push(new n(t))})}})})}function r(){b(!0),visualize({auth:{name:p(),password:u(),organization:v()}},function(e){e.report({resource:m(),container:g(),success:function(){b(!1)},error:function(e){console.log(e.message)}})})}var i=e.currentUser().settings();console.log(i);var s=ko.observable(),o=ko.utils.arrayFirst(i,function(e){return console.log(e.Key),"ReportingUser"===e.Key}).Value,d=ko.utils.arrayFirst(i,function(e){return"ReportingOrg"===e.Key}).Value,l=ko.utils.arrayFirst(i,function(e){return"ReportingPW"===e.Key}).Value,c=ko.utils.arrayFirst(i,function(e){return"ReportingRepository"===e.Key}).Value,p=ko.observable(o),u=ko.observable(l),v=ko.observable(d),m=ko.observable(),g=ko.observable(),h=ko.observable(c),y=ko.observableArray(),f=ko.computed(function(){return p()&&u()&&h()}),b=ko.observable(),w={activate:t,activeSecondColumn:s,getReportsList:a,userName:p,pwOrToken:u,organization:v,canGetReports:f,reportPath:m,containerToLoad:g,showDynamicReport:r,repoName:h,availableReports:y,fetchingReport:b};return w}),n("viewmodels/insight/widgets/active.report",["viewmodels/insight/reports/index"],function(e){function t(e){var t=this;t.Number=e}function n(e){var t=this;t.Name=ko.observable(e)}function a(t){e.containerToLoad("#"+t.Name())}var r=ko.observableArray([new t(1),new t(2),new t(3),new t(4),new t(5)]),i=ko.observable(r()[0]),s=ko.computed(function(){for(var e=i().Number,t=[],a=e-1;a>=0;a--)t.push(new n("Container"+a+1));return t});a(s()[0]);var o={numberOfContainers:r,selectedCount:i,reportContainers:s,setActiveReportContainer:a};return o}),n("viewmodels/insight/widgets/reports.list",["config.services","services/session","services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,n,a,r){function i(e){y(e),b(!0),r.currentModal(S)}function s(){return f||o(),!0}function o(){function e(){}return n.getEntityList(u,c().EntityType,c().ResourcePath,null,null,!1,null,"sName").then(e),l=v.subscribe(function(){m()&&m(null),h([]),d()}),throttledFilterToken=g.subscribe(function(e){v()&&(h([]),d(e))}),f=!0,!0}function d(e){var t={},t=p().Parameters;e?t.SearchFilter=e:t.SearchFilter=null,n.getEntityList(h,p().EntityType,p().ResourcePath,null,v().iD(),!0,t)}var l,c=ko.computed(function(){var n=t.currentUser();return n?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohorts","Cohort"):""}),p=ko.computed(function(){var n=t.currentUser();return n?new e.createEndPoint("1.0",t.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:0,Take:5e3}):""}),u=ko.observableArray(),v=ko.observable(),m=ko.observable(),g=ko.computed(m).extend({throttle:500}).extend({notify:"always"}),h=ko.observableArray(),y=ko.observable(),f=!1,b=ko.observable(!1),w=function(){var e=confirm("You are about to delete an individual.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(h.remove(y()),void n.deleteIndividual(y()))},k={title:"Delete Individual",entity:y,templatePath:"templates/patient.delete.html",showing:b,saveOverride:null,cancelOverride:null,deleteOverride:w,classOverride:null},S=new a.modal(k);S.canDelete(!0);var T={cohortsList:u,selectedCohort:v,cohortFilter:m,patientsList:h,activate:s,choosePatient:i};return T}),n("viewmodels/patients/index",["services/navigation","services/datacontext","services/session","config.services","plugins/router"],function(e,t,n,a,r){function i(){}function s(){function e(){}if(t.getEntityList(Y,B().EntityType,B().ResourcePath,null,null,!1,null,"sName").then(e),de(!0),A=H.subscribe(function(){z(!1),_(!1),U(0),j()&&j(null),K([]),o()}),R.push(A),F=G.subscribe(function(e){H()&&(z(!1),_(!1),U(0),K([]),o(e))}),R.push(F),n.currentUser().settings()){var a=t.getSettingsParam("TotalPatientCount");a&&M(parseInt(a))}return re=!0,!0}function o(e){var n={},n=q().Parameters;e?n.SearchFilter=e:n.SearchFilter=null,_(!1),t.getEntityList(K,q().EntityType,q().ResourcePath,null,H().iD(),!0,n,null,!0).then(d)}function d(){var e=K().length;0==e&&_(!0);var t=0===U()?M():U()+M();z(t>e?!1:!0),U(t)}function l(e){var n=!1,a=!1,r=!1,i=!1;if(ie()&&(ko.utils.arrayForEach(ie().programs.peek(),function(e){ko.utils.arrayForEach(e.modules.peek(),function(e){ko.utils.arrayForEach(e.actions.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(n=!0),ko.utils.arrayForEach(e.steps.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(n=!0),ko.utils.arrayForEach(e.responses.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(n=!0)})})})})}),ie().goals.peek()&&ko.utils.arrayForEach(ie().goals.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(r=!0),ko.utils.arrayForEach(e.tasks.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(r=!0)}),ko.utils.arrayForEach(e.barriers.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(r=!0)}),ko.utils.arrayForEach(e.interventions.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&(r=!0)})}),ie().notes.peek()&&ko.utils.arrayForEach(ie().notes.peek(),function(e){if(e.entityAspect.entityState.isAddedModifiedOrDeleted())switch(e.type().name().toLowerCase()){case"utilization":var n=ko.utils.arrayFirst(t.enums.visitTypes(),function(e){return e.isDefault()});e.visitType()&&!n&&(a=!0);break;default:e.text()&&(a=!0)}}),ie().todos.peek()&&ko.utils.arrayForEach(ie().todos.peek(),function(e){e.entityAspect.entityState.isAddedModifiedOrDeleted()&&e.title()&&(i=!0)}),n||a||r||i)){var s="You have unsaved - ";n&&(s+="\n-Action(s)"),a&&(s+="\n-Note(s)"),r&&(s+="\n-Goal(s)"),i&&(s+="\n-To Do(s)"),s+="\nPress OK to continue, or cancel to return to the patient.";var o=confirm(s);return o===!0?!0:(oe(!1),!1)}return!0}function c(){j(null)}function p(e){function n(){var e=[];ie()&&ie().programs()&&0===ie().programs().length&&e.push(t.getEntityList(null,J().EntityType,J().ResourcePath+i+"/Programs",null,null,!0)),e.push(m()),e.push(g()),e.push(h()),e.push(t.addPatientToRecentList(ie())),e.push(t.getEntityList(null,Z().EntityType,Z().ResourcePath+i+"/Contact",null,null,!0)),e.push(t.getEntityList(null,W().EntityType,W().ResourcePath+i+"/Observation/Problems",null,null,!0)),e.push(y()),e.push(t.getEntityList(null,X().EntityType,X().ResourcePath+i+"/PatientSystems",null,null,!0)),e.push(f()),e.push(b()),e.push(t.getCareTeam(null,ie().contactId()).then(u)),Q.all(e).then(v),r.navigate("#patients/"+i,!1)}if(le()){var a=l();if(!a)return!1}var i;if(oe(!1),ie()&&ie()===e)t&&m();else if(t){i=e.id?ko.unwrap(e.id):e;var s=[];s.push(t.getEntityById(ie,i,ae().EntityType,ae().ResourcePath,!0)),s.push(t.getEntityList(null,ee().EntityType,ee().ResourcePath+i+"/Goals",null,null,!0,null,null,!0)),s.push(t.getEntityList(null,ne().EntityType,ne().ResourcePath+i+"/Observations/Current",null,null,!0)),s.push(t.getEntityList(null,te().EntityType,te().ResourcePath+i+"/Notes/100",null,null,!0)),Q.all(s).then(n)}}function u(e){}function v(){ie().isLoaded(!0)}function m(){var e=new Date((new Date).setDate((new Date).getDate()-30));e=moment(e).format();var n=[];return n.push(t.getToDos(null,{StatusIds:[1,3],PatientId:ie().id()})),n.push(t.getToDos(null,{StatusIds:[2,4],PatientId:ie().id()})),Q.all(n)}function g(){return t.getInterventions(null,{StatusIds:[1,2,3],PatientId:ie().id()})}function h(){return t.getTasks(null,{StatusIds:[1,2,3,4],PatientId:ie().id()})}function y(){var e=ie().id();return t.getPatientAllergies(null,{StatusIds:[1,2,3,4,5,6,7]},e)}function f(){var e=ie().id();return t.getPatientMedications(null,{StatusIds:[1,2,3,4,5,6,7],CategoryIds:[1,2]},e)}function b(){var e=ie().id(),n=Q();return ie().gotMedicationFrequencies||(n=t.getPatientFrequencies(null,e,!0),ie().gotMedicationFrequencies=ko.observable(!0)),n}function w(){de(!de())}function k(){de(!1)}function S(){de(!0)}function T(){oe(!1)}function x(){oe(!0)}function P(e){return e?p(e):ie()||(oe(!0),de(!0)),re||s(),!0}function D(){return V()}function N(){de(!1),oe(!1),L(!1)}function C(){se(!se()),se()&&(de(!0),oe(!1))}function I(e){se(!1)}function O(){var e={},n=j(),e=q().Parameters;n?e.SearchFilter=n:e.SearchFilter=null;var a=ko.observableArray();t.getEntityList(a,q().EntityType,q().ResourcePath,null,H().iD(),!0,e).then(function(){K.push.apply(K,a()),d()})}function E(){}var A,M=ko.observable(50),F={},$="No records meet your search criteria",R=[],L=ko.observable(!1),V=ko.observable(!0),B=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"cohorts","Cohort"):!1}),U=ko.observable(0),z=ko.observable(!1),_=ko.observable(!1),q=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"cohortpatients","Patient",{Skip:U(),Take:M()}):!1}),Y=ko.observableArray(),H=ko.observable(),j=ko.observable(),G=ko.computed(j).extend({throttle:500}).extend({notify:"always"}),K=ko.observableArray(),W=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","PatientObservation"):!1}),X=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","PatientSystem"):!1}),J=(ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"PatientAllergy","PatientAllergy"):!1}),ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","Program"):!1})),Z=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","ContactCard"):!1}),ee=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","Goal"):!1}),te=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","Note"):!1}),ne=(ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","CareMember"):!1}),ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"Patient","PatientObservation"):!1})),ae=ko.computed(function(){return n.currentUser()?new a.createEndPoint("1.0",n.currentUser().contracts()[0].number(),"patient","Patient"):!1}),re=!1,ie=ko.observable(),se=ko.observable(!1),oe=ko.observable(!0),de=ko.observable(!0),le=ko.computed(t.hasChanges),ce=ko.utils.arrayFirst(e.navRoutes(),function(e){return"Individual"===e.title}),pe=ko.computed(function(){return ce&&ce.isActive()}),ue=r.activeInstruction.subscribe(function(e){var t=e&&e.fragment?e.fragment.substr(0,8):"";if(le()&&"patients"===t){if(V()&&!L()){var n=l();return n?(L(!0),V(!0),!0):(L(!1),V(!1),!1)}V()||L()?V()&&L()&&(V(!0),L(!1)):(L(!1),V(!0))}else V(!0),L(!1)},null,"beforeChange");R.push(ue);var ve={patientsListFlyoutOpen:oe,patientDataColumnOpen:de,canLoadMoreCohortPatients:z,showNoResultsMessage:_,noResultsMessage:$,cohortFilter:j,clearCohortFilter:c,togglePatientsColumn:w,minimizePatientsDataColumn:k,maximizePatientsDataColumn:S,minimizePatientsListFlyoutColumn:T,maximizePatientsListFlyoutColumn:x,choosePatient:p,patientsList:K,selectedPatient:ie,isEditing:se,save:I,loadMoreCohortPatients:O,toggleEditing:C,cohortsList:Y,selectedCohort:H,activate:P,deactivate:N,detached:E,navigation:e,title:"Individual",canDeactivate:D,hasChanges:le,attached:i,isComposed:pe,leaving:L,getPatientsToDos:m,getPatientsInterventions:g,getPatientsTasks:h,getPatientsAllergies:y,getPatientMedications:f,getPatientFrequencies:b};return ve}),n("viewmodels/patients/data/index",["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base"],function(e,t,n,a,r,i,s,o){function d(){I().activeDataType(null),h(),y(),b()}function l(){I().activeDataType(null),w(),i.getPatientsAllergies()}function c(){var e={title:"Data Entry",showSelectedPatientInTitle:!0,entity:I,templatePath:"viewmodels/templates/clinical.dataentry",showing:C,saveOverride:d,cancelOverride:l,deleteOverride:null,classOverride:"modal-lg"},t=new o.modal(e);s.currentModal(t),C(!C())}function p(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.isOpen=ko.observable(e.open),n.column=t,n.isFullScreen=ko.observable(!1)}function u(e,t,n){var a=this;a.name=ko.observable(e),a.isOpen=ko.observable(t).extend({notify:"always"}),a.isOpen.subscribe(function(){z(a)}),a.widgets=ko.observableArray(),$.each(n,function(e,t){a.widgets.push(new p(t,a))})}function v(){N.subscribe(function(e){r.checkIfAllObservationsAreLoadedYet(N().id()),M(null)}),L(U()[0])}function m(){B||(N()&&r.checkIfAllObservationsAreLoadedYet(N().id()),B=!0)}function g(){c()}function h(){if(0===N().allergies().length)return!1;var e=ko.utils.arrayFilter(N().allergies(),function(e){return e.needToSave()&&e.isValid()});if(e.length>0){r.saveAllergies(e).then(t);var t=function(e){ko.utils.arrayForEach(e,function(e){e.isNew(!1),e.isUserCreated(!1)})}}var n=ko.utils.arrayFilter(N().allergies(),function(e){return e.needToSave()&&!e.isValid()});k(n)}function y(){if(0===N().medications().length)return!1;var e=ko.utils.arrayFirst(N().medications(),function(e){return e.needToSave()&&e.isValid()});if(e){r.saveMedication(e).then(t);var t=function(e){}}else f()}function f(){var e=N().medications().slice(0);ko.utils.arrayForEach(e,function(e){e.isNew()&&!e.isValid()&&e.entityAspect.rejectChanges()})}function b(){function e(){var e=N().observations().slice(0),t=[];ko.utils.arrayForEach(e,function(e){e.deleteFlag()?t.push(e):"problems"!==e.type().name().toLowerCase()?e.isNew()?t.push(e):e.deleteFlag()&&t.push(e):e.entityAspect.entityState.isModified()||e.isNew()?(e.isValid()?e.entityAspect.acceptChanges():(e.entityAspect.rejectChanges(),t.push(e)),e.isNew(!1),e.deleteFlag()&&t.push(e)):e.deleteFlag()&&t.push(e)});for(var n=t.length>0;t.length>0;){var a=t[0];a.entityAspect.setDeleted(),a.entityAspect.acceptChanges(),t.splice(0,1)}n&&_(!0),N().observations.valueHasMutated(),M.valueHasMutated()}return 0===N().observations().length?!1:void r.saveObservations(N().id()).then(e)}function w(){var e=N().observations().slice(0),t=N().allergies().slice(0),n=N().medications().slice(0),a=[];ko.utils.arrayForEach(e,function(e){e.isNew()?a.push(e):e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(t,function(e){e.isNew()&&a.push(e)}),ko.utils.arrayForEach(n,function(e){e.isNew()&&e.entityAspect.rejectChanges()}),k(a);var r=M();M(null),M(r)}function k(e){for(;e.length>0;){var t=e[0];t.entityAspect.setDeleted(),t.entityAspect.acceptChanges(),e.splice(0,1)}}function S(e){M(e)}function T(e){e.column.isOpen(!1)}function x(e){e.column.isOpen(!0)}function P(e){e.isFullScreen(!e.isFullScreen())}function D(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=N,e.showDropdown=!0,e.showActions=!1,e.activationData={selectedPatient:e.selectedPatient,activeDataType:e.activeDataType,showDropdown:e.showDropdown,showActions:e.showActions},e.canSave=ko.observable(!0)}var N=ko.computed(function(){return i.selectedPatient()}),C=ko.observable(!1),I=ko.observable(new D),O={id:ko.observable(-1),name:ko.observable("Allergies")},E={id:ko.observable(-2),name:ko.observable("Medications")},A=ko.observableArray(),M=ko.observable(),F=ko.computed(function(){var e=r.enums.observationTypes(),t=[];return ko.utils.arrayFilter(e,function(e){"problems"!==e.name().toLowerCase()&&t.push(e)}),t}).extend({throttle:1}),R=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},L=ko.observable(),V=ko.observableArray(),B=!1,U=ko.observableArray([new u("dataType",!1,[{name:"Data Summary",path:"patients/widgets/data.summary.html",open:!0}])]),z=ko.computed({read:function(){return L()},write:function(e){e.isOpen()?L(e):e===L()&&e===U()[0]?L(U()[1]):e===L()&&L(U()[0])}}),_=ko.observable(!1),q={activate:v,attached:m,openColumn:L,columns:U,widgets:V,computedOpenColumn:z,selectedPatient:N,alphabeticalOrderSort:R,minimizeThisColumn:T,maximizeThisColumn:x,toggleFullScreen:P,activeDataType:M,setActiveDataType:S,dataTypes:F,saveAllergies:h,saveDataEntry:b,saveAllData:d,cancelDataEntry:w,title:"index",addData:g,dataObservations:A,needToRefreshObservations:_,modalEntity:I,allergiesType:O,medicationsType:E};return q}),n("viewmodels/patients/careplan/index",["plugins/router","services/navigation","config.services","models/base","services/session","services/datacontext","viewmodels/patients/index","viewmodels/patients/data/index","viewmodels/shell/shell"],function(e,t,n,a,r,i,s,o,d){function l(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=P,e.showDropdown=!0,e.showActions=!1,e.canSave=ko.observable(!0),e.activationData={selectedPatient:e.selectedPatient,activeDataType:e.activeDataType,showDropdown:e.showDropdown,showActions:e.showActions}}function c(){O().activeDataType(null),o.saveAllData()}function p(){O().activeDataType(null),o.cancelDataEntry()}function u(){d.currentModal(A),I(!I())}function v(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.isOpen=ko.observable(e.open),n.column=t,n.isFullScreen=ko.observable(!1),n.elementStateIds=e.elementStateIds,n.sortOverride=e.sortOverride}function m(e,t,n){var a=this;a.name=ko.observable(e),a.isOpen=ko.observable(t).extend({notify:"always"});var r=a.isOpen.subscribe(function(){Y(a)});T.push(r),a.widgets=ko.observableArray(),$.each(n,function(e,t){a.widgets.push(new v(t,a))})}function g(){S||(S=P.subscribe(function(e){R(null),L(null),V(null)}),T.push(S)),M(_())}function h(){B||(B=!0)}function y(e){return i.getEntityList(null,U().EntityType,z().ResourcePath+"/"+P().id()+"/Program/"+e.module().program().id()+"/Module/"+e.module().id()+"/Action/"+e.id(),null,null,!0)}function f(e){e.column.isOpen(!1)}function b(e){e.column.isOpen(!0)}function w(e){e.isFullScreen(!e.isFullScreen())}function k(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}var S,T=[],x=function(e,t){var n=e.elementStateModel().order(),a=t.elementStateModel().order(),r=e.name().toLowerCase(),i=t.name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},P=ko.computed(function(){return s.selectedPatient()}),D=ko.computed(function(){var e=[];return P()&&(e=P().programs(),ko.utils.arrayForEach(e,function(e){e.isOpen||(e.isOpen=ko.observable(!1),0!==e.modules().length&&e.isOpen(!0))})),e}),N=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},C=function(e,t){var n=Date.parse(e.attrEndDate()),a=Date.parse(t.attrEndDate());return n==a?0:isNaN(n)||n>a?-1:isNaN(a)||a>n?1:void 0},I=ko.observable(!1),O=ko.observable(new l),E={title:"Data Entry",showSelectedPatientInTitle:!0,entity:O,templatePath:"viewmodels/templates/clinical.dataentry",showing:I,saveOverride:c,cancelOverride:p,deleteOverride:null,classOverride:"modal-lg"},A=new a.modal(E),M=ko.observable(),F=ko.observableArray(),R=ko.observable(),L=ko.observable(),V=ko.observable(),B=(ko.computed(function(){var e=R();V(),L();if(e){var t=R();t&&0===t.steps().length&&(t.isLoading(!0),y(t).then(function(e){t.steps().length>0&&t.isLoading(!1)}))}}).extend({throttle:25}),!1),U=(ko.computed(function(){return new n.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"program","Program")}),ko.computed(function(){if(R()&&P()){var e=R();return new n.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient/"+P().id()+"/Program/"+e.module().program().id()+"/Module/"+e.module().id()+"/Action/"+e.id(),"Action")}})),z=ko.computed(function(){return P()?new n.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient"):void 0}),_=ko.observable(new m("carePlan",!1,[{name:"Active Programs",path:"patients/widgets/careplan.html",open:!0,elementStateIds:[2,3,4],sortOverride:x},{name:"Program History",path:"patients/widgets/careplan.html",open:!1,elementStateIds:[1,5,6],sortOverride:C}])),q=ko.observable(new m("actionDetails",!1,[{name:"ActionDetails",path:"viewmodels/patients/widgets/action.details",open:!0},{name:"ModuleDetails",path:"viewmodels/patients/widgets/module.details",open:!0},{name:"ProgramDetails",path:"viewmodels/patients/widgets/program.details",open:!0}])),Y=ko.computed({read:function(){return M()},write:function(e){e.isOpen()?M(e):e===M()&&"carePlan"===e.name()?M(q()):e===M()&&M(_())}}),Q={activate:g,attached:h,activeAction:R,activeModule:L,activeProgram:V,openColumn:M,planColumn:_,detailsColumn:q,widgets:F,computedOpenColumn:Y,selectedPatient:P,selectedPatientsPrograms:D,programsSortTwo:x,alphabeticalOrderSort:N,minimizeThisColumn:f,maximizeThisColumn:b,toggleFullScreen:w,modalShowing:I,toggleModalShowing:u,getStepsForAction:y,title:"index",toggleWidgetOpen:k};return Q}),n("viewmodels/patients/goals/index",["plugins/router","services/navigation","config.services","models/base","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell"],function(e,t,n,a,r,i,s,o){function d(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.column=t,n.isFullScreen=ko.observable(!1),n.statusIds=e.statusIds,n.canAdd=ko.observable(e.canadd),n.emptyMesssage=e.emptymessage,n.sortOverride=e.sortoverride,n.isOpen=ko.observable(e.open)}function l(e,t,n){var a=this;a.name=ko.observable(e),a.widgets=ko.observableArray(),a.isOpen=ko.observable(t).extend({notify:"always"});var r=a.isOpen.subscribe(function(){z(a)});x.push(r),$.each(n,function(e,t){a.widgets.push(new d(t,a))})}function c(e,t,n,a){function r(t){var r=t.httpResponse.data.Id;if(r){var s={};s.id=r,s.patientGoalId=o,s.statusId=1,n&&(s.startDate=n),a&&(s.assignedToId=a);var d=i.createEntity(e,s);return d}var l=t.results[0];return l.startDate(new Date),l.statusId(1),l.patientGoalId(o),l}var s=P().id(),o=t.id();return i.initializeEntity(null,e,s,o).then(r)}function p(e,t){var n=ko.observable(new y(e)),r=function(){i.saveGoal(n().goal)},s=function(){var e=n().goal;e.entityAspect.rejectChanges(),T(e,!0)};t=t?t:"Edit Goal";var d={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:"viewmodels/templates/goal.edit",showing:R,saveOverride:r,cancelOverride:s,deleteOverride:null,classOverride:null},l=new a.modal(d);R(!0),o.currentModal(l)}function u(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}function v(e){e.column.isOpen(!1)}function m(e){e.column.isOpen(!0)}function g(e){e.isFullScreen(!e.isFullScreen())}function h(){function e(e){var t=e.results[0];t.statusId(1),t.startDate(new Date(moment().format("MM/DD/YYYY"))),t.isNew(!0),t.patientId(P().id()),p(t,"Add Goal")}i.initializeEntity(F,"Goal",P().id()).then(e)}function y(e){var t=this;t.goal=e,t.activationData={goal:t.goal},t.canSave=ko.computed(function(){return t.goal.name()&&t.goal.sourceId()})}function f(){var e=I();e.entityAspect.rejectChanges(),ko.utils.arrayForEach(e.tasks(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.barriers(),function(e){e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(e.interventions(),function(e){e.entityAspect.rejectChanges()})}function b(){M(!1);var e=P.subscribe(function(e){I(null),O(null),E(null)});x.push(e),U(V())}function w(){A||(A=!0),M(!0)}function k(){M(!1)}function S(){}function T(e,t){function n(t){e.isLoaded=!0}var a=e.id(),r=e.patientId(),s=t?!0:!e.isLoaded;i.getEntityById(null,a,L().EntityType,L().ResourcePath+r+"/Goal/",s).then(n)}var x=[],P=ko.computed(function(){return s.selectedPatient()}),D=function(e,t){var n=e.endDate(),a=t.endDate();return n==a?0:isNaN(n)||n>a?-1:isNaN(a)||a>n?1:void 0},N=t.currentRoute.subscribe(function(){P()&&ko.utils.arrayForEach(P().goals(),function(e){e.isExpanded&&(e.isExpanded(!1),e.isOpen(!1))})});x.push(N);var C=ko.observableArray(),I=ko.observable(),O=ko.observable(),E=ko.observable(),A=!1,M=ko.observable(!0),F=ko.observable(),R=ko.observable(!0),L=(ko.computed(function(){return new n.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"goal","Goal")}),ko.computed(function(){return new n.createEndPoint("1.0",r.currentUser().contracts()[0].number(),"Patient","Goal")})),V=ko.observable(new l("goalColumn",!0,[{name:"Active Goals",path:"patients/widgets/goals.html",statusIds:["1","3"],canadd:!0,open:!0},{name:"Goal History",path:"patients/widgets/goals.html",statusIds:["2","4"],canadd:!1,open:!1,emptymessage:"No history available.",sortoverride:D}])),B=ko.observable(new l("goalDetails",!1,[{name:"GoalDetails",path:"viewmodels/patients/sections/goal.details",open:!0},{name:"TaskDetails",path:"viewmodels/patients/sections/task.details",open:!0},{name:"InterventionDetails",path:"viewmodels/patients/sections/intervention.details",open:!0}])),U=ko.observable(),z=ko.computed({read:function(){return U()},write:function(e){e.isOpen()?U(e):e===U()&&"goalColumn"===e.name()?U(B()):e===U()&&U(V())}}),_={activate:b,attached:w,deactivate:k,detached:S,activeGoal:I,activeTask:O,addEntity:c,activeIntervention:E,isComposed:M,computedOpenColumn:z,goalColumn:V,detailsColumn:B,widgets:C,minimizeThisColumn:v,maximizeThisColumn:m,toggleFullScreen:g,selectedPatient:P,cancelChanges:f,addGoal:h,editGoal:p,title:"Goals",getGoalDetails:T,toggleWidgetOpen:u};return _}),n("viewmodels/patients/history/index",["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base"],function(e,t,n,a,r,i,s,o){function d(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.isOpen=ko.observable(e.open),n.column=t,n.isFullScreen=ko.observable(!1),n.showEditButton=ko.computed(function(){e.contentItem,e.contentItem?e.contentItem():!1;return e.showEdit?e.showEdit():!1}),n.showDeleteButton=ko.computed(function(){return e.showDelete?e.showDelete():!1})}function l(e,t,n){var a=this;a.name=ko.observable(e),a.isOpen=ko.observable(t).extend({notify:"always"}),I=a.isOpen.subscribe(function(){V(a)}),a.widgets=ko.observableArray(),$.each(n,function(e,t){a.widgets.push(new d(t,a))})}function c(){return M&&M()&&M().isEditable()}function p(){if(D()){var e=C().slice(0).sort(N);e=e.slice(0,100),v(e)}}function u(e){var t=this;t.Name=ko.observable(e),t.Notes=ko.observableArray()}function v(e){E([]),ko.utils.arrayForEach(e,function(e){var t=e.localDate();if(moment(t).isValid()){var n=ko.utils.arrayFirst(E(),function(e){return e.Name()===t});n||(n=new u(t),E.push(n)),n.Notes.push(e)}})}function m(){F(L()[0]),p()}function g(){R||(R=!0)}function h(){I.dispose(),O.dispose()}function y(){M&&M.valueHasMutated()}function f(e){M(e)}function b(e){var t=this;t.note=e,t.activationData={note:t.note},t.canSave=ko.computed(function(){return t.note.isValid()})}function w(e){var t=ko.observable(new b(M())),n=function(){var e=t().note;e&&e.newContent()&&e.checkAppend(),r.saveNote(e).then(function(){A.removeAll()})},a=function(){var e=M();e.entityAspect.rejectChanges(),e.programIds.removeAll();var t=e.programIds();A().length>0&&(ko.utils.arrayPushAll(t,A()),A.removeAll()),e.newContent(""),e.entityAspect.setUnchanged()},i="Edit "+M().type().name()+" Note",d={title:i,showSelectedPatientInTitle:!0,entity:t,templatePath:"viewmodels/patients/notes/index",showing:B,saveOverride:n,cancelOverride:a,deleteOverride:null,classOverride:null},l=new o.modal(d);A.removeAll();var c=A();ko.utils.arrayPushAll(c,M().programIds()),B(!0),s.currentModal(l)}function k(){var e=M(),t=e.type().name(),n=confirm("You are about to delete a "+t+" note.  Press OK to continue, or cancel to return without deleting.");return n!==!0?!1:(M(null),void r.deleteNote(e))}function S(e){F(e)}function T(e){e.column.isOpen(!1)}function x(e){e.column.isOpen(!0)}function P(e){e.isFullScreen(!e.isFullScreen())}var D=ko.computed(function(){return i.selectedPatient()}),N=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},C=ko.computed(function(){var e=[];return D()&&(e=D().notes()),e}).extend({throttle:1}),I={},O={},O=C.subscribe(function(){p()}),E=ko.observableArray(),A=ko.observableArray([]),M=ko.observable(),F=(ko.computed(function(){var e=M();e&&e.type()&&"utilization"===e.type().name().toLowerCase()&&r.getNote(e.id(),e.patientId(),e.type().name())}),ko.observable()),R=!1,L=ko.observableArray([new l("historyList",!1,[{name:"History",path:"patients/widgets/history.list.html",open:!0}]),new l("details",!1,[{name:"Details",path:"patients/widgets/history.detail.html",open:!0,showEdit:c,showDelete:c,contentItem:M}])]),V=ko.computed({read:function(){return F()},write:function(e){e.isOpen()?F(e):e===F()&&e===L()[0]?F(L()[1]):e===F()&&F(L()[0])}}),B=ko.observable(!0),U={activate:m,selectedPatient:D,columns:L,computedOpenColumn:V,activeNote:M,setActiveNote:f,editClickFunc:w,deleteClickFunc:k,setOpenColumn:S,minimizeThisColumn:T,maximizeThisColumn:x,toggleFullScreen:P,groups:E,notes:C,attached:g,deactivate:h,compositionComplete:y,title:"index"};return U}),n("viewmodels/patients/medications/index",["plugins/router","services/navigation","config.services","services/session","services/datacontext","viewmodels/patients/index","viewmodels/shell/shell","models/base","viewmodels/patients/data/index"],function(e,t,n,a,r,i,s,o,d){function l(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.isOpen=ko.observable(e.open),n.column=t,n.isFullScreen=ko.observable(!1),n.filtersOpen=ko.observable(!0),n.activationData={widget:n,selectedPatient:T,defaultSort:e.defaultSort},n.allowAdd=e.allowAdd,n.statusIds=e.statusIds,n.medicationGroups=e.medicationGroups}function c(e,t,n){var a=this;a.name=ko.observable(e),a.isOpen=ko.observable(t).extend({notify:"always"}),a.isOpen.subscribe(function(){Q(a)}),a.widgets=ko.observableArray(),$.each(n,function(e,t){a.widgets.push(new l(t,a))})}function p(){d.addData()}function u(){T.subscribe(function(e){F(null),R(null)});Y(U()),H(!1)}function v(){P||(P=!0),H(!0)}function m(e,t){var n=ko.observable(new h(e)),a=function(){r.saveMedication(n().medication())},i=function(){var e=n().medication();e.entityAspect.rejectChanges()};t=t?t:"Edit Medication";var d={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:"viewmodels/patients/sections/medication.edit",showing:D,saveOverride:a,cancelOverride:i,deleteOverride:null,classOverride:"modal-lg"},l=new o.modal(d);D(!0),s.currentModal(l)}function g(e,t){var n=ko.observable(new y(e)),a=function(){function e(){self.modalEntity().allergy().isNew(!1),self.modalEntity().allergy().isUserCreated(!1),self.modalEntity().allergy().entityAspect.acceptChanges()}r.saveAllergies([n().allergy()],"Update").then(e);
},i=function(){var e=n().allergy();e.entityAspect.rejectChanges()};t=t?t:"Edit Allergy";var d={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:"viewmodels/templates/allergy.edit",showing:N,saveOverride:a,cancelOverride:i,deleteOverride:null,classOverride:"modal-lg"},l=new o.modal(d);N(!0),s.currentModal(l)}function h(e){var t=this;t.medication=ko.observable(e),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.medication()){var n=!!t.medication().name(),a=!!t.medication().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={selectedPatient:T,medication:t.medication,canSave:t.canSave,showing:N}}function y(e){var t=this;t.allergy=ko.observable(e),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.allergy()){var n=!!t.allergy().allergyName(),a=!!t.allergy().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={allergy:t.allergy,canSave:t.canSave,showing:N}}function f(e){Y(e)}function b(e){e.column.isOpen(!1)}function w(e){e.column.isOpen(!0)}function k(e){e.isFullScreen(!e.isFullScreen())}function S(e){var t=ko.utils.arrayFilter(e.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===e||e.isOpen(!e.isOpen())}var T=ko.computed(function(){return i.selectedPatient()}),x=function(e,t){var n=e.medSortDate(),a=t.medSortDate();return a>n?1:n>a?-1:0},P=!1,D=ko.observable(!1),N=ko.observable(!1),C=function(e,t){var n=this;n.name=ko.observable(e),n.medications=ko.observableArray([t]),n.sortedMedications=ko.computed(function(){var e=[];return e=n.medications().sort(x)}),n.firstMedication=ko.computed(function(){return n.sortedMedications()[0]}),n.isActive=ko.observable(!1),n.isExpanded=ko.observable(!1)},I=ko.computed(function(){var e=T().medications(),t=[];return ko.utils.arrayForEach(e,function(e){var n=e.name(),a="1"===e.statusId(),r=t.filter(function(e){return e.name()===n})[0];if(r)r.medications.push(e),!r.isActive()&&a&&r.isActive(!0);else{var i=new C(n,e);i.isActive(a),t.push(i)}}),t}),O=ko.computed(function(){var e=[];return e=I().filter(function(e){return e.isActive()})}),E=ko.computed(function(){var e=[];return e=I().filter(function(e){return!e.isActive()})}),A=ko.computed(r.medicationSaving),M=ko.observable(),F=ko.observable(),R=ko.observable(),L=ko.computed(function(){return["expand","type-small","name-small","strength-small","reason","status"]}),V=function(e){self.selectedSortColumn()&&-1!==self.selectedSortColumn().indexOf(e.sortProperty)?self.selectedSortColumn()&&"desc"===self.selectedSortColumn().substr(self.selectedSortColumn().length-4,4)?self.selectedSortColumn(null):self.selectedSortColumn(e.sortProperty+" desc"):self.selectedSortColumn(e.sortProperty)},B=[{name:"Allergies",path:"viewmodels/patients/widgets/allergies",open:!1,statusIds:[1,2,3,4,5,6,7]},{name:"Active Medications",path:"viewmodels/patients/widgets/medication.groups",open:!0,medicationGroups:O,allowAdd:!0},{name:"Inactive Medications",path:"viewmodels/patients/widgets/medication.groups",open:!1,medicationGroups:E,defaultSort:"endDate desc, name"}],U=ko.observable(new c("medications",!1,B)),z=ko.observable(new c("medicationDetails",!1,[{name:"MedicationDetails",path:"viewmodels/patients/sections/medication.details",open:!0},{name:"AllergyDetails",path:"viewmodels/patients/sections/allergy.details",open:!0}])),_=function(e){var t=this;t.activeMedication(e),t.activeAllergy(null)},q=function(e){var t=this;t.activeAllergy(e),t.activeMedication(null)},Y=ko.observable(),Q=ko.computed({read:function(){return Y()},write:function(e){e.isOpen()?Y(e):e===Y()&&"medicationColumn"===e.name()?Y(z()):e===Y()&&Y(U())}}),H=ko.observable(!0),j={medicationSaving:A,selectedSortColumn:M,activeMedicationColumns:L,toggleMedicationSort:V,activate:u,isComposed:H,activeMedication:F,activeAllergy:R,setActiveMedication:_,setActiveAllergy:q,selectedPatient:T,computedOpenColumn:Q,medicationColumn:U,detailsColumn:z,setOpenColumn:f,minimizeThisColumn:b,maximizeThisColumn:w,editMedication:m,editAllergy:g,toggleFullScreen:k,attached:v,title:"index",toggleWidgetOpen:S,addMedication:p};return j}),n("viewmodels/patients/notes/index",["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(t){var n=this;n.settings=t,n.note=n.settings.note,n.selectedTemplate=ko.observable(),n.showing=ko.computed(function(){return!!n.note.type()}),n.noteTypes=e.enums.noteTypes;n.note.type()?n.note.type().name().toLowerCase():null;n.templatePath=ko.computed(function(){var e=n.note.type(),t=e?e.name().toLowerCase():null;switch(t){case"touchpoint":return"viewmodels/templates/note.touchpoint.edit";case"utilization":return"viewmodels/templates/note.utilization.edit";case null:case void 0:return null;default:return"viewmodels/templates/note.general.edit"}return null}),n.saveNote=n.settings.saveNote||function(){return!1},n.cancelNote=n.settings.cancelNote||function(){return!1},n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0,n.validationErrors=ko.computed(function(){var e=n.note;e.isValid();return e.validationErrors()})},t.prototype.attached=function(){},t}),n("viewmodels/patients/overview/index",["services/session","services/datacontext","config.services","models/base","services/local.collections","viewmodels/patients/index"],function(e,t,n,a,r,i){function s(){_([]),q([]),Q(!1)}function o(e){Y(Y()&&-1!==Y().indexOf(e.sortProperty)?Y()&&"desc"===Y().substr(Y().length-4,4)?null:e.sortProperty+" desc":e.sortProperty)}function d(){i.getPatientsToDos()}function l(){W([]);var e=r.todos();return r.todos([]),setTimeout(function(){e&&e.length>0&&ko.utils.arrayForEach(e,function(e){e&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),i.getPatientsToDos()},50)}function c(){ae([]),ie(!1)}function p(e){re(re()&&-1!==re().indexOf(e.sortProperty)?re()&&"desc"===re().substr(re().length-4,4)?null:e.sortProperty+" desc":e.sortProperty)}function u(){i.getPatientsInterventions()}function v(){ye(!1)}function m(e){he(he()&&-1!==he().indexOf(e.sortProperty)?he()&&"desc"===he().substr(he().length-4,4)?null:e.sortProperty+" desc":e.sortProperty)}function g(){i.getPatientsTasks()}function h(){return T()||(k(),T(!0)),P()&&l(),!0}function y(){}function f(e,t){t()&&e(!e())}function b(e){e===N&&(C()||I())?(N(!N()),N()||E(!1)):e===I&&(C()||N())?(I(!I()),I()||A(!1)):e===C&&(I()||N())&&(C(!C()),C()||M(!1))}function w(e){O(e===O()?null:e)}function k(){return!0}function S(e,t,n,a){var r=this;r.name=ko.observable(e),r.parameters=t,r.columns=ko.observableArray(n),r.primarySort=a?a:"dueDate desc"}var T=ko.observable(!1),x=[],P=ko.computed(function(){return i.selectedPatient()}),D=new Date((new Date).setDate((new Date).getDate()-30));D=moment(D).format();var N=ko.observable(!0),C=ko.observable(!0),I=ko.observable(!0),O=ko.observable(),E=ko.observable(!1),A=ko.observable(!1),M=ko.observable(!1),F={id:ko.observable(""),name:ko.observable("Not Set")},$=ko.observable(),R=ko.observable(),L=ko.computed(function(){var e=P(),t=[];return e&&T()&&(t=[new S("Closed To-Do List",[new a.Parameter("patientId",e.id(),"=="),new a.Parameter("statusId","1","!="),new a.Parameter("statusId","3","!=")],["status-small","closedon","title","category","assignedto","priority-small"],"closedDate desc"),new S("Open To-Do List",[new a.Parameter("patientId",e.id(),"=="),new a.Parameter("statusId","2","!="),new a.Parameter("statusId","4","!=")],["priority","duedate","title","category","assignedto"])]),t}).extend({throttle:100}),V=L.subscribe(function(e){setTimeout(function(){$(null!==R()&&"undefined"!=typeof R()?L()[R()]:L()[1])},200)});x.push(V);var B=ko.computed(t.todosSaving),U=ko.computed(function(){var e=t.enums.toDoCategories(),n=e.slice(0,e.length);return-1===n.indexOf(F)&&n.push(F),n}),z=t.enums.priorities,_=ko.observableArray(),q=ko.observableArray(),Y=ko.observable(),Q=ko.observable(),H=$.subscribe(function(e){Y(null),e&&R(L().indexOf($()))});x.push(H);var j=ko.computed(function(){var e=_(),t=q(),n=[];if(e.length>0){var r=ko.utils.arrayFilter(U(),function(t){var n=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return n?!1:!0});ko.utils.arrayForEach(r,function(e){n.push(new a.Parameter("categoryId",e.id(),"!=")),n.push(new a.Parameter("categoryId",null,"!="))});var i=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(i=!0)}),i||(n.push(new a.Parameter("categoryId","","!=")),n.push(new a.Parameter("categoryId",null,"!=")))}if(t.length>0){var r=ko.utils.arrayFilter(z(),function(e){var n=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return n?!1:!0});ko.utils.arrayForEach(r,function(e){n.push(new a.Parameter("priorityId",e.id(),"!="))});var i=!1;ko.utils.arrayForEach(t,function(e){"0"===e.id()&&(i=!0)}),i||n.push(new a.Parameter("priorityId","","!="))}return n}),G=ko.computed(function(){var e=[];return $()&&(e=$().columns()),e}),K=ko.computed(function(){var e="";return $()&&(e=$().name()),e}),W=ko.observableArray([]),X=(ko.computed(function(){var e=[],n=(r.todos(),$()),a=[],i="",s=P();if(n){var s=s.todos();ko.utils.arrayForEach(n.parameters,function(e){a.push(e)}),j().length>0&&ko.utils.arrayForEach(j(),function(e){a.push(e)}),i=Y()?Y():n.primarySort,i+=", category.name, title",e=t.getToDosQuery(a,i),e=ko.utils.arrayFilter(e,function(e){return!e.isNew()&&!e.deleteFlag()})}return W(e),e}).extend({throttle:50}),ko.observable()),J=ko.observable(),Z=ko.computed(function(){var e=P(),t=[];return e&&T()&&(t=[new S("Closed Intervention List",[new a.Parameter("goal.patientId",e.id(),"=="),new a.Parameter("statusId","1","!=")],["status-small","closeddate","description-small","category","goal","assignedto"],"closedDate desc"),new S("Open Intervention List",[new a.Parameter("goal.patientId",e.id(),"=="),new a.Parameter("statusId","1","==")],["dueDate","description","category","goal","assignedto"],"dueDate desc")]),t}).extend({throttle:10}),ee=Z.subscribe(function(e){setTimeout(function(){X(J()?Z()[J()]:Z()[1])},200)});x.push(ee);var te=ko.computed(t.interventionsSaving),ne=ko.computed(function(){var e=t.enums.interventionCategories(),n=e.slice(0,e.length);return-1===n.indexOf(F)&&n.push(F),n}),ae=ko.observableArray(),re=ko.observable(),ie=ko.observable(),se=X.subscribe(function(e){re(null),e&&J(Z().indexOf(X()))});x.push(se);var oe=ko.computed(function(){var e=ae(),t=[];if(e.length>0){var n=ko.utils.arrayFilter(ne(),function(t){var n=ko.utils.arrayFirst(e,function(e){return e.id()===t.id()});return n?!1:!0});ko.utils.arrayForEach(n,function(e){t.push(new a.Parameter("categoryId",e.id(),"!="))});var r=!1;ko.utils.arrayForEach(e,function(e){""===e.id()&&(r=!0)}),r||(t.push(new a.Parameter("categoryId","","!=")),t.push(new a.Parameter("categoryId",null,"!=")))}return t}),de=ko.computed(function(){var e=[];return X()&&(e=X().columns()),e}),le=ko.computed(function(){var e="";return X()&&(e=X().name()),e}),ce=ko.computed(function(){var e=[],n=(r.interventions(),X()),a=[],i="",s=P();if(n){var s=s.goals();ko.utils.arrayForEach(n.parameters,function(e){a.push(e)}),oe().length>0&&ko.utils.arrayForEach(oe(),function(e){a.push(e)}),i=re()?re():n.primarySort,i+=", category.name, description",e=t.getInterventionsQuery(a,i)}return e}).extend({throttle:50}),pe=ko.observable(),ue=ko.observable(),ve=ko.computed(function(){var e=P(),t=[];return e&&T()&&(t=[new S("Closed Task List",[new a.Parameter("goal.patientId",e.id(),"=="),new a.Parameter("statusId","1","!="),new a.Parameter("statusId","3","!=")],["status-small","closeddate","targetdate","description-small","targetvalue-small","goal"],"closedDate desc"),new S("Open Task List",[new a.Parameter("goal.patientId",e.id(),"=="),new a.Parameter("statusId","2","!="),new a.Parameter("statusId","4","!=")],["startdate","targetdate","description-small","targetvalue","goal"],"targetDate")]),t}).extend({throttle:10}),me=ve.subscribe(function(e){setTimeout(function(){pe(ue()?ve()[ue()]:ve()[1])},200)});x.push(me);var ge=ko.computed(t.tasksSaving),he=ko.observable(),ye=ko.observable(),H=pe.subscribe(function(e){he(null),e&&ue(ve().indexOf(pe()))});x.push(H);var fe=ko.computed(function(){var e=[];return e}),be=ko.computed(function(){var e=[];return pe()&&(e=pe().columns()),e}),we=ko.computed(function(){var e="";return pe()&&(e=pe().name()),e}),ke=ko.computed(function(){var e=[],n=(r.tasks(),pe()),a=[],i="",s=P();if(n){var s=s.goals();ko.utils.arrayForEach(n.parameters,function(e){a.push(e)}),fe().length>0&&ko.utils.arrayForEach(fe(),function(e){a.push(e)}),i=he()?he():n.primarySort,i+=", status.name, description",e=t.getTasksQuery(a,i)}return e}).extend({throttle:50}),Se={activate:h,title:"Overview",selectedPatient:P,toggleWidgetOpen:b,todoFiltersHeaderOpen:E,interventionFiltersHeaderOpen:A,taskFiltersHeaderOpen:M,fullScreenWidget:O,toggleFullScreen:w,toggleHeaderOpen:f,todosPanelOpen:N,taskPanelOpen:C,interventionsPanelOpen:I,myToDos:W,activeTodoColumns:G,todosSaving:B,todoFiltersOpen:Q,resetTodoFilters:s,refreshTodoView:d,todoViews:L,computedTodoTitle:K,todoPriorities:z,todoCategories:U,selectedTodoPriorities:q,selectedTodoCategories:_,selectedTodoView:$,selectedTodoSortColumn:Y,toggleTodoSort:o,myInterventions:ce,activeInterventionColumns:de,interventionsSaving:te,interventionFiltersOpen:ie,resetInterventionFilters:c,refreshInterventionView:u,interventionViews:Z,computedInterventionTitle:le,interventionCategories:ne,selectedInterventionCategories:ae,selectedInterventionView:X,selectedInterventionSortColumn:re,toggleInterventionSort:p,myTasks:ke,activeTaskColumns:be,tasksSaving:ge,taskFiltersOpen:ye,resetTaskFilters:v,refreshTaskView:g,taskViews:ve,computedTaskTitle:we,selectedTaskView:pe,selectedTaskSortColumn:he,toggleTaskSort:m,detached:y};return Se}),n("viewmodels/patients/sections/additional.observations",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=function(){};return r.prototype.addNewObservation=function(){function e(){a().isNew(!0),t.additionalObservationsToEnter.push(a()),t.selectedAdditionalObservation(null)}var t=this,a=ko.observable(),r=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});r&&n.initializeObservation(a,"PatientObservation",r.id(),r.typeId(),t.selectedPatient().id()).then(e)},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.additionalObservations=ko.observableArray(),t.additionalObservationsToEnter=ko.observableArray(),t.selectedAdditionalObservation=ko.observable(),t.canAdd=ko.computed(function(){var e=!1;if(t.selectedAdditionalObservation()){var n=ko.utils.arrayFirst(t.additionalObservations(),function(e){return e.name()===t.selectedAdditionalObservation()});n&&(e=!0)}return e}),t.addtlObsBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,a,r){var i=$.Deferred();i.done(function(){a(this)});var s=e.toLowerCase(),o=t.additionalObservations().filter(function(e){return!!~e.name().toLowerCase().indexOf(s)});return i.resolveWith(o),i.promise()}}}),t.addtlObsBloodhound.initialize(),t.getAdditionalObservationsById=function(){if(t.activeDataType()){var e=t.selectedPatient().observations(),n=[];ko.utils.arrayForEach(e,function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!1&&e.isNew()&&n.push(e)}),t.additionalObservationsToEnter(n)}},t.activeDataType.subscribe(function(e){t.selectedAdditionalObservation(null),t.additionalObservations([]),t.getAdditionalObservations(),t.getAdditionalObservationsById()}),t.addNew=function(e){function a(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().isNew(!0),r().entityAspect.acceptChanges();var n=t.additionalObservationsToEnter.indexOf(e);t.additionalObservationsToEnter.splice(n+1,0,r()),r(null)}var r=ko.observable();return moment(e.startDate()).isValid()&&e.computedValue().value()?n.initializeObservation(r,"PatientObservation",e.observationId(),e.typeId(),e.patientId()).then(a):void 0}},r.prototype.attached=function(){var e=this;0===e.additionalObservations().length&&(e.getAdditionalObservations(),e.getAdditionalObservationsById())},r.prototype.getAdditionalObservations=function(){function e(){var e=ko.utils.arrayFilter(r.additionalObservations(),function(e){return!e.standard()});r.additionalObservations(e),r.addtlObsBloodhound.transport.constructor.resetCache()}var r=this;if(r.selectedPatient()&&r.activeDataType()&&-1!==r.activeDataType().id()&&-2!==r.activeDataType().id()){var i=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"patient/"+r.selectedPatient().id()+"/Observation/Type/"+r.activeDataType().id()+"/MatchLibrary/","Observation");return n.getEntityList(r.additionalObservations,"Observation",i.ResourcePath,"typeId",r.activeDataType().id(),!1).then(e)}},r}),n("viewmodels/patients/sections/additional.problem.observations",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=function(){var e=this;e.problemObservations=ko.observableArray()};return r.prototype.filterProblemObservations=function(){var e=this,t=e.problemObservations().slice(0),n=ko.utils.arrayFilter(t,function(t){var n=!0;return ko.utils.arrayForEach(e.selectedPatient().observations(),function(e){e.state()&&"active"===e.state().name().toLowerCase()&&e.name()===t.name()&&!e.deleteFlag()&&(n=!1)}),n});e.problemObservations(n),e.probObsBloodhound.transport.constructor.resetCache()},r.prototype.addNewObservation=function(){function e(e){a().isNew(!0),t.getProblemObservations(),t.selectedObservation(null)}var t=this;n.observationsSaving(!0);var a=ko.observable(),r=ko.utils.arrayFirst(t.problemObservations(),function(e){return e.name().toLowerCase()===t.selectedObservation().toLowerCase()});r&&n.initializeObservation(a,"PatientObservation",r.id(),r.typeId(),t.selectedPatient().id()).then(e)},r.prototype.activate=function(e){var t=this;t.settings=e,t.problemObservationTypeId="533d8278d433231deccaa62d",t.selectedPatient=t.settings.selectedPatient,t.selectedObservation=ko.observable(),t.canAdd=ko.computed(function(){var e=!1;if(t.selectedObservation()){var a=ko.utils.arrayFirst(t.problemObservations(),function(e){return e.name().toLowerCase()===t.selectedObservation().toLowerCase()});a&&(e=!0)}return n.observationsSaving()&&(e=!1),e}),t.probObsBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,remote:{url:"%QUERY",transport:function(e,n,a,r){var i=$.Deferred();i.done(function(){a(this)});var s=e.toLowerCase(),o=t.problemObservations().filter(function(e){return!!~e.name().toLowerCase().indexOf(s)});return i.resolveWith(o),i.promise()}}}),t.probObsBloodhound.initialize()},r.prototype.attached=function(){var e=this;0===e.problemObservations().length&&e.getProblemObservations()},r.prototype.getProblemObservations=function(){function e(){t.filterProblemObservations()}var t=this;return t.selectedPatient()?n.getEntityList(t.problemObservations,"Observation","fakeEndPoint","typeId",t.problemObservationTypeId,!1).then(e):void 0},r}),n("viewmodels/patients/sections/allergies.edit",["services/datacontext"],function(e){var t=function(){},n=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1};return t.prototype.allergyTypes=ko.computed(e.enums.allergyTypes),t.prototype.severities=ko.computed(e.enums.severities),t.prototype.reactions=ko.computed(e.enums.reactions),t.prototype.allergySources=ko.computed(e.enums.allergySources),t.prototype.allergyStatuses=ko.computed(e.enums.allergyStatuses),t.prototype.removeAllergy=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.newPatientAllergies=ko.computed(function(){var e=[],a=t.selectedPatient().allergies();return e=ko.utils.arrayFilter(a,function(e){return!e.deleteFlag()&&e.isNew()}),e.sort(n)}).extend({throttle:50})},t.prototype.attached=function(){},t}),n("viewmodels/patients/sections/allergies.search",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Search/allergy","AllergySearch"),i=function(){var e=this;e.allergies=ko.observableArray()};return i.prototype.filterAllergies=function(){var e=this,t=e.allergies().slice(0),n=ko.utils.arrayFilter(t,function(t){var n=!0;return ko.utils.arrayForEach(e.selectedPatient().allergies(),function(e){e.state()&&"active"===e.state().name().toLowerCase()&&e.name()===t.name()&&!e.deleteFlag()&&(n=!1)}),n});e.allergies(n),e.allergyBloodhound.transport.constructor.resetCache()},i.prototype.addNewAllergy=function(){function e(e){var s=e.results[0];i={Id:s.id(),Name:s.name(),DisplayName:s.name()},n.initializeAllergy(r,"PatientAllergy",s.id(),a.selectedPatient().id(),!0).then(t)}function t(e){r().isNew(!0),r().allergyName(i.Name),n.allergySaving(!1),a.selectedAllergy("")}var a=this;n.allergySaving(!0);var r=ko.observable(),i=ko.utils.arrayFirst(a.allergies(),function(e){return e.Name.toLowerCase()===a.trimmedAllergy().toLowerCase()});if(i)n.initializeAllergy(r,"PatientAllergy",i.Id,a.selectedPatient().id()).then(t);else{var s=a.trimmedAllergy().replace(" (New)","");n.allergySaving(!0),n.initializeNewAllergy(s).then(e)}},i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.selectedAllergy=ko.observable(""),i.trimmedAllergy=ko.computed(function(){return i.selectedAllergy().trim()}),i.resultsMessage=ko.observable(""),i.canAdd=ko.computed(function(){var e=!1,t=n.allergySaving(),a=i.trimmedAllergy();if(a){var r=ko.utils.arrayFirst(i.allergies(),function(e){return e.Name.toLowerCase().trim()===a.toLowerCase()});r||(e="(New)"===a.substr(a.length-5)),r&&r.isDuplicate!==!0&&(e=!0)}return t&&(e=!1),e}),i.allergyBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+r.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&SearchTerm="+searchQuery},ajax:{beforeSend:function(e,t){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",a.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(i.resultsMessage(""),i.resultsMessage(e.Message)):i.resultsMessage(""),i.allergyBloodhound.clear();var t=i.trimmedAllergy(),n=ko.utils.arrayFirst(i.selectedPatient().allergies(),function(e){return e.allergyName().toLowerCase().trim()===t.toLowerCase()&&"Active"===e.status().name()});ko.utils.arrayForEach(e.Allergies,function(e){e.DisplayName=e.Name;var t=ko.utils.arrayFirst(i.selectedPatient().allergies(),function(t){return t.allergyName().toLowerCase().trim()===e.Name.toLowerCase().trim()&&"Active"===t.status().name()});(t||n&&n.allergyName().toLowerCase().trim()===e.Name.toLowerCase().trim())&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)}),i.allergies(e.Allergies);var a={Id:-1,Name:t,DisplayName:t+" (New)"},r=ko.utils.arrayFirst(e.Allergies,function(e){return e.Name.toLowerCase().trim()===t.toLowerCase()});return r||n||e.Allergies.push(a),e.Allergies},rateLimitWait:500,cache:!1}}),i.allergyBloodhound.initialize()},i.prototype.attached=function(){var e=this;0===e.allergies().length},i.prototype.getAllergies=function(){var e=this;e.selectedPatient()},i}),n("viewmodels/patients/sections/allergy.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){var s=(ko.observable(!0),function(){});return s.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.allergy=t.settings.activeAllergy,t.selectedPatient=r.selectedPatient,t.isFullScreen=ko.observable(!1),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.edit=function(){r.editAllergy(t.allergy(),"Edit Allergy")},t.isNotesExpanded=ko.observable(!1),t["delete"]=function(){var e=confirm("You are about to delete a medication.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(n.deletePatientAllergy(t.allergy()),void t.settings.activeAllergy(null))}},s.prototype.detached=function(){},s}),n("viewmodels/patients/sections/background",["models/base","services/datacontext","viewmodels/shell/shell"],function(e,t,n){var a=function(){};return a.prototype.activate=function(a){var r=this;r.settings=a,r.selectedPatient=r.settings.selectedPatient,r.background=r.selectedPatient.background,r.backgroundModalShowing=ko.observable(!1),r.saveBackground=function(){t.saveIndividual(r.selectedPatient)},r.cancelBackground=function(){r.selectedPatient.entityAspect.rejectChanges()};var i={title:"Edit Background",showSelectedPatientInTitle:!0,entity:r.selectedPatient,templatePath:"templates/background.html",showing:r.backgroundModalShowing,saveOverride:r.saveBackground,cancelOverride:r.cancelBackground,deleteOverride:null,classOverride:null};r.modal=new e.modal(i),r.isOpen=ko.observable(!1),r.isEditing=ko.observable(!1),r.isExpanded=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.backgroundModalShowing(!1);else{n.currentModal(r.modal),r.backgroundModalShowing(!0);var e=r.backgroundModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)}},a.prototype.attached=function(){},a}),n("viewmodels/patients/sections/barrier.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){function s(t,n,a,r,s){var o={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:a,showing:u,saveOverride:r,cancelOverride:s,deleteOverride:null,classOverride:null},d=new e.modal(o);u(!0),i.currentModal(d)}function o(e){n.saveBarrier(e)}function d(e){e.entityAspect.rejectChanges()}function l(e){r.getGoalDetails(e,!0)}function c(e,t){var n=this;n.entity=e,n.activationData={entity:n.entity},n.canSave=ko.computed(function(){var e=n.entity[t]();return e})}var p=function(){},u=ko.observable(!0);return p.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.barrier=t.settings.barrier,t.computedBarrier=ko.computed(function(){return t.barrier}).extend({throttle:75}),t.isExpanded=ko.observable(!1),t.isDetailsExpanded=ko.observable(!1),t.hasDetails=ko.computed(function(){var e=t.barrier.details();return null!=e&&e.length>0}),t.toggleIsExpanded=function(){t.isExpanded(!t.isExpanded())},t.toggleDetailsExpanded=function(){var e=t.isDetailsExpanded(),n=t.barrier.details();(n||e)&&t.isDetailsExpanded(!t.isDetailsExpanded())},t.editBarrier=function(e){var t=ko.observable(new c(e,"name")),n=function(){o(e)},a=function(){d(e),l(e.goal())};s("Edit Barrier",t,"viewmodels/templates/barrier.edit",n,a)},t.deleteBarrier=function(e){function t(){e&&e.goal()&&e.goal().barriers.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var a=confirm("You are about to delete a barrier.  Press OK to continue, or cancel to return without deleting.");if(a!==!0)return!1;e.goal();ko.utils.arrayForEach(e.goal().tasks(),function(t){var a=ko.utils.arrayFirst(t.barrierIds(),function(t){return t.id()===e.id()});a&&(t.barrierIds.remove(a),n.saveTask(t))}),ko.utils.arrayForEach(e.goal().interventions(),function(t){var a=ko.utils.arrayFirst(t.barrierIds(),function(t){return t.id()===e.id()});a&&(t.barrierIds.remove(a),n.saveIntervention(t))}),e.entityAspect.rejectChanges(),e.deleteFlag(!0),n.saveBarrier(e).then(t)}},p}),n("viewmodels/patients/sections/basic.observations",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=function(){var e=this;e.basicObservations=ko.observableArray(),e.observationsEndPoint=ko.computed(function(){var e=a.currentUser();return e?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","PatientObservation"):""})};return r.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},r.prototype.activate=function(e){var t=this;t.settings=e,t.activeDataType=t.settings.activeDataType,t.selectedPatient=t.settings.selectedPatient,t.getBasicObservationsById=function(){function e(e){ko.utils.arrayForEach(t.basicObservations(),function(e){e.typeId()===t.activeDataType().id()&&e.standard()===!0&&e.isNew(!0)})}if(t.activeDataType()){var a=t.selectedPatient().observations(),r=[];ko.utils.arrayForEach(a,function(e){e.isNew()&&e.typeId()===t.activeDataType().id()&&e.standard()===!0&&-1===r.indexOf(e)&&r.push(e)}),0===r.length&&"Problems"!==t.activeDataType().name()?n.getEntityList(t.basicObservations,t.observationsEndPoint().EntityType,t.observationsEndPoint().ResourcePath+t.selectedPatient().id()+"/Observation","typeId",t.activeDataType().id(),!0).then(e):t.basicObservations(r)}},0===t.basicObservations().length&&t.getBasicObservationsById(),t.computedBasicObservations=ko.computed(function(){var e=t.basicObservations();return e=ko.utils.arrayFilter(e,function(e){return e.isNew()}),e.sort(t.alphabeticalNameSort)}).extend({throttle:50}),t.addNew=function(e){function a(){ko.utils.arrayForEach(r().values(),function(e){e.previousValue().value(null),e.previousValue().source(null),e.previousValue().startDate(null),e.previousValue().unit(null)}),r().isNew(!0),r().entityAspect.acceptChanges();var n=t.basicObservations.indexOf(e);t.basicObservations.splice(n+1,0,r()),r(null)}var r=ko.observable();moment(e.startDate()).isValid()&&n.initializeObservation(r,"PatientObservation",e.observationId(),e.typeId(),e.patientId()).then(a)}},r.prototype.attached=function(){},r.prototype.detached=function(){},r}),n("viewmodels/patients/team/index",["services/session","services/datacontext","viewmodels/patients/index","models/base","viewmodels/shell/shell","viewmodels/home/contacts/index"],function(e,n,a,r,i,s){function o(e,t){var n=this;n.name=ko.observable(e.name),n.path=ko.observable(e.path),n.isOpen=ko.observable(e.open),n.column=t,n.isFullScreen=ko.observable(!1),n.activationData={widget:n,careMembers:V,sortFunction:e.sortFunction},n.allowAdd=e.allowAdd,n.statusIds=e.statusIds}function d(e,t,n){var a=this;a.name=ko.observable(e),a.widgets=ko.observableArray(),$.each(n,function(e,t){a.widgets.push(new o(t,a))})}function l(e){e.column.isOpen(!1)}function c(e){e.column.isOpen(!0)}function p(){u().then(y),q(!1)}function u(){function t(e){}return L()?n.saveCareTeam(L()).then(t):(H(n.createEntity("CareTeam",{id:-1,contactId:E().contactCard().id(),createdById:e.currentUser().userId()})),H().members=ko.observableArray(),H().members.push(Q()),n.saveCareTeam(H()).then(t))}function v(){q(!1),Y().careMember().entityAspect.rejectChanges()}function m(e){return!0}function g(e){var t=this;t.careMember=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;return t.careMember()&&(e=t.careMember().isValid()&&m(t.careMember())),e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={
careMember:t.careMember,careTeamMembers:V,selectedPatient:E,careMemberRoles:A,canSave:t.canSave,pcmContactSubType:F,pcpContactSubType:R,showing:e,addContactReturnedCallback:h}}function h(e){var t={title:"Assign Care Team",entity:Y,templatePath:"viewmodels/templates/careMember.edit",showing:q,saveOverride:u,cancelOverride:v,deleteOverride:null,classOverride:"modal-lg",customButtons:[{btnEnabled:Y().canSave,btnFunction:p,btnText:"Save + New"}]},n=new r.modal(t);e?(Q().contactId(e.id()),t.title+=" - "+e.fullName()):Q().contactId(null),Y().careMember(Q()),i.currentModal(n),q(!0)}function y(){var t=L()?L().id():null;Q(n.createEntity("CareMember",{id:--O,contactId:null,careTeamId:t,distanceUnit:"mi",statusId:1,core:!1,dataSource:"Engage",createdById:e.currentUser().userId()})),Q().isNew(!0),Y().careMember(Q()),i.currentModal(G),q(!0)}function f(e){e.contact()&&s.editContact(e.contact())}function b(e){var t={title:"Edit Care Team Member - "+e.contact().fullName(),entity:Y,templatePath:"viewmodels/templates/careMember.edit",showing:q,saveOverride:u,cancelOverride:v,deleteOverride:null,classOverride:"modal-lg"},n=new r.modal(t);Y().careMember(e),i.currentModal(n),q(!0)}function w(e){confirm("are you sure you want to delete the care member: "+e.contact().fullName()+" ("+e.computedRoleName()+") ")&&e.contactId()&&e.careTeamId()&&n.deleteCareTeamMember(e).then(k)}function k(){B(null)}function S(){return!0}function T(e){N(e===N()?null:e)}function x(){C(!C())}function P(){n||(n=t("services/datacontext"))}function D(){}var N=ko.observable(),C=ko.observable(!0),I=ko.observable(!0),O=(ko.observable(!1),0);P();var E=ko.computed(function(){return a.selectedPatient()}),A=ko.observableArray([]),M=2;A(n.getContactTypes(M,"root"));var F=ko.observable(ko.utils.arrayFirst(A(),function(e){return"Primary Care Manager"==e.role()})),R=ko.observable(ko.utils.arrayFirst(A(),function(e){return"Primary Care Physician"==e.name()})),L=ko.computed(function(){var e=null;return E()&&E().contactCard()&&E().contactCard().careTeam&&E().contactCard().careTeam()&&(e=E().contactCard().careTeam()),e}).extend({throttle:50}),V=ko.computed(function(){var e=[],t=L();return t&&(e=t.members()),e}).extend({throttle:50}),B=ko.observable(),U=(E.subscribe(function(e){B(null)}),function(e,t){if(e.core()&&!t.core())return-1;if(!e.core()&&t.core())return 1;if(e.core()==t.core()){var n=e.computedRoleName()?e.computedRoleName().toLowerCase():"",a=t.computedRoleName()?t.computedRoleName().toLowerCase():"";return n==a?0:n>a?1:-1}return 0}),z=function(e,t){var n=e.updatedOn()?e.updatedOn():e.createdOn();n=moment(n).format("MM/DD/YYYY");var a=t.updatedOn()?t.updatedOn():t.createdOn();if(a=moment(a).format("MM/DD/YYYY"),n==a){var r=e.computedRoleName()?e.computedRoleName().toLowerCase():"",i=t.computedRoleName()?t.computedRoleName().toLowerCase():"";return r==i?0:r>i?1:-1}return a>n?1:-1},_=ko.observable(new d("careMembers",!1,[{name:"Active Team",path:"viewmodels/patients/widgets/careMembers",open:!0,statusIds:[1],allowAdd:!0,sortFunction:U},{name:"Team History",path:"viewmodels/patients/widgets/careMembers",open:!1,statusIds:[2,3],allowAdd:!1,sortFunction:z}])),q=ko.observable(!1),Y=ko.observable(new g(q)),Q=ko.observable(),H=ko.observable(),j={title:"Assign Care Team",entity:Y,templatePath:"viewmodels/templates/careMember.edit",showing:q,saveOverride:u,cancelOverride:v,deleteOverride:null,classOverride:"modal-lg",customButtons:[{btnEnabled:Y().canSave,btnFunction:p,btnText:"Save + New"}]},G=new r.modal(j),K=ko.computed(function(){var e=B();return e&&e.isEditable()?!0:!1}).extend({throttle:100}),W=ko.computed(function(){return K()}).extend({throttle:100}),X=ko.computed(function(){var e="",t=B(),n=t?t.contact():null;return t&&n&&(e=" - "+n.firstName()+" "+n.lastName()),e}).extend({throttle:100}),J=ko.observable(!0),Z={activate:S,detached:D,isComposed:J,careTeamColumn:_,selectedPatient:E,addCareMember:y,showEditButton:K,showDeleteButton:W,editCareMember:b,deleteCareMember:w,editCareMemberContact:f,careMembers:V,selectedCareMember:B,selectedCareMemberName:X,careMemberRoles:A,pcmContactSubType:F,pcpContactSubType:R,toggleOpenColumn:x,fullScreenWidget:N,leftColumnOpen:C,toggleFullScreen:T,activeWidgetOpen:I,minimizeThisColumn:l,maximizeThisColumn:c};return Z}),n("viewmodels/patients/sections/care.team",["models/base","services/datacontext","services/session","viewmodels/shell/shell","viewmodels/patients/team/index"],function(e,t,n,a,r){function i(e,t){var n=this;n.selectedPatient=ko.observable(e),n.saveType=t,n.canSaveObservable=ko.observable(!1),n.canSave=ko.computed({read:function(){return n.canSaveObservable()},write:function(e){n.canSaveObservable(e)}}),n.activationData={selectedPatient:n.selectedPatient,canSave:n.canSave,saveType:n.saveType}}var s=function(e,t){if(e.core()&&!t.core())return-1;if(!e.core()&&t.core())return 1;if(e.core()==t.core()){var n=e.computedRoleName()?e.computedRoleName().toLowerCase():"",a=t.computedRoleName()?t.computedRoleName().toLowerCase():"";return n==a?0:n>a?1:-1}return 0},o=function(){};return o.prototype.activate=function(a){var o=this;o.selectedPatient=a.selectedPatient,o.careTeam=ko.computed(function(){var e=o.selectedPatient.contactCard()&&o.selectedPatient.contactCard().careTeam?o.selectedPatient.contactCard().careTeam():null;return e}).extend({throttle:50}),o.careMembers=ko.computed(function(){var e=o.careTeam(),t=e?e.members():[];return t}).extend({throttle:50}),o.isOpen=ko.observable(!0),o.primaryCareManager=ko.computed(function(){var e=o.careTeam();return e&&e.primaryCareManagers().length>0?e.primaryCareManagers()[0]:null}),o.primaryCarePhysician=ko.computed(function(){var e=o.careTeam();return e&&e.primaryCarePhysicians().length>0?e.primaryCarePhysicians()[0]:null}),o.primaryCareTeam=ko.computed(function(){var e=o.careMembers(),t=[],n=o.primaryCarePhysician(),a=o.primaryCareManager();return ko.utils.arrayForEach(e,function(e){e.core()&&!e.isNew()&&1==e.statusId()&&(n&&e.id()==n.id()||a&&e.id()==a.id()||t.push(e))}),t=t.sort(s)}).extend({throttle:50}),o.isSaving=ko.observable(!1),o.canAssignToMe=ko.computed(function(){var e=o.selectedPatient.isLoaded(),t=o.isSaving(),a=o.careMembers(),i=o.primaryCareManager();if(!i)var s=ko.utils.arrayFirst(a,function(e){return e.contactId()===n.currentUser().userId()&&e.roleId()==r.pcmContactSubType().id()});return e&&!t&&!s}).extend({throttle:50}),o.canReassignToMe=ko.computed(function(){var e=o.careMembers(),t=o.primaryCareManager(),a=o.selectedPatient.isLoaded(),r=o.isSaving();return e.length>0&&a&&t&&!r?t.contactId()!=n.currentUser().userId():!1}).extend({throttle:50}),o.saveType=ko.observable(),o.saveOverride=function(){var e=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(e){var a=(ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===n.currentUser().userId()}),o.selectedPatient.contactCard()&&o.selectedPatient.contactCard().careTeam()?o.selectedPatient.contactCard().careTeam().members():[]),r=ko.utils.arrayFirst(a,function(e){return e.primary()});t.saveCareMemberOld(r,o.saveType())}},o.cancelOverride=function(){t.cancelEntityChanges(o.selectedPatient);var e=o.selectedPatient.contactCard()&&o.selectedPatient.contactCard().careTeam()?o.selectedPatient.contactCard().careTeam().members():[];ko.utils.arrayForEach(e,function(e){t.cancelEntityChanges(e)})},o.editModalShowing=ko.observable(!1),o.modalEntity=ko.observable(new i(o.selectedPatient,o.saveType));var d={title:"Edit Care Team",showSelectedPatientInTitle:!0,entity:o.modalEntity,templatePath:"viewmodels/templates/care.team.edit",showing:o.editModalShowing,saveOverride:o.saveOverride,cancelOverride:o.cancelOverride,deleteOverride:null,classOverride:null};o.modal=new e.modal(d)},o.prototype.addCareMember=function(){r.addCareMember()},o.prototype.assignToMe=function(){function e(e){e&&i.isSaving(!1)}var a,i=this,s=r.pcmContactSubType().id(),o=i.selectedPatient,d=o.contactCard()&&o.contactCard().careTeam()?o.contactCard().careTeam().id():null,l=t.getUserCareManager(),c=l.id();if(!i.isSaving()&&s){i.isSaving(!0);var p=i.primaryCareManager();p&&p.core(!1);var u=ko.utils.arrayFirst(i.careMembers(),function(e){return e.contactId()==n.currentUser().userId()&&e.roleId()==s&&(!e.core()||1!=e.statusId())});if(!u){var v=t.createEntity("CareMember",{id:-1,contactId:c,roleId:s,careTeamId:d,distanceUnit:"mi",statusId:1,core:!0,dataSource:"Engage",createdById:n.currentUser().userId()});return v.isNew(!0),d?a=i.selectedPatient.contactCard().careTeam():(a=t.createEntity("CareTeam",{id:-1,contactId:i.selectedPatient.contactId(),createdById:n.currentUser().userId()}),a.members=ko.observableArray(),a.members.push(v)),t.saveCareTeam(a).then(e)}u.core(!0),u.statusId(1),t.saveCareTeam(i.selectedPatient.contactCard().careTeam()).then(e)}else console.log("assignToMe blocked since it is currently saving")},o.prototype.saveCareTeam=function(e){var a=e?e:n.currentUser().userId(),r=ko.utils.arrayFirst(t.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});if(r){var i=ko.utils.arrayFirst(t.enums.careManagers(),function(e){return e.id()===a}),s=t.createEntity("CareMember",{id:-1,patientId:self.selectedPatient.id(),preferredName:i.preferredName(),typeId:r.id(),gender:"n",primary:!0,contactId:a});t.saveCareMemberOld(s,"Insert")}},o.prototype.attached=function(){},o.prototype.detached=function(){var e=this;e.primaryCareTeam.dispose(),e.canAssignToMe.dispose(),e.canReassignToMe.dispose(),e.primaryCarePhysician.dispose(),e.primaryCareManager.dispose()},o}),n("viewmodels/patients/sections/clinicalBackground",["models/base","services/datacontext","viewmodels/shell/shell"],function(e,t,n){var a=function(){};return a.prototype.activate=function(a){var r=this;r.settings=a,r.selectedPatient=r.settings.selectedPatient,r.clinicalBackground=r.selectedPatient.clinicalBackground,r.backgroundModalShowing=ko.observable(!1),r.saveBackground=function(){t.saveIndividual(r.selectedPatient)},r.cancelBackground=function(){r.selectedPatient.entityAspect.rejectChanges()};var i={title:"Edit Clinical Background",showSelectedPatientInTitle:!0,entity:r.selectedPatient,templatePath:"templates/clinicalBackground.html",showing:r.backgroundModalShowing,saveOverride:r.saveBackground,cancelOverride:r.cancelBackground,deleteOverride:null,classOverride:null};r.modal=new e.modal(i),r.isOpen=ko.observable(!1),r.isEditing=ko.observable(!1),r.isExpanded=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.backgroundModalShowing(!1);else{n.currentModal(r.modal),r.backgroundModalShowing(!0);var e=r.backgroundModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)}},a.prototype.attached=function(){},a}),n("viewmodels/patients/sections/communications",["models/base","services/datacontext","viewmodels/shell/shell","viewmodels/home/contacts/index"],function(e,t,n,a){var r=function(){};return r.prototype.activate=function(e){var t=this;t.contactCard=e.contactCard,t.communicationModalShowing=ko.observable(!1),t.primaryCommunications=ko.computed(function(){var e=[],n=t.contactCard();if(n){var a=ko.utils.arrayFirst(n.phones(),function(e){return e.phonePreferred()});a&&(a.template="templates/phone.html",e.push(a));var r=ko.utils.arrayFirst(n.phones(),function(e){return e.textPreferred()});r&&r!==a&&(r.template="templates/phone.html",e.push(r));var i=ko.utils.arrayFirst(n.emails(),function(e){return e.preferred()});i&&(i.template="templates/email.html",e.push(i));var s=ko.utils.arrayFirst(n.addresses(),function(e){return e.preferred()});s&&(s.template="templates/address.html",e.push(s))}return e}).extend({throttle:25}),t.secondaryCommunications=ko.computed(function(){var e=[],n=t.contactCard();return n&&(n.phoneOptedOut()||ko.utils.arrayForEach(n.phones(),function(t){t.phonePreferred()||t.textPreferred()||t.optOut()||(t.template="templates/phone.html",e.push(t))}),n.phoneOptedOut()&&!n.textOptedOut()&&ko.utils.arrayForEach(n.phones(),function(t){t.textPreferred()||!t.isText()||t.optOut||(t.template="templates/phone.html",e.push(t))}),n.emailOptedOut()||ko.utils.arrayForEach(n.emails(),function(t){t.preferred()||t.optOut()||(t.template="templates/email.html",e.push(t))}),n.addressOptedOut()||ko.utils.arrayForEach(n.addresses(),function(t){t.preferred()||t.optOut()||(t.template="templates/address.html",e.push(t))})),e}).extend({throttle:25}),t.isOpen=ko.observable(!0),t.isEditing=ko.observable(!1),t.editContact=function(){a.editPatientContact(t.contactCard())},t.isValid=ko.observable(!0)},r.prototype.attached=function(){},r}),n("viewmodels/patients/sections/data.list",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/data/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){function s(e){function t(e){var t=this;t.observations=e}var n=[],a=[];return ko.utils.arrayForEach(e,function(e){-1===n.indexOf(e.name())&&n.push(e.name())}),ko.utils.arrayForEach(n,function(n){var r=ko.utils.arrayFilter(e,function(e){return n===e.name()});a.push(new t(r))}),a}function o(e){var t=this;t.isOpen=ko.observable(!1),t.isLoadingObs=ko.observable(!1),t.hasBeenExpanded=ko.observable(!1),t.observations=ko.observableArray(e),t.computedObservations=ko.computed(function(){ko.utils.arrayForEach(t.observations(),function(e){e.endDate()});var e=ko.utils.arrayFilter(t.observations(),function(e){return!e.deleteFlag()});return 0===e.length?[]:(e=e.sort(c),e.slice(1,e.length))}).extend({throttle:50}),t.parentObservation=ko.computed(function(){var e=t.observations();if(0===e.length)return[];e=e.sort(c);var n=e[0];return n}).extend({throttle:50})}var d=ko.computed(function(){return new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient","PatientObservation")}),l=function(e,t){var n=e.parentObservation().type().name(),a=t.parentObservation().type().name(),r=e.parentObservation().name().toLowerCase(),i=t.parentObservation().name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},c=function(e,t){var n=Date.parse(e.endDate()),a=Date.parse(t.endDate());return n==a?0:isNaN(n)||n>a?-1:isNaN(a)||a>n?1:void 0},p=function(){};return p.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=ko.observable(t.settings.selectedPatient),t.groupArray=ko.observableArray(),t.blowUpObservations=ko.computed(function(){r.needToRefreshObservations();return r.needToRefreshObservations()&&(r.needToRefreshObservations(!1),t.groupArray([])),!1}),t.dataObservations=ko.computed(function(){var e=t.selectedPatient().observations(),n=ko.utils.arrayFilter(e,function(e){return!e.isNew()&&!e.deleteFlag()});return n}).extend({throttle:50}),t.dataObservationGroups=ko.computed({read:function(){var e=t.dataObservations();return theseObservationGroups=s(e),ko.utils.arrayForEach(theseObservationGroups,function(e){var n=ko.utils.arrayFirst(t.groupArray(),function(t){return t.parentObservation()?t.parentObservation().name()===e.observations[0].name():!1});if(n)ko.utils.arrayForEach(e.observations,function(e){-1===n.observations.indexOf(e)&&n.observations.push(e)});else{var a=new o(e.observations);t.groupArray.push(a)}}),t.groupArray()},write:function(e){t.groupArray([])}}).extend({throttle:50}),t.selectedPatient.subscribe(function(){t.dataObservationGroups(!1)}),t.computedObservationGroups=ko.computed(function(){var e=t.dataObservationGroups();return ko.utils.arrayForEach(e,function(e){e&&0===e.length&&t.dataObservationGroups.remove(e)}),e&&e.length>0?e.sort(l):[]}).extend({throttle:500}),t.removeObservation=function(e){e.deleteFlag(!0),r.saveDataEntry()},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1}},p.prototype.toggleExpand=function(e){function t(t){e.isLoadingObs(!1),e.hasBeenExpanded(!0)}if(e.isOpen(!e.isOpen()),e.isOpen())if(e.hasBeenExpanded());else{e.isLoadingObs(!0);var a=e.parentObservation().observationId(),r=e.parentObservation().patientId();n.getEntityList(null,d().EntityType,d().ResourcePath+r+"/Observations/"+a+"/Historical",null,null,!0).then(t)}},p.prototype.attached=function(){},p}),n("viewmodels/patients/sections/demographics",["durandal/app","viewmodels/shell/shell","models/base","services/datacontext","services/formatter"],function(e,t,n,a,r){var i=function(){};return i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.editModalShowing=ko.observable(!1);var s={title:"Edit Individual",showSelectedPatientInTitle:!0,entity:i.selectedPatient,templatePath:"templates/patient.html",showing:i.editModalShowing,classOverride:null};i.modal=new n.modal(s),i.isOpen=ko.observable(!0),i.isEditing=ko.observable(!1),i.toggleEditing=function(){if(i.isEditing())i.editModalShowing(!1);else{t.currentModal(i.modal),i.editModalShowing(!0);var e=i.editModalShowing.subscribe(function(){i.isEditing(!1),e.dispose()})}i.isEditing(!i.isEditing()),i.isOpen(!0)},i.toggleFlagged=function(){var e=i.selectedPatient.flagged();e=!e,i.selectedPatient.flagged(e);var t=e?1:0;a.saveChangesToPatientProperty(i.selectedPatient,"flagged",t,[])},i.showFullSSN=function(){function e(e){if(e&&e.SSN){var t=r.formatSeparators(e.SSN.replace(/\D/g,""),"XXX-XX-XXXX","-");alert("Full SSN: "+t)}else alert("Full SSN is not available")}a.getFullSSN(i.selectedPatient.id()).then(e)},i.canViewFullSSN=ko.computed(function(){return!0}),i.primaryIdLabel=ko.observable(),i.primaryIdTitle=ko.observable(),i.primaryIdValue=ko.observable(),i.primaryId=ko.computed(function(){var e=(i.selectedPatient,i.selectedPatient.patientSystems(),i.selectedPatient.getPrimaryPatientSystem());return e&&(i.primaryIdLabel(e.system().displayLabel()),i.primaryIdTitle(e.system().displayLabel()+": "+e.value()),i.primaryIdValue(e.value())),e})},i}),n("viewmodels/patients/sections/dropdown.w.addnew",[],function(){var e=[],t=function(){};return t.prototype.cancelChanges=function(e,t){var n=this;n.newCustomValue&&n.newCustomValue(""),n.selectedValue(null),n.searchQueryText&&n.searchQueryText(null),n.isEditModeOnly()||(n.isCreateNew(!1),n.isDropDownFocused(!0))},t.prototype.checkEscape=function(e,t){var n=this,a=t.which||t.keyCode;27===a&&n.cancelChanges()},t.prototype.getCustomValue=function(){var e=this;return e.newCustomValue?e.newCustomValue:e.selectedValue},t.prototype.activate=function(t){var n=this;n.selectionLabel=t.selectionLabel,n.optionsLabel=t.optionsLabel,n.placeholderText=t.placeholderText,n.selectedValue=t.selectedValue,n.optionTextProp=t.optionTextProp?t.optionTextProp:"Text",n.optionIdValueProp=t.optionIdValueProp?t.optionIdValueProp:null,n.AddNewOptionText=t.AddNewOptionText,n.isAddNewOption=t.isAddNewOption,n.isCreateNew=t.isCreateNew,n.isCreateNewEnabled=t.isCreateNewEnabled,n.isEnabled=t.isEnabled,n.selectOptions=t.selectOptions,n.newCustomValue=t.newCustomValue?t.newCustomValue:null,n.isSearch=!0,n.isEditModeOnly=t.isEditModeOnly?t.isEditModeOnly:ko.observable(!1),n.searchQueryText=ko.observable(),n.isFocused=ko.observable(),n.isDropDownFocused=ko.observable(),n.getSelectedValueText=function(){var e="";return e=n.selectedValue()&&n.selectedValue().hasOwnProperty(n.optionTextProp)?n.selectedValue()[n.optionTextProp]():n.selectedValue()};var a={};a[n.optionTextProp]=n.AddNewOptionText,a.Value=n.AddNewOptionText,a.id=-1,n.addNewOptionToSelection=function(){n.isAddNewOption&&n.selectOptions&&-1===ko.utils.arrayIndexOf(n.selectOptions(),a)&&n.isCreateNewEnabled()&&n.selectOptions.push(a)};var r=t.selectOptions.subscribe(function(e){n.selectOptions()&&n.addNewOptionToSelection()});n.selectOptions().length>0&&n.addNewOptionToSelection(),e.push(r);var i=n.selectedValue.subscribe(function(e){if(n.isCreateNewEnabled()){var t="";if(t=e&&e.hasOwnProperty(n.optionTextProp)?e[n.optionTextProp]():e,t===n.AddNewOptionText&&n.isCreateNew){n.isCreateNew(!0);var a=n.searchQueryText?n.searchQueryText():"";setTimeout(function(){n.selectedValue&&!n.selectedValue.hasOwnProperty(n.optionTextProp)?n.selectedValue(a):n.selectedValue(null)},5),n.newCustomValue&&n.newCustomValue(a),n.isFocused(!0)}}});e.push(i)},t.prototype.detached=function(){ko.utils.arrayForEach(e,function(e){e.dispose()})},t}),n("viewmodels/patients/sections/focus.areas",["models/base","services/datacontext","services/session","viewmodels/shell/shell","viewmodels/patients/data/index"],function(e,t,n,a,r){function i(e){var n=this;n.activeDataType=ko.observable(),n.selectedPatient=ko.observable(e),n.showDropdown=!0,n.showActions=!1,n.activationData={selectedPatient:n.selectedPatient,activeDataType:n.activeDataType,showDropdown:n.showDropdown,showActions:n.showActions},n.canSave=ko.computed(function(){var e=!0,a=(t.observationsSaving(),n.selectedPatient().observations());return 0===a.length&&(e=!1),ko.utils.arrayForEach(a,function(t){t.type()&&"problems"===t.type().name().toLowerCase()&&!t.isValid()&&(e=!1)}),t.observationsSaving()&&(e=!1),e})}var s=function(){};return s.prototype.alphabeticalSort=function(e,t){return e.name().toLowerCase()==t.name().toLowerCase()?e.name().toLowerCase()>t.name().toLowerCase()?1:-1:e.name().toLowerCase()>t.name().toLowerCase()?1:-1},s.prototype.activate=function(t){var n=this;n.selectedPatient=t.selectedPatient,n.patientsObservations=n.selectedPatient.observations,n.problems=ko.computed(function(){var e=n.patientsObservations(),t=ko.utils.arrayFilter(e,function(e){var t=!1;return e.type()&&"problems"===e.type().name().toLowerCase()&&(t=e.displayId()&&e.state()&&e.displayId()>0&&"active"===e.state().name().toLowerCase()&&!e.deleteFlag()?!0:!1),t});return t}).extend({throttle:15}),n.isExpanded=ko.observable(!1),n.primaryProblems=ko.computed(function(){var e=[],t=n.problems().sort(n.alphabeticalSort),a=!n.isExpanded();return ko.utils.arrayForEach(t,function(t){"1"===t.display().id()&&(e.length<5||!a)&&e.push(t)}),e}).extend({throttle:15}),n.secondaryProblems=ko.computed(function(){var e=[],t=n.problems().sort(n.alphabeticalSort),a=!n.isExpanded();return ko.utils.arrayForEach(t,function(t){"2"===t.display().id()&&(e.length<5||!a)&&e.push(t)}),e}).extend({throttle:15}),n.focusProblemModalShowing=ko.observable(!1),n.saveProblemObservations=r.saveDataEntry,n.cancelProblemObservations=function(){var e=ko.utils.arrayFilter(n.selectedPatient.observations(),function(e){return e.type()&&"problems"===e.type().name().toLowerCase()}),t=[];for(ko.utils.arrayForEach(e,function(e){e.isNew()?(e.deleteFlag(!0),e.entityAspect.acceptChanges(),t.push(e)):e.entityAspect.rejectChanges()});t.length>0;){var a=t[0];a.entityAspect.setDeleted(),a.entityAspect.acceptChanges(),t.splice(0,1)}},n.modalEntity=ko.observable(new i(n.selectedPatient)),n.isOpen=ko.observable(!0),n.isFullScreen=ko.observable(!1),n.toggleEditing=function(){var t={title:"Focus Problems",showSelectedPatientInTitle:!0,entity:n.modalEntity,templatePath:"viewmodels/templates/focusproblems",showing:n.focusProblemModalShowing,saveOverride:n.saveProblemObservations,cancelOverride:n.cancelProblemObservations,classOverride:"modal-lg"};n.modal=new e.modal(t),a.currentModal(n.modal),n.focusProblemModalShowing(!0),n.isOpen(!0)}},s.prototype.attached=function(){},s}),n("viewmodels/patients/sections/goal.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){function s(e){e.checkAppend(),n.saveBarrier(e)}function o(e){e.entityAspect.rejectChanges()}function d(e){r.getGoalDetails(e,!0)}function l(t,n,a,r,s){var o={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:a,showing:p,saveOverride:r,cancelOverride:s},d=new e.modal(o);p(!0),i.currentModal(d)}function c(e){var t=this;t.entity=e,t.activationData={entity:t.entity},t.canSave=ko.computed(function(){var e=t.entity.isValid();return e})}var p=ko.observable(!0),u=function(){};return u.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.goal=t.settings.activeGoal,t.selectedPatient=r.selectedPatient,t.isFullScreen=ko.observable(!1),t.computedGoal=ko.computed(function(){return t.goal}).extend({throttle:60}),t.isGoalDetailsExpanded=ko.observable(!1),t.hasDetails=ko.computed(function(){var e=t.goal()?t.goal().details():[];return null!=e&&e.length>0}),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.toggleGoalDetailsExpanded=function(){var e=t.isGoalDetailsExpanded(),n=t.goal().details();(n||e)&&t.isGoalDetailsExpanded(!t.isGoalDetailsExpanded())},t.edit=function(){r.editGoal(t.goal(),"Edit Goal")},t["delete"]=function(){var e=confirm("You are about to delete a goal.  Press OK to continue, or cancel to return without deleting.");return e!==!0?!1:(n.deleteGoal(t.goal()),void t.settings.activeGoal(null))},t.addBarrier=function(e){function n(e){t.editBarrier(e,"Add Barrier")}r.addEntity("Barrier",e).then(n)},t.editBarrier=function(e,t){var n=e.goal(),a=ko.observable(new c(e,"name")),r=function(){s(e)},i=function(){o(e),d(n)};t=t?t:"Edit Barrier",l(t,a,"viewmodels/templates/barrier.edit",r,i)}},u.prototype.detached=function(){var e=this;e.hasDetails.dispose(),e.computedGoal.dispose()},u}),n("viewmodels/patients/sections/goals",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell","durandal/activator"],function(e,t,n,a,r,i,s){function o(t,n,a,r,s){var o={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:a,showing:u,saveOverride:r,cancelOverride:s,deleteOverride:null,classOverride:null},d=new e.modal(o);u(!0),i.currentModal(d)}function d(e){e.isNew(!1),n.saveIntervention(e)}function l(e){n.saveTask(e)}function c(e){r.getGoalDetails(e)}function p(e,t){var n=this;n.entity=e,n.activationData={entity:n.entity},n.canSave=ko.computed(function(){var e=n.entity.isValid();return e})}var u=ko.observable(!0),v=function(){var e=this;e.token={},e.selectedPatientChanged=!1};return v.prototype.deactivate=function(){var e=this;e.token.dispose(),e.computedGoals.dispose()},v.prototype.activate=function(e){var t=this;t.activeGoal=e.activeGoal,t.activeTask=e.activeTask,t.activeIntervention=e.activeIntervention,t.goalsSortTwo=function(e,t){var n=e.status().order(),a=t.status().order(),r=e.name().toLowerCase(),i=t.name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},t.settings=e,t.selectedPatient=r.selectedPatient,t.token=t.selectedPatient.subscribe(function(){t.selectedPatientChanged=!0,t.deactivate()}),t.statusIds=t.settings.statusIds,t.emptyMessage=t.settings.emptyMessage?t.settings.emptyMessage:"No goals defined for the individual.",t.sortOverride=t.settings.sortOverride?t.settings.sortOverride:t.goalsSortTwo,t.computedGoals=ko.computed({read:function(){var e=ko.utils.arrayFilter(t.selectedPatient().goals(),function(e){return!e.isNew()&&-1!==t.statusIds.indexOf(e.statusId())});return ko.utils.arrayForEach(e,function(e){e.isExpanded||(e.isExpanded=ko.observable(!1),e.isOpen=ko.observable(!1)),e.isNew()||c(e)}),e.length>0&&(e=e.sort(t.sortOverride)),e},disposeWhen:function(){return t.selectedPatientChanged}}).extend({throttle:50}),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.addTask=function(e){function n(e){t.editTask(e,"Add Task")}var a=new Date(moment().format("MM/DD/YYYY"));t.addEntity("Task",e,a).then(n)},t.addIntervention=function(e){function n(e){e.isNew(!0),e.watchDirty(),t.editIntervention(e,"Add Intervention")}var r=new Date(moment().format("MM/DD/YYYY"));t.addEntity("Intervention",e,r,a.currentUser().userId()).then(n)},t.editIntervention=function(e,t){var a=e.goal(),r=ko.observable(new p(e,"description")),i=function(){d(e),a.isOpen(!1),a.isOpen(!0)},s=function(){n.cancelEntityChanges(e),c(a)};t=t?t:"Edit Intervention",o(t,r,"viewmodels/templates/intervention.edit",i,s)},t.editTask=function(e,t){var a=e.goal(),r=ko.observable(new p(e,"description")),i=function(){l(e),a.isOpen(!1),a.isOpen(!0)},s=function(){n.cancelEntityChanges(e),c(a)};t=t?t:"Edit Task",o(t,r,"viewmodels/templates/task.edit",i,s)}},v.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},v.prototype.setActiveGoal=function(e){this.activeGoal(e),this.activeTask(null),this.activeIntervention(null)},v.prototype.setActiveTask=function(e){this.activeTask(e),this.activeGoal(null),this.activeIntervention(null)},v.prototype.setActiveIntervention=function(e){this.activeIntervention(e),this.activeGoal(null),this.activeTask(null)},v.prototype.addEntity=function(e,t,a,r){function i(t){var i=t.httpResponse.data.Id;if(i){var s={};s.id=i,s.patientGoalId=d,s.statusId=1,a&&(s.startDate=a),r&&(s.assignedToId=r);var o=n.createEntity(e,s);return o}var l=t.results[0];return l.startDate(new Date(moment().format("MM/DD/YYYY"))),l.statusId(1),l.patientGoalId(d),l}var s=this,o=s.selectedPatient().id(),d=t.id();return n.initializeEntity(null,e,o,d).then(i)},v}),n("viewmodels/patients/sections/intervention.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){function s(t,n,a,r,s){var o={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:a,showing:v,saveOverride:r,cancelOverride:s,deleteOverride:null,classOverride:null},d=new e.modal(o);v(!0),i.currentModal(d)}function o(e){e.checkAppend(),n.saveBarrier(e)}function d(e){function t(){e.clearDirty()}e.checkAppend(),n.saveIntervention(e).then(t)}function l(e){e.entityAspect.rejectChanges()}function c(e){r.getGoalDetails(e,!0)}function p(e){var t=this;t.entity=e,t.activationData={entity:t.entity},t.canSave=ko.computed(function(){var e=t.entity.isValid();return e})}var u=function(){},v=ko.observable(!0);return u.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.intervention=t.settings.activeIntervention,t.isFullScreen=ko.observable(!1),t.isDetailsExpanded=ko.observable(!1),t.hasDetails=ko.computed(function(){var e=t.intervention()?t.intervention().details():[];return null!=e&&e.length>0}),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.toggleDetailsExpanded=function(){var e=t.isDetailsExpanded(),n=t.intervention().details();(n||e)&&t.isDetailsExpanded(!t.isDetailsExpanded())},t.addBarrier=function(e){function a(e){var a=n.createComplexType("Identifier",{id:e.id()});t.intervention().barrierIds().push(a),t.editBarrier(e,"Add Barrier")}r.addEntity("Barrier",e.goal()).then(a)},t.editBarrier=function(e,n){var a=e.goal(),r=ko.observable(new p(e,"name")),i=function(){o(e),d(t.intervention())},u=function(){l(e),l(t.intervention()),c(a)};n=n?n:"Edit Barrier",s(n,r,"viewmodels/templates/barrier.edit",i,u)},t.editIntervention=function(e){c(e.goal());var t=ko.observable(new p(e,"description")),n=function(){d(e)},a=function(){e.clearDirty(),l(e),c(e.goal())};s("Edit Intervention",t,"viewmodels/templates/intervention.edit",n,a)},t.deleteIntervention=function(e){function a(){e&&e.goal()&&e.goal().interventions.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var r=confirm("You are about to delete an intervention.  Press OK to continue, or cancel to return without deleting.");if(r!==!0)return!1;e.goal();e.entityAspect.rejectChanges(),e.deleteFlag(!0),n.saveIntervention(e).then(a),t.settings.activeIntervention(null)}},u}),n("viewmodels/patients/sections/medication.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){
var s=(ko.observable(!0),function(){});return s.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.medication=t.settings.activeMedication,t.selectedPatient=r.selectedPatient,t.isFullScreen=ko.observable(!1),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.edit=function(){var e="Engage"===t.medication().dataSource();e&&r.editMedication(t.medication(),"Edit Medication")},t.isNotesExpanded=ko.observable(!1),t["delete"]=function(){var e="Engage"===t.medication().dataSource();if(e){var a=confirm("You are about to delete a medication.  Press OK to continue, or cancel to return without deleting.");if(a!==!0)return!1;n.deletePatientMedication(t.medication()),t.settings.activeMedication(null)}},t.createdString=ko.computed(function(){var e="",n=t.medication();if(!n)return"";var a=n.createdOn();return e+=a?a+" on ":""}),t.updatedString=ko.computed(function(){var e="";if(!n)return"";var n=t.medication(),a=n.updatedOn();return e+=a?a+" on ":""})},s.prototype.detached=function(){},s}),n("viewmodels/patients/sections/medication.edit",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){function r(e,t){var n=this;n.Text=e,t?n.Value=t:n.Value=e}var i=[],s=" (New)",o={NoMedSelected:"NoMedSelected",MedSelected:"MedSelected",AddNewMed:"AddNewMed",AddNewMedValues:"AddNewMedValues"},d=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Search/Meds/ProprietaryNames","PatientMedication"),l=function(){var e=this;e.dosageForms=ko.observableArray(),e.strengths=ko.observableArray(),e.units=ko.observableArray(),e.routes=ko.observableArray(),e.frequency=ko.observableArray(),e.checkForDropdownValues=function(t){0===e.dosageForms.peek().length&&t&&t.form.peek()&&e.dosageForms([new r(t.form.peek())]),0===e.strengths.peek().length&&t&&t.strength.peek()&&e.strengths([new r(t.strength.peek())]),0===e.routes.peek().length&&t&&t.route.peek()&&e.routes([new r(t.route.peek())])}};return l.prototype.freqWhens=ko.computed(n.enums.freqWhens),l.prototype.sources=ko.computed(n.enums.allergySources),l.prototype.types=ko.computed(n.enums.medSuppTypes),l.prototype.categories=ko.computed(n.enums.medicationCategories),l.prototype.statuses=ko.computed(n.enums.medicationStatuses),l.prototype.durationUnits=ko.computed(n.enums.durationUnits),l.prototype.refusalReasons=ko.computed(n.enums.refusalReasons),l.prototype.medicationReviews=ko.computed(n.enums.medicationReviews),l.prototype.removeMedication=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},l.prototype.getFrequencyOptions=function(e,t){return n.getPatientFrequencies(e,t().id())},l.prototype.activate=function(e){var r=this;r.settings=e,r.initialized=!1,r.lastMedName="",r.selectedPatient=r.settings.selectedPatient,r.medication=r.settings.medication,r.showing=ko.computed({read:function(){return!0}}),r.getFrequencyOptions(r.frequency,r.selectedPatient),r.isCreateNewFrequencyEnabled=ko.observable(!0),r.newPatientMedication=ko.computed({read:function(){if(r.medication&&r.medication())return r.checkForDropdownValues(r.medication()),r.medication();var e=r.selectedPatient().medications(),t=ko.utils.arrayFirst(e,function(e){return!e.deleteFlag.peek()&&e.isNew.peek()});return r.checkForDropdownValues(t),t}}).extend({throttle:50}),r.trimmedMedication=ko.computed({read:function(){var e=r.newPatientMedication;return e()?e().name():""}}).extend({throttle:75}),r.trimmedForm=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().form()?e().form():""}}).extend({throttle:75}),r.trimmedStrength=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().strength()?e().strength():""}}).extend({throttle:75}),r.trimmedRoute=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().route()?e().route():""}}).extend({throttle:75}),r.showOtherReason=ko.computed({read:function(){var e=r.newPatientMedication;return e()&&e().refusalReason()?"Other"===e().refusalReason().name():(e()&&e().otherRefusalReason(null),!1)}}).extend({throttle:75}),r.showRefusalReason=ko.computed({read:function(){var e=r.newPatientMedication;if(e()&&e().status()){var t=e().status().name(),n="Refused"===t||"Not Done Medical"===t;return n||(e().otherRefusalReason(null),e().refusalReasonId(null)),n}return!1}}),r.resultsMessage=ko.observable(""),r.medication&&!r.medication()&&r.initializeMedSearch(),r.isDuplicate=ko.observable(!1),r.isAddingNewRouteValue=ko.observable(!1),r.isAddingNewFormValue=ko.observable(!1),r.isAddingNewStrengthValue=ko.observable(!1),r.isAddingNewFrequencyValue=ko.observable(!1),r.isCreateNewEnabled=ko.observable(!1),r.isDropdownEnabled=ko.observable(!1),r.isNewMedicationName=ko.observable(!1),r.setInvalidStartDate=ko.computed(function(){return!r.newPatientMedication()||r.newPatientMedication()&&-1!==r.newPatientMedication().validationErrorsArray().indexOf("startDate")}),r.setInvalidPrescribedDate=ko.computed(function(){return!r.newPatientMedication()||r.newPatientMedication()&&-1!==r.newPatientMedication().validationErrorsArray().indexOf("prescribedDate")}),r.setInvalidOrderedDate=ko.computed(function(){return!r.newPatientMedication()||r.newPatientMedication()&&-1!==r.newPatientMedication().validationErrorsArray().indexOf("orderedDate")}),r.setInvalidRxDate=ko.computed(function(){return!r.newPatientMedication()||r.newPatientMedication()&&-1!==r.newPatientMedication().validationErrorsArray().indexOf("rxDate")}),r.setInvalidEndDate=ko.computed(function(){return!r.newPatientMedication()||r.newPatientMedication()&&-1!==r.newPatientMedication().validationErrorsArray().indexOf("endDate")}),r.newPatientMedication()&&r.newPatientMedication().name()&&r.newPatientMedication().canSave()?(r.lastMedName=r.newPatientMedication().name(),r.screenMode=ko.observable(o.MedSelected)):(r.lastMedName="",r.screenMode=ko.observable(o.NoMedSelected)),r.canAdd=ko.computed({read:function(){var e=!1,t=n.medicationSaving(),a=r.trimmedMedication(),i=(r.selectedPatient().medications(),r.screenMode),s=r.isDuplicate();return a&&(e=!0),e=i&&i()==o.NoMedSelected?!1:!0,t&&(e=!1),r.newPatientMedication.peek()&&(s&&(e=!1),r.newPatientMedication().canSave(e)),e}}).extend({throttle:200}),r.medicationBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+d.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&Term="+searchQuery},ajax:{beforeSend:function(e,t){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",a.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(r.resultsMessage(""),r.resultsMessage(e.Message)):r.resultsMessage(""),r.medicationBloodhound.clear();var t=r.trimmedMedication().trim();r.newPatientMedication().name(r.ltrim(r.newPatientMedication().name())),ko.utils.arrayForEach(e.ProprietaryNames,function(e){e.DisplayName=e.Text;var t=ko.utils.arrayFirst(r.selectedPatient().medications(),function(t){return t.name().toLowerCase().trim()===e.Text.toLowerCase().trim()&&1==t.statusId()});t&&t!==r.newPatientMedication()&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)});var n={Id:-1,Text:t,DisplayName:t+s,Value:t},a=ko.utils.arrayFirst(e.ProprietaryNames,function(e){return e.Text.toLowerCase().trim()===t.toLowerCase()});return a||e.ProprietaryNames.push(n),e.ProprietaryNames},rateLimitWait:500,cache:!1}}),r.ltrim=function(e){return e?e.replace(/^\s+/,""):e},r.addNewOptionText="-Add New-",r.resetDropdowns=function(){r.newPatientMedication&&r.newPatientMedication()&&(r.newPatientMedication().strength(""),r.newPatientMedication().form(""),r.newPatientMedication().route(""),r.newPatientMedication().familyId(""),r.newPatientMedication().customFrequency(""),r.newPatientMedication().frequency(null),r.isAddingNewFrequencyValue(!1)),r.screenMode()!==o.AddNewMed&&(r.isAddingNewRouteValue(!1),r.isAddingNewStrengthValue(!1),r.isAddingNewFormValue(!1),r.screenMode()===o.AddNewMedValues&&(r.screenMode(o.MedSelected),r.newPatientMedication().isCreateNewMedication(!1)))},r.clearDropdowns=function(){r.resetDropdowns(),r.dosageForms([]),r.strengths([]),r.routes([])},r.ignoreMedicationNameChange=function(e,t){var n=!1;return null===e||""===e||null===t?!0:(e&&(t===e+s&&(n=!0),t===e.toUpperCase()&&(n=!0)),n)},r.medicationNameWatcher=ko.computed({read:function(){var e=r.trimmedMedication(),t=r.screenMode;return t&&t()!==o.NoMedSelected&&r.initialized?r.ignoreMedicationNameChange(r.lastMedName,e)?!1:(r.lastMedName=e,r.screenMode(o.NoMedSelected),r.clearDropdowns(),r.isCreateNewEnabled(!1),r.isDropdownEnabled(!1),!1):void 0}}).extend({throttle:200}),r.isValidCustomOptionValue=function(e){var t=!1;return e&&e.trim().length>0&&e!==r.addNewOptionText&&(t=!0),t},r.evaluateIsCreateNewMedication=function(e,t,n,a,i,s,d,l){var c=null;return e===o.AddNewMedValues&&(c=!1,n===!0&&r.isValidCustomOptionValue(l)&&(c=!0),a===!0&&r.isValidCustomOptionValue(d)&&(c=!0),i===!0&&r.isValidCustomOptionValue(s)&&(c=!0),c===!0?t.isCreateNewMedication(!0):t.isCreateNewMedication(!1)),c},r.medicationParameters=ko.computed(function(){var e=r.newPatientMedication,t=r.trimmedForm(),n=r.trimmedStrength(),a=r.trimmedRoute(),i=r.screenMode,s=r.isAddingNewRouteValue(),o=r.isAddingNewStrengthValue(),d=r.isAddingNewFormValue();if(e&&i&&r.initialized){r.evaluateIsCreateNewMedication(i(),e(),s,o,d,t,n,a)}}).extend({throttle:75}),r.addingNewValue=ko.computed({read:function(){var e=r.screenMode(),t=r.isDuplicate(),n=r.isAddingNewRouteValue(),a=r.isAddingNewStrengthValue(),i=r.isAddingNewFormValue();e===o.MedSelected&&t!==!0&&r.initialized&&(n===!0&&r.screenMode(o.AddNewMedValues),a===!0&&r.screenMode(o.AddNewMedValues),i===!0&&r.screenMode(o.AddNewMedValues))}}).extend({throttle:75}),r.initialMedicationValues=ko.observable({form:r.trimmedForm(),strength:r.trimmedStrength(),route:r.trimmedRoute()}),r.recalculateNDCWatcher=ko.computed(function(){var e=r.trimmedStrength(),t=r.trimmedForm(),n=r.trimmedRoute(),a=r.canAdd();return a&&r.initialized&&!r.newPatientMedication().isNew()?e!==r.initialMedicationValues().strength||t!==r.initialMedicationValues().form||n!==r.initialMedicationValues().route?(r.newPatientMedication().recalculateNDC(!0),!0):(r.newPatientMedication().recalculateNDC(!1),!1):!1}).extend({throttle:200}),r.medicationBloodhound.initialize(),r.populateDropDowns=function(){function e(e){r.isCreateNewEnabled(!0),r.isDropdownEnabled(!0),r.dosageForms(e.DosageForms),r.strengths(e.Strengths),r.routes(e.Routes),r.units(e.Units),r.initialized=!0}var t=r.newPatientMedication(),a=t.name(),i="",s="",o="";t&&a&&n.getRemoteMedicationFields(t.name(),i,s,o).then(e)},r.initialized=!0,r.newPatientMedication.peek()&&!r.newPatientMedication().isNew()&&(r.isDropdownEnabled(!0),r.isCreateNewEnabled(!0),r.populateDropDowns(),r.screenMode(o.MedSelected),r.newPatientMedication().isCreateNewMedication(!1),r.newPatientMedication().recalculateNDC(!1),r.lastMedName=r.newPatientMedication().name(),r.initialized=!1),r.overrideSelected=function(e,t,n){var a=$(e.target);a.change(),r.newPatientMedication().isDuplicate(!1),r.isDuplicate(!1),r.isNewMedicationName(!1),r.newPatientMedication().isCreateNewMedication(!1),r.newPatientMedication().recalculateNDC(!0),r.lastMedName=t.Text.toUpperCase(),t.Id&&-1==t.Id?(r.isNewMedicationName(!0),a.typeahead("val",t.Text.toUpperCase()),r.newPatientMedication().isCreateNewMedication(!0),r.screenMode(o.AddNewMed),r.isCreateNewEnabled(!0),r.isDropdownEnabled(!0),r.isAddingNewRouteValue(!0),r.isAddingNewStrengthValue(!0),r.isAddingNewFormValue(!0)):(r.screenMode(o.MedSelected),t.isDuplicate?(r.newPatientMedication().isDuplicate(!0),r.isDuplicate(!0)):r.populateDropDowns())}},l.prototype.initializeMedSearch=function(e){var t=this,a=ko.utils.arrayFirst(t.selectedPatient().medications(),function(e){return e.isNew()});a||n.initializeNewPatientMedication(t.selectedPatient(),e)},l.prototype.detached=function(){var e=this;l.prototype.freqWhens.dispose(),l.prototype.sources.dispose(),l.prototype.types.dispose(),l.prototype.categories.dispose(),l.prototype.statuses.dispose(),e.showing.dispose(),e.newPatientMedication.dispose(),e.trimmedMedication.dispose(),e.trimmedForm.dispose(),e.trimmedRoute.dispose(),e.trimmedStrength.dispose(),e.canAdd.dispose(),e.medicationNameWatcher.dispose(),e.medicationParameters.dispose(),e.addingNewValue.dispose(),e.recalculateNDCWatcher.dispose(),ko.utils.arrayForEach(i,function(e){e.dispose()})},l}),n("viewmodels/patients/sections/medications",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/careplan/index"],function(e,t,n,a,r){var i=function(){};return i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e&&r.selectedPatient()?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient/"+r.selectedPatient().id(),"Program"):""}),i.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.programs=t.selectedPatient.programs,t.passedInSort=t.settings.sortOverride,t.elementStateIds=t.settings.elementStateIds,t.selectedSort=t.passedInSort?t.passedInSort:t.alphabeticalOrderSort,t.computedPrograms=ko.computed(function(){var e=[];return r.selectedPatient()&&(e=ko.utils.arrayFilter(r.selectedPatient().programs(),function(e){return-1!==t.elementStateIds.indexOf(e.elementState())})),e}),t.activeAction=t.settings.activeAction,t.activeProgram=t.settings.activeProgram,t.activeModule=t.settings.activeModule,t.setActiveAction=function(e){e.enabled()===!0&&(t.activeProgram(null),t.activeModule(null),t.activeAction(e),e.historicalAction&&e.historicalAction()&&r.getStepsForAction(e.historicalAction()))},t.setActiveProgram=function(e){t.activeProgram()!==e&&(t.activeAction(null),t.activeModule(null),t.activeProgram(e),0===t.activeProgram().modules().length&&n.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+t.activeProgram().id(),!0,null).then(function(){patientsListFlyoutOpen(!1)}))},t.setActiveModule=function(e){t.activeModule()!==e&&(t.activeAction(null),t.activeProgram(null),t.activeModule(e))},t.toggleOpen=function(e){var a=e;a.isOpen()?a.isOpen(!1):(a.isOpen(!0),a.isOpen()&&0===a.modules().length&&n.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+a.id(),!0,null))},t.isFullScreen=ko.observable(!1),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.toggleAllExpanded=function(e){e.allModulesOpen()?ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!1)}):ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!0)})}},i.prototype.attached=function(){},i}),n("viewmodels/patients/sections/medications.search",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Search/Meds/ProprietaryNames","PatientMedication"),i=function(){var e=this;e.medications=ko.observableArray(),e.newMedication=ko.observable()};return i.prototype.types=ko.computed(n.enums.medSuppTypes),i.prototype.categories=ko.computed(n.enums.medicationCategories),i.prototype.statuses=ko.computed(n.enums.medicationStatuses),i.prototype.addNewMedication=function(){var e=this;n.medicationSaving(!0);var t=ko.observable(),a=ko.utils.arrayFirst(e.medications(),function(t){return t.Text.toLowerCase()===e.trimmedMedication().toLowerCase()});a&&(t(n.initializeNewPatientMedication(e.selectedPatient())),t.name(a.Name))},i.prototype.activate=function(e){var i=this;i.settings=e,i.selectedPatient=i.settings.selectedPatient,i.trimmedMedication=ko.computed(function(){var e=i.newMedication();return e?e.name():""}),i.resultsMessage=ko.observable(""),i.initializeMedSearch(i.newMedication),i.canAdd=ko.computed(function(){var e=!1,t=n.medicationSaving(),a=i.trimmedMedication(),r=i.selectedPatient().medications(),s=ko.utils.arrayFirst(r,function(e){return e.isNew()});if(a){var o=ko.utils.arrayFirst(i.medications(),function(e){return e.Text.toLowerCase().trim()===a.toLowerCase()});o||(e="(New)"===a.substr(a.length-5)),o&&o.isDuplicate!==!0&&(e=!0)}return(t||s)&&(e=!1),e}),i.medicationBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:17,remote:{url:t.remoteServiceName+"/"+r.ResourcePath,replace:function(e,t){return searchQuery=t,e+"?Take=15&Term="+searchQuery},ajax:{beforeSend:function(e,t){e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.setRequestHeader("Token",a.currentUser().aPIToken())},type:"GET"},filter:function(e){e.Message?(i.resultsMessage(""),i.resultsMessage(e.Message)):i.resultsMessage(""),i.medicationBloodhound.clear();var t=i.trimmedMedication(),n=ko.utils.arrayFirst(i.selectedPatient().medications(),function(e){return e.name().toLowerCase().trim()===t.toLowerCase()});ko.utils.arrayForEach(e.ProprietaryNames,function(e){e.DisplayName=e.Text;var t=ko.utils.arrayFirst(i.selectedPatient().medications(),function(t){return t.name().toLowerCase().trim()===e.Text.toLowerCase().trim()});(t||n&&n.name().toLowerCase().trim()===e.Text.toLowerCase().trim())&&(e.DisplayName="(Duplicate) "+e.DisplayName,e.isDuplicate=!0)}),i.medications(e.ProprietaryNames);var a={Id:-1,Text:t,DisplayName:t+" (New)"},r=ko.utils.arrayFirst(e.ProprietaryNames,function(e){return e.Text.toLowerCase().trim()===t.toLowerCase()});return r||n||e.ProprietaryNames.push(a),e.ProprietaryNames},rateLimitWait:500,cache:!1}}),i.medicationBloodhound.initialize()},i.prototype.initializeMedSearch=function(){var e=this,t=ko.utils.arrayFirst(e.selectedPatient().medications(),function(e){return e.isNew()});t?e.newMedication(t):e.newMedication(n.initializeNewPatientMedication(e.selectedPatient()))},i}),n("viewmodels/patients/sections/notes",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){var r=function(){};return r.prototype.activate=function(e){var t=this;t.settings=e,t.group=ko.observable(t.settings.group),t.activeNote=t.settings.activeNote,t.setActiveNote=function(e){t.activeNote(e)},t.isOpen=ko.observable(!0)},r.prototype.attached=function(){},r}),n("viewmodels/patients/sections/problems.list",["services/datacontext"],function(e){var t=function(){};return t.prototype.newThenAlphabeticalSort=function(e,t){var n=e.isNew()?0:1,a=t.isNew()?0:1,r=e.name().toLowerCase(),i=t.name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},t.prototype.observationDisplays=ko.computed(e.enums.observationDisplays),t.prototype.deleteFocusProblem=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.observationStates=ko.computed(function(){var t=ko.utils.arrayFirst(e.enums.observationTypes(),function(e){return"Problems"===e.name()}),n=ko.utils.arrayFilter(e.enums.observationStates(),function(e){var n=!1;return ko.utils.arrayForEach(e.allowedTypeIds(),function(e){e.id()===t.id()&&(n=!0)}),n});return n}),t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.computedProblemObservations=ko.computed(function(){var e=[],n=t.selectedPatient().observations();return e=ko.utils.arrayFilter(n,function(e){return e.type()?"Problems"===e.type().name()&&!e.deleteFlag()&&(e.entityAspect.entityState.isModified()||"active"===e.state().name().toLowerCase()):!1}).sort(t.newThenAlphabeticalSort)}).extend({throttle:50})},t.prototype.attached=function(){},t}),n("viewmodels/patients/sections/programs",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/careplan/index"],function(e,t,n,a,r){var i=function(){var e=this;e.token={},e.selectedPatientChanged=!1,e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return i.prototype.deactivate=function(){var e=this;e.token.dispose(),e.computedPrograms.dispose()},i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e&&r.selectedPatient()?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"Patient/"+r.selectedPatient().id(),"Program"):""}),i.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.token=r.selectedPatient.subscribe(function(){t.selectedPatientChanged=!0,t.deactivate()}),t.programs=t.selectedPatient.programs,t.passedInSort=t.settings.sortOverride,t.elementStateIds=t.settings.elementStateIds,t.selectedSort=t.passedInSort?t.passedInSort:t.alphabeticalOrderSort,t.computedPrograms=ko.computed({read:function(){var e=[];r.selectedPatient()&&(e=ko.utils.arrayFilter(r.selectedPatient().programs(),function(e){return-1!==t.elementStateIds.indexOf(e.elementState())}));var n=e.sort(t.selectedSort);return n},disposeWhen:function(){return t.selectedPatientChanged}}).extend({throttle:25}),t.activeAction=t.settings.activeAction,t.activeProgram=t.settings.activeProgram,t.activeModule=t.settings.activeModule,t.setActiveAction=function(e){e.enabled()===!0&&(t.activeProgram(null),t.activeModule(null),t.activeAction(e),e.historicalAction&&e.historicalAction()&&r.getStepsForAction(e.historicalAction()))},t.setActiveProgram=function(e){t.activeProgram()!==e&&(t.activeAction(null),t.activeModule(null),t.activeProgram(e),0===t.activeProgram().modules().length&&n.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+t.activeProgram().id(),!0,null).then(function(){patientsListFlyoutOpen(!1)}))},t.setActiveModule=function(e){t.activeModule()!==e&&(t.activeAction(null),t.activeProgram(null),t.activeModule(e))},t.toggleOpen=function(e){var a=e;a.isOpen()?a.isOpen(!1):(a.isOpen(!0),a.isOpen()&&0===a.modules().length&&n.getMelsEntityById(null,null,t.contractProgramsEndPoint().EntityType,t.contractProgramsEndPoint().ResourcePath+"/Program/"+a.id(),!0,null).then(function(){}))},t.isFullScreen=ko.observable(!1),t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.toggleAllExpanded=function(e){e.allModulesOpen()?ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!1)}):ko.utils.arrayForEach(e.modules(),function(e){e.isOpen(!0)})}},i.prototype.attached=function(){},i}),n("viewmodels/patients/sections/recent.individuals",["services/session","config.services","services/datacontext","viewmodels/patients/index"],function(e,t,n,a){function r(e){}var i=a.choosePatient,s=ko.computed(a.selectedPatient),o=ko.observableArray(),d={activate:r,choosePatient:i,recentIndividualsList:o,selectedPatient:s,currentUser:e.currentUser};return d}),n("viewmodels/patients/sections/status",["models/base","services/datacontext","viewmodels/shell/shell"],function(e,t,n){var a=[],r=function(){};return r.prototype.activate=function(a){var r=this;r.settings=a,r.selectedPatient=r.settings.selectedPatient,r.statusModalShowing=ko.observable(!1),r.saveStatus=function(){t.saveIndividual(r.selectedPatient)},r.cancelStatus=function(){r.selectedPatient.entityAspect.rejectChanges()};var i={title:"Edit Status",showSelectedPatientInTitle:!0,entity:r.selectedPatient,templatePath:"templates/patient.status.html",showing:r.statusModalShowing,saveOverride:r.saveStatus,cancelOverride:r.cancelStatus,deleteOverride:null,classOverride:null};r.modal=new e.modal(i),r.isOpen=ko.observable(!1),r.isEditing=ko.observable(!1),r.isExpanded=ko.observable(!1),r.toggleEditing=function(){if(r.isEditing())r.statusModalShowing(!1);else{n.currentModal(r.modal),r.statusModalShowing(!0);var e=r.statusModalShowing.subscribe(function(){r.isEditing(!1),e.dispose()})}r.isEditing(!r.isEditing()),r.isOpen(!0)},r.updateStatusReason=ko.computed(function(){var e=r.selectedPatient.statusId();return e&&"1"===e?(r.selectedPatient.reasonId(null),!0):(null===r.selectedPatient.reasonId()&&r.selectedPatient.setDefaultStatusReason(),!1)})},r.prototype.attached=function(){},r.prototype.detached=function(){var e=this;ko.utils.arrayForEach(a,function(e){e.dispose()}),e.updateStatusReason.dispose()},r}),n("viewmodels/patients/sections/system.ids",["services/datacontext","services/session","models/base","viewmodels/shell/shell"],function(e,t,n,a){function r(e,t){var n=this;n.patient=ko.observable(t),n.canSave=ko.observable(),n.activationData={selectedPatient:n.patient,showing:e,canSave:n.canSave}}function i(e,t){if(e.system().displayLabel()&&t.system().displayLabel()){if(e.system().displayLabel()&&e.system().displayLabel().toLowerCase()<t.system().displayLabel().toLowerCase())return-1;if(t.system().displayLabel()&&e.system().displayLabel().toLowerCase()>t.system().displayLabel().toLowerCase())return 1}return 0}var s=function(){};return s.prototype.alphabeticalSort=function(e,t){return e.name().toLowerCase()==t.name().toLowerCase()?e.name().toLowerCase()>t.name().toLowerCase()?1:-1:e.name().toLowerCase()>t.name().toLowerCase()?1:-1},s.prototype.activate=function(t){var s=this;s.settings=t,s.selectedPatient=s.settings.selectedPatient,s.patientSystems=s.selectedPatient.patientSystems,s.isExpanded=ko.observable(!1),s.showEllipsis=ko.observable(!1),s.computedPatientSystemsDisplay=ko.computed(function(){var e=s.selectedPatient.patientSystems(),t=[],n=!s.isExpanded();return ko.utils.arrayForEach(e,function(e){1!==Number(e.statusId())||e.isDeleted()||(t.length<5||!n?(t.push(e),s.showEllipsis(!1)):s.showEllipsis(!0))}),t.sort(i),t}).extend({throttle:15}),s.isOpen=ko.observable(!1),s.patientSystemsModalShowing=ko.observable(!1),s.savePatientSystems=function(){function t(){return a.updated.length>0?e.savePatientSystems(a.updated).then(n):n()}function n(){return a.created.length>0?e.savePatientSystems(a.created):Q()}var a=s.processChanges();return a?a.deleted.length>0?e.deletePatientSystems(a.deleted).then(t):t():void 0},s.cancelPatientSystems=function(){var t=s.processChanges();if(t){var n=confirm("Your changes will be discarded.  Press OK to continue, or cancel to return.");return n===!0?(ko.utils.arrayForEach(t.created,function(t){e.detachEntity(t)}),ko.utils.arrayForEach(t.deleted,function(e){e.isDeleted(!1),e.entityAspect.rejectChanges()}),ko.utils.arrayForEach(t.updated,function(e){e.entityAspect.rejectChanges()}),s.patientSystems.valueHasMutated(),!0):!1}},s.processChanges=function(){var e=[],t=[],n=[];return ko.utils.arrayForEach(s.patientSystems(),function(a){a.isNew()?a.isDeleted()?console.log("processChanges - new and deleted should not be here."):t.push(a):a.isDeleted()?n.push(a):"Modified"===a.entityAspect.entityState.name&&e.push(a)}),t.length||n.length||e.length?{created:t,deleted:n,updated:e}:null},s.modalEntityObservable=ko.observable(),s.editSystemIds=function(){s.modalEntityObservable(new r(s.patientSystemsModalShowing,s.selectedPatient));var e={title:"Individual IDs",showSelectedPatientInTitle:!0,entity:s.modalEntityObservable,templatePath:"viewmodels/templates/patient.systems",showing:s.patientSystemsModalShowing,saveOverride:s.savePatientSystems,cancelOverride:s.cancelPatientSystems,deleteOverride:null,classOverride:null},t=new n.modal(e);a.currentModal(t),s.patientSystemsModalShowing(!0),s.isOpen(!0)}},s}),n("viewmodels/patients/sections/task.details",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/goals/index","viewmodels/shell/shell"],function(e,t,n,a,r,i){function s(t,n,a,r,s){var o={title:t,showSelectedPatientInTitle:!0,entity:n,templatePath:a,showing:v,saveOverride:r,cancelOverride:s,deleteOverride:null,classOverride:null},d=new e.modal(o);v(!0),i.currentModal(d)}function o(e){e.checkAppend(),n.saveBarrier(e)}function d(e){e.checkAppend(),n.saveTask(e)}function l(e){e.entityAspect.rejectChanges()}function c(e){r.getGoalDetails(e,!0)}function p(e,t){var n=this;n.entity=e,n.activationData={entity:n.entity},n.canSave=ko.computed(function(){var e=n.entity[t]();return e})}var u=function(){},v=ko.observable(!0);return u.prototype.activate=function(e){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.settings=e,t.task=t.settings.activeTask,t.isFullScreen=ko.observable(!1),t.isDetailsExpanded=ko.observable(!1),t.hasDetails=ko.computed(function(){var e=t.task()?t.task().details():[];return null!=e&&e.length>0}),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.toggleDetailsExpanded=function(){var e=t.isDetailsExpanded(),n=t.task().details();(n||e)&&t.isDetailsExpanded(!t.isDetailsExpanded())},t.addBarrier=function(e){function a(e){var a=n.createComplexType("Identifier",{id:e.id()});t.task().barrierIds().push(a),t.editBarrier(e,"Add Barrier")}r.addEntity("Barrier",e.goal()).then(a)},t.editBarrier=function(e,n){var a=e.goal(),r=ko.observable(new p(e,"name")),i=function(){o(e),d(t.task())},u=function(){l(e),l(t.task()),c(a)};n=n?n:"Edit Barrier",s(n,r,"viewmodels/templates/barrier.edit",i,u)},t.editTask=function(e){c(e.goal());var t=ko.observable(new p(e,"description")),n=function(){d(e)},a=function(){l(e),c(e.goal())};s("Edit Task",t,"viewmodels/templates/task.edit",n,a)},t.deleteTask=function(e){function a(){e&&e.goal()&&e.goal().tasks.remove(e),e&&e.patientGoalId&&e.patientGoalId(null)}var r=confirm("You are about to delete a task.  Press OK to continue, or cancel to return without deleting.");if(r!==!0)return!1;e.goal();e.entityAspect.rejectChanges(),e.deleteFlag(!0),n.saveTask(e).then(a),t.settings.activeTask(null)}},u}),n("viewmodels/patients/tabs/action.details",["services/datacontext","viewmodels/shell/shell","models/base","services/dataservices/programsservice"],function(e,t,n,a){function r(t){var n=this;n.action=ko.observable(),n.canSaveObservable=ko.observable(!e.programsSaving),n.canSave=ko.computed({read:function(){return!e.programsSaving()&&n.canSaveObservable()},write:function(e){n.canSaveObservable(e)}}),n.activationData={action:n.action,canSave:n.canSave,showing:t}}ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var n=t.length>0;e().showing(n)})};var i=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1},s=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new r(e.modalShowing))};return s.prototype.activate=function(a){var r=this;r.settings=a,r.tab=r.settings.tab,r.activeAction=r.settings.activeAction,r.modalEntity().action(r.activeAction),r.saveOverride=function(){function t(){r.activeAction.elementState(i)}var n=r.activeAction.module().programId(),a=r.activeAction.module().program().patientId(),i=r.activeAction.elementState();r.activeAction.entityAspect.acceptChanges(),e.savePlanElemAttr(r.activeAction,n,a).then(t)},r.cancelOverride=function(){var t=r.activeAction.elementState();e.cancelEntityChanges(r.modalEntity().action()),r.activeAction.elementState(t)},r.availableHistoricalActions=a.availableHistoricalActions,r.selectedHistoricalAction=a.selectedHistoricalAction;var s={title:"Individual Attributes",showSelectedPatientInTitle:!0,entity:r.modalEntity,templatePath:"viewmodels/templates/action.edit",showing:r.modalShowing,saveOverride:r.saveOverride,cancelOverride:r.cancelOverride,deleteOverride:null,classOverride:null};r.modal=new n.modal(s),r.descriptionSectionOpen=ko.observable(!1),r.individualAttributesSectionOpen=ko.observable(!0),r.attributesSectionOpen=ko.observable(!1),
r.objectivesSectionOpen=ko.observable(!1),r.shouldBeShowing=r.activeAction&&r.activeAction.objectives()?r.activeAction.objectives().length>0:!1,r.computedObjectives=ko.computed(function(){var e=[];if(r.settings.activeAction&&r.settings.activeAction.objectives())var e=r.settings.activeAction.objectives().sort(i);return e}).extend({isShowing:r.shouldBeShowing}),r.historicalComputedObjectives=ko.computed(function(){var e=[];if(r.settings.activeAction&&r.settings.activeAction.objectives())var e=r.settings.activeAction.objectives().sort(i);return e}).extend({isShowing:r.shouldBeShowing}),r.toggleModalShowing=function(){t.currentModal(r.modal),r.modalShowing(!r.modalShowing())},r.canEdit=ko.computed(function(){var e=r.activeAction&&"Completed"!==r.activeAction.elementStateModel().name();return e})},s}),n("viewmodels/patients/tabs/action.steps",["viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/careplan/index","models/base","services/datacontext"],function(e,t,n,a,r){function i(){var e=this;e.activeDataType=ko.observable(),e.selectedPatient=t.selectedPatient,e.showDropdown=!0,e.showActions=!1,e.activationData={selectedPatient:e.selectedPatient,activeDataType:e.activeDataType,showDropdown:e.showDropdown,showActions:e.showActions},e.canSave=ko.observable(!0)}var s=function(){};return s.prototype.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},s.prototype.activate=function(n){var s=this;s.settings=n,s.tab=s.settings.tab,s.activeAction=s.settings.activeAction,s.availableHistoricalActions=n.availableHistoricalActions,s.selectedHistoricalAction=n.selectedHistoricalAction,s.modalShowing=ko.observable(!1),s.programsSaving=ko.computed(r.programsSaving),s.modalEntity=ko.observable(new i),s.saveOverride=function(){s.modalEntity().activeDataType(null),t.saveAllData()},s.cancelOverride=function(){s.modalEntity().activeDataType(null),t.cancelDataEntry()};var o={title:"Data Entry",showSelectedPatientInTitle:!0,entity:s.modalEntity,templatePath:"viewmodels/templates/clinical.dataentry",showing:s.modalShowing,saveOverride:s.saveOverride,cancelOverride:s.cancelOverride,deleteOverride:null,classOverride:"modal-lg"};s.modal=new a.modal(o),s.toggleModalShowing=function(){e.currentModal(s.modal),s.modalShowing(!s.modalShowing())}},s}),n("viewmodels/patients/tabs/module.details",["services/datacontext","viewmodels/shell/shell","models/base"],function(e,t,n){function a(t){var n=this;n.module=ko.observable(),n.canSaveObservable=ko.observable(!e.programsSaving),n.canSave=ko.computed({read:function(){return!e.programsSaving()&&n.canSaveObservable()},write:function(e){n.canSaveObservable(e)}}),n.activationData={module:n.module,canSave:n.canSave,showing:t}}function r(e){var t=ko.utils.arrayFilter(e.actions(),function(e){return 4===e.elementState()});return t}function i(e){ko.utils.arrayForEach(e,function(e){4!==e.elementState()&&(e.stateUpdatedOn((new moment).toISOString()),e.elementState(4))})}ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var n=t.length>0;e().showing(n)})};var s=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1},o=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new a(e.modalShowing))};return o.prototype.activate=function(a){var o=this;o.settings=a,o.tab=o.settings.tab,o.activeModule=o.settings.activeModule,o.modalEntity().module(o.activeModule),o.saveOverride=function(){function t(){i(n)}var n=r(o.activeModule);o.activeModule.entityAspect.acceptChanges(),ko.utils.arrayForEach(o.activeModule.actions(),function(e){e.entityAspect.acceptChanges()});var a=o.activeModule.programId(),s=o.activeModule.program().patientId();e.savePlanElemAttr(o.activeModule,a,s).then(t)},o.cancelOverride=function(){e.cancelEntityChanges(o.modalEntity().module())};var d={title:"Individual Attributes",showSelectedPatientInTitle:!0,entity:o.modalEntity,templatePath:"viewmodels/templates/module.edit",showing:o.modalShowing,saveOverride:o.saveOverride,cancelOverride:o.cancelOverride,deleteOverride:null,classOverride:null};o.modal=new n.modal(d),o.descriptionSectionOpen=ko.observable(!1),o.individualAttributesSectionOpen=ko.observable(!0),o.attributesSectionOpen=ko.observable(!1),o.objectivesSectionOpen=ko.observable(!1),o.shouldBeShowing=o.activeModule&&o.activeModule.objectives()?o.activeModule.objectives().length>0:!1,o.computedObjectives=ko.computed(function(){var e=[];if(o.settings.activeModule&&o.settings.activeModule.objectives())var e=o.settings.activeModule.objectives().sort(s);return e}).extend({isShowing:o.shouldBeShowing}),o.toggleModalShowing=function(){t.currentModal(o.modal),o.modalShowing(!o.modalShowing())},o.canEdit=ko.computed(function(){var e=o.activeModule&&"Completed"!==o.activeModule.elementStateModel().name();return e})},o}),n("viewmodels/patients/tabs/module.objectives",[],function(){var e=function(){};ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var n=t.length>0;e().showing(n)})};var t=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1};return e.prototype.activate=function(e){var n=this;n.settings=e,n.tab=n.settings.tab,n.activeProgram=n.settings.activeProgram,n.shouldBeShowing=n.activeProgram.objectives()?n.activeProgram.objectives().length>0:!1,n.computedObjectives=ko.computed(function(){var e=[];if(n.settings.activeProgram&&n.settings.activeProgram.objectives())var e=n.settings.activeProgram.objectives().sort(t);return e}).extend({isShowing:n.shouldBeShowing})},e}),n("viewmodels/patients/tabs/program.details",["services/datacontext","viewmodels/shell/shell","models/base"],function(e,t,n){function a(t){var n=this;n.program=ko.observable(),n.canSaveObservable=ko.observable(!e.programsSaving),n.canSave=ko.computed({read:function(){return!e.programsSaving()&&n.canSaveObservable()},write:function(e){n.canSaveObservable(e)}}),n.activationData={program:n.program,canSave:n.canSave,showing:t}}function r(e){var t=[];return ko.utils.arrayForEach(e.modules(),function(e){ko.utils.arrayForEach(e.actions(),function(e){4===e.elementState()&&t.push(e)})}),t}function i(e){ko.utils.arrayForEach(e,function(e){4!==e.elementState()&&(e.stateUpdatedOn((new moment).toISOString()),e.elementState(4))})}var s=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new a(e.modalShowing))};return s.prototype.activate=function(a){var s=this;s.settings=a,s.tab=s.settings.tab,s.activeProgram=s.settings.activeProgram,s.modalEntity().program(s.activeProgram),s.saveOverride=function(){function t(){i(n)}var n=r(s.activeProgram);s.activeProgram.entityAspect.acceptChanges(),ko.utils.arrayForEach(s.activeProgram.modules(),function(e){ko.utils.arrayForEach(e.actions(),function(e){e.entityAspect.acceptChanges()})});var a=s.activeProgram.id(),o=s.activeProgram.patientId();e.savePlanElemAttr(s.activeProgram,a,o).then(t)},s.cancelOverride=function(){e.cancelEntityChanges(s.modalEntity().program())};var o={title:"Individual Attributes",showSelectedPatientInTitle:!0,entity:s.modalEntity,templatePath:"viewmodels/templates/program.edit",showing:s.modalShowing,saveOverride:s.saveOverride,cancelOverride:s.cancelOverride,deleteOverride:null,classOverride:null};s.modal=new n.modal(o),s.descriptionSectionOpen=ko.observable(!1),s.individualAttributesSectionOpen=ko.observable(!0),s.attributesSectionOpen=ko.observable(!1),s.toggleModalShowing=function(){t.currentModal(s.modal),s.modalShowing(!s.modalShowing())},s.canEdit=ko.computed(function(){var e=s.activeProgram&&"Completed"!==s.activeProgram.elementStateModel().name()&&"Closed"!==s.activeProgram.elementStateModel().name();return e})},s}),n("viewmodels/patients/tabs/program.goals",[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.tab=t.settings.tab,t.activeProgram=t.settings.activeProgram},e}),n("viewmodels/patients/tabs/program.objectives",[],function(){var e=function(){};ko.extenders.isShowing=function(e,t){e().showing=ko.observable(t),e.subscribe(function(t){var n=t.length>0;e().showing(n)})};var t=function(e,t){return e.objective().name()==t.objective().name()?e.objective().name()>t.objective().name()?1:-1:e.objective().name()>t.objective().name()?1:-1};return e.prototype.activate=function(e){var n=this;n.settings=e,n.tab=n.settings.tab,n.activeProgram=n.settings.activeProgram,n.shouldBeShowing=n.activeProgram.objectives()?n.activeProgram.objectives().length>0:!1,n.computedObjectives=ko.computed(function(){var e=[];if(n.settings.activeProgram&&n.settings.activeProgram.objectives())var e=n.settings.activeProgram.objectives().sort(t);return e}).extend({isShowing:n.shouldBeShowing})},e}),n("viewmodels/patients/team/careMember.details",[],function(){function e(e){a(e)}function t(e){var t=this;return t.careMember=e.member,t.isCareMemberSelected=ko.computed(function(){return t.careMember&&t.careMember()?!0:!1}),t.primaryCommunications=ko.computed(function(){var e=[],n=t.careMember()?t.careMember().contact():null;if(n){var a=ko.utils.arrayFirst(n.phones(),function(e){return e.phonePreferred()});a&&(a.template="templates/phone.html",e.push(a));var r=ko.utils.arrayFirst(n.phones(),function(e){return e.textPreferred()});r&&r!==a&&(r.template="templates/phone.html",e.push(r));var i=ko.utils.arrayFirst(n.emails(),function(e){return e.preferred()});i&&(i.template="templates/email.html",e.push(i));var s=ko.utils.arrayFirst(n.addresses(),function(e){return e.preferred()});s&&(s.template="templates/address.html",e.push(s))}return e}).extend({throttle:25}),!0}function n(e,t,n,a){var r=this;r.name=e,r.cssClass=t,r.imgSource=n,r.imgAlt=a,r.isShowing=!0}var a=ko.observable("Relationship"),r=ko.observableArray([new n("Relationship",null,"/NightingaleUI/Content/images/nav_population.png","Phone blue small"),new n("Profile",null,"/NightingaleUI/Content/images/patient_neutral_small.png","Phone blue small"),new n("Comm","icon-phone blue",null)]),i={activate:t,detailsTabs:r,setActiveDetailsTab:e,activeDetailsTab:a};return i}),n("viewmodels/patients/widgets/action.details",["services/datacontext","viewmodels/patients/careplan/index"],function(e,t){function n(e,t,n){var a=this;a.name=ko.observable(e),a.path=ko.observable(t),a.isActive=ko.computed(function(){var e=n();return e&&e.name()===a.name()})}var a=function(){var t=this;t.activeTab=ko.observable(),t.tabs=ko.observableArray([new n("Steps","viewmodels/patients/tabs/action.steps",t.activeTab),new n("Details","viewmodels/patients/tabs/action.details",t.activeTab)]),t.actionActions=ko.observableArray([{text:ko.observable("Repeat")}]),t.selectedAction=ko.observable(),t.selectedHistoricalAction=ko.observable(),t.programsSaving=ko.computed(e.programsSaving)};return a.prototype.activate=function(n){var a=this;a.settings=n,a.activeAction=a.settings.activeAction,a.activeActionToken=a.activeAction.subscribe(function(){a.activeTab(a.tabs()[0])}),a.disableActionActions=ko.computed(function(){var t=e.programsSaving(),n=a.activeAction(),r=n?n.isLoading():!1;return t||r}),a.selectedAction.subscribe(function(t){function n(){var t=e.getRepeatedAction(a.activeAction());a.activeAction(t)}t&&"Repeat"===t.text()&&(a.activeAction().completed()&&"In Progress"===a.activeAction().module().program().elementStateModel().name()&&!e.programsSaving()?(e.repeatAction(a.activeAction()).then(n),a.selectedAction(null)):(e.createAlert(0,"The action cannot be repeated"),a.selectedAction(null)))}),a.availableHistoricalActions=ko.computed(function(){var e=[];return a.activeAction()&&(e=a.activeAction().history()),e}),a.selectedHistoricalAction(a.availableHistoricalActions()[0]),a.availableHistoricalActionsComputed=ko.computed(function(){var e=a.availableHistoricalActions();return e.length>0&&a.selectedHistoricalAction(e[0]),!1}).extend({throttle:50}),a.selectedActionToken=a.selectedHistoricalAction.subscribe(function(e){setTimeout(function(){e&&0===e.steps().length&&t.getStepsForAction(e)},50)}),a.isFullScreen=ko.observable(!1),a.toggleFullScreen=function(){a.isFullScreen(!a.isFullScreen())},a.setActiveTab=function(e){a.activeTab(e)},a.activeTab(a.tabs()[0])},a.prototype.attached=function(){},a.prototype.deactivate=function(){var e=this;e.selectedActionToken&&e.selectedActionToken.dispose(),e.activeActionToken&&e.activeActionToken.dispose()},a.prototype.detached=function(){var e=this;e.availableHistoricalActionsComputed.dispose(),e.availableHistoricalActions.dispose(),e.disableActionActions.dispose(),e.programsSaving.dispose(),ko.utils.arrayForEach(e.tabs,function(e){e.isActive.dispose()})},a}),n("viewmodels/patients/widgets/allergies",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/index"],function(e,t,n,a,r,i,s,o){function d(e){n.saveTask(e)}function l(e){e.entityAspect.rejectChanges()}function c(e){r.getGoalDetails(e)}function p(e,t){var n=this;n.entity=e,n.activationData={entity:n.entity},n.canSave=ko.computed(function(){var e=n.entity[t]();return e})}var u=function(){};return u.prototype.activate=function(t){var a=this;a.settings=t,a.selectedPatient=a.settings.selectedPatient,a.widget=a.settings.widget,a.allergyTypes=ko.computed(n.enums.allergyTypes),a.selectedAllergyTypes=ko.observableArray(),a.allergyStatuses=ko.computed(n.enums.allergyStatuses);var r=ko.utils.arrayFirst(a.allergyStatuses(),function(e){return"Active"===e.name()});a.selectedAllergyStatuses=ko.observableArray([r]),a.canReset=ko.computed(function(){var e=a.selectedAllergyStatuses(),t=a.selectedAllergyTypes(),n=e.length>0&&"1"===e[0].id();return 1===e.length&&n&&0===t.length?!1:!0}),a.resetFilters=function(){a.selectedAllergyTypes([]),a.selectedAllergyStatuses([r])},a.refreshData=function(){o.getPatientsAllergies()},a.allergySaving=ko.computed(n.allergySaving),a.selectedSortColumn=ko.observable(),a.myComputedAllergies=ko.observableArray(),a.myAllergies=ko.computed(function(){var t=a.selectedAllergyTypes(),r=a.selectedAllergyStatuses(),i=a.selectedPatient(),s=[],o=(a.selectedPatient().allergies(),a.selectedSortColumn()?a.selectedSortColumn():"allergyName"),d=[],l=[];l.push(new e.Parameter("patientId",i.id(),"=="));a.selectedPatient().id();return d=n.getPatientAllergiesQuery(l,o),t.length>0&&(ko.utils.arrayForEach(t,function(e){var t=ko.utils.arrayFilter(d,function(t){var n=ko.utils.arrayFirst(t.allergyTypeIds(),function(t){return t.id()===e.id()});return!!n});ko.utils.arrayForEach(t,function(e){-1===s.indexOf(e)&&s.push(e)})}),d=s),0!==r.length&&(d=d.filter(function(e){var t=[];return ko.utils.arrayForEach(r,function(e){t.push(e.id())}),-1!==t.indexOf(e.statusId())?!0:void 0})),d}),a.activeAllergyColumns=ko.computed(function(){return["expand","name","severity-small","status"]}),a.toggleAllergySort=function(e){a.selectedSortColumn()&&-1!==a.selectedSortColumn().indexOf(e.sortProperty)?a.selectedSortColumn()&&"desc"===a.selectedSortColumn().substr(a.selectedSortColumn().length-4,4)?a.selectedSortColumn(null):a.selectedSortColumn(e.sortProperty+" desc"):a.selectedSortColumn(e.sortProperty)},a.isOpen=a.widget.isOpen,a.isFullScreen=a.widget.isFullScreen,a.filtersHeaderOpen=ko.observable(!0),a.filtersOpen=ko.observable(!1),a.toggleHeaderOpen=function(e,t){t()&&e(!e())},a.toggleFullScreen=function(e){a.isFullScreen(!a.isFullScreen())},a.toggleWidgetOpen=function(e){var t=ko.utils.arrayFilter(a.widget.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===a.widget||e.isOpen(!e.isOpen())},a.addAllergy=function(e){s.addData()},a.editAllergy=function(e,t){var n=e.goal(),a=ko.observable(new p(e,"description")),r=function(){d(e)},i=function(){l(e),c(n)};t=t?t:"Edit Task",editEntity(t,a,"viewmodels/templates/task.edit",r,i)}},u.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},u.prototype.addEntity=function(e,t,a,r){function i(t){var i=t.httpResponse.data.Id;if(i){var s={};s.id=i,s.patientGoalId=d,s.statusId=1,a&&(s.startDate=a),r&&(s.assignedToId=r);var o=n.createEntity(e,s);return o}var l=t.results[0];return l.startDate(new Date),l.statusId(1),l.patientGoalId(d),l}var s=this,o=s.selectedPatient().id(),d=t.id();return n.initializeEntity(null,e,o,d).then(i)},u}),n("viewmodels/patients/widgets/careMembers",["viewmodels/patients/team/index"],function(e){var t=function(){};return t.prototype.activate=function(t){var n=this;n.settings=t,n.widget=n.settings.widget,n.statusIds=n.widget.statusIds,n.careMembers=n.settings.careMembers,n.sortFunction=n.settings.sortFunction,n.myCareMembers=ko.computed(function(){var e=[];return e=ko.utils.arrayFilter(n.careMembers(),function(e){return!e.isNew()&&-1!==n.statusIds.indexOf(e.statusId())}),e=e.sort(n.sortFunction)}),n.addCareMember=e.addCareMember,n.selectedPatient=e.selectedPatient,n.isOpen=n.widget.isOpen,n.isFullScreen=n.widget.isFullScreen,n.toggleFullScreen=function(e){n.isFullScreen(!n.isFullScreen())},n.toggleWidgetOpen=function(e){var t=ko.utils.arrayFilter(n.widget.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===n.widget||e.isOpen(!e.isOpen())},n.toggleOpenColumn=e.toggleOpenColumn,n.leftColumnOpen=e.leftColumnOpen},t.prototype.detached=function(){var e=this;e.myCareMembers.dispose()},t}),n("viewmodels/patients/widgets/medication.groups",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/index"],function(e,t,n,a,r,i,s,o){var d=function(){};return d.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=t.settings.selectedPatient,t.widget=t.settings.widget,t.defaultSort=t.settings.defaultSort,t.medicationGroups=t.widget.medicationGroups,t.allowAdd=t.widget.allowAdd,t.refreshView=function(){o.getPatientMedications()},t.addMedication=function(){s.addData()},t.medicationSaving=ko.computed(n.medicationSaving),t.selectedSortColumn=ko.observable(),t.activeColumns=ko.computed(function(){return["expand","name","sortdate","status"]}),t.toggleSort=function(e){t.selectedSortColumn()&&-1!==t.selectedSortColumn().indexOf(e.sortProperty)?t.selectedSortColumn()&&"desc"===t.selectedSortColumn().substr(t.selectedSortColumn().length-4,4)?t.selectedSortColumn(null):t.selectedSortColumn(e.sortProperty+" desc"):t.selectedSortColumn(e.sortProperty)},t.isOpen=t.widget.isOpen,t.isFullScreen=t.widget.isFullScreen,t.filtersHeaderOpen=ko.observable(!0),t.filtersOpen=ko.observable(!1),t.toggleHeaderOpen=function(e,t){t()&&e(!e())},t.toggleOpenColumn=function(){t.widget.column.isOpen(!t.widget.column.isOpen())},t.toggleFullScreen=function(e){t.isFullScreen(!t.isFullScreen())},t.toggleWidgetOpen=function(e){var n=ko.utils.arrayFilter(t.widget.column.widgets(),function(e){return e.isOpen()});1===n.length&&n[0]===t.widget||e.isOpen(!e.isOpen())},t.addMedication=function(e){s.addData()},t.minimizeThisColumn=function(){t.widget.column.isOpen(!1)},t.maximizeThisColumn=function(){t.widget.column.isOpen(!0)}},d.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},d.prototype.detached=function(){var e=this;e.medicationSaving.dispose(),e.activeColumns.dispose()},d}),n("viewmodels/patients/widgets/medications",["models/base","config.services","services/datacontext","services/session","viewmodels/patients/medications/index","viewmodels/shell/shell","viewmodels/patients/data/index","viewmodels/patients/index"],function(e,t,n,a,r,i,s,o){var d=function(){},l={id:ko.observable(""),name:ko.observable("Not Set")};return d.prototype.activate=function(t){var a=this;a.settings=t,a.selectedPatient=a.settings.selectedPatient,a.widget=a.settings.widget,a.defaultSort=a.settings.defaultSort,a.selectedMedicationTypes=ko.observableArray(),a.statusIds=a.widget.statusIds,a.allowAdd=a.widget.allowAdd,a.resetFilters=function(){a.selectedMedicationTypes([])},a.refreshView=function(){o.getPatientMedications()},a.addMedication=function(){s.addData()},a.refreshData=function(){console.log("refresh the data")},a.medicationSaving=ko.computed(n.medicationSaving),a.selectedSortColumn=ko.observable(),a.myComputedMedications=ko.observableArray(),a.medSuppTypes=ko.computed(function(){var e=n.enums.medSuppTypes(),t=e.slice(0,e.length);return-1===t.indexOf(l)&&t.push(l),t}),a.activeFilters=ko.computed(function(){var t=a.selectedMedicationTypes(),n=[];if(ko.utils.arrayForEach(a.statusIds,function(t){n.push(new e.Parameter("statusId",t,"=="))}),t.length>0){var r=ko.utils.arrayFilter(a.medSuppTypes(),function(e){var n=ko.utils.arrayFirst(t,function(t){return t.id()===e.id()});return n?!1:!0});ko.utils.arrayForEach(r,function(t){n.push(new e.Parameter("typeId",t.id(),"!="))});var i=!1;ko.utils.arrayForEach(t,function(e){""===e.id()&&(i=!0)}),i||(n.push(new e.Parameter("typeId","","!=")),n.push(new e.Parameter("typeId",null,"!=")))}return n}),a.myMedications=ko.computed(function(){var t=a.selectedMedicationTypes(),r=a.selectedPatient(),i=a.defaultSort?a.defaultSort:"name",s=(a.selectedPatient().medications(),a.selectedSortColumn()?a.selectedSortColumn():i),o=[],d=[],l=[];l.push(new e.Parameter("patientId",r.id(),"==")),a.activeFilters().length>0&&ko.utils.arrayForEach(a.activeFilters(),function(e){l.push(e)}),1===t.length&&l.push(new e.Parameter("typeId",t[0].id(),"=="));a.selectedPatient().id();return d=n.getPatientMedicationsQuery(l,s),o=ko.utils.arrayFilter(d,function(e){return!e.isNew()})}).extend({throttle:1}),a.activeColumns=ko.computed(function(){return["expand","name","sortdate","status"]}),a.toggleSort=function(e){a.selectedSortColumn()&&-1!==a.selectedSortColumn().indexOf(e.sortProperty)?a.selectedSortColumn()&&"desc"===a.selectedSortColumn().substr(a.selectedSortColumn().length-4,4)?a.selectedSortColumn(null):a.selectedSortColumn(e.sortProperty+" desc"):a.selectedSortColumn(e.sortProperty)},a.isOpen=a.widget.isOpen,a.isFullScreen=a.widget.isFullScreen,a.filtersHeaderOpen=ko.observable(!0),a.filtersOpen=ko.observable(!1),a.toggleHeaderOpen=function(e,t){t()&&e(!e())},a.toggleOpenColumn=function(){a.widget.column.isOpen(!a.widget.column.isOpen())},a.toggleFullScreen=function(e){a.isFullScreen(!a.isFullScreen())},a.toggleWidgetOpen=function(e){var t=ko.utils.arrayFilter(a.widget.column.widgets(),function(e){return e.isOpen()});1===t.length&&t[0]===a.widget||e.isOpen(!e.isOpen())},a.addMedication=function(e){s.addData()},a.minimizeThisColumn=function(){a.widget.column.isOpen(!1)},a.maximizeThisColumn=function(){a.widget.column.isOpen(!0)}},d.prototype.toggleExpand=function(e){e.isExpanded(!e.isExpanded()),e.isOpen()||e.isOpen(!0)},d.prototype.detached=function(){var e=this;e.medicationSaving.dispose(),e.medSuppTypes.dispose(),e.activeFilters.dispose(),e.myMedications.dispose(),e.activeColumns.dispose()},d}),n("viewmodels/patients/widgets/module.details",["services/datacontext"],function(e){function t(e,t,n){var a=this;a.name=ko.observable(e),a.path=ko.observable(t),a.isActive=ko.computed(function(){var e=n();return e&&e.name()===a.name()})}var n=function(){var e=this;e.activeTab=ko.observable(),e.tabs=ko.observableArray([new t("Details","viewmodels/patients/tabs/module.details",e.activeTab)])};return n.prototype.activate=function(e){var t=this;t.settings=e,t.activeModule=t.settings.activeModule,t.isFullScreen=ko.observable(!1),t.toggleFullScreen=function(){t.isFullScreen(!t.isFullScreen())},t.setActiveTab=function(e){t.activeTab(e)},t.activeTab(t.tabs()[0])},n.prototype.attached=function(){},n}),n("viewmodels/patients/widgets/program.details",["services/datacontext","models/base","viewmodels/shell/shell"],function(e,t,n){function a(e,t,n){var a=this;a.name=ko.observable(e),a.path=ko.observable(t),a.isActive=ko.computed(function(){var e=n();return e&&e.name()===a.name()})}function r(t,n){var a=this;a.program=ko.observable(),a.canSave=ko.computed(function(){return!e.programsSaving()}),a.activationData={program:a.program,showing:t,reason:n}}var i=function(){var e=this;e.activeTab=ko.observable(),e.tabs=ko.observableArray([new a("Details","viewmodels/patients/tabs/program.details",e.activeTab),new a("Objectives","viewmodels/patients/tabs/program.objectives",e.activeTab)]),e.programActions=ko.observableArray([{text:ko.observable("Remove")}]),e.selectedAction=ko.observable(),e.reason=ko.observable(),e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new r(e.modalShowing,e.reason))};return i.prototype.activate=function(a){var r=this;r.settings=a,r.activeProgram=r.settings.activeProgram,r.isFullScreen=ko.observable(!1),r.toggleFullScreen=function(){r.isFullScreen(!r.isFullScreen())},r.setActiveTab=function(e){r.activeTab(e)},r.activeTab(r.tabs()[0]),r.modalEntity().program(r.activeProgram()),r.cancelOverride=function(){r.reason(null)},r.deleteOverride=function(){function t(){setTimeout(function(){location.reload()},2e3)}function n(e){console.log(e)}e.removeProgram(r.activeProgram(),r.reason()).then(t).fail(n)};var i={title:"Remove "+r.activeProgram().name(),showSelectedPatientInTitle:!0,entity:r.modalEntity,templatePath:"viewmodels/templates/program.remove",showing:r.modalShowing,saveOverride:null,cancelOverride:r.cancelOverride,deleteOverride:r.deleteOverride,classOverride:null};r.modal=new t.modal(i),r.modal.canDelete(!0),r.modal.deleteText("Remove"),r.selectedAction.subscribe(function(e){e&&"Remove"===e.text()&&(n.currentModal(r.modal),r.modalShowing(!0),r.selectedAction(null))}),r.activeProgram.subscribe(function(){if(r.activeTab(r.tabs()[0]),r.activeProgram()){r.modalEntity().program(r.activeProgram());var e={title:"Remove "+r.activeProgram().name(),entity:r.modalEntity,templatePath:"viewmodels/templates/program.remove",showing:r.modalShowing,saveOverride:null,cancelOverride:r.cancelOverride,deleteOverride:r.deleteOverride,classOverride:null};r.modal=new t.modal(e),r.modal.canDelete(!0),r.modal.deleteText("Remove")}})},i.prototype.attached=function(){},i}),n("viewmodels/populations/index",["plugins/router"],function(e){function t(e,t){}function n(t){e.navigateBack()}var a={activate:t,goBack:n,title:"populations"};return a}),n("viewmodels/programdesigner/designer/index",["services/navigation"],function(e){function t(){}function n(){r||(r=!0)}var a=ko.observableArray(),r=!1,i=ko.computed(function(){var t=this;return t.columns=e.currentSubRoute().columns,ko.utils.arrayForEach(t.columns,function(e){var t=[];ko.utils.arrayForEach(e.widgets,function(n){n.column=e,t.push(n)}),e.activeWidgets=ko.observableArray(t)}),t.columns}),s=ko.observable(),o={activate:t,attached:n,computedOpenColumn:s,columns:i,widgets:a,title:"index"};return o}),n("viewmodels/programdesigner/index",["services/session","services/navigation"],function(e,t){function n(){return s||a(),!0}function a(){return!0}var r=(ko.computed(function(){var t=e.currentUser();return t?"NG/1.0/Contract/"+e.currentUser().contracts()[0].number()+"/program/":""}),ko.observableArray()),i=ko.observable(),s=!1,o=ko.observable(!1),d={modulesListFlyoutOpen:o,modulesList:r,currentModule:i,navigation:t,activate:n,title:"Program Designer"};return d}),n("viewmodels/programdesigner/widgets/modulewidget",[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e}),n("viewmodels/programdesigner/widgets/programwidget",[],function(){var e=function(){};return e.prototype.activate=function(e){var t=this;t.settings=e,t.settings.isOpen=ko.observable(),t.settings.isFullScreen=ko.observable(!1),t.toggleWidgetOpen=function(){t.settings.isOpen(!t.settings.isOpen())},t.toggleFullScreen=function(){t.settings.isFullScreen(!t.settings.isFullScreen())}},e.prototype.attached=function(){},e}),n("viewmodels/shell/quickadd/assign",["models/base","config.services","services/datacontext","services/session"],function(e,t,n,a){function r(e,t){var n=this;n.Id=ko.observable(e),n.Name=ko.observable(t)}var i=function(){var e=this;e.categories=ko.observableArray(),e.selectedCategory=ko.observable(),e.contractPrograms=ko.observableArray(),e.selectedProgram=ko.observable(),e.isSaving=ko.observable()};return i.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),i.prototype.createCategories=function(){var e=this;e.categories.push(new r(1,"Programs")),e.selectedCategory(e.categories()[0])},i.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&n.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:a.currentUser().contracts()[0].number()},"name")},i.prototype.activate=function(t){var a=this;a.settings=t,a.selectedPatient=t.data.selectedPatient,a.isShowing=a.settings.data.isShowing,a.cancelAssign=function(){a.selectedProgram(null),a.isShowing(!1)},a.startDate=ko.observable(new moment),a.saveAssign=function(){function t(){a.isShowing(!1),a.isSaving(!1),a.selectedProgram(null)}a.selectedProgram()&&(a.isSaving(!0),n.saveChangesToPatientProperty(a.selectedPatient,"Programs",null,[new e.Parameter("ContractProgramId",a.selectedProgram().id())]).then(t))},a.canSave=ko.computed(function(){return a.selectedProgram()&&!a.isSaving()}),a.selectedCategory.subscribe(function(){a.getContractProgramsByCategory()}),a.createCategories()},i.prototype.attached=function(){},i}),n("viewmodels/shell/quickadd/notes",["models/base","config.services","services/datacontext","services/session","services/navigation","viewmodels/patients/index","viewmodels/patients/history/index"],function(e,t,n,a,r,i,s){var o=function(){var e=this;e.newNote=ko.observable(),e.newTouchPoint=ko.observable(),e.newUtilization=ko.observable(),e.newTouchPointToken={},e.isSaving=ko.observable(),e.noteTypes=n.enums.noteTypes;var t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"touchpoint"===e.name().toLowerCase()});e.selectedNoteType=ko.observable(),t?e.selectedNoteType(t):e.selectedNoteType(e.noteTypes()[1]),e.activeNoteType=ko.computed(function(){var t="",n=e.selectedNoteType().name().toLowerCase();switch(n){case"touchpoint":t="shell/quickadd/touchpoint.note.html";break;case"utilization":t="shell/quickadd/utilization.note.html";break;default:t="shell/quickadd/general.note.html"}return t}),e.methods=n.enums.noteMethods,e.whos=n.enums.noteWhos,e.sources=n.enums.noteSources,e.outcomes=n.enums.noteOutcomes,e.visitTypes=n.enums.visitTypes,e.utilizationSources=n.enums.utilizationSources,e.dispositions=n.enums.dispositions,e.utilizationLocations=n.enums.utilizationLocations,e.defaultOutcome=ko.utils.arrayFirst(e.outcomes(),function(e){return e.isDefault()}),e.defaultMethod=ko.utils.arrayFirst(e.methods(),function(e){return e.isDefault()}),e.defaultWho=ko.utils.arrayFirst(e.whos(),function(e){return e.isDefault()}),e.defaultSource=ko.utils.arrayFirst(e.sources(),function(e){return e.isDefault()}),e.defaultVisitType=ko.utils.arrayFirst(e.visitTypes(),function(e){return e.isDefault()}),e.defaultUtilizationSource=ko.utils.arrayFirst(e.utilizationSources(),function(e){return e.isDefault()}),e.defaultDisposition=ko.utils.arrayFirst(e.dispositions(),function(e){return e.isDefault()}),e.defaultUtilizationLocation=ko.utils.arrayFirst(e.utilizationLocations(),function(e){return e.isDefault()}),e.tpContentOpen=ko.observable(!0),e.tpDetailsOpen=ko.observable(!1),e.tpLastNotesOpen=ko.observable(!1),e.gnContentOpen=ko.observable(!0),e.gnLastNotesOpen=ko.observable(!0),
e.utContentOpen=ko.observable(!0),e.utDetailsOpen=ko.observable(!0),e.utLastNotesOpen=ko.observable(!1)};return o.prototype.contractProgramsEndPoint=ko.computed(function(){var e=a.currentUser();return e?new t.createEndPoint("1.0",a.currentUser().contracts()[0].number(),"programs/active","ContractProgram"):""}),o.prototype.createNewNote=function(){var e=this,t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"general"===e.name().toLowerCase()});e.newNote(n.createEntity("Note",{id:e.thisNoteId(),patientId:e.selectedPatient().id(),typeId:t.id(),dataSource:"Engage"})),e.newNote().watchDirty()},o.prototype.createNewUtilization=function(){var e=this,t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"utilization"===e.name().toLowerCase()});e.newUtilization(n.createEntity("Note",{id:e.thisUtilizationId(),patientId:e.selectedPatient().id(),admitted:!1,typeId:t.id(),visitType:e.defaultVisitType,utilizationSource:e.defaultUtilizationSource,disposition:e.defaultDisposition,utilizationLocation:e.defaultUtilizationLocation,dataSource:"Engage"})),e.newUtilization().watchDirty()},o.prototype.createNewTouchPoint=function(){var e=this,t=ko.utils.arrayFirst(e.noteTypes(),function(e){return"touchpoint"===e.name().toLowerCase()});e.newTouchPoint(n.createEntity("Note",{id:e.thisTouchPointId(),patientId:e.selectedPatient().id(),contactedOn:(new moment).format(),outcome:e.defaultOutcome,method:e.defaultMethod,source:e.defaultSource,who:e.defaultWho,typeId:t.id(),validatedIdentity:!1,dataSource:"Engage"})),e.newTouchPointToken=e.newTouchPoint().contactedOn.subscribe(function(t){if(!t){var n=(new moment).format();setTimeout(function(){e.newTouchPoint().contactedOn(n)},100)}}),e.newTouchPoint().watchDirty()},o.prototype.getContractProgramsByCategory=function(){var e=this;e.contractProgramsEndPoint()&&n.getEntityList(e.contractPrograms,e.contractProgramsEndPoint().EntityType,e.contractProgramsEndPoint().ResourcePath,null,null,!0,{ContractNumber:a.currentUser().contracts()[0].number()},"name")},o.prototype.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},o.prototype.alphabeticalDateSort=function(e,t){return e.createdOn()==t.createdOn()?e.createdOn()<t.createdOn()?1:-1:e.createdOn()<t.createdOn()?1:-1},o.prototype.activate=function(e){function t(){o.isShowing(!1),o.newNote(null),o.isSaving(!1),o.createNewNote()}var o=this;o.settings=e,o.selectedPatient=e.data.selectedPatient,o.thisNoteId=ko.computed(function(){return-1*o.selectedPatient().notes().length}),o.thisTouchPointId=ko.computed(function(){return o.thisNoteId()-100}),o.thisUtilizationId=ko.computed(function(){return o.thisTouchPointId()-100}),o.isShowing=o.settings.data.isShowing,o.cancel=function(){o.newNote()&&(o.newNote().entityAspect.rejectChanges(),o.createNewNote()),o.newTouchPoint()&&(o.newTouchPoint().entityAspect.rejectChanges(),o.newTouchPointToken&&o.newTouchPointToken.dispose(),o.createNewTouchPoint()),o.newUtilization()&&(o.newUtilization().entityAspect.rejectChanges(),o.createNewUtilization()),o.isShowing(!1)},o.availablePrograms=ko.computed(function(){var e=[];if(o.selectedPatient()){var t=o.selectedPatient().programs.slice(0).sort(o.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),o.startDate=ko.observable(new moment),o.saveNote=function(){o.newNote()&&(o.newNote().patientId(o.selectedPatient().id()),o.isSaving(!0),o.newNote().createdById(a.currentUser().userId()),o.newNote().createdOn(new Date),o.newNote().typeId(o.selectedNoteType().id()),n.saveNote(o.newNote()).then(t))},o.saveTouchPoint=function(){function e(){o.isShowing(!1),o.newTouchPoint(null),o.isSaving(!1),o.createNewTouchPoint()}o.newTouchPoint()&&(o.newTouchPoint().patientId(o.selectedPatient().id()),o.isSaving(!0),o.newTouchPoint().createdById(a.currentUser().userId()),o.newTouchPoint().createdOn(new Date),n.saveNote(o.newTouchPoint()).then(e))},o.saveUtilization=function(){function e(){o.isShowing(!1),o.newUtilization().clearDirty(),o.newUtilization(null),o.isSaving(!1),o.createNewUtilization()}o.newUtilization()&&(o.newUtilization().patientId(o.selectedPatient().id()),o.isSaving(!0),n.saveNote(o.newUtilization()).then(e))},o.selectedPatient.subscribe(function(){o.cancel(),s.activeNote(null)}),o.viewDetails=function(e){o.isShowing(!1);var t=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(t),s.activeNote(e)},o.gotoHistory=function(){o.isShowing(!1);var e=ko.utils.arrayFirst(r.currentRoute().config.settings.pages,function(e){return"history"===e.title});r.setSubRoute(e)},o.canSave=ko.computed(function(){return o.newNote()&&!o.isSaving()&&o.newNote().isValid()}),o.canSaveTouchPoint=ko.computed(function(){o.newTouchPoint()?!0:!1,o.isSaving();if(o.newTouchPoint()){o.newTouchPoint().text(),o.newTouchPoint().contactedOn()}return o.newTouchPoint()&&!o.isSaving()&&o.newTouchPoint().text()&&o.newTouchPoint().contactedOn()}),o.canSaveUtilization=ko.computed(function(){o.newUtilization()?!0:!1,o.isSaving();return o.newUtilization()&&!o.isSaving()&&o.newUtilization().isValid()&&o.newUtilization().visitType()}),o.createNewNote(),o.createNewTouchPoint(),o.createNewUtilization(),o.lastThreeNotes=ko.computed(function(){var e=o.selectedPatient().notes().sort(o.alphabeticalDateSort),t=[];return ko.utils.arrayForEach(e,function(e){t.length<3&&!e.entityAspect.entityState.isAdded()&&t.push(e)}),t}),i.leaving.subscribe(function(e){e&&o.cancel()})},o.prototype.attached=function(){},o}),n("viewmodels/shell/quickadd/quickaddpopover",["models/base","viewmodels/patients/index"],function(e,t){var n=function(){var e=this;e.selectedPatient=ko.computed(t.selectedPatient)};return n.prototype.createQuickAddSections=function(){var t=this;t.quickAddSections.push(new e.quickAddSection("notes","Notes","icon-notes","viewmodels/shell/quickadd/notes")),t.quickAddSections.push(new e.quickAddSection("todo","To Do","icon-notes","viewmodels/shell/quickadd/todo")),t.quickAddSections.push(new e.quickAddSection("assign","Assign","icon-assign-patient","viewmodels/shell/quickadd/assign")),t.activeQuickAddTab(t.quickAddSections()[0])},n.prototype.activate=function(e){var t=this;t.settings=e,t.isShowing=ko.observable(!1),t.quickAddSections=ko.observableArray(),t.activeQuickAddTab=ko.observable(),t.createQuickAddSections(),t.setActiveTab=function(e){t.activeQuickAddTab(e)},t.patientIsSelected=ko.computed(function(){return t.selectedPatient()?!0:!1})},n.prototype.attached=function(){},n}),n("viewmodels/shell/quickadd/todo",["models/base","config.services","services/datacontext","services/session","services/navigation","services/local.collections","viewmodels/patients/index"],function(e,t,n,a,r,i,s){var o=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},d=function(){var e=this;e.newTodo=ko.observable(),e.isSaving=ko.observable(),e.categories=ko.computed(n.enums.toDoCategories),e.statuses=ko.computed(n.enums.goalTaskStatuses),e.priorities=ko.computed(n.enums.priorities),e.careManagers=n.enums.careManagers,e.savable=ko.observable(!0)};return d.prototype.createNewTodo=function(){var e,t=this;if(e=t.selectedPatient?t.selectedPatient().id():t.selectedPatient().id()){var r=t.selectedPatient(),i=ko.observable();n.checkForEntityLocally(i,r.id(),"ToDoPatient"),i()||i(n.createEntity("ToDoPatient",{id:r.id(),firstName:r.firstName(),lastName:r.lastName(),middleName:r.middleName(),suffix:r.suffix(),preferredName:r.preferredName()})),t.newTodo(n.createEntity("ToDo",{id:-2,statusId:1,priorityId:0,createdById:a.currentUser().userId(),assignedToId:a.currentUser().userId(),patientId:e,patientDetails:i()}))}else t.newTodo(n.createEntity("ToDo",{id:-2,statusId:1,priorityId:0,createdById:a.currentUser().userId(),assignedToId:a.currentUser().userId(),patientId:e}));t.newTodo().isNew(!0),t.newTodo().watchDirty()},d.prototype.activate=function(e){var t=this;t.settings=e,t.selectedPatient=e.data.selectedPatient,t.noPatient=ko.computed(function(){return t.newTodo()?!!t.newTodo().patientId():!1}),t.thisTodoId=ko.computed(function(){return-1*t.selectedPatient().todos().length}),t.isShowing=t.settings.data.isShowing,t.cancel=function(){t.newTodo().entityAspect.rejectChanges(),t.newTodo().clearDirty(),t.createNewTodo(),t.isShowing(!1)},t.availablePrograms=ko.computed(function(){var e=[];if(t.selectedPatient()&&t.newTodo()&&t.newTodo().patient()){var n=t.selectedPatient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(n,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.startDate=ko.observable(new moment),t.save=function(){function e(e){e.clearDirty(),e.isNew(!1),t.isShowing(!1),e.entityAspect.acceptChanges(),i.todos.push(t.todo),t.createNewTodo()}n.saveToDo(t.newTodo(),"Insert").then(e)},t.selectedPatient.subscribe(function(){t.cancel()}),t.canSave=ko.computed({read:function(){return t.newTodo()&&!t.isSaving()&&t.newTodo().isValid()&&t.savable()&&!n.todosSaving()},write:function(e){t.savable(e)}}),t.removeAssignment=function(){t.newTodo().assignedTo(null),t.assignedToDisplay("")},t.removeAssociation=function(){t.newTodo().patientId(null),t.newTodo()&&t.newTodo().programIds().length>0&&!t.newTodo().patientId()&&t.newTodo().programIds.removeAll()},t.removeUserAssociation=function(){t.removeAssignment()},t.createNewTodo(),t.assignedToDisplay=ko.observable(t.newTodo()&&t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():""),t.assignedToDisplay.subscribe(function(e){var n=ko.utils.arrayFirst(t.careManagers(),function(t){return t.preferredName()===e});n?t.newTodo().assignedTo(n):console.log("No match found")}),t.checkForMatch=function(){return t.assignedToDisplay()===(t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():"")},t.validMatch=ko.computed(function(){var e=!1;return t.newTodo()&&(e=t.checkForMatch(),e||t.newTodo()&&t.newTodo().assignedToId()&&(t.assignedToDisplay(t.newTodo()&&t.newTodo().assignedTo()?t.newTodo().assignedTo().preferredName():""),t.assignedToDisplay.valueHasMutated(),e=t.checkForMatch())),t.canSave(e),e}).extend({throttle:25}),t.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,a,r){var i=t.careManagers().sort(o),s=$.Deferred();s.done(function(){a(this)});var d=e.toLowerCase(),l=i.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return s.resolveWith(l),s.promise()}},limit:25}),t.careManagersBloodhound.initialize(),s.leaving.subscribe(function(e){e&&t.cancel()})},d.prototype.attached=function(){},d}),n("viewmodels/shell/sidebar",[],function(){}),n("viewmodels/templates/action.edit",["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.action=a.settings.action,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(a.action()&&a.action().assignTo()?a.action().assignTo().preferredName():""),a.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t?a.action().assignTo(t):console.log("No match found")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.action().assignTo()?a.action().assignTo().preferredName():"")},a.removeAssignment=function(){a.action().assignTo(null),a.assignToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.action()&&(e=a.checkForMatch(),e||(a.action()&&a.action().assignToId()?(a.assignToDisplay(a.action()&&a.action().assignTo()?a.action().assignTo().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r,i){var s=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var d=e.toLowerCase(),l=s.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return o.resolveWith(l),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n}),n("viewmodels/templates/allergies.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","viewmodels/patients/index","viewmodels/patients/medications/index"],function(e,t,n,a,r,i,s){function o(e){var t=ko.utils.arrayFirst(p,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function d(e,t,n,a,r){var i=this;i.name=e,i.displayName=t,"small"===e.substr(e.length-5,5)?i.path="views/templates/allergy."+e.substr(0,e.length-6)+".html":i.path="views/templates/allergy."+e+".html",i.cssClass=n,i.sortProperty=a,i.canSort=r?!1:!0}function l(e){var t=this;t.allergy=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.allergy()){var n=!!t.allergy().allergyName(),a=!!t.allergy().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={allergy:t.allergy,canSave:t.canSave,showing:e}}var c=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.allergySort=function(e,t){var n=e.status()?e.status().id():"",a=t.status()?t.status().id():"",r=e.name(),i=t.name();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new l(e.modalShowing))},p=[new d("expand","","span1 ellipsis filters","",!0),new d("priority","Priority","span2 ellipsis","priority.id"),new d("status","Status","span2 ellipsis","statusId"),new d("priority-small","Priority","span1 ellipsis","priority.id"),new d("status-small","","span1 ellipsis","statusId"),new d("patient","Individual","span2 ellipsis","patientDetails.lastName"),new d("type","Type","span3","type.name",!0),new d("type-small","Type","span2","type.name",!0),new d("name","Allergy","span6 ellipsis","allergyName"),new d("name-small","Allergy","span3 ellipsis","allergyName"),new d("severity","Severity","span4 ellipsis","severity.name"),new d("severity-small","Severity","span3 ellipsis","severity.name"),new d("duedate","Due Date","span2 ellipsis","dueDate"),new d("assignedto","Assigned To","span2 ellipsis","assignedTo.preferredName"),new d("startdate","Date","span2 ellipsis","startDate"),new d("startdate-small","Date","span1 ellipsis","startDate"),new d("updatedon","Date","span2 ellipsis","updatedOn"),new d("updatedon-small","Date","span1 ellipsis","updatedOn")];ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return c.prototype.activate=function(e){var n=this;n.allergies=e.allergies,n.selectedPatient=e.selectedPatient,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.activeAllergy=s.activeAllergy,n.saveOverride=function(){function e(){n.modalEntity().allergy().isNew(!1),n.modalEntity().allergy().isUserCreated(!1),n.modalEntity().allergy().entityAspect.acceptChanges()}n.modalEntity().allergy().isValid()?t.saveAllergies([n.modalEntity().allergy()],"Update").then(e):n.cancelOverride()},n.cancelOverride=function(){t.cancelEntityChanges(n.modalEntity().allergy()),i.getPatientsAllergies()};var d={title:"Edit Allergy",showSelectedPatientInTitle:!0,entity:n.modalEntity,templatePath:"viewmodels/templates/allergy.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:"modal-lg"};n.modal=new r.modal(d),n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=o(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.setActiveAllergy=function(e){s.setActiveAllergy(e)},n.editAllergy=function(e){n.modalEntity().allergy(e),a.currentModal(n.modal),n.modalShowing(!0)},n.computedAllergies=ko.computed(function(){return ko.utils.arrayForEach(n.allergies(),function(e){e.edit||(e.edit=function(){n.editAllergy(e)}),e.setActiveAllergy||(e.setActiveAllergy=function(){n.setActiveAllergy(e)}),e.isExpanded||(e.isExpanded=ko.observable(!1))}),n.allergies()})},c}),n("viewmodels/templates/allergy.edit",["services/datacontext"],function(e){var t=function(){};return t.prototype.allergyTypes=ko.computed(e.enums.allergyTypes),t.prototype.severities=ko.computed(e.enums.severities),t.prototype.reactions=ko.computed(e.enums.reactions),t.prototype.allergySources=ko.computed(e.enums.allergySources),t.prototype.allergyStatuses=ko.computed(e.enums.allergyStatuses),t.prototype.removeAllergy=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=t.settings.selectedPatient,t.allergy=t.settings.allergy},t.prototype.attached=function(){},t}),n("viewmodels/templates/barrier.edit",["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.existingDetailsOpen=ko.observable(!1),n.toggleOpen=function(){n.existingDetailsOpen(!n.existingDetailsOpen())},n.barrier=n.settings.entity,n.isNew=n.barrier.goal().isNew,n.barrierStatuses=e.enums.barrierStatuses,n.barrierCategories=e.enums.barrierCategories,n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0},t.prototype.attached=function(){},t}),n("viewmodels/templates/care.team.edit",["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.careManagers=ko.computed(e.enums.careManagers),n.prototype.activate=function(n){var a=this;a.settings=n,a.showing=ko.computed(function(){return!0}),a.selectedPatient=ko.computed(a.settings.selectedPatient),a.canSave=a.settings.canSave,a.saveType=a.settings.saveType,a.primaryCareManager=ko.computed(function(){var e=ko.utils.arrayFirst(a.selectedPatient().careMembers(),function(e){return e.primary()});return e}),a.newAssignedTo=ko.observable(),a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(),a.assignToDisplay.subscribe(function(t){var n=ko.utils.arrayFirst(a.careManagers(),function(e){return e.preferredName()===t});if(n){if(a.primaryCareManager())a.primaryCareManager().preferredName(n.preferredName()),a.primaryCareManager().gender("n"),a.primaryCareManager().contactId(n.id()),a.saveType("Update");else{var r=ko.utils.arrayFirst(e.enums.careMemberTypes(),function(e){return"Care Manager"===e.name()});e.createEntity("CareMember",{id:-1,patientId:a.selectedPatient().id(),preferredName:n.preferredName(),typeId:r.id(),gender:"n",primary:!0,contactId:n.id()});a.saveType("Insert")}a.canSave(!0)}else console.log("No match found")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.primaryCareManager()?a.primaryCareManager().preferredName():"")},a.validMatch=ko.computed(function(){var e=!1;return a.primaryCareManager()&&(e=a.checkForMatch(),e||(a.primaryCareManager()&&a.primaryCareManager().id()?(a.assignToDisplay(a.primaryCareManager()?a.primaryCareManager().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r,i){var s=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var d=e.toLowerCase(),l=s.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return o.resolveWith(l),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n}),n("viewmodels/templates/careMember.edit",["services/datacontext","services/local.collections","viewmodels/home/contacts/index"],function(e,t,n){function a(t){function n(e){var t=ko.utils.arrayFilter(s(),function(t){return t.parentId()&&t.parentId()==e});return t}function a(){var t={contactTypeIds:[],contactSubTypeIds:[],contactStatuses:[],firstName:i.criteriaFirstName()?i.criteriaFirstName().trim():null,lastName:i.criteriaLastName()?i.criteriaLastName().trim():null,filterType:"StartsWith",take:i.contactsTake(),skip:i.contactsSkip()};return t.contactTypeIds.push(i.criteriaContactTypeId()),ko.utils.arrayForEach(i.criteriaContactSubTypes(),function(e){t.contactSubTypeIds.push(e.id())}),ko.utils.arrayForEach(i.criteriaContactStatuses(),function(e){var n=ko.utils.arrayFilter(i.contactStatuses(),function(t){return t.id()==e.id()});n.length>0&&t.contactStatuses.push(n[0].name())}),i.contactsReturned([]),e.getContacts(i.contactsReturned,t,i.totalCount,"ContactCarememberSearch").then(i.getContactsReturned)}function r(){i.searching(!0),i.noResultsFound(!1);var t=e.getLocalContacts("ContactCarememberSearch");i.myContactSearchResults([]),i.totalCount(0),i.contactsSkip(0),i.selectedContact(null),setTimeout(function(){t&&t.length>0&&ko.utils.arrayForEach(t,function(e){e&&(e.entityAspect.setDeleted(),e.entityAspect.acceptChanges())}),a()},50)}var i=this;i.criteriaFirstName=ko.observable(),i.criteriaLastName=ko.observable(),i.criteriaContactTypeId=ko.observable(),i.criteriaContactSubTypes=ko.observableArray(),i.criteriaContactStatuses=ko.observableArray(),i.searching=ko.observable(!1),i.totalCount=ko.observable(0),i.noResultsFound=ko.observable(!1),i.myContactSearchResults=ko.observableArray([]),i.selectedContact=t.selectedContact,i.canSearchContacts=ko.computed(function(){var e=!1,t=i.criteriaFirstName(),n=i.criteriaLastName(),a=i.criteriaContactSubTypes(),r=i.searching?i.searching():!1;return a.length>0?e=!0:t&&t.trim().length>0&&n&&n.trim().length>0&&(e=!0),e=e&&!r}).extend({throttle:100}),i.defaultContactType=ko.observable(),i.findDefaultContactType=function(e){var t=null,n=ko.utils.arrayFilter(e(),function(e){return"Person"==e.name()});return n&&n.length>0&&(t=n[0]),t};var s=ko.observableArray([]),o=1,d=ko.observableArray([]);i.initialized=!1,i.contactStatuses=e.enums.contactStatuses,i.init=function(){d(e.getContactTypes(o,"root")),i.defaultContactType()||i.defaultContactType(i.findDefaultContactType(d)),i.criteriaContactTypeId(i.defaultContactType().id());var t=e.getContactTypes(o,!1);s(t);var n=ko.utils.arrayFilter(i.contactStatuses(),function(e){return"Active"==e.name()});n.length&&i.criteriaContactStatuses.push(n[0]),i.initialized=!0},i.contactsReturned=ko.observableArray([]),i.contactSubTypes=ko.computed(function(){var e=[],t=i.criteriaContactTypeId();return t&&(e=n(t)),e}).extend({throttle:100}),i.canLoadMoreContacts=ko.observable(!1),i.maxContactsLoaded=ko.observable(!1),i.resetFilters=function(){i.criteriaContactSubTypes([]),i.criteriaFirstName(null),i.criteriaLastName(null),i.myContactSearchResults([]),i.contactsReturned([]),i.canLoadMoreContacts(!1),i.maxContactsLoaded(!1),i.noResultsFound(!1),i.selectedContact(null)},i.showResetFilters=ko.computed(function(){var e=!1,t=i.criteriaFirstName(),n=i.criteriaLastName(),a=i.criteriaContactSubTypes();return e=0==a.length?t||n?!0:!1:!0}).extend({throttle:100}),i.contactsShowingText=ko.computed(function(){var e="",t=i.myContactSearchResults(),n=i.totalCount();return t.length&&(e=" - "+t.length+" showing"),t.length<n&&(e+=" out of "+n),e}).extend({throttle:100}),i.contactsTake=ko.observable(100),i.contactsSkip=ko.observable(0),i.maxContactsCount=ko.observable(400),i.showResultsHeader=ko.computed(function(){var e=i.myContactSearchResults();return e.length>0}).extend({throttle:100}),i.getContactsReturned=function(e){var t=i.myContactSearchResults();ko.utils.arrayPushAll(t,i.contactsReturned()),i.myContactSearchResults.valueHasMutated();var n=i.contactsSkip(),a=n+i.contactsTake();a<i.totalCount()&&a<i.maxContactsCount()?(i.contactsSkip(a),i.canLoadMoreContacts(!0)):i.canLoadMoreContacts(!1),i.myContactSearchResults().length>=i.maxContactsCount()?i.maxContactsLoaded(!0):i.maxContactsLoaded(!1),0==i.totalCount()&&i.noResultsFound(!0),i.searching(!1)},i.searchContacts=function(){r()},i.loadMoreContacts=function(){a()},i.selectContact=function(e){i.selectedContact(e)}}function r(t){var a=this;if(a.showing=t.showing,a.careMember=t.careMember,a.careTeamMembers=t.careTeamMembers,a.selectedPatient=t.selectedPatient,a.careMemberRoles=t.careMemberRoles,a.pcmContactSubType=t.pcmContactSubType,a.pcpContactSubType=t.pcpContactSubType,a.addContactReturnedCallback=t.addContactReturnedCallback,a.editMode=ko.observable(!1),a.careMember().isNew())if(a.careMember().contact())a.selectedContact(a.careMember().contact()),a.editMode(!0);else{a.selectedContact(null);var r=a.selectedContact.subscribe(function(e){e?a.careMember().contactId(e.id()):a.careMember().contactId(null)});s.push(r)}else a.careMember().entityAspect.rejectChanges(),a.selectedContact(a.careMember().contact()),a.editMode(!0);return a.contactSubTypes=c.contactSubTypes,a.canAddContact=ko.computed(function(){var e=c?c.showResultsHeader():!1,t=a.editMode(),n=c.noResultsFound();return e&&!t||n}).extend({throttle:100}),a.contactAlreadyAssigned=ko.observable(!1),a.validateCareMember=ko.computed(function(){var e=a.selectedContact(),t=a.selectedPatient(),r=a.careTeamMembers(),i=a.careMember().roleId(),s=a.careMember().core(),o=a.careMember().statusId(),d=n.activeContactStatus()?n.activeContactStatus().id():null,l=(a.careMember().customRoleName(),[]),c=t?t.contactId():null;if(e&&c&&c==e.id()&&l.push({PropName:"contact",Message:"a patient cannot be assigned as a member of his own care team."}),e){if(r.length){var p=ko.utils.arrayFirst(r,function(t){return t.id()!=a.careMember().id()&&t.statusId()==d&&t.contactId()==e.id()});if(p){var u=p.computedRoleName();u&&(u="("+u+")"),a.contactAlreadyAssigned("This contact is already assigned "+u)}else a.contactAlreadyAssigned(!1);if(i&&-1!=i&&s&&o==d&&a.careMember().careTeam()){var v=a.careMember().careTeam().primaryCarePhysicians(),m=ko.utils.arrayFirst(v,function(e){return e.id()!=a.careMember().id()}),g=a.careMember().careTeam().primaryCareManagers(),h=ko.utils.arrayFirst(g,function(e){return e.id()!=a.careMember().id()});if(p=null,m&&m.roleId()==i?p=m:h&&h.roleId()==i&&(p=h),p){var y="this role",f="";p.roleId()==a.pcmContactSubType().id()?y=a.pcmContactSubType().role():p.roleId()==a.pcpContactSubType().id()&&(y=a.pcpContactSubType().role()),p.contact()&&p.contact().fullName()&&(f=" as: "+p.contact().fullName()),l.push({PropName:"contact",Message:y+" is already assigned"+f})}}}}else a.contactAlreadyAssigned(!1);return a.careMember().careTeamValidationErrors(l),!1}).extend({throttle:250}),a.computedRoles=ko.computed(function(){var t=[],n=a.selectedContact(),r=a.careMemberRoles();r&&r.length>0&&ko.utils.arrayForEach(r,function(e){t.push(e)});var i=null;return n&&n.contactSubTypes&&n.contactSubTypes().length&&ko.utils.arrayForEach(n.contactSubTypes(),function(n){if(n.subSpecialtyIds().length)ko.utils.arrayForEach(n.subSpecialtyIds(),function(n){var a=e.getContactTypeLookupById(n.id());a&&a.length>0&&(t.push(a[0]),i||(i=n.id()))});else if(n.specialtyId()){var a=e.getContactTypeLookupById(n.specialtyId());a&&a.length&&(t.push(a[0]),i||(i=n.specialtyId()))}else if(n.subTypeId()){var r=e.getContactTypeLookupById(n.subTypeId());r&&r.length&&(t.push(r[0]),i||(i=n.subTypeId()))}}),i&&a.careMember().isNew()&&setTimeout(function(){a.careMember().roleId(i)},20),t.push({name:"- Other -",role:"- Other -",id:-1}),t}).extend({throttle:250}),a.showCustomRole=ko.computed(function(){var e=a.careMember().roleId();return-1==e}).extend({throttle:250}),a.existingNotesOpen=ko.observable(!1),a.toggleOpen=function(){a.existingNotesOpen(!a.existingNotesOpen())},a.createNewContact=function(){var e=c.criteriaFirstName();e&&e.trim()&&(e=e.trim());var t=c.criteriaLastName();t&&t.trim()&&(t=t.trim()),n.addContact("CareMember",null,a.addContactReturnedCallback,e,t)},!0}function i(){var e=this;e.validateCareMember.dispose(),e.computedRoles.dispose(),e.canAddContact.dispose(),e.showCustomRole.dispose(),c.resetFilters(),ko.utils.arrayForEach(s,function(e){e.dispose()}),s=[]}var s=[],o=e.enums.careMemberFrequency,d=e.enums.careMemberStatuses,l=ko.observable(),c=new a({selectedContact:l});c.init();var p={activate:r,detached:i,frequencies:o,careMemberStatuses:d,selectedContact:l,contactSearch:c};return p}),n("viewmodels/templates/careMembers.panel",["viewmodels/patients/team/index","services/datacontext"],function(e,t){function n(t){var n=null,a="";if(t.roleId()==e.pcmContactSubType().id()){var r=t.careTeam().primaryCareManagers(),i=ko.utils.arrayFirst(r,function(e){return e.id()!=t.id()});i&&(n=e.pcmContactSubType().role(),i.contact()&&i.contact().fullName()&&(a=" as: "+i.contact().fullName()))}else if(t.roleId()==e.pcpContactSubType().id()){var s=t.careTeam().primaryCarePhysicians(),o=ko.utils.arrayFirst(s,function(e){return e.id()!=t.id()});o&&(n=e.pcpContactSubType().role(),o.contact()&&o.contact().fullName()&&(a=" as: "+o.contact().fullName()))}return n&&(n+=" is already assigned"+a),n}function a(e){return t.saveCareTeamMember(e)}var r=function(){},i=1,s=2;return r.prototype.activate=function(t){var r=this;r.careMembers=t.careMembers,r.selectedCareMember=e.selectedCareMember,r.selectCareMember=function(e){r.selectedCareMember(e)},r.setCore=function(e){var t=null;e.statusId()==i&&(t=n(e)),t?alert(t):(e.core(!0),a(e))},r.clearCore=function(e){e.core(!1),a(e)},r.activate=function(e){var t=null;e.core()&&(t=n(e)),t?alert(t):(e.statusId(i),a(e))},r.deactivate=function(e){e.statusId(s),a(e)},r.editCareMember=function(t){e.editCareMember(t)},r.deleteCareMember=function(t){e.deleteCareMember(t)}},r}),n("viewmodels/templates/clinical.dataentry",["services/datacontext","viewmodels/patients/data/index"],function(e,t){function n(e,t,n){var r=this;r.typeName=e,r.firstSection=new a(t),r.secondSection=new a(n)}function a(e){var t=this;t.path=e}var r=function(){};return r.prototype.activate=function(a){var r=this;r.settings=a,r.activeDataType=r.settings.activeDataType,r.showing=ko.computed(function(){return!!r.activeDataType()}),r.selectedPatient=r.settings.selectedPatient,r.selectedTemplate=ko.observable(),r.saveDataEntry=r.settings.saveDataEntry||function(){return!1},r.cancelDataEntry=r.settings.cancelDataEntry||function(){return!1},r.dataTypes=ko.computed(function(){var n=e.enums.observationTypes().slice(0);return-1===n.indexOf(t.allergiesType)&&n.push(t.allergiesType),-1===n.indexOf(t.medicationsType)&&n.push(t.medicationsType),n}),r.templates=ko.computed(function(){var e=r.dataTypes(),t=[];return ko.utils.arrayForEach(e,function(e){-1===e.name().toLowerCase().indexOf("problems")&&"Allergies"!==e.name()&&"Medications"!==e.name()?t.push(new n(e.name(),"viewmodels/patients/sections/basic.observations","viewmodels/patients/sections/additional.observations")):-1!==e.name().toLowerCase().indexOf("problems")?t.push(new n(e.name(),"viewmodels/patients/sections/additional.problem.observations","viewmodels/patients/sections/problems.list")):-1!==e.name().toLowerCase().indexOf("allergies")?t.push(new n(e.name(),"viewmodels/patients/sections/allergies.search","viewmodels/patients/sections/allergies.edit")):t.push(new n(e.name(),"viewmodels/patients/sections/medications.search","viewmodels/patients/sections/medication.edit"));
}),t}),r.computedActiveDataType=ko.computed({read:function(){return r.activeDataType()},write:function(e){if(r.activeDataType(e),e){var t=ko.utils.arrayFirst(r.templates(),function(t){return t.typeName===e.name()});r.selectedTemplate(t)}else r.selectedTemplate(e)}})},r.prototype.attached=function(){},r}),n("viewmodels/templates/contact.edit",["services/datacontext","services/local.collections","viewmodels/home/contacts/index"],function(e,t,n){function a(e){return n.getContactTypeChildren(e)}var r=function(){},i=[],s=0;r.prototype.tabs=n.tabs;var o=n.tabIndex;return r.prototype.activate=function(t){var r=this;if(r.showing=t.showing,r.contactCard=t.contactCard,r.daysOfWeek=e.enums.daysOfWeek,r.timesOfDay=e.enums.timesOfDay,r.timeZones=e.enums.timeZones,r.addressTypes=e.enums.addressTypes,r.stateList=e.enums.states,r.languages=e.enums.languages,r.emailTypes=e.enums.emailTypes,r.phoneTypes=e.enums.phoneTypes,r.genders=e.enums.genders,r.deceasedStatuses=e.enums.deceasedStatuses,r.contactStatuses=e.enums.contactStatuses,r.saveFunction=t.saveFunction?t.saveFunction:null,r.allContactTypes=n.allContactTypes,r.contactCard().isNew()){var d=r.contactCard().firstName.subscribe(function(e){var t=e,n=r.contactCard().lastName();r.checkDuplicateContact(t,n)});i.push(d);var l=r.contactCard().lastName.subscribe(function(e){var t=e,n=r.contactCard().firstName();r.checkDuplicateContact(n,t)});i.push(l)}return r.checkDuplicateContact=function(t,n){var a=r.contactCard().contactTypeId();if(r.contactCard().isDuplicate(!1),r.contactCard().isDuplicateTested(!1),n&&(n=n.trim()),t&&(t=t.trim()),a&&t&&n){var i={contactTypeIds:[],contactSubTypeIds:null,firstName:t,lastName:n,filterType:"ExactMatch",take:50,skip:0};return i.contactTypeIds.push(r.contactCard().contactTypeId()),e.getContacts(null,i).then(r.contactsReturned)}},r.contactsReturned=function(e){e&&e.length>0&&r.contactCard().isDuplicate(!0),r.contactCard().isDuplicateTested(!0)},r.tabErrorsUpdater=ko.computed(function(){var e=r.contactCard().phoneValidationErrors().length;e?r.tabs()[o.phone].hasErrors(!0):r.tabs()[o.phone].hasErrors(!1);var t=r.contactCard().isDuplicate(),n=r.contactCard().profileValidationErrors().length;n||t?r.tabs()[o.profile].hasErrors(!0):r.tabs()[o.profile].hasErrors(!1)}).extend({throttle:100}),r.isDuplicateSubType=ko.observable(!1),r.selectedSubType=ko.observable(),r.selectedSpecialty=ko.observable(),r.selectedSubSpecialties=ko.observableArray([]),r.contactSubTypes=ko.computed(function(){var e=[],t=r.contactCard().contactTypeId();return r.selectedSubType(null),r.selectedSpecialty(null),r.selectedSubSpecialties([]),t&&(e=a(t)),e}).extend({throttle:20}),r.contactSpecialties=ko.computed(function(){var e=[],t=r.selectedSubType()?r.selectedSubType():null;return r.selectedSpecialty(null),r.selectedSubSpecialties([]),t&&(e=a(t)),e}).extend({throttle:20}),r.contactSubSpecialties=ko.computed(function(){var e=[],t=r.selectedSpecialty()?r.selectedSpecialty():null;return r.selectedSubSpecialties([]),t&&(e=a(t)),e}).extend({throttle:20}),r.checkDuplicateSubType=function(){var e={subTypeId:r.selectedSubType(),specialtyId:r.selectedSpecialty()?r.selectedSpecialty():null,subSpecialtyIds:[]};ko.utils.arrayForEach(r.selectedSubSpecialties(),function(t){e.subSpecialtyIds.push(t)});var t=ko.utils.arrayFilter(r.contactCard().contactSubTypes(),function(t){var n=!1;return e.subTypeId==t.subTypeId()&&(n=!0,n=e.specialtyId&&t.specialtyId()?e.specialtyId==t.specialtyId()?!0:!1:e.specialtyId||t.specialtyId()?!1:!0,n&&(e.subSpecialtyIds.length==t.subSpecialtyIds().length&&0==t.subSpecialtyIds().length?n=!0:e.subSpecialtyIds.length!=t.subSpecialtyIds().length?n=!1:ko.utils.arrayForEach(t.subSpecialtyIds(),function(t){if(n){var a=ko.utils.arrayFilter(e.subSpecialtyIds,function(e){return e.id()==t.id()});0==a.length&&(n=!1)}}))),n});return r.isDuplicateSubType(t&&t.length>0),r.isDuplicateSubType()},r.showInvalidSubSpecialties=ko.computed(function(){var e=r.selectedSubSpecialties(),t=r.isDuplicateSubType();return t&&e&&e.length}),r.showInvalidSpecialty=ko.computed(function(){var e=r.selectedSpecialty(),t=r.isDuplicateSubType();return t&&e}),r.canAddContactSubType=ko.computed(function(){var e=r.contactCard().contactTypeId(),t=r.selectedSubType(),n=(r.selectedSubSpecialties(),r.checkDuplicateSubType());return e&&t&&!n}).extend({throttle:50}),r.addContactSubType=function(){var t=e.createComplexType("ContactSubType",{id:--s,subTypeId:r.selectedSubType(),specialtyId:r.selectedSpecialty()?r.selectedSpecialty():null});ko.utils.arrayForEach(r.selectedSubSpecialties(),function(e){t.subSpecialtyIds.push(e)}),r.contactCard().contactSubTypes.push(t),r.selectedSubType(null),r.selectedSpecialty(null),r.selectedSubSpecialties([])},r.removeContactSubType=function(e){r.contactCard().contactSubTypes.remove(e)},r.getSubSpecialtyIds=function(){var e=[];return ko.utils.arrayForEach(r.selectedSubSpecialties(),function(t){e.push({id:t.id()})}),e},r.getSubSpecialties=function(){var e=[];return ko.utils.arrayForEach(r.selectedSubSpecialties(),function(t){e.push(t)}),e},r.contactTypes=n.contactTypes,r.contactTypesShowing=ko.observable(!0),r.contactCard().isNew()&&(r.contactCard().contactTypeId(n.defaultContactType().id()),(r.contactCard().firstName()||r.contactCard().lastName())&&r.checkDuplicateContact(r.contactCard().firstName(),r.contactCard().lastName())),r.setActiveTab=n.setActiveTab,r.contactCard()&&r.contactCard().activeTab()&&"General"==r.contactCard().activeTab()?(r.tabs()[o.profile].isShowing=!1,r.contactTypesShowing(!1)):(r.tabs()[o.profile].isShowing=!0,r.contactTypesShowing(!0)),r.forceSave=function(){r.saveFunction?r.saveFunction():r.contactCard().saveChanges(),r.contactCard().isDuplicate(!1),r.contactCard().isDuplicateTested(!0),r.showing(!1)},r.contactCard().clearDirty(),!0},r.prototype.detached=function(){var e=this;e.tabErrorsUpdater.dispose(),e.contactSubTypes.dispose(),e.contactSpecialties.dispose(),e.contactSubSpecialties.dispose(),e.canAddContactSubType.dispose(),ko.utils.arrayForEach(i,function(e){e.dispose()}),i=[]},r}),n("viewmodels/templates/datetimepicker",["durandal/composition","services/dateHelper","services/formatter"],function(e,t,n){function a(e){var t=null,n=!1;if(e){var a=e.split(":");if(a&&2==a.length){var r=0,i=0;if(isNaN(a[0])||(r=Number(a[0])),isNaN(a[1])){if(a[1].length>0&&a[1].indexOf(" ")>0&&(-1!==a[1].indexOf("AM")||-1!==a[1].indexOf("PM"))){var s=a[1].split(" ");s&&s.length>1&&(isNaN(s[0])||(i=Number(s[0]),n=!0),s[1]&&-1!==s[1].indexOf("PM")&&12>r&&(r+=12))}}else i=Number(a[1]),n=!0}}return n&&(t={hour:r,minute:i}),t}function r(e,t){e.attr("maxlength",10),e.attr("placeholder","MM/DD/YYYY"),e.attr("title","MM/DD/YYYY"),e.on("keypress",function(e){var t=e.which||e.keyCode;!(48>t||t>57)||47===t||116===t||8===t||9===t||37===t||39===t||46===t||118==t&&e.ctrlKey||e.preventDefault()}),e.on("blur",function(){var a=e.val();a?(a=n.date.optimizeDate(a),a=n.date.optimizeYear(a),a!==e.val()&&e.val(a),t()!==a&&t(a)):t()&&t(null)}),e.on("keydown paste",function(a){setTimeout(function(){var r=a.which||a.keyCode,i=e.val();if(e.datepicker&&e.datepicker("hide"),!a.shiftKey&&!a.ctrlKey&&37!=r&&39!=r&&9!=r&&35!=r&&36!=r&&46!==r&&8!=r){var s=e[0].selectionStart;if(i){"paste"===a.type&&(i=i.replace(/\D/g,""));var o=i;(s==i.length||"paste"===a.type||i.replace(/\D/g,"").length>=8)&&(o=n.date.optimizeDate(i)),(o&&o!==i||"paste"===a.type)&&(e.val(o),t(o))}}},5)})}var i=function(){};return i.prototype.compositionComplete=function(e,t){var n=this;if(n.dateElm=$(e).find("[name='"+n.dateName+"']"),r(n.dateElm,n.dateStr),n.isDatepicker){if(n.dateElm.datepicker(n.datepickerOptions),n.observableDateTime()&&moment(n.observableDateTime()).isValid()){var a=moment.utc(n.observableDateTime());a.local();var i=a.format("MM/DD/YYYY");n.dateElm.datepicker("setDate",i)}if(ko.utils.domNodeDisposal.addDisposeCallback(n.dateElm,function(){n.dateElm.datepicker("destroy")}),n.dynoptions&&n.dynoptions.minDate&&ko.isObservable(n.dynoptions.minDate)){if(n.dynoptions.minDate()){var s=moment(n.dynoptions.minDate());s.isValid()&&n.dateElm.datepicker("option","minDate",s.toDate())}var o=n.dynoptions.minDate.subscribe(function(e){var t=moment(e);if(t.isValid()){var a=n.observableDateTime();(!a||moment(a).isValid()&&!moment(a).isBefore(t))&&n.dateElm.datepicker("option","minDate",t.toDate())}});n.subscriptionTokens.push(o)}if(n.dynoptions&&n.dynoptions.maxDate&&ko.isObservable(n.dynoptions.maxDate)){if(n.dynoptions.maxDate()){var d=moment(n.dynoptions.maxDate());d.isValid()&&n.dateElm.datepicker("option","maxDate",d.toDate())}var l=n.dynoptions.maxDate.subscribe(function(e){var t=moment(e);if(t.isValid()){var a=n.observableDateTime();(!a||moment(a).isValid()&&!moment(a).isAfter(t))&&n.dateElm.datepicker("option","maxDate",t.toDate())}});n.subscriptionTokens.push(l)}}n.timeElm=$(e).find("[name='"+n.timeName+"']")},i.prototype.activate=function(e){var n=this;if(n.settings=e,n.subscriptionTokens=[],n.dateName=n.settings.dateName?n.settings.dateName:"date",n.showDate=void 0!==n.settings.showDate?n.settings.showDate:!0,n.dateCss=n.settings.dateCss?n.settings.dateCss:"",n.observableDateTime=n.settings.observableDateTime,n.emptyDateIsValid=!0,n.dateErrors=n.settings.dateErrors,n.showInvalid=n.settings.showInvalid?n.settings.showInvalid:!1,n.showInvalidTime=n.settings.showInvalidTime?n.settings.showInvalidTime:!1,n.isDatepicker=n.settings.isDatepicker!==!1?!0:!1,n.datepickerOptions=n.settings.datepickerOptions||{},n.dynoptions=n.settings.datepickerDynamicOptions||{},n.minDate=n.settings.minDate?n.settings.minDate:null,n.maxDate=n.settings.maxDate?n.settings.maxDate:null,n.timeName=n.settings.timeName?n.settings.timeName:"time",n.showTime=n.settings.showTime?n.settings.showTime:!1,n.timeCss=n.settings.timeCss?n.settings.timeCss:"",n.dateStr=ko.observable(),n.timeStr=ko.observable(),n.showDate){var r=moment(n.observableDateTime());r.isValid()&&n.dateStr(r.format("MM/DD/YYYY"))}if(n.isDisableTime=ko.computed(function(){var e=!1;if(n.showTime&&n.showDate){var t=n.observableDateTime();e=!t}else n.ShowTime&&(e=!1);return e}),n.showTime&&Modernizr.inputtypes.time){var r=moment(n.observableDateTime());r.isValid()&&n.timeStr(r.format("HH:mm"))}n.isValidDate=ko.computed(function(){var e=n.dateStr(),a=t.isInvalidDate(e,{minDate:n.minDate,maxDate:n.maxDate},!n.emptyDateIsValid),r=[];return null!=a&&r.push(a),n.dateErrors(r),0===r.length}),n.disableTime=ko.computed(function(){return!n.observableDateTime()}),n.datetimeWatcher=ko.computed(function(){var e=n.dateStr(),r=n.timeStr();if(n.showDate||(r?e||(n.dateStr("1/1/1970"),e=n.dateStr()):Modernizr.inputtypes.time&&(n.dateStr(null),e=null,n.observableDateTime(null))),t.isValidDate(e)){var i,s=moment(e),o=!1;if(n.observableDateTime()){if(i=moment(n.observableDateTime()),t.isSameDate(i,s)||(i=t.setDateValue(s,i),o=!0),n.showTime&&Modernizr.inputtypes.time)if(r){var d=a(r);!d||i.hour()===d.hour&&i.minute()===d.minute||(i.hour(d.hour),i.minute(d.minute),o=!0)}else n.showDate?n.timeStr(i.format("HH:mm")):(n.observableDateTime(null),n.timeStr(null));o&&n.observableDateTime(i.toISOString())}else{if(n.showTime&&Modernizr.inputtypes.time&&r){var d=a(r);!d||s.hour()===d.hour&&s.minute()===d.minute||(s.hour(d.hour),s.minute(d.minute))}n.observableDateTime(s.toISOString())}}else n.observableDateTime()&&!e&&n.showDate&&(n.observableDateTime(null),n.dateElm.datepicker("setDate",null))})},i.prototype.detached=function(){var e=this;ko.utils.arrayForEach(e.subscriptionTokens,function(e){e.dispose()}),e.subscriptionTokens=[],e.datetimeWatcher.dispose(),e.disableTime.dispose(),e.isValidDate.dispose()},i}),n("viewmodels/templates/event.details",["services/datacontext","services/navigation","plugins/router"],function(e,t,n){var a=function(){};return a.prototype.activate=function(e){var a=this;a.settings=e,a.event=a.settings.event,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.btnMsg=ko.computed(function(){var e="Go to Individual";return e}),a.gotoSource=function(){a.event&&a.event()&&"Intervention"===a.event().type().name()?(a.showing(!1),n.navigate("#patients/"+a.event().patientId()),t.indexOverride(0)):(a.showing(!1),n.navigate("#patients/"+a.event().patientId()),t.indexOverride(0))},a.hasTimes=ko.computed(function(){return a.event&&a.event()&&a.event().hasTimes()}),a.hasPatient=ko.computed(function(){return!!a.event().patientId()})},a.prototype.attached=function(){},a}),n("viewmodels/templates/focusproblems",["services/datacontext"],function(e){var t=function(){};return t.prototype.newThenAlphabeticalSort=function(e,t){var n=e.isNew()?0:1,a=t.isNew()?0:1,r=e.name().toLowerCase(),i=t.name().toLowerCase();return n!=a?a>n?-1:n>a?1:0:i>r?-1:r>i?1:0},t.prototype.observationDisplays=ko.computed(e.enums.observationDisplays),t.prototype.deleteFocusProblem=function(e){e.entityAspect.rejectChanges(),e.deleteFlag(!0)},t.prototype.observationStates=ko.computed(function(){var t=ko.utils.arrayFirst(e.enums.observationTypes(),function(e){return"Problems"===e.name()}),n=ko.utils.arrayFilter(e.enums.observationStates(),function(e){return-1!==e.allowedTypeIds().indexOf(t.id())});return n}),t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=ko.computed(t.settings.selectedPatient),t.computedProblemObservations=ko.computed(function(){var e=[],n=t.selectedPatient().observations();return e=ko.utils.arrayFilter(n,function(e){return e.type()?"Problems"===e.type().name()&&!e.deleteFlag()&&(e.entityAspect.entityState.isModified()||"active"===e.state().name().toLowerCase()):!1}).sort(t.newThenAlphabeticalSort)}).extend({throttle:50}),t.showActions=t.settings.hasOwnProperty("showActions")?t.settings.showActions:t.showing,t.saveFocusProblems=t.settings.saveFocusProblems||function(){return!1},t.cancelFocusProblems=t.settings.cancelFocusProblems||function(){return!1}},t.prototype.attached=function(){},t}),n("viewmodels/templates/goal.edit",["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.goal=n.settings.goal,n.existingDetailsOpen=ko.observable(!1),n.toggleOpen=function(){n.existingDetailsOpen(!n.existingDetailsOpen())},n.focusAreas=e.enums.focusAreas,n.sources=e.enums.sources,n.goalTaskStatuses=e.enums.goalTaskStatuses,n.goalTypes=e.enums.goalTypes,n.availablePrograms=ko.computed(function(){var e=[];if(n.goal.patient()){var t=n.goal.patient().programs.slice(0).sort(n.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0},t.prototype.attached=function(){},t}),n("viewmodels/templates/intervention.edit",["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalSort=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.intervention=ko.unwrap(n.settings.entity),n.isNew=n.intervention&&n.intervention.goal()?n.intervention.goal().isNew:function(){return!1},n.existingDetailsOpen=ko.observable(!1),n.toggleOpen=function(){n.existingDetailsOpen(!n.existingDetailsOpen())},n.careManagers=ko.computed(function(){var t=e.enums.careManagers();return t.sort(n.alphabeticalSort)}),n.computedBarriers=ko.computed(n.intervention.goal().barriers),n.interventionStatuses=e.enums.interventionStatuses,n.interventionCategories=e.enums.interventionCategories,n.careManagers=e.enums.careManagers,n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0,n.assignedToDisplay=ko.observable(n.intervention&&n.intervention.assignedTo()?n.intervention.assignedTo().preferredName():""),n.assignedToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(n.careManagers(),function(t){return t.preferredName()===e});t&&n.intervention.assignedTo(t)}),n.checkForMatch=function(){return n.assignedToDisplay()===(n.intervention.assignedTo()?n.intervention.assignedTo().preferredName():"")},n.removeAssignment=function(){n.intervention.assignedTo(null),n.assignedToDisplay("")},n.validMatch=ko.computed(function(){var e=!1;return n.intervention&&(e=n.checkForMatch(),e||(n.intervention&&n.intervention.assignedToId()?(n.assignedToDisplay(n.intervention&&n.intervention.assignedTo()?n.intervention.assignedTo().preferredName():""),n.assignedToDisplay.valueHasMutated(),e=n.checkForMatch()):n.removeAssignment())),n.canSave=e,e}).extend({throttle:25}),n.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,t,a,r){var i=n.careManagers().sort(n.alphabeticalSort),s=$.Deferred();s.done(function(){a(this)});var o=e.toLowerCase(),d=i.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(o):!1});return s.resolveWith(d),s.promise()}},limit:25}),n.careManagersBloodhound.initialize(),n.setInvalidDueDate=ko.computed(function(){return n.intervention&&-1!==n.intervention.validationErrorsArray().indexOf("dueDate")}),n.setInvalidStartDate=ko.computed(function(){return n.intervention&&-1!==n.intervention.validationErrorsArray().indexOf("StartDate")})},t.prototype.attached=function(){},t}),n("viewmodels/templates/intervention.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","plugins/router","services/navigation"],function(e,t,n,a,r,i,s){function o(e,n){return t.getEntityById(null,e,p().EntityType,p().ResourcePath+n+"/Goal/",!0)}function d(e){var t=ko.utils.arrayFirst(v,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function l(e,t,n,a){var r=this;r.name=e,r.displayName=t,"small"===e.substr(e.length-5,5)?r.path="views/templates/intervention."+e.substr(0,e.length-6)+".html":r.path="views/templates/intervention."+e+".html",r.cssClass=n,r.sortProperty=a}function c(e){var t=this;t.intervention=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;return t.intervention()&&(e=t.intervention().isValid()),e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={entity:t.intervention,canSave:t.canSave,showing:e}}var p=ko.computed(function(){return new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Goal")}),u=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.interventionSort=function(e,t){var n=e.category()?e.category().name():"",a=t.category()?t.category().name():"",r=e.title(),i=t.title();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new c(e.modalShowing))},v=[new l("status","Status","span2","status.id"),new l("status-small","Status","span1","status.id"),new l("patient","Individual","span2","patientDetails.lastName"),new l("category","Category","span2","category.name"),new l("category-small","Category","span1","category.name"),new l("description","Title","span3","description"),new l("description-small","Title","span2","description"),new l("goal","Goal","span3","goalName"),new l("duedate","Due Date","span2","dueDate"),new l("assignedto","Assigned To","span2","assignedTo.preferredName"),new l("closeddate","Closed Date","span2","closedDate"),new l("closeddate-small","Closed Date","span1","closedDate"),new l("updatedon","Date","span2","updatedOn"),new l("updatedon-small","Date","span1","updatedOn")],m=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),g=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return u.prototype.activate=function(e){var n=this;n.interventions=e.interventions,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.saveOverride=function(){n.modalEntity().intervention()&&n.modalEntity().intervention().barrierIds().length>0&&!n.modalEntity().intervention().computedPatient().id()&&ko.utils.arrayForEach(n.modalEntity().intervention().barrierIds(),function(e){n.modalEntity().intervention().barrierIds.remove(e)}),t.saveIntervention(n.modalEntity().intervention(),"Update")},n.cancelOverride=function(){var e=n.modalEntity().intervention();t.cancelEntityChanges(e)},n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=d(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.editIntervention=function(e){function i(){var t={title:"Edit Intervention",showSelectedPatientInTitle:!0,relatedPatientName:e.computedPatient().fullName,entity:n.modalEntity,templatePath:"viewmodels/templates/intervention.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:null};n.modal=new r.modal(t),n.modalEntity().intervention(e),a.currentModal(n.modal),n.modalShowing(!0)}e&&e.patientId()&&t.getEntityById(null,e.patientId(),m().EntityType,m().ResourcePath,!0).then(function(){o(e.patientGoalId(),e.computedPatient().id()).then(i),t.getEntityList(null,g().EntityType,g().ResourcePath+e.patientId()+"/Programs",null,null,!0)})},n.computedInterventions=ko.computed(function(){return ko.utils.arrayForEach(n.interventions(),function(e){e.edit||(e.edit=function(){n.editIntervention(e)}),e.gotoGoal||(e.gotoGoal=function(){if(s.currentRoute()&&"Individual"===s.currentRoute().config.title){var t=ko.utils.arrayFirst(s.currentRoute().config.settings.pages,function(e){return"goals"===e.title});s.setSubRoute(t)}else i.navigate("#patients/"+e.computedPatient().id()),s.indexOverride(1)})}),n.interventions()})},u.prototype.detached=function(){var e=this;p.dispose(),m.dispose(),g.dispose(),e.columns.dispose(),e.computedInterventions.dispose()},u}),n("viewmodels/templates/medication.groups.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","viewmodels/patients/medications/index","durandal/app"],function(e,t,n,a,r,i,s){function o(e){var t=this;t.medication=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.medication()){var n=!!t.medication().name(),a=!!t.medication().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={selectedPatient:i.selectedPatient,medication:t.medication,canSave:t.canSave,showing:e}}var d=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},l=function(){var e=this;e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new o(e.modalShowing))};return l.prototype.activate=function(e){var n=this;n.medicationGroups=e.medicationGroups,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.activeMedication=i.activeMedication,n.saveOverride=function(){function e(){n.modalEntity().medication().isEditing(!1),n.modalEntity().medication().isNew(!1),n.modalEntity().medication().isUserCreated(!1),n.modalEntity().medication().entityAspect.acceptChanges()}var a=n.modalEntity().medication();a.needToSave()&&(a.isValid()?t.saveMedication(n.modalEntity().medication(),"Update").then(e):a.entityAspect.rejectChanges())},n.cancelOverride=function(){n.modalEntity().medication().isEditing(!1),t.cancelEntityChanges(n.modalEntity().medication())};var s={title:"Edit Medication",showSelectedPatientInTitle:!0,entity:n.modalEntity,templatePath:"viewmodels/patients/sections/medication.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:"modal-lg"};n.modal=new r.modal(s),n.setActiveMedication=function(e){i.setActiveMedication(e)},n.editMedication=function(e){e.isEditing(!0),n.modalEntity().medication(e),a.currentModal(n.modal),n.modalShowing(!0)},n.computedMedicationGroups=ko.computed(function(){return ko.utils.arrayForEach(n.medicationGroups(),function(e){ko.utils.arrayForEach(e.medications(),function(e){e.edit||(e.edit=function(){n.editMedication(e)}),e.setActiveMedication||(e.setActiveMedication=function(){n.setActiveMedication(e)})}),e.isExpanded||(e.isExpanded=ko.observable(!1))}),n.medicationGroups().sort(d)})},l}),n("viewmodels/templates/medications.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","viewmodels/patients/medications/index","durandal/app"],function(e,t,n,a,r,i,s){function o(e){var t=ko.utils.arrayFirst(p,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function d(e,t,n,a,r){var i=this;i.name=e,i.displayName=t,"small"===e.substr(e.length-5,5)?i.path="views/templates/medication."+e.substr(0,e.length-6)+".html":i.path="views/templates/medication."+e+".html",i.cssClass=n,i.sortProperty=a,i.canSort=r?!1:!0}function l(e){var t=this;t.medication=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.medication()){var n=!!t.medication().name(),a=!!t.medication().status();e=n&&a}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={selectedPatient:i.selectedPatient,medication:t.medication,canSave:t.canSave,showing:e}}var c=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.medicationSort=function(e,t){var n=e.status()?e.status().id():"",a=t.status()?t.status().id():"",r=e.name(),i=t.name();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new l(e.modalShowing))},p=[new d("expand","","span1 ellipsis filters","",!0),new d("priority","Priority","span2 ellipsis","priority.id"),new d("status","Status","span2 ellipsis","statusId"),new d("priority-small","Priority","span1 ellipsis","priority.id"),new d("status-small","","span1 ellipsis","statusId"),new d("patient","Individual","span2 ellipsis","patientDetails.lastName"),new d("type","Type","span2","type.name",!0),new d("type-small","Type","span1","type.name",!0),new d("name","Medication","span6 ellipsis","name"),new d("name-small","Medication","span2 ellipsis","name"),new d("strength","Strength","span3 ellipsis","strength"),new d("strength-small","Strength","span2 ellipsis","strength"),new d("reason","Reason","span4 ellipsis","reason.name"),new d("reason-small","Reason","span3 ellipsis","reason.name"),new d("duedate","Due Date","span2 ellipsis","dueDate"),new d("assignedto","Assigned To","span2 ellipsis","assignedTo.preferredName"),new d("startdate","Date","span2 ellipsis","startDate"),new d("sortdate","Date","span2 ellipsis","medSortDate",!0),new d("startdate-small","Date","span1 ellipsis","startDate"),new d("updatedon","Date","span2 ellipsis","updatedOn"),new d("updatedon-small","Date","span1 ellipsis","updatedOn")];ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1});return c.prototype.activate=function(e){var n=this;n.medications=e.medications,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.activeMedication=i.activeMedication,n.saveOverride=function(){function e(){n.modalEntity().medication().isEditing(!1),n.modalEntity().medication().isNew(!1),n.modalEntity().medication().isUserCreated(!1),n.modalEntity().medication().entityAspect.acceptChanges()}var a=n.modalEntity().medication();a.needToSave()&&(a.isValid()?t.saveMedication(n.modalEntity().medication(),"Update").then(e):a.entityAspect.rejectChanges())},n.cancelOverride=function(){n.modalEntity().medication().isEditing(!1),t.cancelEntityChanges(n.modalEntity().medication())};var s={title:"Edit Medication",showSelectedPatientInTitle:!0,entity:n.modalEntity,templatePath:"viewmodels/patients/sections/medication.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:"modal-lg"};n.modal=new r.modal(s),n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=o(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.setActiveMedication=function(e){i.setActiveMedication(e)},n.editMedication=function(e){e.isEditing(!0),n.modalEntity().medication(e),a.currentModal(n.modal),n.modalShowing(!0)},n.computedMedications=ko.computed(function(){return ko.utils.arrayForEach(n.medications(),function(e){e.edit||(e.edit=function(){n.editMedication(e)}),e.setActiveMedication||(e.setActiveMedication=function(){n.setActiveMedication(e)}),e.isExpanded||(e.isExpanded=ko.observable(!1))}),n.medications()})},c}),n("viewmodels/templates/module.edit",["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.module=a.settings.module,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(a.module()&&a.module().assignTo()?a.module().assignTo().preferredName():""),a.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t?a.module().assignTo(t):console.log("No match found")}),a.showing.subscribe(function(e){e||a.module().assignToId()||a.assignToDisplay("")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.module().assignTo()?a.module().assignTo().preferredName():"")},a.removeAssignment=function(){a.module().assignTo(null),a.assignToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.module()&&(e=a.checkForMatch(),e||(a.module()&&a.module().assignToId()?(a.assignToDisplay(a.module()&&a.module().assignTo()?a.module().assignTo().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r,i){var s=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var d=e.toLowerCase(),l=s.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return o.resolveWith(l),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n}),n("viewmodels/templates/note.general.edit",["services/datacontext"],function(e){function n(){e||(e=t("services/datacontext"))}var e,a=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},e.existingContentOpen=ko.observable(!1),e.toggleOpen=function(){e.existingContentOpen(!e.existingContentOpen())}};return a.prototype.activate=function(e){var t=this;t.settings=e,t.note=t.settings.note,t.availablePrograms=ko.computed(function(){
var e=[];if(t.note.patient()){var n=t.note.patient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(n,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.programString=ko.computed(function(){n();var e="",a=t.note,r=a.programIds();if(a.patient()&&a.patient().programs()){var i=a.patient().programs();ko.utils.arrayForEach(r,function(t){var n=ko.utils.arrayFirst(i,function(e){return e.id()===t.id()});e+=n?n.name()+", ":""}),e.length>0&&(e=e.substr(0,e.length-2))}return 0===e.length&&(e="None"),e}),t.canSave=t.settings.canSave?t.settings.canSave:!0,t.showing=t.settings.showing?t.settings.showing:!0},a.prototype.attached=function(){},a}),n("viewmodels/templates/note.touchpoint.edit",["services/datacontext"],function(e){var t=function(){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.methods=e.enums.noteMethods,t.whos=e.enums.noteWhos,t.sources=e.enums.noteSources,t.outcomes=e.enums.noteOutcomes,t.existingContentOpen=ko.observable(!1),t.toggleOpen=function(){t.existingContentOpen(!t.existingContentOpen())}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.note=n.settings.note,n.focusAreas=e.enums.focusAreas,n.availablePrograms=ko.computed(function(){var e=[];if(n.note.patient()){var t=n.note.patient().programs.slice(0).sort(n.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0},t.prototype.attached=function(){},t}),n("viewmodels/templates/note.utilization.edit",["services/datacontext"],function(e){var t=function(){var t=this;t.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},t.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1},t.visitTypes=e.enums.visitTypes,t.utilizationSources=e.enums.utilizationSources,t.dispositions=e.enums.dispositions,t.utilizationLocations=e.enums.utilizationLocations,t.existingContentOpen=ko.observable(!1),t.toggleOpen=function(){t.existingContentOpen(!t.existingContentOpen())}};return t.prototype.activate=function(e){var t=this;t.settings=e,t.note=t.settings.note,t.availablePrograms=ko.computed(function(){var e=[];if(t.note.patient()){var n=t.note.patient().programs.slice(0).sort(t.alphabeticalNameSort);ko.utils.arrayForEach(n,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),t.canSave=!1,t.showing=t.settings.showing?t.settings.showing:!0},t.prototype.attached=function(){},t}),n("viewmodels/templates/observation.add",["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.addNew=t.settings.addNew,t.canAdd=ko.computed(function(){return t.observation&&t.observation.computedValue()&&t.observation.startDate()?!!t.observation.computedValue().value()&&moment(t.observation.startDate()).isValid():void 0})},t.prototype.attached=function(){},t}),n("viewmodels/templates/observation.bloodpressure.add",["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.observation=t.settings.observation,t.diastolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Diast")});return e?e:null}),t.systolicObservationValue=ko.computed(function(){var e=ko.utils.arrayFirst(t.observation.values(),function(e){return-1!==e.text().indexOf("Sys")});return e?e:null}),t.customBPString=ko.computed(function(){var e="";if(t.diastolicObservationValue()&&t.systolicObservationValue()){var n=t.diastolicObservationValue().previousValue().value(),a=t.systolicObservationValue().previousValue().value(),r=n&&a?a+"/"+n:"",i=moment(t.diastolicObservationValue().previousValue().startDate()).format("MM/DD/YYYY"),s=t.diastolicObservationValue().previousValue().unit(),o=t.diastolicObservationValue().previousValue().source();e=r?r+" "+s:"",e=moment(i).isValid()?e?e+" on "+i:i:e,e=o?e+" ("+o+")":e}return e}),t.canAdd=ko.computed(function(){return t.observation&&t.diastolicObservationValue()&&t.systolicObservationValue()?!!t.diastolicObservationValue().value()&&!!t.systolicObservationValue().value()&&moment(t.observation.startDate()).isValid():!1}),t.addNew=t.settings.addNew},t.prototype.attached=function(){},t}),n("viewmodels/templates/patient.status",["services/datacontext"],function(e){var t=function(){};return t.prototype.patientStatuses=ko.computed(e.enums.patientStatuses),t.prototype.patientStatusReasons=ko.computed(e.enums.patientStatusReasons),t.prototype.activate=function(e){var t=this;t.settings=e,t.showing=ko.computed(function(){return!0}),t.selectedPatient=ko.computed(t.settings.selectedPatient)},t.prototype.attached=function(){},t.prototype.detached=function(){var e=this;ko.utils.arrayForEach(subscriptionTokens,function(e){e.dispose()}),e.showing.dispose(),e.selectedPatient.dispose()},t}),n("viewmodels/templates/patient.systems",["services/datacontext"],function(e){function t(e,t){return e.displayLabel().toLowerCase()==t.displayLabel().toLowerCase()?e.displayLabel().toLowerCase()>t.displayLabel().toLowerCase()?1:-1:e.displayLabel().toLowerCase()>t.displayLabel().toLowerCase()?1:-1}function n(e,t){var n=e.isNew()?0:1,a=t.isNew()?0:1;if(n!=a){if(a>n)return-1;if(n>a)return 1}if(0===n&&0===a)return e.id()<t.id()?1:e.id()>t.id()?-1:0;var r=e.system().displayLabel().toLowerCase(),i=t.system().displayLabel().toLowerCase();return i>r?-1:r>i?1:0}var a="This individual ID combination of System and Value already exists",r="Can't add this individual ID combination of System and Value since it already exists",i=function(){var n=this;n.newSystemId=ko.observable(),n.systems=ko.computed(function(){var n=e.enums.systems();console.log(n);var a=n.sort(t);return a}),n.patientSystemStatuses=e.enums.patientSystemStatus,n.primarySystem=ko.utils.arrayFirst(n.systems(),function(e){return e.primary()===!0})};return i.prototype.activate=function(t){var i=this;i.settings=t,i.showing=ko.computed(function(){return!0}),i.selectedPatient=i.settings.selectedPatient,i.canSave=i.settings.canSave,i.patientSystems=ko.computed(function(){var e=[],t=i.selectedPatient;t().patientSystems();return e=t().patientSystems()}),i.newPatientSystemIdValue=ko.observable(),i.newSelectedSystem=ko.observable(),i.addNewDuplicate=ko.observable(),i.newIdValidationErrors=ko.computed(function(){var e=i.newPatientSystemIdValue(),t=i.newSelectedSystem(),n=i.patientSystems(),a=[];if(!e&&!t)return[];if(e?e.trim().length||a.push({PropName:"newValue",Message:"a new Value cannot be blank"}):a.push({PropName:"newValue",Message:"a new Value is required"}),t||a.push({PropName:"newSystem",Message:"a new System is required"}),i.addNewDuplicate(null),e&&e.trim().length&&t){var s=ko.utils.arrayFirst(n,function(n){return n.isDeleted()===!1&&n.value().trim().toLowerCase()===e.trim().toLowerCase()&&n.systemId().toLowerCase()===t.id().toLowerCase()});s&&(a.push({PropName:"newValue",Message:r}),i.addNewDuplicate(s))}return a}),i.canAddNewPatientSystem=ko.computed(function(){var e=i.newPatientSystemIdValue(),t=i.newSelectedSystem(),n=i.newIdValidationErrors();return e&&e.trim()&&t&&0===n.length}),i.hasPrimarySelected=function(){var e=ko.utils.arrayFirst(i.patientSystems(),function(e){return e.primary()&&e.isDeleted()===!1});return e},i.validationErrors=ko.computed(function(){var e=(i.selectedPatient,i.patientSystems()),t=[],n=[];if(ko.utils.arrayForEach(e,function(a,r){a.isDeleted()||(a.isValid()||(isValid=!1,ko.utils.arrayForEach(a.validationErrors(),function(e){t.push(e)})),ko.utils.arrayForEach(e,function(e,t){e.isDeleted()===!1&&t!==r&&e.systemId().toLowerCase()===a.systemId().toLowerCase()&&e.value().trim().toLowerCase()===a.value().trim().toLowerCase()&&n.push(e)}))}),i.addNewDuplicate()&&t.push({PropName:"newValue",Message:r}),n.length>0){var s=!1;ko.utils.arrayForEach(n,function(e){s?t.push({PropName:"value",Message:"",Id:e.id()}):(s=!0,t.push({PropName:"value",Message:a,Id:e.id()}))})}return t}),i.validationErrorsArray=ko.computed(function(){var e=[],t=i.validationErrors(),n=!0;return ko.utils.arrayForEach(t,function(t){e.push(t.PropName),"newSystem"!==t.PropName&&"newValue"!==t.PropName&&""!==t.PropName&&(n=!1)}),i.canSave(n),e}),i.setPrimary=function(e){ko.utils.arrayForEach(i.selectedPatient().patientSystems(),function(e){e.primary(!1)}),e.primary(!0)},i.canAddId=ko.computed(function(){return!0}),i.computedEditSystemIds=ko.computed(function(){var e=i.selectedPatient().patientSystems(),t=ko.utils.arrayFilter(e,function(e){return!e.isDeleted()});return t.sort(n)}).extend({throttle:50}),i.newIdValidationErrorsArray=ko.computed(function(){var e=[];return ko.utils.arrayForEach(i.newIdValidationErrors(),function(t){e.push(t.PropName)}),e}),i.isInvalidProp=function(e,t){var n=ko.utils.arrayFirst(i.validationErrors(),function(n){return n.Id===e&&n.PropName===t});return n||i.addNewDuplicate()&&i.addNewDuplicate().id()===e},i.createNewId=function(){var t=-1*(i.selectedPatient().patientSystems().length+100),n=!1;i.primarySystem&&i.primarySystem.id()===i.newSelectedSystem().id()&&!i.hasPrimarySelected()&&(n=!0);var a=e.createEntity("PatientSystem",{id:t,patientId:i.selectedPatient().id(),system:i.newSelectedSystem(),value:i.newPatientSystemIdValue(),dataSource:"Engage",statusId:"1",primary:n});a?(a.isNew(!0),i.newSelectedSystem(null),i.newPatientSystemIdValue(null)):console.log("createNewId - datacontext.createEntity did not return an entity.")},i.deletePatientSystemId=function(t){t.isDeleted(!0),t.primary(!1),!isNaN(t.id())&&t.id()<0&&e.detachEntity(t)}},i}),n("viewmodels/templates/program.edit",["services/datacontext"],function(e){var t=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},n=function(){};return n.prototype.activate=function(n){var a=this;a.settings=n,a.program=a.settings.program,a.canSave=a.settings.canSave,a.showing=a.settings.showing,a.careManagers=e.enums.careManagers,a.assignToDisplay=ko.observable(a.program()&&a.program().assignTo()?a.program().assignTo().preferredName():""),a.assignToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(a.careManagers(),function(t){return t.preferredName()===e});t?a.program().assignTo(t):console.log("No match found")}),a.showing.subscribe(function(e){e||a.program().assignToId()||a.assignToDisplay("")}),a.checkForMatch=function(){return a.assignToDisplay()===(a.program().assignTo()?a.program().assignTo().preferredName():"")},a.removeAssignment=function(){a.program().assignTo(null),a.assignToDisplay("")},a.validMatch=ko.computed(function(){var e=!1;return a.program()&&(e=a.checkForMatch(),e||(a.program()&&a.program().assignToId()?(a.assignToDisplay(a.program()&&a.program().assignTo()?a.program().assignTo().preferredName():""),a.assignToDisplay.valueHasMutated(),e=a.checkForMatch()):a.removeAssignment())),a.canSave(e),e}).extend({throttle:25}),a.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,n,r,i){var s=a.careManagers().sort(t),o=$.Deferred();o.done(function(){r(this)});var d=e.toLowerCase(),l=s.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return o.resolveWith(l),o.promise()}},limit:25}),a.careManagersBloodhound.initialize()},n.prototype.attached=function(){},n}),n("viewmodels/templates/program.remove",["services/datacontext"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.program=t.settings.program,t.showing=t.settings.showing,t.reason=t.settings.reason},t.prototype.attached=function(){},t}),n("viewmodels/templates/task.edit",["services/datacontext"],function(e){var t=function(){var e=this;e.alphabeticalNameSort=function(e,t){return e.name()==t.name()?e.name()>t.name()?1:-1:e.name()>t.name()?1:-1},e.alphabeticalOrderSort=function(e,t){return e.order()==t.order()?e.order()>t.order()?1:-1:e.order()>t.order()?1:-1}};return t.prototype.activate=function(t){var n=this;n.settings=t,n.task=ko.unwrap(n.settings.entity),n.existingDetailsOpen=ko.observable(!1),n.toggleOpen=function(){n.existingDetailsOpen(!n.existingDetailsOpen())},n.goalTaskStatuses=e.enums.goalTaskStatuses,n.isNew=n.task&&n.task.goal()?n.task.goal().isNew:function(){return!1},n.computedBarriers=ko.computed(n.task.goal().barriers),n.canSave=n.settings.canSave?n.settings.canSave:!0,n.showing=n.settings.showing?n.settings.showing:!0},t.prototype.attached=function(){},t}),n("viewmodels/templates/task.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base","plugins/router","services/navigation"],function(e,t,n,a,r,i,s){function o(e,n){return t.getEntityById(null,e,p().EntityType,p().ResourcePath+n+"/Goal/",!0)}function d(e){var t=ko.utils.arrayFirst(v,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t}function l(e,t,n,a){var r=this;r.name=e,r.displayName=t,"small"===e.substr(e.length-5,5)?r.path="views/templates/task."+e.substr(0,e.length-6)+".html":r.path="views/templates/task."+e+".html",r.cssClass=n,r.sortProperty=a}function c(e){var t=this;t.task=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var e=!1;if(t.task()){var n=!!t.task().description();e=n}return e&&t.canSaveObservable()},write:function(e){t.canSaveObservable(e)}}),t.activationData={entity:t.task,canSave:t.canSave,showing:e}}var p=ko.computed(function(){return new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Goal")}),u=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.taskSort=function(e,t){var n=e.category()?e.category().name():"",a=t.category()?t.category().name():"",r=e.title(),i=t.title();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new c(e.modalShowing))},v=[new l("status","Status","span2","status.id"),new l("status-small","Status","span1","status.id"),new l("patient","Individual","span2","patientDetails.lastName"),new l("targetvalue","Target Value","span2","targetValue"),new l("targetvalue-small","Target Value","span1","targetValue"),new l("description","Title","span4","description"),new l("description-small","Title","span3","description"),new l("goal","Goal","span3","goalName"),new l("startdate","Start Date","span2","startDate"),new l("closeddate","Closed Date","span2","closedDate"),new l("targetdate","Target Date","span2","targetDate"),new l("statusdate","Status Date","span2","statusDate"),new l("assignedto","Assigned To","span2","assignedTo.preferredName"),new l("closedon","Date","span2","closedDate"),new l("closedon-small","Date","span1","closedDate"),new l("updatedon","Date","span2","updatedOn"),new l("updatedon-small","Date","span1","updatedOn")],m=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),g=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return u.prototype.activate=function(e){var n=this;n.tasks=e.tasks,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.saveOverride=function(){n.modalEntity().task().checkAppend(),t.saveTask(n.modalEntity().task(),"Update")},n.cancelOverride=function(){var e=n.modalEntity().task();t.cancelEntityChanges(e)};var i={title:"Edit Task",showSelectedPatientInTitle:!0,entity:n.modalEntity,templatePath:"viewmodels/templates/task.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:null};n.modal=new r.modal(i),n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=d(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.editTask=function(e){function t(){n.modalEntity().task(e),a.currentModal(n.modal),n.modalShowing(!0)}e&&e.goal()&&e.goal().patientId()?e.goal()&&e.goal().patient()&&0===e.goal().patient().programs().length?o(e.patientGoalId(),e.patientId()).then(t):o(e.patientGoalId(),e.patientId()).then(t):t()},n.computedTasks=ko.computed(function(){return ko.utils.arrayForEach(n.tasks(),function(e){e.edit||(e.edit=function(){n.editTask(e)},e.gotoGoal||(e.gotoGoal=function(){var e=ko.utils.arrayFirst(s.currentRoute().config.settings.pages,function(e){return"goals"===e.title});s.setSubRoute(e)}))}),n.tasks()})},u.prototype.detached=function(){var e=this;p.dispose(),m.dispose(),g.dispose(),e.columns.dispose(),e.computedTasks.dispose()},u}),n("viewmodels/templates/todo.edit",["services/datacontext","services/local.collections"],function(e,t){function n(e){var t=this;t.Message=e}var a=[],r=function(e,t){return e.preferredName()==t.preferredName()?e.preferredName()>t.preferredName()?1:-1:e.preferredName()>t.preferredName()?1:-1},i=function(){};return i.prototype.activate=function(i){var s=this;s.settings=i,s.todo=s.settings.todo,s.canSave=s.settings.canSave,s.showing=s.settings.showing,s.careManagers=e.enums.careManagers,s.toDoCategories=e.enums.toDoCategories,s.statuses=e.enums.goalTaskStatuses,s.priorities=e.enums.priorities,s.errors=ko.computed(function(){var e=[],t=s.todo().title();return t||e.push(new n("'Title' is required")),e}),s.hasErrors=ko.computed(function(){return s.errors().length>0}),s.deleteToDo=function(){function n(){s.todo().entityAspect.acceptChanges(),s.showing(!1),t.todos.remove(s.todo()),s.todo().patientId(null),setTimeout(function(){e.detachEntity(s.todo())},25)}var a=confirm("Are you sure you want to delete the to-do?");return a!==!0?!1:(s.todo().deleteFlag(!0),void e.saveToDo(s.todo(),"Update").then(n))},s.noPatient=ko.computed(function(){return!!s.todo().patientId()}),s.availablePrograms=ko.computed(function(){var e=[];if(s.todo().patientId()&&s.todo().patient()){var t=s.todo().patient().programs.slice(0).sort(s.alphabeticalNameSort);ko.utils.arrayForEach(t,function(t){6!==t.elementState()&&1!==t.elementState()&&5!==t.elementState()&&e.push(t)})}return e}),s.assignedToDisplay=ko.observable(s.todo()&&s.todo().assignedTo()?s.todo().assignedTo().preferredName():"");var o=s.assignedToDisplay.subscribe(function(e){var t=ko.utils.arrayFirst(s.careManagers(),function(t){return t.preferredName()===e});t?s.todo().assignedTo(t):console.log("No match found")});a.push(o),s.checkForMatch=function(){return s.assignedToDisplay()===(s.todo().assignedTo()?s.todo().assignedTo().preferredName():"")},s.removeAssignment=function(){s.todo().assignedTo(null),s.todo().assignedToId(null),s.assignedToDisplay("")},s.removePatientAssociation=function(){s.todo().patientId(null),s.todo()&&s.todo().programIds().length>0&&!s.todo().patientId()&&s.todo().programIds.removeAll()},s.removeUserAssociation=function(){s.removeAssignment()},s.validMatch=ko.computed({read:function(){var e=!1;return s.todo()&&(e=s.checkForMatch(),e||(s.todo()&&s.todo().assignedToId()?(s.assignedToDisplay(s.todo()&&s.todo().assignedTo()?s.todo().assignedTo().preferredName():""),s.assignedToDisplay.valueHasMutated(),e=s.checkForMatch()):s.removeAssignment())),s.canSave(e),e},deferEvaluation:!0}).extend({throttle:25}),s.careManagersBloodhound=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name())},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"%QUERY",transport:function(e,t,n,a){var i=s.careManagers().sort(r),o=$.Deferred();o.done(function(){n(this)});var d=e.toLowerCase(),l=i.filter(function(e){return e&&e.firstLastOrPreferredName?!!~e.firstLastOrPreferredName().toLowerCase().indexOf(d):!1});return o.resolveWith(l),o.promise()}},limit:25}),s.careManagersBloodhound.initialize()},i.prototype.attached=function(){},i.prototype.detached=function(){var e=this;e.errors.dispose(),e.hasErrors.dispose(),e.noPatient.dispose(),e.availablePrograms.dispose(),e.validMatch.dispose(),ko.utils.arrayForEach(a,function(e){e.dispose()})},i}),n("viewmodels/templates/todo.panel",["services/session","services/datacontext","config.services","viewmodels/shell/shell","models/base"],function(e,t,n,a,r){function i(e){var t=ko.utils.arrayFirst(l,function(t){return t.name.toLowerCase()===e.toLowerCase()});return t||console.log("bad column name used - ",e),t}function s(e,t,n,a,r){var i=this;i.name=e,i.displayName=t,"small"===e.substr(e.length-5,5)?i.path="views/templates/todo."+e.substr(0,e.length-6)+".html":i.path="views/templates/todo."+e+".html",i.cssClass=n,i.sortProperty=a,i.backendSort=r}function o(e){var t=this;t.todo=ko.observable(),t.canSaveObservable=ko.observable(!0),t.canSave=ko.computed({read:function(){var n=!1,a=e(),r=t.todo();return a?(r&&(n=r.isValid()),n&&t.canSaveObservable()):!1},write:function(e){t.canSaveObservable(e)}}),t.activationData={todo:t.todo,canSave:t.canSave,showing:e}}var d=function(){var e=this;e.descendingDateSort=function(e,t){return e.dueDate()==t.dueDate()?e.dueDate()<t.dueDate()?1:-1:e.dueDate()<t.dueDate()?1:-1},e.todoSort=function(e,t){var n=e.category()?e.category().name():"",a=t.category()?t.category().name():"",r=e.title(),i=t.title();return n!=a?a>n?1:n>a?-1:0:i>r?1:r>i?-1:0},e.modalShowing=ko.observable(!1),e.modalEntity=ko.observable(new o(e.modalShowing)),e.originalProgramIds=ko.observableArray([])},l=[new s("priority","Priority","span2","priority.id","Priority"),new s("status","Status","span2","status.id"),new s("priority-small","Priority","span1","priority.id","Priority"),new s("status-small","Status","span1","status.id"),new s("patient","Individual","span2","patientDetails.lastName",!0),new s("category","Category","span2","category.name",!0),new s("category-small","Category","span1","category.name",!0),new s("title","Title","span4","title","Title"),new s("title-small","Title","span3","title","Title"),new s("duedate","Due Date","span2","dueDate","DueDate"),new s("assignedto","Assigned To","span2","assignedTo.preferredName",!0),new s("closedon","Date","span2","closedDate","ClosedDate"),new s("closedon-small","Date","span1","closedDate","ClosedDate"),new s("updatedon","Date","span2","updatedOn","UpdatedOn"),new s("updatedon-small","Date","span1","updatedOn","UpdatedOn")],c=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"patient","Patient"):!1}),p=ko.computed(function(){return e.currentUser()?new n.createEndPoint("1.0",e.currentUser().contracts()[0].number(),"Patient","Program"):!1});return d.prototype.activate=function(e){var n=this;n.todos=e.todos,n.selectedSortColumn=e.selectedSortColumn,n.toggleSort=e.toggleSort,n.canSort=e.canSort?e.canSort:!1,n.isBackendSort=e.isBackendSort?e.isBackendSort:!1,n.todosReloading=e.todosReloading?e.todosReloading:ko.observable(!1);var s=i("assignedto");s&&(s.backendSort=!n.isBackendSort),s=i("patient"),s&&(s.backendSort=!n.isBackendSort),s=i("category"),s&&(s.backendSort=!n.isBackendSort),s=i("category-small"),s&&(s.backendSort=!n.isBackendSort),n.loadMoreTodos=e.loadMoreTodos,n.canLoadMoreTodos=e.canLoadMoreTodos,n.maxToToDosLoaded=e.maxToToDosLoaded,n.saveOverride=function(){function e(){n.modalEntity().todo().isNew(!1),n.modalEntity().todo().clearDirty(),n.modalEntity().todo().entityAspect.acceptChanges(),n.originalProgramIds.removeAll()}n.modalEntity().todo()&&n.modalEntity().todo().programIds().length>0&&!n.modalEntity().todo().patientId()&&n.modalEntity().todo().programIds.removeAll(),t.saveToDo(n.modalEntity().todo(),"Update").then(e)},n.cancelOverride=function(){if(n.modalEntity().todo().entityAspect.entityState.isAddedModifiedOrDeleted()){t.cancelEntityChanges(n.modalEntity().todo()),n.modalEntity().todo().programIds.removeAll();var e=n.modalEntity().todo().programIds();n.originalProgramIds().length>0&&(ko.utils.arrayPushAll(e,n.originalProgramIds()),n.originalProgramIds.removeAll()),n.modalEntity().todo().entityAspect.setUnchanged(),n.modalEntity().todo().categoryId()||n.modalEntity().todo().category(null),n.modalEntity().todo().assignedToId()||n.modalEntity().todo().assignedTo(null),n.modalEntity().todo().clearDirty()}},n.columns=ko.computed(function(){var t=[],n=e.columns();return ko.utils.arrayForEach(n,function(e){var n=i(e);n&&t.push(n)}),t||(t=["status","patient","category","title","duedate"]),t}),n.editToDo=function(e){e&&e.patientDetails()&&e.patientId()&&(e.patient()&&0===e.patient().programs().length?t.getEntityList(null,p().EntityType,p().ResourcePath+e.patientId()+"/Programs",null,null,!0):(t.getEntityById(null,e.patientId(),c().EntityType,c().ResourcePath,!0),t.getEntityList(null,p().EntityType,p().ResourcePath+e.patientId()+"/Programs",null,null,!0))),n.originalProgramIds.removeAll();var i=n.originalProgramIds();ko.utils.arrayPushAll(i,e.programIds());var s={title:"Edit To Do",relatedPatientName:e.patientName,entity:n.modalEntity,templatePath:"viewmodels/templates/todo.edit",showing:n.modalShowing,saveOverride:n.saveOverride,cancelOverride:n.cancelOverride,deleteOverride:null,classOverride:null};n.modal=new r.modal(s),e.watchDirty(),n.modalEntity().todo(e),a.currentModal(n.modal),n.modalShowing(!0)},n.computedTodos=ko.computed(function(){ko.utils.arrayForEach(n.todos(),function(e){e.edit||(e.edit=function(){n.editToDo(e)})});var e=ko.utils.arrayFilter(n.todos(),function(e){return!e.deleteFlag()});return e}),n.noDataFound=ko.computed(function(){return!n.todosReloading()&&0==n.computedTodos().length})},d.prototype.detached=function(){var e=this;c.dispose(),p.dispose(),e.columns.dispose(),e.computedTodos.dispose(),e.noDataFound.dispose()},d}),function(){window.Visualization=function(){function e(e,t,n){var a=this;this.selector=e,this.patients=t,this.rad_prop=n,this.svg=d3.select(this.selector),this.color_scale=d3.scale.category10(),this.dynamic_radius=!0,this.filters=$("#filters :checkbox"),this.height=d3.min([$(this.svg.node()).parents(".body").width(),$(this.svg.node()).parents(".body").height()]),this.padding=15,this.show_backgrounds=!0,this.width=this.height,this.force=d3.layout.force().charge(-70).gravity(.05).size([this.width,this.height]).on("tick",function(e){return a.tick(e)}),this.filters.change(function(){return a.data_grouping()}),this.filters.each(function(e,t){return $(t).parents("td").next("td").find(".indicator").css("background",a.color_scale(e))}),this.chart_setup()}return e.prototype.chart_setup=function(){var e=this;return this.patients.forEach(function(t){return t.radius=t[e.rad_prop]+5}),this.svg.attr("height",this.height).attr("width",this.width),this.svg.append("g").attr("class","placeholders"),this.svg.append("g").attr("class","nodes"),this.nodes=this.svg.select("g.nodes").selectAll("circle.node").data(this.patients).enter().append("svg:circle").attr("class","node").attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).style("fill",function(t){return e.color_scale(0)}).style("opacity","1"),this.data_grouping()},e.prototype.data_grouping=function(){var e,t,n,a=this;return e=$("#filters :checkbox:checked"),this.filters.not(":checked").prop("disabled",e.length>2),e.prop("disabled",e.length<2),$.uniform.update(this.filters),this.overlaps=[],n=function(e){var t;return t=!1,_.pluck(a.overlaps,"sets").forEach(function(n){return d3.max(n)===d3.max(e)&&d3.min(n)===d3.min(e)?t=!0:void 0}),t},t=function(e){var t;return t=0,a.sets.forEach(function(n){return n.conditional(e)?t++:void 0}),t===a.sets.length},this.sets=$.map(e,function(e){var t,n,r;return e=$(e),t=function(){switch(e.data("comparator")){case"contains":return function(t){return-1!==t[e.data("key")].indexOf(parseInt(e.val()))};case"equality":return function(t){return t[e.data("key")]};case"threshold":return function(t){return t[e.data("key")]>e.val()}}}(),r=a.patients.filter(function(e){return t(e)}),n={id:e.val(),conditional:t,patients:r,size:r.length,color:e.parents("td").next("td").find(".indicator").css("background-color")}}),this.sets.forEach(function(e,r){return a.sets.filter(function(e,t){return t!==r}).forEach(function(i){var s,o;return s=e.patients.filter(function(e){return i.conditional(e)}),a.sets.length>2&&(a.central_patients=a.patients.filter(function(e){return t(e)}),s=_.union(s,a.central_patients)),e.patients=_.difference(e.patients,s),i.patients=_.difference(i.patients,s),o=[r,a.sets.indexOf(i)].sort(),n(o)?void 0:a.overlaps.push({patients:s,sets:o,size:s.length,color:a.color_mixer([e.color,i.color])})})}),_.isEmpty(this.overlaps)?(this.sets[0].x=this.width/2,this.sets[0].y=this.height/2,this.sets[0].radius=d3.min([this.width,this.height])/2):(this.sets=venn.venn(this.sets,this.overlaps,{layoutFunction:venn.classicMDSLayout}),this.sets=venn.scaleSolution(this.sets,this.width,this.height,this.padding)),this.patient_attractions()},e.prototype.patient_attractions=function(){var e,t=this;return this.sets.forEach(function(e,n){var a;return a={x:e.x,y:e.y},_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=[e],t.cluster=e,t.color=e.color})}),this.overlaps.forEach(function(e,n){return e.groups=[t.sets[e.sets[0]],t.sets[e.sets[1]]],_.extend(e,t.lens_center(e.groups[0],e.groups[1])),_.intersection(t.patients,e.patients).forEach(function(t){return t.bounds=e.groups,t.cluster=e,t.color=e.color})}),this.unscoped_patients=_.difference(this.patients,_.flatten(_.pluck(this.sets,"patients")),_.flatten(_.pluck(this.overlaps,"patients"))),this.unscoped_patients.forEach(function(e){return e.bounds=void 0}),_.where(this.patients,{bounds:void 0}).forEach(function(e){return e.cluster={x:-1e3,y:-1e3}}),this.overlaps.length>2&&(e=this.circumcenter(),this.central_patients.forEach(function(n){return n.bounds=t.sets,n.cluster=e,n.color=t.color_mixer(_.pluck(t.sets,"color"))})),this.determine_radius()},e.prototype.determine_radius=function(){var e,t;return e=d3.sum(this.sets,function(e){return venn.circleArea(e.radius,e.radius)}),t=d3.sum(this.patients,function(e){return e[this.rad_prop]}),this.radius=Math.sqrt(e/t/Math.PI),this.node_animations()},e.prototype.node_animations=function(e,t){var n=this;return this.show_backgrounds&&this.placeholders(),this.nodes.data(this.patients),this.force.nodes(this.patients).start(),this.filter_patients(),this.svg.on("click",function(){var e,t,a,r;return a=500,t=d3.select(d3.event.target).datum(),n.nodes.filter(function(e){return e===t}).size()>0?(e=n.nodes.filter(function(e){return e.cluster===t.cluster}),e.transition().duration(a).style("opacity","1"),r=n.nodes.filter(function(e){return e.cluster!==t.cluster}),r.transition().duration(a).style("opacity","0.25"),n.filter_patients(r.data())):(n.nodes.transition().duration(a).style("opacity","1"),n.filter_patients())})},e.prototype.tick=function(e){var t,n,a=this;return n=d3.geom.quadtree(this.patients),t=.1*e.alpha,this.patients.forEach(function(e,r){return e.radius=a.dynamic_radius?2*e[a.rad_prop]+4:a.radius,e.x+=(e.cluster.x-e.x)*t,e.y+=(e.cluster.y-e.y)*t,n.visit(a.contain(e))}),this.nodes.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",function(e){return e.radius}).style("fill",function(e){return e.color})},e.prototype.filter_patients=function(e){var t,n,a;return null==e&&(e=this.unscoped_patients),n=_.pluck(e,"id"),a=$(this.svg.node()).parents(".column").next(".column").find("tbody tr"),t=a.filter(function(e){return _.contains(n,$(this).data("id"));
}),t.css("display","none"),a.not(t).css("display","")},e.prototype.placeholders=function(){var e;return e=this.svg.select("g.placeholders").selectAll("circle.layout").data(this.sets),e.enter().append("svg:circle").attr("class","layout"),e.attr("r",function(e){return e.radius}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("fill",function(e){return e.color}),e.exit().remove()},e.prototype.cartesian_to_polar=function(e,t){return{angle:Math.atan2(e.y-t.y,e.x-t.x),magnitude:venn.distance(e,t)}},e.prototype.circumcenter=function(){var e,t,n=this;return e=this.overlaps.map(function(e){return e.points=venn.circleCircleIntersection(e.groups[0],e.groups[1]),e.slope=n.slope(e.points[0],e.points[1]),e.midpoint=n.midpoint(e.points[0],e.points[1]),e}),e=e.filter(function(e){return void 0!==e.slope}),e=e.map(function(e){return e.yint=e.points[0].y-e.slope*e.points[0].x,e}),t=(-e[1].slope*e[1].points[0].x+e[1].points[0].y+e[0].slope*e[0].points[0].x-e[0].points[0].y)/(e[0].slope-e[1].slope),{x:t,y:e[0].slope*t+e[0].yint}},e.prototype.collide=function(e){var t,n,a,r,i;return i=e.radius,t=e.x-i,n=e.x+i,a=e.y-i,r=e.y+i,function(s,o,d,l,c){var p,u,v;return s.point&&s.point!==e&&(u=e.x-s.point.x,v=e.y-s.point.y,p=Math.sqrt(Math.pow(u,2)+Math.pow(v,2)),i=1.05*(e.radius+s.point.radius),i>p&&(p=(p-i)/p*.5,e.x-=u*=p,e.y-=v*=p,s.point.x+=u,s.point.y+=v)),o>n||t>l||d>r||a>c}},e.prototype.color_mixer=function(e){var t;return t=Color(e.pop()),e.forEach(function(e){return t.mix(Color(e))}),e.length>1&&t.darken(.35),t.rgbString()},e.prototype.contain=function(e){var t,n=this;return t={x:e.x,y:e.y},"undefined"!=typeof e.bounds&&(t=this.exclude(e,t),e.bounds.forEach(function(e){var a;return a=n.cartesian_to_polar(t,e),t=n.polar_to_cartesian(a.angle,Math.min(a.magnitude,e.radius-n.padding),e)})),e.x=t.x,e.y=t.y,this.collide(e)},e.prototype.exclude=function(e,t){var n,a=this;return n=_.difference(this.sets,e.bounds),n.forEach(function(e){var n;return n=a.cartesian_to_polar(t,e),t=a.polar_to_cartesian(n.angle,Math.max(n.magnitude,e.radius+a.padding),e)}),t},e.prototype.lens_center=function(e,t){var n;return n=venn.circleCircleIntersection(e,t),this.midpoint(n[0],n[1])},e.prototype.midpoint=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},e.prototype.slope=function(e,t){return[e,t].forEach(function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y)}),t.x===e.x?void 0:(t.y-e.y)/(t.x-e.x)},e.prototype.polar_to_cartesian=function(e,t,n){return null==n&&(n={x:0,y:0}),{x:Math.cos(e)*t+n.x,y:Math.sin(e)*t+n.y}},e}()}.call(this),n("viewmodels/venn/patient.venn",function(){}),n("widgets/chsnmultiple/viewmodel",["durandal/composition"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."})},t.prototype.attached=function(){},t}),n("widgets/chsnsingle/viewmodel",["durandal/composition"],function(e){var t=[],n=function(){};return n.prototype.compositionComplete=function(e,t){function n(e){var t=!1,n=$(a.ulSearchResults).children("li:contains("+a.stickeySearchItemText+")");if(0==n.length){var r=e?"highlighted":"";a.ulSearchResults.append('<li class="active-result '+r+'" data-option-array-index="'+a.stickeyIndex+'">'+a.stickeySearchItemText+"</li>"),t=!0}return t}var a=this;if(ko.utils.unwrapObservable(a.isFocused)&&(a.selectElm=$(e).find("select"),a.selectElm.trigger("chosen:activate")),a.isSearch&&a.stickeySearchItemText&&(a.searchTokenInput=$(e).find("div.chosen-search input"),a.ulSearchResults=$(e).find("ul.chosen-results"),a.searchTokenInput)){var r=$(e).children("select").children("option:contains("+a.stickeySearchItemText+")");a.stickeyIndex=r.index(),$(a.searchTokenInput).on("change keyup paste",function(e){var t=$(this).val();if(ko.isObservable(a.searchQueryText)&&a.searchQueryText(t),t&&t.length>0||"paste"===e.type||"cut"===e.type){var r=!1,i=e.which||e.keyCode;1==a.ulSearchResults.children(".no-results").length&&(r=!0),n(r)||13==i&&2==a.ulSearchResults.children().length&&r&&a.stickeyIndex&&a.stickeyIndex>0&&a.options&&a.options.length>0&&(a.idValue?a.selectedValue(a.options[a.stickeyIndex-1][a.idValue]):a.selectedValue(a.options[a.stickeyIndex-1]))}("paste"===e.type||"cut"===e.type)&&setTimeout(function(){n()},100)})}},n.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.disabled=t.settings.disabled,t.isRequired=t.settings.isRequired,t.caption=t.settings.caption?t.settings.caption:"Choose one",t.isCancel=t.settings.isCancel?t.settings.isCancel:!1,t.isSearch=t.settings.isSearch?t.settings.isSearch:!1,t.searchQueryText=t.settings.searchQueryText,t.stickeySearchItemText=t.settings.stickeySearchItemText?t.settings.stickeySearchItemText:null,t.title=t.settings.title?t.settings.title:null,t.isFocused=t.settings.isFocused?t.settings.isFocused:null,t.isInvalid=ko.computed(function(){return t.isRequired&&!t.selectedValue()}),t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){ko.isObservable(e[t.text])?e.thisText=ko.computed(e[t.text]):e.thisText=ko.computed(function(){return e[t.text]})}),e})},n.prototype.attached=function(){},n.prototype.detached=function(){var e=this;ko.utils.arrayForEach(t,function(e){e.dispose()}),e.isInvalid.dispose(),$(e.searchTokenInput).remove()},n}),n("widgets/chsnsingledark/viewmodel",["durandal/composition"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.disabled=t.settings.disabled,t.caption=t.settings.caption?t.settings.caption:"Choose one",t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){ko.isObservable(e[t.text])?e.thisText=ko.computed(e[t.text]):e.thisText=ko.computed(function(){return e[t.text]})}),e})},t.prototype.attached=function(){},t}),n("widgets/multiselect/viewmodel",["durandal/composition"],function(e){function n(){a||(a=t("services/datacontext"))}var a,r=function(){};return r.prototype.activate=function(e){var t=this;t.settings=e,t.canClose=ko.observable(!1),t.showing=ko.observable(!1),t.isInFocus=ko.observable(!1),t.options=t.settings.options,t.selectedValues=t.settings.values,t.isRequired=t.settings.isRequired,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.stringValue=t.settings.stringValue,t.computedOptions=ko.computed(function(){var e=t.options();return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}).extend({throttle:50}),t.checkForIdValue=function(e){var n=ko.utils.arrayFirst(t.selectedValues(),function(t){return t.id()===e});return n?!0:!1},t.computedLabel=ko.computed(function(){return t.selectedValues()?t.selectedValues().length+" selected.":"Choose..."}).extend({throttle:50}),t.selectOption=function(e){t.stopClosing(),n();var r=ko.utils.arrayFirst(t.selectedValues(),function(t){return t.id()===e.id()});if(r){var i=t.selectedValues().indexOf(r);i>-1?t.selectedValues.splice(i,1):t.selectedValues.remove(r)}else{var s={id:e.id()};thisComplexType=a.createComplexType("Identifier",s),t.selectedValues.push(thisComplexType)}t.isInFocus(!0)},t.inFocusTracker=ko.computed(function(){var e=t.isInFocus(),n=t.showing();!e&&n&&t.startClosing()}).extend({throttle:50}),t.isDisabled=ko.computed(function(){var e=!1;return t.settings.disabled&&(e=t.settings.disabled),e}).extend({throttle:50}),t.isInvalid=ko.computed(function(){return t.isRequired&&0===t.selectedValues().length}).extend({throttle:50})},r.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},r.prototype.startClosing=function(){var e=this;e.canClose(!0),setTimeout(function(){e.canClose()&&e.showing(!1)},200)},r.prototype.stopClosing=function(){var e=this;e.canClose(!1)},r.prototype.attached=function(){},r.prototype.detached=function(){var e=this;e.isInvalid.dispose(),e.isDisabled.dispose(),e.inFocusTracker.dispose(),e.computedLabel.dispose(),ko.utils.arrayForEach(e.computedOptions,function(e){e.thisText.dispose()}),e.computedOptions.dispose()},r}),n("widgets/singleselect/viewmodel",["durandal/composition"],function(e){var t=function(){};return t.prototype.activate=function(e){var t=this;t.settings=e,t.canClose=ko.observable(!1),t.showing=ko.observable(!1),t.options=t.settings.options,t.selectedValue=t.settings.value,t.text=t.settings.text,t.label=t.settings.label,t.idValue=t.settings.idValue,t.computedOptions=ko.computed(function(){var e=ko.unwrap(t.options);return ko.utils.arrayForEach(e,function(e){e.thisText=ko.computed(e[t.text])}),e}),t.computedLabel=ko.computed(function(){if(t.selectedValue()){if(t.idValue){var e=ko.unwrap(t.options),n=ko.utils.arrayFirst(e,function(e){return e[t.idValue]()===t.selectedValue()});return n?n[t.text]():null}return t.selectedValue()[t.text]()}return"Choose..."}),t.selectOption=function(e){t.idValue?t.selectedValue(e[t.idValue]()):t.selectedValue(e),t.showing(!1)},t.checkClosing=ko.computed(function(){t.canClose()&&t.showing(!1)}).extend({throttle:1e3}),t.isDisabled=ko.computed(function(){var e=!1;return t.settings.disabled&&(e=t.settings.disabled),e})},t.prototype.toggleDropdown=function(){var e=this;0===e.computedOptions().length||e.isDisabled()||e.showing(!e.showing())},t.prototype.startClosing=function(){var e=this;e.canClose(!1),e.canClose(!0)},t.prototype.stopClosing=function(){var e=this;e.canClose(!1)},t.prototype.attached=function(){},t}),n("plugins/dialog",["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,a,r,i,s){function o(t){return e.defer(function(n){e.isString(t)?e.acquire(t).then(function(t){n.resolve(e.resolveObject(t))}).fail(function(n){e.error("Failed to load dialog module ("+t+"). Details: "+n.message)}):n.resolve(t)}).promise()}var d,l={},c=s.observable(0),p=function(e,t,n,a,r){this.message=e,this.title=t||p.defaultTitle,this.options=n||p.defaultOptions,this.autoclose=a||!1,this.settings=i.extend({},p.defaultSettings,r)};return p.prototype.selectOption=function(e){d.close(this,e)},p.prototype.getView=function(){return r.processMarkup(p.defaultViewMarkup)},p.setViewUrl=function(e){delete p.prototype.getView,p.prototype.viewUrl=e},p.defaultTitle=t.title||"Application",p.defaultOptions=["Ok"],p.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"","class":"modal-content messageBox",style:null},p.setDefaults=function(e){i.extend(p.defaultSettings,e)},p.prototype.getButtonClass=function(e){var t="";return this.settings&&(this.settings.buttonClass&&(t=this.settings.buttonClass),0===e()&&this.settings.primaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.primaryButtonClass),e()>0&&this.settings.secondaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.secondaryButtonClass)),t},p.prototype.getClass=function(){return this.settings?this.settings["class"]:"messageBox"},p.prototype.getStyle=function(){return this.settings?this.settings.style:null},p.prototype.getButtonText=function(t){var n=i.type(t);return"string"===n?t:"object"===n?"string"===i.type(t.text)?t.text:(e.error("The object for a MessageBox button does not have a text property that is a string."),null):(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},p.prototype.getButtonValue=function(t){var n=i.type(t);return"string"===n?t:"object"===n?"undefined"===i.type(t.text)?(e.error("The object for a MessageBox button does not have a value property defined."),null):t.value:(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},p.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"<!-- ko foreach: options -->",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"<!-- /ko -->",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),d={MessageBox:p,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:s.computed(function(){return c()>0}),getContext:function(e){return l[e||"default"]},addContext:function(e,t){t.name=e,l[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.binding&&(n.binding=t.binding),t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,r,i){var s=this,d=l[i||"default"];return e.defer(function(e){o(t).then(function(t){var i=a.create();i.activateItem(t,r).then(function(a){if(a){var r=t.__dialog__={owner:t,context:d,activator:i,close:function(){var n=arguments;i.deactivateItem(t,!0).then(function(a){a&&(c(c()-1),d.removeHost(r),delete t.__dialog__,0===n.length?e.resolve():1===n.length?e.resolve(n[0]):e.resolve.apply(e,n))})}};r.settings=s.createCompositionSettings(t,d),d.addHost(r),c(c()+1),n.compose(r.host,r.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,n,a,r,i){return e.isString(this.MessageBox)?d.show(this.MessageBox,[t,n||p.defaultTitle,a||p.defaultOptions,r||!1,i||{}]):d.show(new this.MessageBox(t,n,a,r,i))},install:function(e){t.showDialog=function(e,t,n){return d.show(e,t,n)},t.closeDialog=function(){return d.close.apply(d,arguments)},t.showMessage=function(e,t,n,a,r){return d.showMessage(e,t,n,a,r)},e.messageBox&&(d.MessageBox=e.messageBox),e.messageBoxView&&(d.MessageBox.prototype.getView=function(){return r.processMarkup(e.messageBoxView)}),e.messageBoxViewUrl&&d.MessageBox.setViewUrl(e.messageBoxViewUrl)}},d.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=i("body"),n=i('<div class="modalBlockout"></div>').css({"z-index":d.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),a=i('<div class="modalHost"></div>').css({"z-index":d.getNextZIndex()}).appendTo(t);if(e.host=a.get(0),e.blockout=n.get(0),!d.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var r=i("html"),s=t.outerWidth(!0),o=r.scrollTop();i("html").css("overflow-y","hidden");var l=i("body").outerWidth(!0);t.css("margin-right",l-s+parseInt(e.oldBodyMarginRight,10)+"px"),r.scrollTop(o)}},removeHost:function(e){if(i(e.host).css("opacity",0),i(e.blockout).css("opacity",0),setTimeout(function(){s.removeNode(e.host),s.removeNode(e.blockout)},this.removeDelay),!d.isOpen()){var t=i("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?i("body").css("margin-right",e.oldBodyMarginRight):i("body").css("margin-right","")}},attached:function(e){i(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var a=d.getDialog(n.model),r=i(e),s=r.find("img").filter(function(){var e=i(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});r.data("predefinedWidth",r.get(0).style.width);var o=function(e,t){setTimeout(function(){var n=i(e);t.context.reposition(e),i(t.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};o(e,a),s.load(function(){o(e,a)}),(r.hasClass("autoclose")||n.model.autoclose)&&i(a.blockout).click(function(){a.close()})},reposition:function(e){var t=i(e),n=i(window);t.data("predefinedWidth")||t.css({width:""});var a=t.outerWidth(!1),r=t.outerHeight(!1),s=n.height()-10,o=n.width()-10,d=Math.min(r,s),l=Math.min(a,o);t.css({"margin-top":(-d/2).toString()+"px","margin-left":(-l/2).toString()+"px"}),r>s?t.css("overflow-y","auto").outerHeight(s):t.css({"overflow-y":"",height:""}),a>o?t.css("overflow-x","auto").outerWidth(o):(t.css("overflow-x",""),t.data("predefinedWidth")?t.css("width",t.data("predefinedWidth")):t.outerWidth(l))}}),d}),n("plugins/http",["jquery","knockout"],function(e,t){return{callbackParam:"callback",toJSON:function(e){return t.toJSON(e)},get:function(n,a,r){return e.ajax(n,{data:a,headers:t.toJS(r)})},jsonp:function(n,a,r,i){return-1==n.indexOf("=?")&&(r=r||this.callbackParam,n+=-1==n.indexOf("?")?"?":"&",n+=r+"=?"),e.ajax({url:n,dataType:"jsonp",data:a,headers:t.toJS(i)})},put:function(n,a,r){return e.ajax({url:n,data:this.toJSON(a),type:"PUT",contentType:"application/json",dataType:"json",headers:t.toJS(r)})},post:function(n,a,r){return e.ajax({url:n,data:this.toJSON(a),type:"POST",contentType:"application/json",dataType:"json",headers:t.toJS(r)})},remove:function(n,a,r){return e.ajax({url:n,data:a,type:"DELETE",headers:t.toJS(r)})}}}),n("plugins/observable",["durandal/system","durandal/binder","knockout"],function(e,t,n){function a(e){var t=e[0];return"_"===t||"$"===t||T&&e===T}function r(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function i(e){if(!e||r(e)||e.ko===n||e.jquery)return!1;var t=m.call(e);return-1==g.indexOf(t)&&!(e===!0||e===!1)}function s(e){var t={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function o(e,t,n){var a=e.__observable__,r=!0;if(!a||!a.__full__){a=a||s(e),a.__full__=!0,b.forEach(function(n){t[n]=function(){return w[n].apply(e,arguments)}}),h.forEach(function(n){e[n]=function(){r=!1;var e=k[n].apply(t,arguments);return r=!0,e}}),y.forEach(function(n){e[n]=function(){r&&t.valueWillMutate();var a=w[n].apply(e,arguments);return r&&t.valueHasMutated(),a}}),f.forEach(function(a){e[a]=function(){for(var i=0,s=arguments.length;s>i;i++)d(arguments[i],n);r&&t.valueWillMutate();var o=w[a].apply(e,arguments);return r&&t.valueHasMutated(),o}}),e.splice=function(){for(var a=2,i=arguments.length;i>a;a++)d(arguments[a],n);r&&t.valueWillMutate();var s=w.splice.apply(e,arguments);return r&&t.valueHasMutated(),s};for(var i=0,o=e.length;o>i;i++)d(e[i],n)}}function d(t,a){var r,d;if(T&&t&&t[T]&&(a=a?a.slice(0):[],a.push(t[T])),i(t)&&(r=t.__observable__,!r||!r.__full__)){if(r=r||s(t),r.__full__=!0,e.isArray(t)){var l=n.observableArray(t);o(t,l,a)}else for(var u in t)if(!v(u)&&!r[u]){var m=Object.getPropertyDescriptor(t,u);m&&(m.get||m.set)?p(t,u,{get:m.get,set:m.set}):(d=t[u],e.isFunction(d)||c(t,u,d,a))}S&&e.log("Converted",t)}}function l(e,t,n){n?t?t.destroyAll||o(t,e):(t=[],o(t,e)):d(t),e(t)}function c(t,a,r,i){var c,p,u=t.__observable__||s(t);if(void 0===r&&(r=t[a]),e.isArray(r))c=n.observableArray(r),o(r,c,i),p=!0;else if("function"==typeof r){if(!n.isObservable(r))return null;c=r}else!x&&e.isPromise(r)?(c=n.observable(),r.then(function(t){if(e.isArray(t)){var a=n.observableArray(t);o(t,a,i),t=a}c(t)})):(c=n.observable(r),d(r,i));return i&&i.length>0&&i.forEach(function(n){e.isArray(r)?c.subscribe(function(e){n(t,a,null,e)},null,"arrayChange"):c.subscribe(function(e){n(t,a,e,null)})}),Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:c,set:n.isWriteableObservable(c)?function(t){t&&e.isPromise(t)&&!x?t.then(function(t){l(c,t,e.isArray(t))}):l(c,t,p)}:void 0}),u[a]=c,c}function p(t,a,r){var i,s={owner:t,deferEvaluation:!0};return"function"==typeof r?s.read=r:("value"in r&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof r.get&&"function"!=typeof r.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),s.read=r.get||r.read,s.write=r.set||r.write),i=n.computed(s),t[a]=i,c(t,a,i)}var u,v,m=Object.prototype.toString,g=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],h=["remove","removeAll","destroy","destroyAll","replace"],y=["pop","reverse","sort","shift","slice"],f=["push","unshift"],b=["filter","map","reduce","reduceRight","forEach","every","some"],w=Array.prototype,k=n.observableArray.fn,S=!1,T=void 0,x=!1;if(!("getPropertyDescriptor"in Object)){var P=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,t){for(var n,a=e;a&&!(n=P(a,t));)a=D(a);return n}}return u=function(e,t){var a,r,i;return e?(a=e.__observable__,a&&(r=a[t])?r:(i=e[t],n.isObservable(i)?i:c(e,t,i))):null},u.defineProperty=p,u.convertProperty=c,u.convertObject=d,u.install=function(e){var n=t.binding;t.binding=function(e,t,a){a.applyBindings&&!a.skipConversion&&d(e),n(e,t)},S=e.logConversion,e.changeDetection&&(T=e.changeDetection),x=e.skipPromises,v=e.shouldIgnorePropertyName||a},u}),n("plugins/serializer",["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var n=e[0];if("_"===n||"$"===n)return}return t},serialize:function(t,n){return n=void 0===n?{}:n,(e.isString(n)||e.isNumber(n))&&(n={space:n}),JSON.stringify(t,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var n=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[n]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,n,a){var r=n(t);if(r){var i=a(r);if(i)return i.fromJSON?i.fromJSON(t):new i(t)}return t},deserialize:function(e,t){var n=this;t=t||{};var a=t.getTypeId||function(e){return n.getTypeId(e)},r=t.getConstructor||function(e){return n.typeMap[e]},i=t.reviver||function(e,t){return n.reviver(e,t,a,r)};return JSON.parse(e,i)},clone:function(e,t){return this.deserialize(this.serialize(e,t),t)}}}),n("plugins/widget",["durandal/system","durandal/composition","jquery","knockout"],function(e,t,n,a){function r(e,n){var r=a.utils.domData.get(e,d);r||(r={parts:t.cloneNodes(a.virtualElements.childNodes(e))},a.virtualElements.emptyNode(e),a.utils.domData.set(e,d,r)),n.parts=r.parts}var i={},s={},o=["model","view","kind"],d="durandal-widget-data",l={getSettings:function(t){var n=a.utils.unwrapObservable(t())||{};if(e.isString(n))return{kind:n};for(var r in n)-1!=a.utils.arrayIndexOf(o,r)?n[r]=a.utils.unwrapObservable(n[r]):n[r]=n[r];return n},registerKind:function(e){a.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,a,i,s){var o=l.getSettings(n);o.kind=e,r(t,o),l.create(t,o,s,!0)}},a.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,n){t&&(s[e]=t),n&&(i[e]=n)},mapKindToModuleId:function(e){return i[e]||l.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return s[e]||l.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,n,a,r){r||(n=l.getSettings(function(){return n},e));var i=l.createCompositionSettings(e,n);t.compose(e,i,a)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var n=e.kinds,i=0;i<n.length;i++)l.registerKind(n[i]);a.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,i){var s=l.getSettings(t);r(e,s),l.create(e,s,i,!0)}},t.composeBindings.push(e.bindingName+":"),a.virtualElements.allowedBindings[e.bindingName]=!0}};return l}),n("transitions/entrance",["durandal/system","durandal/composition","jquery"],function(e,t,n){function a(e,t){e.classList.remove(t?"entrance-in-fade":"entrance-in"),e.classList.remove("entrance-out")}var r=100,i={left:"0px",opacity:1},s={left:"",top:"",right:"",bottom:"",position:"",opacity:""},o=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/),d=!1,l="Webkit Moz O ms Khtml".split(" "),c=document.createElement("div");if(void 0!==c.style.animationName&&(d=!0),!d)for(var p=0;p<l.length;p++)if(void 0!==c.style[l[p]+"AnimationName"]){d=!0;break}d?o?e.log("Using CSS3/jQuery mixed animations."):e.log("Using CSS3 animations."):e.log("Using jQuery animations.");var u=function(t){return e.defer(function(e){function l(){e.resolve()}function c(){t.keepScrollPosition||n(document).scrollTop(0)}function p(){c(),t.triggerAttach(),d?(a(t.child,m),t.child.classList.add(m?"entrance-in-fade":"entrance-in"),setTimeout(function(){a(t.child,m),t.activeView&&a(t.activeView,m),v.css(s),l()},u)):v.animate(i,{duration:u,easing:"swing",always:function(){v.css(s),l()}})}if(t.child){var u=t.duration||500,v=n(t.child),m=!!t.fadeOnly,g={display:"block",opacity:0,position:"absolute",left:m||d?"0px":"20px",right:0,top:0,bottom:0};v.css(g),t.activeView?d&&!o?(a(t.activeView,m),t.activeView.classList.add("entrance-out"),setTimeout(p,r)):n(t.activeView).fadeOut({duration:r,always:p}):p()}else n(t.activeView).fadeOut(r,l)}).promise()};return u}),n("text",["module"],function(e){"use strict";var n,a,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),p=l&&location.hostname,u=l&&(location.port||void 0),v={},m=e.config&&e.config()||{};return n={version:"2.0.7",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(a){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,a,r=!1,i=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!s||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,a=n||t,i=a.indexOf("!"),-1!==i&&(r="strip"===a.substring(i+1),a=a.substring(0,i),n?n=a:t=a),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,a,r){var i,s,o,d=n.xdRegExp.exec(e);return d?(i=d[2],s=d[3],s=s.split(":"),o=s[1],s=s[0],!(i&&i!==t||s&&s.toLowerCase()!==a.toLowerCase()||(o||s)&&o!==r)):!0},finishLoad:function(e,t,a,r){a=t?n.strip(a):a,m.isBuild&&(v[e]=a),r(a)},load:function(e,t,a,r){if(r.isBuild&&!r.inlineText)return void a();m.isBuild=r.isBuild;var i=n.parseName(e),s=i.moduleName+(i.ext?"."+i.ext:""),o=t.toUrl(s),d=m.useXhr||n.useXhr;!l||d(o,c,p,u)?n.get(o,function(t){n.finishLoad(e,i.strip,t,a)},function(e){a.error&&a.error(e)}):t([s],function(e){n.finishLoad(i.moduleName+"."+i.ext,i.strip,e,a)})},write:function(e,t,a,r){if(v.hasOwnProperty(t)){var i=n.jsEscape(v[t]);a.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,a,r,i){var s=n.parseName(t),o=s.ext?"."+s.ext:"",d=s.moduleName+o,l=a.toUrl(s.moduleName+o)+".js";n.load(d,a,function(t){var a=function(e){return r(l,e)};a.asModule=function(e,t){return r.asModule(e,l,t)},n.write(e,d,a,i)},i)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(a=t.nodeRequire("fs"),n.get=function(e,t,n){try{var r=a.readFileSync(e,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(i){n(i)}}):"xhr"===m.env||!m.env&&n.createXhr()?n.get=function(e,t,a,r){var i,s=n.createXhr();if(s.open("GET",e,!0),r)for(i in r)r.hasOwnProperty(i)&&s.setRequestHeader(i.toLowerCase(),r[i]);m.onXhr&&m.onXhr(s,e),s.onreadystatechange=function(n){var r,i;4===s.readyState&&(r=s.status,r>399&&600>r?(i=new Error(e+" HTTP status: "+r),i.xhr=s,a(i)):t(s.responseText),m.onXhrComplete&&m.onXhrComplete(s,e))},s.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var n,a,r="utf-8",i=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),r)),d="";try{for(n=new java.lang.StringBuffer,a=o.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&n.append(a);null!==(a=o.readLine());)n.append(s),n.append(a);d=String(n.toString())}finally{o.close()}t(d)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),n.get=function(e,t){var n,a,s={},o=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(o,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),s),a.close(),n.close(),t(s.value)}catch(d){throw new Error((o&&o.path||"")+": "+d)}}),n}),n("text!views/admin/concierge/index.html",[],function(){return'<section data-type="flex">\n    <div>\n        <div class="column open">\n            <div class="widget-wrapper">\n                <div class="widget open" data-bind="columnSizer: true">\n                    <div class="content">\n                        <div class="content-fill">\n                            <div class="wrapper">\n                                <div class="content">\n                                    <div class="header">\n                                        <div class="table-cell">\n                                            <header class="ellipsis">\n                                                <h1>Concierge Services</h1>\n                                            </header>\n                                        </div>\n                                    </div>\n                                    <div class="table-row">\n                                        <div class="table-cell">\n                                            <div class="body">\n                                                <div class="content">\n                                                    <div class="content">\n                                                        <div class="row pad-top">\n                                                            <section class="accordion open">\n                                                                <div class="row accordion-toggle open">\n                                                                    <div class="span11">\n                                                                        <h3>Manage Individuals</h3>\n                                                                    </div>\n                                                                </div>\n                                                                <div class="accordion-content">\n                                                                    <div class="row pad-top">\n                                                                        <div class="span3 align-left">\n                                                                            <span>Create New Individual</span>\n                                                                        </div>\n                                                                        <div class="span9">\n                                                                            <a data-bind="click: createIndividual" class="btn color small">Create</a>\n                                                                        </div>\n                                                                    </div>\n                                                                    <div class="row pad-top divider">\n                                                                        <div class="span3 align-left">\n                                                                            <span>Bulk Upload</span>\n                                                                        </div>\n                                                                        <div class="span9">\n                                                                            <a class="btn small color disabled" href="#">Upload</a>\n                                                                        </div>\n                                                                    </div>\n                                                                    <div class="row pad-top divider">\n                                                                        <div class="span3 align-left">\n                                                                            <span>Delete Individual</span>\n                                                                        </div>\n                                                                        <div class="span9">\n                                                                            <a class="btn small" data-bind="click: deleteIndividual">Delete</a>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </section>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- ko if: activeSecondColumn -->\n            <div class="column open">\n                <div class="widget-wrapper">\n                <!-- ko compose: activeSecondColumn -->\n                <!-- /ko -->\n                </div>\n            </div>\n        <!-- /ko -->\n        <!-- ko ifnot: activeSecondColumn -->\n            <div class="column open">\n                <div class="widget-wrapper">\n                    <div class="widget open" data-bind="columnSizer: true">\n                        <div class="content">\n                            <div class="content-fill">\n                                <div class="wrapper">\n                                    <div class="content">\n                                        <div class="header">\n                                            <div class="table-cell">\n                                                <header class="ellipsis">\n                                                </header>\n                                            </div>\n                                        </div>\n                                        <div class="table-row">\n                                            <div class="table-cell">\n                                                <div class="body">\n                                                    <div class="content">\n                                                        <div class="content">\n                                                            <p><em>Select option to the left...</em></p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        <!-- /ko -->\n    </div>\n</section>';
}),n("text!views/admin/index.html",[],function(){return'<div class="route">\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/admin/reports/dynamic.report.html",[],function(){return'<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n		                	<header>\r\n		                        <h1 data-bind="text: report.name"></h1>\r\n		                        <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n		                            <a class="toggle" data-bind="click: closeReport" href="#">\r\n		                                <i class="icon-cancel"></i>\r\n		                            </a>\r\n		                        </div>\r\n		                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table id="matching-patients" class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <!-- ko foreach: report.columns -->\r\n                                                    <th class="ellipsis" data-bind="text: displayName"></th>\r\n                                                <!-- /ko -->\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedEntities -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <!-- ko foreach: $parent.report.columns -->\r\n                                                <td class="ellipsis">\r\n            										<span data-bind="text: (name.indexOf(\'.\') === -1) ? (name.indexOf(\'|\') === -1 ? $parent[name] : \'(Export to view)\') : ($parent[name.substr(0, name.indexOf(\'.\'))] ? $parent[name.substr(0, name.indexOf(\'.\'))][name.substr(name.indexOf(\'.\')+1, name.length)] : \'-\')"></span>\r\n                                                </td>\r\n                                                <!-- /ko -->                                         \r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/admin/reports/entity.template.html",[],function(){return'<section class="accordion open well">\r\n    <div class="row accordion-toggle open" data-bind="">\r\n        <div class="span6">\r\n            <h3>Query</h3>\r\n        </div>\r\n    </div>\r\n    <div class="accordion-content" data-bind="with: entity">\r\n        <div class="row pad-top divider">\r\n        	<div class="span4">\r\n        		<div class="row">\r\n                	<span>Entity Type:</span>\r\n                </div>\r\n                <div class="row">\r\n                	<h4 data-bind="text: entityType"></h4>\r\n                </div>\r\n        	</div>\r\n        	<div class="span4">\r\n        		<div class="row">\r\n                	<span>Prop Name:</span>\r\n                </div>\r\n                <div class="row">\r\n                	<input data-bind="value: propName" />\r\n                </div>\r\n        	</div>\r\n            <div class="span4">\r\n                <div class="row">\r\n                    <span>Columns</span>\r\n                </div>\r\n                <div class="row">\r\n                    <select class="span8" multiple="true" data-bind="options: availableColumns, selectedOptions: columns, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n        	<div class="span6">\r\n        		<div class="row">\r\n            	<span>Navigation Properties</span>\r\n                </div>\r\n        		<div class="row">\r\n            		<select class="span8" multiple="true" data-bind="options: availableNavProps, selectedOptions: navProperties, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n            	</div>\r\n            </div>\r\n        	<div class="span6">\r\n        		<div class="row">\r\n            	<span>Child Entities</span>\r\n                </div>\r\n        		<div class="row">\r\n            		<select class="span8" multiple="true" data-bind="options: availableChildEntities, selectedOptions: childEntities, optionsText: \'nameOnServer\', optionsValue: \'nameOnServer\'"></select>\r\n            	</div>\r\n            </div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n        	<div class="span12">\r\n        		<div class="row">\r\n                	<span>Navigation Properties:</span>\r\n                </div>\r\n                <!-- ko foreach: navProperties -->\r\n                <div class="row">\r\n                    <div class="push1">\r\n                    <!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: $data }  } -->\r\n\r\n                    <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n                <!-- /ko -->\r\n        	</div>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <div class="span12">\r\n                <div class="row">\r\n                    <span>Child Entities:</span>\r\n                </div>\r\n                <!-- ko foreach: childEntities -->\r\n                <div class="row">\r\n                    <div class="push1">\r\n                    <!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: $data }  } -->\r\n\r\n                    <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'}),n("text!views/admin/reports/index.html",[],function(){return'<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Reports</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: programInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Program Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: programInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Program Data with state of \r\n                                                                            <div class="" data-bind="multiselect: { options: elementStateList, values: selectedProgramStateIds, idValue: \'id\', text: \'name\', label: \'elementStates\' }"></div>\r\n                                                                            </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadProgramData, click: runProgramReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: programsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: programsLoading().length"></span> Individuals / Programs...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Actions Data with state of \r\n                                                                            <div class="" data-bind="multiselect: { options: elementStateList, values: selectedActionStateIds, idValue: \'id\', text: \'name\', label: \'elementStates\' }"></div>\r\n                                                                            </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadActionData, click: runActionReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: actionsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: actionsLoading().length"></span> Actions...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Programs open longer than </span><input data-bind="value: programLength, valueUpdate: \'afterkeydown\', disable: activeSecondColumn" class="underline-input" /><span> days</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowProgramReport, click: showProgramResults">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: goalInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Goal Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: goalInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Goal Data\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadGoalData, click: runGoalReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: goalsLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: goalsLoading().length"></span> Goals...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: careMemberInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Care Member Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: careMemberInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8 align-left">\r\n                                                                            Load Care Member Data\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canLoadCareMemberData, click: runCareMemberReport">Load data</button>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <!-- ko if: careMembersLoading().length > 0 -->\r\n                                                                            <i class="fa fa-spinner fa-spin"></i> (Checking <span data-bind="text: careMembersLoading().length"></span> CM\'s...)\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Individuals by Care Manager / Action Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: getPatientsByCareManagerReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <!--<div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Action Count Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: actionCountReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>-->\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: overviewInfoVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Overview Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: overviewInfoVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span8">\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Active Cohort:</div>\r\n                                                                                <div class="span6" data-bind="with: selectedCohort"><span data-bind="text: sName"></span></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Individuals Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: patientsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="push1 span5 grey">w/o a Care Manager:</div>\r\n                                                                                <div class="span6" data-bind="text: (careMembersList().length > 0 ? haveCareManagerPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: withProgPatReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">w/ 1+ Program(s):</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? haveProgramPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row filter-toggle" data-bind="click: haveGoalPatReport">\r\n                                                                                <div class="push1 span5 grey">w/ 1+ Goal(s):</div>\r\n                                                                                <div class="span6" data-bind="text: (goalsList().length > 0 ? haveGoalPatientsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Programs fully Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: programsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: notStartedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Not Started:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? notStartedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: inProgressProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">In Progress:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? inProgressProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: completedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Completed:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? completedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: closedProgReport, css: { \'filter-toggle\': (programsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Closed:</div>\r\n                                                                                <div class="span6" data-bind="text: (programsList().length > 0 ? closedProgramsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Actions fully Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: actionsList().length"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: notStartedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Not Started:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? notStartedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: inProgressActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">In Progress:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? inProgressActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: completedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Completed:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? completedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row" data-bind="click: closedActionReport, css: { \'filter-toggle\': (actionsList().length > 0) }">\r\n                                                                                <div class="push1 span5 grey">Closed:</div>\r\n                                                                                <div class="span6" data-bind="text: (actionsList().length > 0 ? closedActionsList().length : \'-\')"></div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="span6 grey">Total Goals Loaded:</div>\r\n                                                                                <div class="span6" data-bind="text: goalsList().length"></div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="clickToggle: dynamicReportVisible">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Dynamic Query / Report</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content" data-bind="visible: dynamicReportVisible">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Name :</label>\r\n                                                                            <input data-bind="value: dynamicReportName" />\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Description :</label>\r\n                                                                            <input data-bind="value: dynamicReportDescription" />\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Display Columns :</label>\r\n                                                                            <textarea data-bind="value: dynamicReportColumns">\r\n                                                                            </textarea>\r\n                                                                        </div>\r\n                                                                        <div class="span12 align-left">\r\n                                                                            <label>Query JSON :</label>\r\n                                                                            <textarea rows="20" data-bind="value: dynamicReportQueryJSON">\r\n                                                                            </textarea>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Log Query Results to Console</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: getJSONResults">Log</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span10 align-left">\r\n                                                                            <span>Dynamic Report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span2">\r\n                                                                            <button class="btn color small" data-bind="enable: canShowCareManagerReport, click: dynamicReport">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                <!-- ko compose: { model: activeSecondColumn, activationData: { data: activeSecondColumn } } -->\r\n                <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="content">\r\n                                                            <p><em>Click \'Show\' on the left for to view available reports...</em></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';
}),n("text!views/admin/reports/matching.actions.html",[],function(){return'<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n		                	<header>\r\n		                        <h1>Actions matching report criteria</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n                                    <a class="toggle" data-bind="click: closeReport" href="#">\r\n                                        <i class="icon-cancel"></i>\r\n                                    </a>\r\n                                </div>\r\n		                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table class="nowrap" id="matching-programs">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Patient Name</th>\r\n                                                <th>Action Name</th>\r\n                                                <th>Status</th>\r\n                                                <th>Start Date</th>\r\n                                                <th>Module Name</th>\r\n                                                <th>Program Name</th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedActions -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: module().program().patient().fullName(), attr: { href: \'#patients/\' + module().program().patientId(), \'title\': module().program().patient().fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: elementStateModel().name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="DateOrNothing: attrStartDate"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: module().name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: module().program().name"></span>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/admin/reports/matching.patients.html",[],function(){return'<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n		                	<header>\r\n		                        <h1>Individuals matching report criteria</h1>\r\n		                        <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n		                            <a class="toggle" data-bind="click: closeReport" href="#">\r\n		                                <i class="icon-cancel"></i>\r\n		                            </a>\r\n		                        </div>\r\n		                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table id="matching-patients" class="nowrap">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Individual Name</th>\r\n                                                <th>Gender</th>\r\n                                                <th>DOB</th>\r\n                                                <th># of Goals<span data-bind="if: !goalsLoaded()">(Data not Loaded)</span></th>\r\n                                                <th># of Programs<span data-bind="if: !programsLoaded()">(Data not Loaded)</span></th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedPatients -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: fullName(), attr: { href: \'#patients/\' + id(), \'title\': fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <img alt="Individual small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: dOB"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $parent.goalsLoaded() ? goals().length : \'-\'"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $parent.programsLoaded() ? programs().length : \'-\'"></span>\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/admin/reports/matching.programs.html",[],function(){return'<div class="widget open fullscreen">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n		                	<header>\r\n		                        <h1>Programs matching report criteria</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn small color" data-bind="click: sendCleanCSV">Save Selected to CSV</button>\r\n                                    <a class="toggle" data-bind="click: closeReport" href="#">\r\n                                        <i class="icon-cancel"></i>\r\n                                    </a>\r\n                                </div>\r\n		                    </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <table class="nowrap" id="matching-programs">\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': (allSelected() === true) }">\r\n                                                            <input type="checkbox" data-bind="checked: allSelected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th>#</th>\r\n                                                <th>Individual Name</th>\r\n                                                <th>Program Name</th>\r\n                                                <th>Start Date</th>\r\n                                                <th>Duration</th>\r\n                                            </tr>\r\n                                            <!-- ko foreach: computedPrograms -->\r\n                                            <tr>\r\n                                                <td class="narrow">\r\n                                                    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                                        <span data-bind="css: { \'checked\': selected() === true }">\r\n                                                            <input type="checkbox" data-bind="clickToggle: selected" />\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: $index() + 1"></span>\r\n                                                </td>\r\n                                                <td class="ellipsis">\r\n                                                    <a data-bind="text: patient().fullName(), attr: { href: \'#patients/\' + id(), \'title\': patient().fullName }"></a>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: name"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="DateOrNothing: attrStartDate"></span>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <span data-bind="text: duration"></span> day(s).\r\n                                                </td>\r\n                                            </tr>\r\n                                            <!-- /ko -->\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/admin/reports/query.builder.html",[],function(){return'<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Query Builder</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open" data-bind="">\r\n                                                                    <div class="span6">\r\n                                                                        <h3>Main Type Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                    	<select data-bind="options: structuraltypes, value: selectedMainType, optionsText: \'shortName\', optionsCaption: \'Choose...\'"></select>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <!-- ko with: newQueryReport -->\r\n                                                            	<!-- ko compose: { model: \'viewmodels/admin/reports/entity.template\', activationData: { entityType: entityType }  } -->\r\n\r\n                                                            	<!-- /ko -->\r\n                                                            <!-- /ko -->\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column open">\r\n        <div class="widget-wrapper">\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n                <div class="content">\r\n                    <div class="content-fill">\r\n                        <div class="wrapper">\r\n                            <div class="content">\r\n                                <div class="header">\r\n                                    <div class="table-cell">\r\n                                        <header class="ellipsis">\r\n                                        </header>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="table-row">\r\n                                    <div class="table-cell">\r\n                                        <div class="body">\r\n                                            <div class="content">\r\n                                                <div class="content">\r\n                                                    <p><em>Click \'Show\' on the left for to view available reports...</em></p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'}),n("text!views/admin/widgets/delete.individuals.list.html",[],function(){return'<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">                               \r\n                                    <div class="pad-vertical">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span3" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n											<div class="span8">\r\n												<input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" \r\n													placeholder="Search" type="search" data-phyautomation="cohort-patient-search" style="width: 87%;" />\r\n												<i class="pointer icon-cancel" data-bind="visible: cohortFilter, click: clearCohortFilter"></i>	\r\n											</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="body" style="min-height: 589px;">\r\n                                        <div class="content">\r\n                                            <!-- ko foreach: patientsList -->\r\n                                            <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                                <div class="patient-list">\r\n                                                    <div class="ellipsis">\r\n                                                        <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                        <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                        <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>											\r\n                                            <!-- /ko -->											\r\n                                            <div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                                <div class="push2 span8">\r\n                                                    <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                        Load more patients...\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n											<div class="row" data-bind="visible: showNoResultsMessage">\r\n												<span data-bind="text: noResultsMessage"></span>\r\n											</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/authenticate.html",[],function(){return"<section>\r\n\r\n</section>"}),n("text!views/columns/flexcolumn.html",[],function(){return'<div class="column" data-bind="click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n    <!-- ko foreach: activeWidgets -->\r\n        <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/columns/fullcolumn.html",[],function(){return'<div class="column" data-bind="foreach: activeWidgets">\r\n    <!-- ko compose: { model: widgetroute, activationData: { data: $data } } -->\r\n    <!-- /ko -->\r\n</div> '}),n("text!views/home/contacts/contact.details.html",[],function(){return'<div>\r\n	<em class="grey" data-bind="visible: !contact()">No contact selected</em>\r\n	<nav class="tabs" data-bind="visible: contact">\r\n		<!-- ko foreach: detailsTabs -->\r\n			<span data-bind="css: {\'active\': $parent.activeDetailsTab() == name}, \r\n							click: function(){ $parent.setActiveDetailsTab( name ) }, clickBubble: false">\r\n				<!-- ko if: imgAlt -->\r\n					<img data-bind="attr:{ alt: imgAlt, src: imgSource }" style="vertical-align: middle;"/>\r\n				<!-- /ko -->\r\n				<!-- ko if: cssClass -->\r\n					<i data-bind="attr:{ class: cssClass }"></i>\r\n				<!-- /ko -->\r\n				<a role="menuitem" data-bind="text: name"></a>\r\n			</span>\r\n		<!-- /ko -->\r\n	</nav>\r\n\r\n	<div class="content" data-bind="with: contact">\r\n		<div class="row" data-bind="visible: $parent.activeDetailsTab() === \'Profile\'">\r\n			<div>\r\n				<div class="row pad-top" data-bind="visible: fullName">					\r\n					<span data-bind="text: fullName"></span>\r\n				</div>\r\n				\r\n				<div data-bind="with: deceased">\r\n					<div class="row pad-top" data-bind="visible: (name() == \'Yes\')">\r\n						<strong class="span2">Deceased:</strong>\r\n						<span>Yes</span>\r\n					</div>\r\n				</div>\r\n				<div class="pad-left">				\r\n					<ul class="row grey pad-left" style="list-style-type: disc;" data-bind="visible: (detailedSubTypes().length > 0)">\r\n						<!-- ko foreach: detailedSubTypes -->\r\n							<li class="pad-top" data-bind="text: $data"></span>\r\n						<!-- /ko -->\r\n					</ul>				\r\n				</div>	\r\n				<div class="row pad-top" data-bind="visible: (gender() && gender() !== \'N\')">\r\n					<strong class="span2">Gender:</strong>\r\n					<span data-bind="text: gender"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="with: contactStatus">\r\n					<strong class="span2">Status:</strong>\r\n					<span data-bind="text: name()"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="visible: createdOn">\r\n					<strong class="span2">Created:</strong>\r\n					<span data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="visible: updatedOn">\r\n					<strong class="span2">Updated:</strong>\r\n					<span data-bind="DateTime: updatedOn"></span> by <span data-bind="text: (updatedBy()? updatedBy().preferredName : \'\')"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="visible: dataSource">\r\n					<strong class="span2">System:</strong>\r\n					<span class="span9"><span data-bind="text: dataSource"></span>\r\n				</div>			\r\n			</div>\r\n		</div>\r\n		<div class="row" data-bind="visible: $parent.activeDetailsTab() === \'Comm\'">\r\n			<!-- ko foreach: $parent.primaryCommunications -->\r\n			<div class="row pad-top" data-bind="compose: template">\r\n			</div>\r\n			<!-- /ko -->\r\n			<div class="row pad-top">\r\n				<strong class="span3 grey">Mode:</strong>\r\n				<div class="span9">\r\n					<em class="row grey" data-bind="visible: !prefCommMethods()">Unknown</em>\r\n					<span class="row" data-bind="visible: prefCommMethods, text: prefCommMethods, attr: { \'title\': prefCommMethods }"></span>\r\n				</div>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<strong class="span3 grey">Days:</strong>\r\n				<div class="span9">\r\n					<em class="row grey" data-bind="visible: !preferredDaysOfWeek()">Unknown</em>\r\n					<span class="row" data-bind="visible: preferredDaysOfWeek, text: preferredDaysOfWeek, attr: { \'title\': preferredDaysOfWeek }"></span>\r\n				</div>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<strong class="span3 grey">Time:</strong>\r\n				<div class="span9">\r\n					<em class="row grey" data-bind="visible: !preferredTimesOfDay()">Unknown</em>\r\n					<span class="row" data-bind="visible: preferredTimesOfDay, text: preferredTimesOfDay, attr: { \'title\': preferredTimesOfDay }"></span>\r\n				</div>\r\n			</div>\r\n			<div class="row" data-bind="with: timeZone">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 grey">Time Zone:</strong>\r\n				<div class="span9" data-bind="text: name, attr: { \'title\': name }"></div>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<strong class="span3 grey">Language:</strong>\r\n				<div class="span9">\r\n					<em class="row grey" data-bind="visible: !preferredLanguage()">Unknown</em>\r\n					<!-- ko with: preferredLanguage -->\r\n					<span class="row" data-bind="text: name, attr: { \'title\': name }"></span>\r\n					<!-- /ko -->\r\n				</div>\r\n			</div>			\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!views/home/contacts/index.html",[],function(){return'<div class="route">\r\n	<section data-type="flex">    \r\n		<div>\r\n			<div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n				<div class="widget-wrapper">\r\n					<div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'contactspanel\' }, columnSizer: { triggers: {a: myContactSearchResults(), b: selectedContact()} }">\r\n						<div class="content">\r\n							<div class="content-fill">\r\n								<div class="wrapper">\r\n									<div class="content">\r\n										<div class="header">\r\n											<div class="table-cell">\r\n												<header class="ellipsis">\r\n													<h1>Contacts</h1>\r\n													<div class="controls">\r\n														<div class="toggle grey" data-bind="visible: showResetFilters()">\r\n															<i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters" title="Clear Filters"></i>\r\n														</div>\r\n														<div class="toggle" ">\r\n															<i class="pointer icon-plus" data-bind="click: addContact, clickBubble: false" title="Add"></i>\r\n														</div>\r\n														 <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'contactspanel\') }, clickBubble: false">\r\n                                                        </div>\r\n													</div>\r\n												</header>\r\n												<!-- search area -->\r\n												<div class="content pad-left">\r\n													<div class="row validation-summary">\r\n														<div class="validation-errors">\r\n															<h5 data-bind="visible: !canSearchContacts()">Please select a criteria</h5>\r\n														</div>\r\n													</div>\r\n													<div class="row pad-top">\r\n														<div class="span1 align-right gray">Contact Type</div>\r\n														<div class="span3 pad-left">															\r\n															<div data-bind="chsnsingle:{ options: contactTypes, value: criteriaContactTypeId, idValue: \'id\', text: \'name\', label: \'criteriaContactType\'}"></div>\r\n														</div>\r\n													</div>\r\n													<div class="row pad-top">\r\n														<div class="span1 align-right grey">First Name</div>\r\n														<div class="span3 pad-left">\r\n															<input type="text" data-bind="value: criteriaFirstName, valueUpdate: \'afterkeydown\'" placeholder="first name" />\r\n														</div>\r\n														<div class="span1 align-right grey">Last Name</div>\r\n														<div class="span3 pad-left">		\r\n															<input type="text" data-bind="value: criteriaLastName, valueUpdate: \'afterkeydown\'" placeholder="last name" />\r\n														</div>\r\n													</div>\r\n													<div class="row pad-top">\r\n														<!-- <label class="span4">\r\n															<span>Phone</span>																		\r\n															<input data-bind="phone: criteriaPhone, value: number, valueUpdate: \'afterkeydown\', css: { invalid: !isValid() }" placeholder="XXX-XXX-XXXX" title="XXX-XXX-XXXX"/>																			\r\n														</label> -->\r\n														<div class="span1 align-right grey">Type</div>\r\n														<div class="span3 pad-left">\r\n															<div data-bind="multiselect: { options: contactSubTypes, values: criteriaContactSubTypes, text: \'name\', idValue: \'id\', label: \'criteriaContactSubTypes\' }"></div>					\r\n														</div>														\r\n														<div class="span1 align-right grey">Status</div>\r\n														<div class="span3 pad-left">\r\n															<div data-bind="multiselect: { options: contactStatuses, values: criteriaContactStatuses, text: \'name\', idValue: \'id\', label: \'criteriaContactStatuses\' }"></div>\r\n														</div>\r\n														<div class="span2">\r\n															<button class="btn color pull-right" data-bind="click: searchContacts, enable: canSearchContacts">\r\n																<i class="icon-search"></i>\r\n																<span class="pad-left">Search</span>\r\n															</button>\r\n														</div>\r\n													</div>\r\n													<div class="line"></div>\r\n												</div>\r\n												\r\n											</div>\r\n										</div>\r\n										<div class="header">\r\n											<div class="table-cell">\r\n												<header class="ellipsis" data-bind="visible: (myContactSearchResults().length > 0)">															\r\n													<h1>Results<span data-bind="text: contactsShowingText"></span></h1>\r\n												</header>\r\n											</div>\r\n										</div>\r\n										\r\n										<em class="grey pad-left" data-bind="visible: noResultsFound()">No records meet your search criteria</em>\r\n										<div class="header grey" data-bind="visible: (myContactSearchResults().length > 0)">\r\n											<div class="table-cell">\r\n												<header>\r\n													<div class="line">\r\n														<div class="span2">Last Name</div>\r\n														<div class="span2">First Name</div>\r\n														<div class="span8">Summary</div>\r\n													</div>\r\n												</header>\r\n											</div>\r\n										</div>\r\n										<div class="table-row">\r\n											<div class="table-cell">\r\n												<div class="body">\r\n													<div class="content" style="padding-top: 0;">\r\n														\r\n														<!-- list results area -->\r\n														<!-- <div class="row pad-top"></div> -->\r\n														<div>\r\n															<h1 data-bind="visible: searching()">Searching...</h1>\r\n															<div data-bind="visible: !searching()">																																																													\r\n																<!--ko compose: "templates/contactSearchResults.panel.html" --><!-- /ko -->\r\n															</div>\r\n														</div>\r\n													</div>\r\n												</div>\r\n											</div>\r\n										</div>										\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>					\r\n					</div>	\r\n				</div>\r\n			</div>\r\n			<div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n				<div class="widget-wrapper">\r\n					<div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'contactdetails\' }, columnSizer: true">\r\n						<div class="content">\r\n							<div class="content-fill">\r\n								<div class="wrapper">\r\n									<div class="content">\r\n										<div class="header">\r\n											<div class="table-cell">\r\n												<header>\r\n													<h1>Details<span data-bind="text: (selectedContact() ? \' - \' + selectedContact().firstName() + \' \' + selectedContact().lastName() : \'\')"></h1>\r\n													<div class="controls">\r\n														<!-- ko with: selectedContact -->\r\n														<div class="toggle" data-bind="click: $parent.editContact, clickBubble: false, visible: $parent.showEditButton" style="margin-right: 4px;">\r\n															<a href="#">\r\n																<i class="icon-edit"></i>\r\n															</a>\r\n														</div>	\r\n														<!-- /ko -->\r\n														<!-- ko if: showDeleteButton -->\r\n														<!-- <div class="toggle">\r\n															<a href="#" data-bind="click: deleteContact, clickBubble: false">\r\n																<i class="icon-cancel red"></i>\r\n															</a>\r\n														</div> -->\r\n														<!-- /ko -->																											\r\n														<div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'contactdetails\') }, clickBubble: false">\r\n														</div>\r\n													</div>\r\n												</header>											\r\n											</div>\r\n										</div>\r\n										<div class="table-row">\r\n											<div class="table-cell">\r\n												<div class="body">\r\n													<div class="content" >\r\n														<!-- ko compose: { model: \'viewmodels/home/contacts/contact.details\', activationData:{ contact: selectedContact } } -->\r\n														<!-- /ko -->\r\n													</div>\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>					\r\n					</div>	\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</section>\r\n</div>';
}),n("text!views/home/index.html",[],function(){return'<div class="route">\r\n    <section class="open" data-type="fixed" data-bind="visible: cohortPatientSelectPanelShowing">\r\n        <div class="column">\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n                <div class="content">\r\n                    <header>\r\n                        <h1>Cohorts</h1>\r\n                    </header>\r\n                    <div class="body">\r\n                        <table id="filters">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th colspan="3">Choose up to three:</th>\r\n                                </tr>\r\n                                <!-- ko foreach: computedCohorts -->\r\n                                <tr class="condition active" data-bind="attr: { \'id\': \'condition_\' + sName() }">\r\n                                    <td class="narrow">\r\n                                        <div class="checker">\r\n                                            <span class="checked" data-bind="css: { \'checked\': isChecked }">\r\n                                                <input checked="" data-comparator="contains" data-key="sName" type="checkbox" data-bind="checked: isChecked, attr: { \'value\': sName }">\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td class="narrow">\r\n                                        <div class="indicator" style="background-color: rgb(31, 119, 180); background-position: initial initial; background-repeat: initial initial;"></div>\r\n                                    </td>\r\n                                    <td data-bind="text: sName"></td>\r\n                                </tr>\r\n                                <!-- /ko -->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/home/myhome/myhome.html",[],function(){return'<div class="route">\r\n    <section class="highlights">\r\n        <h2>Care Manager Home</h2>\r\n    </section>\r\n    <section data-type="flex">\r\n        <div>\r\n            <div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'calendar\' }, columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1>Calendar</h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'calendar\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="calendar" data-bind="fullCalendar: calendarOptions">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'myToDoList\', \'open\': myToDoListOpen }, columnSizer: {triggers: myToDoListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myToDoListOpen) }">\r\n                                                <header>\r\n                                                    <h1>My To-Do List - <span data-bind="text: todosShowingText"></span></h1>\r\n                                                    <div class="controls pad-left">\r\n														<div class="toggle">\r\n															<i class="pointer icon-plus" data-bind="click: addToDo, clickBubble: false" title="Add"></i>\r\n														</div>                                                       \r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'myToDoList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>                                                   \r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/todo.panel\', \r\n																	activationData: { todos: myToDos, columns: activeTodoColumns, toggleSort: toggleTodoSort, \r\n																						selectedSortColumn: selectedTodoSortColumn, canSort: true,\r\n																						loadMoreTodos: loadMoreTodos, canLoadMoreTodos: canLoadMoreTodos, \r\n																						maxToToDosLoaded: maxToToDosLoaded, isBackendSort:true, todosReloading: todosReloading} }">\r\n                                                    </div>\r\n													<!-- \r\n														 loadPrevTodos: loadPrevTodos, canLoadPrevTodos: canLoadPrevTodos  -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>                    \r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'myInterventionsList\', \'open\': myInterventionListOpen }, columnSizer: {triggers: myInterventionListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myInterventionListOpen) }">\r\n                                                <header>\r\n                                                    <h1>My Interventions - <span data-bind="text: myInterventions().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls pad-left">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'myInterventionsList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options">\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeInterventionColumns, toggleSort: toggleInterventionSort, selectedSortColumn: selectedInterventionSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="widget" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'workList\', \'open\': myWorkListOpen }, columnSizer: {triggers: myWorkListOpen}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header filter-toggle">\r\n                                            <div class="table-cell" data-bind="click: function () { toggleWidgetOpen(myWorkListOpen) }">\r\n                                                <header>\r\n                                                    <h1 class="nowrap">Work List</h1>\r\n                                                    <div class="controls pad-left">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'workList\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\', disabled: !myWorkListOpen() }, click: function(){}, clickBubble: false"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <table class="nowrap">\r\n                                                            <tbody>\r\n                                                                <tr>\r\n                                                                    <th class="narrow">\r\n                                                                        <div class="checker" id="uniform-selectAll"><span><input id="selectAll" name="selectAll" type="checkbox" value="1"></span></div>\r\n                                                                    </th>\r\n                                                                    <th>Name</th>\r\n                                                                    <th>DOB</th>\r\n                                                                    <th>Age</th>\r\n                                                                    <th>Gender</th>\r\n                                                                </tr>\r\n                                                                <!-- ko foreach: patientsList -->\r\n                                                                <tr>\r\n                                                                    <td class="narrow">\r\n                                                                        <div class="checker" id="uniform-selected">\r\n                                                                            <span>\r\n                                                                                <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </td>\r\n                                                                    <td class="ellipsis">\r\n                                                                        <a data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { href: \'#patients/\' + id(), \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span data-bind="with: dOB"><span data-bind="text: $data, attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span data-bind="text: age" data-phyautomation="age"></span>\r\n                                                                    </td>\r\n                                                                    <td>\r\n                                                                        <span class="line" data-bind="text: genderModel().Description"></span>\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                                <!-- /ko -->\r\n                                                            </tbody>\r\n                                                        </table>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'}),n("text!views/home/population/index.html",[],function(){return'<section class="open" data-type="fixed">\r\n\r\n    <div class="column ">\r\n\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header>\r\n                                            <h1>Cohorts</h1>\r\n                                        </header>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="table-row">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <div class="body" style="height: 589px;">\r\n\r\n                                            <div class="content">\r\n                                                <table id="filters"><tbody>\r\n                                                    <tr>\r\n                                                        <th colspan="3">Choose up to three:\r\n                                                        </th>\r\n                                                    </tr>\r\n                                                    <tr class="condition active" id="condition_7">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span class="checked">\r\n                                                                    <input checked="true" data-comparator="contains" data-key="conditions" type="checkbox" value="7">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(31, 119, 180);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Arthritis\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    <tr class="condition active" id="condition_1">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span class="checked">\r\n                                                                    <input checked="" data-comparator="contains" data-key="conditions" type="checkbox" value="1">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(255, 127, 14);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Asthma\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    <tr class="condition" id="condition_2">\r\n                                                        <td class="narrow">\r\n                                                            <div class="checker">\r\n                                                                <span>\r\n                                                                    <input data-comparator="contains" data-key="conditions" type="checkbox" value="2">\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td class="narrow">\r\n                                                            <div class="indicator" style="background: rgb(44, 160, 44);">\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>Diabetes\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</section>\r\n<section data-type="flex">\r\n    <div class="column open">\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header><h1>Population</h1></header>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="table-row">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <div class="body" style="height: 589px;">\r\n\r\n                                            <div class="content">\r\n                                                <svg id="visualizer" height="576" width="576">\r\n                                                </svg>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="column ">\r\n        <div class="widget-wrapper">\r\n\r\n            <div class="widget open" data-bind="columnSizer: true">\r\n\r\n                <div class="content" style="height: 629px;">\r\n\r\n                    <div class="content-fill">\r\n\r\n                        <div class="wrapper">\r\n\r\n                            <div class="content" style="height: 629px;">\r\n\r\n                                <div class="header">\r\n\r\n                                    <div class="table-cell">\r\n\r\n                                        <header><h1>Individuals</h1>\r\n\r\n                                            <div class="options">\r\n                                                <select class="dark" data-placeholder="Actions" id="actions" name="actions" style="display: none;">\r\n\r\n                                                    <option value=""></option>\r\n\r\n\r\n                                                    <option value="Send Campaign">Send Campaign</option>\r\n\r\n\r\n                                                    <option value="Assign Care Program">Assign Care Program</option>\r\n\r\n\r\n                                                    <option value="Export">Export</option>\r\n\r\n\r\n                                                    <option value="Print">Print</option>\r\n                                                </select>\r\n\r\n                                                <div class="chosen-container chosen-container-single dark chosen-container-single-nosearch" style="width: 142px;" title="" id="actions_chosen"><a class="chosen-single chosen-default" tabindex="-1">\r\n\r\n                                                    <span>Actions\r\n                                                    </span>\r\n\r\n                                                    <div><b></b>\r\n                                                    </div></a>\r\n\r\n                                                    <div class="chosen-drop">\r\n\r\n                                                        <div class="chosen-search">\r\n                                                            <input type="text" autocomplete="off" readonly="">\r\n                                                        </div>\r\n                                                        <ul class="chosen-results">\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div></header>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="table-row">\r\n\r\n                                        <div class="table-cell">\r\n\r\n                                            <div class="body">\r\n\r\n                                                <div class="content">\r\n                                                    <table class="nowrap">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th class="narrow">\r\n                                                                    <div class="checker" id="uniform-selectAll">\r\n                                                                        <span>\r\n                                                                            <input id="selectAll" name="selectAll" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </th>\r\n                                                                <th class="narrow">ID\r\n                                                                </th>\r\n                                                                <th>Individual Name\r\n                                                                </th>\r\n                                                                <th>Care Gaps\r\n                                                                </th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody>\r\n                                                            <tr data-id="1">\r\n                                                                <td class="narrow">\r\n                                                                    <div class="checker" id="uniform-selected">\r\n                                                                        <span>\r\n                                                                            <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                                <td class="narrow">1\r\n                                                                </td>\r\n                                                                <td>\r\n                                                                    <a href="/patients/1/care_plans">Billy Condo</a>\r\n                                                                </td>\r\n                                                                <td>3\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                            <tr data-id="2" style="display: none;">\r\n                                                                <td class="narrow">\r\n                                                                    <div class="checker" id="uniform-selected">\r\n                                                                        <span>\r\n                                                                            <input id="selected" name="selected" type="checkbox" value="1">\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                                <td class="narrow">2\r\n                                                                </td>\r\n                                                                <td>\r\n                                                                    <a href="/patients/1/care_plans">Johnny Hairband</a>\r\n                                                                </td>\r\n                                                                <td>2\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';
}),n("text!views/home/todos/index.html",[],function(){return'<div class="route">\r\n    <section data-type="flex">\r\n        <div>\r\n            <div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'todopanel\' }, columnSizer: {triggers: {a: selectedView().name(), b: filtersHeaderOpen(), c: filtersOpen()}}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="filters" data-bind="visible: (filtersHeaderOpen())">\r\n                                            <div class="table-cell">\r\n                                                <div class="wrapper">\r\n                                                    <section class="pinned">\r\n                                                        <div class="row">\r\n                                                            <div class="span6">\r\n																<label class="span1 gray">Filter:</label>\r\n																<div class="span10" style="display: inline-block" data-bind="chsnsingle: { options: views, value: selectedView, text: \'name\', label: \'programs\' }"></div>                                                                \r\n                                                            </div>\r\n                                                            <div class="span4 grey">\r\n                                                                <label data-bind="visible: (selectedCategories().length > 0 || selectedPriorities().length > 0)">\r\n                                                                    <i class="fa fa-filter red"></i>\r\n                                                                    Filters applied\r\n                                                                </label>\r\n                                                                <span style="color: whitesmoke;">-</span>\r\n                                                            </div>\r\n                                                            <div class="span2 grey">\r\n                                                                <div class="pull-right filters" data-bind="visible: (selectedCategories().length > 0 || selectedPriorities().length > 0)">\r\n																	<i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters, enable: (selectedCategories().length > 0 || selectedPriorities().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n																	<span>&nbsp</span>\r\n                                                                </div>\r\n                                                                <!-- <span style="color: whitesmoke;">-</span> -->\r\n                                                            </div>                                                            \r\n                                                        </div>\r\n                                                    </section>\r\n                                                    <div class="filter-content" data-bind="visible: filtersOpen">\r\n                                                        <section>\r\n                                                            <div class="row">\r\n																<div class="span3">\r\n																	<div class="span2 grey" data-bind="visible: selectedView() && selectedView().type() === \'todos\'">Priority:</div>\r\n																</div>\r\n                                                                <div class="span3">\r\n																	<div class="span2 grey">Category:</div>\r\n																</div>\r\n                                                            </div>\r\n                                                            <div class="row">\r\n																<div class="span3">\r\n																	<div class="span6" data-bind="multiselect: { options: priorities, values: selectedPriorities, text: \'levelName\', label: \'categories\', idValue: \'id\' }, visible: selectedView() && selectedView().type() === \'todos\'"></div>\r\n																</div>\r\n																<div class="span3">\r\n																	<div class="span10" data-bind="multiselect: { options: categories, values: selectedCategories, text: \'name\', label: \'categories\', idValue: \'id\' }"></div>\r\n																</div>\r\n                                                            </div>\r\n                                                        </section>\r\n                                                    </div>\r\n                                                    <div class="toggle" data-bind="clickToggle: filtersOpen, css: filtersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- ko if: selectedView() && selectedView().type() === \'todos\' -->\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                    <h1><span data-bind="text: selectedView() ? selectedView().name : \'To-Do List\'"></span> - <span data-bind="text: todosShowingText"></span></h1>\r\n                                                    <div class="controls">\r\n														<div class="toggle" ">\r\n															<i class="pointer icon-plus" data-bind="click: addToDo, clickBubble: false" title="Add"></i>\r\n														</div>\r\n                                                        <i class="pointer fa fa-filter pad-horizontal" data-bind="clickToggle: filtersHeaderOpen, clickBubble: false, css: ((selectedCategories().length > 0 || selectedPriorities().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                        </i>\r\n														<div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n															<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n														</div>\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todopanel\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>                                                   \r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/todo.panel\', \r\n																activationData: { todos: myToDos, columns: activeColumns, toggleSort: toggleSort, \r\n																					selectedSortColumn: selectedSortColumn, canSort: true,																						\r\n																					maxToToDosLoaded: maxToToDosLoaded, isBackendSort:true, todosReloading: todosReloading } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- /ko -->\r\n                                        <!-- ko if: selectedView() && selectedView().type() === \'interventions\' -->\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                    <h1><span data-bind="text: selectedView() ? selectedView().name : \'Intervention List\'"></span> - <span data-bind="text: myInterventions().length + \' showing\'"></span></h1>\r\n                                                    <div class="controls">\r\n                                                        <i class="pointer fa fa-filter pad-horizontal" data-bind="clickToggle: filtersHeaderOpen, clickBubble: false, css: ((selectedCategories().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                        </i>\r\n														<div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n															<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n														</div>\r\n                                                        <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n                                                        </div>\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'interventionpanel\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options">\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content" data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- /ko -->\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'todochart\' }, columnSizer: {triggers:{a: selectedView().name()}}">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content" data-bind="visible: selectedView() && selectedView().type() === \'todos\'">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1 data-bind="text: selectedView() ? selectedView().name : \'To Do Summary\'"></h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todochart\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: availableTodoSummaries, value: selectedTodoSummary, text: \'name\', label: \'todo-summaries\' }"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <em data-bind="if: myToDosChart().length === 0">No chart data available</em>\r\n                                                        <div class="graph todosummary">\r\n                                                            <div class="" data-bind="pieChart: myToDosChart, chartOptions: { title: \'Pie Chart\' }">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="content" data-bind="visible: selectedView() && selectedView().type() === \'interventions\'">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header>\r\n                                                    <h1 data-bind="text: selectedView() ? selectedView().name : \'To Do Summary\'"></h1>\r\n                                                    <div class="controls">\r\n                                                        <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todochart\') }, clickBubble: false">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="options myhome">\r\n                                                        <div data-bind="chsnsingle: { options: availableInterventionSummaries, value: selectedInterventionSummary, text: \'name\', label: \'todo-summaries\' }"></div>\r\n                                                    </div>\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <em data-bind="if: myInterventionsChart().length === 0">No chart data available</em>\r\n                                                        <div class="graph todosummary">\r\n                                                            <div class="" data-bind="pieChart: myInterventionsChart, chartOptions: { title: \'Pie Chart\' }">\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>'}),n("text!views/insight/index.html",[],function(){return'<div class="route">\r\n    <!-- ko if: navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/insight/reports/index.html",[],function(){return'<section data-type="flex">\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Insight Reports</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="content">\r\n                                                        <div class="row pad-top">\r\n<!--                                                             <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>User Information</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>User Name</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: userName" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Password / Token</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: pwOrToken" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Organization</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: organization" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>Work with Reports</h3>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Repo to search</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <input data-bind="value: repoName" />\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Get Reports List</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <button title="Enter user, password, and repo" class="btn small" data-bind="click: getReportsList, enable: canGetReports">Go</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section> -->\r\n                                                            <section class="accordion open">\r\n                                                                <div class="row accordion-toggle open">\r\n                                                                    <div class="span11">\r\n                                                                        <h3>Load report</h3>\r\n                                                                    </div>                                                                    \r\n                                                                    <div class="span1 grey">\r\n                                                                        <div class="pull-right">\r\n                                                                            <i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': fetchingReport }"></i>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class="accordion-content">\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Report Path</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <!-- ko if: availableReports().length > 0 -->\r\n                                                                                <select data-bind="options: availableReports, value: reportPath, optionsText: \'Name\', optionsValue: \'Path\'"></select>\r\n                                                                            <!-- /ko -->\r\n                                                                            <!-- ko if: availableReports().length === 0 -->\r\n                                                                                <em>No reports available</em>\r\n                                                                            <!-- /ko -->\r\n                                                                        </div>\r\n                                                                    </div>\r\n<!--                                                                     <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Selected Container</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <em data-bind="text: containerToLoad" />\r\n                                                                             ako if: !containerToLoad() \r\n                                                                            <em>Select a container to the right</em>\r\n                                                                            /ako\r\n                                                                        </div>\r\n                                                                    </div> -->\r\n                                                                    <div class="row pad-top divider">\r\n                                                                        <div class="span3 align-left">\r\n                                                                            <span>Show report</span>\r\n                                                                        </div>\r\n                                                                        <div class="span9">\r\n                                                                            <button class="btn small" data-bind="click: showDynamicReport, enable: (containerToLoad && !fetchingReport())">Show</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </section>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                <!-- ko compose: activeSecondColumn -->\r\n                <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: activeSecondColumn -->\r\n            <div class="column open">\r\n                <div class="widget-wrapper">\r\n                    <div class="widget open" data-bind="columnSizer: true">\r\n                        <div class="content">\r\n                            <div class="content-fill">\r\n                                <div class="wrapper">\r\n                                    <div class="content">\r\n                                        <div class="header">\r\n                                            <div class="table-cell">\r\n                                                <header class="ellipsis">\r\n                                                </header>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="table-row">\r\n                                            <div class="table-cell">\r\n                                                <div class="body">\r\n                                                    <div class="content">\r\n                                                        <div class="content">\r\n                                                            <p><em>Select something to the left...</em></p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>';
}),n("text!views/insight/widgets/active.report.html",[],function(){return'<div class="widget open">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">\r\n                                    <div class="pad-vertical">\r\n                                        <h1>Active Report</h1>\r\n                                        <!-- <div class="row">\r\n                                            <div class="span12" data-bind="chsnsingle: { options: numberOfContainers, value: selectedCount, text: \'Number\', label: \'container-count\' }"></div>\r\n                                        </div> -->\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <!-- ko foreach: reportContainers -->\r\n                                    <div class="row" data-bind="click: $parent.setActiveReportContainer">\r\n                                        <div class="span12">\r\n                                            <!-- <button class="btn small" data-bind="text: Name"></button> -->\r\n                                            <div data-bind="attr: { \'id\': Name }">\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/insight/widgets/reports.list.html",[],function(){return'<div class="widget open">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">                               \r\n                                    <div class="pad-vertical">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span12" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n                                            <input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" placeholder="Search" type="search" data-phyautomation="cohort-patient-search" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <!-- ko foreach: patientsList -->\r\n                                    <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                        <div class="patient-list">\r\n                                            <div class="ellipsis">\r\n                                                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                    <!--<div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                        <div class="push2 span8">\r\n                                            <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                Load more patients...\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>-->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/careplan/index.html",[],function(){return'<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div class="columns-wrapper">\r\n        <!-- ko with: planColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko with: detailsColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko if: ($parents[1].activeAction() && name() === \'ActionDetails\') -->\r\n                <!-- ko compose: { model: path, activationData: { activeAction: $parents[1].activeAction } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeModule() && name() === \'ModuleDetails\') -->\r\n                <!-- ko compose: { model: path, activationData: { activeModule: $parents[1].activeModule } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeProgram() && name() === \'ProgramDetails\' )-->\r\n                <!-- ko compose: { model: path, activationData: { activeProgram: $parents[1].activeProgram } } -->\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Plan</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>'}),n("text!views/patients/data/index.html",[],function(){return'<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="click: $parent.setOpenColumn, css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Data Summary</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>'}),n("text!views/patients/goals/index.html",[],function(){return'<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div class="columns-wrapper">\r\n        <!-- ko with: goalColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <!-- ko if: $parent.isComposed -->\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko with: detailsColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko if: ($parents[1].activeGoal() && name() === \'GoalDetails\') -->\r\n                    <!-- ko compose: { model: path, activationData: { activeGoal: $parents[1].activeGoal } } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeTask() && name() === \'TaskDetails\') -->\r\n                    <!-- ko compose: { model: path, activationData: { activeTask: $parents[1].activeTask } } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeIntervention() && name() === \'InterventionDetails\' )-->\r\n                    <!-- ko compose: { model: path, activationData: { activeIntervention: $parents[1].activeIntervention } } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>Goals</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>'}),n("text!views/patients/history/index.html",[],function(){return'<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div data-bind="foreach: columns">\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: path -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>History</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>'}),n("text!views/patients/index.html",[],function(){return'<div class="route">\r\n    <section data-type="fixed" data-bind="css: { open: patientDataColumnOpen()  === true }">\r\n        <div class="column-wrapper">\r\n            <div class="column off-canvas" data-bind="css: { open: patientsListFlyoutOpen() === true }" data-phyautomation="cohort-column-pane">\r\n                <div class="widget-wrapper" data-bind="compose: \'patients/widgets/patients.list.flyout.html\'">\r\n                </div>\r\n            </div>\r\n            <div class="column" data-phyautomation="patient-details-pane">\r\n                <div class="widget-wrapper" data-bind="compose: \'patients/widgets/patients.details.html\'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <!-- ko if: isComposed() && navigation.currentRoute() && navigation.currentSubRoute() -->\r\n    <!-- ko compose: { model: navigation.currentSubRoute().subroute, activationData: { selectedPatient: selectedPatient } } -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/patients/medications/index.html",[],function(){return'<section data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div class="columns-wrapper">\r\n        <!-- ko with: medicationColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <!-- ko if: $parent.isComposed -->\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko compose: { model: path, activationData: activationData } -->\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko with: detailsColumn -->\r\n        <div class="column" data-bind="css: { open: $parent.computedOpenColumn() === $data }">\r\n            <div class="widget-wrapper" data-bind="foreach: widgets">\r\n                <!-- ko if: ($parents[1].activeMedication() && name() === \'MedicationDetails\') -->\r\n                    <!-- ko compose: { model: path, activationData: { activeMedication: $parents[1].activeMedication } } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n                <!-- ko if: ($parents[1].activeAllergy() && name() === \'AllergyDetails\') -->\r\n                    <!-- ko compose: { model: path, activationData: { activeAllergy: $parents[1].activeAllergy } } -->\r\n                    <!-- /ko -->\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: true">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header>\r\n                                                <h1>History</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>\r\n'}),n("text!views/patients/notes/index.html",[],function(){return'<div class="body" data-bind="visible: showing">\r\n    <div class="row">\r\n		<div data-bind="with: note"> \r\n			<!-- ko compose: "templates/validation.errors.html" -->\r\n			<!-- /ko -->\r\n		</div>\r\n		<section class="accordion" >\r\n            <!-- <div class="row" data-bind="with: $parent.activeDataType">\r\n                <h3 data-bind="text: name, attr: { title: name }"></h3>\r\n            </div> -->\r\n            \r\n			<!-- ko compose: { model: templatePath, activationData: { note: note } } -->\r\n			<!-- /ko -->            \r\n        </section>\r\n	</div>\r\n</div>		'}),n("text!views/patients/overview/index.html",[],function(){return'<section class="slider" data-type="flex">\r\n    <!-- ko if: selectedPatient() -->\r\n    <div>\r\n        <div class="column open">\r\n            <div class="widget-wrapper">\r\n                <div class="widget shared" data-bind="css: { \'open\': todosPanelOpen, \'fullscreen\': fullScreenWidget() === \'todopanel\' }, columnSizer: {triggers: {a: todosPanelOpen(), b: todoFiltersHeaderOpen(), c: todoFiltersOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (todoFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">                                                        \r\n															<label class="span1 gray">Filter:</label>\r\n															<div style="display: inline-block" data-bind="chsnsingle: { options: todoViews, value: selectedTodoView, text: \'name\', label: \'todoViews\' }"></div>                                                           \r\n                                                        </div>\r\n                                                        <div class="span4 grey">\r\n                                                            <label data-bind="visible: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span3 grey">\r\n                                                            <div class="pull-right filters" data-bind="visible: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetTodoFilters, enable: (selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n																<span>&nbsp</span>\r\n                                                            </div>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                                <div class="filter-content" data-bind="visible: todoFiltersOpen">\r\n                                                    <section>\r\n                                                        <div class="row">\r\n                                                            <div class="span3">\r\n																<span class="span2 gray">Priority:</span>\r\n															</div>\r\n                                                            <div class="span3">\r\n																<span class="span2 gray">Category:</span>\r\n															</div>\r\n                                                        </div>\r\n                                                        <div class="row">\r\n															<div class="span3">\r\n																<div class="span6" data-bind="multiselect: { options: todoPriorities, values: selectedTodoPriorities, text: \'levelName\', label: \'todocategories\', idValue: \'id\' }"></div>\r\n															</div>\r\n																\r\n															<div class="span3">\r\n																<div class="span6" data-bind="multiselect: { options: todoCategories, values: selectedTodoCategories, text: \'name\', label: \'taskcategories\', idValue: \'id\' }"></div>\r\n															</div>\r\n														\r\n                                                        </div>\r\n                                                    </section>\r\n                                                </div>\r\n                                                <div class="toggle" data-bind="clickToggle: todoFiltersOpen, css: todoFiltersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(todosPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedTodoView() ? selectedTodoView().name : \'To-Do List\'"></span> - <span data-bind="text: myToDos().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(todoFiltersHeaderOpen, todosPanelOpen); }, clickBubble: false, css: ((selectedTodoCategories().length > 0 || selectedTodoPriorities().length > 0) ? \'red\' : (todoFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n													<div class="toggle gray" data-bind="click: refreshTodoView, clickBubble: false" title="Refresh Data">\r\n														<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': todosSaving }"></i>\r\n													</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'todopanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/todo.panel\', activationData: { todos: myToDos, columns: activeTodoColumns, toggleSort: toggleTodoSort, selectedSortColumn: selectedTodoSortColumn, canSort: true, isBackendSort:false } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="widget shared" data-bind="css: { \'open\': interventionsPanelOpen, \'fullscreen\': fullScreenWidget() === \'interventionpanel\' }, columnSizer: {triggers: {a: interventionsPanelOpen(), b: interventionFiltersHeaderOpen(), c: interventionFiltersOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (interventionFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">\r\n															<label class="span1 gray">Filter:</label>\r\n															<div style="display: inline-block" data-bind="chsnsingle: { options: interventionViews, value: selectedInterventionView, text: \'name\', label: \'interventionViews\' }"></div>\r\n                                                        </div>\r\n                                                        <div class="span5 grey">\r\n                                                            <label data-bind="visible: (selectedInterventionCategories().length > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span2 grey">\r\n															<div class="pull-right filters" data-bind="visible: (selectedInterventionCategories().length > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetInterventionFilters, enable: (selectedInterventionCategories().length > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n																<span>&nbsp</span>\r\n                                                            </div>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                                <div class="filter-content" data-bind="visible: interventionFiltersOpen">\r\n                                                    <section>\r\n                                                        <div class="row">\r\n															<div class="span3">\r\n																<span class="span2 grey">Category:</span>\r\n															</div>\r\n                                                        </div>\r\n                                                        <div class="row">\r\n															<div class="span3">\r\n																<div class="span6" data-bind="multiselect: { options: interventionCategories, values: selectedInterventionCategories, text: \'name\', label: \'interventioncategories\', idValue: \'id\' }"></div>\r\n															</div>\r\n                                                        </div>\r\n                                                    </section>\r\n                                                </div>\r\n                                                <div class="toggle" data-bind="clickToggle: interventionFiltersOpen, css: interventionFiltersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(interventionsPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedInterventionView() ? selectedInterventionView().name : \'Intervention List\'"></span> - <span data-bind="text: myInterventions().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(interventionFiltersHeaderOpen, interventionsPanelOpen); }, clickBubble: false, css: (selectedInterventionCategories().length > 0 ? \'red\' : (interventionFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n													<div class="toggle gray" data-bind="click: refreshInterventionView, clickBubble: false" title="Refresh Data">\r\n														<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': interventionsSaving }"></i>\r\n													</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'interventionpanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/intervention.panel\', activationData: { interventions: myInterventions, columns: activeInterventionColumns, toggleSort: toggleInterventionSort, selectedSortColumn: selectedInterventionSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="widget shared" data-bind="css: { \'open\': taskPanelOpen, \'fullscreen\': fullScreenWidget() === \'taskpanel\' }, columnSizer: {triggers: {a: taskPanelOpen(), b: taskFiltersHeaderOpen()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="filters" data-bind="visible: (taskFiltersHeaderOpen())">\r\n                                        <div class="table-cell">\r\n                                            <div class="wrapper">\r\n                                                <section class="pinned">\r\n                                                    <div class="row">\r\n                                                        <div class="span5">\r\n                                                            <label class="span1 gray">Filter:</label>\r\n                                                            <div style="display: inline-block" data-bind="chsnsingle: { options: taskViews, value: selectedTaskView, text: \'name\', label: \'taskViews\' }"></div>\r\n                                                        </div>\r\n                                                        <div class="span5 grey">\r\n                                                            <label data-bind="visible: (-1 > 0)">\r\n                                                                <i class="fa fa-filter red"></i>\r\n                                                                Additional filters applied\r\n                                                            </label>\r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>\r\n                                                        <div class="span2 grey">\r\n															<div class="pull-right filters" data-bind="visible: (-1 > 0)">\r\n                                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetTaskFilters, enable: (-1 > 0)" style="position: inherit;" title="Clear Filter"></i>\r\n																<span>&nbsp</span>\r\n                                                            </div>                                                            \r\n                                                            <span style="color: whitesmoke;">-</span>\r\n                                                        </div>                                                        \r\n                                                    </div>\r\n                                                </section>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="header pointer" data-bind="click: function () { toggleWidgetOpen(taskPanelOpen) }">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>\r\n                                                    <span data-bind="text: selectedTaskView() ? selectedTaskView().name : \'Task List\'"></span> - <span data-bind="text: myTasks().length + \' showing\'"></span>\r\n                                                </h1>\r\n                                                <div class="controls">\r\n                                                    <i class="fa fa-filter lightestblue pad-right" data-bind="click: function () { toggleHeaderOpen(taskFiltersHeaderOpen, taskPanelOpen); }, clickBubble: false, css: ((taskFiltersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                                    </i>\r\n													<div class="toggle gray" data-bind="click: refreshTaskView, clickBubble: false" title="Refresh Data">\r\n														<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': tasksSaving }"></i>\r\n													</div>\r\n                                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'taskpanel\') }, clickBubble: false">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div data-bind="compose: { model: \'viewmodels/templates/task.panel\', activationData: { tasks: myTasks, columns: activeTaskColumns, toggleSort: toggleTaskSort, selectedSortColumn: selectedTaskSortColumn, canSort: true } }">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column details"><div class="widget-wrapper"></div></div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: !selectedPatient() -->\r\n    <div>\r\n        <div class="column">\r\n            <div class="widget-wrapper">\r\n                <div class="widget open" data-bind="columnSizer: {triggers: {a: selectedPatient()}}">\r\n                    <div class="content">\r\n                        <div class="content-fill">\r\n                            <div class="wrapper">\r\n                                <div class="content">\r\n                                    <div class="header">\r\n                                        <div class="table-cell">\r\n                                            <header class="ellipsis">\r\n                                                <h1>Overview</h1>\r\n                                            </header>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="table-row">\r\n                                        <div class="table-cell">\r\n                                            <div class="body">\r\n                                                <div class="content">\r\n                                                    <div class="body">\r\n                                                        <em class="grey">No individual selected.</em>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</section>';
}),n("text!views/patients/sections/additional.observations.html",[],function(){return'<div>\r\n    <div class="row" data-bind="with: activeDataType">\r\n        <h3 data-bind="text: (\'Additional \' + name()), attr: { title: (\'Additional \' + name()) }"></h3>\r\n    </div>\r\n    <div class="accordion-content columns">\r\n        <div class="column">\r\n            <form>\r\n                <div class="row pad top">\r\n                    <div class="span6">\r\n                        <div class="row">\r\n                            <input class="span12" type="text" data-bind="typeahead: { name: \'giveMeANAME\', taOptions: addtlObsBloodhound, displayKey: \'name\' }, value: selectedAdditionalObservation" placeholder="Enter name" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="span6 pull-left">\r\n                        <a href="#" data-bind="click: addNewObservation, enable: canAdd, css: { \'disabled\': !canAdd() }">\r\n                            <i class="icon-plus"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="row pad top" data-bind="if: additionalObservationsToEnter().length !== 0">\r\n                    <div class="row pad top">\r\n                        <div class="span2">\r\n                            <strong>Element</strong>\r\n                        </div>\r\n                        <div class="span2">\r\n                            <strong>Value</strong>\r\n                        </div>\r\n						<div class="span1">\r\n                            <strong>Units</strong>\r\n                        </div>\r\n                        <div class="span2">\r\n                            <strong>Date</strong>\r\n                        </div>\r\n                        <div class="span4">\r\n                            <strong></strong>\r\n                        </div>\r\n                        <div class="span1">\r\n                            <strong></strong>\r\n                        </div>\r\n                    </div>\r\n                    <!-- ko foreach: additionalObservationsToEnter -->\r\n                    <!-- ko if: groupId() -->\r\n                    <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew  } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                    <!-- ko if: !groupId() -->\r\n                    <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew   } } -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/sections/additional.problem.observations.html",[],function(){return'<div class="row pad-bottom">\r\n	<div class="span3">&nbsp;</div>\r\n	<div class="span4">\r\n		<div>\r\n            <input type="text" data-bind="typeahead: { name: \'focusProblems\', taOptions: probObsBloodhound, displayKey: \'name\' }, value: selectedObservation, valueUpdate: \'afterkeydown\'" placeholder="Search Focus Problem" />\r\n		</div>\r\n	</div>	\r\n	<div class="span2">\r\n		<button class="btn color small" data-bind="click: addNewObservation, enable: canAdd">\r\n			<i class="icon-plus"></i>\r\n			<span class="pad-left">Add</span>\r\n		</button>\r\n	</div>\r\n</div>'}),n("text!views/patients/sections/allergies.edit.html",[],function(){return'<div class="pad-vertical">\r\n    <div class="row">\r\n        <div class="span3">\r\n            <strong>Name</strong>\r\n        </div>\r\n        <div class="span3">\r\n            <strong>Type</strong>\r\n        </div>\r\n        <div class="span3">\r\n            <strong>Start Date</strong>\r\n        </div>\r\n        <div class="span3">\r\n            <strong>End Date</strong>\r\n        </div>\r\n    </div>\r\n    <!-- ko foreach: newPatientAllergies -->\r\n	    <div class="row pad-top divider">\r\n	        <div class="span3">\r\n	        	<pre data-bind="text: allergyName"></pre>\r\n	        </div>\r\n	        <div class="span3">\r\n	        	<!-- ko if: !isUserCreated() -->\r\n	        	<div class="ellipsis">\r\n	        		<span data-bind="text: typeString, attr: { title: typeString }"></span>\r\n	        	</div>\r\n	        	<!-- /ko -->\r\n	        	<div data-bind="visible: isUserCreated">\r\n                	<div class="span9" data-bind="multiselect: { options: $parent.allergyTypes, values: allergyTypeIds, idValue: \'id\', text: \'name\', label: \'allergytypes\', stringValue: typeString, isRequired: true }"></div>\r\n	        	</div>\r\n	        </div>\r\n	        <div class="span3">\r\n				<div class="span7">\r\n					<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n						{\r\n							observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate,\r\n							maxDate: \'today\', datepickerOptions:{ maxDate: \'+0\' }, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n						}\r\n					} -->\r\n					<!-- /ko -->\r\n				</div>\r\n	        </div>\r\n	        <div class="span2">\r\n				<div class="span10">\r\n					<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n						{\r\n							observableDateTime: endDate, dateErrors: endDateErrors, showInvalid: setInvalidEndDate,\r\n							maxDate: \'today\', datepickerOptions:{maxDate: \'+0\'}, datepickerDynamicOptions: {minDate: startDate}, dateName: \'endDate\'\r\n						}\r\n					} -->\r\n					<!-- /ko -->\r\n				</div>\r\n	        </div>\r\n	        <div class="span1 pull-right">\r\n	            <a href="#" title="Remove" data-bind="click: $parent.removeAllergy">\r\n	            	<i class="close pull-right icon-cancel red"></i>\r\n	        	</a>\r\n	        </div>\r\n	    </div>\r\n	    <div class="row pad-top">\r\n	        <div class="span3">\r\n	            <strong>Reaction</strong>\r\n	        </div>\r\n	        <div class="span3">\r\n	            <strong>Severity</strong>\r\n	        </div>\r\n	        <div class="span3">\r\n	            <strong>Source</strong>\r\n	        </div>\r\n			<div class="span3">\r\n	            <strong>Status</strong>\r\n	        </div>\r\n	    </div>\r\n	    <div class="row pad-top">\r\n	        <div class="span3">\r\n	            &nbsp;\r\n                <div class="span10" data-bind="multiselect: { options: $parent.reactions, values: reactionIds, idValue: \'id\', text: \'name\', label: \'reactions\', stringValue: reactionString }"></div>\r\n	        </div>\r\n	        <div class="span3">\r\n                <div class="span10" data-bind="chsnsingle: { options: $parent.severities, value: severity, text: \'name\', label: \'severities\' }"></div>\r\n	        </div>\r\n	        <div class="span3">\r\n	            <div class="span10" data-bind="chsnsingle: { options: $parent.allergySources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n	        </div>\r\n			<div class="span3">\r\n	            <div class="span10" data-bind="chsnsingle: { options: $parent.allergyStatuses, value: status, text: \'name\', label: \'status\' }"></div>\r\n	        </div>\r\n	    </div>\r\n	    <div class="row pad-top">\r\n	    	<div class="span3 grey">Notes:</div>\r\n		</div>\r\n		<div class="row">\r\n			<div class="span12">\r\n				<textarea data-bind="value: notes"></textarea>\r\n			</div>\r\n		</div>\r\n    <!-- /ko -->\r\n	    <div class="divider"></div>\r\n</div>'}),n("text!views/patients/sections/allergies.search.html",[],function(){return'<div class="row pad-bottom">	\r\n	<div class="span3">&nbsp;</div>\r\n	<div class="span4">\r\n		<div>\r\n			<input type="text" data-bind="typeahead: { name: \'allergies\', taOptions: allergyBloodhound, displayKey: \'DisplayName\' }, value: selectedAllergy, valueUpdate: \'afterkeydown\', initOptions: { hint: true, highlight: true, minLength: 3 }, showResultsCount: resultsMessage" placeholder="Search Allergies" />\r\n		</div>			\r\n	</div>\r\n	<div class="span2">\r\n		<button class="btn color small" data-bind="click: addNewAllergy, enable: canAdd">\r\n			<i class="icon-plus"></i>\r\n			<span class="pad-left">Add</span>\r\n		</button>\r\n	</div>	\r\n</div>'}),n("text!views/patients/sections/allergy.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: {triggers: allergy}">\n  <div class="content" data-bind="with: allergy">\n    <div class="content-fill">\n      <div class="wrapper">\n        <div class="content">\n          <div class="header">\n            <div class="table-cell">\n              <header>\n                <h1 class="ellipsis"><span data-bind="text: (allergyName().length > 18 ? allergyName().substring(0, 18) + \'...\' : allergyName()), attr: { \'title\': allergyName }"></span></h1>\n                <div class="controls">\n                  <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\n                  </div>\n                </div>\n                <div class="options">\n                  <a class="edit_allergy icon-outset" href="#" data-bind="click: $parent.edit"><i class="icon-edit"></i></a>\n                  <a class="delete_allergy" href="#" data-bind="click: $parent.delete"><i class="icon-cancel"></i></a>\n                </div>\n              </header>\n            </div>\n          </div>\n          <div class="table-row">\n            <div class="table-cell">\n              <div class="body">\n                <div class="content">\n                  <div class="accordion open">\n                    <div class="span12 details">\n                      <div class="status">\n\n                        <div class="row pad-bottom">\n                          <div class="span6 grey">\n                            Type\n                          </div>\n                          <div class="span6" data-bind="text: typeString">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="if: status">\n                          <div class="span6 grey">\n                            Status\n                          </div>\n                          <div class="span6" data-bind="text: status().name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: reactionString() !== \'-\'">\n                          <div class="span6 grey">\n                            Reaction\n                          </div>\n                          <div class="span6" data-bind="text: reactionString">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="if: severity">\n                          <div class="span6 grey">\n                            Severity\n                          </div>\n                          <div class="span6" data-bind="text: severity().name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="if: source">\n                          <div class="span6 grey">\n                            Source\n                          </div>\n                          <div class="span6" data-bind="text: source().name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: startDate">\n                          <div class="span6 grey">\n                            Start Date\n                          </div>\n                          <div class="span6" data-bind="DateOrDash: startDate">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: endDate">\n                          <div class="span6 grey">\n                            End Date\n                          </div>\n                          <div class="span6" data-bind="DateOrDash: endDate">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: createdOn">\n                          <div class="span6 grey">\n                            Created\n                          </div>\n                          <div class="span6" data-bind="Date: createdOn">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: updatedOn">\n                          <div class="span6 grey">\n                            Updated\n                          </div>\n                          <div class="span6" data-bind="Date: updatedOn">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: notes">\n                          <div class="span6 grey">\n                            Notes\n                          </div>\n                            <!-- ko ifnot: $parent.isNotesExpanded -->\n                                <div class="span12" data-bind="visible: notes">\n                                    <textarea data-bind="text: notes, attr: { \'title\': notes }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\n                                    <a class="grey" data-bind="clickToggle: $parent.isNotesExpanded" href="#">...</a>\n                                </div>\n                                <!-- /ko -->\n                                <!-- ko if: $parent.isNotesExpanded -->\n                                <textarea data-bind="text: notes, autoHeight: notes, attr: { \'title\': notes }" readonly="readonly" class="display-only span12" ></textarea>\n                            <!-- /ko -->\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: systemName">\n                          <div class="span6 grey">\n                            System\n                          </div>\n                          <div class="span6" data-bind="text: systemName">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),n("text!views/patients/sections/background.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patient-background-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Background</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'" data-phyautomation="patient-background-edit"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <div class="column" data-phyautomation="patient-background-whole">\r\n            <div class="row" data-bind="with: selectedPatient">           \r\n                <!-- ko ifnot: $parent.isExpanded -->\r\n                <div class="span12" data-bind="visible: background">\r\n                    <textarea data-bind="text: background, attr: { \'title\': background }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\r\n                    <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: $parent.isExpanded -->\r\n                <textarea data-bind="text: background, autoHeight: background, attr: { \'title\': background }" readonly="readonly" class="display-only span12" ></textarea>           \r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'}),n("text!views/patients/sections/barrier.details.html",[],function(){return'<div class="task span12" data-bind="with: barrier">\r\n    <div class="rule"></div>\r\n    <div class="barrier row rule">\r\n        <div class="details">\r\n            <div class="filter-toggle status line" data-bind="click: $parent.toggleIsExpanded">\r\n                <div class="pull-left">\r\n                    <i data-bind="css: ($parent.isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\')"></i>\r\n                    <i data-bind="css: (status() ? status().iconClass() : \'\')"></i>\r\n                </div>\r\n                <div class="name pad-icon-left accordion-toggle">\r\n                    <div class="line-reset">\r\n                        <span data-bind="text: name, css: (status() ? status().textClass() : \'\')">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- ko if: $parent.isExpanded -->\r\n            <div class="accordion-content muted pad pad-icon-left">\r\n                <div class="row pad-bottom">\r\n                    <div class="span6 grey">\r\n                        Category\r\n                    </div>\r\n                    <div class="span6">\r\n                        <span data-bind="with: category">\r\n                            <span data-bind="text: name"></span>\r\n                        </span>\r\n                        <span data-bind="if: !category()">-</span>\r\n                    </div>\r\n                </div>\r\n                <div class="row pad-bottom filter-toggle" data-bind="click: $parent.toggleDetailsExpanded">\r\n                    <div class="span6 grey">\r\n                        Details\r\n                    </div>\r\n                    <span class="span6" data-bind="visible: (!$parent.hasDetails()), text: \'-\'"></span>\r\n                </div>\r\n                <div class="row pad-bottom" data-bind="visible: details">\r\n                    <!-- ko ifnot: $parent.isDetailsExpanded -->\r\n                    <textarea class="span12 display-only no-scroll muted" style="height: 6.5em;" rows="5" data-bind="text: details, attr:{ \'title\': details }, visible: details" readonly="readonly"></textarea>\r\n                    <a class="grey" data-bind="click: $parent.toggleDetailsExpanded, visible: details" href="#">...</a>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: $parent.isDetailsExpanded -->\r\n                    <textarea class="span12 display-only muted" data-bind="text: details, autoHeight: details, attr:{ \'title\': details }" readonly="readonly"></textarea>\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <div class="row pad-bottom filter-toggle">\r\n                    <div class="span6 grey">\r\n                        Related Tasks\r\n                    </div>\r\n                    <textarea class="span12 display-only muted" rows="2" data-bind="text: taskListString, attr:{ \'title\': taskListString }" readonly="readonly"></textarea>\r\n                </div>\r\n\r\n                <div class="row pad-bottom filter-toggle">\r\n                    <div class="span6 grey">\r\n                        Related Interventions\r\n                    </div>\r\n                    <textarea class="span12 display-only muted" rows="2" data-bind="text: interventionListString, attr:{ \'title\': interventionListString }" readonly="readonly"></textarea>\r\n                    <span>-</span>\r\n                </div>\r\n\r\n                <div class="row">\r\n                    <div class="pull-left">\r\n                        <a class="edit_barrier icon-outset" href="#" data-bind="click: $parent.editBarrier"><i class="icon-edit"></i>Edit</a>\r\n                    </div>\r\n                    <div class="pull-right">\r\n                        <a class="delete_barrier" href="#" data-bind="click: $parent.deleteBarrier"><i class="icon-cancel"></i>Delete</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/sections/basic.observations.html",[],function(){return'<div class="columns">\r\n    <div class="column">\r\n        <form>\r\n            <div class="row pad">\r\n                <div class="span2">\r\n                    <strong>Element</strong>\r\n                </div>\r\n                <div class="span2">\r\n                    <strong>Value</strong>\r\n                </div>\r\n				<div class="span1">\r\n                    <strong>Units</strong>\r\n                </div>\r\n                <div class="span2">\r\n                    <strong>Date</strong>\r\n                </div>\r\n                <div class="span4">\r\n                    <strong></strong>\r\n                </div>\r\n                <div class="span1">\r\n                    <strong></strong>\r\n                </div>\r\n            </div>\r\n            <!-- ko foreach: computedBasicObservations -->\r\n            <!-- ko if: groupId -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.bloodpressure.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko if: !groupId() -->\r\n            <!-- ko compose: { model: \'viewmodels/templates/observation.add\', activationData: { observation: $data, addNew: $parent.addNew } } -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </form>\r\n    </div>\r\n</div>'}),n("text!views/patients/sections/care.team.html",[],function(){return'<section class="accordion hoverable open">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Care Team</strong>			<!-- this needs to chage -->\r\n        <!-- <a class="edit hover-toggle" href="#" data-bind="click: editCareTeam">Edit</a> -->\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <ul class="dotted column">\r\n            \r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: addCareMember" class="btn color small">Assign</button>\r\n                    <br>\r\n                    <small class="grey">Care Team Member</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n			<li class="row center pad top">\r\n				<div data-bind="with: primaryCareManager">\r\n					<div class="span2" data-bind="with: contact">\r\n						<img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n					</div>\r\n					<div class="span10">\r\n						<div data-bind="with: contact">\r\n							<strong data-bind="text: fullName, attr: { \'title\': fullName }"></strong>\r\n						</div>\r\n						<small class="grey" data-bind="attr: { \'title\': computedRoleName }">\r\n							<span data-bind="text: computedRoleName"></span>\r\n						</small>\r\n						<br>\r\n					</div>\r\n				</div>\r\n				<div data-bind="if: !primaryCareManager()">\r\n					<div class="span2">\r\n						<img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n					</div>\r\n					<div class="span10">						\r\n						<button data-bind="click: assignToMe" class="btn color small">Assign to me</button>\r\n						<br>\r\n						<small class="grey">\r\n							<span>Primary Care Manager</span>\r\n						</small>\r\n						<br>\r\n					</div>\r\n				</div>\r\n			</li>\r\n			<li class="row center pad top">\r\n				<div data-bind="with: primaryCarePhysician">\r\n					<div class="span2" data-bind="with: contact">\r\n						<img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n					</div>\r\n					<div class="span10">\r\n						<div data-bind="with: contact">\r\n							<strong data-bind="text: fullName, attr: { \'title\': fullName }"></strong>\r\n						</div>\r\n						<small class="grey" data-bind="attr: { \'title\': computedRoleName }">\r\n							<span data-bind="text: computedRoleName"></span>\r\n						</small>\r\n						<br>\r\n					</div>\r\n				</div>\r\n				<div data-bind="if: !primaryCarePhysician()">\r\n					<div class="span2">\r\n						<img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n					</div>\r\n					<div class="span10">\r\n						<strong>Unassigned</strong><br>\r\n						<small class="grey">\r\n							<span>Primary Care Physician</span>\r\n						</small>\r\n						<br>\r\n					</div>\r\n				</div>\r\n			</li>\r\n            \r\n        </ul>\r\n        <ul class="dotted column">\r\n            <!-- ko if: canReassignToMe -->\r\n            <li class="row center pad top">\r\n                <div class="span2">\r\n                    <img alt="Care team image" class="profile-pic" src="/NightingaleUI/Content/images/patient_neutral_small.png" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n                    <button data-bind="click: assignToMe" class="btn color small">Assign to me</button>\r\n                    <br>\r\n                    <small class="grey">Primary Care Manager</small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n			<!-- ko foreach: primaryCareTeam -->\r\n            <li class="row center pad top">\r\n                <div class="span2" data-bind="with: contact">\r\n                    <img alt="Care team image" class="profile-pic" data-bind="attr: { src: genderModel().SmallImgSrc }" data-phyautomation="gender">\r\n                </div>\r\n                <div class="span10">\r\n					<div data-bind="with: contact">\r\n						<strong data-bind="text: fullName, attr: { \'title\': fullName }"></strong>\r\n					</div>\r\n                    <small class="grey" data-bind="attr: { \'title\': computedRoleName }">\r\n                        <span data-bind="text: computedRoleName"></span>\r\n                    </small>\r\n                    <br>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->            \r\n        </ul>\r\n    </div>\r\n</section>'}),n("text!views/patients/sections/clinicalBackground.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patient-background-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Clinical Background</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'" data-phyautomation="patient-background-edit"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen">\r\n        <div class="column" data-phyautomation="patient-background-whole">\r\n            <div class="row" data-bind="with: selectedPatient">           \r\n                <!-- ko ifnot: $parent.isExpanded -->\r\n                <div class="span12" data-bind="visible: clinicalBackground">\r\n                    <textarea data-bind="text: clinicalBackground, attr: { \'title\': clinicalBackground }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\r\n                    <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n                </div>\r\n                <!-- /ko -->\r\n                <!-- ko if: $parent.isExpanded -->\r\n                <textarea data-bind="text: clinicalBackground, autoHeight: clinicalBackground, attr: { \'title\': clinicalBackground }" readonly="readonly" class="display-only span12" ></textarea>           \r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'}),n("text!views/patients/sections/communications.html",[],function(){return'<section class="accordion hoverable open">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Communication</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: editContact">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="with: contactCard, visible: isOpen">\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.primaryCommunications -->\r\n            <div data-bind="compose: template">\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="row">\r\n                <div class="span4 grey">Mode</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !prefCommMethods()">Unknown</em>\r\n                    <span class="row" data-bind="visible: prefCommMethods, text: prefCommMethods, attr: { \'title\': prefCommMethods }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Days</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredDaysOfWeek()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredDaysOfWeek, text: preferredDaysOfWeek, attr: { \'title\': preferredDaysOfWeek }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Time</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredTimesOfDay()">Unknown</em>\r\n                    <span class="row" data-bind="visible: preferredTimesOfDay, text: preferredTimesOfDay, attr: { \'title\': preferredTimesOfDay }"></span>\r\n                </div>\r\n            </div>\r\n            <div class="row" data-bind="with: timeZone">\r\n                <div class="span4 grey">Time Zone</div>\r\n                <div class="span8" data-bind="text: name, attr: { \'title\': name }"></div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="span4 grey">Language</div>\r\n                <div class="span8">\r\n                    <em class="row grey" data-bind="visible: !preferredLanguage()">Unknown</em>\r\n                    <!-- ko with: preferredLanguage -->\r\n                    <span class="row" data-bind="text: name, attr: { \'title\': name }"></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="column">\r\n            <!-- ko foreach: $parent.secondaryCommunications -->\r\n            <div data-bind="compose: template">\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : phoneOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-phone"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'phone opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;phone opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : emailOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-email"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'email opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;email opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : addressOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-address"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'mail opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;mail opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <!-- ko if : textOptedOut -->\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <i class="icon-sms"></i>\r\n                </div>\r\n                <div class="span10 ellipsis line short" data-bind="attr: { \'title\': \'text opt out\' }">\r\n                    <div class="row">\r\n                        <em class="grey">&lt;text opt out&gt;</em>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="row" data-bind="with: secondaryLanguagesText">\r\n                <div class="span4 grey">Language</div>\r\n                <div class="span8 line short">\r\n                    <span class="row" data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>';
}),n("text!views/patients/sections/data.list.html",[],function(){return'<div class="content">\r\n	<div class="clinicaldatalist">\r\n		<div class="vitalslist">\r\n			<table class="no-wrap">\r\n				<thead>\r\n					<tr>\r\n						<th></th>\r\n						<th>Type</th>\r\n						<th>Name</th>\r\n						<th>Value</th>\r\n						<th>Start Date</th>\r\n						<th>End Date</th>\r\n						<th>Source</th>\r\n						<th>Status</th>\r\n						<th></th>\r\n					</tr>\r\n				</thead>\r\n				<tbody>\r\n					<!-- ko foreach: computedObservationGroups -->\r\n						<tr data-bind="style: { backgroundColor: $index()%2 == 0 ? \'whitesmoke\' : \'\' }">\r\n							<td>																								\r\n								<a class="toggle vitalshistory filters" href="#" data-bind="click: $parent.toggleExpand">\r\n									<i class="toggle" data-bind="css: isOpen() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i>\r\n								</a>\r\n							</td>\r\n							<!-- ko with: parentObservation -->\r\n							<td data-bind="with: type"><span data-bind="text: name"></td>\r\n							<td data-bind="text: name"></td>\r\n							<td data-bind="text: computedValueString"></td>\r\n							<td data-bind="DateOrDash: startDate"></td>\r\n							<td data-bind="DateOrDash: endDate"></td>\r\n							<td data-bind="text: source() ? source() : \'-\'"></td>\r\n							<td>\r\n								<span data-bind="with: state">\r\n									<span data-bind="text: name"></span>\r\n								</span>\r\n								<!-- ko if: !state() -->\r\n									<span>-</span>\r\n								<!-- /ko -->\r\n							</td>\r\n							<td>\r\n								<a title="Remove" data-bind="visible: false"> <!-- click: $parents[1].removeObservation -->\r\n									<i class="icon-cancel" style="color: lightgrey;"></i>\r\n								</a>\r\n							</td>\r\n							<!-- /ko -->\r\n						</tr>\r\n						<!-- ko if: isOpen -->\r\n							<!-- ko foreach: computedObservations -->\r\n							<tr data-bind="style: { backgroundColor: $parentContext.$index()%2 == 0 ? \'whitesmoke\' : \'\'    }" class="hidden vhist" style="display: table-row;">\r\n								<td>\r\n								</td>\r\n								<td>\r\n								</td>\r\n								<td></td>\r\n								<td data-bind="text: computedValueString"></td>\r\n								<td data-bind="DateOrDash: startDate"></td>\r\n								<td data-bind="DateOrDash: endDate"></td>\r\n								<td data-bind="text: source() ? source() : \'-\'"></td>\r\n								<td>\r\n									<span data-bind="with: state">\r\n										<span data-bind="text: name"></span>\r\n									</span>\r\n									<!-- ko if: !state() -->\r\n										<span>-</span>\r\n									<!-- /ko -->\r\n								</td>\r\n								<td>\r\n									<a title="Remove" data-bind="visible: false"> <!-- click: $parents[1].removeObservation -->\r\n										<i class="icon-cancel" style="color: lightgrey;"></i>\r\n									</a>\r\n								</td>\r\n							</tr>\r\n							<!-- /ko -->\r\n							<!-- ko if: computedObservations().length === 0 -->\r\n							<tr data-bind="style: { backgroundColor: $index()%2 == 0 ? \'whitesmoke\' : \'\'    }" class="hidden vhist" style="display: table-row;">\r\n								<td>\r\n									<!-- ko if: isLoadingObs -->\r\n									<i class="fa fa-spinner fa-spin"></i>\r\n									<!-- /ko -->\r\n								</td>\r\n								<td></td>\r\n								<td></td>\r\n								<td colspan="10">\r\n									<em>No additional data</em>\r\n								</td>\r\n							</tr>\r\n							<!-- /ko -->\r\n						<!-- /ko -->\r\n					<!-- /ko -->\r\n				</tbody>\r\n			</table>\r\n			<!-- ko if: computedObservationGroups().length === 0 -->\r\n				<em class="grey">No observations available for the individual.</em>\r\n			<!-- /ko -->\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!views/patients/sections/demographics.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patients-demographics-pane">\r\n		<div class="row line accordion-toggle">\r\n				<strong class="ellipsis" data-bind="clickToggle: isOpen">Individual Details</strong>\r\n				<a class="edit hover-toggle" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a>\r\n		</div>\r\n		<div class="accordion-content columns" data-bind="visible: isOpen, with: selectedPatient">\r\n				<div class="column" data-phyautomation="patients-demographics-left">\r\n						<div class="row">\r\n								<div class="span4">\r\n										<img alt="Individual image" class="profile-pic" data-bind="attr: { src: genderModel().LargeImgSrc }" data-phyautomation="gender">\r\n								</div>\r\n								<div class="span8 pad vertical">\r\n										<h2 class="row">\r\n												<span class="span12 ellipsis" data-bind="text: fullFirstName, attr: { \'title\': fullFirstName }" data-phyautomation="full-first-name"></span>\r\n										</h2>\r\n										<h2 class="row">\r\n												<span class="span12 ellipsis" data-bind="text: fullLastName, attr: { \'title\': fullLastName }" data-phyautomation="full-last-name"></span>\r\n										</h2>\r\n								</div>\r\n						</div>\r\n						<div class="row" data-bind="with: deceased()">\r\n							<div class="span4 grey" data-bind="if: (name() === \'Yes\')">\r\n								Deceased\r\n							</div>\r\n						</div>\r\n						<div class="row pad-top">\r\n							<div class="span4 grey">\r\n								Age\r\n							</div>\r\n							<div class="span8">\r\n								<span data-bind="text: age" data-phyautomation="age">\r\n								</span>\r\n								<span class="grey" data-bind="with: dOB">\r\n									<span data-bind="text: \'(\' + $data + \')\'" data-phyautomation="dob">\r\n									</span>\r\n								</span>\r\n							</div>\r\n						</div>\r\n						<div class="row" data-bind="if: minor">\r\n							<div class="span4 grey">\r\n								&nbsp;\r\n							</div>\r\n							<div class="span8">\r\n								Minor\r\n							</div>\r\n						</div>\r\n						<div class="row pad-top" data-bind="visible: $parent.primaryId" >\r\n								<div class="span4 grey ellipsis" data-bind="text: $parent.primaryIdLabel, attr:{ \'title\': $parent.primaryIdTitle }"></div>\r\n								<div class="span8 ellipsis">\r\n										<span class="row" data-bind="text: $parent.primaryIdValue, attr: { \'title\': $parent.primaryIdValue }"></span>\r\n								</div>\r\n						</div>\r\n						<div class="row pad-top">\r\n								<div class="span4 grey">\r\n										Priority\r\n								</div>\r\n								<div class="span8" style="height: 15.33px;">\r\n										<!-- ko with : priorityModel -->\r\n										<img alt="Priority" data-bind="attr: { src: imageSource }" data-phyautomation="priority" />\r\n										<!-- /ko -->\r\n								</div>\r\n						</div>\r\n						<div class="row pad-top">\r\n								<div class="span4 grey">\r\n										Flagged\r\n								</div>\r\n								<div class="span8" style="height: 15.33px;">\r\n										<a href="#" data-bind="click: $parent.toggleFlagged">\r\n												<i data-bind="attr: { class: (flagged() ? \'red\' : \'grey\') + \' icon-flag\' }" data-phyautomation="flagged"></i>\r\n										</a>\r\n								</div>\r\n						</div>\r\n				</div>\r\n				<div class="column" data-phyautomation="patients-demographics-right">\r\n					<div class="row" data-bind="with: formattedSSN">\r\n						<div class="span5 grey">SSN</div>\r\n						<div class="span6 filter-toggle" data-bind="text: $data, click: $parents[1].showFullSSN"></div>\r\n					</div>\r\n\r\n					<div class="row pad-top">\r\n						<div class="span5 grey">Protected</div>\r\n						<div class="span6 filter-toggle" data-bind="text: protected() ? \'Yes\' : \'No\'"></div>\r\n					</div>\r\n					<div class="row" data-bind="with: maritalStatus">\r\n						<div class="span5 grey pad-top">Marital Status</div>\r\n						<div class="span6 filter-toggle pad-top" data-bind="text: name()"></div>\r\n					</div>\r\n					<div class="row pad-top">\r\n						<div class="span5 grey">System</div>\r\n						<div class="span6 filter-toggle" data-bind="text: dataSource, attr {title: dataSource}"></div>\r\n					</div>					\r\n				</div>\r\n		</div>\r\n</section>'}),n("text!views/patients/sections/dropdown.w.addnew.html",[],function(){return' <div>  \r\n    <div class="span2 align-right grey">\r\n        <span data-bind="text: selectionLabel"><span>\r\n    </div>   \r\n    \r\n    <!-- ko ifnot: isCreateNew() -->\r\n    <div class="span3 pad-left">\r\n        <div data-bind="chsnsingle: { options: selectOptions(), value: selectedValue, text: optionTextProp, idValue: optionIdValueProp, \r\n						label: optionsLabel, caption: \'Choose...\' , disabled: !isEnabled(),\r\n						isSearch: isSearch, stickeySearchItemText: AddNewOptionText, \r\n						isCancel: true, title: getSelectedValueText(), isFocused: isDropDownFocused, searchQueryText: searchQueryText}"></div>\r\n    </div> \r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: isCreateNew() -->    \r\n    <div class="span3 pad-left filters">\r\n        <input type="text" data-bind="value: getCustomValue(), \r\n					attr: {placeholder: placeholderText, title: getCustomValue()}, valueUpdate: \'afterkeydown\', hasFocus: isFocused,\r\n					event: { \'keyup\': checkEscape }" \r\n					style="width: 84%;" />\r\n		<i class="pointer close pull-right icon-cancel toggle" data-bind="click: cancelChanges"></i>\r\n    </div>\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/patients/sections/focus.areas.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patients-focus-areas-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Focus Problems</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing" data-phyautomation="patient-demographics-edit">Edit</a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen, with: problems">\r\n        <!-- ko if: length !== 0 -->\r\n        <ul class="column" data-phyautomation="patients-problems-left">\r\n            <li><em>Primary</em></li>\r\n            <!-- ko foreach: $parent.primaryProblems -->\r\n                <li class="push2 ellipsis" data-bind="text: name, attr: { \'title\': name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !$parent.isExpanded() && $parent.primaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...\r\n                </a>\r\n            </li>\r\n        </ul>\r\n        <ul class="column pad vertical" data-phyautomation="patients-problems-right">\r\n            <li><em>Secondary</em></li>\r\n            <!-- ko foreach: $parent.secondaryProblems -->\r\n                <li class="push2 ellipsis" data-bind="text: name, attr: { \'title\': name }"></li>\r\n            <!-- /ko -->\r\n            <li class="push2 grey" data-bind="visible: !$parent.isExpanded() && $parent.secondaryProblems().length === 5">\r\n                <a class="grey" data-bind="clickToggle: $parent.isExpanded" href="#">...</a>\r\n            </li>\r\n        </ul>\r\n        <!-- /ko -->\r\n        <!-- ko if: length === 0 -->\r\n        <em class="grey">No primary or secondary focus problems</em>\r\n        <!-- /ko -->\r\n    </div>\r\n</section>'}),n("text!views/patients/sections/goal.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: {triggers: goal}">\r\n    <div class="content" data-bind="with: goal">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis"><span data-bind="text: (name().length > 18 ? name().substring(0, 18) + \'...\' : name()), attr: { \'title\': name }"></span></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">\r\n                                    <a class="edit_goal icon-outset" href="#" data-bind="click: $parent.edit"><i class="icon-edit"></i></a>\r\n                                    <a class="delete_goal" href="#" data-bind="click: $parent.delete"><i class="icon-cancel"></i></a>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div class="accordion open">\r\n                                        <div class="span12 details">\r\n                                            <div class="status">\r\n                                                <div class="row pad-bottom rule" data-bind="visible: startDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Start Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: startDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="with: status">\r\n                                                    <div class="span6 grey">\r\n                                                        Status\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: name">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: targetValue">\r\n                                                    <div class="span6 grey">\r\n                                                        Target Value\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: targetValue">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: targetDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Target Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: targetDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: type">\r\n                                                    <div class="span6 grey">\r\n                                                        Type\r\n                                                    </div>\r\n                                                    <div class="span6">\r\n                                                        <span data-bind="with: type">\r\n                                                            <span data-bind="text: name"></span>\r\n                                                        </span>\r\n                                                        <span data-bind="if: !type()">-</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: focusAreaString() !== \'-\'">\r\n                                                    <div class="span6 grey">\r\n                                                        Focus Area(s)\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: focusAreaString, attr: { \'title\': focusAreaString }">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: programString">\r\n                                                    <div class="span6 grey">\r\n                                                        Program(s)\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: programString">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: source">\r\n                                                    <div class="span6 grey">\r\n                                                        Source\r\n                                                    </div>\r\n                                                    <div class="span6">\r\n                                                        <span data-bind="with: source">\r\n                                                            <span data-bind="text: name"></span>\r\n                                                        </span>\r\n                                                        <span data-bind="if: !source()">-</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: endDate">\r\n                                                    <div class="span6 grey">\r\n                                                        End Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="DateOrDash: endDate">\r\n                                                    </div>\r\n                                                </div>\r\n\r\n\r\n                                                <div class="row pad-bottom">\r\n                                                    <div class="span6 grey">\r\n                                                        # of related tasks\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: tasks().length">\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row pad-bottom">\r\n                                                    <div class="span6 grey">\r\n                                                        # of related interventions\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: interventions().length">\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div data-bind="foreach: customAttributes().sort($parent.alphabeticalOrderSort)">\r\n                                                    <div data-bind="compose: displayPath">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom filter-toggle" data-bind="click: $parent.toggleGoalDetailsExpanded, visible: details">\r\n                                                    <div class="span6 grey">\r\n                                                        Details\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: details">\r\n                                                    <!-- ko ifnot: $parent.isGoalDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only no-scroll muted" style="height: 6.5em;" rows="5" data-bind="text: details, attr:{ \'title\': details }, visible: details" readonly="readonly"></textarea>\r\n                                                    <a class="grey" data-bind="click: $parent.toggleGoalDetailsExpanded, visible: details" href="#">...</a>\r\n                                                    <!-- /ko -->\r\n                                                    <!-- ko if: $parent.isGoalDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only muted" data-bind="text: details, autoHeight: details, attr:{ \'title\': details }" readonly="readonly"></textarea>\r\n                                                    <!-- /ko -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="span12 transparent">-</div>\r\n                                        <div class="">\r\n                                            <div class="span12">\r\n                                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                                    Barriers\r\n                                                    <a class="accordion-toggle pull-right" data-bind="click: $parent.addBarrier">\r\n                                                        <i class="icon-plus"></i>\r\n                                                    </a>\r\n                                                </div>\r\n                                            </div>\r\n                                            <!-- ko foreach: barriers -->\r\n                                            <!-- ko compose: { model: \'viewmodels/patients/sections/barrier.details\', activationData: { barrier: $data  } } -->\r\n                                            <!-- /ko -->\r\n                                            <!-- /ko -->\r\n                                            <div class="span12" data-bind="visible: barriers().length === 0">\r\n                                                <div class="status line">\r\n                                                    <div class="name pad-icon-left">\r\n                                                        <div class="line-reset">\r\n                                                            <em class="grey">No barriers.</em>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/sections/goals.html",[],function(){return'<div class="content">\r\n    <!-- ko foreach: computedGoals -->\r\n        <!-- ko if: !isNew() -->\r\n            <section class="accordion" data-bind="css: { \'open\': isOpen }">\r\n                <div class="row accordion-toggle filter-toggle" data-bind="clickToggle: isOpen, css: { \'open\': isOpen }, css: { \'active\': $parent.activeGoal() === $data }">\r\n                    <h2 class="span12">\r\n                        <a class="pull-left">\r\n                            <i data-bind="css: status().iconClass"></i>\r\n                        </a>\r\n                        <a class="name">\r\n                            <span data-bind="text: name, attr: { \'title\': name }, css: status().textClass">\r\n                            </span>\r\n                        </a>\r\n                        <a data-bind="click: $parent.setActiveGoal.bind($parent), clickBubble: false, arrowMover: \'\'" class="icon filter-toggle pull-right" href="#" title="Goal Details">\r\n                            <i class="icon-info"></i>\r\n                        </a>\r\n                    </h2>\r\n                </div>\r\n                <div class="accordion-content" data-bind="if: isOpen()">\r\n                    <div class="span12 accordion" data-bind="css: { \'open\': isExpanded }">\r\n                        <header class="rule">\r\n                            <div class="span6">\r\n                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                    Tasks\r\n                                    <a class="accordion-toggle pull-right" data-bind="click: $parent.addTask">\r\n                                        <i class="icon-plus"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div class="span6 last">\r\n                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                    Interventions\r\n                                    <a class="accordion-toggle pull-right" data-bind="click: $parent.addIntervention">\r\n                                        <i class="icon-plus"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </header>\r\n                        <div class="task row">\r\n                            <div class="span6">\r\n                                <div class="row rule"></div>\r\n                                <!-- ko foreach: sortedTasks -->\r\n                                <div class="row rule filter-toggle" data-bind="css: { \'active\': $parents[1].activeTask() === $data }">\r\n                                    <div class="span12 details">\r\n                                        <div class="status line rule">\r\n                                            <div class="pull-left">\r\n                                                <i data-bind="css: status().iconClass"></i>\r\n                                            </div>\r\n                                            <div class="name pad-icon-left accordion-toggle" data-bind="click: $parents[1].setActiveTask.bind($parents[1])">\r\n                                                <div class="line-reset" data-bind="with: status">\r\n                                                    <!-- ko if: (name() !== \'Met\' && name() !== \'Abandoned\') -->\r\n                                                        <span data-bind="text: $parent.description, css: textClass"></span>\r\n                                                    <!-- /ko -->\r\n                                                    <!-- ko if: (name() === \'Met\' || name() === \'Abandoned\') -->\r\n                                                        <em>\r\n                                                            <span data-bind="text: $parent.description, css: textClass"></span>\r\n                                                            - <span data-bind="Date: $parent.closedDate, attr: { \'title\': $parent.closedDate }"></span>\r\n                                                        </em>\r\n                                                    <!-- /ko -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                                <!-- ko if: tasks().length === 0 -->\r\n                                <div class="intervention row rule">\r\n                                    <div class="details">\r\n                                        <div class="status line">\r\n                                            <div class="name pad-icon-left">\r\n                                                <div class="line-reset">\r\n                                                    <em class="grey">No tasks</em>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="span6 last">\r\n                                <div class="row rule"></div>\r\n                                <!-- ko foreach: sortedInterventions -->\r\n                                    <div class="row rule filter-toggle" data-bind="css: { \'active\': $parents[1].activeIntervention() === $data }, click: $parents[1].setActiveIntervention.bind($parents[1])">\r\n                                        <div class="span12 details">\r\n                                            <div class="status line rule">\r\n                                                <div class="pull-left" data-bind="with: status">\r\n                                                    <i data-bind="css: iconClass"></i>\r\n                                                </div>\r\n                                                <div class="line-reset" data-bind="with: status">\r\n                                                    <!-- ko if: name() !== \'Completed\' -->\r\n                                                        <span data-bind="text: $parent.description, css: textClass"></span>\r\n                                                    <!-- /ko -->\r\n                                                    <!-- ko if: name() === \'Completed\' -->\r\n                                                        <em>\r\n                                                            <span data-bind="text: $parent.description, css: textClass"></span>\r\n                                                            - <span data-bind="Date: $parent.closedDate, attr: { \'title\': $parent.closedDate }"></span>\r\n                                                        </em>\r\n                                                    <!-- /ko -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                <!-- /ko -->\r\n                                <!-- ko if: interventions().length === 0 -->\r\n                                <div class="intervention row rule">\r\n                                    <div class="details">\r\n                                        <div class="status line">\r\n                                            <div class="name pad-icon-left">\r\n                                                <div class="line-reset">\r\n                                                    <em class="grey">No interventions</em>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="pad-top">\r\n            </div>\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: computedGoals().length > 0 -->\r\n        <section class="accordion"></section>\r\n    <!-- /ko -->\r\n    <!-- ko if: computedGoals().length === 0 -->\r\n        <em class="grey">No goals match the criteria</em>\r\n    <!-- /ko -->\r\n</div>\r\n';
}),n("text!views/patients/sections/intervention.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: {triggers: intervention}">\r\n    <div class="content" data-bind="with: intervention">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis"><span data-bind="text: (description().length > 18 ? description().substring(0, 18) + \'...\' : description()), attr: { \'title\': description }"></span></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">\r\n                                    <a class="edit_intervention icon-outset" href="#" data-bind="click: $parent.editIntervention"><i class="icon-edit"></i></a>\r\n                                    <a class="delete_intervention" href="#" data-bind="click: $parent.deleteIntervention"><i class="icon-cancel"></i></a>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div class="intervention row rule">\r\n                                        <div class="details span12">\r\n                                            <div class="accordion-content pad">\r\n                                                <div class="row pad-bottom" data-bind="visible: dueDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Due Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: dueDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: startDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Start Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: startDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: closedDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Closed Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: closedDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="with: status">\r\n                                                    <div class="span6 grey">\r\n                                                        Status\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: name">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="with: category">\r\n                                                    <div class="span6 grey">\r\n                                                        Category\r\n                                                    </div>\r\n                                                    <div class="span6">\r\n                                                        <span data-bind="text: name"></span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="with: assignedTo">\r\n                                                    <div class="span6 grey">\r\n                                                        Assigned To\r\n                                                    </div>\r\n                                                    <div class="span6">\r\n                                                        <span data-bind="text: preferredName"></span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom filter-toggle" data-bind="click: $parent.toggleDetailsExpanded, visible: details">\r\n                                                    <div class="span6 grey">\r\n                                                        Details\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: details">\r\n                                                    <!-- ko ifnot: $parent.isDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only no-scroll muted" style="height: 6.5em;" rows="5" data-bind="text: details, attr:{ \'title\': details }, visible: details" readonly="readonly"></textarea>\r\n                                                    <a class="grey" data-bind="click: $parent.toggleDetailsExpanded, visible: details" href="#">...</a>\r\n                                                    <!-- /ko -->\r\n                                                    <!-- ko if: $parent.isDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only muted" data-bind="text: details, autoHeight: details, attr:{ \'title\': details }" readonly="readonly"></textarea>\r\n                                                    <!-- /ko -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="span12 transparent">-</div>\r\n                                        <div class="">\r\n                                            <div class="span12">\r\n                                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                                    Barriers\r\n                                                    <a class="filter-toggle pull-right" data-bind="click: $parent.addBarrier">\r\n                                                        <i class="icon-plus"></i>\r\n                                                    </a>\r\n                                                </div>\r\n                                            </div>\r\n                                            <!-- ko foreach: relatedBarriers -->\r\n                                            <!-- ko compose: { model: \'viewmodels/patients/sections/barrier.details\', activationData: { barrier: $data  } } -->\r\n                                            <!-- /ko -->\r\n                                            <!-- /ko -->\r\n                                            <div class="span12" data-bind="visible: relatedBarriers().length === 0">\r\n                                                <div class="status line">\r\n                                                    <div class="name pad-icon-left">\r\n                                                        <div class="line-reset">\r\n                                                            <em class="grey">No barriers.</em>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/sections/medication.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: {triggers: medication}">\n  <div class="content" data-bind="with: medication">\n    <div class="content-fill">\n      <div class="wrapper">\n        <div class="content">\n          <div class="header">\n            <div class="table-cell">\n              <header>\n                <h1 class="ellipsis"><span data-bind="text: (name().length > 18 ? name().substring(0, 18) + \'...\' : name()), attr: { \'title\': name }"></span></h1>\n                <div class="controls">\n                  <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\n                  </div>\n                </div>\n                <div class="options">\n                  <a class="edit_medication icon-outset" href="#" data-bind="click: $parent.edit, css: { \'disabled\': dataSource() !== \'Engage\' }"><i class="icon-edit"></i></a>\n                  <a class="delete_medication" href="#" data-bind="click: $parent.delete, css: { \'disabled\': dataSource() !== \'Engage\' }"><i class="icon-cancel"></i></a>\n                </div>\n              </header>\n            </div>\n          </div>\n          <div class="table-row">\n            <div class="table-cell">\n              <div class="body">\n                <div class="content">\n                  <div class="accordion open">\n                    <div class="span12 details">\n                      <div class="status">\n                        <div class="row pad-bottom" data-bind="with: status">\n                          <div class="span6 grey">\n                            Status\n                          </div>\n                          <div class="span6" data-bind="text: name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="with: refusalReason">\n                          <div class="span6 grey">\n                            Refusal Reason\n                          </div>\n                          <div class="span6" data-bind="text: name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: otherRefusalReason">\n                          <div class="span6 grey">\n                            Refusal Other\n                          </div>\n                          <div class="span6" data-bind="text: otherRefusalReason">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: computedSigCode() !== \'-\'">\n                          <div class="span10" data-bind="text: computedSigCode">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: (startDate() || endDate())">\n                          <div class="span6 grey">\n                            Dates\n                          </div>\n                          <div class="span6">\n                            <span data-bind="DateOrNothing: startDate"></span> -\n                            <!-- ko if: endDate -->\n                              <span data-bind="Date: endDate"></span>\n                            <!-- /ko -->\n                            <!-- ko ifnot: endDate -->\n                              current\n                            <!-- /ko -->\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: computedDuration">\n                          <div class="span6 grey">\n                            Duration\n                          </div>\n                          <div class="span3" data-bind="text: computedDuration">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: otherDuration">\n                          <div class="span6 grey">\n                            Duration Other\n                          </div>\n                          <div class="span6" data-bind="text: otherDuration">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="if: review">\n                          <div class="span6 grey">\n                            Review\n                          </div>\n                          <div class="span6" data-bind="text: review().name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: computedPrescribedBy">\n                          <div class="span6 grey">\n                            Prescribed By\n                          </div>\n                          <div class="span6" data-bind="text: computedPrescribedBy">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: computedOrderedBy">\n                          <div class="span6 grey">\n                            Ordered By\n                          </div>\n                          <div class="span6" data-bind="text: computedOrderedBy">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: computedRxInfo">\n                          <div class="span6 grey">\n                            Rx Info\n                          </div>\n                          <div class="span6" data-bind="text: computedRxInfo">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: pharmacy">\n                          <div class="span6 grey">\n                            Pharmacy\n                          </div>\n                          <div class="span6" data-bind="text: pharmacy">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: reason">\n                          <div class="span6 grey">\n                            Reason\n                          </div>\n                          <div class="span6" data-bind="text: reason">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: notes">\n                          <div class="span6 grey">\n                            Notes\n                          </div>\n                            <!-- ko ifnot: $parent.isNotesExpanded -->\n                                <div class="span12" data-bind="visible: notes">\n                                    <textarea data-bind="text: notes, attr: { \'title\': notes }" readonly="readonly" class="display-only no-scroll" rows="5"></textarea>\n                                    <a class="grey" data-bind="clickToggle: $parent.isNotesExpanded" href="#">...</a>\n                                </div>\n                                <!-- /ko -->\n                                <!-- ko if: $parent.isNotesExpanded -->\n                                <textarea data-bind="text: notes, autoHeight: notes, attr: { \'title\': notes }" readonly="readonly" class="display-only span12" ></textarea>\n                            <!-- /ko -->\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: source">\n                          <div class="span6 grey">\n                            Source\n                          </div>\n                          <div class="span6" data-bind="text: source().name">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: createdOn">\n                          <div class="span6 grey">\n                            Created\n                          </div>\n                          <div class="span6" data-bind="Date: createdOn">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: updatedOn">\n                          <div class="span6 grey">\n                            Updated\n                          </div>\n                          <div class="span6" data-bind="Date: updatedOn">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: dataSource">\n                          <div class="span6 grey">\n                            Data Source\n                          </div>\n                          <div class="span6" data-bind="text: dataSource">\n                          </div>\n                        </div>\n                        <div class="row pad-bottom" data-bind="visible: originalDataSource">\n                          <div class="span6 grey">\n                            Original Data Source\n                          </div>\n                          <div class="span6" data-bind="text: originalDataSource">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),n("text!views/patients/sections/medication.edit.html",[],function(){return'<div class="force-down" data-bind="with: newPatientMedication, css:{\'body\': medication !== undefined}">\r\n    <div class="row">\r\n        <div class="span12 line">\r\n            <div class="row">\r\n                <div class="span2 align-right grey">\r\n                    &nbsp\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.categories, value: category, text: \'name\', label: \'medication-category\', caption: \'Choose...\' }"></div>\r\n                </div>\r\n                <div class="span2 align-right grey">\r\n                    Type:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.types, value: type, text: \'name\', label: \'medication-type\', caption: \'Choose...\', isRequired: true }, css: { \'invalid\': !type() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span2 align-right grey">\r\n                    Name:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n					<div class="row">\r\n                    <!-- ko if: isNew -->\r\n                        <input class="span12" type="text" data-bind="typeahead: { name: \'medications\', taOptions: $parent.medicationBloodhound, displayKey: \'DisplayName\' }, value: name, valueUpdate: \'afterkeydown\', initOptions: { hint: false, highlight: true, minLength: 3, overrideSelected: $parent.overrideSelected }, showResultsCount: $parent.resultsMessage, css: { \'invalid\': !$parent.canAdd() }" placeholder="Search Medications" />\r\n                    <!-- /ko -->\r\n                    <!-- ko ifnot: isNew -->\r\n                        <span><pre data-bind="text: name"></pre></span>\r\n                    <!-- /ko -->\r\n					</div>\r\n                </div>\r\n                <div class="span2 align-right grey">\r\n                    Status:\r\n                </div>\r\n                <div class="span3 pad-left">\r\n                    <div data-bind="chsnsingle: { options: $parent.statuses, value: status, text: \'name\', label: \'medication-status\', caption: \'Choose...\' }"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Source:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'medication-source\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top divider filters">\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData:\r\n                { selectedValue: strength,\r\n					optionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewStrengthValue,\r\n					isEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.strengths,\r\n                    selectionLabel: \'Strength\',\r\n                    optionsLabel: \'medication-strength\',\r\n                    placeholderText: \'Enter new strength\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n					isAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData:\r\n                { selectedValue: route,\r\n                    optionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewRouteValue,\r\n                    isEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.routes,\r\n                    selectionLabel: \'Route\',\r\n                    optionsLabel: \'medication-route\',\r\n                    placeholderText: \'Enter new route\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n                    isAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n        <i class="pointer icon-cancel pull-right pad-right toggle" data-bind="click: $parent.resetDropdowns"></i>\r\n    </div>\r\n    <div class="row pad-top">\r\n\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData:\r\n                { selectedValue: form,\r\n					optionIdValueProp: \'Text\',\r\n                    isCreateNew: $parent.isAddingNewFormValue,\r\n					isEditModeOnly: $parent.isNewMedicationName,\r\n                    isCreateNewEnabled: $parent.isCreateNewEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.dosageForms,\r\n                    selectionLabel: \'Dose Form\',\r\n                    optionsLabel: \'dosage-form\',\r\n                    placeholderText: \'Enter new dose form\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n					isAddNewOption: true\r\n                }} -->\r\n        <!-- /ko -->\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Quantity:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input type="text" data-bind="value: freqQuantity" />\r\n        </div>\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/dropdown.w.addnew\' , activationData:\r\n                { selectedValue: frequency,\r\n                    isCreateNew: $parent.isAddingNewFrequencyValue,\r\n                    isCreateNewEnabled: $parent.isCreateNewFrequencyEnabled,\r\n                    isEnabled: $parent.isDropdownEnabled,\r\n                    selectOptions: $parent.frequency,\r\n                    optionTextProp: \'name\',\r\n                    selectionLabel: \'Frequency\',\r\n                    optionsLabel: \'medication-freq-howoften\',\r\n                    placeholderText: \'Enter new frequency\',\r\n                    AddNewOptionText: $parent.addNewOptionText,\r\n                    isAddNewOption: false,\r\n                    newCustomValue: customFrequency\r\n                }} -->\r\n        <!-- /ko -->\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <div class="span2 align-right grey">\r\n            Ordered By:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input type="text" data-bind="value: orderedBy" maxlength="50" />\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Ordered Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n                {\r\n                    observableDateTime: orderedDate,\r\n                    dateErrors: orderedDateErrors, showInvalid: $parent.setInvalidOrderedDate,\r\n                    datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'orderedDate\'\r\n                }\r\n            } -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Rx Number:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input type="text" data-bind="value: rxNumber" maxlength="50" />\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Rx Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n                {\r\n                    observableDateTime: rxDate,\r\n                    dateErrors: rxDateErrors, showInvalid: $parent.setInvalidRxDate,\r\n                    datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'rxDate\'\r\n                }\r\n            } -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Prescribed By:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input type="text" data-bind="value: prescribedBy" maxlength="50" />\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Prescribed Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n                {\r\n                    observableDateTime: prescribedDate,\r\n                    dateErrors: prescribedDateErrors, showInvalid: $parent.setInvalidPrescribedDate,\r\n                    datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'prescribedDate\'\r\n                }\r\n            } -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Pharmacy:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input type="text" data-bind="value: pharmacy" maxlength="500" />\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <div class="span2 align-right grey">\r\n            Start Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n                {\r\n                    observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: $parent.setInvalidStartDate,\r\n                    datepickerOptions:{}, datepickerDynamicOptions: { maxDate: endDate }, dateName: \'startDate\'\r\n                }\r\n            } -->\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            End Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n                {\r\n                    observableDateTime: endDate, dateErrors: endDateErrors, showInvalid: $parent.setInvalidEndDate,\r\n                    datepickerOptions:{}, datepickerDynamicOptions: {minDate: startDate}, dateName: \'endDate\'\r\n                }\r\n            } -->\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Duration:\r\n        </div>\r\n        <div class="span1 pad-left">\r\n            <input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration,\r\n                css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }" maxlength="50"></input>\r\n        </div>\r\n        <div class="span2">\r\n            <div data-bind="chsnsingle: { options: $parent.durationUnits, value: durationUnitId, text: \'name\', label: \'medication-duration-unit\', caption: \'Choose...\', idValue: \'id\' }"></div>\r\n        </div>\r\n        <div class="span2 align-right grey" data-bind="if: otherDuration">\r\n            Other Duration:\r\n        </div>\r\n        <div class="span3 pad-left" data-bind="if: otherDuration">\r\n            <input type="text" data-bind="value: otherDuration" maxlength="50" />\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Review:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parent.medicationReviews, value: reviewId, idValue: \'id\', text: \'name\', label: \'medication-review\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="visible: $parent.showRefusalReason">\r\n        <div class="span2 align-right grey">\r\n            Refusal Reason:\r\n        </div>\r\n        <div class="span5 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parent.refusalReasons, value: refusalReasonId, idValue: \'id\', text: \'name\', label: \'medication-refusal-reason\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n        <div class="span1 align-right grey" data-bind="if: $parent.showOtherReason">\r\n            Other Reason:\r\n        </div>\r\n        <div class="span3 pad-left" data-bind="if: $parent.showOtherReason">\r\n            <input type="text" data-bind="value: otherRefusalReason" maxlength="100" />\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">Reason:</div>\r\n        <div class="span8 pad-left">\r\n            <input data-bind="value: reason" placeholder="reason for medication" maxlength="250" type="text" />\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span3 grey">\r\n            Notes:\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span12">\r\n            <textarea data-bind="value: notes" maxlength="1000"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Created On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: createdOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Updated On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: updatedOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            System:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="text: systemName">\r\n        </div>\r\n    </div>\r\n</div>';
}),n("text!views/patients/sections/medications.html",[],function(){return'<div class="content">\r\n    <div class="row">\r\n        <div class="span1 grey">\r\n            Type\r\n        </div>\r\n        <div class="span2 grey">\r\n            Name\r\n        </div>\r\n        <div class="span2 grey">\r\n            Strength\r\n        </div>\r\n        <div class="span3 grey">\r\n            SIG\r\n        </div>\r\n        <div class="span3 grey">\r\n            Reason\r\n        </div>\r\n        <div class="span1"></div>\r\n    </div>\r\n    <div class="row divider">\r\n        <div class="span1 icon-otc"\r\n        style="font-style: italic">\r\n        </div>\r\n        <div class="span2">\r\n            <a class="edit" href="#">Aspirin</a>\r\n        </div>\r\n        <div class="span2">\r\n            80 mg\r\n        </div>\r\n        <div class=\r\n        "span3 ellipsis">\r\n            Take One Tablet Daily\r\n        </div>\r\n        <div class="span3">\r\n            Heart Attack Protection\r\n        </div>\r\n        <div class="span1">\r\n            <a class="edit hover-toggle grey fa fa-lg fa-pencil" href="#" style="font-style: italic"></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/sections/medications.search.html",[],function(){return"<div></div>"}),n("text!views/patients/sections/notes.html",[],function(){return'<section class="accordion" data-bind="css: { \'open\': isOpen() }, with: group">\r\n    <a data-bind="clickToggle: $parent.isOpen" href="#">\r\n        <h3 class="row line grey accordion-toggle" data-bind="text: Name, attr: { \'title\': Name }"></h3>\r\n    </a>\r\n    <!-- ko foreach: Notes -->\r\n    <div class="row line filter-toggle" data-bind="click: $parents[1].setActiveNote, css: { \'active\': $parents[1].activeNote() === $data }, visible: $parents[1].isOpen">\r\n        <div class="span2 pad-left small grey pull-left" data-bind="Time: createdOn"></div>\r\n        <div class="span2 grey ellipsis">\r\n            <span data-bind="with: type">\r\n                <span data-bind="text: name, attr:{title: name}"></span>\r\n            </span>\r\n            <span data-bind="if: !type()">-</span>\r\n        </div>\r\n        <div class="span5 ellipsis" data-bind="text: displayText, attr: { \'title\': text }"></div>\r\n        <div class="span3 grey ellipsis"><span data-bind="with: createdBy"><span data-bind="text: preferredName, attr: { \'title\': preferredName }"></span></span></div>        \r\n    </div>\r\n    <!-- /ko -->\r\n</section>'}),n("text!views/patients/sections/problems.list.html",[],function(){return'<div>\r\n	<div class="row">\r\n		<div class="span3">\r\n			<strong>Name</strong>\r\n		</div>\r\n		<div class="span2">\r\n			<strong>Display</strong>\r\n		</div>\r\n		<div class="span3">\r\n			<strong>Start Date</strong>\r\n		</div>\r\n		<div class="span3">\r\n			<strong>State</strong>\r\n		</div>\r\n		<div class="span1">\r\n		</div>\r\n	</div>\r\n	<!-- ko foreach: computedProblemObservations -->\r\n		<!-- ko compose: "templates/focusproblem.edit.html" -->\r\n		<!-- /ko -->\r\n	<!-- /ko -->\r\n</div>'}),n("text!views/patients/sections/programs.html",[],function(){return'<div data-bind="foreach: computedPrograms">\r\n    <section class="accordion" data-bind="css: { \'open\': isOpen() }">\r\n        <div class="row accordion-toggle" data-bind="click: $parent.toggleOpen">			\r\n			<h2 class="span12 ellipsis">\r\n				<div data-bind="if: (elementState() == 5 || elementState() == 6)" class="pull-left">  \r\n					<i data-bind="css: { \'icon-check\': elementState() == 5, \'icon-warning\': elementState() == 6 }" ></i>\r\n				</div>\r\n                <a href="#" data-bind="text: displayName, clickBubble: false" >\r\n				</a>								\r\n                <a data-bind="click: $parent.setActiveProgram, clickBubble: false, css: { \'active\': $parent.activeProgram() === $data }, arrowMover: \'\'" class="icon filter-toggle pull-right" href="#" title="Program Details">\r\n                    <i class="icon-info"></i>\r\n                </a>\r\n            </h2>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: isOpen">\r\n            <table class="goal-action">\r\n                <tbody>\r\n                    <tr>\r\n                        <th class="filters">\r\n                            <i class="pointer toggle" data-bind="css: allModulesOpen() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\', click: $parent.toggleAllExpanded"></i>\r\n                            Modules\r\n                        </th>\r\n                        <th>\r\n                          <span class="span9">Action</span>\r\n                          <span class="span1"><i class="icon-priority-empty large grey-darker" stye="font-size: 24px;"></i></span>\r\n                          <span class="span1"><i class="fa fa-spinner lightestblue" style="font-size: 17px; width: 25px;"></i></span>\r\n                          <span class="span1"><i class="icon-check green" stye="font-size: 20px;"></i></span>\r\n                        </th>\r\n                    </tr>\r\n                    <!-- ko foreach: modules -->\r\n                    <tr data-bind="visible: enabled() === true">\r\n                        <td class="filter-toggle module" data-bind="clickToggle: isOpen, clickBubble: false, css: { \'active\': $parents[1].activeModule() === $data }, arrowMover: \'\'">\r\n                            <span class="image-container span1">\r\n                                <!-- ko if: completed() === true -->\r\n                                <i class="icon-check green"></i>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <span data-bind="with: name" class="span9">\r\n                                <!-- ko if: $parent.completed() === true -->\r\n                                <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em><em> - <span data-bind="Date: $parent.dateCompleted"></span></em>\r\n                                <!-- /ko -->\r\n                                <!-- ko if: $parent.completed() === false -->\r\n                                <span data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <span class="details pull-right" data-bind="click: $parents[1].setActiveModule, clickBubble: false">\r\n                                <i class="icon-info"></i>\r\n                            </span>\r\n                        </td>\r\n                        <td class="flush">\r\n                            <!-- ko if: isOpen -->\r\n                            <table class="nowrap">\r\n                                <tbody data-bind="foreach: actions().sort($root.alphabeticalOrderSort)">\r\n                                    <tr class="filter-toggle" data-bind="css: { \'active\': $data === $parents[2].activeAction(), \'dirty\': hasChanges() }, visible: !archived() && enabled()">\r\n                                        <td class="image-container" data-bind="click: $parents[2].setActiveAction, arrowMover: \'\'">\r\n                                            <!-- ko if: hasChanges() -->\r\n                                            <i data-bind="attr: { class: (isSaving() ? \'fa-spin\' : \'\') + \' fa fa-spinner lightestblue\' }" />\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: (!hasChanges() && completed() === true)  -->\r\n                                            <i class="icon-check green"></i>\r\n                                            <!-- /ko -->\r\n                                        </td>\r\n                                        <td class="ellipsis" data-bind="click: $parents[2].setActiveAction, with: name, arrowMover: \'\'">\r\n                                            <!-- ko if: $parent.enabled() === false || $parent.completed() === true && !$parent.isSaving() || $parent.completed() === true && !$parent.hasChanges() && $parent.isSaving() -->\r\n                                                <em class="grey" data-bind="text: $data, attr: { \'title\': $data }"></em>\r\n                                                <!-- ko if: $parent.completed() === true -->\r\n                                                <em><span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span> - <span data-bind="Date: $parent.dateCompleted, attr: { \'title\': $parent.dateCompleted }"></span></em>\r\n                                                <!-- /ko -->\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: $parent.enabled() === true && $parent.completed() === false && !$parent.hasChanges() -->\r\n                                                <span data-bind="text: $data, attr: { \'title\': $data }"></span> <span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span>\r\n                                            <!-- /ko -->\r\n                                            <!-- ko if: $parent.hasChanges() -->\r\n                                                <strong class="inprogress" ><span data-bind="text: $data, attr: { \'title\': $data }"></span> <span data-bind="text: \'(\' + $parent.history().length + \')\', visible: $parent.history().length > 0"></span></strong>\r\n                                            <!-- /ko -->\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            <!-- /ko -->\r\n                            <!-- ko if: !isOpen() -->\r\n                            <div class="span12 filter-toggle pad-left" data-bind="clickToggle: isOpen">\r\n                                <div class="row">\r\n                                  <span class="span9 transparent">-</span>\r\n                                  <span class="span1" data-bind="text: notStartedActionsCount, css: { \'transparent\': notStartedActionsCount() === \'-\' }"></span>\r\n                                  <span class="span1" data-bind="text: openActionsCount, css: { \'transparent\': openActionsCount() === \'-\' }"></span>\r\n                                  <span class="span1 grey" data-bind="text: completeActionsCount, css: { \'transparent\': completeActionsCount() === \'-\' }"></span>\r\n                                </div>\r\n                            </div>\r\n                            <!-- /ko -->\r\n                        </td>\r\n                    </tr>\r\n                    <!-- /ko -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </section>\r\n</div>\r\n<div data-bind="visible: computedPrograms().length === 0">\r\n    <section class="accordion open">\r\n        <div class="row accordion-toggle">\r\n            <h2>\r\n                <a></a>\r\n            </h2>\r\n        </div>\r\n        <div class="accordion-content">\r\n            <table class="goal-action">\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <em class="grey">No programs match the criteria.</em>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </section>\r\n</div>'}),n("text!views/patients/sections/recent.individuals.html",[],function(){return'<div class="pad-top" data-bind="foreach: currentUser().computedRecentIndividuals">	\r\n    <div class="row ellipsis" data-bind="click: $parent.choosePatient, css: { \'filter-toggle active strong\': $parent.selectedPatient() === $data  }">\r\n        <div class="columns patient-list">\r\n            <div class="column ellipsis">\r\n                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n            </div>\r\n            <div class="column ellipsis">\r\n                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/sections/status.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patient-status-pane">\r\n    <div class="row line accordion-toggle">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">Status</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: toggleEditing, text: !isEditing() ? \'Edit\' : \'Cancel\'"></a>\r\n    </div>\r\n    <div class="accordion-content columns" data-bind="visible: isOpen, with: selectedPatient">\r\n        <div class="column">\r\n            <div class="row">           \r\n                <div class="span4 grey">\r\n                    Status\r\n                </div>\r\n                <div class="span8">				\r\n                    <span data-bind="with: patientStatus">\r\n						<span data-bind="text: name" data-phyautomation="status"></span>\r\n					</span>                    \r\n                </div>\r\n            </div>\r\n			<div class="row" data-bind="visible: (statusId() !== \'1\')">           \r\n                <div class="span4 grey">\r\n                    Reason\r\n                </div>\r\n                <div class="span8">				\r\n                    <span data-bind="with: patientStatusReason">\r\n						<span data-bind="text: name" data-phyautomation="reason"></span>\r\n					</span>                    \r\n                </div>\r\n            </div>\r\n			<div class="row">           \r\n                <div class="span4 grey">\r\n                    System\r\n                </div>\r\n                <div class="span8">					\r\n					<span data-bind="text: statusDataSource || \'N/A\'" data-phyautomation="source"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>'}),n("text!views/patients/sections/system.ids.html",[],function(){return'<section class="accordion hoverable open" data-phyautomation="patients-system-ids-pane">\r\n    <div class="row line accordion-toggle open">\r\n        <strong class="ellipsis" data-bind="clickToggle: isOpen">IDs</strong>\r\n        <a class="edit hover-toggle" href="#" data-bind="click: editSystemIds">Edit</a>\r\n    </div>\r\n    <ul class="accordion-content columns" data-bind="visible: isOpen">\r\n        <ul class="column">\r\n			<!-- ko foreach: computedPatientSystemsDisplay -->\r\n			<div data-bind="visible: (Number(statusId()) === 1)">\r\n				<li class="pad-bottom ellipsis">\r\n					<span data-bind="with: system">\r\n						<span class="" data-bind="text: displayLabel, attr: { title: (displayLabel() + \': \' + $parent.value()) }" style="overflow: hidden; text-overflow: ellipsis;"></span>\r\n					</span>: <span class="" data-bind="text: value, attr: { title: value }" style="white-space: pre;"></span>\r\n				</li>\r\n			</div>\r\n			<!-- /ko -->\r\n			<li class="grey" data-bind="visible: showEllipsis">\r\n				<a class="grey" data-bind="clickToggle: isExpanded" href="#">...</a>\r\n			</li>\r\n        </ul>		\r\n    </ul>\r\n</section>'}),n("text!views/patients/sections/task.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: {triggers: task}">\r\n    <div class="content" data-bind="with: task">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis"><span data-bind="text: (description().length > 18 ? description().substring(0, 18) + \'...\' : description()), attr: { \'title\': description }"></span></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">\r\n                                    <a class="edit_task icon-outset" href="#" data-bind="click: $parent.editTask"><i class="icon-edit"></i></a>\r\n                                    <a class="delete_task" href="#" data-bind="click: $parent.deleteTask"><i class="icon-cancel"></i></a>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div class="row rule">\r\n                                        <div class="span12 details">\r\n                                            <div class="accordion-content pad">\r\n                                                <div class="row pad-bottom" data-bind="visible: startDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Start Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="DateOrDash: startDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: closedDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Closed Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="Date: closedDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="with: status">\r\n                                                    <div class="span6 grey">\r\n                                                        Status\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: name">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: targetValue">\r\n                                                    <div class="span6 grey">\r\n                                                        Target Value\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="text: targetValue() ? targetValue() : \'-\'">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: targetDate">\r\n                                                    <div class="span6 grey">\r\n                                                        Target Date\r\n                                                    </div>\r\n                                                    <div class="span6" data-bind="DateOrDash: targetDate">\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom filter-toggle" data-bind="click: $parent.toggleDetailsExpanded, visible: details">\r\n                                                    <div class="span6 grey">\r\n                                                        Details\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row pad-bottom" data-bind="visible: details">\r\n                                                    <!-- ko ifnot: $parent.isDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only no-scroll muted" style="height: 6.5em;" rows="5" data-bind="text: details, attr:{ \'title\': details }, visible: details" readonly="readonly"></textarea>\r\n                                                    <a class="grey" data-bind="click: $parent.toggleDetailsExpanded, visible: details" href="#">...</a>\r\n                                                    <!-- /ko -->\r\n                                                    <!-- ko if: $parent.isDetailsExpanded -->\r\n                                                    <textarea class="span12 display-only muted" data-bind="text: details, autoHeight: details, attr:{ \'title\': details }" readonly="readonly"></textarea>\r\n                                                    <!-- /ko -->\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div class="span12 transparent">-</div>\r\n                                        <div class="">\r\n                                            <div class="span12">\r\n                                                <div class="large grey muted line pad-horizontal pad-icon-left">\r\n                                                    Barriers\r\n                                                    <a class="filter-toggle pull-right" data-bind="click: $parent.addBarrier">\r\n                                                        <i class="icon-plus"></i>\r\n                                                    </a>\r\n                                                </div>\r\n                                            </div>\r\n                                            <!-- ko foreach: relatedBarriers -->\r\n                                            <!-- ko compose: { model: \'viewmodels/patients/sections/barrier.details\', activationData: { barrier: $data  } } -->\r\n                                            <!-- /ko -->\r\n                                            <!-- /ko -->\r\n                                            <div class="span12" data-bind="visible: relatedBarriers().length === 0">\r\n                                                <div class="status line">\r\n                                                    <div class="name pad-icon-left">\r\n                                                        <div class="line-reset">\r\n                                                            <em class="grey">No barriers.</em>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/tabs/action.details.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeAction">\r\n    <div class="fullscreen-span6">\r\n        <h4 class="line short pull-left pad-right fullscreen-only">Current</h4>\r\n        <div class="row">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                    <h3>Action Description</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                    <div class="column">\r\n                        <!-- ko ifnot: description() -->\r\n                        <em class="grey">No description available</em>\r\n                        <!-- /ko -->\r\n                        <div class="row pad-top">\r\n                            <!-- ko if: description() -->\r\n                            <p data-bind="text: description"></p>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <section class="accordion hoverable">\r\n                <div class="row accordion-toggle">\r\n                    <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                        <h3>Individual Attributes</h3>\r\n                    </div>\r\n                    <div class="span1">\r\n                        <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                    </div>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                    <div>\r\n                        <div class="column">\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned By:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned To:</span>\r\n                                </div>\r\n                                <!-- ko if: assignToId() -->\r\n                                <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                                <!-- /ko -->\r\n                                <!-- ko ifnot: assignToId() -->\r\n                                <div class="span9"><em class="grey">Unassigned</em></div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="row pad-top divider">\r\n                                <div class="span3 align-left">\r\n                                    <span>Action State:</span>\r\n                                </div>\r\n                                <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                                <!-- <div class="span9" data-bind="text: elementStateModel().name"></div> -->\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Start Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>End Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <!-- <div class="row pad-top divider">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                    <h3>Action Attributes</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-left">\r\n                            <span>Authored By:</span>\r\n                        </div>\r\n                        <div class="span9" data-bind="text: authoredBy"></div>\r\n                    </div>\r\n                    <div class="row pad-top divider">\r\n                        <div class="span3 align-left">\r\n                            <span>Action Version:</span>\r\n                        </div>\r\n                        <div class="span9"><span data-bind="text: actionVersion"></span> <span data-bind="if: actionVersionUpdatedOn">(<span data-bind="Date: actionVersionUpdatedOn"></span>)</span></div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div> -->\r\n        <div class="row pad-top divider" data-bind="with: $parent.computedObjectives">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].objectivesSectionOpen">\r\n                    <h3>Objectives</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].objectivesSectionOpen">\r\n                    <table class="goal-action" data-bind="if: showing">\r\n                        <colgroup>\r\n                            <col span="1" style="width: 40%">\r\n                            <col span="1" style="width: 40%" >\r\n                            <col span="1" style="width: 20%" >\r\n                        </colgroup>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>\r\n                                    <strong>Category</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Objective</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Target</strong>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="foreach: $data">\r\n                            <tr>\r\n                                <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                                <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                                <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <!-- ko if: !showing() -->\r\n                    <em class="grey">No objectives set.</em>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider"></div>\r\n    </div>\r\n    <div class="fullscreen-only span6 muted" data-bind="with: $parent.selectedHistoricalAction">\r\n        <h4 class="line short pull-left pad-right">History</h4>\r\n        <div class="span6" data-bind="chsnsingle: { options: $parents[1].availableHistoricalActions, value: $parents[1].selectedHistoricalAction, text: \'formattedCompletedDate\', label: \'action-actions\', caption: \'Choose...\' }"></div>        \r\n        <div class="row">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].descriptionSectionOpen">\r\n                    <h3>Action Description</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].descriptionSectionOpen">\r\n                    <div class="column">\r\n                        <!-- ko ifnot: description() -->\r\n                        <em class="grey">No description available</em>\r\n                        <!-- /ko -->\r\n                        <div class="row pad-top">\r\n                            <!-- ko if: description() -->\r\n                            <p data-bind="text: description"></p>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider">\r\n            <section class="accordion hoverable">\r\n                <div class="row accordion-toggle">\r\n                    <div class="span11"  data-bind="clickToggle: $parents[1].individualAttributesSectionOpen">\r\n                        <h3>Individual Attributes</h3>\r\n                    </div>\r\n                    <div class="span1"><!-- \r\n                        <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a> -->\r\n                    </div>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[1].individualAttributesSectionOpen">\r\n                    <div>\r\n                        <div class="column">\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned By:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Assigned To:</span>\r\n                                </div>\r\n                                <!-- ko if: assignToId() -->\r\n                                <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                                <!-- /ko -->\r\n                                <!-- ko ifnot: assignToId() -->\r\n                                <div class="span9"><em class="grey">Unassigned</em></div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div class="row pad-top divider">\r\n                                <div class="span3 align-left">\r\n                                    <span>Action State:</span>\r\n                                </div>\r\n                                <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                                <!-- <div class="span9" data-bind="text: elementStateModel().name"></div> -->\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>Start Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                            </div>\r\n                            <div class="row pad-top">\r\n                                <div class="span3 align-left">\r\n                                    <span>End Date:</span>\r\n                                </div>\r\n                                <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider" data-bind="with: $parents[1].historicalComputedObjectives">\r\n            <section class="accordion">\r\n                <div class="row accordion-toggle" data-bind="clickToggle: $parents[2].objectivesSectionOpen">\r\n                    <h3>Objectives</h3>\r\n                </div>\r\n                <div class="accordion-content" data-bind="visible: $parents[2].objectivesSectionOpen">\r\n                    <table class="goal-action" data-bind="if: showing">\r\n                        <colgroup>\r\n                            <col span="1" style="width: 40%">\r\n                            <col span="1" style="width: 40%" >\r\n                            <col span="1" style="width: 20%" >\r\n                        </colgroup>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>\r\n                                    <strong>Category</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Objective</strong>\r\n                                </th>\r\n                                <th>\r\n                                    <strong>Target</strong>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="foreach: $data">\r\n                            <tr>\r\n                                <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                                <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                                <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <!-- ko if: !showing() -->\r\n                    <em class="grey">No objectives set.</em>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="row pad-top divider"></div>\r\n    </div>\r\n    <div class="fullscreen-only span6" data-bind="visible: !$parent.selectedHistoricalAction()">\r\n        <em>No historical data</em>\r\n    </div>\r\n</div>';
}),n("text!views/patients/tabs/action.steps.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeAction">\r\n	<div class="fullscreen-span6">\r\n    <h4 class="line short pull-left pad-right fullscreen-only">Current</h4>\r\n    <!-- ko foreach: computedPath -->\r\n        <!-- ko compose: stepType().path -->\r\n        <!-- /ko -->\r\n    <!-- /ko -->\r\n	</div>\r\n	<div class="fullscreen-only span6 muted" data-bind="with: $parent.selectedHistoricalAction">\r\n        <h4 class="line short pull-left pad-right">History</h4>\r\n        <div class="span6" data-bind="chsnsingle: { options: $parents[1].availableHistoricalActions, value: $parents[1].selectedHistoricalAction, text: \'formattedCompletedDate\', label: \'action-actions\', caption: \'Choose...\' }"></div>        \r\n        <!-- ko foreach: computedPath -->\r\n            <!-- ko compose: stepType().path -->\r\n            <!-- /ko -->\r\n        <!-- /ko -->\r\n	</div>\r\n    <div class="fullscreen-only span6" data-bind="visible: !$parent.selectedHistoricalAction()">\r\n        <em>No historical data</em>\r\n    </div>\r\n</div>'}),n("text!views/patients/tabs/module.details.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeModule">\r\n    <div class="row">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                <h3>Module Description</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                <div class="column">\r\n                    <!-- ko ifnot: description() -->\r\n                    <em class="grey">No description available</em>\r\n                    <!-- /ko -->\r\n                    <div class="row pad-top">\r\n                        <!-- ko if: description() -->\r\n                        <p data-bind="text: description"></p>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion hoverable">\r\n            <div class="row accordion-toggle">\r\n                <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                    <h3>Individual Attributes</h3>\r\n                </div>\r\n                <div class="span1">\r\n                    <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                </div>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                <div>\r\n                    <div class="column">\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned By:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned To:</span>\r\n                            </div>\r\n                            <!-- ko if: assignToId() -->\r\n                            <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                            <!-- /ko -->\r\n                            <!-- ko ifnot: assignToId() -->\r\n                            <div class="span9"><em class="grey">Unassigned</em></div>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Module State:</span>\r\n                            </div>\r\n                            <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Start Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>End Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <!-- <div class="row pad-top divider">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                <h3>Module Attributes</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Authored By:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: authoredBy"></div>\r\n                </div>\r\n                <div class="row pad-top divider">\r\n                    <div class="span3 align-left">\r\n                        <span>Module Version:</span>\r\n                    </div>\r\n                    <div class="span9"><span data-bind="text: moduleVersion"></span> <span data-bind="if: moduleVersionUpdatedOn">(<span data-bind="Date: moduleVersionUpdatedOn"></span>)</span></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>     -->\r\n    <div class="row pad-top divider" data-bind="with: $parent.computedObjectives">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parents[1].objectivesSectionOpen">\r\n                <h3>Objectives</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parents[1].objectivesSectionOpen">\r\n                <table class="goal-action" data-bind="if: showing">\r\n                    <colgroup>\r\n                        <col span="1" style="width: 40%">\r\n                        <col span="1" style="width: 40%" >\r\n                        <col span="1" style="width: 20%" >\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>\r\n                                <strong>Category</strong>\r\n                            </th>\r\n                            <th>\r\n                                <strong>Objective</strong>\r\n                            </th>\r\n                            <th>\r\n                                <strong>Target</strong>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody data-bind="foreach: $data">\r\n                        <tr>\r\n                            <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                            <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                            <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- ko if: !showing() -->\r\n                <em class="grey">No objectives set.</em>\r\n                <!-- /ko -->\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider"></div>\r\n</div>'}),n("text!views/patients/tabs/module.objectives.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n</div>'}),n("text!views/patients/tabs/program.details.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }, with: activeProgram">\r\n    <div class="row">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.descriptionSectionOpen">\r\n                <h3>Program Description</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.descriptionSectionOpen">\r\n                <div class="column">\r\n                    <!-- ko ifnot: description() -->\r\n                    <em class="grey">No description available</em>\r\n                    <!-- /ko -->\r\n                    <div class="row pad-top">\r\n                        <!-- ko if: description() -->\r\n                        <p data-bind="text: description"></p>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                    <!-- ko if: eligibilityRequirements() || eligibilityDatesStatement() -->\r\n                    <div class="row">\r\n                        <h3>Eligibility Requirements</h3>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <p data-bind="text: eligibilityRequirements"></p>\r\n                        <p data-bind="text: eligibilityDatesStatement"></p>\r\n                    </div>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion hoverable">\r\n            <div class="row accordion-toggle">\r\n                <div class="span11"  data-bind="clickToggle: $parent.individualAttributesSectionOpen">\r\n                    <h3>Individual Attributes</h3>\r\n                </div>\r\n                <div class="span1">\r\n                    <a class="pull-right hover-toggle" href="#" data-bind="visible: $parent.canEdit, click: $parent.toggleModalShowing">Edit</a>\r\n                </div>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.individualAttributesSectionOpen">\r\n                <div>\r\n                    <div class="column">\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned By:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Assigned To:</span>\r\n                            </div>\r\n                            <!-- ko if: assignToId() -->\r\n                            <div class="span9" data-bind="with: assignTo"><span data-bind="text: preferredName"></span></div>\r\n                            <!-- /ko -->\r\n                            <!-- ko ifnot: assignToId() -->\r\n                            <div class="span9"><em class="grey">Unassigned</em></div>\r\n                            <!-- /ko -->\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Program State:</span>\r\n                            </div>\r\n                            <div class="span9"><span data-bind="text: elementStateModel().name"></span><span data-bind="if: stateUpdatedOn"> as of <span data-bind="DateOrNothing: stateUpdatedOn"></span></span></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Start Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrStartDate"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>End Date:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="DateOrNothing: attrEndDate"></div>\r\n                        </div>\r\n                        <!-- ko with: attributes -->\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Graduated:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: graduatedFlagModel() ? graduatedFlagModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Eligibility Status:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: eligibilityModel() ? eligibilityModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <div class="row pad-top">\r\n                            <div class="span3 align-left">\r\n                                <span>Enrollment Status:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text:  enrollmentModel() ? enrollmentModel().name() : \'\'"></div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                        <!-- <div class="row pad-top divider">\r\n                            <div class="span3 align-left">\r\n                                <span>Market:</span>\r\n                            </div>\r\n                            <div class="span9" data-bind="text: market"></div>\r\n                        </div> -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle" data-bind="clickToggle: $parent.attributesSectionOpen">\r\n                <h3>Program Attributes</h3>\r\n            </div>\r\n            <div class="accordion-content" data-bind="visible: $parent.attributesSectionOpen">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Authored By:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: authoredBy"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Start Date:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="DateOrNothing: startDate"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>End Date:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="DateOrNothing: endDate"></div>\r\n                </div>\r\n                <div class="row pad-top divider">\r\n                    <div class="span3 align-left">\r\n                        <span>Program Version:</span>\r\n                    </div>\r\n                    <div class="span9"><span data-bind="text: programVersion"></span> <span data-bind="if: programVersionUpdatedOn">(<span data-bind="Date: programVersionUpdatedOn"></span>)</span></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Program Template:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: templateName"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-left">\r\n                        <span>Template Version:</span>\r\n                    </div>\r\n                    <div class="span9" data-bind="text: templateVersion"></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row pad-top divider"></div>\r\n</div>'}),n("text!views/patients/tabs/program.goals.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n    <div class="row pad-top">\r\n        <table class="goal-action">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        <strong>Focus Area(s)</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Goal</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Source</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Type</strong>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td class="wrap">Verbalize benefits of healthy eating</td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td class="wrap">Increase daily servings of fruits/veggies </td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term				</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Healthy Eating</td>\r\n                    <td>Improve diet</td>\r\n                    <td>Program</td>\r\n                    <td>Short-Term</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>'}),n("text!views/patients/tabs/program.objectives.html",[],function(){return'<div class="tab" data-bind="css: { \'active\': tab.isActive() }">\r\n    <div class="row pad-top" data-bind="with: computedObjectives">\r\n        <table class="goal-action" data-bind="if: showing">\r\n            <colgroup>\r\n                <col span="1" style="width: 40%">\r\n                <col span="1" style="width: 40%" >\r\n                <col span="1" style="width: 20%" >\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        <strong>Category</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Objective</strong>\r\n                    </th>\r\n                    <th>\r\n                        <strong>Target</strong>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: $data">\r\n                <tr>\r\n                    <td class="wrap"><span data-bind="text: categoriesString"></span></td>\r\n                    <td class="wrap" data-bind="with: objective"><span data-bind="text: name"></span></td>\r\n                    <td class="wrap"><span data-bind="if: value"><span data-bind="text: value"></span> <span data-bind="text: unit"></span></span></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <!-- ko if: !showing() -->\r\n        <em class="grey">No objectives set.</em>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>'}),n("text!views/patients/team/careMember.details.html",[],function(){return'<div>\r\n	<em class="grey" data-bind="visible: !careMember()">No care member selected</em>\r\n	<nav class="tabs" data-bind="visible: careMember">\r\n		<!-- ko foreach: detailsTabs -->\r\n			<span data-bind="css: {\'active\': $parent.activeDetailsTab() == name}, \r\n							click: function(){ $parent.setActiveDetailsTab( name ) }, clickBubble: false">\r\n				<!-- ko if: imgAlt -->\r\n					<img data-bind="attr:{ alt: imgAlt, src: imgSource }" style="vertical-align: middle;"/>\r\n				<!-- /ko -->\r\n				<!-- ko if: cssClass -->\r\n					<i data-bind="attr:{ class: cssClass }"></i>\r\n				<!-- /ko -->\r\n				<a role="menuitem" data-bind="text: name"></a>\r\n			</span>\r\n		<!-- /ko -->\r\n	</nav>\r\n\r\n	<div class="content" data-bind="with: careMember">\r\n		<div class="row" data-bind="visible: $parent.activeDetailsTab() === \'Relationship\'">\r\n			<div class="row pad-top">\r\n				<strong class="span3 pad-right">Role:</strong>\r\n				<div class="span9" data-bind="text: computedRoleName"></div>\r\n			</div>\r\n			<div class="row pad-top" data-bind="with: status">\r\n				<strong class="span3 pad-right">Status:</strong>\r\n				<div class="span9" data-bind="text: name()"></div>\r\n			</div>\r\n			<div class="row" data-bind="visible: startDate">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">Start Date:</strong>\r\n				<div class="span9" data-bind="Date: startDate"></div>\r\n			</div>\r\n			<div class="row" data-bind="visible: endDate">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">End Date:</strong>\r\n				<div class="span9" data-bind="Date: endDate"></div>\r\n			</div>			\r\n			<div data-bind="with: frequency">\r\n				<div class="row">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Frequency:</strong>\r\n					<div class="span9" data-bind="text: name"></div>\r\n				</div>\r\n			</div>\r\n			<div class="row" data-bind="visible: distance">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">Distance:</strong>\r\n				<div class="span9">\r\n					<span data-bind="text: distance"></span>\r\n					<span class="pad-left" data-bind="text: distanceUnit"></span>\r\n				</div>\r\n			</div>\r\n			<div data-bind="visible: notes">\r\n				<div class="row pad-top">\r\n					<strong class="span3">Notes:</strong>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<pre class="pad-left span12" data-bind="text: notes, attr: { \'title\': notes }"></pre>\r\n				</div>					\r\n			</div>\r\n			<div class="row" data-bind="visible: createdOn">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">Created:</strong>\r\n				<span data-bind="DateTime: createdOn"></span> by <span data-bind="text: (createdBy()? createdBy().firstLastOrPreferredName : \'\')"></span>\r\n			</div>\r\n			<div class="row" data-bind="visible: updatedOn">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">Updated:</strong>\r\n				<div class="span9">\r\n					<span data-bind="DateTime: updatedOn"></span> by <span data-bind="text: (updatedBy()? updatedBy().firstLastOrPreferredName : \'\')"></span>\r\n				</div>\r\n			</div>\r\n			<div class="row" data-bind="visible: dataSource">\r\n				<div class="pad-top"></div>\r\n				<strong class="span3 pad-right">System:</strong>\r\n				<div class="span9" data-bind="text: dataSource"></div>\r\n			</div>\r\n		</div>\r\n		<div class="row" data-bind="visible: $parent.activeDetailsTab() === \'Profile\'">\r\n			<div data-bind="with: contact">\r\n				<div class="row pad-top" data-bind="visible: fullName">					\r\n					<span data-bind="text: fullName"></span>\r\n				</div>\r\n				<div class="row" data-bind="visible: preferredName">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Preferred Name:</strong>\r\n					<div class="span9" data-bind="text: preferredName"></div>\r\n				</div>\r\n				<div data-bind="with: deceased">					\r\n					<div class="row pad-top" data-bind="visible: (name() == \'Yes\')">\r\n						<strong class="span3 pad-right">Deceased:</strong>\r\n						<div class="span9">Yes</div>\r\n					</div>\r\n				</div>\r\n				<div class="pad-left">				\r\n					<ul class="row grey pad-left" style="list-style-type: disc;" data-bind="visible: (detailedSubTypes().length > 0)">\r\n						<!-- ko foreach: detailedSubTypes -->\r\n							<li class="pad-top" data-bind="text: $data"></li>\r\n						<!-- /ko -->\r\n					</ul>				\r\n				</div>	\r\n				<div class="row" data-bind="visible: (gender() && gender() !== \'N\')">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Gender:</strong>\r\n					<div class="span9" data-bind="text: gender"></div>\r\n				</div>\r\n				<div class="row" data-bind="with: contactStatus">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Status:</strong>\r\n					<div class="span9" data-bind="text: name"></div>\r\n				</div>\r\n				<div class="row" data-bind="visible: createdOn">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Created:</strong>\r\n					<div class="span9">\r\n						<span data-bind="DateTime: createdOn"></span> by <span data-bind="text: (createdBy()? createdBy().firstLastOrPreferredName : \'\')"></span>\r\n					</div>\r\n				</div>\r\n				<div class="row" data-bind="visible: updatedOn">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">Updated:</strong>\r\n					<div class="span9">\r\n						<span data-bind="DateTime: updatedOn"></span> by <span data-bind="text: (updatedBy()? updatedBy().firstLastOrPreferredName : \'\')"></span>\r\n					</div>\r\n				</div>\r\n				<div class="row" data-bind="visible: dataSource">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 pad-right">System:</strong>\r\n					<div class="span9" data-bind="text: dataSource"></div>\r\n				</div>\r\n			</div>								\r\n		</div>\r\n		<div class="row" data-bind="visible: $parent.activeDetailsTab() === \'Comm\'">\r\n			<div data-bind="with: contact">\r\n				<!-- ko foreach: $parents[1].primaryCommunications -->\r\n				<div class="row pad-top" data-bind="compose: template">\r\n				</div>\r\n				<!-- /ko -->\r\n				<div class="row pad-top">\r\n					<strong class="span3 grey">Mode:</strong>\r\n					<div class="span9">\r\n						<em class="row grey" data-bind="visible: !prefCommMethods()">Unknown</em>\r\n						<span class="row" data-bind="visible: prefCommMethods, text: prefCommMethods, attr: { \'title\': prefCommMethods }"></span>\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<strong class="span3 grey">Days:</strong>\r\n					<div class="span9">\r\n						<em class="row grey" data-bind="visible: !preferredDaysOfWeek()">Unknown</em>\r\n						<span class="row" data-bind="visible: preferredDaysOfWeek, text: preferredDaysOfWeek, attr: { \'title\': preferredDaysOfWeek }"></span>\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<strong class="span3 grey">Time:</strong>\r\n					<div class="span9">\r\n						<em class="row grey" data-bind="visible: !preferredTimesOfDay()">Unknown</em>\r\n						<span class="row" data-bind="visible: preferredTimesOfDay, text: preferredTimesOfDay, attr: { \'title\': preferredTimesOfDay }"></span>\r\n					</div>\r\n				</div>\r\n				<div class="row" data-bind="with: timeZone">\r\n					<div class="pad-top"></div>\r\n					<strong class="span3 grey">Time Zone:</strong>\r\n					<div class="span9" data-bind="text: name, attr: { \'title\': name }"></div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<strong class="span3 grey">Language:</strong>\r\n					<div class="span9">\r\n						<em class="row grey" data-bind="visible: !preferredLanguage()">Unknown</em>\r\n						<!-- ko with: preferredLanguage -->\r\n						<span class="row" data-bind="text: name, attr: { \'title\': name }"></span>\r\n						<!-- /ko -->\r\n					</div>\r\n				</div>\r\n			</div>								\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!views/patients/team/index.html",[],function(){return'<section data-type="flex">\r\n	<div>	\r\n		<div class="column" data-bind="css: { \'open\': leftColumnOpen() }">\r\n			<!-- ko with: careTeamColumn -->\r\n			<!-- ko if: $parent.isComposed -->\r\n			<div class="widget-wrapper" data-bind="foreach: widgets">\r\n				<!-- ko compose: { model: path, activationData: activationData } -->\r\n                <!-- /ko -->\r\n			</div>\r\n			<!-- /ko -->\r\n			<!-- /ko -->\r\n		</div>\r\n		<div class="column" data-bind="css: { \'open\': !leftColumnOpen() }">\r\n			<div class="widget-wrapper">\r\n				<div class="widget open" data-bind="css: { \'fullscreen\': fullScreenWidget() === \'careMemberDetails\' }, columnSizer: true">\r\n					<div class="content">\r\n						<div class="content-fill">\r\n							<div class="wrapper">\r\n								<div class="content">\r\n									<div class="header">\r\n										<div class="table-cell">\r\n											<header>\r\n												<h1>Details<span data-bind="text: selectedCareMemberName"></h1>\r\n												<div class="controls">\r\n													<!-- ko with: selectedCareMember -->\r\n													<div class="toggle" data-bind="click: $parent.editCareMemberContact, clickBubble: false, visible: (contact() && contact().isEditable())" style="margin-right: 4px;" title="Edit contact information">\r\n														<a href="#">\r\n															<i class="icon-edit"></i>\r\n														</a>\r\n													</div>\r\n													<div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="left" data-bind="click: $parent.toggleOpenColumn, enable: !$parent.leftColumnOpen(), clickBubble: false">\r\n													</div>\r\n													<div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="right" data-bind="click: $parent.toggleOpenColumn, enable: $parent.leftColumnOpen(), clickBubble: false">\r\n													</div>\r\n													<!-- /ko -->\r\n													<!-- ko if: showDeleteButton -->\r\n													<!-- <div class="toggle">\r\n														<a href="#" data-bind="click: deleteContact, clickBubble: false">\r\n															<i class="icon-cancel red"></i>\r\n														</a>\r\n													</div> -->\r\n													<!-- /ko -->																											\r\n													<div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'careMemberDetails\') }, clickBubble: false">\r\n													</div>\r\n												</div>\r\n											</header>											\r\n										</div>\r\n									</div>\r\n									<div class="table-row">\r\n										<div class="table-cell">\r\n											<div class="body">\r\n												<div class="content" >\r\n													<!-- ko compose: { model: \'viewmodels/patients/team/careMember.details\', activationData:{ member: selectedCareMember } } -->\r\n													<!-- /ko -->\r\n												</div>\r\n											</div>\r\n										</div>\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>					\r\n				</div>	\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<!--\r\n		<div class="table-row">\r\n			<div class="table-cell">\r\n				<div class="body">\r\n					<div class="content">\r\n						<div class="body">\r\n							<em class="grey">No individual selected.</em>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	 -->\r\n</section>\r\n';
}),n("text!views/patients/widgets/action.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeAction, columnSizer: {triggers: activeAction}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis"><span data-bind="text: (name().length > 18 ? name().substring(0, 18) + \'...\' : name()), attr: { \'title\': name }"></span></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">\r\n                                    <div data-bind="chsnsingledark: { options: $parent.actionActions, value: $parent.selectedAction, text: \'text\', label: \'action-actions\', caption: \'Action\', disabled: $parent.disableActionActions}"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                        <div data-bind="compose: { model: path, activationData: { tab: $data, activeAction: $parent, selectedHistoricalAction: $parents[1].selectedHistoricalAction, availableHistoricalActions: $parents[1].availableHistoricalActions } }"></div>\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/allergies.html",[],function(){return'<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen(), c: filtersOpen()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="filters" data-bind="visible: filtersHeaderOpen">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <div class="row">\r\n                                        <div class="span5">\r\n                                            <label class="row">\r\n                                                <span class="span3">Type:</span>\r\n                                                <div class="span8" data-bind="multiselect: { options: allergyTypes, values: selectedAllergyTypes, text: \'name\', label: \'allergytypes\', idValue: \'id\' }"></div>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class="span5">&nbsp</div>\r\n                                        <div class="span2" data-bind="click: resetFilters">\r\n                                            <div class="pull-right filters grey">\r\n                                                <i class="icon-filter_clear pointer blue toggle" data-bind="visible: canReset" style="position: inherit;" title="Clear Filter"></i>\r\n                                                <span>&nbsp</span>\r\n                                            </div>\r\n                                        </div>                                        \r\n                                    </div>\r\n                                </section>\r\n                                <div class="filter-content" data-bind="visible: filtersOpen">\r\n                                    <section>\r\n                                        <div class="row">\r\n                                            <div class="span4 grey">Status:</div>\r\n                                        </div>\r\n                                        <div class="row">\r\n                                            <div class="span4" data-bind="multiselect: { options: allergyStatuses, values: selectedAllergyStatuses, text: \'name\', label: \'allergystatuses\', idValue: \'id\' }"></div>\r\n                                        </div>\r\n                                    </section>\r\n                                </div>\r\n                                <div class="toggle" data-bind="clickToggle: filtersOpen, css: filtersOpen() ? \'up-down\' : \'down-up\'"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header class="ellipsis">\r\n                                <h1>\r\n                                    <span data-bind="text: widget.name"></span>\r\n                                </h1>\r\n                                <div class="controls">\r\n									<div class="toggle" data-bind="">\r\n										<i class="pointer icon-plus" data-bind="click: addAllergy, clickBubble: false" title="Add"></i>\r\n									</div>\r\n                                    <i class="fa fa-filter pad-right" data-bind="click: function () { toggleHeaderOpen(filtersHeaderOpen, isOpen); }, clickBubble: false, css: ((selectedAllergyTypes().length > 0 || selectedAllergyStatuses().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))"></i>                                    \r\n									<div class="toggle gray" data-bind="click: refreshData, clickBubble: false" title="Refresh Data">\r\n										<i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': allergySaving }"></i>\r\n									</div>\r\n                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div data-bind="compose: { model: \'viewmodels/templates/allergies.panel\', activationData: { allergies: myAllergies, selectedPatient: selectedPatient, columns: activeAllergyColumns, toggleSort: toggleAllergySort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/careMembers.html",[],function(){return'<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: { triggers: {a: careMembers(), b: isOpen()} }">\r\n	<div class="content">\r\n		<div class="content-fill">\r\n			<div class="wrapper">\r\n				<div class="content">\r\n					<div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n						<div class="table-cell">\r\n							<header class="ellipsis">\r\n								<h1 data-bind="text: widget.name"></h1>\r\n								<div class="controls">														\r\n									<div class="toggle" data-bind="visible: (widget.allowAdd && selectedPatient())">\r\n										<i class="pointer icon-plus" data-bind="click: addCareMember, clickBubble: false" title="Add"></i>\r\n									</div>\r\n									<div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: leftColumnOpen(), clickBubble: false">\r\n									</div>\r\n									<div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !leftColumnOpen(), clickBubble: false">\r\n									</div>\r\n									<div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: function () { toggleFullScreen(\'careMembersPanel\') }, clickBubble: false">\r\n									</div>\r\n								</div>\r\n							</header>\r\n						</div>\r\n					</div>\r\n					<div class="table-row" data-bind="visible: selectedPatient()">\r\n						<div class="table-cell">\r\n							<div class="body">\r\n								<div class="content">\r\n									<div class="row" data-bind="visible: careMembers().length === 0">\r\n										<em class="grey">No care team members</em>\r\n									</div>\r\n									<div data-bind="compose: { model: \'viewmodels/templates/careMembers.panel\', activationData: { careMembers: myCareMembers } }">\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n					\r\n					<div class="table-row" data-bind="visible: !selectedPatient()">\r\n						<div class="table-cell">\r\n							<div class="body">\r\n								<div class="content">\r\n									<div class="body">\r\n										<em class="grey">No individual selected.</em>\r\n									</div>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>					\r\n</div>'}),n("text!views/patients/widgets/careplan.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen(), \'open\': isOpen }, columnSizer: {triggers: isOpen}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header pointer" data-bind="click: $parents[1].toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 data-bind="text: name"></h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content" data-bind="with: $parents[1].selectedPatient, visible: $parents[1].selectedPatient() && $parents[1].selectedPatient().programs().length > 0">\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/programs\', activationData: { selectedPatient: $data, activeAction: $parents[2].activeAction, activeProgram: $parents[2].activeProgram, activeModule: $parents[2].activeModule, elementStateIds: $parent.elementStateIds, sortOverride: $parent.sortOverride } } -->\r\n                                    <!-- /ko -->\r\n                                </div>\r\n                                <div class="content" data-bind="visible: $parents[1].selectedPatient() && $parents[1].selectedPatient().programs().length === 0">\r\n                                    <em class="grey">No programs assigned to this individual.</em>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/data.summary.html",[],function(){return'<div class="widget open fullscreen" data-bind="columnSizer: {triggers: {a: $parents[1].isOpen, b: $parents[1].selectedPatient()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n<!--                     <div class="filters">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <label>\r\n                                        <span>Data Type</span>\r\n                                        <select data-placeholder="Data Type">\r\n                                            <option>Labs</option>\r\n                                            <option>Problem List</option>\r\n                                            <option>Vitals</option>\r\n                                        </select>\r\n                                    </label>\r\n                                    <label>\r\n                                        <span>Name</span>\r\n                                        <select>\r\n                                            <option>Blood Pressure</option>\r\n                                            <option>BMI</option>\r\n                                            <option>HbA1c</option>\r\n                                            <option>Height</option>\r\n                                            <option>LDL</option>\r\n                                            <option>Waist Circumference</option>\r\n                                            <option>Weight</option>\r\n                                        </select>\r\n                                    </label>\r\n                                    <label>\r\n                                        <span>Reported By</span>\r\n                                        <select>\r\n                                            <option>All</option>\r\n                                            <option>Care Manager</option>\r\n                                            <option>Individual</option>\r\n                                        </select>\r\n                                    </label>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div> -->\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Data Summary</h1>\r\n                                <div class="options">\r\n									<div class="toggle">\r\n										<i class="pointer icon-plus" data-bind="click: $parents[1].addData, disable: $parents[1].isEditing" title="Add"></i>\r\n									</div>                                    \r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell" data-bind="with: $parents[1].selectedPatient">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/data.list\', activationData: { selectedPatient: $data } }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/goals.html",[],function(){return'<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: $parents[1].selectedPatient(), c:$parents[1].selectedPatient().goals()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header class="pointer" data-bind="click: $parents[1].toggleWidgetOpen">\r\n                                <h1 data-bind="text: name"></h1>\r\n                                <div class="options goals-options" data-bind="if: canAdd">\r\n                                    <div class="toggle" >\r\n                                        <i class="pointer icon-plus" data-bind="click: $parents[1].addGoal, disable: $parent.isEditing, clickBubble: false" title="Add"></i>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row" data-bind="with: $parents[1].selectedPatient">\r\n                        <!-- ko if: goals().length > 0 -->\r\n                        <div class="table-cell">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/goals\', activationData: { selectedPatient: $data, activeGoal: $parents[2].activeGoal, activeTask: $parents[2].activeTask, activeIntervention: $parents[2].activeIntervention, statusIds: $parent.statusIds, emptyMesssage: $parent.emptyMesssage, sortOverride: $parent.sortOverride } }">\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                        <!-- ko if: goals().length === 0 -->\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <em class="grey">No goals created for this individual.</em>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/widgets/history.detail.html",[],function(){return'<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: true">\r\n    <div class="content">\r\n        <!-- <div class="arrow-runner"><i class="arrow" style="top: 125px;"></i></div> -->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Details</h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content" data-bind="with: $parents[1].activeNote">\r\n									<div data-bind="if: type().name().toLowerCase() === \'touchpoint\'">\r\n										<!-- ko compose: \'templates/note.touchpoint.details.html\' -->\r\n										<!-- /ko --> \r\n									</div>									                                    \r\n									\r\n									<div data-bind="if: type().name().toLowerCase() === \'utilization\'">\r\n										<!-- ko compose: \'templates/note.utilization.details.html\' -->\r\n										<!-- /ko --> \r\n									</div>	 																	\r\n\r\n									<div data-bind="if: (type().name().toLowerCase() !== \'utilization\' && type().name().toLowerCase() !== \'touchpoint\')">\r\n										<!-- ko compose: \'templates/note.general.details.html\' -->\r\n										<!-- /ko --> \r\n									</div>																	\r\n                                    <div class="row pad-top" data-bind="with: programString">\r\n                                        <strong class="span3">Program(s):</strong>\r\n                                        <span class="span9" data-bind="text: $data, attr: { \'title\': $data }"></span>\r\n                                    </div>\r\n                                    <div class="row pad-top" data-bind="visible: createdOn">\r\n                                        <strong class="span3">Created:</strong>\r\n										<span data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span>\r\n                                    </div>\r\n									<div class="row pad-top" data-bind="visible: updatedOn">\r\n                                        <strong class="span3">Updated:</strong>\r\n                                        <span data-bind="DateTime: updatedOn"></span> by <span data-bind="text: (updatedBy()? updatedBy().preferredName : \'\')"></span>\r\n                                    </div>\r\n									<div class="row pad-top" data-bind="visible: dataSource">\r\n                                        <strong class="span3">System:</strong>\r\n                                        <span class="span9"><span data-bind="text: dataSource"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/history.list.html",[],function(){return'<div class="widget" data-bind="css: { \'fullscreen\': isFullScreen() }, columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>History</h1>\r\n                                <!-- ko compose: \'widgets/controls.html\' -->\r\n                                <!-- /ko -->\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <ul class="dividers">\r\n                                        <li class="row line grey">\r\n                                            <div class="span2">Create Date</div>\r\n                                            <div class="span2">Type</div>\r\n                                            <div class="span5">Content</div>\r\n                                            <div class="span2">By</div>\r\n                                            <div class="span1"> </div>\r\n                                        </li>\r\n                                        <!-- ko foreach: $parents[1].groups -->\r\n                                        <li>\r\n                                            <!-- ko compose: { model: \'viewmodels/patients/sections/notes\', activationData: { activeNote: $parents[2].activeNote, group: $data } } -->\r\n                                            <!-- /ko -->\r\n                                        </li>\r\n                                        <!-- /ko -->\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/medication.groups.html",[],function(){return'<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <!-- <div class="filters" data-bind="visible: (filtersHeaderOpen())">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <div class="row">\r\n                                        <div class="span6">\r\n                                            <label class="row">\r\n                                                <span class="span2">Types:</span>\r\n                                                <div class="span4" data-bind="multiselect: { options: medSuppTypes, values: selectedMedicationTypes, text: \'name\', label: \'types\', idValue: \'id\' }"></div>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class="span3 grey">\r\n                                            <label data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                                <i class="fa fa-filter red"></i>\r\n                                                Filters applied\r\n                                            </label>\r\n                                            <span style="color: whitesmoke;">-</span>\r\n                                        </div>\r\n                                        <div class="span2 grey" data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                            <div class="pull-right filters">\r\n                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters" title="Clear Filter"></i>\r\n                                                <span>&nbsp</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div> -->\r\n                    <div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 data-bind="text: widget.name"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle" data-bind="visible: allowAdd">\r\n                                        <i class="pointer icon-plus" data-bind="click: addMedication, clickBubble: false" title="Add"></i>\r\n                                    </div>\r\n                                    <!-- <i class="pointer fa fa-filter pad-horizontal" data-bind="click: function () { filtersHeaderOpen(!filtersHeaderOpen()); }, clickBubble: false, css: ((selectedMedicationTypes().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                    </i> -->\r\n                                    <!-- <div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n                                        <i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': medicationSaving }"></i>\r\n                                    </div> -->\r\n                                    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="clickToggle: isFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div data-bind="compose: { model: \'viewmodels/templates/medication.groups.panel\', activationData: { medicationGroups: medicationGroups, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/patients/widgets/medications.html",[],function(){return'<div class="widget" data-bind="css: { \'open\': isOpen, \'fullscreen\': isFullScreen() }, columnSizer: {triggers: {a: isOpen(), b: filtersHeaderOpen()}}">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="filters" data-bind="visible: (filtersHeaderOpen())">\r\n                        <div class="table-cell">\r\n                            <div class="wrapper">\r\n                                <section class="pinned">\r\n                                    <div class="row">\r\n                                        <div class="span6">\r\n                                            <label class="row">\r\n                                                <span class="span2">Types:</span>\r\n                                                <div class="span4" data-bind="multiselect: { options: medSuppTypes, values: selectedMedicationTypes, text: \'name\', label: \'types\', idValue: \'id\' }"></div>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div class="span3 grey">\r\n                                            <label data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                                <i class="fa fa-filter red"></i>\r\n                                                Filters applied\r\n                                            </label>\r\n                                            <span style="color: whitesmoke;">-</span>\r\n                                        </div>\r\n                                        <div class="span2 grey" data-bind="visible: (selectedMedicationTypes().length > 0)">\r\n                                            <div class="pull-right filters">\r\n                                                <i class="icon-filter_clear pointer blue toggle" data-bind="click: resetFilters" title="Clear Filter"></i>\r\n                                                <span>&nbsp</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="header pointer" data-bind="click: toggleWidgetOpen">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 data-bind="text: widget.name"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle" data-bind="visible: allowAdd">\r\n                                        <i class="pointer icon-plus" data-bind="click: addMedication, clickBubble: false" title="Add"></i>\r\n                                    </div>\r\n                                    <i class="pointer fa fa-filter pad-horizontal" data-bind="click: function () { filtersHeaderOpen(!filtersHeaderOpen()); }, clickBubble: false, css: ((selectedMedicationTypes().length > 0) ? \'red\' : (filtersHeaderOpen() ? \'lighterblue\': \'lightestblue\'))">\r\n                                    </i>\r\n                                    <div class="toggle gray" data-bind="click: refreshView, clickBubble: false" title="Refresh Data">\r\n                                        <i class="fa fa-lg fa-refresh filter-toggle" data-bind="css: { \'fa-spin\': medicationSaving }"></i>\r\n                                    </div>\r\n                                    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: toggleOpenColumn, enable: widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: toggleOpenColumn, enable: !widget.column.isOpen(), clickBubble: false">\r\n                                    </div>\r\n                                    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="clickToggle: isFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <div data-bind="compose: { model: \'viewmodels/templates/medications.panel\', activationData: { medications: myMedications, columns: activeColumns, toggleSort: toggleSort, selectedSortColumn: selectedSortColumn, canSort: true } }">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';
}),n("text!views/patients/widgets/module.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeModule, columnSizer: true">\r\n    <div class="content">\r\n        <!-- <div class="arrow-runner">\r\n            <i class="arrow"></i>\r\n        </div> -->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis span10" data-bind="text: name, attr: { \'title\': name }"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                            <!-- ko compose: { model: path, activationData: { tab: $data, activeModule: $parent } } -->\r\n                                            <!-- /ko -->\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/patients.details.html",[],function(){return'<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <div class="controls">\r\n                                    <div class="toggle single-arrow-left" data-method="open" data-type="remove" data-phyautomation="patients-details-left-arrow" data-bind="click: minimizePatientsDataColumn"></div>\r\n                                    <div class="toggle double-arrow-right" data-method="open" data-type="add" data-phyautomation="patients-details-right-arrows" data-bind="click: maximizePatientsDataColumn"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body" data-bind="with: selectedPatient">\r\n                                <div class="content">\r\n                                <!-- ko if: $data -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/demographics\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n								<!-- ko compose: { model: \'viewmodels/patients/sections/status\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/system.ids\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/focus.areas\',  activationData: { problems: problems, selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/background\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/clinicalBackground\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->								\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/communications\',  activationData: { contactCard: contactCard }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- ko compose: { model: \'viewmodels/patients/sections/care.team\',  activationData: { selectedPatient: $data }  } -->\r\n                                <!-- /ko -->\r\n                                <!-- /ko -->\r\n                                </div>\r\n                            </div>                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/patients.list.flyout.html",[],function(){return'<div class="widget open" data-bind="columnSizer: \'nobody\'">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Recent</h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle single-arrow-left" data-bind="click: minimizePatientsListFlyoutColumn" data-method="open" data-type="remove" data-phyautomation="cohort-left-arrow"></div>\r\n                                    <div class="toggle double-arrow-right" data-bind="click: maximizePatientsListFlyoutColumn" data-method="open" data-type="add" data-phyautomation="cohort-right-arrows"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="fixed">\r\n                                <div class="content">\r\n                                    <!-- ko compose: { model: \'viewmodels/patients/sections/recent.individuals\', activationData: { selectedPatient: selectedPatient, choosePatient: choosePatient } } -->\r\n                                    <!-- /ko -->\r\n                                    <div class="pad-vertical divider">\r\n                                        <h1>Cohorts</h1>\r\n                                        <div class="row">\r\n                                            <div class="span10" data-bind="chsnsingle: { options: cohortsList, value: selectedCohort, text: \'sName\', label: \'cohort\' }"></div>\r\n                                        </div>\r\n                                        <div class="row pad-top">\r\n                                            <input data-bind="value: cohortFilter, valueUpdate: \'afterkeydown\', disable: !selectedCohort()" \r\n												placeholder="Search" type="search" data-phyautomation="cohort-patient-search" style="width: 87%;"/>\r\n											<i class="pointer icon-cancel" data-bind="visible: cohortFilter, click: clearCohortFilter"></i>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="body" data-bind="setHeightFromPrev: patientsList">\r\n                                <div class="content" data-phyautomation="cohort-patient-list">\r\n                                    <!-- ko foreach: patientsList -->\r\n                                    <div class="row ellipsis" data-bind="click: $parent.choosePatient">\r\n                                        <div class="columns patient-list">\r\n                                            <div class="column ellipsis">\r\n                                                <img alt="Patient small" class="pull-left" data-bind="attr: { src: genderModel().SmallImgSrc }" />\r\n                                                <a href="#" class="line" data-bind="text: fullLastName() + \', \' + fullFirstName(), attr: { \'title\': (fullLastName() + \', \' + fullFirstName()) }"></a>\r\n                                            </div>\r\n                                            <div class="column ellipsis">\r\n                                                <span class="line grey pad horizontal" data-bind="with: dOB"><span data-bind="text: \'(\' + $data + \')\', attr: { \'title\': $data }" data-phyautomation="dob"></span></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!-- /ko -->\r\n                                    <div class="row" data-bind="visible: canLoadMoreCohortPatients">\r\n                                        <div class="push2 span8">\r\n                                            <button class="small" data-bind="click: loadMoreCohortPatients">\r\n                                                Load more...\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n									<div class="row" data-bind="visible: showNoResultsMessage">\r\n										<span data-bind="text: noResultsMessage"></span>\r\n									</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/program.details.html",[],function(){return'<div class="widget open" data-bind="css: { \'fullscreen\': isFullScreen() }, with: activeProgram, columnSizer: true">\r\n    <div class="content">\r\n<!--         <div class="arrow-runner">\r\n            <i class="arrow"></i>\r\n         </div>-->\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1 class="ellipsis span8" data-bind="text: name, attr: { \'title\': name }"></h1>\r\n                                <div class="controls">\r\n                                    <div class="toggle fullscreen" data-bind="click: $parent.toggleFullScreen, clickBubble: false">\r\n                                    </div>\r\n                                </div>\r\n                                <div class="options">                                    \r\n                                    <div data-bind="chsnsingledark: { options: $parent.programActions, value: $parent.selectedAction, text: \'text\', label: \'programs\', caption: \'Action\' }"></div>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell">\r\n                            <div class="body">\r\n                                <div class="content">\r\n                                    <section class="tabbed fill">\r\n                                        <nav class="tabs" data-bind="foreach: $parent.tabs">\r\n                                            <span data-bind="text: name, click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeTab() === $data }"></span>\r\n                                        </nav>\r\n                                        <!-- ko foreach: $parent.tabs -->\r\n                                            <!-- ko compose: { model: path, activationData: { tab: $data, activeProgram: $parent } } -->\r\n                                            <!-- /ko -->\r\n                                        <!-- /ko -->\r\n                                    </section>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/patients/widgets/todos.html",[],function(){return'<div class="widget open" data-bind="columnSizer: true">\r\n    <div class="content">\r\n        <div class="content-fill">\r\n            <div class="wrapper">\r\n                <div class="content">\r\n                    <div class="header">\r\n                        <div class="table-cell">\r\n                            <header>\r\n                                <h1>Goals</h1>\r\n                                <div class="options goals-options">\r\n                                    <button class="btn color small" data-bind="click: $parents[1].addGoal, disable: $parents[1].isEditing">\r\n                                        <i class="icon-plus"></i>\r\n                                        <span class="pad-left">New Goal</span>\r\n                                    </button>\r\n                                </div>\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n                    <div class="table-row">\r\n                        <div class="table-cell" data-bind="with: $parents[1].selectedPatient">\r\n                            <div class="body" data-bind="compose: { model: \'viewmodels/patients/sections/goals\', activationData: { activeGoal: $parents[2].activeGoal, selectedPatient: $data } }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/populations/index.html",[],function(){return""}),n("text!views/programdesigner/customattributes/datepicker.edit.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="datepicker: computedValue().value, datepickerOptions: { }" type="text" class="datepicker">\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/datepicker.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="Date: computedValue().value"></p>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/datetimepicker.edit.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">\r\n		<!-- ko if: Modernizr.inputtypes.time -->\r\n			<input data-bind="timepicker: value, valueUpdate: blur" type="time">\r\n		<!-- /ko -->\r\n		<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n			<input data-bind="jqtimepicker: value" type="text">\r\n		<!-- /ko -->\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/datetimepicker.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span5">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span4">        \r\n		<!-- ko if: Modernizr.inputtypes.time -->\r\n			<input data-bind="timepicker: value, attr: { \'disabled\': !value() }" type="time">			\r\n		<!-- /ko -->\r\n		<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n			<input data-bind="jqtimepicker: value, attr: { \'disabled\': !value() }" type="text">\r\n		<!-- /ko -->\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/input.edit.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <input data-bind="value: computedValue().value" />\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/input.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="value: computedValue().value"></p>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/multiselect.edit.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <div class="span9" data-bind="multiselect: { options: options, values: values, idValue: \'value\', text: \'display\', label: \'multi\' }"></div>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/multiselect.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span9">\r\n        <p data-bind="foreach: values">\r\n            <span data-bind="text: value"></span>\r\n        </p>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/singleselect.edit.html",[],function(){return'<div class="row pad-top">\r\n    <div class="span3 align-right">\r\n        <span class="grey" data-bind="text: name"></span>\r\n    </div>\r\n    <div class="span4">\r\n        <div data-bind="chsnsingle: { options: options, value: computedValue().value, text: \'display\', label: \'customattribute\', idValue: \'value\' }"></div>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/customattributes/singleselect.html",[],function(){return'<div class="row pad-bottom">\r\n    <div class="span6 grey"data-bind="text: name">\r\n        Start Date\r\n    </div>\r\n    <div class="span6">\r\n    	<span data-bind="text: displayValue() ? displayValue() : \'-\'"></span>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/designer/index.html",[],function(){return'<section data-type="full">\r\n    <div data-bind="foreach: columns">\r\n        <!-- ko compose: columntemplate -->\r\n        <!-- /ko -->\r\n    </div>\r\n</section>'}),n("text!views/programdesigner/index.html",[],function(){return'<div class="route">\r\n    <!-- ko compose: navigation.currentSubRoute().subroute -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/button.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="text: header"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: completeAction, disable: !computedResponse() && !activeStep() || $parent.completed() === true || $parents[1].programsSaving() === true" />\r\n            <button class="pull-right" data-bind="click: $parent.saveAction, enable: !completed() && $parent.hasChanges() && !$parents[1].programsSaving()">Save</button>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/questiontypes/checkbox.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->        \r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': value() === \'true\' }">\r\n                <input type="checkbox" data-bind="checked: value, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed()), clickRadio: $parent.computedResponse" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <!-- ko if: value() === \'true\' -->\r\n    <div class="row">\r\n        <i class="icon-check span1"></i><strong class="span11" data-bind="text: text"></strong><br>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: !computedResponse() || hasNoTrueAnswers() === true -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/datepicker.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: { }, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1" data-bind="Date: computedResponse().value"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/datetimepicker.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="datepicker: value, datepickerOptions: {  }, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" type="text" class="datepicker">\r\n    </div>\r\n    <div class="span6">\r\n		<!-- ko if: Modernizr.inputtypes.time -->\r\n			<input data-bind="timepicker: value, valueUpdate: blur, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed() || !value())" type="time">\r\n		<!-- /ko -->\r\n		<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n			<input id="value" data-bind="jqtimepicker: value, disable: (!$parent.computedResponse() && !$parent.activeStep() || $parents[1].completed() || !value())" type="text">\r\n		<!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1"><span data-bind="Date: computedResponse().value"></span> <span data-bind="LongTime: computedResponse().value"></span></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/label.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <!-- ko with: text -->\r\n    <p data-bind="html: $data"></p>\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/modal.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko if: activeStep() -->\r\n    <h2 class="pad vertical" data-bind="text: header"></h2>\r\n    <!-- /ko -->\r\n    <p data-bind="html: question"></p>\r\n    <div class="span12">\r\n        <div class="row">\r\n            <button class="btn color" type="button" data-bind="text: text, click: $parents[1].toggleModalShowing, disable: !computedResponse() && !activeStep() || $parent.completed() === true" />\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/questiontypes/questioneditor.html",[],function(){return'<div class="row pad pad-top">\r\n    <div class="row">\r\n        <!--Where the question id goes-->\r\n        <h2 class="span4">Question Id</h2>\r\n        <small class="push2 span6">12345</small>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the question type selector goes-->\r\n        <h3 class="span4">Question Type</h3>\r\n        <div data-bind="chsnsingle: { options: questionTypes, value: questionType, text: \'name\', label: \'question-type\' }"></div>\r\n    </div>\r\n    <div class="row">\r\n        <!--Where the actual question goes-->\r\n        <h3 class="span4">Question</h3>\r\n        <input class="push2 span6" type="text" data-bind="value: question" />\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/questiontypes/radio.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko foreach: responses().sort($root.alphabeticalOrderSort) -->\r\n    <label class="control-group">\r\n        <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n            <span data-bind="css: { \'checked\': $parent.computedResponse() === $data }">\r\n                <input type="radio" data-bind="clickRadio: $parent.computedResponse, disable: (!$parent.computedResponse() && !$parent.activeStep()|| $parents[1].completed())" />\r\n            </span>\r\n        </div>\r\n        <strong data-bind="text: text, css: { \'grey\': !$parent.computedResponse() && !$parent.activeStep() }"></strong>\r\n    </label>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <strong class="push1" data-bind="text: computedResponse().text"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse() -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/singleselect.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() --> \r\n	<div class="span6">\r\n		<label class="control-group">\r\n			<div data-bind="chsnsingle: { options: responses().sort($root.alphabeticalOrderSort), value: computedResponse, text: \'text\', label: \'programs\', disabled: (!computedResponse() && !activeStep() || $parent.completed()), \r\n							title: computedResponse()? computedResponse().text() : null }"></div>\r\n		</label>\r\n	</div>\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse() -->\r\n    <strong class="push1" data-bind="text: computedResponse().text"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse() -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/textarea.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <textarea data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep() || $parents[1].completed())" maxlength="1000"></textarea>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <textarea data-bind="text: computedResponse().value, attr: { \'title\': computedResponse().value }" class="push1 span11 strong" readonly="readonly" rows="5"></textarea>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/textbox.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n        <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n\r\n    <!-- ko ifnot: $parent.completed() -->\r\n    <!-- ko with: computedResponse -->\r\n    <input data-bind="value: value, updateActionElementState: value, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="text">\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n    <!-- ko if: $parent.completed() -->\r\n    <br>\r\n    <!-- ko if: computedResponse().value -->\r\n    <strong class="push1" data-bind="text: computedResponse().value"></strong>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: computedResponse().value -->\r\n    <strong><em class="push1">&ltNot Answered&gt</em></strong>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</div>'}),n("text!views/programdesigner/questiontypes/timepicker.html",[],function(){return'<div class="row pad pad-top">\r\n    <!-- ko with: header -->\r\n    <h2 class="pad vertical" data-bind="text: $data"></h2>\r\n    <!-- /ko -->\r\n    <h3 data-bind="html: question, css: { \'grey\': !computedResponse() && !activeStep() }"></h3>\r\n    <em class="gray" data-bind="html: notes"></em>\r\n    <!-- ko with: computedResponse -->\r\n    <div class="span6">\r\n        <input data-bind="value: value, valueUpdate: blur, disable: (!$parent.computedResponse().value() && !$parent.activeStep()|| $parents[1].completed())" type="time">\r\n    </div>\r\n    <div class="span6"></div>\r\n    <!-- /ko -->\r\n</div>';
}),n("text!views/programdesigner/widgets/modulewidget.html",[],function(){return'<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }, columnSizer: {triggers: settings.isOpen}">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/programdesigner/widgets/programwidget.html",[],function(){return'<div class="widget" data-bind=" css: { open: settings.isOpen(), fullscreen: settings.isFullScreen() }, columnSizer: {triggers: settings.isOpen}">\r\n    <div class="content">\r\n        <header data-bind="click: toggleWidgetOpen">\r\n            <h1 data-bind="text: settings.data.content"></h1>\r\n        </header>\r\n        <div class="body">\r\n            <div class="graph">\r\n                <svg class="span6"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/shell/alerttypes/error.html",[],function(){return'<div class="alert error" data-bind="visible: showing">\r\n    <div class="message">\r\n        <img src="/NightingaleUI/Content/images/alert_red.png">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>'}),n("text!views/shell/alerttypes/info.html",[],function(){return'<div class="alert info" data-bind="visible: showing">\r\n    <div class="message">\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="close icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>'}),n("text!views/shell/alerttypes/warning.html",[],function(){return'<div class="alert warning" data-bind="visible: showing, timeOut: showing, timeOutOptions: { delay: 2000 }">\r\n    <div class="message">\r\n        <i class="icon-check green"></i>\r\n        <span data-bind="text: reason"></span>\r\n    </div>\r\n    <i class="icon-cancel blue" data-bind="clickToggle: showing"></i>\r\n</div>'}),n("text!views/shell/banner.html",[],function(){return'<header role="banner">\r\n    <img class="brand" data-bind="attr: { src: currentBrand().imageSource }" />\r\n    <div class="options">\r\n        <div class="user-menu dropdown" data-bind="with: $parent.session.currentUser, clickToggle: $parent.userMenuOpen, css: { \'open\': $parent.userMenuOpen }">\r\n            <div class="dropdown-toggle">\r\n                <a class="disabled" data-bind="text: \'User - \' + userName()"></a>\r\n            </div>\r\n            <div class="dropdown-content">\r\n                <li data-bind="click: $parents[1].session.logOff">\r\n                    <a href="#" data-bind="click: $parents[1].session.logOff">Sign Out</a>\r\n                </li>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="loading-messages">\r\n        <div class="messages-dropdown open" data-bind="visible: $parent.compLoadingMessages().length !== 0 && $parent.loadingMessagesShowing() === true ">\r\n            <div class="dropdown-toggle">\r\n                <span class="disabled"><strong>Loading...</strong><i class="icon-spinner icon-spin grey icon-2x"></i></span>\r\n            </div>\r\n            <ul class="messages-content" data-bind="foreach: $parent.compLoadingMessages">\r\n                <li class="ellipsis" data-bind="visible: Showing"><span data-bind="text: Message"></span></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</header>'}),n("text!views/shell/footer.html",[],function(){return'<footer class="copyright">\r\n	<div class="container">\r\n		<span>&#169; IBM Corporation 2013, <span data-bind="text: new Date().getFullYear()"></span></span>\r\n		<span class="row">The information you are viewing is NOT the individual\'s full medical record.</span>\r\n	</div>\r\n</footer>'}),n("text!views/shell/quickadd/assign.html",[],function(){return'<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">\r\n                Category\r\n            </span>\r\n        </div>\r\n        <div class="span9">\r\n            <span class="grey">\r\n                Assign\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <div data-bind="chsnsingle: { options: categories, value: selectedCategory, text: \'Name\', label: \'category\' }"></div>\r\n        </div>\r\n        <div class="span6">\r\n            <div data-bind="chsnsingle: { options: contractPrograms, value: selectedProgram, text: \'name\', label: \'programs\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: cancelAssign" class="cancel">Cancel</button>\r\n            <input data-bind="click: saveAssign, disable: !canSave()" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/communication.html",[],function(){return'<form>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Action</span>\r\n        </label>\r\n        <select>\r\n            <option>Left Message</option>\r\n            <option>Spoke with patient</option>\r\n            <option>Busy</option>\r\n        </select>\r\n        <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 140px;" title="">\r\n            <a class="chosen-single" tabindex="-1">\r\n                <span>Left Message</span>\r\n                <div><b></b></div>\r\n            </a>\r\n            <div class="chosen-drop">\r\n                <div class="chosen-search">\r\n                    <input type="text" autocomplete="off" readonly="" />\r\n                </div>\r\n                <ul class="chosen-results"></ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Call Notes</span>\r\n            <input type="text" />\r\n        </label>\r\n    </div>\r\n    <div class="span6 pad bottom">\r\n        <label>\r\n            <span>Date/Time</span>\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161754" />\r\n        </label>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/dataentry.html",[],function(){return'<form>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <span class="grey">Element</span>\r\n        </div>\r\n        <div class="span3">\r\n            <span class="grey">Value</span>\r\n        </div>\r\n        <div class="span2">\r\n            <span class="grey">Date</span>\r\n        </div>\r\n        <div class="span4">\r\n            <span class="grey">Source</span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad top">\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span3">\r\n            <input type="text" />\r\n        </div>\r\n        <div class="span2">\r\n            <input class="datepicker hasDatepicker" type="text" id="dp1386105161755" />\r\n        </div>\r\n        <div class="span3">\r\n            <select>\r\n                <option>Opt 1</option>\r\n                <option>Opt 2</option>\r\n                <option>Opt 3</option>\r\n            </select>\r\n            <div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 0px;" title="">\r\n                <a class="chosen-single" tabindex="-1">\r\n                    <span>Opt 1</span>\r\n                    <div><b></b></div>\r\n                </a>\r\n                <div class="chosen-drop">\r\n                    <div class="chosen-search">\r\n                        <input type="text" autocomplete="off" readonly="" />\r\n                    </div>\r\n                    <ul class="chosen-results"></ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="span1">\r\n            <a href="#">\r\n                <i class="icon-plus"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button class="cancel">Cancel</button>\r\n            <input type="submit" value="Save" />\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/general.note.html",[],function(){return'<form>    \r\n    <div class="row pad accordion divider" data-bind="with: $parent.newNote">\r\n		<!-- ko compose: "templates/validation.errors.html" -->\r\n		<!-- /ko --> \r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].gnContentOpen">\r\n            <div class="bold line">Content:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].gnContentOpen">\r\n			<div class="row pad-top">\r\n				<div class="span2">\r\n                    <h5 class="grey pad-bottom">Duration</h5>\r\n                </div>\r\n                <div class="span2">\r\n                    <input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n						attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n						css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }"></input>\r\n                </div>\r\n				<span class="span2 grey align-left">(minutes)</span>\r\n			</div>\r\n            <div class="row pad-top">\r\n                <div class="span12">\r\n                    <label>\r\n                        <div class="input inline text optional note_content">\r\n                            <textarea data-bind="value: text, valueUpdate: \'afterkeydown\'" class="text optional" maxlength="5000"></textarea>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span12 pad-bottom">\r\n                    <label>\r\n                        <span>Program(s)</span>\r\n                    </label>\r\n                    <div class="row">\r\n                        <div class="span9" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion divider" data-bind="with: $parent.newNote">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].gnLastNotesOpen">\r\n            <div class="bold line">Past Notes:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].gnLastNotesOpen, foreach: $parents[1].lastThreeNotes">\r\n            <div class="row pad-top divider" data-bind="if: createdOn">\r\n                <a class="span12" href="#" data-bind="click: $parents[2].viewDetails">\r\n                    <div class="row">\r\n                        <strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n                    </div>\r\n                    <div class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: text"></span>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parents[1].lastThreeNotes().length === 0">\r\n            <em>No notes have been entered</em>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top divider" data-bind="visible: !$parent.gnLastNotesOpen()">\r\n    </div>\r\n    <div class="position bottom left">\r\n        <div class="pad vertical">\r\n            <a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <input data-bind="click: $parent.saveNote, enable: $parent.canSave" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/notes.html",[],function(){return'<div class="content" data-bind="with: selectedPatient">\r\n	<div class="row">\r\n		<div class="bold pull-left pad-right">Type:</div>\r\n		<div class="span5">\r\n			<div data-bind="chsnsingle: { options: $parent.noteTypes, value: $parent.selectedNoteType, text: \'name\', label: \'notetypes\' }"></div>\r\n		</div>\r\n	</div>\r\n    <div class="pad-top"></div>\r\n    <div class="simplenote" data-bind="compose: $parent.activeNoteType">\r\n    </div>\r\n</div>'}),n("text!views/shell/quickadd/quickaddpopover.html",[],function(){return'<div data-bind="with: patientIsSelected">\r\n    <div class="quickadd" data-bind="css: { \'open\': $parent.isShowing }">\r\n        <div class="quickadd-toggle" data-bind="clickToggle: $parent.isShowing">\r\n            <div class="toggle down-up"></div>\r\n            <strong>Quick Add</strong>\r\n        </div>\r\n        <div class="quickadd-content">\r\n            <header data-bind="foreach: $parent.quickAddSections">\r\n                <div class="tab">\r\n                    <a data-bind="click: $parents[1].setActiveTab, css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }" href="#">\r\n                        <i data-bind="attr: { class: IconPath }"></i>\r\n                        <span class="pad-left" data-bind="text: Title"></span>\r\n                    </a>\r\n                </div>\r\n            </header>\r\n            <div class="body pad" data-bind="foreach: $parent.quickAddSections">\r\n                <section data-bind="css: { \'active\': $parents[1].activeQuickAddTab() === $data }, attr: { \'data-tab\': Type }">\r\n                    <!-- ko compose: { model: Path, activationData: { data: $parents[1] } } -->\r\n                    <!-- /ko -->\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/shell/quickadd/todo.html",[],function(){return'<form class="simple_form new_todo content" data-bind="with: selectedPatient">\r\n	<div data-bind="with: $parent.newTodo">\r\n		<!-- ko compose: "templates/validation.errors.html" -->\r\n		<!-- /ko --> \r\n	</div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Category:\r\n        </div>\r\n        <div class="span4 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].categories, value: category, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Status:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].statuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Due Date:     \r\n        </div>\r\n        <div class="span3 pad-left">            \r\n            <!-- <input placeholder="due date" size="30" type="text" data-bind="datepicker: dueDate"> -->\r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: dueDate, dateErrors: dueDateErrors, showInvalid: showInvalidDueDate, dateName: \'dueDateDate\', timeName: \'dueDateTime\',\r\n					datepickerOptions:{ }, datepickerDynamicOptions: {}, showTime: false, dateCss: \'span12\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n        </div>\r\n    </div>\r\n	<div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Start Time:     \r\n        </div>\r\n        <div class="span3 pad-left">            \r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: startTime, dateErrors: startTimeErrors, timeName: \'startTime\', showDate: false,\r\n					datepickerOptions:{ }, datepickerDynamicOptions: {}, showInvalidTime: showInvalidStartTime, showTime: true, timeCss: \'span12\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n        </div>\r\n    </div>\r\n	<div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Duration:     \r\n        </div>\r\n        <div class="span2 pad-left">            \r\n			<input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n						attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n						css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }"></input>\r\n        </div>\r\n		<span class="span2 grey pad-left">(minutes)</span>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Assigned to:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parents[1].careManagersBloodhound, displayKey: \'preferredName\'}, value: $parents[1].assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        </div>\r\n		<div class="span5 align-right">\r\n			<button class="close small" data-bind="enable: assignedToId(), click: $parents[1].removeUserAssociation">Remove Association</button>\r\n		</div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Priority:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div data-bind="chsnsingle: { options: $parents[1].priorities, value: priority, text: \'levelName\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Individual:     \r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <span data-bind="text: (patientDetails() && patientDetails().fullName()) ?  patientDetails().fullName() : \'-\'"></span>\r\n        </div>\r\n        <div class="span5 align-right">\r\n            <button class="close small" data-bind="enable: patientId(), click: $parents[1].removeAssociation">Remove Association</button>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Program(s):\r\n        </div>\r\n        <div class="span5 pad-left" data-bind="visible: patientId()">\r\n            <div class="span12" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n        </div>\r\n        <div class="span5 pad-left" data-bind="visible: !patientId()">\r\n            <span>-</span>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="with: $parent.newTodo">\r\n        <div class="span2 align-right grey">Title:\r\n        </div>\r\n        <div class="span9 pad-left">\r\n            <input placeholder="title" size="80" maxlength="500" type="text" data-bind="value: title, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'title\') !== -1) }">\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span3 grey">Description:\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="with: $parent.newTodo">\r\n        <div class="span12">\r\n            <textarea data-bind="value: description, valueUpdate: \'afterkeydown\'" maxlength="500">\r\n            </textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad">\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <button data-bind="click: $parent.save, enable: $parent.canSave" class="btn color">Save</button>\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/touchpoint.note.html",[],function(){return'<form class="simple_form new_note">\r\n	<div data-bind="with: $parent.newTouchPoint"> \r\n		<!-- ko compose: "templates/validation.errors.html" -->\r\n		<!-- /ko -->		\r\n	</div>\r\n    <div class="row pad top accordion divider">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parent.tpDetailsOpen">\r\n            <div class="row">\r\n                <div class="bold line pull-left">\r\n                    Details:\r\n                </div>\r\n                <div class="small line grey pad-left pull-left" data-bind="visible: !$parent.tpDetailsOpen(), with: $parent.newTouchPoint">\r\n                    <!-- ko if: outcome() && method() -->\r\n                    <span data-bind="text: outcome().name"></span> <span data-bind="text: method().name"></span> <span data-bind="text: source().name() === \'Outbound\' ? \'to\' : \'from\' "></span> <span data-bind="text: who().name() === \'Individual\' ? $parent.fullName() : who().name()"></span> on <span data-bind="Date: contactedOn"></span>\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="with: $parent.newTouchPoint, visible: $parent.tpDetailsOpen">\r\n            <div class="row pad">\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Method</h5>\r\n                    <div class="icon-list">\r\n            			<div data-bind="chsnsingle: { options: $parents[1].methods, value: method, text: \'name\', label: \'methods\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Who</h5>\r\n                    <div class="icon-list">\r\n            			<div data-bind="chsnsingle: { options: $parents[1].whos, value: who, text: \'name\', label: \'whose\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Source</h5>\r\n                    <div class="icon-list">\r\n            			<div data-bind="chsnsingle: { options: $parents[1].sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="span3">\r\n                    <h5 class="grey pad-bottom">Outcome</h5>\r\n                    <div class="icon-list">\r\n            			<div data-bind="chsnsingle: { options: $parents[1].outcomes, value: outcome, text: \'name\', label: \'outcomes\' }"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad">\r\n                <div class="span6">\r\n			        <h5 class="grey pad-bottom">Date/Time of Contact</h5>\r\n                	<div class="row">\r\n					    <div>					        							\r\n							<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n								{\r\n									observableDateTime: contactedOn, dateErrors: contactedOnErrors, dateName: \'contactedOnDate\', timeName: \'contactedOnTime\',\r\n									datepickerOptions:{ }, datepickerDynamicOptions: {}, showTime: true, dateCss: \'span6\', timeCss: \'span6\'\r\n								}\r\n							} -->\r\n							<!-- /ko -->\r\n					    </div>\r\n					</div>\r\n                </div>\r\n                <div class="span6">\r\n                    <h5 class="grey pad-bottom">Program(s)</h5>\r\n                    <div class="icon-list span10" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion open divider" data-bind="with: $parent.newTouchPoint">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parents[1].tpContentOpen">\r\n            <div class="bold line">Content:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content pad" data-bind="visible: $parents[1].tpContentOpen">\r\n            <div class="row">\r\n                <div class="span2">\r\n                    <h5 class="grey pad-bottom">Duration</h5>\r\n                </div>\r\n                <div class="span2">\r\n                    <input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n						attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n						css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }"></input>\r\n                </div>\r\n				<span class="span2 grey align-left">(minutes)</span>\r\n                <div class="span6">\r\n                    <label class="control-group">\r\n					    <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n					        <span data-bind="css: { \'checked\': validatedIdentity() === true }">\r\n					            <input type="checkbox" data-bind="checked: validatedIdentity" />\r\n					        </span>\r\n					    </div>\r\n                        <span class="grey">Validated identity\r\n                        </span>\r\n					</label>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span12">\r\n                    <label>\r\n                        <div class="input inline text optional note_content">\r\n                            <textarea data-bind="value: text, valueUpdate: \'afterkeydown\'" class="text optional" maxlength="5000"></textarea>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad accordion divider">\r\n        <div class="accordion-toggle" data-bind="clickToggle: $parent.tpLastNotesOpen">\r\n            <div class="bold line">Past Notes:\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parent.tpLastNotesOpen, foreach: $parent.lastThreeNotes">\r\n            <div class="row pad-top divider" data-bind="if: createdOn">\r\n                <a class="span12" href="#" data-bind="click: $parents[1].viewDetails">\r\n                    <div class="row">\r\n                        <strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n                    </div>\r\n                    <div class="row">\r\n                        <span class="span12 ellipsis" data-bind="text: text"></span>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="accordion-content" data-bind="visible: $parent.lastThreeNotes().length === 0">\r\n            <em>No notes have been entered</em>\r\n        </div>\r\n	</div>\r\n    <div class="row pad-top divider" data-bind="visible: !$parent.tpLastNotesOpen()">\r\n    </div>\r\n    <div class="position bottom left">\r\n        <div class="pad vertical">\r\n            <a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n        </div>\r\n    </div>\r\n    <div class="position bottom right">\r\n        <div class="pad vertical">\r\n            <button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n            <input data-bind="click: $parent.saveTouchPoint, enable: $parent.canSaveTouchPoint" type="submit" value="Save">\r\n        </div>\r\n    </div>\r\n</form>'}),n("text!views/shell/quickadd/utilization.note.html",[],function(){return'<form class="simple_form new_note">\r\n	<div data-bind="with: $parent.newUtilization">\r\n		<!-- ko compose: "templates/validation.errors.html" -->\r\n		<!-- /ko -->	 	\r\n	</div>\r\n		<div class="row pad accordion divider">\r\n			<div class="accordion-toggle" data-bind="clickToggle: $parent.utDetailsOpen" >\r\n				<div class="row">\r\n					<div class="bold line pull-left">\r\n						Visit:\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div class="accordion-content pad" data-bind="with: $parent.newUtilization, visible: $parent.utDetailsOpen">\r\n				<div class="row">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Type</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parents[1].visitTypes, value: visitType, text: \'name\', label: \'visitTypes\' }, \r\n											css: { \'invalid\': (validationErrorsArray().indexOf(\'visitType\') !== -1) }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span9" data-bind="visible: showOtherVisitType" >\r\n						<h5 class="grey pad-bottom">Other Type</h5>\r\n						<input data-bind="value: otherType, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherType\') !== -1) }"\r\n							maxlength="100" type="text"/>\r\n					</div>\r\n				</div>\r\n			<div class="row pad-top">\r\n				<div class="span3">\r\n					<h5 class="grey pad-bottom">Visit/Admit Date</h5>\r\n					<div class="row">\r\n						<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n							{\r\n								observableDateTime: admitDate, dateErrors: admitDateErrors, dateName: \'admitDate\', showInvalid: setInvalidAdmitDate,\r\n								datepickerOptions:{ }, datepickerDynamicOptions: {}, dateCss: \'span12\'\r\n							}\r\n						} -->\r\n						<!-- /ko -->\r\n					</div>\r\n				</div>\r\n			<div class="span3">\r\n				<h5 class="grey pad-bottom">Admitted ?</h5>\r\n				<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n					<span data-bind="css: { \'checked\': admitted() === true }">\r\n						<input type="checkbox" data-bind="checked: admitted" />\r\n					</span>\r\n				</div>\r\n			</div>\r\n			<div class="span6">\r\n				<h5 class="grey pad-bottom">Discharge Date</h5>\r\n				<div class="span6">\r\n					<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n						{\r\n							observableDateTime: dischargeDate, dateErrors: dischargeDateErrors, dateName: \'dischargeDate\', showInvalid: setInvalidDischargeDate,\r\n							datepickerOptions:{ }, datepickerDynamicOptions: {minDate: admitDate}, dateCss: \'span12\', showTime: false\r\n						}\r\n					} -->\r\n					<!-- /ko -->\r\n				</div>\r\n				<div data-bind="visible: utilizationLengthStr">\r\n					<span class="grey" data-bind="text: utilizationLengthDesc"></span>\r\n					<span class="pad-left" data-bind="text: utilizationLengthStr"></span>\r\n				</div>\r\n			</div>\r\n		</div>\r\n			<div class="row pad-top">			\r\n				<h5 class="grey pad-bottom">Location</h5>\r\n				<div class="icon-list span6">\r\n					<div data-bind="chsnsingle: { options: $parents[1].utilizationLocations, value: utilizationLocation, text: \'name\', label: \'utilizationLocations\', isCancel: true}"></div>\r\n				</div>				\r\n			</div>\r\n			<div class="row" data-bind="visible: showOtherLocation" >\r\n				<div class="pad-top">\r\n					<h5 class="grey pad-bottom">Other Location</h5>\r\n					<input data-bind="value: otherLocation, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherLocation\') !== -1) }"\r\n						maxlength="100" type="text"/>\r\n				</div>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<div class="span3">\r\n					<h5 class="grey pad-bottom">Disposition</h5>\r\n					<div class="icon-list">\r\n						<div data-bind="chsnsingle: { options: $parents[1].dispositions, value: disposition, text: \'name\', label: \'dispositions\', isCancel: true }"></div>\r\n					</div>\r\n				</div>\r\n				<div class="span9" data-bind="visible: showOtherDisposition" >\r\n					<h5 class="grey pad-bottom">Other Disposition</h5>\r\n					<input data-bind="value: otherDisposition, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherDisposition\') !== -1) }"\r\n						maxlength="100" type="text"/>\r\n				</div>\r\n			</div>\r\n				</div>\r\n		</div>\r\n		<div class="row pad accordion open divider" data-bind="with: $parent.newUtilization">\r\n				<div class="accordion-toggle" data-bind="clickToggle: $parents[1].utContentOpen">\r\n						<div class="bold line">Content:\r\n						</div>\r\n				</div>\r\n				<div class="accordion-content pad" data-bind="visible: $parents[1].utContentOpen">\r\n						<div class="row">\r\n				<div class="span3">\r\n					<h5 class="grey pad-bottom">Source</h5>\r\n					<div class="icon-list">\r\n						<div data-bind="chsnsingle: { options: $parents[1].utilizationSources, value: utilizationSource, text: \'name\', label: \'utilizationSources\', isCancel: true }"></div>\r\n					</div>\r\n				</div>\r\n				<div class="span6">\r\n					<h5 class="grey pad-bottom">Program(s)</h5>\r\n					<div class="icon-list span10" data-bind="multiselect: { options: $parents[1].availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n				</div>\r\n						</div>\r\n						<div class="row pad-top">\r\n								<div class="span12">\r\n										<label>\r\n						<h5 class="grey pad-bottom">Reason</h5>\r\n												<div>\r\n														<textarea data-bind="value: text, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'text\') !== -1) }"\r\n								style="resize: both;" maxlength="5000"></textarea>\r\n												</div>\r\n										</label>\r\n								</div>\r\n						</div>\r\n				</div>\r\n		</div>\r\n		<div class="row pad-top accordion divider">\r\n				<div class="accordion-toggle" data-bind="clickToggle: $parent.utLastNotesOpen">\r\n						<div class="bold line">Past Notes:\r\n						</div>\r\n				</div>\r\n				<div class="accordion-content" data-bind="visible: $parent.utLastNotesOpen, foreach: $parent.lastThreeNotes">\r\n						<div class="row pad-top divider" data-bind="if: createdOn">\r\n								<a class="span12" href="#" data-bind="click: $parents[1].viewDetails">\r\n										<div class="row">\r\n												<strong data-bind="Date: createdOn"></strong> : <span data-bind="with: createdBy"><span data-bind="text: preferredName"></span> - </span>\r\n										</div>\r\n										<div class="row">\r\n												<span class="span12 ellipsis" data-bind="text: text"></span>\r\n										</div>\r\n								</a>\r\n						</div>\r\n				</div>\r\n				<div class="accordion-content" data-bind="visible: $parent.lastThreeNotes().length === 0">\r\n						<em>No notes have been entered</em>\r\n				</div>\r\n	</div>\r\n		<div class="row pad-top divider" data-bind="visible: !$parent.utLastNotesOpen()">\r\n		</div>\r\n		<div class="position bottom left">\r\n				<div class="pad vertical">\r\n						<a class="btn color" href="#" data-bind="click: $parent.gotoHistory">View More</a>\r\n				</div>\r\n		</div>\r\n		<div class="position bottom right">\r\n				<div class="pad vertical">\r\n						<button data-bind="click: $parent.cancel" class="cancel">Cancel</button>\r\n						<input data-bind="click: $parent.saveUtilization, enable: $parent.canSaveUtilization" type="submit" value="Save">\r\n				</div>\r\n		</div>\r\n</form>';
}),n("text!views/shell/shell.html",[],function(){return'<div>\r\n    <!-- ko with: navigation -->\r\n    <!-- ko compose: \'shell/banner.html\' --><!-- /ko -->\r\n    <!-- ko compose: \'shell/subnav.html\' --><!-- /ko -->\r\n    <!-- /ko -->\r\n    <main role="application" data-bind="router: { cacheViews: true }">\r\n    </main>\r\n	<!-- ko compose: \'shell/footer.html\' --><!-- /ko -->\r\n    <!-- ko with: currentModal -->\r\n    <div id="modal" data-bind="visible: Showing, css: classOverride">	\r\n        <div class="content" data-bind="with: Entity">\r\n            <header>\r\n                <h2 class="title">\r\n                    <span data-bind="text: $parent.Title"></span>\r\n                    <i class="close pull-right icon-cancel blue" data-bind="click: $parent.cancelChanges"></i>\r\n                </h2>\r\n            </header>\r\n            <!-- ko if: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: { model: $parent.TemplatePath, activationData: activationData } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <!-- ko ifnot: ($parent.TemplatePath().indexOf(\'html\') === -1) -->\r\n                <!-- ko compose: $parent.TemplatePath -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n            <footer>\r\n                <div class="pull-right">\r\n                    <a class="btn cancel" data-bind="click: $parent.cancelChanges">Cancel</a>\r\n                    <button class="btn color" data-bind="visible: !$parent.canDelete(), enable: canSave, click: $parent.saveChanges">Save</button>\r\n					<!-- ko foreach: $parent.customButtons -->\r\n						<button class="btn color" data-bind="visible: !$parents[1].canDelete(), enable: btnEnabled, click: btnFunction, text: btnText"></button>\r\n					<!-- /ko -->\r\n                    <button class="btn color" data-bind="visible: $parent.canDelete, enable: canSave, click: $parent.delete, text: $parent.deleteText"></button>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div id="alerts" data-bind="foreach: alerts">\r\n        <!-- ko compose: alertPath -->\r\n        <!-- /ko -->\r\n    </div>\r\n</div>'}),n("text!views/shell/sidebar.html",[],function(){return'<nav role="main" data-bind="foreach: navRoutes, css: { open: $parent.showSideBar() }">\r\n    <a role="menuitem" data-bind="click: $parents[1].setRoute, attr: { href: route }, css: { active: $parent.currentRoute() === $data }">\r\n        <img data-bind="attr: { src: settings.imageSource }" /><span data-bind="text: settings.content"></span>\r\n    </a>\r\n</nav>'}),n("text!views/shell/subnav.html",[],function(){return'<header role="navigation">\r\n    <div class="menu_toggle" data-bind="click: $parent.toggleNavVisibility">\r\n        <img src="/NightingaleUI/Content/images/main_menu_toggle.png" data-phyautomation="navigation-context-button" />\r\n        <img data-bind="attr: { src: (!!currentRoute() && currentRoute().config  && !!currentRoute().config.settings) ? currentRoute().config.settings.imageSource : \'\' }" data-phyautomation="route-image" />\r\n        <span data-bind="text: ((currentRoute() && currentRoute().config && !!currentRoute().config.settings) ? currentRoute().config.settings.content : \'\') " data-phyautomation="route-header"></span>\r\n    </div>\r\n    <div>\r\n    <!-- ko compose: \'shell/sidebar.html\' --><!-- /ko -->\r\n    </div>\r\n    <nav class="tabs" data-bind="if: currentRoute() && currentRoute().config">\r\n        <!-- ko foreach: currentRoute().config.settings.pages -->\r\n            <a role="menuitem" data-bind="click: $parent.setSubRoute, text: content, css: { \'active\': $parent.currentSubRoute() === $data }"></a>\r\n        <!-- /ko -->\r\n    </nav>\r\n    <div id="quick-add" data-bind="visible: $parent.showQuickAdd">\r\n        <!-- ko compose: \'viewmodels/shell/quickadd/quickaddpopover\' -->\r\n        <!-- /ko -->\r\n    </div>\r\n</header>'}),n("text!views/templates/action.edit.html",[],function(){return'<div class="body" data-bind="with: action">\r\n	<div class="column">\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned Date:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned By:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned To:\r\n				</span>\r\n			</div>\r\n			<div class="span5">\r\n				<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n				</select>\r\n			</div>\r\n			<div class="span4">\r\n				<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- <div class="row pad-top divider">\r\n			<div class="span3 align-left">\r\n				<span>Action Status:\r\n				</span>\r\n			</div>\r\n			<div class="span9">\r\n				<select style="display: none;">\r\n					<option>In Progress	</option>\r\n					<option>Not Started</option>\r\n					<option>Closed</option>\r\n					<option>Removed </option>\r\n				</select>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<div class="span3 align-left">\r\n					<span>Reason:\r\n					</span>\r\n				</div>\r\n				<div class="span9">\r\n					<textarea>\r\n					</textarea>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Start Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" value="03/15/2014">\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>End Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" id="dp1401893998028">\r\n			</div>\r\n		</div> -->\r\n	</div>\r\n</div>'}),n("text!views/templates/address.edit.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n            <div class="span12">\r\n                <div class="row">\r\n                    <input data-bind="value: line1, disable: $parent.addressOptedOut" placeholder="line one" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line2, disable: $parent.addressOptedOut" placeholder="line two" />\r\n                </div>\r\n                <div class="row">\r\n                    <input data-bind="value: line3, disable: $parent.addressOptedOut" placeholder="line three" />\r\n                </div>\r\n                <div class="row">\r\n                    <input class="span5" style="padding-right: 0;" data-bind="value: city, disable: $parent.addressOptedOut" placeholder="city" />\r\n                    <select class="span4" style="padding-right: 0;" data-bind="options: $root.stateList, value: stateId, optionsValue: \'id\', optionsText: \'name\', disable: $parent.addressOptedOut"></select>\r\n                    <input class="span3" style="padding-right: 0;" data-bind="value: postalCode, disable: $parent.addressOptedOut" placeholder="zip" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/address.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-address lighterblue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <span data-bind="text: cityStateZip, attr: { title: fullFormatted }"></span>\r\n    </div>\r\n</div>'}),n("text!views/templates/allergies.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort && canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort  && canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedAllergies">\r\n        <div class="row divider filter-toggle" data-bind="foreach: $parent.columns, css: { \'active\': $parent.activeAllergy() === $data }">\r\n            <div data-bind="compose: { model: $parent, view: path }, css: cssClass"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedAllergies().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>'}),n("text!views/templates/allergy.edit.html",[],function(){return'<div class="body" data-bind="with: allergy">\r\n    <div class="row">\r\n        <div class="span2 align-right grey">\r\n            Name:\r\n        </div>\r\n        <div class="span3 pad-left" data-bind="text: allergyName">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Status:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.allergyStatuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Reaction:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n            <div class="span9" data-bind="multiselect: { options: $parent.reactions, values: reactionIds, idValue: \'id\', text: \'name\', label: \'reactions\', stringValue: reactionString }"></div>\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Severity:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.severities, value: severity, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top" data-bind="if: source">\r\n        <div class="span2 align-right grey">\r\n            Source:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.allergySources, value: source, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Start Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate,\r\n					maxDate: \'today\', datepickerOptions:{ maxDate: \'+0\' }, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            End Date:\r\n        </div>\r\n        <div class="span3 pad-left">\r\n				<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n					{\r\n						observableDateTime: endDate, dateErrors: endDateErrors, showInvalid: setInvalidEndDate,\r\n						maxDate: \'today\', datepickerOptions:{maxDate: \'+0\'}, datepickerDynamicOptions: {minDate: startDate}, dateName: \'endDate\'\r\n					}\r\n				} -->\r\n				<!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top"></div>\r\n    <div class="row">\r\n        <div class="span3 grey">\r\n            Notes:\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="span12">\r\n            <textarea data-bind="value: notes"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row pad-top">\r\n        <div class="span2 align-right grey">\r\n            Created On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: createdOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            Updated On:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="DateOrDash: updatedOn">\r\n        </div>\r\n        <div class="span2 align-right grey">\r\n            System:\r\n        </div>\r\n        <div class="span2 pad-left grey" data-bind="text: systemName">\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/allergy.expand.html",[],function(){return'<a class="toggle" href="#" data-bind="clickToggle: isExpanded"><i data-bind="css: isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i></a>'}),n("text!views/templates/allergy.name.html",[],function(){return'<a class="edit" href="#" data-bind="text: (allergyName() ? allergyName() : \'-\'), click: setActiveAllergy, attr: { title: allergyName }">\r\n</a>'}),n("text!views/templates/allergy.severity.html",[],function(){return'<div class="ellipsis">\r\n    <span data-bind="with: severity">\r\n        <span data-bind="text: name, attr: { title: name }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: severity">\r\n    	<span>-</span>\r\n    </div>\r\n</div>'}),n("text!views/templates/allergy.startdate.html",[],function(){return'<span data-bind="DateOrDash: startDate"></span>'}),n("text!views/templates/allergy.status.html",[],function(){return'<div class="ellipsis" data-bind="with: status">\r\n    <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n    	<a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n    </span>\r\n    <div class="pull-left filters" data-bind="if: id() === \'2\'">\r\n		<a href="#" data-bind="click: $parent.activatePatientAllergy"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n    </div>\r\n</div>\r\n'}),n("text!views/templates/allergy.type.html",[],function(){return'<div>\r\n    <span data-bind="text: typeString">\r\n    </span>\r\n</div>'}),n("text!views/templates/background.html",[],function(){return'<div class="body">\r\n    <div class="row">\r\n        <h4>Background :</h4>\r\n        <textarea class="span12" data-bind="value: background" maxlength="5000" style="height: 30em; resize: both;" />\r\n    </div>\r\n</div>'}),n("text!views/templates/barrier.edit.html",[],function(){return'<div class="body" data-bind="with: barrier">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input data-bind="value: name, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" />\r\n                    <span><em class="grey" data-bind="visible: !name()">Description is required</em></span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.barrierStatuses, value: status, text: \'name\', label: \'barrierstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Category</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.barrierCategories, value: category, text: \'name\', label: \'barriercategories\' }"></div>\r\n                </div>\r\n            </div>\r\n			<div class="row pad-top">\r\n				<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen, visible: details">\r\n					<h5 class="grey pad-bottom">Existing Details</h5>\r\n					<span data-bind="visible: (!($parent.existingDetailsOpen())), text: \'...\'"></span>				\r\n				</div>\r\n				<pre data-bind="text: details, visible: $parent.existingDetailsOpen" ></pre>\r\n				<div class="row pad-top divider">\r\n					<h5 class="grey pad-bottom">New Details</h5>\r\n					<textarea data-bind="value: newDetails, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 10em; resize: both;"></textarea>\r\n				</div>				\r\n			</div>\r\n        </section>\r\n    </div>\r\n</div>'}),n("text!views/templates/care.team.edit.html",[],function(){return'<div class="body" data-bind="with: selectedPatient">\r\n    <div class="column">\r\n        <section class="data-set clearfix" data-bind="foreach: careMembers">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Preferred Name</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <strong data-bind="text: preferredName" class="string optional" maxlength="255" type="text"></strong>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Assign to</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input type="text" data-bind="typeahead: { name: \'newAssignedToTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n                    <!-- <input data-bind="value: $parent.newAssignedTo, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" /> -->\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>'}),n("text!views/templates/careMember.edit.html",[],function(){return'<div class="body" data-bind="visible: showing">		\r\n	<section class="accordion hoverable open">\r\n				\r\n		<!--search-->\r\n		<div data-bind="with: contactSearch, visible: !editMode()">\r\n			<div class="row pad-top">				\r\n				<div class="span1 align-right grey" maxlength="50">First Name</div>\r\n				<div class="span2 pad-left">\r\n					<input type="text" data-bind="value: criteriaFirstName, valueUpdate: \'afterkeydown\'" placeholder="first name" />\r\n				</div>\r\n				<div class="span1 align-right grey" maxlength="50">Last Name</div>\r\n				<div class="span2 pad-left">		\r\n					<input type="text" data-bind="value: criteriaLastName, valueUpdate: \'afterkeydown\'" placeholder="last name" />\r\n				</div>\r\n				<div class="span1 align-right grey">Type</div>\r\n				<div class="span3 pad-right">\r\n					<div data-bind="multiselect: { options: contactSubTypes, values: criteriaContactSubTypes, text: \'name\', idValue: \'id\', label: \'criteriaContactSubTypes\' }"></div>\r\n				</div>\r\n				<div class="span2">\r\n					<span class="filters" data-bind="visible: showResetFilters">\r\n						<i class="pointer icon-cancel pad-right toggle" title="Clear Filter" data-bind="click: resetFilters"></i>\r\n					</span>\r\n					<button class="btn color pull-right" data-bind="click: searchContacts, enable: canSearchContacts">\r\n						<i class="icon-search"></i>\r\n						<span class="pad-left">Search</span>\r\n					</button>\r\n				</div>\r\n			</div>\r\n			<!--search results-->\r\n			<div class="row pad-top divider"></div>\r\n			<div>\r\n				<em class="row grey pad-left" data-bind="visible: noResultsFound()">No records meet your search criteria</em>\r\n				<div class="row" data-bind="visible: showResultsHeader">								\r\n					<div class="pad-bottom">\r\n						<span>															\r\n							<h1>Results<span data-bind="text: contactsShowingText"></span></h1>\r\n						</span>\r\n					</div>\r\n					<div class="header grey">						 \r\n						<header>\r\n							<div class="line">\r\n								<div class="span8">\r\n									<div class="span2">Last Name</div>\r\n									<div class="span2">First Name</div>\r\n									<div class="span8">Summary</div>\r\n								</div>\r\n								<div class="span4 pad-left">\r\n									Selected Contact\r\n								</div>\r\n							</div>\r\n						</header>\r\n					</div>\r\n				</div>\r\n				<div class="span8">\r\n					<h1 data-bind="visible: searching()">Searching...</h1>\r\n					<div class="body" style="max-height: 310px; min-height: 30px;" data-bind="visible: !searching()">\r\n						<!--ko compose: "templates/contactSearchResults.panel.html" --><!-- /ko -->\r\n					</div>\r\n				</div>\r\n				<div class="span4">\r\n					<div class="row">\r\n						<div data-bind="with: selectedContact" class="header grey">							\r\n							<h1 data-bind="text: fullName" style="overflow-wrap: break-word;"></h1>\r\n							<span class="grey" data-bind="text: contactSummary"></span>\r\n							<div data-bind="with: deceased">\r\n								<div class="row pad-top" data-bind="visible: (name() == \'Yes\')">\r\n									<strong>Deceased:</strong>\r\n									<span>Yes</span>\r\n								</div>\r\n							</div>\r\n						</div>						\r\n					</div>\r\n					<div class="row pad-top" data-bind="visible: $parent.contactAlreadyAssigned">\r\n						<strong  data-bind="text: $parent.contactAlreadyAssigned"></strong>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>						\r\n		<div class="row pad-top" data-bind="visible: canAddContact">\r\n			<span class="grey pad-right">can\'t find the right contact?</span>  \r\n			<button class="btn small" data-bind="click: createNewContact">\r\n				<i class="icon-plus"></i>\r\n				<span class="pad-left">Add</span>\r\n			</button>\r\n		</div>\r\n		<div class="row pad-top" data-bind="visible: selectedContact">\r\n			<div class="row" data-bind="visible: editMode">\r\n				<div class="line" data-bind="with: selectedContact">\r\n					<span class="span1">&nbsp;</span>\r\n					<h1 data-bind="text: fullName()"></h1>\r\n					<span class="grey" data-bind="text: contactSummary()"></span>\r\n				</div>\r\n			</div>\r\n			<div data-bind="with: careMember">\r\n				<!-- ko compose: "templates/validation.errors.html" -->\r\n				<!-- /ko -->				\r\n				<div class="row pad-top">\r\n					<div class="span1 align-right grey">Role</div>\r\n					<div class="span3" data-bind="chsnsingle: { options: $parent.computedRoles, value: roleId, text: \'role\', idValue: \'id\'}, \r\n							css: { \'invalid\': (validationErrorsArray().indexOf(\'role\') !== -1) } "></div>										\r\n					<div data-bind="visible: $parent.showCustomRole">\r\n						<div class="span1 align-right grey">Other Role</div>\r\n						<div class="span2">\r\n							<input type="text" data-bind="value: customRoleName, attr:{maxlength: 100}, valueUpdate: \'afterkeydown\', \r\n									css: { \'invalid\': (validationErrorsArray().indexOf(\'customRoleName\') !== -1) } " </input>\r\n						</div>\r\n					</div>\r\n					<div class="span1 align-right grey">Core?</div>\r\n					<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n						<span data-bind="css: { \'checked\': core }" class="checked">\r\n							<input type="checkbox" data-bind="clickToggle: core"></input>\r\n						</span>\r\n					</div>					\r\n				</div>\r\n				<div class="pad-top"></div>	\r\n				<div class="row pad-top">\r\n					<div class="span1 align-right grey">\r\n						Start Date\r\n					</div>\r\n					<div class="span2"> \r\n						<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n							{\r\n								observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate, \r\n								datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n							}\r\n						} -->\r\n						<!-- /ko -->			\r\n					</div>\r\n					<div class="span1 align-right grey">\r\n						End Date\r\n					</div>\r\n					<div class="span2">        	\r\n						<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n							{\r\n								observableDateTime: endDate, dateErrors: endDateErrors, showInvalid: setInvalidEndDate, \r\n								datepickerOptions:{}, datepickerDynamicOptions: {minDate: startDate}, dateName: \'endDate\'\r\n							}\r\n						} -->\r\n						<!-- /ko -->\r\n					</div>	\r\n					\r\n					<div class="span1 align-right grey">Status</div>\r\n					<div class="span1" data-bind="chsnsingle: { options: $parent.careMemberStatuses, value: statusId, text: \'name\', idValue: \'id\' }"></div>\r\n				</div>\r\n				<div class="pad-top"></div>\r\n				<div class="row pad-top">\r\n					<div class="span1 align-right grey">Distance</div>\r\n					<div class="span1">\r\n						<input type="text" data-bind="value: distance, numericDecimal: distance, valueUpdate: \'afterkeydown\', \r\n							attr:{maxlength: 10, min: 0}" />\r\n					</div>\r\n					\r\n					<div class="span1 radio" data-bind="hoverToggle: \'hover\'">\r\n						<span data-bind="css: { \'checked\': distanceUnit()===\'mi\' }" class="">\r\n							<input type="radio" data-bind="clickRadio: distanceUnit, setValue: \'mi\'">\r\n						</span>\r\n					</div>\r\n					<span class="span1 grey">Miles</span>\r\n															\r\n					<div class="span1 radio" data-bind="hoverToggle: \'hover\'">\r\n						<span data-bind="css: { \'checked\': distanceUnit()===\'km\' }" class="">\r\n							<input type="radio" data-bind="clickRadio: distanceUnit, setValue: \'km\'">\r\n						</span>\r\n					</div>\r\n					<span class="span1 grey">Kilometers</span>\r\n					\r\n					<div class="span2 align-right grey">Frequency</div>\r\n					<div class="span2" data-bind="chsnsingle: { options: $parent.frequencies, value: frequencyId, text: \'name\', idValue: \'id\', isCancel: true, caption: \'None\' }"></div>					\r\n				</div>\r\n				<div class="pad-top"></div>				\r\n				<div class="row pad-top">\r\n					<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen, visible: notes">\r\n						<h5 class="grey pad-bottom">Existing Notes</h5>\r\n						<span data-bind="visible: (!($parent.existingNotesOpen())), text: \'...\'"></span>\r\n					</div>\r\n					<pre data-bind="text: notes, visible: $parent.existingNotesOpen" ></pre>\r\n					<div class="row pad-top divider">\r\n						<h5 class="grey pad-bottom">Notes</h5>\r\n						<textarea data-bind="value: newNotes, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 10em; resize: both;"></textarea>\r\n					</div>\r\n				</div>\r\n				<div data-bind="visible: !isNew()">\r\n					<div class="row pad-top divider">\r\n						<span class="grey">Created On: 	</span>\r\n						<span class="pad-left" data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy()? createdBy().preferredName : \'\'"></span>\r\n					</div>\r\n					<div class="row pad-top" data-bind="if: updatedOn">\r\n						<span class="grey">Updated On:  </span>\r\n						<span class="pad-left" data-bind="DateTime: updatedOn"></span> by <span data-bind="text: updatedBy()? updatedBy().preferredName : \'\'"></span>\r\n					</div>\r\n					<div class="row pad-top" data-bind="if: dataSource">\r\n						<span class="grey" >System:  </span>\r\n						<span class="pad-left" data-bind="text: dataSource"></span>\r\n					</div>\r\n				</div>				\r\n			</div>		\r\n	</section>\r\n</div>'}),n("text!views/templates/careMembers.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row" data-bind="visible: (careMembers().length > 0)">\r\n        <div class="grey line" >									\r\n			<div class="span4 ellipsis">\r\n				<span>Name</span>\r\n			</div>\r\n			<div class="span4 ellipsis">\r\n				<span>Role</span>\r\n			</div>\r\n			<div class="span1 ellipsis">\r\n				<span>Core</span>\r\n			</div>\r\n			<div class="span1 ellipsis">\r\n				<span>Status</span>\r\n			</div>\r\n		</div>\r\n		<div class="divider"></div>\r\n    </div>\r\n    <div data-bind="foreach: careMembers">\r\n        <div class="line filter-toggle ellipsis" data-bind="click: $parent.selectCareMember, css:{ \'active\': $parent.selectedCareMember() === $data }">			\r\n			 \r\n				<div class="span4 grey ellipsis" data-bind="with: contact">\r\n					<span data-bind="text: fullName, attr: { \'title\': fullName }"></span>\r\n				</div>\r\n				<div class="span4 grey ellipsis" >\r\n					<span data-bind="text: computedRoleName, attr: { \'title\': computedRoleName }"></span>\r\n				</div>\r\n			 			\r\n			<div class="span1 grey">\r\n				<div class="ellipsis">\r\n					<span class="pull-left filters" data-bind="if: core()">\r\n						<a href="#" data-bind="click: $parent.clearCore"><i class="icon-checkbox-on blue toggle" title="Clear core"></i></a>\r\n					</span>\r\n					<div class="pull-left filters" data-bind="if: !core()">        \r\n						<a href="#" data-bind="click: $parent.setCore"><i class="icon-checkbox-off blue toggle" title="Set as core member"></i></a>\r\n					</div>					\r\n				</div>				\r\n			</div>\r\n			<div class="span1 grey">\r\n				<div class="ellipsis">\r\n					<span class="pull-left filters" data-bind="if: statusId() === 1">\r\n						<a href="#" data-bind="click: $parent.deactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n					</span>\r\n					<div class="pull-left filters" data-bind="if: statusId() !== 1">        \r\n						<a href="#" data-bind="click: $parent.activate"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n					</div>					\r\n				</div>\r\n			</div>\r\n			<div class="span1 grey">\r\n				<div class="pull-right filters">\r\n					<a href="#" data-bind="click: $parent.editCareMember"><i class="icon-edit toggle" title="Edit"></i></a>		\r\n				</div>				\r\n			</div>\r\n			<div class="span1 grey">\r\n				<div class="pull-left filters">\r\n					<a href="#" data-bind="click: $parent.deleteCareMember, clickBubble: false"><i class="icon-cancel red toggle" title="Delete"></i></a>		\r\n				</div>\r\n			</div>\r\n			\r\n			<!-- this column is just for debug: -->		\r\n			<!-- <div class="span5 grey ellipsis" >\r\n				<span data-bind="text: moment(updatedOn()? updatedOn() : createdOn()).format(\'MM/DD/YYYY\')"></span>\r\n			</div> -->\r\n		</div>\r\n		<div class="divider" style="margin-top: 0px; padding-top: 0px;"></div>\r\n    </div>\r\n    <!-- <div class="row" data-bind="visible: careMembers().length === 0">\r\n        <em>There are no care team members</em>\r\n    </div> -->\r\n</div>'}),n("text!views/templates/clinical.dataentry.html",[],function(){return'<div class="body" data-bind="visible: showing">\r\n    <div class="row">\r\n    	<section class="accordion">\r\n    		<div class="row">\r\n                <span class="span2"><strong>Select Data Type:</strong></span>\r\n                <div class="span2" data-bind="chsnsingle: { options: dataTypes, value: computedActiveDataType, text: \'name\' }"></div>\r\n    		</div>\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <hr>\r\n                </div>\r\n            </div>\r\n    	</section>\r\n        <section class="accordion" data-bind="with: selectedTemplate">\r\n            <div class="row" data-bind="with: $parent.activeDataType">\r\n                <h3 data-bind="text: name, attr: { title: name }"></h3>\r\n            </div>\r\n            <!-- ko with: firstSection -->\r\n                <!-- ko compose: { model: path, activationData: { activeDataType: $parents[1].activeDataType, selectedPatient: $parents[1].selectedPatient } } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n        </section>\r\n        <section class="accordion" data-bind="with: selectedTemplate">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <hr>\r\n                </div>\r\n            </div>\r\n            <!-- ko with: secondSection -->\r\n                <!-- ko compose: { model: path, activationData: { activeDataType: $parents[1].activeDataType, selectedPatient: $parents[1].selectedPatient } } -->\r\n                <!-- /ko -->\r\n            <!-- /ko -->\r\n        </section>\r\n    </div>\r\n</div>';
}),n("text!views/templates/clinicalBackground.html",[],function(){return'<div class="body">\r\n    <div class="row">\r\n        <h4>Clinical Background :</h4>\r\n        <textarea class="span12" data-bind="value: clinicalBackground" maxlength="5000" style="height: 30em; resize: both;" />\r\n    </div>\r\n</div>'}),n("text!views/templates/contact.edit.html",[],function(){return'<div data-bind="visible: showing">	\r\n	<section class="accordion hoverable open" data-bind="with: contactCard">\r\n		<!-- ko compose: \'templates/contactcard.html\' -->\r\n		<!-- /ko -->\r\n	</section>\r\n</div>'}),n("text!views/templates/contact.tabs.html",[],function(){return'<div class="row">\r\n	<nav class="tabs span12">\r\n		<ul>\r\n			<!-- ko foreach: $parent.tabs -->					\r\n				<li data-bind="css: { \'active\': $parent.activeTab() === name }, click: function(){ $parents[1].setActiveTab($parent, name) }, clickBubble: false, visible: isShowing">\r\n					<!-- ko if: imgAlt -->\r\n						<img data-bind="attr:{ alt: imgAlt, src: imgSource }" />\r\n					<!-- /ko -->\r\n					<!-- ko if: cssClass -->\r\n						<i data-bind="attr:{ class: cssClass }"></i>\r\n					<!-- /ko -->	\r\n					<a role="menuitem" data-bind="text: name, style: {color: hasErrors() ? \'red\' : \'black\'}"></a>						\r\n				</li>\r\n			<!-- /ko -->				\r\n		</ul>\r\n	</nav>\r\n</div>'}),n("text!views/templates/contactSearchResults.panel.html",[],function(){return'<div class="panel-wrapper">\r\n	<!-- <em class="grey" data-bind="visible: noResultsFound()">No records meet your search criteria</em>\r\n	<div class="grey row divider" data-bind="visible: (myContactSearchResults().length > 0)">\r\n		<div class="span2">Last Name</div>\r\n		<div class="span2">First Name</div>\r\n		<div class="span8">Summary</div>\r\n	</div> -->\r\n	<div data-bind="foreach: myContactSearchResults">		\r\n		<div class="line filter-toggle ellipsis" data-bind="click: $parent.selectContact, css:{ \'active\': $parent.selectedContact() === $data }">			\r\n			<div class="span2 grey ellipsis">\r\n				<span data-bind="text: lastName, attr:{ title: lastName }"></span>\r\n			</div>\r\n			<div class="span2 grey ellipsis">\r\n				<span data-bind="text: firstName, attr:{ title: firstName }"></span>\r\n			</div>\r\n			<div class="span8 grey ellipsis">\r\n				<span data-bind="text: contactSummary, attr: { title: contactSummary }"></span>\r\n			</div>\r\n						\r\n		</div>\r\n		<div class="divider" style="margin-top: 0px; padding-top: 0px;"></div>\r\n	</div>\r\n	<!-- load more -->\r\n	<div data-bind="visible: !searching()">\r\n		<div data-bind="visible: canLoadMoreContacts">\r\n			<div class="row pad-top">\r\n				<button class="small" data-bind="click: loadMoreContacts">Load more...</button>\r\n			</div>\r\n		</div>\r\n		<div data-bind="visible: maxContactsLoaded">\r\n			<div class="line">\r\n				<em>... cannot load more (try a different search criteria)</em>\r\n			</div>\r\n		</div>		\r\n	</div>\r\n</div>'}),n("text!views/templates/contactcard.html",[],function(){return'  <div class="body">\r\n	<div class="row pad-bottom pad-left" data-bind="visible: $parent.contactTypesShowing">\r\n		<!--todo: put the dropdown with options. options feeds from contact types request where GroupType=1 and should show "person" as an option -->\r\n		<h5 class="span2 grey">Contact Type</h5>\r\n		<div class="span4" data-bind="chsnsingle:{ options: $parent.contactTypes, value: contactTypeId, idValue: \'id\', text: \'name\', label: \'contactTypes\'}"></div>\r\n	</div>\r\n	<!-- ko compose: \'templates/contact.tabs.html\' -->\r\n	<!-- /ko -->    \r\n    <div class="row pad top">\r\n        <h2 class="span12" data-bind="text: $parent.fullName, attr: { title: $parent.fullName }"></h2>\r\n    </div>\r\n	\r\n	<div class="row" data-bind="visible: activeTab() === \'Profile\'">        \r\n		<div class="row validation-summary" data-bind="if: profileValidationErrors().length > 0">            \r\n			<ul data-bind="foreach: profileValidationErrors">\r\n				<li class="validation-errors">\r\n					<h5 data-bind="text: Message"></h5>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n		<div class="row" data-bind="visible: isDuplicate">\r\n			<span class="errorheader" style="margin-top: 10px; border: 1px solid; background: #fbcbc7; color: #871409; display: block; font-size: 11px; padding: 5px;">\r\n			<a href="#">\r\n				<i class="icon-warning red"></i>\r\n			</a>A contact already exists with the same name. Do you want to continue and create? <button class="btn small color" data-bind="click: $parent.forceSave">Proceed and Create</button></span>\r\n		</div>\r\n		<div class="row">\r\n			<label class="span2">\r\n				<span>Prefix</span>\r\n				<input class="span1" type="text" maxlength="20" data-bind="value: prefix, valueUpdate: \'afterkeydown\'" placeholder="prefix" />\r\n			</label>\r\n			<label class="span5">\r\n				<span>First Name</span>\r\n				<input type="text" maxlength="100" data-bind="value: firstName, valueUpdate: \'afterkeydown\', css: { invalid: (profileValidationErrorsArray().indexOf(\'firstName\') !== -1) }" placeholder="first name" />\r\n			</label>\r\n			<label class="span5">\r\n				<span>Preferred Name</span>\r\n				<input type="text" maxlength="100" data-bind="value: preferredName, valueUpdate: \'afterkeydown\'" placeholder="preferred name" />\r\n			</label>				\r\n		</div>			\r\n		<div class="row">\r\n			<label class="span3">\r\n				<span>Middle Name</span>\r\n				<input type="text" maxlength="100" data-bind="value: middleName, valueUpdate: \'afterkeydown\'" placeholder="middle name" />\r\n			</label>\r\n			<label class="span7">\r\n				<span>Last Name</span>\r\n				<input type="text" maxlength="100" data-bind="value: lastName, valueUpdate: \'afterkeydown\', css: { invalid: (profileValidationErrorsArray().indexOf(\'lastName\') !== -1) }" placeholder="last name" />\r\n			</label>\r\n			<label class="span2">\r\n				<span>Suffix</span>\r\n				<input type="text" maxlength="20" data-bind="value: suffix, valueUpdate: \'afterkeydown\'" placeholder="suffix" />\r\n			</label>\r\n		</div>\r\n		<div class="row">				\r\n			<label class="span4">\r\n				<span>Gender</span>\r\n				<div data-bind="chsnsingle: { options:  $parent.genders, value: gender, text: \'Description\', idValue: \'Gender\' }"></div>\r\n			</label>					\r\n			<label class="span4">					\r\n				<span>Deceased</span>\r\n				<div data-bind="chsnsingle: { options:  $parent.deceasedStatuses, value:  deceasedId, text: \'name\', idValue: \'id\' }"></div>\r\n			</label>\r\n			<label class="span4">					\r\n				<span>Status</span>\r\n				<div data-bind="chsnsingle: { options: $parent.contactStatuses, value: statusId, text: \'name\', idValue: \'id\' }"></div>\r\n			</label>\r\n		</div>\r\n		\r\n		<div class="row divider pad-top pad-bottom bold">Type Details</div>\r\n		<div class="row validation-summary" data-bind="if: $parent.isDuplicateSubType()">            \r\n			<ul>\r\n				<li class="validation-errors">\r\n					<h5>Type already exist</h5>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n		<label class="span4">\r\n			<span >Type</span>\r\n			<div data-bind="chsnsingle: { options: $parent.contactSubTypes, value: $parent.selectedSubType, text: \'name\', idValue: \'id\', isCancel: true, caption: \'None\' }, \r\n						css: { invalid: $parent.isDuplicateSubType() }"></div>					\r\n		</label>\r\n		<label class="span4">\r\n			<span>Specialty</span>\r\n			<div data-bind="chsnsingle: { options: $parent.contactSpecialties, value: $parent.selectedSpecialty, text: \'name\', idValue: \'id\', isCancel: true, caption: \'None\' }, \r\n						css: { invalid:  $parent.showInvalidSpecialty() }"></div>\r\n		</label>\r\n		<label class="span4">\r\n			<span>Sub-Specialties</span>				\r\n			<div data-bind="multiselect: { options: $parent.contactSubSpecialties, values: $parent.selectedSubSpecialties, text: \'name\', idValue: \'id\', label: \'contactsubspecialties\' },\r\n						css: { invalid: $parent.showInvalidSubSpecialties() }"></div>\r\n		</label>				\r\n		\r\n		<div class="row pad-top">\r\n			<button class="span2 btn small color pull-right" data-bind="click: $parent.addContactSubType, enable: $parent.canAddContactSubType">\r\n				<i class="icon-plus"></i>\r\n				<span class="pad-left">Add</span>\r\n			</button>\r\n		</div>\r\n		<!-- list the lines of ( type /specialty /subspecialty ) here -->\r\n		<!-- ko foreach: contactSubTypes -->\r\n			<div class="row pad-top divider">\r\n				<span class="span4" data-bind="text: subTypeName()"/>\r\n				<span class="span4" data-bind="text: specialtyName()"/>\r\n				<span class="span3" data-bind="text: subSpecialtyString()"/>\r\n				<div class="pull-right filters">\r\n					<a href="#" data-bind="click: $parents[1].removeContactSubType"><i class="icon-cancel red toggle" title="Delete"></i></a>\r\n				</div>\r\n			</div>\r\n		<!-- /ko -->\r\n		<div data-bind="visible: !isNew()">\r\n			<div class="row pad-top divider">\r\n				<span class="grey">Created On: 	</span>\r\n				<span class="pad-left" data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy()? createdBy().preferredName : \'\'"></span>\r\n			</div>\r\n			<div class="row pad-top" data-bind="if: updatedOn">\r\n				<span class="grey">Updated On:  </span>\r\n				<span class="pad-left" data-bind="DateTime: updatedOn"></span> by <span data-bind="text: updatedBy()? updatedBy().preferredName : \'\'"></span>\r\n			</div>\r\n			<div class="row pad-top" data-bind="if: dataSource">\r\n				<span class="grey" >System:  </span>\r\n				<span class="pad-left" data-bind="text: dataSource"></span>\r\n			</div>\r\n		</div>\r\n		<div class="line"></div>\r\n		<div class="line"></div>\r\n	</div>\r\n	\r\n    <div class="row" data-bind="visible: activeTab() === \'General\'">\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Communication Modes</h4>\r\n                    <ul>\r\n                        <li class="row pad-top">\r\n                            <strong class="span4">Mode</strong>\r\n                            <strong class="span4">Opt-Out?</strong>\r\n                            <strong class="span4">Preferred?</strong>\r\n                        </li>\r\n						<div class="pad-top">\r\n							<!-- ko foreach: modes -->\r\n							<li>\r\n								<strong class="span4" data-bind="text: name, attr: { title: name }"></strong>\r\n								<label class="control-group span4">\r\n									<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n										<span data-bind="css: { \'checked\': optOut }">\r\n											<input type="checkbox" data-bind="clickToggle: optOut" />\r\n										</span>\r\n									</div>\r\n								</label>\r\n								<label class="control-group span4">\r\n									<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n										<span data-bind="css: { \'checked\': preferred }">\r\n											<input type="checkbox" data-bind="disable: optOut, clickToggle: preferred" />\r\n										</span>\r\n									</div>\r\n								</label>\r\n							</li>\r\n							<!-- /ko -->\r\n						</div>                        \r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span6">\r\n                    <h4>Preferred Days of Week</h4>\r\n                    <ul class="pad-top">\r\n                        <!-- ko foreach: $root.daysOfWeek -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredDaysOfWeek().indexOf(Code) !== -1 || $parent.preferredDaysOfWeek() === \'Any\') }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredDaysOfWeekIds, setValue: Id" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: Name, attr: { title: Name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n                </div>\r\n                <div class="span6">\r\n                    <h4>Preferred Times of Day</h4>\r\n                    <ul class="pad-top">\r\n                        <!-- ko foreach: $root.timesOfDay -->\r\n                        <li>\r\n                            <label class="control-group">\r\n                                <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                                    <span data-bind="css: { \'checked\': ($parent.preferredTimesOfDay().indexOf(name()) !== -1) }">\r\n                                        <input type="checkbox" data-bind="clickToggleInArray: $parent.preferredTimesOfDayIds, setValue: id()" />\r\n                                    </span>\r\n                                </div>\r\n                                <strong data-bind="text: name, attr: { title: name }"></strong>\r\n                            </label>\r\n                        </li>\r\n                        <!-- /ko -->\r\n                    </ul>\r\n					<div class="pad-top">\r\n						<h4>Time Zone</h4>\r\n						<div class="span6 pad-top">							\r\n							<div class="row" data-bind="chsnsingle:{ options: $root.timeZones, value: timeZoneId, idValue: \'id\', text: \'name\', isCancel: true }"></div>							\r\n							\r\n						</div>						\r\n					</div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'Text\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span10">Number</strong>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredText() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredText, setValue: \'null\', disable: textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones -->\r\n            <!-- ko if: (isText() && !optOut()) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': textPreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredText, setValue: $data, disable: $parent.textOptedOut" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span10">\r\n                    <!-- ko compose: \'templates/phone.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'Phone\'">\r\n		<div class="row validation-summary" data-bind="if: phoneValidationErrors().length > 0">            \r\n			<ul data-bind="foreach: phoneValidationErrors">\r\n				<li class="validation-errors">\r\n					<h5 data-bind="text: Message"></h5>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n		\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Number</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addPhone, disable: phoneOptedOut, attr: { \'title\': phoneOptedOut() ? \'Phone opted out\' : \'Add Phone\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Phone</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredPhone() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredPhone, disable: phoneOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: phones().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': phonePreferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredPhone, disable: ($parent.phoneOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row" data-bind="visible: $parent.phoneOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="row" data-bind="options: $root.phoneTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.phoneOptedOut()"></select>\r\n                    <!-- <div class="row" data-bind="visible: !$parent.phoneOptedOut(), chsnsingle: { options: $root.phoneTypes, value: typeId, idValue: \'id\', text: \'name\', label: \'phones\' }"></div> -->\r\n                </div>\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/phone.edit.html\' -->\r\n                    <!-- /ko -->\r\n                    <label class="row">\r\n                        <span>SMS</span>\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': isText }">\r\n                                <input type="checkbox" data-bind="clickToggle: isText, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.phoneOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removePhone"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'Email\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span2">Type</strong>\r\n                <strong class="span3">Email Address</strong>\r\n                <strong class="span3">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addEmail, disable: emailOptedOut, attr: { \'title\': emailOptedOut() ? \'Email opted out\' : \'Add Email\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Email</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredEmail() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredEmail, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: emails().sort(function (l, r) { return (l.id() == r.id()) ? (l.id() > r.id() ? 1 : -1) : (l.id() > r.id() ? 1 : -1) }) -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredEmail, disable: ($parent.emailOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.emailOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                    <select class="span2" data-bind="options: $root.emailTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.emailOptedOut()"></select>\r\n                <div class="span4">\r\n                    <!-- ko compose: \'templates/email.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span2">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.emailOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeEmail"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'Address\'">\r\n        <ul class="list-items">\r\n            <li class="row">\r\n                <strong class="span2">Preferred?</strong>\r\n                <strong class="span3">Type</strong>\r\n                <strong class="span3">Address</strong>\r\n                <strong class="span2">Opt-out?</strong>\r\n                <button class="span2 btn small color pull-right" data-bind="click: addAddress, disable: addressOptedOut, attr: { \'title\': addressOptedOut() ? \'Address opted out\' : \'Add Address\' }">\r\n                    <i class="icon-plus"></i>\r\n                    <span class="pad-left">Address</span>\r\n                </button>\r\n            </li>\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': !preferredAddress() }">\r\n                            <input type="radio" data-bind="clickRadio: preferredAddress, disable: addressOptedOut, setValue: \'null\'" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <strong class="span10"> None</strong>\r\n            </li>\r\n            <!-- ko foreach: addresses -->\r\n            <li class="row">\r\n                <div class="span2">\r\n                    <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                        <span data-bind="css: { \'checked\': preferred }">\r\n                            <input type="radio" data-bind="clickRadio: $parent.preferredAddress, disable: ( $parent.addressOptedOut() || optOut), setValue: $data" />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="span2" data-bind="visible: $parent.addressOptedOut, with: type"><span data-bind="text: name, attr: { title: name }"></span></div>\r\n                <select class="span2" data-bind="options: $root.addressTypes, value: typeId, optionsValue: \'id\', optionsText: \'name\', visible: !$parent.addressOptedOut()"></select>\r\n                <div class="span5">\r\n                    <!-- ko compose: \'templates/address.edit.html\' -->\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <div class="checker" data-bind="hoverToggle: \'hover\'">\r\n                            <span data-bind="css: { \'checked\': optOut }">\r\n                                <input type="checkbox" data-bind="clickToggle: optOut, disable: $parent.addressOptedOut" />\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="span1">\r\n                    <div class="row">\r\n                        <a href="#" data-bind="click: $parent.removeAddress"><i class="icon-cancel red"></i></a>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n    <div class="row" data-bind="visible: activeTab() === \'Language\'">\r\n		<div class="row validation-summary" data-bind="if: languageValidationErrors().length > 0">            \r\n			<ul data-bind="foreach: languageValidationErrors">\r\n				<li class="validation-errors">\r\n					<h5 data-bind="text: Message"></h5>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n        <div class="span12">\r\n            <div class="row">\r\n                <div class="span12">\r\n                    <h4>Add new spoken language</h4>\r\n                    <div class="row pad-top">\r\n                        <div class="span3" data-bind="chsnsingle: { options: $root.languages, value: newLanguage, text: \'name\', label: \'languages\' }"></div>\r\n						<label class="span2"></label>\r\n                        <button class="span3 btn small color pull-right" data-bind="click: addLanguage, enable: canAddLanguage">\r\n                            <i class="icon-plus"></i>\r\n                            <span class="pad-left">Language</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <ul class="list-items">\r\n                    <li class="row">\r\n                        <strong class="span2">Preferred?</strong>\r\n                        <strong class="span10">Language</strong>\r\n                    </li>\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': !preferredLanguage() }">\r\n                                    <input type="radio" data-bind="clickRadio: preferredLanguage, setValue: \'null\'" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <strong class="span10"> None</strong>\r\n                    </li>\r\n                    <!-- ko foreach: languages -->\r\n                    <li class="row">\r\n                        <div class="span2">\r\n                            <div class="radio" data-bind="hoverToggle: \'hover\'">\r\n                                <span data-bind="css: { \'checked\': preferred }">\r\n                                    <input type="radio" data-bind="clickRadio: $parent.preferredLanguage, setValue: $data" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="span10">\r\n                            <strong data-bind="text: name, attr: { title: name }"></strong>\r\n                        </div>\r\n                    </li>\r\n                    <!-- /ko -->\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/datetimepicker.html",[],function(){return'<div>\r\n	<div data-bind="if: showDate, attr: {class: dateCss}">	\r\n		<input \r\n			data-bind="value: dateStr, valueUpdate: \'afterkeydown\', \r\n					css: { \'invalid\': (dateErrors().length > 0) || showInvalid, \'datepicker\': isDatepicker }, \r\n					datepickerOptions: datepickerOptions,\r\n					attr:{ name: dateName }" type="text">		\r\n	</div>\r\n	<div data-bind="if: showTime, attr: {class: timeCss}">								\r\n		<!-- ko if: Modernizr.inputtypes.time -->			\r\n			<input data-bind="value: timeStr, valueUpdate: [\'afterkeydown\', \'input\'], attr: { \'disabled\': disableTime }, attr:{ name: timeName }, \r\n						css: {\'invalid\': showInvalidTime}" type="time" style="height: 20px; width: 100%">\r\n		<!-- /ko -->\r\n		<!-- ko ifnot: Modernizr.inputtypes.time -->\r\n			<input data-bind="jqtimepicker: {observableDateTime: observableDateTime, showDate: showDate }, \r\n					attr: { \'disabled\': isDisableTime, name: timeName }, css: {\'invalid\': showInvalidTime}" \r\n					type="text" style="height: 20px; width: 100%">			\r\n		<!-- /ko -->\r\n	</div>\r\n</div>'}),n("text!views/templates/email.edit.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n            <input data-bind="value: text, disable: $parent.emailOptedOut" placeholder="email" />\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/email.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-email lighterblue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span class="span12 ellipsis" data-bind="text: text, attr: { title: text }"></span>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/event.details.html",[],function(){return'<div class="body" data-bind="with: event">\r\n	<div class="column">\r\n		<div class="row pad-top">\r\n		\r\n			<!-- ko if ($parent.hasTimes) -->\r\n				<div class="span3 align-left">\r\n					<span>Date and Time: </span>\r\n				</div>\r\n				<div class="span9" data-bind="text: timeString()"></div>\r\n			<!-- /ko -->			\r\n			<!-- ko ifnot ($parent.hasTimes) -->\r\n				<div class="span3 align-left">\r\n					<span>Date: </span>\r\n				</div>\r\n				<div class="span9" data-bind="DateOrNothing: start"></div>\r\n			<!-- /ko -->\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span3 align-left">\r\n			<span>Individual:\r\n			</span>\r\n		</div>\r\n      	<div class="span9" data-bind="text: patientName"></div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span3 align-left">\r\n			<span>Assigned to:\r\n			</span>\r\n		</div>\r\n      	<div class="span9" data-bind="text: assignedToName"></div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span3 align-left">\r\n			<span>Title:\r\n			</span>\r\n		</div>\r\n  		<span class="span9" data-bind="text: title"></span>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span3 align-left">\r\n			<span>All day?:\r\n			</span>\r\n		</div>\r\n  		<span class="span9" data-bind="text: allDay() ? \'Yes\' : \'No\'"></span>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span3 align-left">\r\n			<button class="btn color" data-bind="text: $parent.btnMsg, click: $parent.gotoSource, enable: $parent.hasPatient"></button>\r\n		</div>\r\n	</div>\r\n</div>';
}),n("text!views/templates/focusproblem.edit.html",[],function(){return'<div class="row pad-top divider">\r\n	<div class="span3" data-bind="text: name"></div>\r\n	<div class="span2">\r\n		<select data-bind="options: $parent.observationDisplays, value: displayId, optionsText: \'name\', optionsValue: \'id\'"></select>\r\n	</div>\r\n	<div class="span3">\r\n		<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n			{\r\n				observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate, \r\n				maxDate: \'today\', datepickerOptions:{ maxDate: \'+0\' }, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n			}\r\n		} -->\r\n		<!-- /ko -->\r\n	</div>\r\n	<div class="span3">\r\n		<select data-bind="options: $parent.observationStates, value: stateId, optionsText: \'name\', optionsValue: \'id\', attr: { \'disabled\': isNew }"></select>\r\n	</div>\r\n	<div class="span1">\r\n    <a href="#" data-bind="click: $parent.deleteFocusProblem, clickBubble: false"><i class="icon-cancel red"></i></a>\r\n	</div>\r\n</div>'}),n("text!views/templates/focusproblems.html",[],function(){return'<div class="body" data-bind="visible: showing">\r\n	<div class="pad-vertical">\r\n        <!-- ko compose: { model: \'viewmodels/patients/sections/additional.problem.observations\', activationData: { selectedPatient: selectedPatient } } -->\r\n		<!-- /ko -->\r\n	</div>\r\n	<div class="pad-vertical">\r\n		<!-- ko compose: { model: \'viewmodels/patients/sections/problems.list\', activationData: { selectedPatient: selectedPatient} } -->\r\n		<!-- /ko -->\r\n	</div>\r\n	<section class="accordion" data-bind="visible: showActions">\r\n		<div class="row">\r\n			<div class="accordion-content columns">\r\n				<div class="column">\r\n					<form>\r\n						<div class="row">\r\n							<div class="pad vertical">\r\n							</div>\r\n							<div class="position bottom right">\r\n								<button data-bind="click: cancelFocusProblems" class="cancel small">Cancel</button>\r\n								<button data-bind="click: saveFocusProblems" class="small color">Save</button>\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</section>\r\n</div>'}),n("text!views/templates/forcephone.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="icon-phone blue"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { title: formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/goal.edit.html",[],function(){return'<div class="body" data-bind="with: goal">\r\n    <div class="column">\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle">\r\n            </div>\r\n            <div class="accordion-content">\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Description</span>\r\n                    </div>\r\n                    <div class="span9">\r\n                        <input data-bind="value: name, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="255" type="text" />\r\n                        <span><em class="grey" data-bind="visible: !name()">Description is required</em></span>\r\n                    </div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Focus Area(s)</span>\r\n                    </div>\r\n                    <div class="span6" data-bind="multiselect: { options: $parent.focusAreas, values: focusAreaIds, idValue: \'id\', text: \'name\', label: \'focusAreas\', stringValue: focusAreaString }"></div>\r\n                </div>\r\n                <div class="row pad-top">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Program(s)</span>\r\n                    </div>\r\n                    <div class="span6" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n                </div>\r\n                <div class="row pad-vertical">\r\n                    <div class="span3 align-right">\r\n                        <span class="grey">Source</span>\r\n                    </div>\r\n                    <div class="span3" data-bind="if: $parent.sources">\r\n                        <div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n                        <span>\r\n                            <em class="grey" data-bind="visible: !source()">Goal source is required</em>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section class="accordion">\r\n            <div class="row accordion-toggle">\r\n                <h4>Attributes</h4>\r\n            </div>\r\n            <div class="accordion-content">\r\n                <div class="column">\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Type</span>\r\n                        </div>\r\n                        <div class="span3">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTypes, value: type, text: \'name\', label: \'goaltypes\' }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Status</span>\r\n                        </div>\r\n                        <div class="span3">\r\n                            <div data-bind="chsnsingle: { options: $parent.goalTaskStatuses, value: status, text: \'name\', label: \'goaltypes\', disabled: isNew() }"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Start Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Value</span>\r\n                        </div>\r\n                        <div class="span9">\r\n                            <input data-bind="value: targetValue" maxlength="255" />\r\n                        </div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">Target Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <div class="row pad-top">\r\n                        <div class="span3 align-right">\r\n                            <span class="grey">End Date</span>\r\n                        </div>\r\n                        <div class="span6">\r\n                            <input data-bind="datepicker: endDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                        </div>\r\n                        <div class="span3"></div>\r\n                    </div>\r\n                    <!-- ko foreach: customAttributes().sort($parent.alphabeticalOrderSort) -->\r\n                    <!-- ko compose: path -->\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n            </div>			\r\n			<div class="row pad-top">\r\n				<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen, visible: details">\r\n					<h5 class="grey pad-bottom">Existing Details</h5>\r\n					<span data-bind="visible: (!($parent.existingDetailsOpen())), text: \'...\'"></span>				\r\n				</div>\r\n				<pre data-bind="text: details, visible: $parent.existingDetailsOpen" ></pre>\r\n				<div class="row pad-top divider">\r\n					<h5 class="grey pad-bottom">New Details</h5>\r\n					<textarea data-bind="value: newDetails, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 10em; resize: both;"></textarea>\r\n				</div>				\r\n			</div>\r\n        </section>\r\n    </div>\r\n</div>'}),n("text!views/templates/intervention.assignedto.html",[],function(){return'<div>\r\n	<div class="ellipsis" data-bind="if: assignedToId()">\r\n	    <span data-bind="text: assignedTo().preferredName, attr: { title: assignedTo().preferredName }"></span>\r\n	</div>\r\n	<div data-bind="ifnot: assignedToId">\r\n		<span>-</span>\r\n	</div>\r\n</div>'}),n("text!views/templates/intervention.category.html",[],function(){return'<div class="ellipsis">\r\n    <span data-bind="with: category">\r\n        <span data-bind="text: name, attr: { title: name }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: category">\r\n    	<span>-</span>\r\n    </div>\r\n</div>'}),n("text!views/templates/intervention.closeddate.html",[],function(){return'<span data-bind="DateOrDash: closedDate"></span>'}),n("text!views/templates/intervention.description.html",[],function(){return'<a class="edit" href="#" data-bind="text: (description() ? description() : \'-\'), click: edit, attr: { title: description }">\r\n</a>'}),n("text!views/templates/intervention.duedate.html",[],function(){return'<span data-bind="DateOrDash: dueDate"></span>'}),n("text!views/templates/intervention.edit.html",[],function(){return'<div class="body" data-bind="with: intervention" style="min-height: 400px;">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n			<!-- ko compose: "templates/validation.errors.html" -->\r\n			<!-- /ko -->\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span7">\r\n                    <input data-bind="value: description, valueUpdate: \'afterkeydown\', css: {\'invalid\': (validationErrorsArray().indexOf(\'description\') !== -1) }" class="string optional" maxlength="500" type="text" />                    \r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.interventionStatuses, value: status, text: \'name\', label: \'interventionstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n			<div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Due Date</span>\r\n                </div>\r\n                <div class="span6">\r\n					<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n						{\r\n							observableDateTime: dueDate, dateErrors: dueDateErrors, showInvalid: $parent.setInvalidDueDate, \r\n							datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'dueDate\'\r\n						}\r\n					} -->\r\n					<!-- /ko -->                    \r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Start Date</span>\r\n                </div>\r\n                <div class="span6">\r\n					<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n						{\r\n							observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: $parent.setInvalidStartDate, \r\n							datepickerOptions:{}, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n						}\r\n					} -->\r\n					<!-- /ko -->                    \r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n			\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Category</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.interventionCategories, value: category, text: \'name\', label: \'interventioncategories\' }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Assigned To</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Associated Barrier(s)</span>\r\n                </div>\r\n                <!-- ko if: goal -->\r\n                <div class="span6" data-bind="multiselect: { options: $parent.computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                <!-- /ko -->\r\n                <!-- ko if: !goal() -->\r\n                <span class="span9">No barriers</span>\r\n                <!-- /ko -->\r\n            </div>\r\n			<div class="row pad-top">\r\n				<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen, visible: details">\r\n					<h5 class="grey pad-bottom">Existing Details</h5>\r\n					<span data-bind="visible: (!($parent.existingDetailsOpen())), text: \'...\'"></span>				\r\n				</div>\r\n				<pre data-bind="text: details, visible: $parent.existingDetailsOpen" ></pre>\r\n				<div class="row pad-top divider">\r\n					<h5 class="grey pad-bottom">New Details</h5>\r\n					<textarea data-bind="value: newDetails, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 10em; resize: both;"></textarea>\r\n				</div>				\r\n			</div>\r\n        </section>\r\n    </div>\r\n</div>'}),n("text!views/templates/intervention.goal.html",[],function(){return'<div class="ellipsis">\r\n	<span data-bind="if: computedGoalName()">\r\n	    <a href="#" data-bind="text: computedGoalName, click: gotoGoal, attr: { title: computedGoalName }"></a>\r\n	</span>\r\n	<!-- ko ifnot: computedGoalName() -->\r\n		<span>-</span>\r\n	<!-- /ko -->\r\n</div>'}),n("text!views/templates/intervention.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedInterventions">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedInterventions().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>'}),n("text!views/templates/intervention.patient.html",[],function(){return"<div class=\"ellipsis\">\r\n	<span data-bind=\"if: computedPatient()\">\r\n	    <a data-bind=\"text: computedPatient().fullLastName() +', ' + computedPatient().fullFirstName(), attr: { href: '#patients/' + computedPatient().id(), title: computedPatient().fullLastName() +', ' + computedPatient().fullFirstName() }\"></a>\r\n	</span>\r\n	<!-- ko ifnot: computedPatient() -->\r\n		<span>-</span>\r\n	<!-- /ko -->\r\n</div>"}),n("text!views/templates/intervention.startdate.html",[],function(){return'<span data-bind="DateOrDash: startDate"></span>'}),n("text!views/templates/intervention.status.html",[],function(){return'<i data-bind="css: status().iconClass"></i>'}),n("text!views/templates/language.html",[],function(){return'<div class="row">\r\n    <div class="span2 grey">Language</div>\r\n    <div class="span8" data-bind="text: name, attr: { title: name }"></div>\r\n</div>'}),n("text!views/templates/medication.expand.html",[],function(){return'<a class="toggle" href="#" data-bind="clickToggle: isExpanded"><i data-bind="css: isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i></a>'}),n("text!views/templates/medication.groups.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <div class="grey hover-parent span1">\r\n            <span></span>\r\n        </div>\r\n        <div class="grey hover-parent span6">\r\n            <span>Medication</span>\r\n        </div>\r\n        <div class="grey hover-parent span2">\r\n            <span>Date</span>\r\n        </div>\r\n        <div class="grey hover-parent span2">\r\n            <span>Status</span>\r\n        </div>\r\n    </div>\r\n    <div data-bind="foreach: computedMedicationGroups">\r\n        <div class="row divider filter-toggle" data-bind="css: { \'active\': $parent.activeMedication() === firstMedication() }">\r\n            <div class="span1 ellipsis filters" data-bind="with: firstMedication">\r\n                <a class="toggle" href="#" data-bind="clickToggle: $parent.isExpanded"><i data-bind="css: $parent.isExpanded() ? \'icon-single-chevron-up\' : \'icon-angle-double-down\'"></i></a>\r\n            </div>\r\n            <div class="span6 ellipsis" data-bind="with: firstMedication">\r\n                <a class="edit" href="#" data-bind="click: setActiveMedication, attr: { title: computedDisplayName }">\r\n                    <pre data-bind="text: (computedDisplayName() ? computedDisplayName() : \'-\')"></pre>\r\n                </a>\r\n            </div>\r\n            <div class="span2 ellipsis" data-bind="with: firstMedication">\r\n                <span data-bind="DateOrDash: medSortDate"></span>\r\n            </div>\r\n            <div class="span2 ellipsis" data-bind="with: firstMedication">\r\n                <!-- ko with: status -->\r\n                    <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n                        <a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n                    </span>\r\n                    <div class="pull-left filters" data-bind="if: id() === \'2\'">\r\n                        <a href="#" data-bind="click: $parent.activatePatientMedication"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n                    </div>\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <div data-bind="foreach: sortedMedications, visible: isExpanded">\r\n            <!-- ko if: $data !== $parent.firstMedication() -->\r\n                <div class="row divider filter-toggle" data-bind="css: { \'active\': $parents[1].activeMedication() === $data }">\r\n                    <div class="span1 ellipsis filters">\r\n                        &nbsp;\r\n                    </div>\r\n                    <div class="span6 ellipsis">\r\n                        <a class="edit" href="#" data-bind="click: setActiveMedication, attr: { title: computedDisplayName }">\r\n                            <pre data-bind="text: (computedDisplayName() ? computedDisplayName() : \'-\')"></pre>\r\n                        </a>\r\n                    </div>\r\n                    <div class="span2 ellipsis">\r\n                        <span data-bind="DateOrDash: medSortDate"></span>\r\n                    </div>\r\n                    <div class="span2 ellipsis">\r\n                        <!-- ko with: status -->\r\n                            <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n                                <a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n                            </span>\r\n                            <div class="pull-left filters" data-bind="if: id() === \'2\'">\r\n                                <a href="#" data-bind="click: $parent.activatePatientMedication"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n                            </div>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n            <!-- /ko -->\r\n            <!-- ko if: $parent.sortedMedications().length === 1 -->\r\n                <em>No additional medications</em>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedMedicationGroups().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>\r\n'}),n("text!views/templates/medication.name.html",[],function(){return'<a class="edit" href="#" data-bind="click: setActiveMedication, attr: { title: computedDisplayName }">\r\n    <pre data-bind="text: (computedDisplayName() ? computedDisplayName() : \'-\')"></pre>\r\n</a>\r\n'}),n("text!views/templates/medication.reason.html",[],function(){return'<div class="ellipsis">\r\n    <span data-bind="with: reason">\r\n        <span data-bind="text: $data, attr: { title: $data }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: reason">\r\n    	<span>-</span>\r\n    </div>\r\n</div>'}),n("text!views/templates/medication.sortdate.html",[],function(){return'<span data-bind="DateOrDash: medSortDate"></span>'}),n("text!views/templates/medication.startdate.html",[],function(){return'<span data-bind="DateOrDash: startDate"></span>'}),n("text!views/templates/medication.status.html",[],function(){return'<div class="ellipsis" data-bind="with: status">\r\n    <span class="pull-left filters" data-bind="if: id() === \'1\'">\r\n    	<a href="#" data-bind="click: $parent.inactivate"><i class="icon-checkbox-on blue toggle" title="Deactivate"></i></a>\r\n    </span>\r\n    <div class="pull-left filters" data-bind="if: id() === \'2\'">\r\n		<a href="#" data-bind="click: $parent.activatePatientMedication"><i class="icon-checkbox-off blue toggle" title="Activate"></i></a>\r\n    </div>\r\n</div>'}),n("text!views/templates/medication.strength.html",[],function(){return"<div>\r\n	 <span data-bind=\"StringOrDash: strength, attr:{title: strength, class: 'ellipsis', style: 'display: block;'}\">\r\n    </span>\r\n	\r\n</div>"}),n("text!views/templates/medication.type.html",[],function(){return"<div>\r\n	<!-- ko with: type -->\r\n    <i data-bind=\"css: name().toLowerCase() === 'otc' ? 'icon-otc' : 'icon-rx'\">\r\n    </i>\r\n    <!-- /ko -->\r\n	<!-- ko if: !type() -->\r\n    <span>\r\n    	&nbsp\r\n    </span>\r\n    <!-- /ko -->\r\n</div>"}),n("text!views/templates/medications.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort && canSort -->\r\n            <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort  && canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n            <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedMedications">\r\n        <div class="row divider filter-toggle" data-bind="foreach: $parent.columns, css: { \'active\': $parent.activeMedication() === $data }">\r\n            <div data-bind="compose: { model: $parent, view: path }, css: cssClass"></div>\r\n        </div>\r\n        <div class="row pad allergydtl muted toggle" data-bind="visible: isExpanded">\r\n            <div class="row pad-top">\r\n                <strong>Groupings go here</strong>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedMedications().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>\r\n'}),n("text!views/templates/module.edit.html",[],function(){return'<div class="body" data-bind="with: module">\r\n	<div class="column">\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned Date:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned By:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned To:\r\n				</span>\r\n			</div>\r\n			<div class="span5">\r\n				<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n				</select>\r\n			</div>\r\n			<div class="span4">\r\n				<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- <div class="row pad-top divider">\r\n			<div class="span3 align-left">\r\n				<span>Action Status:\r\n				</span>\r\n			</div>\r\n			<div class="span9">\r\n				<select style="display: none;">\r\n					<option>In Progress	</option>\r\n					<option>Not Started</option>\r\n					<option>Closed</option>\r\n					<option>Removed </option>\r\n				</select>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<div class="span3 align-left">\r\n					<span>Reason:\r\n					</span>\r\n				</div>\r\n				<div class="span9">\r\n					<textarea>\r\n					</textarea>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Start Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" value="03/15/2014">\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>End Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" id="dp1401893998028">\r\n			</div>\r\n		</div> -->\r\n	</div>\r\n</div>'}),n("text!views/templates/note.general.details.html",[],function(){return'<div data-bind="visible: (type().name().toLowerCase() !== \'utilization\' && type().name().toLowerCase() !== \'touchpoint\')">\r\n	<div class="row pad-top">\r\n		<strong>Content:</strong>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<textarea readonly="readonly" class="display-only span12" data-bind="text: text, autoHeight: text, attr: { \'title\': text }"></textarea>\r\n	</div>\r\n	<div class="row pad-top divider"></div>\r\n	<div data-bind="if: duration">\r\n		<div class="row pad-top" >\r\n			<strong class="span3">Duration:</strong>\r\n			<span class="pad-top" data-bind="text: duration"></span> minutes\r\n		</div>\r\n	</div>\r\n</div> '}),n("text!views/templates/note.general.edit.html",[],function(){return'<div data-bind="with: note">\r\n  <div class="column">\r\n    <section class="accordion">\r\n      <div class="row accordion-toggle">\r\n      </div>\r\n      <div class="accordion-content">\r\n			<div>  \r\n                <h5 class="grey pad-bottom">Duration</h5>\r\n				<div class="row pad-top">\r\n					<div class="span1">\r\n						<input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n							attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n							css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }"></input>\r\n					</div>\r\n					<span class="span2 grey align-left"> minutes</span>\r\n				</div>				\r\n			</div>\r\n			<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen">\r\n				<h5 class="grey">Existing Content</h5>\r\n				<span data-bind="visible: (!($parent.existingContentOpen())), text: \'...\'"></span>				\r\n			</div>\r\n			<pre data-bind="text: text, visible: $parent.existingContentOpen" class="pad-top"></pre>\r\n			<div class="row pad-top divider">\r\n				<h5 class="grey pad-bottom">New Content</h5>\r\n				<textarea data-bind="value: newContent, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'text\') !== -1) }" class="string optional" maxlength="5000" type="text" style="height: 150px; resize: both;"></textarea>\r\n			</div>\r\n			<div class="row pad-top">\r\n			  <div class="span6">\r\n				<h5 class="grey pad-bottom">Program(s)</h5>\r\n							<div class="span10" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n			  </div>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<span class="grey">Created On: 	</span>\r\n				<span class="pad-left" data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span>\r\n			</div>\r\n			<div class="row pad-top" data-bind="if: updatedOn">\r\n				<span class="grey" >Updated On:  </span>\r\n				<span class="pad-left" data-bind="DateTime: updatedOn"></span> by <span data-bind="text: updatedBy().preferredName"></span>\r\n			</div>\r\n			<div class="row pad-top" data-bind="if: dataSource">\r\n				<span class="grey" >System:</span>\r\n				<span class="pad-left" data-bind="text: dataSource"></span>\r\n			</div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>';
}),n("text!views/templates/note.touchpoint.details.html",[],function(){return'<div data-bind="visible: type().name().toLowerCase() === \'touchpoint\'">									\r\n	<div class="row pad-top">\r\n		<strong>Content:</strong>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<textarea readonly="readonly" class="display-only span12" data-bind="text: text, autoHeight: text, attr: { \'title\': text }"></textarea>\r\n	</div>\r\n	<div class="row pad-top divider"></div>\r\n	<div data-bind="if: duration">\r\n		<div class="row pad-top" >\r\n			<strong class="span3">Duration:</strong>\r\n			<span class="pad-top" data-bind="text: duration"></span> minutes\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="with: method">\r\n		<strong class="span3">Method:</strong>\r\n		<span class="span9" data-bind="text: name"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="with: outcome">\r\n		<strong class="span3">Outcome:</strong>\r\n		<span class="span9" data-bind="text: name"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="with: who">\r\n		<strong class="span3">Who:</strong>\r\n		<span class="span9" data-bind="text: name"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="with: source">\r\n		<strong class="span3">Source:</strong>\r\n		<span class="span9" data-bind="text: name"></span>\r\n	</div>\r\n	<div data-bind="if: type().name().toLowerCase() === \'touchpoint\'">\r\n		<div class="row pad-top"></div>\r\n			<strong class="span3">Validated:</strong>\r\n			<span class="span9" data-bind="text: validatedIdentity() ? \'Yes\' : \'No\' "></span>\r\n		</div>\r\n	<div data-bind="if: contactedOn">\r\n		<div class="row pad-top">\r\n			<strong class="span3">Date / Time:</strong>\r\n			<span class="span9" data-bind="DateTime: contactedOn"></span>\r\n		</div>\r\n	</div>\r\n</div> '}),n("text!views/templates/note.touchpoint.edit.html",[],function(){return'<div data-bind="with: note">\r\n	<div class="column">\r\n		<section class="accordion">\r\n			<div class="row accordion-toggle"></div>\r\n				<div class="accordion-content">\r\n					<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen">\r\n						<h5 class="grey">Existing Content</h5>\r\n						<span data-bind="visible: (!($parent.existingContentOpen())), text: \'...\'"></span>						\r\n					</div>\r\n					<pre data-bind="text: text, visible: $parent.existingContentOpen" class="pad-top"></pre>\r\n					<div class="row pad-top divider">\r\n						<h5 class="grey pad-bottom">New Content</h5>\r\n						<textarea data-bind="value: newContent, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 150px; resize: both;"></textarea>\r\n					</div>\r\n					<div class="row pad-top">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Method</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.methods, value: method, text: \'name\', label: \'methods\' }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Who</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.whos, value: who, text: \'name\', label: \'whose\' }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Source</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.sources, value: source, text: \'name\', label: \'sources\' }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Outcome</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.outcomes, value: outcome, text: \'name\', label: \'outcomes\' }"></div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<div class="span6">\r\n						<h5 class="grey pad-bottom">Date/Time of Contact</h5>\r\n						<div class="row">\r\n							<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n								{\r\n									observableDateTime: contactedOn, dateErrors: contactedOnErrors, dateName: \'startDate\', timeName: \'startTime\',\r\n									datepickerOptions:{ }, datepickerDynamicOptions: {}, showTime: true, dateCss: \'span6\', timeCss: \'span6\'\r\n								}\r\n							} -->\r\n							<!-- /ko -->\r\n						</div>\r\n					</div>\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Duration</h5>\r\n						<div class="span6"> \r\n							<input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n								attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n								css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1)}"></input>						\r\n						</div>\r\n						<span class="grey align-left"> minutes</span>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row pad-top">\r\n					<div class="span6">\r\n						<h5 class="grey pad-bottom">Validated identity</h5>\r\n						<!-- <label class="control-group"> -->\r\n							<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n								<span data-bind="css: { \'checked\': validatedIdentity() === true }">\r\n									<input type="checkbox" data-bind="checked: validatedIdentity" />\r\n								</span>\r\n							</div>\r\n						<!-- </label> -->\r\n					</div>\r\n					<div class="span6">\r\n						<h5 class="grey pad-bottom">Program(s)</h5>\r\n						<div class="icon-list span10" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<span class="grey">Created On: 	</span>\r\n					<span class="pad-left" data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="if: updatedOn">\r\n					<span class="grey">Updated On:  </span>\r\n					<span class="pad-left" data-bind="DateTime: updatedOn"></span> by <span data-bind="text: updatedBy().preferredName"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="if: dataSource">\r\n					<span class="grey" >System:</span>\r\n					<span class="pad-left" data-bind="text: dataSource"></span>\r\n				</div>\r\n				<div class="line"></div>\r\n				<div class="line"></div>\r\n			</div>\r\n		</section>\r\n	</div>\r\n</div>'}),n("text!views/templates/note.utilization.details.html",[],function(){return'<div data-bind="visible: type().name().toLowerCase() === \'utilization\'">\r\n	<div class="row pad-top">\r\n		<strong>Reason:</strong>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<textarea readonly="readonly" class="display-only span12" data-bind="text: text, autoHeight: text, attr: { \'title\': text }"></textarea>\r\n	</div>\r\n	<div class="row pad-top divider"></div>\r\n\r\n	<div class="row pad-top" data-bind="visible: visitType, with: visitType">\r\n		<strong class="span3">Visit Type:</strong>\r\n		<div class="span9">\r\n			<span data-bind="text: name" ></span>\r\n			<span class="pad-left" data-bind="visible: $parent.showOtherVisitType && $parent.otherType, text: (\'- \' + $parent.otherType())" ></span>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: admitDate">\r\n		<strong class="span3">Visit/Admit Date:</strong>\r\n		<span class="span9" data-bind="DateOrNothing: admitDate"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: (admitted() === true || admitted() === false)">\r\n		<strong class="span3">Admitted:</strong>\r\n		<span class="span9" data-bind="text: admitted() ? \'Yes\' : \'No\' "></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: dischargeDate">\r\n		<strong class="span3">Discharge Date:</strong>\r\n		<span class="span9" data-bind="DateOrNothing: dischargeDate"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: utilizationLengthStr">\r\n		<strong class="span3">\r\n			<span  data-bind="text: utilizationLengthDesc"></span> :\r\n		</strong>\r\n		<span data-bind="text: utilizationLengthStr"></span>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: utilizationLocation, with: utilizationLocation">\r\n		<strong class="span3">Location:</strong>\r\n		<div class="span9">\r\n			<span data-bind="text: name" ></span>\r\n			<span class="pad-left" data-bind="text: (\'- \' + $parent.otherLocation()), visible: $parent.showOtherLocation && $parent.otherLocation" ></span>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: disposition, with: disposition">\r\n		<strong class="span3">Disposition:</strong>\r\n		<div class="span9">\r\n			<span data-bind="text: name" ></span>\r\n			<span class="pad-left" data-bind="text: (\'- \' + $parent.otherDisposition()), visible: $parent.showOtherDisposition && $parent.otherDisposition" ></span>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: utilizationSource, with: utilizationSource">\r\n		<strong class="span3">Source:</strong>\r\n		<span class="span9" data-bind="text: name"></span>\r\n	</div>\r\n</div> '}),n("text!views/templates/note.utilization.edit.html",[],function(){return'<div data-bind="with: note">\r\n	<div class="column">\r\n		<section class="accordion">\r\n			<div class="row accordion-toggle"></div>\r\n			<div class="accordion-content">\r\n				<div class="row pad-top bold">Visit:</div>\r\n				<div class="row pad-top">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Type</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.visitTypes, value: visitType, text: \'name\', label: \'visitTypes\' }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span9" data-bind="visible: showOtherVisitType" >\r\n						<h5 class="grey pad-bottom">Other Type</h5>\r\n						<input data-bind="value: otherType, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherType\') !== -1) }"\r\n						maxlength="100" type="text" />\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Visit/Admit Date</h5>\r\n						<div class="row">\r\n								<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n									{\r\n										observableDateTime: admitDate, dateErrors: admitDateErrors, dateName: \'admitDate\', showInvalid: setInvalidAdmitDate,\r\n										datepickerOptions:{ }, datepickerDynamicOptions: {}, dateCss: \'span12\'\r\n									}\r\n								} -->\r\n								<!-- /ko -->\r\n							</div>\r\n						</div>\r\n						<div class="span3">\r\n							<h5 class="grey pad-bottom">Admitted ?</h5>\r\n							<div class="checker" data-bind="hoverToggle: \'hover\'">\r\n								<span data-bind="css: { \'checked\': admitted() === true }">\r\n									<input type="checkbox" data-bind="checked: admitted" />\r\n								</span>\r\n							</div>\r\n						</div>\r\n						<div class="span6">\r\n							<h5 class="grey pad-bottom">Discharge Date</h5>\r\n							<div class="span6">\r\n							<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n								{\r\n									observableDateTime: dischargeDate, dateErrors: dischargeDateErrors, dateName: \'dischargeDate\', showInvalid: setInvalidDischargeDate,\r\n									datepickerOptions:{ }, datepickerDynamicOptions: {minDate: admitDate}, dateCss: \'span12\'\r\n								}\r\n							} -->\r\n							<!-- /ko -->\r\n						</div>\r\n						<div data-bind="visible: utilizationLengthStr">\r\n							<span class="grey" data-bind="text: utilizationLengthDesc"></span>\r\n							<span class="pad-left" data-bind="text: utilizationLengthStr"></span>\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="row pad-top">					\r\n					<h5 class="grey pad-bottom">Location</h5>\r\n					<div class="icon-list span6">\r\n						<div data-bind="chsnsingle: { options: $parent.utilizationLocations, value: utilizationLocation, text: \'name\', label: \'utilizationLocations\', isCancel: true }"></div>\r\n					</div>\r\n				</div>	\r\n				<div class="row" data-bind="visible: showOtherLocation" >\r\n					<div class="pad-top">\r\n						<h5 class="grey pad-bottom">Other Location</h5>\r\n						<input data-bind="value: otherLocation, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherLocation\') !== -1) }"\r\n							maxlength="100" type="text" />\r\n					</div>\r\n				</div>				\r\n				<div class="row pad-top">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Disposition</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.dispositions, value: disposition, text: \'name\', label: \'dispositions\', isCancel: true }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span9" data-bind="visible: showOtherDisposition" >\r\n						<h5 class="grey pad-bottom">Other Disposition</h5>\r\n						<input data-bind="value: otherDisposition, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'otherDisposition\') !== -1) }"\r\n						maxlength="100" type="text" />\r\n					</div>\r\n				</div>\r\n				<div class="row divider pad-top bold">Content:</div>\r\n				<div class="row pad-top">\r\n					<div class="span3">\r\n						<h5 class="grey pad-bottom">Source</h5>\r\n						<div class="icon-list">\r\n							<div data-bind="chsnsingle: { options: $parent.utilizationSources, value: utilizationSource, text: \'name\', label: \'utilizationSources\', isCancel: true }"></div>\r\n						</div>\r\n					</div>\r\n					<div class="span6">\r\n						<h5 class="grey pad-bottom">Program(s)</h5>\r\n						<div class="icon-list span10" data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString }"></div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen">\r\n					<h5 class="grey">Current Reason</h5>\r\n					<span data-bind="visible: (!($parent.existingContentOpen())), text: \'...\'"></span>					\r\n				</div>\r\n				<pre data-bind="text: text, visible: $parent.existingContentOpen" class="pad-top"></pre>				\r\n				<div class="row pad-top divider">\r\n					<h5 class="grey pad-bottom">Reason Update</h5>\r\n					<textarea data-bind="value: newContent, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'text\') !== -1) }" class="string optional" maxlength="5000" type="text" style="height: 150px; resize: both;"></textarea>\r\n				</div>\r\n				<div class="row pad-top">\r\n					<span class="grey">Created On: 	</span>\r\n					<span class="pad-left" data-bind="DateTime: createdOn"></span> by <span data-bind="text: createdBy().preferredName"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="if: updatedOn">\r\n					<span class="grey">Updated On:  </span>\r\n					<span class="pad-left" data-bind="DateTime: updatedOn"></span> by <span data-bind="text: updatedBy().preferredName"></span>\r\n				</div>\r\n				<div class="row pad-top" data-bind="if: dataSource">\r\n					<span class="grey" >System:  </span>\r\n					<span class="pad-left" data-bind="text: dataSource"></span>\r\n				</div>\r\n				<div class="line"></div>\r\n				<div class="line"></div>\r\n			</div>\r\n		</section>\r\n	</div>\r\n</div>'}),n("text!views/templates/observation.add.html",[],function(){return'<div class="row pad" data-bind="with: observation">\r\n    <div class="span2">\r\n        <span data-bind="text: name, attr: { title: name }"></span>\r\n    </div>\r\n    <div class="span2">\r\n        <input type="text" data-bind="value: computedValue().value, valueUpdate: \'afterkeydown\', css: { \'invalid\': (validationErrorsArray().indexOf(\'value\') !== -1) }">\r\n    </div>\r\n	<div class="span1">\r\n		<span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n		&nbsp;\r\n	</div>\r\n    <div class="span2">\r\n		<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n			{\r\n				observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate, \r\n				maxDate: \'today\', datepickerOptions:{ maxDate: \'+0\' }, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n			}\r\n		} -->\r\n		<!-- /ko -->\r\n    </div>\r\n    <div class="span4">\r\n        <label>\r\n            <span data-bind="text: computedValue().previousValueString, attr: { title: computedValue().previousValueString }"></span>\r\n        </label>\r\n    </div>\r\n    <div class="span1 pull-left">\r\n        <a href="#" data-bind="click: $parent.addNew, disable: !$parent.canAdd(), css: { \'disabled\': !$parent.canAdd() }">\r\n            <i class="icon-plus"></i>\r\n        </a>\r\n    </div>\r\n</div>'}),n("text!views/templates/observation.bloodpressure.add.html",[],function(){return'<div class="pad-bottom" data-bind="with: observation">\r\n	<div class="row pad">\r\n		<div class="span2">\r\n			<span data-bind="text: name, attr: { title: name }"></span>\r\n		</div>\r\n		<div class="span2" data-bind="with: $parent.systolicObservationValue">\r\n			<input type="text" placeholder="Systolic" title="Systolic" data-bind="value: value, valueUpdate: \'afterkeydown\', css: { \'invalid\': ($parent.validationErrorsArray().indexOf(\'systolic\') !== -1) }">       \r\n		</div>\r\n		<div class="span1">\r\n			<span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n		</div>\r\n		<div class="span2">        \r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: startDate, dateErrors: startDateErrors, showInvalid: setInvalidStartDate, \r\n					maxDate: \'today\', datepickerOptions:{ maxDate: \'+0\' }, datepickerDynamicOptions: {}, dateName: \'startDate\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n		</div>\r\n		<div class="span4">\r\n			<label>\r\n				<span data-bind="text: $parent.customBPString, attr: { title: $parent.customBPString }"></span>\r\n			</label>\r\n		</div>\r\n		<div class="span1 pull-left">\r\n			<a href="#" data-bind="click: $parent.addNew, enable: $parent.canAdd, css: { \'disabled\': !$parent.canAdd() }">\r\n				<i class="icon-plus"></i>\r\n			</a>\r\n		</div>\r\n	</div>\r\n	<div class="row pad">\r\n		<div class="span2">\r\n			&nbsp;\r\n		</div>\r\n		<div class="span2" data-bind="with: $parent.diastolicObservationValue">\r\n			<input type="text" placeholder="Diastolic" title="Diastolic" data-bind="value: value, valueUpdate: \'afterkeydown\', css: { \'invalid\': ($parent.validationErrorsArray().indexOf(\'diastolic\') !== -1) }">\r\n		</div>\r\n		<div class="span1">\r\n			<span data-bind="with: units">(<span data-bind="text: $data, attr: { title: $data }"></span>)</span>\r\n		</div>\r\n	</div>\r\n</div>	'}),n("text!views/templates/patient.delete.html",[],function(){return'<div class="body">\r\n    <div class="row">\r\n        <h2 class="span12" data-bind="text: fullName"></h2>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>First Name</span>\r\n            <h4 data-bind="text: firstName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Middle Name</span>\r\n            <h4 data-bind="text: middleName"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Last Name</span>\r\n            <h4 data-bind="text: lastName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>Suffix</span>\r\n            <h4 data-bind="text: suffix"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Preferred Name</span>\r\n            <h4 data-bind="text: preferredName"></h4>\r\n        </label>\r\n        <label class="span6">\r\n            <span>DOB</span>\r\n            <h4 data-bind="text: dOB"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>SSN</span>\r\n            <h4 data-bind="text: formattedSSN"></h4>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6" data-bind="with: genderModel">\r\n            <div class="row">\r\n                <span class="span3 line">Gender</span>\r\n                <div class="span2 line align-right">\r\n                    <img alt="Patient small" class="" data-bind="attr: { src: SmallImgSrc }" />\r\n                </div>\r\n                <h4 data-bind="text: Description"></h4>\r\n            </div>\r\n        </label>\r\n        <label class="span6" data-bind="with: priorityModel">\r\n            <div class="row">\r\n                <span class="span3 line">Priority</span>\r\n                <div class="span2 line align-right">\r\n                    <img data-bind="attr: { src: imageSource }">\r\n                </div>\r\n                <h4 data-bind="text: levelName"></h4>\r\n            </div>\r\n        </label>\r\n    </div>\r\n</div>'}),n("text!views/templates/patient.html",[],function(){return'<div class="body">\r\n    <div class="row" data-bind="visible: isDuplicate">\r\n        <span class="errorheader" style="margin-top: 10px; border: 1px solid; background: #fbcbc7; color: #871409; display: block; font-size: 11px; padding: 5px;">\r\n            <a href="#">\r\n                <i class="icon-warning red"></i>\r\n            </a>An individual with the same first name, last name and date of birth already exists. Do you want to continue and create this individual? <button class="btn small color" data-bind="click: forceSave">Proceed and Create</button></span>\r\n    </div>\r\n    <div class="row">\r\n        <h2 class="span12" data-bind="text: fullName"></h2>\r\n    </div>\r\n	<!-- ko compose: "templates/validation.errors.html" -->\r\n	<!-- /ko -->    \r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>First Name</span>\r\n            <input type="text" data-bind="value: firstName, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'firstName\') !== -1) }" placeholder="first name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>Middle Name</span>\r\n            <input type="text" data-bind="value: middleName, valueUpdate: \'afterkeydown\'" placeholder="middle name" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Last Name</span>\r\n            <input type="text" data-bind="value: lastName, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'lastName\') !== -1) }" placeholder="last name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>Suffix</span>\r\n            <input type="text" data-bind="value: suffix, valueUpdate: \'afterkeydown\'" placeholder="suffix" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Preferred Name</span>\r\n            <input type="text" data-bind="value: preferredName, valueUpdate: \'afterkeydown\'" placeholder="preferred name" />\r\n        </label>\r\n        <label class="span6">\r\n            <span>DOB</span>\r\n            <input type="text" data-bind="value: dOB, date: dOB, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'dOB\') !== -1) }" />\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <span>Override SSN - <span data-bind="with: formattedSSN">(<span data-bind="text: $data"></span>)</span>:</span>\r\n            <input type="text" data-bind="ssn: fullSSN, value: fullSSN, valueUpdate: \'afterkeydown\', css: { invalid: (validationErrorsArray().indexOf(\'fullSSN\') !== -1) }" />\r\n        </label>\r\n        <label class="span6">\r\n        	<div class="row">\r\n            <span class="span5 line">Protected</span>\r\n            <div style="padding-top: 2%;" class="span4" data-bind="chsnsingle: { options:  $root.protectedStatuses, value: protected, text: \'Name\', idValue: \'Id\' }"></div>\r\n          </div>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6" data-bind="with: genderModel">\r\n            <div class="row">\r\n                <span class="span3 line">Gender</span>\r\n                <div class="span2 line align-right">\r\n                    <img alt="Patient small" class="" data-bind="attr: { src: SmallImgSrc }" />\r\n                </div>\r\n                <div style="padding-top: 2%;" class="span4" data-bind="chsnsingle: { options:  $root.genders, value: $parent.gender, text: \'Description\', idValue: \'Gender\' }"></div>\r\n            </div>\r\n        </label>\r\n        <label class="span6" data-bind="with: priorityModel">\r\n            <div class="row">\r\n                <span class="span3 line">Priority</span>\r\n                <div class="span2 line align-right">\r\n                    <img style="vertical-align: middle;" data-bind="attr: { src: imageSource }">\r\n                </div>\r\n                <div style="padding-top: 2%;" class="span4" data-bind="chsnsingle: { options:  $root.priorities, value:  $parent.priority, text: \'levelName\', idValue: \'id\' }"></div>\r\n            </div>\r\n        </label>\r\n    </div>\r\n    <div class="row">\r\n        <label class="span6">\r\n            <div class="row">\r\n                <span class="span5 line">Marital Status</span>\r\n									<div style="padding-top: 2%;" class="span7" data-bind="chsnsingle: { options: $root.maritalStatuses, value: maritalStatusId, text: \'name\', idValue: \'id\', isCancel: true, caption: \'None Selected\' }">\r\n									</div>\r\n            </div>\r\n        </label>\r\n        <label class="span6">\r\n            <div class="row">\r\n                <span class="span5 line">Deceased</span>\r\n                <div style="padding-top: 2%;" class="span4" data-bind="chsnsingle: { options:  $root.deceasedStatuses, value:  deceasedId, text: \'name\', idValue: \'id\', isCancel: true, caption: \'None Selected\' }">\r\n                </div>\r\n            </div>\r\n        </label>\r\n    </div>\r\n	<div class="line"></div><div class="line"></div>\r\n</div>'}),n("text!views/templates/patient.status.html",[],function(){return'<div class="body">\r\n	<div class="column"> \r\n        <section class="accordion">\r\n			<div class="accordion-content">\r\n				<div class="row pad-top">\r\n					<div class="span3 align-right">\r\n						<span class="grey">Status</span>\r\n					</div>\r\n					<div class="span3" data-bind="chsnsingle: { options:  $root.patientStatuses, value: patientStatus, text: \'name\'}"></div>        \r\n				</div>	\r\n				<div class="row pad-top" data-bind="visible: (statusId() !== \'1\')">\r\n					<div class="span3 align-right">\r\n						<span class="grey">Reason</span>\r\n					</div>\r\n					<div class="span3" data-bind="chsnsingle: { options:  $root.patientStatusReasons, value: patientStatusReason, text: \'name\'}"></div>						\r\n				</div>\r\n				<div class="row pad-top">\r\n					<div class="span3 align-right">\r\n						<span class="grey">System</span>\r\n					</div>\r\n					<span class="span3" data-bind="text: (statusDataSource || \'N/A\')"></span>		\r\n				</div>				\r\n			</div>\r\n	    </section> 			\r\n    </div>\r\n	\r\n    \r\n</div>'}),n("text!views/templates/patient.systems.html",[],function(){return'<div class="body" data-bind="visible: showing">\r\n	<div class="pad-vertical">\r\n	</div>\r\n	<!-- ko compose: "templates/validation.errors.html" -->\r\n	<!-- /ko -->	\r\n	<div class="pad-vertical" data-bind="visible: canAddId">\r\n		<div class="row">\r\n			<div class="span1">&nbsp;</div>\r\n			<div class="span3">\r\n				<div data-bind="chsnsingle: { options: systems, value: newSelectedSystem, text: \'displayLabel\', label: \'systems\' },\r\n								css:{\'invalid\': (newIdValidationErrorsArray().indexOf(\'newSystem\') !== -1 )}"></div>\r\n			</div>\r\n			<div class="span5">\r\n				<input type="text" size="30" placeholder="ID Value" data-bind="value: newPatientSystemIdValue, valueUpdate: \'afterkeydown\'\r\n									, css:{\'invalid\': (newIdValidationErrorsArray().indexOf(\'newValue\') !== -1 )}" maxlength="100" />\r\n			</div>\r\n			<div class="span2">\r\n				<button class="btn color small" href="#" data-bind="click: createNewId, enable: canAddNewPatientSystem">\r\n					<i class="icon-plus"></i>\r\n					<span class="pad-left">Add</span>\r\n				</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="pad-vertical">\r\n		<div>\r\n			<div class="row pad-top">\r\n				<div class="span1">\r\n					<strong>Primary</strong>\r\n				</div>\r\n				<div class="span3">\r\n					<strong>System</strong>\r\n				</div>\r\n				<div class="span5">\r\n					<strong>Value</strong>\r\n				</div>\r\n				<div class="span2">\r\n					<strong>Status</strong>\r\n				</div>\r\n				<div class="span1">\r\n				</div>\r\n			</div>\r\n			<!-- ko foreach: computedEditSystemIds -->\r\n				<!-- ko compose: "templates/system.id.edit.html" -->\r\n				<!-- /ko -->\r\n			<!-- /ko -->\r\n			<div class="line"></div>\r\n			<div class="line"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),n("text!views/templates/phone.edit.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' blue\' }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis short">\r\n        <div class="row">\r\n			<input data-bind="phone: $data, value: number, valueUpdate: \'afterkeydown\', hasFocus: isFocused ,disable: $parent.phoneOptedOut, css: { invalid: !isValid() }" placeholder="XXX-XXX-XXXX" title="XXX-XXX-XXXX"/>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/phone.html",[],function(){return'<div class="row">\r\n    <div class="span2">\r\n        <i class="lighterblue" data-bind="attr: { class: (!isText() ? \'icon-phone\' : \'icon-sms\') + \' lighterblue\', title: type().name() }"></i>\r\n    </div>\r\n    <div class="span10 ellipsis line short">\r\n        <div class="row">\r\n            <span data-bind="text: optOut() ? \'<Number opted out>\' : formattedNumber, attr: { \'title\': formattedNumber }"></span>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/templates/program.edit.html",[],function(){return'<div class="body" data-bind="with: program">\r\n	<div class="column">\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned Date:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="DateOrNothing: assignDate"></div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned By:\r\n				</span>\r\n			</div>\r\n      <div class="span9" data-bind="with: assignBy"><span data-bind="text: preferredName"></span></div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Assigned To:\r\n				</span>\r\n			</div>\r\n			<div class="span5">\r\n				<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n        <!-- <select data-bind="options: $parent.careManagers, value: assignToId, optionsText: \'preferredName\', optionsValue: \'id\'"></div> -->\r\n				</select>\r\n			</div>\r\n			<div class="span4">\r\n				<button class="button small warning" data-bind="enable: assignToId(), click: $parent.removeAssignment">Remove Assignment</button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- <div class="row pad-top divider">\r\n			<div class="span3 align-left">\r\n				<span>Action Status:\r\n				</span>\r\n			</div>\r\n			<div class="span9">\r\n				<select style="display: none;">\r\n					<option>In Progress	</option>\r\n					<option>Not Started</option>\r\n					<option>Closed</option>\r\n					<option>Removed </option>\r\n				</select>\r\n			</div>\r\n			<div class="row pad-top">\r\n				<div class="span3 align-left">\r\n					<span>Reason:\r\n					</span>\r\n				</div>\r\n				<div class="span9">\r\n					<textarea>\r\n					</textarea>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>Start Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" value="03/15/2014">\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span3 align-left">\r\n				<span>End Date:\r\n				</span>\r\n			</div>\r\n			<div class="span3">\r\n				<input class="datepicker" type="text" id="dp1401893998028">\r\n			</div>\r\n		</div> -->\r\n	</div>\r\n</div>';
}),n("text!views/templates/program.remove.html",[],function(){return'<div class="body" data-bind="with: program">\r\n	<div class="pad-vertical">\r\n		<div class="row">\r\n			<h3 class="span12">Confirm that you want to remove the program <span data-bind="text: name"></span></h3>\r\n		</div>\r\n	</div>\r\n	<div class="pad-vertical">\r\n		<div class="row">\r\n			<div class="span3">\r\n				<strong>Reason for removing:</strong>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<div class="span12">\r\n			<textarea data-bind="value: $parent.reason"></textarea>\r\n			</div>\r\n		</div>\r\n		<div class="row pad-top divider"><em>All modules and actions associated with this program, including the program itself, will be removed from the individual\'s plan.  You need to manually remove any data or other programs, modules, or actions that were set as a result of any actions and modules already completed that are no longer applicable.  </em>\r\n		</div>\r\n		<div class="row pad-top">\r\n			<em>This action cannot be undone	</em>\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!views/templates/system.id.edit.html",[],function(){return'<div class="row pad-top divider">\r\n	<div class="span1">\r\n		<div class="radio" data-bind="hoverToggle: \'hover\'">\r\n			<span data-bind="css: { \'checked\': primary }" class="checked">\r\n				<input type="radio" data-bind="click: $parent.setPrimary, clickBubble: false">\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<div class="span3" data-bind="with: system">\r\n		<input type="text" disabled="disabled" data-bind="value: displayLabel">\r\n	</div>\r\n	<div class="span5">\r\n		<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\', css: { \'invalid\': $parent.isInvalidProp($data.id(), \'value\') }, enable: isEditable" maxlength="100"/>\r\n	</div>\r\n	<div class="span2">\r\n		<div data-bind="chsnsingle: { options: $parent.patientSystemStatuses, value: patientSystemStatus, text: \'name\', label: \'patientSystemStatuses\' }"></div>\r\n	</div>\r\n\r\n	<div class="span1">\r\n		<a href="#" data-bind="click: $parent.deletePatientSystemId, clickBubble: false, visible: isEditable"><i class="icon-cancel red"></i></a>\r\n	</div>\r\n</div>'}),n("text!views/templates/system.ids.list.html",[],function(){return""}),n("text!views/templates/task.closeddate.html",[],function(){return'<span data-bind="DateOrDash: closedDate"></span>'}),n("text!views/templates/task.description.html",[],function(){return'<a class="edit" href="#" data-bind="text: (description() ? description() : \'-\'), click: edit, attr: { title: description }">\r\n</a>'}),n("text!views/templates/task.edit.html",[],function(){return'<div class="body" data-bind="with: task">\r\n    <div class="column">\r\n        <section class="data-set clearfix">\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Description</span>\r\n                </div>\r\n                <div class="span7">\r\n                    <input data-bind="value: description, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="500" type="text" />\r\n                    <span><em class="grey" data-bind="visible: !description()">Description is required</em></span>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Status</span>\r\n                </div>\r\n                <div class="span3">\r\n                    <div data-bind="chsnsingle: { options: $parent.goalTaskStatuses, value: status, text: \'name\', label: \'goaltaskstatuses\', disabled: $parent.isNew() }"></div>\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Start Date</span>\r\n                </div>\r\n                <div class="span6">\r\n                    <input data-bind="datepicker: startDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Target Value</span>\r\n                </div>\r\n                <div class="span9">\r\n                    <input data-bind="value: targetValue" maxlength="255" />\r\n                </div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Target Date</span>\r\n                </div>\r\n                <div class="span6">\r\n                    <input data-bind="datepicker: targetDate, datepickerOptions: { }" type="text" class="datepicker">\r\n                </div>\r\n                <div class="span3"></div>\r\n            </div>\r\n            <div class="row pad-top">\r\n                <div class="span3 align-right">\r\n                    <span class="grey">Associated Barrier(s)</span>\r\n                </div>\r\n                <!-- ko if: goal -->\r\n                <div class="span6" data-bind="multiselect: { options: $parent.computedBarriers, values: barrierIds, idValue: \'id\', text: \'name\', label: \'barriers\', stringValue: barrierString }"></div>\r\n                <!-- /ko -->\r\n                <!-- ko if: !goal() -->\r\n                <span class="span9">No barriers</span>\r\n                <!-- /ko -->\r\n            </div>\r\n			<div class="row pad-top">\r\n				<div class="row pad-top filter-toggle" data-bind="click: $parent.toggleOpen, visible: details">\r\n					<h5 class="grey pad-bottom">Existing Details</h5>\r\n					<span data-bind="visible: (!($parent.existingDetailsOpen())), text: \'...\'"></span>\r\n				</div>\r\n				<pre data-bind="text: details, visible: $parent.existingDetailsOpen" ></pre>\r\n				<div class="row pad-top divider">\r\n					<h5 class="grey pad-bottom">New Details</h5>\r\n					<textarea data-bind="value: newDetails, valueUpdate: \'afterkeydown\'" class="string optional" maxlength="5000" type="text" style="height: 10em; resize: both;"></textarea>\r\n				</div>\r\n			</div>\r\n        </section>\r\n    </div>\r\n</div>'}),n("text!views/templates/task.goal.html",[],function(){return'<div class="ellipsis">\r\n	<span data-bind="if: computedGoalName()">\r\n	    <a href="#" data-bind="text: computedGoalName, click: gotoGoal, attr: { title: computedGoalName }"></a>\r\n	</span>\r\n	<!-- ko ifnot: computedGoalName() -->\r\n		<span>-</span>\r\n	<!-- /ko -->\r\n</div>'}),n("text!views/templates/task.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\'))  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n    <div data-bind="foreach: computedTasks">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" data-bind="visible: computedTasks().length === 0">\r\n        <em>No data meets your filter criteria</em>\r\n    </div>\r\n</div>'}),n("text!views/templates/task.startdate.html",[],function(){return'<span data-bind="DateOrDash: startDate"></span>'}),n("text!views/templates/task.status.html",[],function(){return'<i data-bind="css: status().iconClass"></i>'}),n("text!views/templates/task.statusdate.html",[],function(){return'<span data-bind="DateOrDash: statusDate"></span>'}),n("text!views/templates/task.targetdate.html",[],function(){return'<span data-bind="DateOrDash: targetDate"></span>'}),n("text!views/templates/task.targetvalue.html",[],function(){return'<div class="ellipsis">\r\n    <span data-bind="with: targetValue">\r\n        <span data-bind="text: $data, attr: { title: $data }"></span>\r\n    </span>\r\n    <div data-bind="ifnot: targetValue">\r\n    	<span>-</span>\r\n    </div>\r\n</div>'}),n("text!views/templates/todo.assignedto.html",[],function(){return"<div>\r\n	<div class=\"ellipsis\" data-bind=\"if: assignedToId()\">\r\n	    <span data-bind=\"text: assignedTo() ? (assignedTo().preferredName? assignedTo().preferredName: '-') : '-', attr: { title: assignedTo() ? (assignedTo().preferredName? assignedTo().preferredName: '-') : '-' }\"></span>\r\n	</div>\r\n	<div data-bind=\"ifnot: assignedToId\">\r\n		<span>-</span>\r\n	</div>\r\n</div>"}),n("text!views/templates/todo.category.html",[],function(){return'<div>\r\n    <span data-bind="with: category">\r\n        <span data-bind="text: name"></span>\r\n    </span>\r\n    <div data-bind="ifnot: category">\r\n    	<span>-</span>\r\n    </div>\r\n</div>'}),n("text!views/templates/todo.closedon.html",[],function(){return'<span data-bind="DateOrDash: closedDate"></span>'}),n("text!views/templates/todo.duedate.html",[],function(){return'<span data-bind="DateOrDash: dueDate"></span>'}),n("text!views/templates/todo.edit.html",[],function(){return'<div class="body" data-bind="with: todo">	\r\n	<!-- ko compose: "templates/validation.errors.html" -->\r\n	<!-- /ko --> \r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Category:\r\n		</div>\r\n		<div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.toDoCategories, value: category, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Status: 		\r\n		</div>\r\n		<div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.statuses, value: status, text: \'name\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Assigned to:\r\n		</div>\r\n		<div class="span3 pad-left">\r\n			<input class="span12" type="text" data-bind="typeahead: { name: \'assignedToIdTypeAhead\', taOptions: $parent.careManagersBloodhound, displayKey: \'preferredName\'}, value: $parent.assignedToDisplay, initOptions: { minLength: 3 }" placeholder="Enter name" />\r\n		</div>\r\n		<div class="span5 align-right">\r\n			<button class="close small" data-bind="enable: assignedToId(), click: $parent.removeUserAssociation">Remove Association</button>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Due Date: 		\r\n		</div>\r\n		<div class="span3 pad-left">\r\n			<!-- <input placeholder="due date" size="30" type="text" data-bind="datepicker: dueDate"> -->\r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: dueDate, dateErrors: dueDateErrors, showInvalid: showInvalidDueDate, dateName: \'dueDateDate\', timeName: \'dueDateTime\',\r\n					datepickerOptions:{ }, datepickerDynamicOptions: {}, showTime: false, dateCss: \'span12\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n        <div class="span2 align-right grey">Start Time:     \r\n        </div>\r\n        <div class="span3 pad-left">            \r\n			<!-- ko compose: { model: \'viewmodels/templates/datetimepicker\', activationData:\r\n				{\r\n					observableDateTime: startTime, dateErrors: startTimeErrors, timeName: \'startTime\', showDate: false,\r\n					datepickerOptions:{ }, datepickerDynamicOptions: {}, showInvalidTime: showInvalidStartTime, showTime: true, timeCss: \'span12\'\r\n				}\r\n			} -->\r\n			<!-- /ko -->\r\n        </div>\r\n    </div>\r\n	<div class="row pad-top">\r\n        <div class="span2 align-right grey">Duration:     \r\n        </div>\r\n        <div class="span2 pad-left">            \r\n			<input type="text" data-bind="value: duration, valueUpdate: \'afterkeydown\', numeric: duration, \r\n						attr:{maxlength: 4, max: 1440, min: 1, title:\'Duration: enter a number of minutes from 1 to 1440\'},\r\n						css: { \'invalid\': (validationErrorsArray().indexOf(\'duration\') !== -1) }"></input>\r\n        </div>\r\n		<span class="span2 grey pad-left">(minutes)</span>\r\n    </div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Priority:\r\n		</div>\r\n		<div class="span3 pad-left">\r\n        	<div data-bind="chsnsingle: { options: $parent.priorities, value: priority, text: \'levelName\', label: \'action-status\', caption: \'Choose...\' }"></div>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Individual:\r\n		</div>\r\n		<div class="span3 pad-left">\r\n			<span data-bind="text: (patientDetails() && patientDetails().fullName()) ?  patientDetails().fullName() : \'-\'"></span>\r\n		</div>\r\n		<div class="span5 align-right">\r\n			<button class="close small" data-bind="enable: patientId(), click: $parent.removePatientAssociation">Remove Association</button>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="">\r\n		<div class="span2 align-right grey">Program(s):\r\n		</div>\r\n		<div class="span4 pad-left" data-bind="visible: patientId()">\r\n            <div data-bind="multiselect: { options: $parent.availablePrograms, values: programIds, idValue: \'id\', text: \'name\', label: \'programs\', stringValue: programString, disable: $parent.noPatient }">\r\n            </div>\r\n		</div>\r\n		<div class="span3 pad-left" data-bind="visible: !patientId()">\r\n            <span>-</span>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Title:\r\n		</div>\r\n		<div class="span9 pad-left">\r\n			<input placeholder="title" size="80" maxlength="500" type="text" data-bind="value: title, valueUpdate: \'afterkeydown\', css: { invalid: ($parent.errors().length !== 0) }">\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="span3 grey">Description:\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="span12">\r\n			<textarea data-bind="value: description" maxlength="500">\r\n			</textarea>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Created On: 		\r\n		</div>\r\n		<div class="span3 pad-left">\r\n			<span data-bind="DateOrDash: createdOn"></span>\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top">\r\n		<div class="span2 align-right grey">Updated On: 		\r\n		</div>\r\n		<div class="span3 pad-left" data-bind="DateOrDash: updatedOn">\r\n		</div>\r\n	</div>\r\n	<div class="row pad-top" data-bind="visible: !isNew()">\r\n		<button data-bind="click: $parent.deleteToDo">\r\n			<i class="icon-cancel"></i> Delete\r\n		</button>\r\n	</div>\r\n</div>'}),n("text!views/templates/todo.panel.html",[],function(){return'<div class="panel-wrapper">\r\n    <div class="row">\r\n        <!-- ko foreach: columns -->\r\n        <div class="grey hover-parent" data-bind="css: cssClass">\r\n            <span data-bind="text: displayName"></span>\r\n            <!-- ko if: $parent.canSort -->\r\n                <i class="pull-right filter-toggle pad-right " data-bind="click: $parent.toggleSort, css: ($parent.selectedSortColumn() === sortProperty ? \'fa fa-caret-up\' : ($parent.selectedSortColumn() === sortProperty + \' desc\' ? \'fa fa-caret-down\' : \'\'))"></i>\r\n            <!-- /ko -->\r\n            <!-- ko if: ($parent.canSort && ($parent.selectedSortColumn() !== sortProperty && $parent.selectedSortColumn() !== sortProperty + \' desc\') && backendSort )  -->\r\n                <i class="pull-right hover-show fa fa-caret-up filter-toggle pad-right" data-bind="click: $parent.toggleSort"></i>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko  -->\r\n    </div>\r\n	<!-- <div data-bind="visible: canLoadPrevTodos">\r\n		<div class="row divider">\r\n			<button class="small" data-bind="click: loadPrevTodos">Load prev...</button>\r\n		</div>\r\n	</div> -->\r\n    <div data-bind="foreach: computedTodos">\r\n        <div class="row divider" data-bind="foreach: $parent.columns">\r\n            <div class="ellipsis" data-bind="compose: { model: $parent, view: path }, css: cssClass"></div>\r\n        </div>\r\n    </div>\r\n	<div data-bind="visible: !todosReloading()">\r\n		<div data-bind="visible: canLoadMoreTodos">\r\n			<div class="row divider">\r\n				<button class="small" data-bind="click: loadMoreTodos">Load more...</button>\r\n			</div>\r\n		</div>\r\n		<div data-bind="visible: maxToToDosLoaded">\r\n			<div class="row divider">\r\n				<em>... cannot load more (try selecting a different sort)</em>\r\n			</div>\r\n		</div>\r\n		<div class="row" data-bind="visible: noDataFound()">\r\n			<em>No data meets your filter criteria</em>\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!views/templates/todo.patient.html",[],function(){return"<div class=\"ellipsis\">\r\n	<span data-bind=\"if: patientId() && patientDetails()\">\r\n	    <a data-bind=\"text: patientDetails().fullLastName() +', ' + patientDetails().fullFirstName(), attr: { href: '#patients/' + patientId(), title: patientDetails().fullLastName() +', ' + patientDetails().fullFirstName() }\"></a>\r\n	</span>\r\n	<!-- ko ifnot: patientId -->\r\n		<span>-</span>\r\n	<!-- /ko -->\r\n</div>"}),n("text!views/templates/todo.priority.html",[],function(){return'<div data-bind="with:priority">\r\n	<img data-bind="attr: { src: imageSource }" />\r\n</div>'}),n("text!views/templates/todo.status.html",[],function(){return'<!-- ko if: status() -->\r\n	<i data-bind="css: (status()? status().iconClass : null)"></i>\r\n<!-- /ko -->'}),n("text!views/templates/todo.title.html",[],function(){return'<a class="edit" href="#" data-bind="text: (title() ? title() : \'-\'), click: edit, attr: { title: title }">\r\n</a>'}),n("text!views/templates/todo.updatedon.html",[],function(){return'<span data-bind="DateOrDash: updatedOn"></span>'}),n("text!views/templates/validation.errors.html",[],function(){return'<div data-bind="if: validationErrors().length > 0"</div>\r\n	<div class="row validation-summary">		\r\n		<ul data-bind="foreach: validationErrors">\r\n			<li class="validation-errors">\r\n				<h5 data-bind="text: Message"></h5>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n</div>'}),n("text!views/widgets/controls.html",[],function(){return'<div class="controls">\r\n	<!-- ko if: $data.showEditButton -->\r\n    <div class="toggle" data-bind="click: $parents[1].editClickFunc, clickBubble: false" style="margin-right: 4px;">\r\n		<a href="#">\r\n			<i class="icon-edit"></i>\r\n		</a>\r\n    </div>	\r\n	<!-- /ko -->\r\n	<!-- ko if: $data.showDeleteButton -->\r\n	<div class="toggle">\r\n		<a href="#" data-bind="click: $parents[1].deleteClickFunc, clickBubble: false">\r\n			<i class="icon-cancel red"></i>\r\n		</a>\r\n	</div>\r\n	<!-- /ko -->\r\n    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: $parents[1].minimizeThisColumn, enable: $parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle double-arrow-right" style="margin-right: 2px;" data-method="open" data-target="column" data-type="add" data-bind="click: $parents[1].maximizeThisColumn, enable: !$parent.isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: $parents[1].toggleFullScreen, clickBubble: false">\r\n    </div>\r\n</div>'}),n("text!views/widgets/controls.two.html",[],function(){return'<div class="controls">\r\n    <div class="toggle single-arrow-left" data-method="open" data-target="column" data-type="remove" data-bind="click: minimizeThisColumn, enable: isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle double-arrow-right" data-method="open" data-target="column" data-type="add" data-bind="click: maximizeThisColumn, enable: isOpen(), clickBubble: false">\r\n    </div>\r\n    <div class="toggle fullscreen" data-method="fullscreen" data-target="widget" data-type="both" data-bind="click: toggleFullScreen, clickBubble: false">\r\n    </div>\r\n</div>'}),n("text!widgets/chsnmultiple/view.html",[],function(){return'<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="options: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosen: { }"></select>\r\n    <!-- /ko -->\r\n</div>'}),n("text!widgets/chsnsingle/view.html",[],function(){return'<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, \r\n						chosenUpdater: selectedValue, disable: disabled, \r\n						chosenOptions: { caption: caption, isSearch: isSearch, isCancel: isCancel, title: title }">\r\n		<option></option>\r\n	</select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, \r\n						chosenUpdater: selectedValue, disable: disabled, \r\n						chosenOptions: { caption: caption, isSearch: isSearch, isCancel: isCancel, title: title }">\r\n		<option></option>\r\n	</select>\r\n    <!-- /ko -->\r\n</div>'}),n("text!widgets/chsnsingledark/view.html",[],function(){return'<div class="wrapper">\r\n    <!-- ko if: idValue -->\r\n    <select class="dark" data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, optionsValue: idValue, value: selectedValue, chosenUpdater: selectedValue, disable: disabled, chosenOptions: { caption: caption }"></select>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: idValue -->\r\n    <select class="dark"  data-bind="chosen: computedOptions, optionsCaption: \'\', optionsText: text, value: selectedValue, chosenUpdater: selectedValue, disable: disabled, chosenOptions: { caption: caption }"></select>\r\n    <!-- /ko -->\r\n</div>'}),n("text!widgets/multiselect/view.html",[],function(){return'<div class="chosen-container chosen-container-multi chosen-container-active" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <ul class="chosen-choices" data-bind="css: { \'invalid\': isInvalid() }">\r\n        <li class="search-field">\r\n            <input type="text" class="default" data-bind="hasFocus: isInFocus, value: computedLabel, click: toggleDropdown , disable: isDisabled" readonly="readonly">\r\n        </li>\r\n    </ul>\r\n    <div class="chosen-drop" data-bind="visible: showing, click: stopClosing">\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.checkForIdValue($data[$parent.idValue]()) }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'}),n("text!widgets/singleselect/view.html",[],function(){return'<div class="chosen-container chosen-container-single chosen-container-single-nosearch" style="width: 150px;" title="" id="filter_chosen" data-bind="css: { \'chosen-with-drop\': showing, \'chosen-disabled\': computedOptions().length === 0 }">\r\n    <a class="chosen-single" data-bind="click: toggleDropdown, attr: { \'data-phyautomation\': label + \'-dropdown-button\' }, event: { mouseover: stopClosing, mouseleave: startClosing }, disable: isDisabled">\r\n        <span data-bind="text: computedLabel"></span>\r\n        <div>\r\n            <b></b>\r\n        </div>\r\n    </a>\r\n    <div class="chosen-drop" data-bind="visible: showing, event: { mouseover: stopClosing, mouseleave: startClosing }">\r\n        <div class="chosen-search">\r\n            <input type="text" autocomplete="off" readonly="" />\r\n        </div>\r\n        <ul class="chosen-results" data-bind="foreach: computedOptions, attr: { \'data-phyautomation\': label + \'-dropdown-results\' } ">\r\n            <li class="active-result" data-bind="click: $parent.selectOption, css: { \'result-selected\': $parent.selectedValue() === $data }">\r\n                <span data-bind="text: thisText" class="ellipsis"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <!-- ko if : computedOptions().length === 0 -->\r\n    <p><em class="grey" data-bind="text: \'No \' + label + \' available\'"></em></p>\r\n    <!-- /ko -->\r\n</div>'}),t(["main"])}();
//# sourceMappingURL=main.build.js.map//# sourceMappingURL=main-built.js.map